"use strict";
(() => {
var exports = {};
exports.id = 653;
exports.ids = [653,8702,9139,5593,4812,7897];
exports.modules = {

/***/ 54812:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16159);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53169);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(37278);
/* harmony import */ var _Page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(84842);
/* harmony import */ var _SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(78720);
/* harmony import */ var _UserProvider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(51927);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Page__WEBPACK_IMPORTED_MODULE_6__, _SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_7__]);
([_Page__WEBPACK_IMPORTED_MODULE_6__, _SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
const _excluded = ["LoggedInUser", "loadingLoggedInUser"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }










/**
 * A wrapper around `Page` that will display a spinner while user is loading.
 * If authentication fails, users will be prompted with a form to login that will
 * redirect them to the correct page once they do.
 *
 * Unless a `noRobots={true}` is provided, pages wrapped with this helper will not be indexed
 * by default.
 *
 * ## Usage
 *
 * ```jsx
 * <AuthenticatedPage>
 *   {(LoggedInUser) => (
 *     <div>
 *       Hello {LoggedInUser.collective.name}!
 *     </div>
 *   )}
 * </AuthenticatedPage>
 * ```
 */




class AuthenticatedPage extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {
  renderContent(loadingLoggedInUser, LoggedInUser) {
    if (!LoggedInUser) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Container__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        display: "flex",
        justifyContent: "center",
        py: [5, null, 6],
        px: 2,
        children: loadingLoggedInUser ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_3__/* .Flex */ .kC, {
          flexDirection: "column",
          alignItems: "center",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
            type: "warning",
            mb: 4,
            maxWidth: 400,
            withIcon: true,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "authorization.loginRequired",
              defaultMessage: [{
                "type": 0,
                "value": "You need to be logged in to continue."
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .ZP, {
            defaultForm: "signin",
            disableSignup: this.props.disableSignup
          })]
        })
      });
    } else if (this.props.rootOnly && !LoggedInUser.isRoot) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_3__/* .Flex */ .kC, {
        flexDirection: "column",
        alignItems: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
          type: "warning",
          my: [5, 6, 7],
          maxWidth: 400,
          withIcon: true,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
            id: "AuthenticatedPage.RootOnly",
            defaultMessage: [{
              "type": 0,
              "value": "This page is limited to site administrators"
            }]
          })
        })
      });
    } else if (typeof this.props.children === 'function') {
      return this.props.children(LoggedInUser);
    } else {
      return this.props.children;
    }
  }

  render() {
    const _this$props = this.props,
          {
      LoggedInUser,
      loadingLoggedInUser
    } = _this$props,
          pageProps = _objectWithoutProperties(_this$props, _excluded);

    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Page__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, _objectSpread(_objectSpread({
      noRobots: true
    }, pageProps), {}, {
      children: this.renderContent(loadingLoggedInUser, LoggedInUser)
    }));
  }

}

AuthenticatedPage.__docgenInfo = {
  "description": "A wrapper around `Page` that will display a spinner while user is loading.\nIf authentication fails, users will be prompted with a form to login that will\nredirect them to the correct page once they do.\n\nUnless a `noRobots={true}` is provided, pages wrapped with this helper will not be indexed\nby default.\n\n## Usage\n\n```jsx\n<AuthenticatedPage>\n  {(LoggedInUser) => (\n    <div>\n      Hello {LoggedInUser.collective.name}!\n    </div>\n  )}\n</AuthenticatedPage>\n```",
  "methods": [{
    "name": "renderContent",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "loadingLoggedInUser",
      "type": null
    }, {
      "name": "LoggedInUser",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "AuthenticatedPage",
  "props": {
    "children": {
      "description": "A child renderer to call when user is properly authenticated",
      "type": {
        "name": "union",
        "value": [{
          "name": "func"
        }, {
          "name": "node"
        }]
      },
      "required": false
    },
    "disableSignup": {
      "description": "Whether user can signup on this page",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "rootOnly": {
      "description": "Whether this page is limited to root users",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "loadingLoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "LoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_UserProvider__WEBPACK_IMPORTED_MODULE_8__/* .withUser */ .ns)(AuthenticatedPage));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 91739:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "h": () => (/* binding */ ChartWrapper)
/* harmony export */ });
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(580);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_1__);


const ChartWrapper = styled_components__WEBPACK_IMPORTED_MODULE_1___default().div.withConfig({
  displayName: "ChartWrapper",
  componentId: "sc-1nbt4v5-0"
})(["position:relative;.apexcharts-legend-series{background:white;padding:8px;border-radius:10px;& > span{vertical-align:middle;}}.apexcharts-toolbar{z-index:0;}.apexcharts-legend-marker{margin-right:8px;}"]);
ChartWrapper.propTypes = {
  children: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().node)
};

/***/ }),

/***/ 68654:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(95834);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(styled_system__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82525);
/* harmony import */ var _lib_image_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(89314);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97079);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69078);
/* harmony import */ var _Currency__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(93129);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(92129);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }














const CardWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__CardWrapper",
  componentId: "sc-1fihsat-0"
})(["display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;vertical-align:top;position:relative;box-sizing:border-box;width:215px;min-height:380px;border-radius:15px;background-color:#ffffff;box-shadow:0 1px 3px 0 rgba(45,77,97,0.2);overflow:hidden;text-decoration:none !important;", ""], styled_system__WEBPACK_IMPORTED_MODULE_4__.width);
const NameWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__NameWrapper",
  componentId: "sc-1fihsat-1"
})(["min-height:20px;font-size:14px;margin:5px;font-weight:700;text-align:center;color:#303233;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);
const MembershipWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__MembershipWrapper",
  componentId: "sc-1fihsat-2"
})(["border-top:1px solid #f2f2f2;padding:1rem;color:#303233;"]);
const StatsWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(MembershipWrapper).withConfig({
  displayName: "CollectiveCard__StatsWrapper",
  componentId: "sc-1fihsat-3"
})(["display:flex;width:100%;box-sizing:border-box;justify-content:space-around;"]);
const ValueWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__ValueWrapper",
  componentId: "sc-1fihsat-4"
})(["font-weight:normal;text-align:center;color:#303233;font-size:1.4rem;margin:3px 2px 0px;text-align:center;margin:auto;"]);
const LabelWrapper = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__LabelWrapper",
  componentId: "sc-1fihsat-5"
})(["font-size:9px;text-align:center;font-weight:300;color:#a8afb3;text-transform:uppercase;text-align:center;margin:auto;"]);
const CommaList = styled_components__WEBPACK_IMPORTED_MODULE_3___default().ul.withConfig({
  displayName: "CollectiveCard__CommaList",
  componentId: "sc-1fihsat-6"
})(["display:inline;list-style:none;padding:0px;li{display:inline;}li::after{content:', ';}li:last-child::after{content:'';}"]);

class CollectiveCard extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.defineMessages)({
      'membership.role.host': {
        id: "Member.Role.HOST",
        defaultMessage: [{
          "type": 0,
          "value": "Host"
        }]
      },
      'roles.admin.label': {
        id: "Member.Role.ADMIN",
        defaultMessage: [{
          "type": 0,
          "value": "Admin"
        }]
      },
      'roles.member.label': {
        id: "Member.Role.MEMBER",
        defaultMessage: [{
          "type": 0,
          "value": "Core Contributor"
        }]
      },
      'tier.name.sponsor': {
        id: "tier.name.sponsor",
        defaultMessage: [{
          "type": 0,
          "value": "sponsor"
        }]
      },
      'tier.name.backer': {
        id: "tier.name.backer",
        defaultMessage: [{
          "type": 0,
          "value": "backer"
        }]
      }
    });
  }

  render() {
    const {
      intl,
      collective,
      membership
    } = this.props;
    let {
      memberships
    } = this.props;
    memberships = memberships || (membership ? [membership] : []);

    const getTierName = membership => {
      const tierName = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(membership, 'tier.name');

      const role = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(membership, 'role');

      if (!tierName) {
        switch (role) {
          case 'HOST':
            return intl.formatMessage(this.messages['membership.role.host']);

          case 'ADMIN':
            return intl.formatMessage(this.messages['roles.admin.label']);

          case 'MEMBER':
            return intl.formatMessage(this.messages['roles.member.label']);

          default:
            if (collective.type === 'ORGANIZATION') {
              return intl.formatMessage(this.messages['tier.name.sponsor']);
            } else {
              return intl.formatMessage(this.messages['tier.name.backer']);
            }

        }
      }

      return tierName;
    };

    const membershipDates = memberships.map(m => m.createdAt);
    membershipDates.sort((a, b) => {
      return b - a;
    });
    const oldestMembershipDate = membershipDates.length ? membershipDates[0] : null;
    const roles = new Set(memberships.map(m => getTierName(m)));
    const coverStyle = {};
    const backgroundImage = (0,_lib_image_utils__WEBPACK_IMPORTED_MODULE_6__/* .imagePreview */ .Z_)(collective.backgroundImage || lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'parentCollective.backgroundImage'), _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__/* .defaultBackgroundImage.COLLECTIVE */ .am.COLLECTIVE, {
      width: 400
    });

    if (!coverStyle.backgroundImage && backgroundImage) {
      coverStyle.backgroundImage = `url('${backgroundImage}')`;
      coverStyle.backgroundSize = 'cover';
      coverStyle.backgroundPosition = 'center center';
    }

    const truncatedDescription = collective.description && (0,_lib_utils__WEBPACK_IMPORTED_MODULE_7__/* .firstSentence */ .u5)(collective.description, 80);
    const description = collective.description;
    let route;

    if (collective.type === 'EVENT') {
      route = `/${collective.parentCollective?.slug || 'collective'}/events/${collective.slug}`;
    } else {
      route = `/${collective.slug}`;
    }

    const backersCount = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'backers.totalCount');

    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Link__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      href: route,
      target: "_top",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(CardWrapper, _objectSpread(_objectSpread({
        className: `CollectiveCard ${collective.type}`
      }, this.props), {}, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          position: "relative",
          overflow: "hidden",
          width: "100%",
          height: "14rem",
          borderBottom: "5px solid #46b0ed",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            position: "absolute",
            top: "0",
            left: "0",
            width: "100%",
            height: "100%",
            backgroundSize: "cover",
            backgroundPosition: "center",
            style: coverStyle
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            display: "flex",
            height: "100%",
            alignItems: "center",
            justifyContent: "center",
            position: "absolute",
            left: "0",
            right: "0",
            top: "0",
            bottom: "0",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP, {
              collective: collective,
              radius: 65
            })
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          padding: "1rem",
          minHeight: "11rem",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(NameWrapper, {
            children: collective.name
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            fontWeight: "normal",
            textAlign: "center",
            color: "#787d80",
            fontSize: "1.2rem",
            lineHeight: "1.3",
            margin: "0 5px",
            minHeight: "50px",
            title: description,
            children: truncatedDescription
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          fontSize: "1.1rem",
          width: "100%",
          minHeight: "6rem",
          textAlign: "center",
          children: [collective.type === 'COLLECTIVE' && backersCount > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(StatsWrapper, {
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "backers",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: backersCount
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "collective.card.stats.backers",
                  defaultMessage: [{
                    "type": 6,
                    "value": "n",
                    "options": {
                      "one": {
                        "value": [{
                          "type": 0,
                          "value": "backer"
                        }]
                      },
                      "other": {
                        "value": [{
                          "type": 0,
                          "value": "backers"
                        }]
                      }
                    },
                    "offset": 0,
                    "pluralType": "cardinal"
                  }],
                  values: {
                    n: backersCount
                  }
                })
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "yearlyBudget",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Currency__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                  value: collective.stats.yearlyBudget.valueInCents,
                  currency: collective.stats.yearlyBudget.currency
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "collective.card.stats.yearlyBudget",
                  defaultMessage: [{
                    "type": 0,
                    "value": "yearly budget"
                  }]
                })
              })]
            })]
          }), collective.memberOf && collective.memberOf.totalCount > 0 && collective.type === 'ORGANIZATION' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(StatsWrapper, {
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "backers",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: collective.memberOf.totalCount
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "collective.card.memberOf.count",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Contributor to "
                  }, {
                    "type": 6,
                    "value": "n",
                    "options": {
                      "one": {
                        "value": [{
                          "type": 0,
                          "value": "Collective"
                        }]
                      },
                      "other": {
                        "value": [{
                          "type": 0,
                          "value": "Collectives"
                        }]
                      }
                    },
                    "offset": 0,
                    "pluralType": "cardinal"
                  }],
                  values: {
                    n: collective.memberOf.totalCount
                  }
                })
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "yearlyBudget",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Currency__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                  value: collective.stats.totalAmountSpent.valueInCents,
                  currency: collective.stats.totalAmountSpent.currency
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "AmountContributed",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Contributed"
                  }]
                })
              })]
            })]
          }), collective.stats && collective.stats.collectives && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(StatsWrapper, {
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "backers",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'stats.collectives.hosted')
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "collective.card.collectives.count",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Hosted "
                  }, {
                    "type": 6,
                    "value": "n",
                    "options": {
                      "one": {
                        "value": [{
                          "type": 0,
                          "value": "Collective"
                        }]
                      },
                      "other": {
                        "value": [{
                          "type": 0,
                          "value": "Collectives"
                        }]
                      }
                    },
                    "offset": 0,
                    "pluralType": "cardinal"
                  }],
                  values: {
                    n: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'stats.collectives.hosted')
                  }
                })
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
              className: "currency",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(ValueWrapper, {
                children: collective.currency
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(LabelWrapper, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "currency",
                  defaultMessage: [{
                    "type": 0,
                    "value": "currency"
                  }]
                })
              })]
            })]
          }), roles && roles.size > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(MembershipWrapper, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              minHeight: "13px",
              fontWeight: "700",
              letterSpacing: "3px",
              color: "#75cc1f",
              textTransform: "uppercase",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(CommaList, {
                children: Array.from(roles).map(role => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("li", {
                  children: role
                }, role))
              })
            }), oldestMembershipDate && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              minHeight: "18px",
              fontSize: "12px",
              fontWeight: "500",
              lineHeight: "1.5",
              textAlign: "center",
              color: "#aab0b3",
              textTransform: "capitalize",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "membership.since",
                defaultMessage: [{
                  "type": 0,
                  "value": "since "
                }, {
                  "type": 1,
                  "value": "date"
                }],
                values: {
                  date: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedDate, {
                    value: oldestMembershipDate,
                    month: "long",
                    year: "numeric"
                  })
                }
              })
            })]
          }), memberships.map(membership => membership.role === 'BACKER' && lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(membership, 'stats.totalDonations') > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(MembershipWrapper, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              fontSize: "2rem",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Currency__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                value: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(membership, 'stats.totalDonations'),
                currency: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(membership, 'collective.currency')
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "membership.totalDonations.title",
              defaultMessage: [{
                "type": 0,
                "value": "Amount contributed"
              }]
            })]
          }, membership.id))]
        })]
      }))
    });
  }

}

CollectiveCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveCard",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "membership": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "memberships": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_2__.injectIntl)(CollectiveCard));

/***/ }),

/***/ 10547:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZP": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony exports Title, collectiveSourcePaymentMethodsQuery */
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51858);
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_truncate__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_material_RadioButtonChecked__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47505);
/* harmony import */ var _styled_icons_material_RadioButtonChecked__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_RadioButtonChecked__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styled_icons_material_RadioButtonUnchecked__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24545);
/* harmony import */ var _styled_icons_material_RadioButtonUnchecked__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_RadioButtonUnchecked__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19099);
/* harmony import */ var _styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(17809);
/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(memoize_one__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1808);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97079);
/* harmony import */ var _CollectivePicker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(40242);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(69078);
/* harmony import */ var _CreateGiftCardsSuccess__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(10829);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(92129);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(53169);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(37278);
/* harmony import */ var _PaymentMethodSelect__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(72712);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(87268);
/* harmony import */ var _StyledCheckbox__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(41433);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputAmount__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(54029);
/* harmony import */ var _StyledMultiEmailInput__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(31997);
/* harmony import */ var _StyledSelectCreatable__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(7716);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CollectivePicker__WEBPACK_IMPORTED_MODULE_14__]);
_CollectivePicker__WEBPACK_IMPORTED_MODULE_14__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






























const MIN_AMOUNT = 500;
const MAX_AMOUNT = 100000000;
const WARN_NB_GIFT_CARDS_WITHOUT_HOST_LIMIT = 10;
const WARN_NB_GIFT_CARDS_WITH_CREDIT_CARD = 10;
const WARN_GIFT_CARDS_AMOUNT_WITH_CREDIT_CARD = 1000e2;
const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_9__.defineMessages)({
  emailCustomMessage: {
    id: "giftCards.email.customMessage",
    defaultMessage: [{
      "type": 0,
      "value": "Will be sent in the invitation email"
    }]
  },
  limitToHostsPlaceholder: {
    id: "giftCards.limitToHosts.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "All Hosts"
    }]
  },
  limitToCollectivesPlaceholder: {
    id: "giftCards.limitToCollectives.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "All Collectives "
    }, {
      "type": 6,
      "value": "nbHosts",
      "options": {
        "=0": {
          "value": []
        },
        "=1": {
          "value": [{
            "type": 0,
            "value": "under the selected Host"
          }]
        },
        "other": {
          "value": [{
            "type": 0,
            "value": "under the selected Hosts"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  },
  notBatched: {
    id: "giftCards.notBatched",
    defaultMessage: [{
      "type": 0,
      "value": "Not batched"
    }]
  }
});

const InlineField = ({
  name,
  children,
  label,
  isLabelClickable
}) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
  flexWrap: "wrap",
  alignItems: "center",
  mb: "2.5em",
  className: `field-${name}`,
  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
    width: [1, 0.3],
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("label", {
      htmlFor: `giftcard-${name}`,
      style: {
        cursor: isLabelClickable ? 'pointer' : 'inherit',
        width: '100%'
      },
      children: label
    })
  }), children]
});

/** Entry title */
const Title = styled_components__WEBPACK_IMPORTED_MODULE_10___default().summary.withConfig({
  displayName: "CreateGiftCardsForm__Title",
  componentId: "sc-1c91oz8-0"
})([""]);
const DeliverTypeRadioSelector = styled_components__WEBPACK_IMPORTED_MODULE_10___default()(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC).withConfig({
  displayName: "CreateGiftCardsForm__DeliverTypeRadioSelector",
  componentId: "sc-1c91oz8-1"
})(["justify-content:space-evenly;align-items:center;padding:1.25em 1em;margin-bottom:2.5em;background:white;box-shadow:0px 3px 10px ", ";border-top:1px solid ", ";border-bottom:1px solid ", ";"], (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.black.200'), (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.black.200'), (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.black.200'));
const RadioButtonContainer = styled_components__WEBPACK_IMPORTED_MODULE_10___default().label.withConfig({
  displayName: "CreateGiftCardsForm__RadioButtonContainer",
  componentId: "sc-1c91oz8-2"
})(["display:flex;flex-direction:column;cursor:pointer;width:auto;svg{height:30px;width:30px;color:", ";transition:color 0.2s;&:hover{color:", ";}}"], (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.primary.400'), (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.primary.500'));

const RadioButtonWithLabel = ({
  checked,
  onClick,
  name,
  children
}) => {
  const icon = checked ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_styled_icons_material_RadioButtonChecked__WEBPACK_IMPORTED_MODULE_4__.RadioButtonChecked, {}) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_styled_icons_material_RadioButtonUnchecked__WEBPACK_IMPORTED_MODULE_5__.RadioButtonUnchecked, {});
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(RadioButtonContainer, {
    htmlFor: "radio-buttons",
    "data-name": name,
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("div", {
      role: "presentation",
      onClick: onClick,
      onKeyDown: event => {
        if (event.key === 'Enter') {
          event.preventDefault();
          onClick();
        }
      },
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
        className: "radio-btn",
        textAlign: "center",
        children: icon
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("div", {
        id: "radio-buttons",
        style: {
          marginTop: 8,
          cursor: 'pointer'
        },
        children: children
      })]
    })
  });
};

const FieldLabelDetails = styled_components__WEBPACK_IMPORTED_MODULE_10___default().span.withConfig({
  displayName: "CreateGiftCardsForm__FieldLabelDetails",
  componentId: "sc-1c91oz8-3"
})(["color:", ";font-weight:normal;"], (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_6__.themeGet)('colors.black.600'));

class CreateGiftCardsForm extends react__WEBPACK_IMPORTED_MODULE_2__.Component {
  constructor(props) {
    super(props);

    _defineProperty(this, "getBatchesOptions", memoize_one__WEBPACK_IMPORTED_MODULE_8___default()((batches, intl) => {
      const noBatchOption = {
        label: intl.formatMessage(messages.notBatched),
        value: null
      };

      if (!batches) {
        return [noBatchOption];
      } else {
        return [noBatchOption, ...batches.filter(b => b.name !== null).map(batch => ({
          label: batch.name,
          value: batch.name
        }))];
      }
    }));

    this.form = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createRef();
    this.onSubmit = this.onSubmit.bind(this);
    this.state = {
      deliverType: 'email',
      // email or manual
      values: {
        batch: null,
        amount: MIN_AMOUNT,
        emails: [],
        customMessage: '',
        numberOfGiftCards: 1,
        limitedToHosts: [],
        expiryDate: dayjs__WEBPACK_IMPORTED_MODULE_7___default()().add(12, 'month').format('YYYY-MM-DD')
      },
      errors: {
        emails: []
      },
      multiEmailsInitialState: null,
      submitting: false,
      createdGiftCards: null,
      serverError: null,
      hasAcceptedWarning: false
    };
  }

  onChange(fieldName, value) {
    const errors = {}; // Format value

    if (fieldName === 'emails') {
      const {
        emails,
        invalids
      } = value;
      value = emails;
      errors.emails = invalids;
    } else if (fieldName === 'numberOfGiftCards') {
      const intNumberOfGiftCards = parseInt(value);
      value = !isNaN(intNumberOfGiftCards) ? intNumberOfGiftCards : 1;
    } // Set value


    this.setState(state => ({
      values: Object.assign(state.values, {
        [fieldName]: value
      }),
      errors: Object.assign(state.errors, errors)
    }));
  }

  isSubmitEnabled() {
    // Others fields validity are checked with HTML5 validation (see `onSubmit`)
    const {
      values,
      errors,
      deliverType
    } = this.state;

    if (this.isPaymentMethodDiscouraged() && !this.state.hasAcceptedWarning) {
      return false;
    }

    if (deliverType === 'email') {
      return values.emails.length > 0 && errors.emails.length === 0;
    } else {
      return values.numberOfGiftCards !== 0;
    }
  }

  onSubmit(e) {
    e.preventDefault();
    const {
      values,
      submitting,
      deliverType
    } = this.state;

    if (!submitting && (0,_lib_utils__WEBPACK_IMPORTED_MODULE_13__/* .reportValidityHTML5 */ .CR)(this.form.current)) {
      const paymentMethod = values.paymentMethod || this.getDefaultPaymentMethod();
      const limitations = {};

      if (this.canLimitToFiscalHosts()) {
        limitations.limitedToHostCollectiveIds = this.optionsToIdsList(values.limitedToHosts);
      }

      this.setState({
        submitting: true
      });

      const variables = _objectSpread({
        CollectiveId: this.props.collectiveId,
        amount: values.amount,
        PaymentMethodId: paymentMethod.id,
        expiryDate: values.expiryDate,
        batch: values.batch
      }, limitations);

      if (deliverType === 'email') {
        variables.emails = values.emails;
        variables.customMessage = values.customMessage;
      } else if (deliverType === 'manual') {
        variables.numberOfGiftCards = values.numberOfGiftCards;
      }

      this.props.createGiftCards({
        variables
      }).then(({
        data
      }) => {
        this.setState({
          createdGiftCards: data.createGiftCards,
          submitting: false
        });
        window.scrollTo(0, 0);
      }).catch(e => {
        this.setState({
          serverError: e.message,
          submitting: false
        });
      });
    }
  }

  getDefaultPaymentMethod() {
    return lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.props, 'data.Collective.paymentMethods', [])[0];
  }

  getError(fieldName) {
    return this.state.errors[fieldName];
  }

  changeDeliverType(deliverType) {
    this.setState(state => {
      // Use the emails count to pre-fill the number count
      const values = _objectSpread({}, state.values);

      if (state.deliverType === 'email' && deliverType === 'manual' && values.emails.length) {
        values.numberOfGiftCards = values.emails.length;
      }

      return {
        values,
        deliverType
      };
    });
  }

  getGiftCardsCount() {
    const {
      values,
      deliverType
    } = this.state;
    return deliverType === 'email' ? values.emails.length : values.numberOfGiftCards;
  }

  shouldLimitToSpecificHosts() {
    return this.canLimitToFiscalHosts() && !this.state.values.limitedToHosts?.length && this.getGiftCardsCount() >= WARN_NB_GIFT_CARDS_WITHOUT_HOST_LIMIT;
  }

  isPaymentMethodDiscouraged() {
    const {
      values
    } = this.state;
    const paymentMethod = values.paymentMethod || this.getDefaultPaymentMethod();

    if (paymentMethod?.type !== 'CREDITCARD') {
      return false;
    }

    const count = this.getGiftCardsCount();
    return count >= WARN_NB_GIFT_CARDS_WITH_CREDIT_CARD || count * values.amount >= WARN_GIFT_CARDS_AMOUNT_WITH_CREDIT_CARD;
  }

  renderSubmit() {
    const {
      submitting
    } = this.state;
    const count = this.getGiftCardsCount();
    const enable = this.isSubmitEnabled();
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
      type: "submit",
      buttonSize: "large",
      buttonStyle: "primary",
      minWidth: "16em",
      disabled: !submitting && !enable,
      loading: submitting,
      "data-cy": "submit-new-gift-cards",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
        id: "giftCards.generate",
        defaultMessage: [{
          "type": 0,
          "value": "Create "
        }, {
          "type": 1,
          "value": "count"
        }, {
          "type": 0,
          "value": " gift cards"
        }],
        values: {
          count
        }
      })
    });
  }

  renderNoPaymentMethodMessage() {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
      justifyContent: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Link__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
        href: `/${this.props.collectiveSlug}/admin/payment-methods`,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
          buttonSize: "large",
          mt: "2em",
          justifyContent: "center",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "giftCards.create.requirePM",
            defaultMessage: [{
              "type": 0,
              "value": "Add a payment method to create gift cards"
            }]
          })
        })
      })
    });
  }

  renderEmailFields() {
    const {
      submitting,
      errors,
      multiEmailsInitialState
    } = this.state;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        flexDirection: "column",
        mb: "2em",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("label", {
          style: {
            width: '100%'
          },
          htmlFor: "gift-cards-recipients",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "giftCards.create.recipients",
              defaultMessage: [{
                "type": 0,
                "value": "Recipients"
              }]
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(FieldLabelDetails, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "giftCards.create.recipientsDetails",
                defaultMessage: [{
                  "type": 0,
                  "value": "A list of emails that will receive a gift card"
                }]
              })
            })]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledMultiEmailInput__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          id: "gift-cards-recipients",
          className: "gift-cards-recipients",
          mt: "0.25em",
          invalids: errors.emails,
          initialState: multiEmailsInitialState,
          onClose: s => this.setState({
            multiEmailsInitialState: s
          }),
          onChange: value => this.onChange('emails', value),
          disabled: submitting
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
        name: "customMessage",
        label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
          flexDirection: "column",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "giftCards.create.customMessage",
            defaultMessage: [{
              "type": 0,
              "value": "Custom message"
            }]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(FieldLabelDetails, {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "forms.optional",
              defaultMessage: [{
                "type": 0,
                "value": "Optional"
              }]
            })
          })]
        }),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .ZP, {
          id: "giftcard-customMessage",
          type: "text",
          maxLength: "255",
          placeholder: this.props.intl.formatMessage(messages.emailCustomMessage),
          onChange: e => this.onChange('customMessage', e.target.value),
          style: {
            flexGrow: 1
          },
          disabled: submitting
        })
      })]
    });
  }

  renderManualFields() {
    const {
      collectiveSettings
    } = this.props;
    const giftCardsMaxDailyCount = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collectiveSettings, `giftCardsMaxDailyCount`) || 100;
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Container__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
      display: "flex",
      flexDirection: "column",
      width: 1,
      justifyContent: "center",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        justifyContent: "center",
        mt: 3,
        mb: 4,
        alignItems: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("label", {
          htmlFor: "giftcard-numberOfGiftCards",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "giftCards.create.number",
            defaultMessage: [{
              "type": 0,
              "value": "Number of gift cards"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .ZP, {
          id: "giftcard-numberOfGiftCards",
          name: "giftcard-numberOfGiftCards",
          type: "number",
          step: "1",
          min: "1",
          ml: 3,
          max: giftCardsMaxDailyCount,
          maxWidth: "6.5em",
          onChange: e => this.onChange('numberOfGiftCards', e.target.value),
          value: this.state.values.numberOfGiftCards,
          disabled: this.state.submitting,
          onWheel: e => {
            // Prevent accidentally changing the number when scrolling
            e.preventDefault();
            e.target.blur();
          }
        })]
      })
    });
  }

  optionsToIdsList(options) {
    return options ? options.map(({
      value
    }) => value.id) : [];
  }

  canLimitToFiscalHosts() {
    const paymentMethod = this.state.values.paymentMethod || this.getDefaultPaymentMethod();
    return !(0,_lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_11__/* .isPrepaid */ .bk)(paymentMethod); // Prepaid are already limited to specific fiscal hosts
  }
  /** Get batch options for select. First option is always "No batch" */


  render() {
    const {
      data,
      intl,
      collectiveSlug,
      currency,
      collectiveSettings
    } = this.props;
    const {
      submitting,
      values,
      createdGiftCards,
      serverError,
      deliverType
    } = this.state;

    const loading = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'loading');

    const error = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'error');

    const paymentMethods = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'Collective.paymentMethods', []);

    const batches = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'Collective.giftCardsBatches');

    const hosts = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'allHosts.collectives', []);

    const batchesOptions = this.getBatchesOptions(batches, intl);

    if (loading) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {});
    } else if (error) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
        type: "error",
        withIcon: true,
        children: error.message
      });
    } else if (paymentMethods.length === 0) {
      return this.renderNoPaymentMethodMessage();
    } else if (createdGiftCards) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_CreateGiftCardsSuccess__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        cards: createdGiftCards,
        deliverType: deliverType,
        collectiveSlug: collectiveSlug
      });
    }

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("form", {
      ref: this.form,
      onSubmit: this.onSubmit,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
        type: "info",
        fontSize: "13px",
        withIcon: true,
        mb: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "GiftCard.Limitinfo",
          defaultMessage: [{
            "type": 0,
            "value": "Your account is currently limited to "
          }, {
            "type": 1,
            "value": "limit"
          }, {
            "type": 0,
            "value": " gift cards per day. If you want to increase that limit, please contact "
          }, {
            "type": 8,
            "value": "SupportLink",
            "children": [{
              "type": 0,
              "value": "support"
            }]
          }, {
            "type": 0,
            "value": "."
          }],
          values: {
            SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_18__/* .I18nSupportLink */ .wl,
            limit: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collectiveSettings, `giftCardsMaxDailyCount`) || 100
          }
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        flexDirection: "column",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
          name: "amount",
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Fields.amount",
            defaultMessage: [{
              "type": 0,
              "value": "Amount"
            }]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledInputAmount__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z, {
            id: "giftcard-amount",
            currency: currency,
            prepend: currency,
            onChange: value => this.onChange('amount', value),
            error: this.getError('amount'),
            value: values.amount,
            min: MIN_AMOUNT,
            max: MAX_AMOUNT,
            disabled: submitting,
            required: true
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
          name: "paymentMethod",
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "paymentmethod.label",
            defaultMessage: [{
              "type": 0,
              "value": "Payment Method"
            }]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_PaymentMethodSelect__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            inputId: "gift-card-payment-method",
            disabled: submitting,
            paymentMethods: paymentMethods,
            defaultPaymentMethod: this.getDefaultPaymentMethod(),
            onChange: pm => this.onChange('paymentMethod', pm)
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
          name: "expiryDate",
          isLabelClickable: true,
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "x/oJ17",
            defaultMessage: [{
              "type": 0,
              "value": "Expiry date"
            }]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .ZP, {
            id: "giftcard-expiryDate",
            name: "expiryDate",
            value: values.expiryDate,
            onChange: e => this.onChange('expiryDate', e.target.value),
            type: "date",
            required: true,
            min: dayjs__WEBPACK_IMPORTED_MODULE_7___default()().add(1, 'day').format('YYYY-MM-DD')
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
          name: "batch",
          label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "giftCards.batch",
              defaultMessage: [{
                "type": 0,
                "value": "Batch name"
              }]
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(FieldLabelDetails, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "forms.optional",
                defaultMessage: [{
                  "type": 0,
                  "value": "Optional"
                }]
              })
            })]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledSelectCreatable__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
            id: "giftcard-batch",
            inputId: "giftcard-batch",
            onChange: ({
              value
            }) => this.onChange('batch', lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default()(value, {
              length: 200
            })),
            minWidth: 300,
            disabled: submitting,
            fontSize: "14px",
            options: batchesOptions,
            defaultValue: batchesOptions[0]
          })
        }), this.canLimitToFiscalHosts() && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(InlineField, {
          name: "limitToHosts",
          label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "giftCards.create.limitToHosts",
              defaultMessage: [{
                "type": 0,
                "value": "Limit to the following Hosts"
              }]
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(FieldLabelDetails, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "forms.optional",
                defaultMessage: [{
                  "type": 0,
                  "value": "Optional"
                }]
              })
            })]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_CollectivePicker__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, {
            inputId: "create-gift-card-host-picker",
            placeholder: intl.formatMessage(messages.limitToHostsPlaceholder),
            disabled: hosts.length === 0,
            minWidth: 300,
            maxWidth: 600,
            sortFunc: collectives => collectives
            /** Sort is handled by the API */
            ,
            groupByType: false,
            collectives: hosts,
            defaultValue: values.limitedToHosts,
            onChange: options => this.onChange('limitedToHosts', options),
            isMulti: true,
            useCompactMode: values.limitedToHosts?.length >= 3
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(DeliverTypeRadioSelector, {
          className: "deliver-type-selector",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(RadioButtonWithLabel, {
            name: "email",
            checked: deliverType === 'email',
            onClick: () => this.changeDeliverType('email'),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "giftCards.create.sendEmails",
              defaultMessage: [{
                "type": 0,
                "value": "Send the cards by email"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(RadioButtonWithLabel, {
            name: "manual",
            checked: deliverType === 'manual',
            onClick: () => this.changeDeliverType('manual'),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "giftCards.create.generateCodes",
              defaultMessage: [{
                "type": 0,
                "value": "I'll send the codes myself"
              }]
            })
          })]
        }), deliverType === 'email' && this.renderEmailFields(), deliverType === 'manual' && this.renderManualFields(), serverError && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          type: "error",
          withIcon: true,
          children: serverError
        }), this.shouldLimitToSpecificHosts() && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          type: "warning",
          fontSize: "14px",
          lineHeight: "20px",
          withIcon: true,
          mb: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "f7yDbJ",
            defaultMessage: [{
              "type": 0,
              "value": "We strongly recommend limiting your gift cards to specific fiscal hosts - otherwise, malicious users could create fake Collectives to withdraw the funds. Collectives under trusted fiscal hosts have all been vetted and confirmed as legitimate."
            }],
            values: {
              SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_18__/* .I18nSupportLink */ .wl
            }
          })
        }), this.isPaymentMethodDiscouraged() && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          type: "warning",
          fontSize: "14px",
          lineHeight: "20px",
          withIcon: true,
          mb: 4,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "wT94tD",
            defaultMessage: [{
              "type": 0,
              "value": "Credit card payments incur processor fees, which can add up on large campaigns. Banks may also flag the numerous transactions as suspicious. We strongly recommend adding a prepaid budget via bank transfer instead. "
            }, {
              "type": 8,
              "value": "SupportLink",
              "children": [{
                "type": 0,
                "value": "Contact us"
              }]
            }, {
              "type": 0,
              "value": " to learn more."
            }],
            values: {
              SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_18__/* .I18nSupportLink */ .wl
            }
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
            mt: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
              name: "accept-payment-method-warning",
              checked: this.state.hasAcceptedWarning,
              onChange: () => this.setState({
                hasAcceptedWarning: !this.state.hasAcceptedWarning
              }),
              label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "8jaG3F",
                defaultMessage: [{
                  "type": 0,
                  "value": "I understand, let me continue"
                }]
              })
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
          mb: "1em",
          alignSelf: "center",
          mt: 3,
          children: this.renderSubmit()
        })]
      })]
    });
  }

}
/**
 * A query to get a collective source payment methods. This will not return
 * gift cards, as a gift card cannot be used as a source payment method
 * for another payment method.
 */


const collectiveSourcePaymentMethodsQuery = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_12__/* .gqlV1 */ .N
/* GraphQL */
`
  query CollectiveSourcePaymentMethods($id: Int) {
    Collective(id: $id) {
      id
      giftCardsBatches {
        id
        name
        count
      }
      paymentMethods(type: ["CREDITCARD", "PREPAID"], hasBalanceAboveZero: true) {
        id
        uuid
        name
        data
        monthlyLimitPerMember
        service
        type
        balance
        currency
        expiryDate
        batch
      }
    }
    allHosts(limit: 100, onlyOpenHosts: false, minNbCollectivesHosted: 1) {
      id
      collectives {
        id
        type
        name
        slug
        imageUrl
      }
    }
  }
`;
const addCollectiveSourcePaymentMethodsQuery = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(collectiveSourcePaymentMethodsQuery, {
  options: props => ({
    variables: {
      id: props.collectiveId
    },
    fetchPolicy: 'network-only'
  })
});
const createGiftCardsMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_12__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation CreateGiftCards(
    $CollectiveId: Int!
    $numberOfGiftCards: Int
    $emails: [String]
    $PaymentMethodId: Int
    $amount: Int
    $monthlyLimitPerMember: Int
    $description: String
    $expiryDate: String
    $currency: String
    $limitedToTags: [String]
    $limitedToHostCollectiveIds: [Int]
    $customMessage: String
    $batch: String
  ) {
    createGiftCards(
      amount: $amount
      monthlyLimitPerMember: $monthlyLimitPerMember
      CollectiveId: $CollectiveId
      PaymentMethodId: $PaymentMethodId
      description: $description
      expiryDate: $expiryDate
      currency: $currency
      limitedToTags: $limitedToTags
      limitedToHostCollectiveIds: $limitedToHostCollectiveIds
      numberOfGiftCards: $numberOfGiftCards
      emails: $emails
      customMessage: $customMessage
      batch: $batch
    ) {
      id
      name
      uuid
      batch
      limitedToHostCollectiveIds
      description
      initialBalance
      monthlyLimitPerMember
      expiryDate
      currency
      data
    }
  }
`;
const addCreateGiftCardsMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(createGiftCardsMutation, {
  name: 'createGiftCards'
});
const addGraphql = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_13__/* .compose */ .qC)(addCollectiveSourcePaymentMethodsQuery, addCreateGiftCardsMutation);
CreateGiftCardsForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldName",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "isSubmitEnabled",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onSubmit",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getDefaultPaymentMethod",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldName",
      "type": null
    }],
    "returns": null
  }, {
    "name": "changeDeliverType",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "deliverType",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getGiftCardsCount",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "shouldLimitToSpecificHosts",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "isPaymentMethodDiscouraged",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderSubmit",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderNoPaymentMethodMessage",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderEmailFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderManualFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "optionsToIdsList",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "options",
      "type": null
    }],
    "returns": null
  }, {
    "name": "canLimitToFiscalHosts",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateGiftCardsForm",
  "props": {
    "collectiveId": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "createGiftCards": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "collectiveSettings": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "loading": {
            "name": "bool",
            "required": false
          },
          "error": {
            "name": "object",
            "required": false
          },
          "Collective": {
            "name": "shape",
            "value": {
              "paymentMethods": {
                "name": "array",
                "required": false
              }
            },
            "required": false
          },
          "allHosts": {
            "name": "shape",
            "value": {
              "collectives": {
                "name": "arrayOf",
                "value": {
                  "name": "shape",
                  "value": {
                    "id": {
                      "name": "number",
                      "required": false
                    }
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "intl": {
      "description": "@ignore from injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_9__.injectIntl)(addGraphql(CreateGiftCardsForm)));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 10829:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ CreateGiftCardsSuccess)
});

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
;// CONCATENATED MODULE: external "@styled-icons/feather/CheckCircle"
const CheckCircle_namespaceObject = require("@styled-icons/feather/CheckCircle");
// EXTERNAL MODULE: external "@styled-icons/feather/Clipboard"
var Clipboard_ = __webpack_require__(11479);
;// CONCATENATED MODULE: external "@styled-icons/feather/Printer"
const Printer_namespaceObject = require("@styled-icons/feather/Printer");
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: ./lib/url-helpers.js
var url_helpers = __webpack_require__(25896);
// EXTERNAL MODULE: ./lib/utils.js
var utils = __webpack_require__(97079);
// EXTERNAL MODULE: external "file-saver"
var external_file_saver_ = __webpack_require__(28109);
;// CONCATENATED MODULE: ./components/FileDownloader.js
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



/**
 * A generic wrapper to handle the flow of downloading a file (fetching from URL,
 * saving...etc).
 */

class FileDownloader extends (external_react_default()).Component {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "state", {
      loading: false,
      error: false,
      downloaded: false
    });

    _defineProperty(this, "downloadFile", async () => {
      try {
        this.setState({
          loading: true
        });
        const response = await fetch(this.props.url, this.props.buildFetchParams());
        const file = await response.blob();
        (0,external_file_saver_.saveAs)(file, this.props.filename);
        this.setState({
          loading: false,
          downloaded: true
        });
      } catch (e) {
        this.setState({
          error: e.message,
          loading: false
        });
      }
    });
  }

  render() {
    const {
      loading,
      error,
      downloaded
    } = this.state;
    return this.props.children({
      loading,
      error,
      downloaded,
      downloadFile: this.downloadFile
    });
  }

}

_defineProperty(FileDownloader, "defaultProps", {
  buildFetchParams: () => {}
});

FileDownloader.__docgenInfo = {
  "description": "A generic wrapper to handle the flow of downloading a file (fetching from URL,\nsaving...etc).",
  "methods": [{
    "name": "downloadFile",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }],
  "displayName": "FileDownloader",
  "props": {
    "buildFetchParams": {
      "defaultValue": {
        "value": "() => {}",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filename": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "url": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "children": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./components/StyledInput.tsx
var StyledInput = __webpack_require__(97274);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/CreateGiftCardsSuccess.js
function CreateGiftCardsSuccess_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
















const RedeemLinksTextarea = external_styled_components_default()(StyledInput/* default */.ZP).attrs({
  as: 'textarea'
}).withConfig({
  displayName: "CreateGiftCardsSuccess__RedeemLinksTextarea",
  componentId: "sc-10otmsu-0"
})(["width:95%;max-width:450px;min-height:175px;padding:8px;border-radius:8px;resize:vertical;overflow-wrap:normal;"]);
/**
 * Displays created gift cards, with an option to print them.
 */

class CreateGiftCardsSuccess extends (external_react_default()).Component {
  constructor(props) {
    super(props);

    CreateGiftCardsSuccess_defineProperty(this, "getRedeemLinkFromVC", vc => {
      const code = vc.uuid.split('-')[0];
      return `${(0,utils/* getWebsiteUrl */.ls)()}/${this.props.collectiveSlug}/redeem/${code}`;
    });

    CreateGiftCardsSuccess_defineProperty(this, "copyLinksToClipboard", () => {
      try {
        this.redeemLinkTextareaRef.current.select();
        document.execCommand('copy');
      } catch (e) {
        // TODO: this should be reported to the user
        // eslint-disable-next-line no-console
        console.error('Cannot copy to clipboard', e);
      }
    });

    CreateGiftCardsSuccess_defineProperty(this, "buildFetchParams", () => {
      return {};
    });

    this.redeemLinkTextareaRef = /*#__PURE__*/external_react_default().createRef();
  }

  renderManualSuccess() {
    const filename = `${this.props.collectiveSlug}-giftcards-${Date.now()}.pdf`;
    const downloadUrl = (0,url_helpers/* giftCardsDownloadUrl */.Rn)(filename);
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
      children: [/*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
        mb: 3,
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "giftCards.create.successCreate",
          defaultMessage: [{
            "type": 0,
            "value": "Your "
          }, {
            "type": 6,
            "value": "count",
            "options": {
              "one": {
                "value": [{
                  "type": 0,
                  "value": "gift card has"
                }]
              },
              "other": {
                "value": [{
                  "type": 1,
                  "value": "count"
                }, {
                  "type": 0,
                  "value": " gift cards have"
                }]
              }
            },
            "offset": 0,
            "pluralType": "cardinal"
          }, {
            "type": 0,
            "value": " been created."
          }],
          values: {
            count: this.props.cards.length
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        width: 1,
        flexDirection: "column",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
          my: 3,
          flexWrap: "wrap",
          justifyContent: "center",
          children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledButton/* default */.Z, {
            m: 2,
            minWidth: 270,
            buttonSize: "large",
            buttonStyle: "primary",
            onClick: this.copyLinksToClipboard,
            children: [/*#__PURE__*/jsx_runtime_.jsx(Clipboard_.Clipboard, {
              size: "1em"
            }), "\xA0", /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "CreateGiftCardsSuccess.RedeemLinks",
              defaultMessage: [{
                "type": 0,
                "value": "Copy links"
              }]
            })]
          }), this.props.cards.length < 300 && /*#__PURE__*/jsx_runtime_.jsx(FileDownloader, {
            url: downloadUrl,
            filename: filename,
            buildFetchParams: () => ({
              method: 'POST',
              headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                cards: this.props.cards
              })
            }),
            children: ({
              loading,
              downloadFile
            }) => /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledButton/* default */.Z, {
              minWidth: 270,
              m: 2,
              buttonSize: "large",
              loading: loading,
              onClick: downloadFile,
              children: [/*#__PURE__*/jsx_runtime_.jsx(Printer_namespaceObject.Printer, {
                size: "1em"
              }), "\xA0", /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "CreateGiftCardsSuccess.Download",
                defaultMessage: [{
                  "type": 0,
                  "value": "Download cards"
                }]
              })]
            })
          })]
        }), /*#__PURE__*/jsx_runtime_.jsx(RedeemLinksTextarea, {
          ref: this.redeemLinkTextareaRef,
          className: "result-redeem-links",
          readOnly: true,
          value: this.props.cards.map(this.getRedeemLinkFromVC).join('\n')
        })]
      })]
    });
  }

  renderEmailSuccess() {
    return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
      id: "giftCards.create.successSent",
      defaultMessage: [{
        "type": 0,
        "value": "Your "
      }, {
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 0,
              "value": "gift card has"
            }]
          },
          "other": {
            "value": [{
              "type": 1,
              "value": "count"
            }, {
              "type": 0,
              "value": " gift cards have"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }, {
        "type": 0,
        "value": " been sent!"
      }],
      values: {
        count: this.props.cards.length
      }
    });
  }

  render() {
    const {
      deliverType
    } = this.props;
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      alignItems: "center",
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text.P, {
        color: "green.700",
        children: /*#__PURE__*/jsx_runtime_.jsx(CheckCircle_namespaceObject.CheckCircle, {
          size: "3em"
        })
      }), deliverType === 'email' ? this.renderEmailSuccess() : this.renderManualSuccess()]
    });
  }

}
CreateGiftCardsSuccess.__docgenInfo = {
  "description": "Displays created gift cards, with an option to print them.",
  "methods": [{
    "name": "getRedeemLinkFromVC",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "vc",
      "type": null
    }],
    "returns": null
  }, {
    "name": "copyLinksToClipboard",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "buildFetchParams",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderManualSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderEmailSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateGiftCardsSuccess",
  "props": {
    "cards": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "uuid": {
              "name": "string",
              "required": true
            },
            "currency": {
              "name": "string",
              "required": true
            },
            "initialBalance": {
              "name": "number",
              "required": true
            },
            "expiryDate": {
              "name": "string",
              "required": false
            }
          }
        }
      },
      "required": true
    },
    "deliverType": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'manual'",
          "computed": false
        }, {
          "value": "'email'",
          "computed": false
        }]
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};

/***/ }),

/***/ 12665:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);




const ErrorComponent = ({
  message
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx("div", {
    className: "Error",
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx(_Text__WEBPACK_IMPORTED_MODULE_1__.H1, {
      textAlign: "center",
      padding: "8rem",
      children: message || 'unknown error'
    })
  });
};

ErrorComponent.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ErrorComponent",
  "props": {
    "message": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorComponent);

/***/ }),

/***/ 91962:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(36317);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _InputField__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99591);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_InputField__WEBPACK_IMPORTED_MODULE_6__]);
_InputField__WEBPACK_IMPORTED_MODULE_6__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];












const ParameterColumnHeader = styled_components__WEBPACK_IMPORTED_MODULE_0___default().th.withConfig({
  displayName: "ExportImages__ParameterColumnHeader",
  componentId: "sc-1idb0eq-0"
})(["font-size:12px;font-weight:bold;padding:0.1rem 1rem 0.1rem 0;"]);

class ExportImages extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);
    this.state = {
      tierIndex: 0
    };
  }

  render() {
    const {
      collective
    } = this.props;

    if (collective.tiers.length === 0) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("div", {});
    }

    const tiers = collective.tiers.map(tier => {
      const encodedTierName = encodeURIComponent(tier.name);
      return {
        id: tier.id,
        name: tier.name,
        images: [{
          name: 'Tier badge',
          url: `https://opencollective.com/${collective.slug}/tiers/${tier.slug}/badge.svg?label=${encodedTierName}&color=brightgreen`,
          code: `<img alt="open collective badge" src="https://opencollective.com/${collective.slug}/tiers/${tier.slug}/badge.svg?label=${encodedTierName}&color=brightgreen" />`,
          options: [{
            name: 'label',
            description: 'badge label',
            defaultValue: `tier name (${tier.name})`
          }, {
            name: 'color',
            description: 'badge color (brightgreen, green, yellowgreen, yellow, orange, red, lightgrey, blue)',
            defaultValue: 'brightgreen'
          }]
        }, {
          name: 'Financial contributors widget',
          url: `https://opencollective.com/${collective.slug}/tiers/${tier.slug}.svg?avatarHeight=36`,
          code: `<object type="image/svg+xml" data="https://opencollective.com/${collective.slug}/tiers/${tier.slug}.svg?avatarHeight=36&width=600"></object>`,
          options: [{
            name: 'width',
            description: 'image width'
          }, {
            name: 'height',
            description: 'image height'
          }, {
            name: 'limit',
            description: 'max contributors to show',
            defaultValue: '(unlimited)'
          }, {
            name: 'avatarHeight',
            description: 'max avatar/logo height'
          }, {
            name: 'button',
            description: 'show "become a contributor" button',
            defaultValue: 'true'
          }, {
            name: 'format',
            description: 'image format (replace .svg with .png or .jpg)'
          }]
        }]
      };
    });
    const tierOptions = tiers.map((tier, index) => {
      return {
        [index]: tier.name
      };
    });
    const tier = tiers[this.state.tierIndex];
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div", {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "export.images.title",
          defaultMessage: [{
            "type": 0,
            "value": "Export tier images"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("p", {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "ExportImages.Title",
          defaultMessage: [{
            "type": 0,
            "value": "You can export images showing the financial contributors to each tier."
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("div", {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          name: "tiers",
          type: "select",
          options: tierOptions,
          onChange: tierIndex => this.setState({
            tierIndex
          })
        })
      }), tier && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("ul", {
        children: tier.images.map(image => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
          as: "li",
          mb: 4,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_8__/* .Label */ .__, {
            fontWeight: "500",
            children: image.name
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("div", {
            style: {
              maxWidth: '100%'
            },
            dangerouslySetInnerHTML: {
              __html: image.code
            }
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
            my: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
              fontSize: "14px",
              href: image.url,
              openInNewTab: true,
              children: image.url
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
            as: "pre",
            whiteSpace: "pre-wrap",
            fontSize: "11px",
            maxWidth: 880,
            children: image.code
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
            fontSize: "14px",
            mt: 3,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_8__/* .Strong */ .cK, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "export.json.parameters.title",
                defaultMessage: [{
                  "type": 0,
                  "value": "Parameters"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledContainer, {
              as: "table",
              width: "100%",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tbody", {
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tr", {
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(ParameterColumnHeader, {
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                      id: "Parameter",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Parameter"
                      }]
                    })
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(ParameterColumnHeader, {
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                      id: "Fields.description",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Description"
                      }]
                    })
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(ParameterColumnHeader, {
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                      id: "DefaultValue",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Default value"
                      }]
                    })
                  })]
                }), image.options.map(option => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tr", {
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("td", {
                    valign: "top",
                    children: option.name
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("td", {
                    valign: "top",
                    children: option.description
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("td", {
                    valign: "top",
                    children: option.defaultValue
                  })]
                }, option.name))]
              })
            })]
          })]
        }, image.name))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
        mt: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "ExportImages.AllFinancial",
          defaultMessage: [{
            "type": 0,
            "value": "All financial contributors badge"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          fontSize: "14px",
          openInNewTab: true,
          href: `https://opencollective.com/${collective.slug}/tiers/badge.svg`,
          children: `https://opencollective.com/${collective.slug}/tiers/badge.svg`
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("img", {
        alt: "open collective badge",
        src: `https://opencollective.com/${collective.slug}/tiers/badge.svg`
      })]
    });
  }

}

ExportImages.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExportImages",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExportImages);

var _StyledContainer = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z).withConfig({
  displayName: "ExportImages___StyledContainer",
  componentId: "sc-1idb0eq-1"
})({
  borderSpacing: 16
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 75593:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51858);
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_truncate__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11341);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_maxBy__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93908);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(46555);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(17632);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69078);
/* harmony import */ var _StyledKeyframes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29925);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_8__]);
uuid__WEBPACK_IMPORTED_MODULE_8__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }











const getProgressColor = theme => theme.colors.primary[600];

const getEmptyProgressColor = () => '#e2e2e2';

const MAX_TITLE_LENGTH = 32;
const GoalContainer = styled_components__WEBPACK_IMPORTED_MODULE_7___default().div.withConfig({
  displayName: "GoalsCover__GoalContainer",
  componentId: "sc-1y3145p-0"
})(["position:absolute;top:0;left:0;text-align:right;transition:width 3s;height:25px;color:", ";border-right:1px solid ", ";width:", ";z-index:", ";transition:", ";.caption{display:inline-block;padding:1rem 0.5rem 1rem 0.5rem;font-size:13px;line-height:15px;}.label{background:rgb(245,247,250);padding:0;line-height:1.5;font-size:13px;text-align:right;color:inherit;white-space:nowrap;}.amount{font-weight:500;}.interval{color:#aaaeb3;font-size:10px;font-weight:normal;}", " ", " ", " ", " ", " ", ""], props => props.theme.colors.black[700], props => props.goal.isReached ? getProgressColor(props.theme) : getEmptyProgressColor(props.theme), props => `${props.goal.progress * 100}%`, props => ['balance', 'yearlyBudget'].includes(props.goal.slug) ? 310 : (20 - props.index) * 10, props => !props.goal.animateProgress ? 'opacity 0.3s, height 1s, padding-top 1s' : 'opacity 2s, height 1s, padding-top 1s, width 2s ease-in-out;', props => props.goal.isReached && (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["color:", ";"], props.theme.colors.black[800]), props => props.goal.isReached && props.goal.position === 'below' && (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["border-top:4px solid ", ";"], getProgressColor(props.theme)), props => props.goal.position === 'above' && (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["border-bottom:4px solid ", ";top:auto;bottom:76px;.caption{margin-top:-5.5rem;}"], getEmptyProgressColor(props.theme)), props => {
  if (props.goal.level === 1) {
    if (props.goal.position === 'below') {
      return (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["height:50px;padding-top:4rem;border-right-style:dotted;border-right-color:", ";"], props.theme.colors.primary[300]);
    } else {
      return (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["height:70px;"]);
    }
  }
}, props => {
  if (props.goal.isOverlapping) {
    return (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["opacity:0.2;"]);
  } else {
    return (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["animation:", " 0.3s;"], _StyledKeyframes__WEBPACK_IMPORTED_MODULE_11__/* .fadeIn */ .Ji);
  }
}, props => props.goal.hidden && (0,styled_components__WEBPACK_IMPORTED_MODULE_7__.css)(["opacity:0;"]));
const BarContainer = styled_components__WEBPACK_IMPORTED_MODULE_7___default().div.withConfig({
  displayName: "GoalsCover__BarContainer",
  componentId: "sc-1y3145p-1"
})(["position:relative;width:100%;margin:6rem auto 1rem;min-height:80px;.withGoals{margin-top:10rem;}.max-level-above-1{margin-top:15rem;}@media (max-width:1400px){width:90%;}@media (max-width:420px){width:95%;}"]);

class GoalsCover extends (react__WEBPACK_IMPORTED_MODULE_5___default().Component) {
  constructor(props) {
    super(props);
    this.renderGoal = this.renderGoal.bind(this);
    this.updateGoals = lodash_debounce__WEBPACK_IMPORTED_MODULE_4___default()(this.updateGoals.bind(this), 100, {
      maxWait: 200
    });
    this.labelsRefs = {};
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.defineMessages)({
      'bar.balance': {
        id: "cover.bar.balance",
        defaultMessage: [{
          "type": 0,
          "value": "Today's Balance"
        }]
      },
      'bar.yearlyBudget': {
        id: "cover.bar.yearlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Estimated Annual Budget"
        }]
      },
      'bar.monthlyBudget': {
        id: "cover.bar.monthlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Estimated Monthly Budget"
        }]
      }
    });

    const maxGoal = lodash_maxBy__WEBPACK_IMPORTED_MODULE_2___default()(lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(props.collective, 'settings.goals', []), g => g.title ? g.amount : 0);

    this.currentProgress = maxGoal ? this.getMaxCurrentAchievement() / maxGoal.amount : 1.0;
    this.interpolation = props.interpolation || lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(props.collective, 'settings.goalsInterpolation', 'auto');
    this.state = _objectSpread({}, this.populateGoals(true, true));
  }

  componentDidMount() {
    this.setState(_objectSpread(_objectSpread({}, this.populateGoals(false, true)), {}, {
      firstMount: true
    }));
    window.addEventListener('resize', this.updateGoals);
  }

  componentDidUpdate(oldProps) {
    if (this.state.firstMount || this.props.collective !== oldProps.collective) {
      this.updateGoals();
    }
  }

  componentWillUnmount() {
    window.removeEventListener('resize', this.updateGoals);
  }

  updateGoals(firstMount = false) {
    this.setState(_objectSpread(_objectSpread({}, this.populateGoals()), {}, {
      firstMount
    }));
  }
  /** Returns a percentage (0.0-1.0) that represent X position */


  getTranslatedPercentage(x) {
    const interpolation = this.props.interpolation || this.interpolation;

    if (interpolation === 'logarithm' || interpolation === 'auto' && this.currentProgress <= 0.3) {
      // See https://www.desmos.com/calculator/30pua5xx7q
      return -1 * Math.pow(x - 1, 2) + 1;
    }

    return x;
  }
  /** Create goal object with correct defaults and store a ref for React */


  createGoal(slug, params) {
    this.labelsRefs[slug] = this.labelsRefs[slug] || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createRef();
    return _objectSpread(_objectSpread({
      precision: 0,
      isReached: false,
      level: 0,
      position: 'above'
    }, params), {}, {
      slug
    });
  }
  /** Returns the main goals current progress, either max balance or annual budget */


  getMaxCurrentAchievement() {
    const {
      collective
    } = this.props;
    return Math.max(lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.balance'), lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.yearlyBudget', 0));
  }
  /**
   * Returns the base goals (balance, yearly budget...) without custom goals.
   * All goals returned here have a slug prefilled.
   */


  getInitialGoals() {
    const {
      intl,
      collective
    } = this.props;

    const settingGoals = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(this.props.collective, 'settings.goals', []);

    const hasMonthlyGoal = settingGoals.some(goal => goal.type === 'monthlyBudget'); // Always show current balance

    const goals = [this.createGoal('balance', {
      animateProgress: true,
      title: intl.formatMessage(this.messages['bar.balance']),
      amount: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.balance'),
      precision: 2,
      position: 'below',
      isReached: true
    })]; // Add yearly and monthly budgets

    if (lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.yearlyBudget') > 0 && lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.yearlyBudget') !== lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.balance')) {
      if (hasMonthlyGoal) {
        goals.push(this.createGoal('monthlyBudget', {
          animateProgress: true,
          title: intl.formatMessage(this.messages['bar.monthlyBudget']),
          amount: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.yearlyBudget') / 12,
          precision: 0,
          position: 'below',
          isReached: true
        }));
      } else {
        goals.push(this.createGoal('yearlyBudget', {
          animateProgress: true,
          title: intl.formatMessage(this.messages['bar.yearlyBudget']),
          amount: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(collective, 'stats.yearlyBudget'),
          precision: 0,
          position: 'below',
          isReached: true
        }));
      }
    } // Animate only the most advanced one


    if (goals.length === 2) {
      if (goals[0].amount <= goals[1].amount) {
        goals[0].animateProgress = false;
      } else {
        goals[1].animateProgress = false;
      }
    }

    return goals;
  }
  /**
   * Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,
   * we make sure to always return the last one to have a complete progress bar.
   *
   * Also adds a unique slug to goals.
   */


  getCustomGoals(maxCustomGoalsToShow) {
    const settingsGoals = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(this.props.collective, 'settings.goals', []);

    const sortedGoals = lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default()(settingsGoals, 'amount');

    const goals = sortedGoals.map((goal, idx) => this.createGoal(`goal-${idx}-${goal.key || (0,uuid__WEBPACK_IMPORTED_MODULE_8__.v4)()}`, goal)); // No need to remove goals

    if (goals.length <= maxCustomGoalsToShow) {
      return goals;
    } // Filter goals, ensure we keep the last one


    const lastGoal = goals[goals.length - 1];

    if (!maxCustomGoalsToShow) {
      return [lastGoal];
    }

    return [...goals.slice(0, maxCustomGoalsToShow - 1), lastGoal];
  }
  /**
   * If a ref exists for this goal, get its real with. Otherwise estimate
   * it based on its title (for initial rendering and server-side rendering)
   */


  getGoalLabelWidthInPx(goal) {
    const ref = this.labelsRefs[goal.slug];

    if (ref && ref.current) {
      return ref.current.offsetWidth + 15; // Add a bigger hit box
    } else if (goal.title) {
      return Math.min(MAX_TITLE_LENGTH, goal.title.length) * 8;
    } else {
      // When there's no title we just show a single word - "Goal".
      // 12 characters should be enough for most languages.
      return 12 * 8;
    }
  }
  /** Given a percent size, returns its value in pixels */


  percentageToPx(availWidth, percentage) {
    const progressBarPercentageWidth = availWidth > 420 ? 0.8 : 0.95;
    const progressBarWidthInPx = availWidth * progressBarPercentageWidth;
    return percentage * progressBarWidthInPx;
  }
  /** Given a pixels size, returns its value as a percentage of availWidth */


  pxToPercentage(availWidth, widthInPx) {
    return widthInPx / availWidth;
  }
  /** Returns the overlap size if any, 0 otherwise */


  goalsOverlapInPx(availWidth, maxAmount, prevGoal, goal) {
    if (!prevGoal) {
      return 0;
    } // No overlap is possible if not at the same position or level


    if (goal.position !== prevGoal.position || goal.level !== prevGoal.level) {
      return 0;
    } // Get position and distance between the markers


    const prevX = this.percentageToPx(availWidth, this.getTranslatedPercentage(prevGoal.amount / maxAmount));
    const curX = this.percentageToPx(availWidth, this.getTranslatedPercentage(goal.amount / maxAmount));
    const prevWidth = this.getGoalLabelWidthInPx(prevGoal); // If goal is at the far left of the graphic, label will be moved to the right

    const xLabelOffset = prevX - prevWidth;
    const distance = xLabelOffset < 0 ? curX - prevX + xLabelOffset : curX - prevX; // Calculate overlap size

    const curWidth = this.getGoalLabelWidthInPx(goal);
    const offset = distance - curWidth;
    return offset < 0 ? -offset : 0;
  }
  /**
   * Test goals position against the first previous goal on the same position / level
   *
   * @returns {goal, overlap}
   */


  overlapWithPrev(availWidth, maxAmount, prevGoals, goal) {
    for (let i = prevGoals.length - 1; i >= 0; i--) {
      const prevGoal = prevGoals[i];

      if (goal.position === prevGoal.position && goal.level === prevGoal.level) {
        return {
          prevGoal,
          overlap: this.goalsOverlapInPx(availWidth, maxAmount, prevGoal, goal)
        };
      }
    }

    return {
      prevGoal: null,
      overlap: 0
    };
  }
  /** @returns {Object} {goals, hasCustomGoals, maxAmount, maxLevelAbove} */


  populateGoals(isServerSide, isInitialRender) {
    // Show only one custom goal on mobile
    let maxLevelAbove = 0;
    let availWidth = 700;
    let maxCustomGoalsToShow = 10;

    if (isServerSide) {
      maxCustomGoalsToShow = 0;
    } else {
      availWidth = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(window, 'screen.availWidth') || 560;

      if (availWidth <= 560) {
        maxCustomGoalsToShow = 0;
      } else if (availWidth < 728) {
        maxCustomGoalsToShow = 1;
      } else if (availWidth < 896) {
        maxCustomGoalsToShow = 2;
      } else if (availWidth < 1120) {
        maxCustomGoalsToShow = 3;
      }
    } // Get all goals sorted by amount


    const initialGoals = this.getInitialGoals();
    const customGoals = this.getCustomGoals(maxCustomGoalsToShow);

    const goals = lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default()([...initialGoals, ...customGoals], 'amount');

    const maxAmount = lodash_maxBy__WEBPACK_IMPORTED_MODULE_2___default()(goals, g => g.amount).amount;

    const maxAchievedYet = this.getMaxCurrentAchievement(); // Set goals positions

    for (let i = 0; i < goals.length; i++) {
      const isLastGoal = i === goals.length - 1;
      const goal = goals[i];
      goal.progress = this.getTranslatedPercentage(goal.amount / maxAmount);
      goal.isReached = goal.isReached || maxAchievedYet > goal.amount;
      goal.hidden = false;
      const prevGoals = goals.slice(0, i);

      const overlapWithPrev = goal => this.overlapWithPrev(availWidth, maxAmount, prevGoals, goal);

      const {
        prevGoal,
        overlap
      } = overlapWithPrev(goal); // -- Overlap 😱 --

      if (overlap > 0) {
        // 1st strategy: we change the level by 1
        const newLevel = Number(!prevGoal.level);

        if (overlapWithPrev(_objectSpread(_objectSpread({}, goal), {}, {
          level: newLevel
        })).overlap === 0) {
          goal.level = newLevel;

          if (goal.position === 'above') {
            maxLevelAbove = Math.max(maxLevelAbove, newLevel);
          }
        } else {
          // 2nd strategy: we shift by given offset, and we change opacity
          // - of the prev goal if this is last goal, of the current otherwise
          // Will not shift at less than 0% or more than 100%
          if (!isLastGoal) {
            goal.isOverlapping = true;
            const newProgress = goal.progress + this.pxToPercentage(availWidth, overlap);
            goal.progress = newProgress <= 1 ? newProgress : 1;
          } else {
            prevGoal.isOverlapping = true;
            const newProgress = prevGoal.progress - this.pxToPercentage(availWidth, overlap);
            prevGoal.progress = newProgress >= 0 ? newProgress : 0;
          }
        }
      } // Change progress to animate goal. Never animate the last goal as it would
      // result in a partial progress bar for first rendering. Hide when rendered
      // on server side to avoid getting the marker stuck while waiting for
      // re-hydrating


      if (goal.animateProgress && !isLastGoal) {
        if (isServerSide) {
          goal.hidden = true;
        }

        if (isInitialRender) {
          goal.progress = 0;
        }
      }
    }

    return {
      goals,
      maxAmount,
      maxLevelAbove,
      hasCustomGoals: customGoals.length > 0
    };
  }

  getDivTitle(title, description) {
    if (title && description) {
      return `${title}\n\n${description}`;
    } else {
      return title || description || '';
    }
  }

  renderGoal(goal, index) {
    const {
      collective,
      intl
    } = this.props;
    const slug = goal.slug;
    const amount = (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_9__/* .formatCurrency */ .xG)(goal.amount || 0, collective.currency, {
      precision: goal.precision || 0,
      locale: intl.locale
    });
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(GoalContainer, {
      className: `goal ${goal.slug}`,
      goal: goal,
      index: index,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
        className: "caption",
        title: this.getDivTitle(goal.title, goal.description),
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("div", {
          className: "label",
          ref: this.labelsRefs[goal.slug],
          children: goal.title ? lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default()(goal.title, {
            length: MAX_TITLE_LENGTH
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "ContributionType.Goal",
            defaultMessage: [{
              "type": 0,
              "value": "Goal"
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
          className: "amount",
          children: [amount, (goal.type === 'yearlyBudget' || goal.type === 'monthlyBudget') && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("div", {
            className: "interval",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
              id: "tier.interval",
              defaultMessage: [{
                "type": 0,
                "value": "per "
              }, {
                "type": 5,
                "value": "interval",
                "options": {
                  "month": {
                    "value": [{
                      "type": 0,
                      "value": "month"
                    }]
                  },
                  "year": {
                    "value": [{
                      "type": 0,
                      "value": "year"
                    }]
                  },
                  "other": {
                    "value": []
                  }
                }
              }],
              values: {
                interval: goal.type === 'yearlyBudget' ? 'year' : 'month'
              }
            })
          })]
        })]
      })
    }, slug);
  }

  render() {
    const {
      collective
    } = this.props;

    if (!collective) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("div", {});
    }

    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(BarContainer, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        className: `max-level-above-${this.state.maxLevelAbove} ${this.state.hasCustomGoals ? 'withGoals' : ''}`,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          children: this.state.goals && this.state.goals.map((goal, index) => {
            return this.renderGoal(goal, index);
          })
        })
      })
    });
  }

}

_defineProperty(GoalsCover, "defaultProps", {
  interpolation: 'auto'
});

GoalsCover.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "updateGoals",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "firstMount",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getTranslatedPercentage",
    "docblock": "Returns a percentage (0.0-1.0) that represent X position",
    "modifiers": [],
    "params": [{
      "name": "x"
    }],
    "returns": null,
    "description": "Returns a percentage (0.0-1.0) that represent X position"
  }, {
    "name": "createGoal",
    "docblock": "Create goal object with correct defaults and store a ref for React",
    "modifiers": [],
    "params": [{
      "name": "slug"
    }, {
      "name": "params"
    }],
    "returns": null,
    "description": "Create goal object with correct defaults and store a ref for React"
  }, {
    "name": "getMaxCurrentAchievement",
    "docblock": "Returns the main goals current progress, either max balance or annual budget",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Returns the main goals current progress, either max balance or annual budget"
  }, {
    "name": "getInitialGoals",
    "docblock": "Returns the base goals (balance, yearly budget...) without custom goals.\nAll goals returned here have a slug prefilled.",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Returns the base goals (balance, yearly budget...) without custom goals.\nAll goals returned here have a slug prefilled."
  }, {
    "name": "getCustomGoals",
    "docblock": "Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,\nwe make sure to always return the last one to have a complete progress bar.\n\nAlso adds a unique slug to goals.",
    "modifiers": [],
    "params": [{
      "name": "maxCustomGoalsToShow"
    }],
    "returns": null,
    "description": "Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,\nwe make sure to always return the last one to have a complete progress bar.\n\nAlso adds a unique slug to goals."
  }, {
    "name": "getGoalLabelWidthInPx",
    "docblock": "If a ref exists for this goal, get its real with. Otherwise estimate\nit based on its title (for initial rendering and server-side rendering)",
    "modifiers": [],
    "params": [{
      "name": "goal"
    }],
    "returns": null,
    "description": "If a ref exists for this goal, get its real with. Otherwise estimate\nit based on its title (for initial rendering and server-side rendering)"
  }, {
    "name": "percentageToPx",
    "docblock": "Given a percent size, returns its value in pixels",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "percentage"
    }],
    "returns": null,
    "description": "Given a percent size, returns its value in pixels"
  }, {
    "name": "pxToPercentage",
    "docblock": "Given a pixels size, returns its value as a percentage of availWidth",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "widthInPx"
    }],
    "returns": null,
    "description": "Given a pixels size, returns its value as a percentage of availWidth"
  }, {
    "name": "goalsOverlapInPx",
    "docblock": "Returns the overlap size if any, 0 otherwise",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "maxAmount"
    }, {
      "name": "prevGoal"
    }, {
      "name": "goal"
    }],
    "returns": null,
    "description": "Returns the overlap size if any, 0 otherwise"
  }, {
    "name": "overlapWithPrev",
    "docblock": "Test goals position against the first previous goal on the same position / level\n\n@returns {goal, overlap}",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "maxAmount"
    }, {
      "name": "prevGoals"
    }, {
      "name": "goal"
    }],
    "returns": null,
    "description": "Test goals position against the first previous goal on the same position / level"
  }, {
    "name": "populateGoals",
    "docblock": "@returns {Object} {goals, hasCustomGoals, maxAmount, maxLevelAbove}",
    "modifiers": [],
    "params": [{
      "name": "isServerSide"
    }, {
      "name": "isInitialRender"
    }],
    "returns": {
      "description": "{goals, hasCustomGoals, maxAmount, maxLevelAbove}",
      "type": {
        "name": "Object"
      }
    },
    "description": null
  }, {
    "name": "getDivTitle",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "title",
      "type": null
    }, {
      "name": "description",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "goal",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "GoalsCover",
  "props": {
    "interpolation": {
      "defaultValue": {
        "value": "'auto'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'linear'",
          "computed": false
        }, {
          "value": "'logarithm'",
          "computed": false
        }, {
          "value": "'auto'",
          "computed": false
        }]
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_6__.injectIntl)(GoalsCover));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 12823:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export addHostsData */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32651);
/* harmony import */ var _CollectiveCard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(68654);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12665);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);










const COLLECTIVE_CARDS_PER_PAGE = 10;

class HostsWithData extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {
  constructor(props) {
    super(props);
    this.fetchMore = this.fetchMore.bind(this);
    this.refetch = this.refetch.bind(this);
    this.state = {
      role: null,
      loading: false
    };
  }

  componentDidMount() {
    const {
      onChange
    } = this.props;
    onChange && this.node && onChange({
      height: this.node.offsetHeight
    });
  }

  fetchMore(e) {
    const {
      onChange
    } = this.props;
    e.target.blur();
    this.setState({
      loading: true
    });
    this.props.fetchMore().then(() => {
      this.setState({
        loading: false
      });
      onChange && onChange({
        height: this.node.offsetHeight
      });
    });
  }

  refetch(role) {
    this.setState({
      role
    });
    this.props.refetch({
      role
    });
  }

  render() {
    const {
      data
    } = this.props;

    if (data.error) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Error__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
        message: data.error.message
      });
    }

    if (!data.allHosts || !data.allHosts.collectives) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx("div", {});
    }

    const collectives = [...data.allHosts.collectives];

    if (collectives.length === 0) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx("div", {
        className: "empty",
        style: {
          marginTop: '1rem'
        },
        children: this.props.empty || ''
      });
    }

    const limit = this.props.limit || COLLECTIVE_CARDS_PER_PAGE * 2;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      ref: node => this.node = node,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        display: "flex",
        flexWrap: "wrap",
        flexDirection: "row",
        justifyContent: "center",
        overflow: "hidden",
        margin: "1rem 0",
        children: collectives.map(collective => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_CollectiveCard__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
          margin: "1rem",
          collective: collective
        }, collective.id))
      }), collectives.length % 10 === 0 && collectives.length >= limit && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        margin: "1rem",
        textAlign: "center",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          onClick: this.fetchMore,
          children: [this.state.loading && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "loading",
            defaultMessage: [{
              "type": 0,
              "value": "loading"
            }]
          }), !this.state.loading && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "loadMore",
            defaultMessage: [{
              "type": 0,
              "value": "load more"
            }]
          })]
        })
      })]
    });
  }

}

const hostsQuery = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__/* .gqlV1 */ .N
/* GraphQL */
`
  query Hosts(
    $tags: [String]
    $currency: String
    $limit: Int
    $offset: Int
    $orderBy: HostCollectiveOrderFieldType
    $orderDirection: OrderDirection
  ) {
    allHosts(
      tags: $tags
      currency: $currency
      limit: $limit
      offset: $offset
      orderBy: $orderBy
      orderDirection: $orderDirection
    ) {
      id
      total
      collectives {
        id
        isHost
        type
        createdAt
        slug
        name
        description
        longDescription
        currency
        backgroundImage
        stats {
          id
          collectives {
            id
            hosted
          }
        }
      }
    }
  }
`;
const addHostsData = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__.graphql)(hostsQuery, {
  options: props => ({
    variables: {
      tags: props.tags,
      currency: props.currency,
      orderBy: props.orderBy,
      orderDirection: props.orderDirection,
      offset: 0,
      limit: props.limit || COLLECTIVE_CARDS_PER_PAGE * 2
    }
  }),
  props: ({
    data,
    ownProps
  }) => ({
    data,
    fetchMore: () => data.fetchMore({
      variables: {
        offset: data.allHosts.collectives.length,
        limit: ownProps.limit || COLLECTIVE_CARDS_PER_PAGE
      },
      updateQuery: (previousResult, {
        fetchMoreResult
      }) => {
        if (!fetchMoreResult) {
          return previousResult;
        } // Update the results object with new entries


        const {
          __typename,
          total,
          collectives
        } = previousResult.allHosts;
        const all = collectives.concat(fetchMoreResult.allHosts.collectives);
        return Object.assign({}, previousResult, {
          allHosts: {
            __typename,
            total,
            collectives: all
          }
        });
      }
    })
  })
});
HostsWithData.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "fetchMore",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "refetch",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "role",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "HostsWithData",
  "props": {
    "tags": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "limit": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "empty": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "node"
        }, {
          "name": "string"
        }]
      },
      "required": false
    },
    "fetchMore": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "refetch": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "data": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (addHostsData(HostsWithData));

/***/ }),

/***/ 41627:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29242);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);




/**
 * Displays a location object
 */




const LocationAddress = ({
  location,
  isLoading,
  showMessageIfEmpty
}) => {
  if (isLoading) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        height: "1em",
        mb: "0.5em"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        height: "1em",
        mb: "0.5em"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        height: "1em"
      })]
    });
  } else if (!location || !location.address && !location.country) {
    return !showMessageIfEmpty ? null : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Text__WEBPACK_IMPORTED_MODULE_3__/* .Span */ .Dr, {
      fontStyle: "italic",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "LocationAddress.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No address configured yet"
        }]
      })
    });
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [location.address, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx("br", {}), location.country]
  });
};

LocationAddress.__docgenInfo = {
  "description": "Displays a location object",
  "methods": [],
  "displayName": "LocationAddress",
  "props": {
    "location": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "address": {
            "name": "string",
            "required": false
          },
          "country": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "showMessageIfEmpty": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LocationAddress);

/***/ }),

/***/ 10878:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ hasRoleDescription),
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(580);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98216);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(88705);




const ROLES_DETAILS = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.defineMessages)({
  [_lib_constants_roles__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ADMIN */ .Z.ADMIN]: {
    id: "+Qi39W",
    defaultMessage: [{
      "type": 8,
      "value": "strong",
      "children": [{
        "type": 0,
        "value": "Admins"
      }]
    }, {
      "type": 0,
      "value": " can edit settings, approve expenses, and receive activity notifications (such as when a new expense is submitted). They are the active managers of a Collective."
    }]
  },
  [_lib_constants_roles__WEBPACK_IMPORTED_MODULE_2__/* ["default"].MEMBER */ .Z.MEMBER]: {
    id: "O8duLC",
    defaultMessage: [{
      "type": 8,
      "value": "strong",
      "children": [{
        "type": 0,
        "value": "Core Contributors"
      }]
    }, {
      "type": 0,
      "value": " are shown as part of the team on your page but do not have admin access or get notifications. They do not play an active role on the platform."
    }]
  },
  [_lib_constants_roles__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT]: {
    id: "OdjT4O",
    defaultMessage: [{
      "type": 8,
      "value": "strong",
      "children": [{
        "type": 0,
        "value": "Accountants"
      }]
    }, {
      "type": 0,
      "value": " have read-only access to non-public data, uploaded files, and reports for record-keeping purposes. They cannot make changes and are not shown on your page."
    }]
  }
});
const hasRoleDescription = role => {
  return Boolean(ROLES_DETAILS[role]);
};

const MemberRoleDescription = ({
  role
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
  return hasRoleDescription(role) ? intl.formatMessage(ROLES_DETAILS[role], _I18nFormatters__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP) : null;
};

MemberRoleDescription.propTypes = {
  role: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf(Object.values(_lib_constants_roles__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z))
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MemberRoleDescription);

/***/ }),

/***/ 79846:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_popper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42932);
/* harmony import */ var react_popper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_popper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46555);
/* harmony import */ var _lib_hooks_useGlobalBlur__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(55348);
/* harmony import */ var _lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(34487);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_3__]);
uuid__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }









const Arrow = styled_components__WEBPACK_IMPORTED_MODULE_2___default()('div').withConfig({
  displayName: "MenuPopover__Arrow",
  componentId: "sc-4sn3jz-0"
})(["position:absolute;font-size:8px;width:3em;height:3em;&::before{content:'';margin:auto;display:block;width:0;height:0;border-style:solid;}"]);
const StyledMenuPopoverContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default()(`div`).withConfig({
  displayName: "MenuPopover__StyledMenuPopoverContainer",
  componentId: "sc-4sn3jz-1"
})(["max-width:320px;z-index:1000000;opacity:0.96 !important;border-radius:4px;font-size:12px;text-transform:initial;white-space:normal;color:white;background:white;box-shadow:0px 4px 8px rgba(20,20,20,0.16);border:1px solid #e2e2e2;&[data-popper-placement*='bottom']{", "{top:0;left:0;margin-top:-1em;width:3em;height:1em;&::before{border-width:0 1.5em 1em 1.5em;border-color:transparent transparent white transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='top']{", "{bottom:0;left:0;margin-bottom:-0.9em;width:3em;height:1em;&::before{border-width:1em 1.5em 0 1.5em;border-color:white transparent transparent transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='right']{", "{left:0;margin-left:-0.9em;height:3em;width:1em;&::before{border-width:1.5em 1em 1.5em 0;border-color:transparent white transparent transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='left']{", "{right:0;margin-right:-0.9em;height:3em;width:1em;&::before{border-width:1.5em 0 1.5em 1em;border-color:transparent transparent transparent white;filter:drop-shadow(0 0 0 grey);}}}"], Arrow, Arrow, Arrow, Arrow);
const InnerMenuContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "MenuPopover__InnerMenuContainer",
  componentId: "sc-4sn3jz-2"
})(["outline:none;"]);

const TooltipContent = ({
  onClose,
  content,
  arrowProps,
  containerProps
}) => {
  const innerRef = react__WEBPACK_IMPORTED_MODULE_0___default().useRef(); // Close on click outside

  (0,_lib_hooks_useGlobalBlur__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(innerRef, isOutside => {
    if (isOutside) {
      onClose();
    }
  }); // Close when Escape is pressed

  (0,_lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP)({
    callback: onClose,
    keyMatch: _lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__/* .ESCAPE_KEY */ .O_
  }); // Focus menu when opening

  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(() => {
    innerRef.current.focus();
  }, []);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(StyledMenuPopoverContainer, _objectSpread(_objectSpread({}, containerProps), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(InnerMenuContainer, {
      ref: innerRef,
      tabIndex: "-1",
      children: content({
        onClose
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(Arrow, _objectSpread({}, arrowProps))]
  }));
};

const MenuPopover = ({
  children,
  placement,
  content
}) => {
  const {
    0: isMenuDisplayed,
    1: setIsMenuDisplayed
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const {
    0: referenceElement,
    1: setReferenceElement
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
  const {
    0: popperElement,
    1: setPopperElement
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
  const {
    0: arrowElement,
    1: setArrowElement
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
  const {
    0: id,
    1: setId
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
  const {
    styles,
    attributes
  } = (0,react_popper__WEBPACK_IMPORTED_MODULE_1__.usePopper)(referenceElement, popperElement, {
    placement,
    strategy: 'fixed',
    modifiers: [{
      name: 'arrow',
      options: {
        element: arrowElement
      }
    }]
  });
  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(() => {
    setId(`menu-popover-${(0,uuid__WEBPACK_IMPORTED_MODULE_3__.v4)()}`); // We only set `id` on the client to avoid mismatches with SSR
  }, []);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [children({
      ref: setReferenceElement,
      onClick: () => setIsMenuDisplayed(true)
    }), id && isMenuDisplayed && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(TooltipContent, {
      placement: placement,
      content: content,
      onClose: () => setIsMenuDisplayed(false),
      arrowProps: _objectSpread({
        ref: setArrowElement,
        style: styles.arrow
      }, attributes.arrow),
      containerProps: _objectSpread({
        ref: setPopperElement,
        style: styles.popper
      }, attributes.popper)
    })]
  });
};

MenuPopover.defaultProps = {
  placement: 'top-start'
};
MenuPopover.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuPopover",
  "props": {
    "placement": {
      "defaultValue": {
        "value": "'top-start'",
        "computed": false
      },
      "description": "Tooltip place",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'auto'",
          "computed": false
        }, {
          "value": "'auto-start'",
          "computed": false
        }, {
          "value": "'auto-end'",
          "computed": false
        }, {
          "value": "'top'",
          "computed": false
        }, {
          "value": "'top-start'",
          "computed": false
        }, {
          "value": "'top-end'",
          "computed": false
        }, {
          "value": "'bottom'",
          "computed": false
        }, {
          "value": "'bottom-start'",
          "computed": false
        }, {
          "value": "'bottom-end'",
          "computed": false
        }, {
          "value": "'right'",
          "computed": false
        }, {
          "value": "'right-start'",
          "computed": false
        }, {
          "value": "'right-end'",
          "computed": false
        }, {
          "value": "'left'",
          "computed": false
        }, {
          "value": "'left-start'",
          "computed": false
        }, {
          "value": "'left-end'",
          "computed": false
        }]
      },
      "required": false
    },
    "content": {
      "description": "The popup content",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "children": {
      "description": "The trigger. Either:\n - A render func, that gets passed props to set on the trigger\n - A React node, rendered inside an div",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MenuPopover);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 8634:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_": () => (/* binding */ PasswordStrengthBar)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5152);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





const ReactPasswordStrengthBar = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(() => Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 98355, 23)), {
  loadableGenerated: {
    modules: ["../components/PasswordStrengthBar.tsx -> " + 'react-password-strength-bar']
  }
});
/**
 * A wrapper around react-password-strength-bar to plug our custom styles and logic.
 * Loads the library dynamically to avoid bloating the bundle size.
 */

const PasswordStrengthBar = props => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(ReactPasswordStrengthBar, _objectSpread(_objectSpread({}, props), {}, {
    style: {
      visibility: props.password ? 'visible' : 'hidden'
    },
    shortScoreWord: intl.formatMessage({
      id: "FormError.minLength",
      defaultMessage: [{
        "type": 0,
        "value": "The value is too short"
      }]
    }),
    scoreWords: [intl.formatMessage({
      id: "Password.weak",
      defaultMessage: [{
        "type": 0,
        "value": "Weak"
      }]
    }), intl.formatMessage({
      id: "Password.weak",
      defaultMessage: [{
        "type": 0,
        "value": "Weak"
      }]
    }), intl.formatMessage({
      id: "Password.fair",
      defaultMessage: [{
        "type": 0,
        "value": "Fair"
      }]
    }), intl.formatMessage({
      id: "Password.good",
      defaultMessage: [{
        "type": 0,
        "value": "Good"
      }]
    }), intl.formatMessage({
      id: "Password.strong",
      defaultMessage: [{
        "type": 0,
        "value": "Strong"
      }]
    })]
  }));
};
PasswordStrengthBar.__docgenInfo = {
  "description": "A wrapper around react-password-strength-bar to plug our custom styles and logic.\nLoads the library dynamically to avoid bloating the bundle size.",
  "methods": [],
  "displayName": "PasswordStrengthBar"
};

/***/ }),

/***/ 72712:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_payment_method_label__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51515);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66943);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
const _excluded = ["intl", "paymentMethods", "defaultPaymentMethod", "value", "onChange", "inputId"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







class PaymentMethodSelect extends react__WEBPACK_IMPORTED_MODULE_0__.Component {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "paymentMethodValueAndLabel", (intl, paymentMethod) => {
      return {
        value: paymentMethod,
        label: (0,_lib_payment_method_label__WEBPACK_IMPORTED_MODULE_2__/* .paymentMethodLabelWithIcon */ .FF)(intl, paymentMethod)
      };
    });
  }

  render() {
    const _this$props = this.props,
          {
      intl,
      paymentMethods,
      defaultPaymentMethod,
      value,
      onChange,
      inputId
    } = _this$props,
          props = _objectWithoutProperties(_this$props, _excluded);

    const options = paymentMethods.map(paymentMethod => this.paymentMethodValueAndLabel(intl, paymentMethod));
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP, _objectSpread({
      inputId: inputId,
      name: "paymentMethod",
      options: options,
      minWidth: 300,
      onChange: ({
        value
      }) => onChange(value),
      value: value ? this.paymentMethodValueAndLabel(intl, value) : undefined,
      defaultValue: defaultPaymentMethod ? this.paymentMethodValueAndLabel(intl, defaultPaymentMethod) : options[0]
    }, props));
  }

}

PaymentMethodSelect.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "paymentMethodValueAndLabel",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "intl",
      "type": null
    }, {
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "PaymentMethodSelect",
  "props": {
    "inputId": {
      "description": "The id of the search input",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "To control the component state",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "paymentMethods": {
      "description": "The payment methods to display. **Cannot be empty !**",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": true
    },
    "defaultPaymentMethod": {
      "description": "The default payment method. Will use the first one if not provided.",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore Provided by injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(PaymentMethodSelect));

/***/ }),

/***/ 43119:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16159);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56562);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71792);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);







/*
 * A image preview modal that can be used to display a preview image for a
 * an Email Template or an Invoice Receipt.
 */




const PreviewModal = ({
  previewImage,
  heading,
  subheading,
  imgHeight,
  imgWidth,
  onClose
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
    onClose: onClose,
    trapFocus: true,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalHeader */ .xB, {
      children: heading
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalBody */ .fe, {
      mb: 0,
      children: [subheading && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_3__/* .Box */ .xu, {
        pt: "6px",
        pb: "32px",
        fontSize: "14px",
        fontWeight: 400,
        lineHeight: "20px",
        color: "black.700",
        children: subheading
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Image__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
        src: previewImage,
        alt: "Position of custom message",
        height: imgHeight,
        width: imgWidth
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalFooter */ .mz, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Container__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        display: "flex",
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
          buttonStyle: "secondary",
          onClick: onClose,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
            id: "Close",
            defaultMessage: [{
              "type": 0,
              "value": "Close"
            }]
          })
        })
      })
    })]
  });
};

PreviewModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PreviewModal",
  "props": {
    "previewImage": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "heading": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "element"
        }]
      },
      "required": true
    },
    "subheading": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "element"
        }]
      },
      "required": false
    },
    "imgHeight": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": true
    },
    "imgWidth": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PreviewModal);

/***/ }),

/***/ 69486:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(47869);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95834);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_system__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16159);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);








const ChartContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "ProportionalAreaChart__ChartContainer",
  componentId: "sc-pcdist-0"
})(["display:flex;flex-wrap:wrap;overflow:hidden;", ""], styled_system__WEBPACK_IMPORTED_MODULE_3__.borderRadius);
const LegendContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "ProportionalAreaChart__LegendContainer",
  componentId: "sc-pcdist-1"
})(["display:flex;flex-wrap:wrap;margin-top:8px;width:100%;"]);
const Label = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "ProportionalAreaChart__Label",
  componentId: "sc-pcdist-2"
})(["display:inline-block;background:rgba(255,255,255,0.8);padding:4px 6px;font-size:12px;border-radius:4px;white-space:nowrap;"]);
const Area = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "ProportionalAreaChart__Area",
  componentId: "sc-pcdist-3"
})(["padding:12px 8px;flex-shrink:0;flex-grow:1;flex-basis:", ";", ""], props => props.percentage, styled_system__WEBPACK_IMPORTED_MODULE_3__.color);
const Square = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "ProportionalAreaChart__Square",
  componentId: "sc-pcdist-4"
})(["width:8px;height:8px;border-radius:1.2px;margin-right:8px;", ""], styled_system__WEBPACK_IMPORTED_MODULE_3__.color);

const Legend = ({
  color,
  label
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Flex */ .kC, {
    alignItems: "center",
    mr: 2,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(Square, {
      backgroundColor: color
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(_Text__WEBPACK_IMPORTED_MODULE_5__.P, {
      fontSize: "12px",
      lineHeight: "16px",
      color: "black.600",
      whiteSpace: "nowrap",
      children: label
    })]
  });
};

const getPreparedAreaPercentage = (areas, area) => {
  if (area.percentage) {
    return `${lodash_round__WEBPACK_IMPORTED_MODULE_0___default()(area.percentage * 100, 2)}%`;
  } else {
    return `${lodash_round__WEBPACK_IMPORTED_MODULE_0___default()(100 / areas.length, 2)}%`;
  }
};

const ProportionalAreaChart = ({
  areas,
  borderRadius
}) => {
  const hasLegend = areas.some(area => area.legend);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(ChartContainer, {
      borderRadius: borderRadius,
      children: areas.map(area => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(Area, {
        percentage: getPreparedAreaPercentage(areas, area),
        backgroundColor: area.color,
        children: area.label && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(Label, {
          children: area.label
        })
      }, area.key))
    }), hasLegend && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(LegendContainer, {
      children: areas.map(area => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Box */ .xu, {
        flexBasis: getPreparedAreaPercentage(areas, area),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(Legend, {
          label: area.legend,
          color: area.color
        })
      }, area.key))
    })]
  });
};

ProportionalAreaChart.defaultProps = {
  borderRadius: '6px'
};
ProportionalAreaChart.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ProportionalAreaChart",
  "props": {
    "borderRadius": {
      "defaultValue": {
        "value": "'6px'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "areas": {
      "description": "The series to represent",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "key": {
              "name": "string",
              "required": true
            },
            "label": {
              "name": "node",
              "required": false
            },
            "percentage": {
              "name": "number",
              "description": "How much space should be taken by this area. Defaults to proportional (100 / numberOfAreas)%",
              "required": false
            },
            "color": {
              "name": "string",
              "required": false
            },
            "legend": {
              "name": "node",
              "required": false
            }
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(ProportionalAreaChart));

/***/ }),

/***/ 59139:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RichTextEditor)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_system_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42038);
/* harmony import */ var _styled_system_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_system_css__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46555);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71564);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65985);
/* harmony import */ var _lib_styled_components_shared_styles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(72004);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97079);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69078);
/* harmony import */ var _HTMLContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(74770);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(37278);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(36422);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_4__]);
uuid__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
















const TrixEditorContainer = styled_components__WEBPACK_IMPORTED_MODULE_3___default().div.withConfig({
  displayName: "RichTextEditor__TrixEditorContainer",
  componentId: "sc-2bze4a-0"
})(["", " trix-editor{border:none;padding:0;margin-top:8px;padding-top:8px;outline-offset:0.5em;", " &::-webkit-scrollbar{width:8px;}", " ", " &:empty:not(:focus)::before{color:", ";}figcaption{display:none;}", "}trix-toolbar{min-height:40px;background:", ";", " z-index:2;margin-bottom:8px;", " .trix-button-group{border-radius:6px;border-color:#c4c7cc;margin-bottom:0;background:white;}.trix-button{border-bottom:none;display:inline-block;height:auto;&:hover{background:", ";}&.trix-active{background:", ";}&::before,&.trix-active::before{margin:4px;}}", " @media (max-width:500px){.trix-button--icon-strike,.trix-button--icon-number-list,.trix-button--icon-decrease-nesting-level,.trix-button--icon-increase-nesting-level{display:none;}}", " .trix-button--icon-attach::before{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'/%3E%3Ccircle cx='8.5' cy='8.5' r='1.5'/%3E%3Cpolyline points='21 15 16 10 5 21'/%3E%3C/svg%3E\");}.trix-button--video-attach::before{top:8%;bottom:4%;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-video'%3E%3Cpolygon points='23 7 16 12 23 17 23 7'%3E%3C/polygon%3E%3Crect x='1' y='5' width='15' height='14' rx='2' ry='2'%3E%3C/rect%3E%3C/svg%3E\");}}", ""], props => props.withBorders && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  border: '1px solid',
  borderColor: !props.error ? 'black.300' : 'red.300',
  borderRadius: 10,
  padding: 3
}), _lib_styled_components_shared_styles__WEBPACK_IMPORTED_MODULE_7__/* .CustomScrollbarCSS */ .T, props => Boolean(props.editorMaxHeight) && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  overflowY: 'scroll'
}), props => !props.withBorders && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  outline: !props.error ? 'none' : `1px dashed ${props.theme.colors.red[300]}`,
  '&:focus': {
    outline: `1px dashed ${props.theme.colors.black[200]}`
  }
}), props => props.theme.colors.black[400], props => (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  minHeight: props.editorMinHeight,
  maxHeight: props.editorMaxHeight
}), props => props.toolbarBackgroundColor, props => !props.withBorders && `box-shadow: 0px 5px 3px -3px rgba(0, 0, 0, 0.1);`, props => props.withBorders && `min-height: 0px; margin-bottom: 0;`, props => props.theme.colors.blue[100], props => props.theme.colors.blue[200], props => props.version === 'simplified' && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  '.trix-button-group--file-tools': {
    display: 'none'
  },
  '.trix-button-group--block-tools .trix-button:not(.trix-button--icon-number-list):not(.trix-button--icon-bullet-list)': {
    display: 'none'
  },
  '.trix-button--icon-bullet-list': {
    borderLeft: 'none'
  }
}), props => props.withStickyToolbar && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  position: 'sticky',
  top: props.toolbarTop || 0,
  marginTop: props.toolbarOffsetY,
  p: '10px'
}), props => props.isDisabled && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_2__.css)({
  pointerEvents: 'none',
  cursor: 'not-allowed',
  background: '#f3f3f3',
  'trix-toolbar,.trix-button-group': {
    background: '#f3f3f3 !important'
  }
}));
const SUPPORTED_SERVICE_URLS = {
  youTube: 'https://www.youtube-nocookie.com/embed/',
  anchorFm: 'https://anchor.fm/'
};
/**
 * A React wrapper around the Trix library to edit rich text.
 * Produces HTML and clear text.
 */

class RichTextEditor extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "initialize", () => {
      if (this.Trix && this.editorRef.current) {
        // Listen for changes
        this.editorRef.current.addEventListener('trix-change', this.handleChange, false);
        this.editorRef.current.addEventListener('trix-attachment-add', this.handleUpload);
        this.editorRef.current.addEventListener('trix-file-accept', this.handleFileAccept);
        this.editorRef.current.addEventListener('trix-action-invoke', this.trixActionInvoke);
        this.editorRef.current.addEventListener('trix-initialize', event => {
          if (this.props.videoEmbedEnabled) {
            this.replaceEmbeddedIFrames(this.props.value || this.props.defaultValue);
            this.trixEmbed(event);
          } // Some special handling for links


          if (this.mainContainerRef.current) {
            // We must listen when the user presses the 'Enter' key and when the user clicks the 'Link' button as well
            const linkInput = this.mainContainerRef.current.querySelector("[data-trix-input][name='href']");
            linkInput?.addEventListener('keydown', e => {
              if (e.key === 'Enter') {
                this.handleLink();
              }
            });
            const addLinkBtn = this.mainContainerRef.current.querySelector("[data-trix-method='setAttribute']");
            addLinkBtn?.addEventListener('click', this.handleLink);
          }
        }); // Component ready!

        this.isReady = true;
      }
    });

    _defineProperty(this, "replaceEmbeddedIFrames", value => {
      const iframeRegex = new RegExp(`<iframe.+?iframe>`, 'ig');
      let match;
      let lastIndex = 0;

      while (match = iframeRegex.exec(value)) {
        if (lastIndex === 0) {
          this.getEditor().loadHTML('');
        }

        const iframe = match[0];
        const position = match.index;
        const preText = value.substring(lastIndex, position);
        this.getEditor().setSelectedRange([lastIndex, position]);
        this.getEditor().insertHTML(preText);
        const attachment = new this.Trix.Attachment({
          content: iframe
        });
        this.getEditor().insertAttachment(attachment);
        lastIndex = match.index + iframe.length;
        const postText = value.substring(lastIndex, value.length);
        this.getEditor().insertHTML(postText);
      }
    });

    _defineProperty(this, "trixEmbed", e => {
      const videoEmbedButton = `<button type="button" tabindex="-1" data-trix-action="x-video-dialog-open" title="Attach Video" class="trix-button trix-button--icon trix-button--video-attach">Attach Video</button>`;
      const videoEmbedDialog = `
            <div class="trix-dialog" data-trix-dialog="video-url" data-trix-dialog-attribute="video">
              <div class="trix-dialog__link-fields">
                <input type="url" name="video-url" class="trix-input trix-input--dialog trix-input--dialog-embed" placeholder="Enter Video URL…" aria-label="Video URL" data-trix-input="">
                <div class="trix-button-group">
                  <input type="button" class="trix-button trix-button--dialog" value="Add Video" data-trix-action="x-add-embed">
                </div>
              </div>
              <strong>Note: Only YouTube and Anchor.fm links are supported.</strong>
            </div>`;
      const {
        toolbarElement
      } = e.target;
      const attachFilesButton = toolbarElement.querySelector('[data-trix-action=attachFiles]');
      attachFilesButton.insertAdjacentHTML('afterend', videoEmbedButton);
      const trixDialog = toolbarElement.querySelector('.trix-dialog--link');
      trixDialog.insertAdjacentHTML('afterend', videoEmbedDialog);
    });

    _defineProperty(this, "trixActionInvoke", e => {
      const {
        toolbarElement
      } = e.target;

      if (e.actionName === 'x-video-dialog-open') {
        const attachVideoDialog = toolbarElement.querySelector('[data-trix-dialog=video-url]');
        const attachVideoDialogInput = toolbarElement.querySelector('.trix-input--dialog-embed');

        if (attachVideoDialog.getAttribute('data-trix-active') === '') {
          attachVideoDialog.removeAttribute('data-trix-active');
        } else {
          attachVideoDialog.setAttribute('data-trix-active', '');
          attachVideoDialogInput.removeAttribute('disabled');
        }
      } else if (e.actionName === 'x-add-embed') {
        const embedLink = toolbarElement.querySelector('.trix-input--dialog-embed').value?.trim();

        if (embedLink) {
          this.embedIframe(embedLink);
        }
      }
    });

    _defineProperty(this, "constructVideoEmbedURL", (service, id) => {
      if (service === 'youtube') {
        return `${SUPPORTED_SERVICE_URLS.youTube}${id}`;
      }
      /* else if (service === 'vimeo') {
      return `https://player.vimeo.com/video/${id}`;
      } */
      else if (service === 'anchorFm') {
        return `${SUPPORTED_SERVICE_URLS.anchorFm}${id}`;
      } else {
        return null;
      }
    });

    _defineProperty(this, "parseServiceLink", videoLink => {
      const regexps = {
        youtube: new RegExp('(?:https?://)?(?:www\\.)?youtu(?:\\.be/|be\\.com/\\S*(?:watch|embed)(?:(?:(?=/[^&\\s?]+(?!\\S))/)|(?:\\S*v=|v/)))([^&\\s?]+)', 'i'),
        vimeo: new RegExp('(http|https)?://(www\\.)?vimeo\\.com/(?:channels/(?:\\w+/)?|groups/([^/]*)/videos/|)(\\d+)(?:|/?)'),
        anchorFm: /^(http|https)?:\/\/(www\.)?anchor\.fm\/([^/]+)(\/embed)?(\/episodes\/)?([^/]+)?\/?$/
      };

      for (const service in regexps) {
        const matches = regexps[service].exec(videoLink);

        if (matches) {
          if (service === 'anchorFm') {
            const podcastName = matches[3];
            const episodeId = matches[6];
            const podcastUrl = `${podcastName}/embed`;
            return {
              service,
              id: episodeId ? `${podcastUrl}/episodes/${episodeId}` : podcastUrl
            };
          } else {
            return {
              service,
              id: matches[matches.length - 1]
            };
          }
        }
      }

      return {};
    });

    _defineProperty(this, "embedIframe", videoLink => {
      const {
        id,
        service
      } = this.parseServiceLink(videoLink);
      const embedLink = this.constructVideoEmbedURL(service, id);

      if (embedLink) {
        const sanitizedLink = embedLink.replace(/["\\]/g, ''); // Small security enhancement, prevents going out of `src`

        const videoServices = ['youtube', 'vimeo'];
        let attachmentData;

        if (videoServices.includes(service)) {
          attachmentData = {
            contentType: '--embed-iframe-video',
            content: `<iframe src="${sanitizedLink}/?showinfo=0" width="100%" height="394" frameborder="0" allowfullscreen/>`
          };
        } else {
          attachmentData = {
            contentType: `--embed-iframe-${service}`,
            content: `<iframe src="${sanitizedLink}" width="100%" frameborder="0"/>`
          };
        }

        this.getEditor().insertAttachment(new this.Trix.Attachment(attachmentData));
      }
    });

    _defineProperty(this, "handleChange", e => {
      // Trigger content formatters
      this.autolink(); // Notify parent function

      if (this.props.onChange) {
        this.props.onChange(e);
      } // Reset errors


      if (this.state.error) {
        this.setState({
          error: null
        });
      }
    });

    _defineProperty(this, "handleFileAccept", e => {
      if (!/^image\//.test(e.file.type)) {
        alert('You can only upload images.');
        e.preventDefault();
      } else if (e.file.size > 4000000) {
        // Prevent attaching files > 4MB
        alert('This file is too big (max: 4mb).');
        e.preventDefault();
      }
    });

    _defineProperty(this, "handleUpload", e => {
      const {
        attachment
      } = e;

      const attachmentContent = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(attachment, 'attachment.attributes.values.content');

      const isVideoAttachment = attachmentContent?.includes(`<iframe src="${SUPPORTED_SERVICE_URLS.youTube}`) || attachmentContent?.includes(`<iframe src="${SUPPORTED_SERVICE_URLS.anchorFm}`);

      if (isVideoAttachment) {
        return;
      } else if (!attachment.file) {
        attachment.remove(); // Remove unknown stuff, for example when copy-pasting HTML

        return;
      }

      this.props.setUploading?.(true);

      const onProgress = progress => attachment.setUploadProgress(progress);

      const onSuccess = fileURL => {
        this.props.setUploading?.(false);
        attachment.setAttributes({
          url: fileURL,
          href: fileURL
        });
      };

      const onFailure = () => {
        this.props.setUploading?.(false);
        this.setState({
          error: 'File upload failed'
        });
        attachment.remove();
      };

      (0,_lib_api__WEBPACK_IMPORTED_MODULE_6__/* .uploadImageWithXHR */ .Z4)(attachment.file, this.props.kind, {
        onProgress,
        onSuccess,
        onFailure
      });
      return e;
    });

    _defineProperty(this, "handleLink", () => {
      const urlInput = this.mainContainerRef.current?.querySelector("[data-trix-input][name='href']");
      const urlInputValue = urlInput?.value?.trim(); // Ignore missing input or empty values

      if (!urlInputValue) {
        return;
      } // Automatically add 'https://' to the url
      // eslint-disable-next-line camelcase


      if ((0,validator__WEBPACK_IMPORTED_MODULE_5__.isURL)(urlInputValue, {
        require_protocol: false
      }) && !(0,validator__WEBPACK_IMPORTED_MODULE_5__.isURL)(urlInputValue, {
        require_protocol: true
      })) {
        urlInput.value = `https://${urlInputValue}`;
      }
    });

    _defineProperty(this, "autolinkDelimiter", url => {
      let lastCharacterPosition = url.length;

      while (lastCharacterPosition > 0) {
        const lastCharacterIndex = lastCharacterPosition - 1;
        const closingPair = url[lastCharacterIndex];
        let openingPair;

        if (closingPair === ')') {
          openingPair = '(';
        } else if (closingPair === ']') {
          openingPair = '[';
        } else if (closingPair === '}') {
          openingPair = '{';
        } else if (closingPair === '"') {
          openingPair = '"';
        } else if (closingPair === "'") {
          openingPair = "'";
        } // Ensure single punctuations marks at the end of the URL are not included as part of link


        if ('?!.,:;*_~'.includes(url[lastCharacterIndex])) {
          lastCharacterPosition--;
        } else if (openingPair) {
          let opening = 0,
              closing = 0;
          /** Check to ensure that when a URL is enclosed within pair punctuations,
           * we do not include the closing punctuation as part of the link.
           * We only want to accept a closing punctuation at the end of the link,
           * if there is a corresponding opening punctuation within the URL.
           */

          for (let i = 0; i < lastCharacterPosition; i++) {
            if (url[i] === openingPair) {
              opening++;
            } else if (url[i] === closingPair) {
              closing++;
            }
          }

          if (opening >= closing) {
            break;
          }

          lastCharacterPosition--;
        } else {
          break;
        }
      }

      return lastCharacterPosition;
    });

    this.editorRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createRef();
    this.mainContainerRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createRef();
    this.state = {
      id: props.id,
      error: null
    };
    this.isReady = false;

    if (false) {}
  }

  componentDidMount() {
    if (!this.state.id) {
      this.setState({
        id: (0,uuid__WEBPACK_IMPORTED_MODULE_4__.v4)()
      });
    } else if (!this.isReady) {
      this.initialize();
    }
  }

  componentDidUpdate(oldProps) {
    if (!this.isReady) {
      this.initialize();
    } else if (oldProps.reset !== this.props.reset) {
      this.editorRef.current.editor.loadHTML('');
    }
  }

  componentWillUnmount() {
    if (this.isReady) {
      this.editorRef.current.removeEventListener('trix-change', this.handleChange);
      this.editorRef.current.removeEventListener('trix-attachment-add', this.handleUpload);
      this.editorRef.current.removeEventListener('trix-attachment-add', this.handleFileAccept);
      this.editorRef.current.removeEventListener('trix-action-invoke', this.trixActionInvoke);
    }
  }

  getEditor() {
    return this.editorRef.current.editor;
  }

  /** Automatically create anchors with hrefs for links */
  autolink() {
    const linkRegex = new RegExp(`(https?://\\S+\\.\\S+)\\s`, 'ig');
    const editor = this.getEditor();
    const content = editor.getDocument().toString();
    let match;

    while (match = linkRegex.exec(content)) {
      const url = match[1];

      if ((0,validator__WEBPACK_IMPORTED_MODULE_5__.isURL)(url)) {
        const position = match.index;
        const urlLength = this.autolinkDelimiter(url);
        const range = [position, position + urlLength];
        const hrefAtRange = editor.getDocument().getCommonAttributesAtRange(range).href;
        const newURL = url.slice(0, urlLength);

        if (hrefAtRange !== newURL) {
          this.updateInRange(editor, range, 0, () => {
            if (editor.canActivateAttribute('href')) {
              editor.activateAttribute('href', newURL);
            }
          });
        }
      }
    }
  }
  /** A helper used by autolink to find where the url actually ends
   * Credits:
   * https://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37
   * https://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58
   */


  /** A trix helper that will apply func in range then restore base range when it's done */
  updateInRange(editor, range, offset = 0, updateFunc) {
    const baseRange = editor.getSelectedRange();
    editor.setSelectedRange(range);
    updateFunc();
    editor.setSelectedRange([baseRange[0] + offset, baseRange[1] + offset]);
  }
  /** ---- Render ---- */


  render() {
    const {
      defaultValue,
      withStickyToolbar,
      toolbarTop,
      toolbarOffsetY,
      toolbarBackgroundColor,
      autoFocus,
      placeholder,
      editorMinHeight,
      withBorders,
      inputName,
      disabled,
      error,
      fontSize,
      value,
      version,
      showCount,
      maxLength,
      editorMaxHeight
    } = this.props;
    return !this.state.id ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      maxHeight: editorMaxHeight ? editorMaxHeight + 56 : undefined,
      height: editorMinHeight ? editorMinHeight + 56 : 200
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(TrixEditorContainer, {
      withStickyToolbar: withStickyToolbar,
      toolbarTop: toolbarTop,
      toolbarOffsetY: toolbarOffsetY,
      toolbarBackgroundColor: toolbarBackgroundColor,
      editorMinHeight: editorMinHeight,
      editorMaxHeight: editorMaxHeight,
      withBorders: withBorders,
      version: version,
      isDisabled: disabled,
      error: error,
      "data-cy": this.props['data-cy'],
      ref: this.mainContainerRef,
      children: [this.state.error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        type: "error",
        mb: "36px",
        withIcon: true,
        children: this.state.error.toString()
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx("input", {
        id: this.state.id,
        value: value || defaultValue,
        type: "hidden",
        name: inputName
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_HTMLContent__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        fontSize: fontSize,
        children: !showCount ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx("trix-editor", {
          ref: this.editorRef,
          input: this.state.id,
          autofocus: autoFocus ? true : undefined,
          placeholder: placeholder
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          position: "relative",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx("trix-editor", {
            ref: this.editorRef,
            input: this.state.id,
            autofocus: autoFocus ? true : undefined,
            placeholder: placeholder
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            position: "absolute",
            bottom: "1em",
            right: "1em",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledTag__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              textTransform: "uppercase",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx("span", {
                children: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__/* .stripHTML */ .Cb)(value || defaultValue).length
              }), maxLength && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("span", {
                children: [" / ", maxLength]
              })]
            })
          })]
        })
      })]
    });
  }

}

_defineProperty(RichTextEditor, "defaultProps", {
  withStickyToolbar: false,
  toolbarTop: 0,
  toolbarOffsetY: -62,
  // Default Trix toolbar height
  inputName: 'content',
  toolbarBackgroundColor: 'white',
  version: 'default',
  'data-cy': 'RichTextEditor',
  videoEmbedEnabled: false
});

RichTextEditor.__docgenInfo = {
  "description": "A React wrapper around the Trix library to edit rich text.\nProduces HTML and clear text.",
  "methods": [{
    "name": "getEditor",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "initialize",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "replaceEmbeddedIFrames",
    "docblock": "---- Trix handlers ----",
    "modifiers": [],
    "params": [{
      "name": "value"
    }],
    "returns": null,
    "description": "---- Trix handlers ----"
  }, {
    "name": "trixEmbed",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "trixActionInvoke",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "constructVideoEmbedURL",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }, {
      "name": "id",
      "type": null
    }],
    "returns": null
  }, {
    "name": "parseServiceLink",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "videoLink",
      "type": null
    }],
    "returns": null
  }, {
    "name": "embedIframe",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "videoLink",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleFileAccept",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleUpload",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleLink",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "autolink",
    "docblock": "Automatically create anchors with hrefs for links",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Automatically create anchors with hrefs for links"
  }, {
    "name": "autolinkDelimiter",
    "docblock": "A helper used by autolink to find where the url actually ends\nCredits:\nhttps://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37\nhttps://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58",
    "modifiers": [],
    "params": [{
      "name": "url"
    }],
    "returns": null,
    "description": "A helper used by autolink to find where the url actually ends\nCredits:\nhttps://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37\nhttps://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58"
  }, {
    "name": "updateInRange",
    "docblock": "A trix helper that will apply func in range then restore base range when it's done",
    "modifiers": [],
    "params": [{
      "name": "editor"
    }, {
      "name": "range"
    }, {
      "name": "offset"
    }, {
      "name": "updateFunc"
    }],
    "returns": null,
    "description": "A trix helper that will apply func in range then restore base range when it's done"
  }],
  "displayName": "RichTextEditor",
  "props": {
    "withStickyToolbar": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "Whether the toolbar should stick to the top",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "toolbarTop": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "If position is sticky, this prop defines the `top` property. Support responsive arrays",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "toolbarOffsetY": {
      "defaultValue": {
        "value": "-62",
        "computed": false
      },
      "description": "Useful to compensate the height of the toolbar when editing inline",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "inputName": {
      "defaultValue": {
        "value": "'content'",
        "computed": false
      },
      "description": "A name for the input",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "toolbarBackgroundColor": {
      "defaultValue": {
        "value": "'white'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "version": {
      "defaultValue": {
        "value": "'default'",
        "computed": false
      },
      "description": "This component is borderless by default. Set this to `true` to change that.",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'default'",
          "computed": false
        }, {
          "value": "'simplified'",
          "computed": false
        }]
      },
      "required": false
    },
    "data-cy": {
      "defaultValue": {
        "value": "'RichTextEditor'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "videoEmbedEnabled": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "id": {
      "description": "If not provided, an id will be automatically generated which will require a component update",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "defaultValue": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "placeholder": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "kind": {
      "description": "A unique identified for the category of uploaded files. Required if version is not \"simplified\"",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "fontSize": {
      "description": "Font size for the text",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "autoFocus": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onChange": {
      "description": "Called when text is changed with html content as first param and text content as second param",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "reset": {
      "description": "Change this prop to reset the value",
      "type": {
        "name": "any"
      },
      "required": false
    },
    "showCount": {
      "description": "If true, max text length will be displayed at the bottom right",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "maxLength": {
      "description": "max length which is allowed",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "withBorders": {
      "description": "This component is borderless by default. Set this to `true` to change that.",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "disabled": {
      "description": "Whether the field should be disabled",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "editorMinHeight": {
      "description": "Min height for the full component",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "editorMaxHeight": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "error": {
      "description": "If truthy, will display a red outline",
      "type": {
        "name": "any"
      },
      "required": false
    },
    "setUploading": {
      "description": "Called when an image is being uploaded to set a boolean",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 31997:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ StyledMultiEmailInput)
});

// EXTERNAL MODULE: external "lodash/uniq"
var uniq_ = __webpack_require__(18459);
var uniq_default = /*#__PURE__*/__webpack_require__.n(uniq_);
// EXTERNAL MODULE: external "lodash/omit"
var omit_ = __webpack_require__(63901);
var omit_default = /*#__PURE__*/__webpack_require__.n(omit_);
// EXTERNAL MODULE: external "lodash/debounce"
var debounce_ = __webpack_require__(93908);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce_);
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
// EXTERNAL MODULE: external "@styled-system/theme-get"
var theme_get_ = __webpack_require__(19099);
;// CONCATENATED MODULE: external "draft-js"
const external_draft_js_namespaceObject = require("draft-js");
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
;// CONCATENATED MODULE: ./lib/styled_components_utils.js
/**
 * Return the correct border color index depending on `error` and `success`.
 *
 * ## Examples
 *
 *    > getInputBorderColor(true)
 *    'red.500'
 */
const getInputBorderColor = (error, success) => {
  if (error) {
    return 'red.500';
  }

  if (success) {
    return 'green.300';
  }

  return 'black.300';
};
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/StyledMultiEmailInput.js




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }











const InputContainer = external_styled_components_default()(Container/* default */.Z).withConfig({
  displayName: "StyledMultiEmailInput__InputContainer",
  componentId: "sc-l9fsfu-0"
})([".DraftEditor-root{padding:0.5em;cursor:text;font-weight:400;border:1px solid;border-radius:4px;border-color:inherit;&:hover,&:focus{border-color:", ";}}.public-DraftEditor-content{min-height:3em;max-height:18em;overflow-y:auto;}.public-DraftEditor-content[contenteditable='false']{cursor:not-allowed;}"], (0,theme_get_.themeGet)('colors.primary.300'));
class StyledMultiEmailInput extends external_react_.Component {
  constructor(props) {
    super(props);
    this.onChange = this.onChange.bind(this);
    this.onChangeParent = debounce_default()(this.onChangeParent.bind(this), 100, {
      trailing: true
    });
    this.onBlur = this.onBlur.bind(this);
    this.onFocus = this.onFocus.bind(this);
    this.state = {
      editorState: props.initialState || external_draft_js_namespaceObject.EditorState.createEmpty(),
      showErrors: false
    };
  }

  componentWillUnmount() {
    if (this.props.onClose) {
      this.props.onClose(this.state.editorState);
    }
  }

  extractEmails(str) {
    return uniq_default()(str.split(/[\s,;]/gm)).reduce((result, term) => {
      if (term.length === 0) {
        return result;
      } else if (term.match(/.+@.+\..+/)) {
        result.emails.push(term);
      } else {
        result.invalids.push(term);
      }

      return result;
    }, {
      emails: [],
      invalids: []
    });
  }

  onChange(editorState) {
    this.setState({
      editorState
    });

    if (this.props.onChange) {
      this.onChangeParent(editorState);
    }
  }

  onChangeParent(editorState) {
    const stringContent = editorState.getCurrentContent().getPlainText();
    const returnedState = this.extractEmails(stringContent);
    this.props.onChange(returnedState);
  }

  onBlur() {
    this.setState({
      showErrors: true
    });
  }

  onFocus() {
    this.setState({
      showErrors: false
    });
  }

  render() {
    const {
      invalids,
      disabled
    } = this.props;
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(InputContainer, _objectSpread(_objectSpread({
      width: "100%",
      bg: disabled ? 'black.50' : 'white.full',
      fontSize: "14px",
      borderColor: getInputBorderColor(invalids && invalids.length > 0)
    }, omit_default()(this.props, ['invalids', 'onChange', 'initialState', 'onClose'])), {}, {
      children: [/*#__PURE__*/jsx_runtime_.jsx(external_draft_js_namespaceObject.Editor, {
        editorState: this.state.editorState,
        onChange: this.onChange,
        onBlur: this.onBlur,
        onFocus: this.onFocus,
        readOnly: disabled,
        stripPastedStyles: true
      }), this.state.showErrors && invalids && invalids.length > 0 && /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text/* Span */.Dr, {
        className: "multiemails-errors",
        display: "block",
        color: "red.500",
        pt: 2,
        fontSize: "10px",
        children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)("strong", {
          children: [/*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "multiemail.invalids",
            defaultMessage: [{
              "type": 0,
              "value": "Invalid emails:"
            }]
          }), ' ']
        }), invalids.join(', ')]
      })]
    }));
  }

}
StyledMultiEmailInput.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "extractEmails",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "str",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "editorState",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onChangeParent",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "editorState",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onBlur",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onFocus",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "StyledMultiEmailInput",
  "props": {
    "initialState": {
      "description": "Editor initial state",
      "type": {
        "name": "instanceOf",
        "value": "EditorState"
      },
      "required": false
    },
    "onChange": {
      "description": "Callback for state update like `({emails, invalids}) => void`",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onClose": {
      "description": "Callback for when component is unmount. Useful to save editor state.",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "invalids": {
      "description": "On array of invalid emails",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "disabled": {
      "description": "disabled",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};

/***/ }),

/***/ 7716:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_select_creatable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31325);
/* harmony import */ var react_select_creatable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_select_creatable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66943);



/**
 * A StyledSelect with creatable activated. See https://react-select.com/creatable
 */

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_0__.injectIntl)((0,_StyledSelect__WEBPACK_IMPORTED_MODULE_2__/* .makeStyledSelect */ .tO)((react_select_creatable__WEBPACK_IMPORTED_MODULE_1___default()))));

/***/ }),

/***/ 2729:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "U": () => (/* binding */ AdminPanelContext)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13398);


const AdminPanelContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createContext({
  selectedSection: _constants__WEBPACK_IMPORTED_MODULE_1__/* .ALL_SECTIONS.INFO */ .J7.INFO
});

/***/ }),

/***/ 58777:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_values__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57260);
/* harmony import */ var lodash_values__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_values__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _host_dashboard_applications_PendingApplications__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(66959);
/* harmony import */ var _host_dashboard_HostDashboardExpenses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(77161);
/* harmony import */ var _host_dashboard_HostDashboardHostedCollectives__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(71374);
/* harmony import */ var _host_dashboard_HostDashboardReports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82945);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29242);
/* harmony import */ var _NotFound__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(40517);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _sections_AccountSettings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(14476);
/* harmony import */ var _sections_FinancialContributions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(67817);
/* harmony import */ var _sections_HostVirtualCards__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(6795);
/* harmony import */ var _sections_InvoicesReceipts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(34503);
/* harmony import */ var _sections_NotificationsSettings__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(59237);
/* harmony import */ var _sections_PendingContributions__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(35127);
/* harmony import */ var _sections_Team__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(51283);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(13398);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_host_dashboard_applications_PendingApplications__WEBPACK_IMPORTED_MODULE_6__, _host_dashboard_HostDashboardExpenses__WEBPACK_IMPORTED_MODULE_7__, _host_dashboard_HostDashboardHostedCollectives__WEBPACK_IMPORTED_MODULE_8__, _host_dashboard_HostDashboardReports__WEBPACK_IMPORTED_MODULE_9__, _sections_AccountSettings__WEBPACK_IMPORTED_MODULE_13__, _sections_FinancialContributions__WEBPACK_IMPORTED_MODULE_14__, _sections_HostVirtualCards__WEBPACK_IMPORTED_MODULE_15__, _sections_InvoicesReceipts__WEBPACK_IMPORTED_MODULE_16__, _sections_NotificationsSettings__WEBPACK_IMPORTED_MODULE_17__, _sections_PendingContributions__WEBPACK_IMPORTED_MODULE_18__, _sections_Team__WEBPACK_IMPORTED_MODULE_19__]);
([_host_dashboard_applications_PendingApplications__WEBPACK_IMPORTED_MODULE_6__, _host_dashboard_HostDashboardExpenses__WEBPACK_IMPORTED_MODULE_7__, _host_dashboard_HostDashboardHostedCollectives__WEBPACK_IMPORTED_MODULE_8__, _host_dashboard_HostDashboardReports__WEBPACK_IMPORTED_MODULE_9__, _sections_AccountSettings__WEBPACK_IMPORTED_MODULE_13__, _sections_FinancialContributions__WEBPACK_IMPORTED_MODULE_14__, _sections_HostVirtualCards__WEBPACK_IMPORTED_MODULE_15__, _sections_InvoicesReceipts__WEBPACK_IMPORTED_MODULE_16__, _sections_NotificationsSettings__WEBPACK_IMPORTED_MODULE_17__, _sections_PendingContributions__WEBPACK_IMPORTED_MODULE_18__, _sections_Team__WEBPACK_IMPORTED_MODULE_19__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);























const ADMIN_PANEL_SECTIONS = {
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.HOSTED_COLLECTIVES */ .QU.HOSTED_COLLECTIVES]: _host_dashboard_HostDashboardHostedCollectives__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.FINANCIAL_CONTRIBUTIONS */ .QU.FINANCIAL_CONTRIBUTIONS]: _sections_FinancialContributions__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.PENDING_CONTRIBUTIONS */ .QU.PENDING_CONTRIBUTIONS]: _sections_PendingContributions__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.EXPENSES */ .QU.EXPENSES]: _host_dashboard_HostDashboardExpenses__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.PENDING_APPLICATIONS */ .QU.PENDING_APPLICATIONS]: _host_dashboard_applications_PendingApplications__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.REPORTS */ .QU.REPORTS]: _host_dashboard_HostDashboardReports__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .HOST_DASHBOARD_SECTIONS.HOST_VIRTUAL_CARDS */ .QU.HOST_VIRTUAL_CARDS]: _sections_HostVirtualCards__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .COLLECTIVE_SECTIONS.NOTIFICATIONS */ .d$.NOTIFICATIONS]: _sections_NotificationsSettings__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z,
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .COLLECTIVE_SECTIONS.TEAM */ .d$.TEAM]: _sections_Team__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z
};
const FISCAL_HOST_SETTINGS_SECTIONS = {
  [_constants__WEBPACK_IMPORTED_MODULE_20__/* .FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS */ .Rt.INVOICES_RECEIPTS]: _sections_InvoicesReceipts__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z
};
const Title = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Text__WEBPACK_IMPORTED_MODULE_12__.H2).withConfig({
  displayName: "AdminPanelSection__Title",
  componentId: "sc-1bhvncb-0"
})(["font-size:24px;font-weight:700;line-height:32px;"]);

const AdminPanelSection = ({
  collective,
  isLoading,
  section,
  subpath
}) => {
  const {
    formatMessage
  } = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();

  if (isLoading) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div", {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        height: 26,
        mb: 4,
        maxWidth: 500
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        height: 300
      })]
    });
  }

  const AdminSectionComponent = ADMIN_PANEL_SECTIONS[section];

  if (AdminSectionComponent) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      width: "100%",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(AdminSectionComponent, {
        account: collective,
        hostSlug: collective.slug,
        subpath: subpath,
        isNewAdmin: true
      })
    });
  } // Fiscal Host Settings


  const FiscalHostSettingsComponent = FISCAL_HOST_SETTINGS_SECTIONS[section];

  if (FiscalHostSettingsComponent) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      width: "100%",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(FiscalHostSettingsComponent, {
        collective: collective
      })
    });
  } // Form


  if (lodash_values__WEBPACK_IMPORTED_MODULE_0___default()(_constants__WEBPACK_IMPORTED_MODULE_20__/* .LEGACY_COLLECTIVE_SETTINGS_SECTIONS */ .DP).includes(section)) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      width: "100%",
      children: [_constants__WEBPACK_IMPORTED_MODULE_20__/* .SECTION_LABELS */ .g6[section] && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(Title, {
          children: formatMessage(_constants__WEBPACK_IMPORTED_MODULE_20__/* .SECTION_LABELS */ .g6[section])
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_sections_AccountSettings__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        account: collective,
        section: section
      })]
    });
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_NotFound__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {})
  });
};

AdminPanelSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "subpath": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "collective": {
      "description": "The account. Can be null if isLoading is true",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdminPanelSection);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 52079:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ SideBar)
});

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
// EXTERNAL MODULE: ./lib/url-helpers.js
var url_helpers = __webpack_require__(25896);
// EXTERNAL MODULE: ./components/Avatar.tsx
var Avatar = __webpack_require__(11194);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/Link.js
var Link = __webpack_require__(92129);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: ./lib/allowed-features.js
var allowed_features = __webpack_require__(99708);
// EXTERNAL MODULE: ./lib/collective.lib.js
var collective_lib = __webpack_require__(5700);
// EXTERNAL MODULE: ./lib/collective-sections.js
var collective_sections = __webpack_require__(64453);
// EXTERNAL MODULE: ./lib/constants/collectives.js
var collectives = __webpack_require__(82525);
;// CONCATENATED MODULE: ./components/host-dashboard/constants.js
const HOST_SECTIONS = {
  EXPENSES: 'expenses',
  HOSTED_COLLECTIVES: 'hosted-collectives',
  PENDING_APPLICATIONS: 'pending-applications',
  REPORTS: 'reports',
  FINANCIAL_CONTRIBUTIONS: 'orders'
};
// EXTERNAL MODULE: ./components/admin-panel/constants.js
var constants = __webpack_require__(13398);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: ./components/StyledLink.tsx
var StyledLink = __webpack_require__(51082);
// EXTERNAL MODULE: ./components/admin-panel/AdminPanelContext.js
var AdminPanelContext = __webpack_require__(2729);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/admin-panel/MenuComponents.js
const _excluded = ["if", "children"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }












const MenuLinkContainer = external_styled_components_default().li.withConfig({
  displayName: "MenuComponents__MenuLinkContainer",
  componentId: "sc-v2ensl-0"
})(["margin:4px -8px 0px;a,", "{display:flex;justify-content:space-between;font-weight:500;font-size:13px;line-height:16px;line-height:22px;padding:4px 12px;border-radius:100px;cursor:pointer;color:", ";&:hover{color:", ";}", " ", "}"], StyledLink/* default */.Z, props => props.theme.colors.black[700], props => props.theme.colors.primary[700], props => props.isSelected && (0,external_styled_components_.css)(["background:", ";color:", ";font-weight:700;font-size:14px;"], props => props.theme.colors.primary[50], props => props.theme.colors.primary[700]), props => props.isStrong && (0,external_styled_components_.css)(["font-weight:700;font-size:15px;line-height:22px;"]));
const MenuLink = ({
  collective,
  section,
  children,
  onClick,
  isSelected,
  isStrong,
  if: conditional,
  isBeta
}) => {
  const {
    selectedSection
  } = external_react_default().useContext(AdminPanelContext/* AdminPanelContext */.U);
  const {
    formatMessage
  } = (0,external_react_intl_.useIntl)();

  if (conditional === false) {
    return null;
  }

  if (!children && constants/* SECTION_LABELS */.g6[section]) {
    children = formatMessage(constants/* SECTION_LABELS */.g6[section]);
  }

  return /*#__PURE__*/jsx_runtime_.jsx(MenuLinkContainer, {
    isSelected: isSelected || section && selectedSection === section,
    isStrong: isStrong,
    children: onClick ? /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledLink/* default */.Z, {
      as: "button",
      onClick: onClick,
      "data-cy": `menu-item-${section}`,
      children: [children, isBeta ? ' (Beta)' : '']
    }) : /*#__PURE__*/(0,jsx_runtime_.jsxs)(Link/* default */.Z, {
      href: (0,url_helpers/* getSettingsRoute */.aT)(collective, section),
      "data-cy": `menu-item-${section}`,
      children: [children, isBeta ? ' (Beta)' : '']
    })
  });
};
const MenuSectionHeader = external_styled_components_default().div.withConfig({
  displayName: "MenuComponents__MenuSectionHeader",
  componentId: "sc-v2ensl-1"
})(["font-weight:700;font-size:12px;line-height:16px;text-transform:uppercase;padding:12px 0;margin-bottom:12px;border-bottom:1px solid ", ";color:", ";"], props => props.theme.colors.black[700], props => props.theme.colors.black[800]);
const MenuContainer = external_styled_components_default().ul.withConfig({
  displayName: "MenuComponents__MenuContainer",
  componentId: "sc-v2ensl-2"
})(["margin:0;margin-bottom:100px;width:256px;max-width:100%;a{color:", ";&:hover{color:", ";}}&,& ul{list-style-type:none;padding:0;}"], props => props.theme.colors.black[900], props => props.theme.colors.black[700]);
const MenuGroup = _ref => {
  let {
    if: conditional,
    children
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  return conditional === false ? null : /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, _objectSpread(_objectSpread({
    as: "ul"
  }, props), {}, {
    children: children
  }));
};
const useSubmenu = () => {
  const [submenuContent, setSubmenu] = external_react_default().useState();

  const menuContent = submenuContent && /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
    children: [/*#__PURE__*/jsx_runtime_.jsx("ul", {
      children: /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        onClick: () => setSubmenu(undefined),
        children: /*#__PURE__*/(0,jsx_runtime_.jsxs)("span", {
          children: ["\u2190\xA0", /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "Back",
            defaultMessage: [{
              "type": 0,
              "value": "Back"
            }]
          })]
        })
      })
    }), submenuContent]
  });

  const SubMenu = ({
    label,
    children,
    if: conditional
  }) => {
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuLink, {
      if: conditional,
      onClick: () => setSubmenu( /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
        children: [/*#__PURE__*/jsx_runtime_.jsx(MenuSectionHeader, {
          children: label
        }), children]
      })),
      children: [/*#__PURE__*/jsx_runtime_.jsx("span", {
        children: label
      }), "\xA0", /*#__PURE__*/jsx_runtime_.jsx("span", {
        children: "\u2192"
      })]
    });
  };

  return {
    menuContent,
    SubMenu
  };
};
MenuLink.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuLink",
  "props": {
    "if": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "isSelected": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isBeta": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isStrong": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onClick": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "afterClick": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
MenuGroup.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuGroup",
  "props": {
    "if": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
;// CONCATENATED MODULE: ./components/admin-panel/Menu.js











const {
  USER,
  ORGANIZATION,
  COLLECTIVE,
  FUND,
  EVENT,
  PROJECT
} = collectives/* CollectiveType */.eV;

const OrganizationSettingsMenuLinks = ({
  collective,
  isAccountantOnly
}) => {
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
    children: [!isAccountantOnly && /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
      children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ABOUT_ORG_SECTIONS.INFO */.k3.INFO
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ABOUT_ORG_SECTIONS.COLLECTIVE_PAGE */.k3.COLLECTIVE_PAGE
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ABOUT_ORG_SECTIONS.CONNECTED_ACCOUNTS */.k3.CONNECTED_ACCOUNTS
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ABOUT_ORG_SECTIONS.TEAM */.k3.TEAM
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ORG_BUDGET_SECTIONS.PAYMENT_METHODS */.bS.PAYMENT_METHODS
      })]
    }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
      collective: collective,
      section: constants/* ORG_BUDGET_SECTIONS.PAYMENT_RECEIPTS */.bS.PAYMENT_RECEIPTS
    }), !isAccountantOnly && /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
      children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ORG_BUDGET_SECTIONS.GIFT_CARDS */.bS.GIFT_CARDS
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ALL_SECTIONS.WEBHOOKS */.J7.WEBHOOKS
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* COLLECTIVE_SECTIONS.FOR_DEVELOPERS */.d$.FOR_DEVELOPERS
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* COLLECTIVE_SECTIONS.ACTIVITY_LOG */.d$.ACTIVITY_LOG
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* FISCAL_HOST_SECTIONS.SECURITY */.Rt.SECURITY
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ALL_SECTIONS.ADVANCED */.J7.ADVANCED
      }), !(0,collective_lib/* isHostAccount */.aD)(collective) && /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        collective: collective,
        section: constants/* ALL_SECTIONS.FISCAL_HOSTING */.J7.FISCAL_HOSTING
      })]
    })]
  });
};

const Menu = ({
  collective,
  isAccountantOnly
}) => {
  const {
    formatMessage
  } = (0,external_react_intl_.useIntl)();
  const isHost = (0,collective_lib/* isHostAccount */.aD)(collective);
  const isIndividual = (0,collective_lib/* isIndividualAccount */.Sh)(collective);
  const isSimpleOrg = collective.type === 'ORGANIZATION' && !isHost;
  const {
    menuContent,
    SubMenu
  } = useSubmenu();

  if (menuContent) {
    return menuContent;
  } else {
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuGroup, {
        if: isHost,
        mb: 24,
        children: [/*#__PURE__*/jsx_runtime_.jsx(MenuSectionHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "HostDashboard",
            defaultMessage: [{
              "type": 0,
              "value": "Host Dashboard"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.EXPENSES,
          if: !isAccountantOnly
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.FINANCIAL_CONTRIBUTIONS,
          if: !isAccountantOnly
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* HOST_DASHBOARD_SECTIONS.PENDING_CONTRIBUTIONS */.QU.PENDING_CONTRIBUTIONS,
          if: !isAccountantOnly
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.PENDING_APPLICATIONS,
          if: !isAccountantOnly
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.HOSTED_COLLECTIVES,
          if: !isAccountantOnly
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* HOST_DASHBOARD_SECTIONS.HOST_VIRTUAL_CARDS */.QU.HOST_VIRTUAL_CARDS,
          if: !isAccountantOnly && (0,allowed_features/* default */.ZP)(collective, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.REPORTS,
          isBeta: true
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuGroup, {
        if: isHost || (0,collective_sections/* isType */.P9)(collective, ORGANIZATION),
        children: [/*#__PURE__*/jsx_runtime_.jsx(MenuSectionHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "Settings",
            defaultMessage: [{
              "type": 0,
              "value": "Settings"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(SubMenu, {
          label: formatMessage(constants/* PAGE_TITLES */.cd[(0,collective_sections/* getCollectiveTypeKey */.hg)(collective.type)]),
          if: (0,collective_sections/* isType */.P9)(collective, ORGANIZATION) && isHost,
          children: [/*#__PURE__*/jsx_runtime_.jsx(OrganizationSettingsMenuLinks, {
            collective: collective,
            isAccountantOnly: isAccountantOnly
          }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
            collective: collective,
            section: constants/* ORG_BUDGET_SECTIONS.TIERS */.bS.TIERS
          })]
        }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(SubMenu, {
          label: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "AdminPanel.FiscalHostSettings",
            defaultMessage: [{
              "type": 0,
              "value": "Fiscal Host Settings"
            }]
          }),
          if: isHost && !isAccountantOnly,
          children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
            collective: collective,
            section: constants/* FISCAL_HOST_SECTIONS.FISCAL_HOSTING */.Rt.FISCAL_HOSTING
          }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuGroup, {
            if: isHost,
            children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
              collective: collective,
              section: constants/* FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS */.Rt.INVOICES_RECEIPTS
            }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
              collective: collective,
              section: constants/* FISCAL_HOST_SECTIONS.RECEIVING_MONEY */.Rt.RECEIVING_MONEY
            }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
              collective: collective,
              section: constants/* FISCAL_HOST_SECTIONS.SENDING_MONEY */.Rt.SENDING_MONEY
            }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
              collective: collective,
              section: constants/* FISCAL_HOST_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS */.Rt.HOST_VIRTUAL_CARDS_SETTINGS,
              if: (0,allowed_features/* default */.ZP)(collective, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS)
            }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
              collective: collective,
              section: constants/* FISCAL_HOST_SECTIONS.POLICIES */.Rt.POLICIES,
              if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [USER, ORGANIZATION])
            })]
          })]
        })]
      }), /*#__PURE__*/jsx_runtime_.jsx(MenuGroup, {
        if: isSimpleOrg,
        children: /*#__PURE__*/jsx_runtime_.jsx(OrganizationSettingsMenuLinks, {
          collective: collective,
          isAccountantOnly: isAccountantOnly
        })
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuGroup, {
        if: !(0,collective_sections/* isType */.P9)(collective, ORGANIZATION) && !isAccountantOnly,
        children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.INFO */.d$.INFO
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.COLLECTIVE_PAGE */.d$.COLLECTIVE_PAGE
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.COLLECTIVE_GOALS */.d$.COLLECTIVE_GOALS,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, PROJECT])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.CONNECTED_ACCOUNTS */.d$.CONNECTED_ACCOUNTS,
          if: (0,collective_sections/* isType */.P9)(collective, COLLECTIVE)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.POLICIES */.d$.POLICIES,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.CUSTOM_EMAIL */.d$.CUSTOM_EMAIL,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, EVENT, PROJECT])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.EXPORT */.d$.EXPORT,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, EVENT, PROJECT])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.HOST */.d$.HOST,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.TEAM */.d$.TEAM,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND, ORGANIZATION, EVENT, PROJECT])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.PAYMENT_METHODS */.d$.PAYMENT_METHODS,
          if: ['ACTIVE', 'AVAILABLE'].includes(collective.features.USE_PAYMENT_METHODS)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.PAYMENT_RECEIPTS */.d$.PAYMENT_RECEIPTS,
          if: isIndividual
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.NOTIFICATIONS */.d$.NOTIFICATIONS,
          if: isIndividual
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* ORG_BUDGET_SECTIONS.GIFT_CARDS */.bS.GIFT_CARDS,
          if: ['ACTIVE', 'AVAILABLE'].includes(collective.features.EMIT_GIFT_CARDS)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.VIRTUAL_CARDS */.d$.VIRTUAL_CARDS,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND, EVENT, PROJECT]) && (0,allowed_features/* default */.ZP)(collective.host, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS) && collective.isApproved
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.TICKETS */.d$.TICKETS,
          if: (0,collective_sections/* isType */.P9)(collective, EVENT)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.TIERS */.d$.TIERS,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND, EVENT, PROJECT])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.WEBHOOKS */.d$.WEBHOOKS
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.AUTHORIZED_APPS */.d$.AUTHORIZED_APPS,
          if: (0,collective_sections/* isType */.P9)(collective, USER)
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.USER_SECURITY */.d$.USER_SECURITY,
          if: isIndividual
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.FOR_DEVELOPERS */.d$.FOR_DEVELOPERS,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, USER])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.ACTIVITY_LOG */.d$.ACTIVITY_LOG
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* FISCAL_HOST_SECTIONS.SECURITY */.Rt.SECURITY,
          if: (0,collective_sections/* isOneOfTypes */.B_)(collective, [COLLECTIVE, FUND, ORGANIZATION])
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* COLLECTIVE_SECTIONS.ADVANCED */.d$.ADVANCED
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuGroup, {
        if: (0,collective_lib/* isSelfHostedAccount */.Eq)(collective) && !isAccountantOnly,
        mt: 24,
        children: [/*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS */.Rt.INVOICES_RECEIPTS
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* FISCAL_HOST_SECTIONS.RECEIVING_MONEY */.Rt.RECEIVING_MONEY
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* FISCAL_HOST_SECTIONS.SENDING_MONEY */.Rt.SENDING_MONEY
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
          collective: collective,
          section: constants/* ORG_BUDGET_SECTIONS.FINANCIAL_CONTRIBUTIONS */.bS.FINANCIAL_CONTRIBUTIONS,
          if: (0,collective_sections/* isType */.P9)(collective, COLLECTIVE)
        })]
      })]
    });
  }
};

Menu.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Menu",
  "props": {
    "isAccountantOnly": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          },
          "host": {
            "name": "object",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "features": {
            "name": "shape",
            "value": {
              "USE_PAYMENT_METHODS": {
                "name": "string",
                "required": false
              },
              "EMIT_GIFT_CARDS": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "isApproved": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const admin_panel_Menu = (Menu);
;// CONCATENATED MODULE: ./components/admin-panel/SideBar.js
const SideBar_excluded = ["collective", "isAccountantOnly", "isLoading", "selectedSection", "onRoute"];

function SideBar_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function SideBar_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? SideBar_ownKeys(Object(source), !0).forEach(function (key) { SideBar_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : SideBar_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function SideBar_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function SideBar_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = SideBar_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function SideBar_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }













const AdminPanelSideBar = _ref => {
  let {
    collective,
    isAccountantOnly,
    isLoading,
    selectedSection,
    onRoute
  } = _ref,
      props = SideBar_objectWithoutProperties(_ref, SideBar_excluded);

  const pageUrl = (0,url_helpers/* getCollectivePageRoute */.x0)(collective);
  return /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, SideBar_objectSpread(SideBar_objectSpread({}, props), {}, {
    children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
        mb: 32,
        children: [isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
          height: 56,
          width: 56,
          borderRadius: "50%"
        }) : /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
          href: pageUrl,
          "data-cy": "menu-account-avatar-link",
          children: /*#__PURE__*/jsx_runtime_.jsx(Avatar/* default */.ZP, {
            collective: collective,
            radius: 56
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(Text.H1, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          letterSpacing: "0.04px",
          mb: 16,
          mt: 12,
          children: isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
            height: 24,
            maxWidth: "75%"
          }) : /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
            href: pageUrl,
            children: collective.name
          })
        })]
      }), isLoading ? [...Array(5).keys()].map(i => /*#__PURE__*/jsx_runtime_.jsx("li", {
        children: /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
          height: 24,
          mb: 2,
          borderRadius: 8,
          maxWidth: "80%"
        })
      }, i)) : /*#__PURE__*/jsx_runtime_.jsx(admin_panel_Menu, {
        collective,
        selectedSection,
        onRoute,
        isAccountantOnly
      })]
    })
  }));
};

AdminPanelSideBar.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelSideBar",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    },
    "isAccountantOnly": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onRoute": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const SideBar = (AdminPanelSideBar);

/***/ }),

/***/ 91988:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ TopBar)
});

// UNUSED EXPORTS: MenuBackdrop

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
;// CONCATENATED MODULE: external "@styled-icons/remix-line/Menu2"
const Menu2_namespaceObject = require("@styled-icons/remix-line/Menu2");
// EXTERNAL MODULE: external "focus-trap-react"
var external_focus_trap_react_ = __webpack_require__(92869);
var external_focus_trap_react_default = /*#__PURE__*/__webpack_require__.n(external_focus_trap_react_);
// EXTERNAL MODULE: external "next/router"
var router_ = __webpack_require__(71853);
// EXTERNAL MODULE: external "react-dom"
var external_react_dom_ = __webpack_require__(66405);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: ./lib/collective-sections.js
var collective_sections = __webpack_require__(64453);
// EXTERNAL MODULE: ./lib/url-helpers.js
var url_helpers = __webpack_require__(25896);
// EXTERNAL MODULE: ./components/Avatar.tsx
var Avatar = __webpack_require__(11194);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/Link.js
var Link = __webpack_require__(92129);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/StyledKeyframes.js
var StyledKeyframes = __webpack_require__(29925);
// EXTERNAL MODULE: ./components/admin-panel/constants.js
var constants = __webpack_require__(13398);
// EXTERNAL MODULE: ./components/admin-panel/SideBar.js + 3 modules
var SideBar = __webpack_require__(52079);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/admin-panel/TopBar.js
const _excluded = ["collective", "selectedSection", "isLoading"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* eslint-disable styled-components-a11y/click-events-have-key-events */


















const MenuWrapper = external_styled_components_default()(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__MenuWrapper",
  componentId: "sc-d50c2h-0"
})(["position:fixed;top:0px;left:0;width:100vw;height:100vh;z-index:", ";"], props => props.zindex || 3000);
const MenuBackdrop = external_styled_components_default().div.withConfig({
  displayName: "TopBar__MenuBackdrop",
  componentId: "sc-d50c2h-1"
})(["position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:2500;display:block;animation:", " 0.25s;will-change:opacity;"], StyledKeyframes/* fadeIn */.Ji);
const SideBarWrapper = external_styled_components_default()(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__SideBarWrapper",
  componentId: "sc-d50c2h-2"
})(["z-index:2600;background:#fff;"]);
const GlobalModalStyle = (0,external_styled_components_.createGlobalStyle)(["body{overflow:hidden;}"]);
const Container = external_styled_components_default()(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__Container",
  componentId: "sc-d50c2h-3"
})(["height:64px;padding:12px 16px;position:sticky;top:0;z-index:999;background-color:#fff;color:", ";box-shadow:0px 1px 4px 1px rgba(49,50,51,0.1);"], props => props.theme.colors.black[600]);
const Title = external_styled_components_default().div.withConfig({
  displayName: "TopBar__Title",
  componentId: "sc-d50c2h-4"
})(["font-weight:500;font-size:14px;line-height:16px;letter-spacing:0.06em;text-transform:uppercase;color:", ";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"], props => props.theme.colors.black[700]);
const Separator = external_styled_components_default()(Grid/* Box */.xu).withConfig({
  displayName: "TopBar__Separator",
  componentId: "sc-d50c2h-5"
})(["font-size:14px;font-weight:700;line-height:20px;color:", ";"], props => props.theme.colors.black[800]);
const Section = external_styled_components_default().div.withConfig({
  displayName: "TopBar__Section",
  componentId: "sc-d50c2h-6"
})(["font-weight:700;font-size:18px;line-height:26px;color:", ";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"], props => props.theme.colors.black[900]);
const MenuLink = external_styled_components_default().div.withConfig({
  displayName: "TopBar__MenuLink",
  componentId: "sc-d50c2h-7"
})(["cursor:pointer;color:", ";&:hover{color:", ";}"], props => props.theme.colors.black[700], props => props.theme.colors.primary[700]);

const AdminPanelTopBar = _ref => {
  let {
    collective,
    selectedSection,
    isLoading
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const {
    formatMessage
  } = (0,external_react_intl_.useIntl)();
  const router = (0,router_.useRouter)();
  const [isMenuOpen, setMenuOpen] = external_react_default().useState(false);
  external_react_default().useEffect(() => {
    const handleRouteChange = () => {
      setMenuOpen(false);
    };

    router.events.on('routeChangeStart', handleRouteChange);
    return () => {
      router.events.off('routeChangeStart', handleRouteChange);
    };
  }, []);
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Container, _objectSpread(_objectSpread({
    alignItems: "center"
  }, props), {}, {
    children: [/*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
      mr: "14px",
      children: /*#__PURE__*/jsx_runtime_.jsx(MenuLink, {
        tabIndex: "0",
        role: "button",
        onClick: () => setMenuOpen(true),
        children: /*#__PURE__*/jsx_runtime_.jsx(Menu2_namespaceObject.Menu2, {
          size: "24px"
        })
      })
    }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
      mr: "20px",
      children: isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
        height: 40,
        width: 40
      }) : /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
        href: (0,url_helpers/* getCollectivePageRoute */.x0)(collective),
        children: /*#__PURE__*/jsx_runtime_.jsx(Avatar/* default */.ZP, {
          collective: collective,
          radius: 40
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      overflow: "hidden",
      children: [isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
        height: 16,
        width: 120
      }) : /*#__PURE__*/jsx_runtime_.jsx(Title, {
        children: formatMessage(constants/* PAGE_TITLES */.cd[(0,collective_sections/* getCollectiveTypeKey */.hg)(collective.type)])
      }), constants/* SECTION_LABELS */.g6[selectedSection] && /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
        children: [/*#__PURE__*/jsx_runtime_.jsx(Separator, {
          mx: "8px",
          children: "/"
        }), isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
          height: 16,
          width: 80
        }) : /*#__PURE__*/jsx_runtime_.jsx(Section, {
          children: formatMessage(constants/* SECTION_LABELS */.g6[selectedSection])
        })]
      })]
    }), isMenuOpen && document && /*#__PURE__*/(0,external_react_dom_.createPortal)( /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
      children: [/*#__PURE__*/jsx_runtime_.jsx(GlobalModalStyle, {}), /*#__PURE__*/(0,jsx_runtime_.jsxs)(MenuWrapper, {
        zindex: 1000,
        children: [/*#__PURE__*/jsx_runtime_.jsx(SideBarWrapper, {
          p: "16px 24px",
          children: /*#__PURE__*/jsx_runtime_.jsx((external_focus_trap_react_default()), {
            focusTrapOptions: {
              clickOutsideDeactivates: true
            },
            children: /*#__PURE__*/jsx_runtime_.jsx(SideBar/* default */.Z, {
              collective: collective,
              selectedSection: selectedSection
            })
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(MenuBackdrop, {
          role: "button",
          tabIndex: 0,
          onClick: () => setMenuOpen(false),
          onKeyDown: event => {
            if (event.key === 'Escape') {
              event.preventDefault();
              setMenuOpen(false);
            }
          }
        })]
      })]
    }), document.body)]
  }));
};

AdminPanelTopBar.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelTopBar",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const TopBar = (AdminPanelTopBar);

/***/ }),

/***/ 13398:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DP": () => (/* binding */ LEGACY_COLLECTIVE_SETTINGS_SECTIONS),
/* harmony export */   "J7": () => (/* binding */ ALL_SECTIONS),
/* harmony export */   "QU": () => (/* binding */ HOST_DASHBOARD_SECTIONS),
/* harmony export */   "Rt": () => (/* binding */ FISCAL_HOST_SECTIONS),
/* harmony export */   "aD": () => (/* binding */ SECTIONS_ACCESSIBLE_TO_ACCOUNTANTS),
/* harmony export */   "bS": () => (/* binding */ ORG_BUDGET_SECTIONS),
/* harmony export */   "cd": () => (/* binding */ PAGE_TITLES),
/* harmony export */   "d$": () => (/* binding */ COLLECTIVE_SECTIONS),
/* harmony export */   "g6": () => (/* binding */ SECTION_LABELS),
/* harmony export */   "k3": () => (/* binding */ ABOUT_ORG_SECTIONS)
/* harmony export */ });
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82525);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



const {
  USER,
  ORGANIZATION,
  COLLECTIVE,
  FUND,
  EVENT,
  PROJECT
} = _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_1__/* .CollectiveType */ .eV;
const HOST_DASHBOARD_SECTIONS = {
  // New Host Dashboard
  BUDGET_MANAGEMENT: 'budget',
  COLLECTIVES: 'collectives',
  OVERVIEW: 'info',
  REPORTS: 'reports',
  // Existing Host Dashboard Sections
  EXPENSES: 'expenses',
  FINANCIAL_CONTRIBUTIONS: 'orders',
  PENDING_CONTRIBUTIONS: 'pending-contributions',
  HOSTED_COLLECTIVES: 'hosted-collectives',
  HOST_VIRTUAL_CARDS: 'host-virtual-cards',
  PENDING_APPLICATIONS: 'pending-applications'
};
const ABOUT_ORG_SECTIONS = {
  COLLECTIVE_PAGE: 'collective-page',
  CONNECTED_ACCOUNTS: 'connected-accounts',
  INFO: 'info',
  TEAM: 'team'
};
const ORG_BUDGET_SECTIONS = {
  GIFT_CARDS: 'gift-cards',
  CREATE_GIFT_CARDS: 'gift-cards-create',
  PAYMENT_METHODS: 'payment-methods',
  PAYMENT_RECEIPTS: 'payment-receipts',
  FINANCIAL_CONTRIBUTIONS: 'orders',
  TIERS: 'tiers' // Manage Contributions

};
const FISCAL_HOST_SECTIONS = {
  FISCAL_HOSTING: 'fiscal-hosting',
  SECURITY: 'security',
  HOST_VIRTUAL_CARDS: 'host-virtual-cards',
  HOST_VIRTUAL_CARDS_SETTINGS: 'host-virtual-cards-settings',
  INVOICES_RECEIPTS: 'invoices-receipts',
  POLICIES: 'policies',
  RECEIVING_MONEY: 'receiving-money',
  SENDING_MONEY: 'sending-money'
};
const COLLECTIVE_SECTIONS = {
  ADVANCED: 'advanced',
  AUTHORIZED_APPS: 'authorized-apps',
  COLLECTIVE_GOALS: 'goals',
  COLLECTIVE_PAGE: 'collective-page',
  CONNECTED_ACCOUNTS: 'connected-accounts',
  EXPORT: 'export',
  FOR_DEVELOPERS: 'for-developers',
  HOST: 'host',
  INFO: 'info',
  PAYMENT_METHODS: 'payment-methods',
  PAYMENT_RECEIPTS: 'payment-receipts',
  NOTIFICATIONS: 'notifications',
  POLICIES: 'policies',
  CUSTOM_EMAIL: 'custom-email',
  TEAM: 'team',
  TICKETS: 'tickets',
  TIERS: 'tiers',
  USER_SECURITY: 'user-security',
  VIRTUAL_CARDS: 'virtual-cards',
  WEBHOOKS: 'webhooks',
  ACTIVITY_LOG: 'activity-log'
};
const LEGACY_COLLECTIVE_SETTINGS_SECTIONS = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, COLLECTIVE_SECTIONS), ABOUT_ORG_SECTIONS), ORG_BUDGET_SECTIONS), FISCAL_HOST_SECTIONS);
const ALL_SECTIONS = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, COLLECTIVE_SECTIONS), ABOUT_ORG_SECTIONS), ORG_BUDGET_SECTIONS), FISCAL_HOST_SECTIONS), HOST_DASHBOARD_SECTIONS);
const SECTIONS_ACCESSIBLE_TO_ACCOUNTANTS = [ALL_SECTIONS.REPORTS, ALL_SECTIONS.PAYMENT_RECEIPTS];
const PAGE_TITLES = (0,react_intl__WEBPACK_IMPORTED_MODULE_0__.defineMessages)({
  [USER]: {
    id: "AdminPanel.UserSettings",
    defaultMessage: [{
      "type": 0,
      "value": "User Settings"
    }]
  },
  [ORGANIZATION]: {
    id: "AdminPanel.OrganizationSettings",
    defaultMessage: [{
      "type": 0,
      "value": "Organization Settings"
    }]
  },
  [COLLECTIVE]: {
    id: "AdminPanel.CollectiveSettings",
    defaultMessage: [{
      "type": 0,
      "value": "Collective Settings"
    }]
  },
  [FUND]: {
    id: "AdminPanel.FundSettings",
    defaultMessage: [{
      "type": 0,
      "value": "Fund Settings"
    }]
  },
  [EVENT]: {
    id: "AdminPanel.EventSettings",
    defaultMessage: [{
      "type": 0,
      "value": "Event Settings"
    }]
  },
  [PROJECT]: {
    id: "AdminPanel.ProjectSettings",
    defaultMessage: [{
      "type": 0,
      "value": "Project Settings"
    }]
  }
});
const SECTION_LABELS = (0,react_intl__WEBPACK_IMPORTED_MODULE_0__.defineMessages)({
  [ALL_SECTIONS.ACTIVITY_LOG]: {
    id: "t0lUqz",
    defaultMessage: [{
      "type": 0,
      "value": "Activity log"
    }]
  },
  [ALL_SECTIONS.EXPENSES]: {
    id: "Expenses",
    defaultMessage: [{
      "type": 0,
      "value": "Expenses"
    }]
  },
  [ALL_SECTIONS.FINANCIAL_CONTRIBUTIONS]: {
    id: "FinancialContributions",
    defaultMessage: [{
      "type": 0,
      "value": "Financial Contributions"
    }]
  },
  [ALL_SECTIONS.PENDING_CONTRIBUTIONS]: {
    id: "PendingContributions",
    defaultMessage: [{
      "type": 0,
      "value": "Pending Contributions"
    }]
  },
  [ALL_SECTIONS.PENDING_APPLICATIONS]: {
    id: "AdminPanel.Menu.PendingApplications",
    defaultMessage: [{
      "type": 0,
      "value": "Pending Applications"
    }]
  },
  [ALL_SECTIONS.OVERVIEW]: {
    id: "AdminPanel.Menu.Overview",
    defaultMessage: [{
      "type": 0,
      "value": "Overview"
    }]
  },
  [ALL_SECTIONS.BUDGET_MANAGEMENT]: {
    id: "AdminPanel.Menu.Overview",
    defaultMessage: [{
      "type": 0,
      "value": "Overview"
    }]
  },
  [ALL_SECTIONS.COLLECTIVES]: {
    id: "Collectives",
    defaultMessage: [{
      "type": 0,
      "value": "Collectives"
    }]
  },
  [ALL_SECTIONS.REPORTS]: {
    id: "Reports",
    defaultMessage: [{
      "type": 0,
      "value": "Reports"
    }]
  },
  [ALL_SECTIONS.ADVANCED]: {
    id: "editCollective.menu.advanced",
    defaultMessage: [{
      "type": 0,
      "value": "Advanced"
    }]
  },
  [ALL_SECTIONS.COLLECTIVE_GOALS]: {
    id: "Goals",
    defaultMessage: [{
      "type": 0,
      "value": "Goals"
    }]
  },
  [ALL_SECTIONS.COLLECTIVE_PAGE]: {
    id: "editCollective.menu.collectivePage",
    defaultMessage: [{
      "type": 0,
      "value": "Profile Page"
    }]
  },
  [ALL_SECTIONS.CONNECTED_ACCOUNTS]: {
    id: "editCollective.menu.connectedAccounts",
    defaultMessage: [{
      "type": 0,
      "value": "Connected Accounts"
    }]
  },
  [ALL_SECTIONS.UPDATES]: {
    id: "updates",
    defaultMessage: [{
      "type": 0,
      "value": "Updates"
    }]
  },
  [ALL_SECTIONS.CONVERSATIONS]: {
    id: "conversations",
    defaultMessage: [{
      "type": 0,
      "value": "Conversations"
    }]
  },
  [ALL_SECTIONS.EXPORT]: {
    id: "editCollective.menu.export",
    defaultMessage: [{
      "type": 0,
      "value": "Export"
    }]
  },
  [ALL_SECTIONS.POLICIES]: {
    id: "editCollective.menu.policies",
    defaultMessage: [{
      "type": 0,
      "value": "Policies"
    }]
  },
  [ALL_SECTIONS.CUSTOM_EMAIL]: {
    id: "aw01NT",
    defaultMessage: [{
      "type": 0,
      "value": "Custom Email"
    }]
  },
  [ALL_SECTIONS.HOST]: {
    id: "Fiscalhost",
    defaultMessage: [{
      "type": 0,
      "value": "Fiscal Host"
    }]
  },
  [ALL_SECTIONS.INFO]: {
    id: "editCollective.menu.info",
    defaultMessage: [{
      "type": 0,
      "value": "Info"
    }]
  },
  [ALL_SECTIONS.INVOICES_RECEIPTS]: {
    id: "becomeASponsor.invoiceReceipts",
    defaultMessage: [{
      "type": 0,
      "value": "Invoices & Receipts"
    }]
  },
  [ALL_SECTIONS.RECEIVING_MONEY]: {
    id: "editCollective.receivingMoney",
    defaultMessage: [{
      "type": 0,
      "value": "Receiving Money"
    }]
  },
  [ALL_SECTIONS.SENDING_MONEY]: {
    id: "editCollective.sendingMoney",
    defaultMessage: [{
      "type": 0,
      "value": "Sending Money"
    }]
  },
  [ALL_SECTIONS.FISCAL_HOSTING]: {
    id: "editCollective.fiscalHosting",
    defaultMessage: [{
      "type": 0,
      "value": "Fiscal Hosting"
    }]
  },
  [ALL_SECTIONS.TEAM]: {
    id: "ContributorsFilter.Core",
    defaultMessage: [{
      "type": 0,
      "value": "Team"
    }]
  },
  [ALL_SECTIONS.PAYMENT_METHODS]: {
    id: "editCollective.menu.paymentMethods",
    defaultMessage: [{
      "type": 0,
      "value": "Payment Methods"
    }]
  },
  [ALL_SECTIONS.TIERS]: {
    id: "Tiers",
    defaultMessage: [{
      "type": 0,
      "value": "Tiers"
    }]
  },
  [ALL_SECTIONS.GIFT_CARDS]: {
    id: "editCollective.menu.giftCards",
    defaultMessage: [{
      "type": 0,
      "value": "Gift Cards"
    }]
  },
  [ALL_SECTIONS.WEBHOOKS]: {
    id: "editCollective.menu.webhooks",
    defaultMessage: [{
      "type": 0,
      "value": "Webhooks"
    }]
  },
  [ALL_SECTIONS.AUTHORIZED_APPS]: {
    id: "+o/Xal",
    defaultMessage: [{
      "type": 0,
      "value": "Authorized Apps"
    }]
  },
  [ALL_SECTIONS.FOR_DEVELOPERS]: {
    id: "o0kPeK",
    defaultMessage: [{
      "type": 0,
      "value": "For developers"
    }]
  },
  [ALL_SECTIONS.TICKETS]: {
    id: "section.tickets.title",
    defaultMessage: [{
      "type": 0,
      "value": "Tickets"
    }]
  },
  [ALL_SECTIONS.USER_SECURITY]: {
    id: "Security",
    defaultMessage: [{
      "type": 0,
      "value": "Security"
    }]
  },
  [ALL_SECTIONS.PAYMENT_RECEIPTS]: {
    id: "editCollective.menu.paymentReceipts",
    defaultMessage: [{
      "type": 0,
      "value": "Payment Receipts"
    }]
  },
  [ALL_SECTIONS.SECURITY]: {
    id: "Security",
    defaultMessage: [{
      "type": 0,
      "value": "Security"
    }]
  },
  [ALL_SECTIONS.HOST_VIRTUAL_CARDS]: {
    id: "VirtualCards.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Virtual Cards"
    }]
  },
  [ALL_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS]: {
    id: "VirtualCardsSettings.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Virtual Cards Settings"
    }]
  },
  [ALL_SECTIONS.VIRTUAL_CARDS]: {
    id: "VirtualCards.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Virtual Cards"
    }]
  },
  [ALL_SECTIONS.HOSTED_COLLECTIVES]: {
    id: "HostedCollectives",
    defaultMessage: [{
      "type": 0,
      "value": "Hosted Collectives"
    }]
  },
  [ALL_SECTIONS.NOTIFICATIONS]: {
    id: "NotificationsSettings.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Notification Settings"
    }]
  }
});

/***/ }),

/***/ 35950:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "l": () => (/* binding */ adminPanelQuery)
/* harmony export */ });
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _collective_page_graphql_fragments__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5824);


const adminPanelQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  query AdminPanel($slug: String!) {
    account(slug: $slug) {
      id
      legacyId
      slug
      name
      isHost
      type
      settings
      isArchived
      isIncognito
      imageUrl(height: 256)
      features {
        id
        ...NavbarFields
        VIRTUAL_CARDS
        USE_PAYMENT_METHODS
        EMIT_GIFT_CARDS
      }
      policies {
        REQUIRE_2FA_FOR_ADMINS
      }
      ... on AccountWithParent {
        parent {
          id
          slug
          policies {
            REQUIRE_2FA_FOR_ADMINS
          }
        }
      }
      ... on AccountWithHost {
        hostFeePercent
        host {
          id
          slug
          name
          settings
          policies {
            EXPENSE_AUTHOR_CANNOT_APPROVE {
              enabled
              amountInCents
              appliesToHostedCollectives
              appliesToSingleAdminCollectives
            }
            COLLECTIVE_MINIMUM_ADMINS {
              numberOfAdmins
              applies
              freeze
            }
          }
        }
      }
      ... on AccountWithHost {
        isApproved
      }
    }
  }
  ${_collective_page_graphql_fragments__WEBPACK_IMPORTED_MODULE_1__/* .collectiveNavbarFieldsFragment */ .AS}
`;

/***/ }),

/***/ 14476:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63901);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35599);
/* harmony import */ var lodash_isArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82525);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(32651);
/* harmony import */ var _lib_graphql_mutations__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(79618);
/* harmony import */ var _lib_graphql_queries__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(51719);
/* harmony import */ var _lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(62131);
/* harmony import */ var _edit_collective_Form__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(70575);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(53169);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(31330);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(13398);
/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(35950);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_edit_collective_Form__WEBPACK_IMPORTED_MODULE_13__, _ToastProvider__WEBPACK_IMPORTED_MODULE_15__]);
([_edit_collective_Form__WEBPACK_IMPORTED_MODULE_13__, _ToastProvider__WEBPACK_IMPORTED_MODULE_15__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


















const AccountSettings = ({
  account,
  section
}) => {
  const {
    LoggedInUser,
    refetchLoggedInUser
  } = (0,_lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)();
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();
  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_3___default().useState({
    status: undefined,
    result: undefined
  });
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .useToasts */ .e1)();
  const {
    data,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useQuery)(_lib_graphql_queries__WEBPACK_IMPORTED_MODULE_11__/* .editCollectivePageQuery */ .cd, {
    variables: {
      slug: account.slug
    },
    fetchPolicy: 'network-only',
    skip: !LoggedInUser
  });
  const collective = data?.Collective;
  const [editCollective] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useMutation)(_lib_graphql_mutations__WEBPACK_IMPORTED_MODULE_10__/* .editCollectiveMutation */ .S);

  const handleEditCollective = async updatedCollective => {
    const collective = _objectSpread({}, updatedCollective);

    if (typeof collective.tags === 'string') {
      collective.tags = collective.tags.split(',').map(t => t.trim());
    }

    if (collective.backgroundImage === _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_7__/* .defaultBackgroundImage */ .am[collective.type]) {
      delete collective.backgroundImage;
    }

    collective.settings = _objectSpread(_objectSpread({}, collective.settings), {}, {
      tos: collective.tos
    });
    delete collective.tos;
    const collectiveFields = ['id', 'type', 'slug', 'name', 'legalName', 'company', 'description', 'longDescription', 'tags', 'expensePolicy', 'website', 'twitterHandle', 'repositoryUrl', 'socialLinks', 'location', 'privateInstructions', 'startsAt', 'endsAt', 'timezone', 'currency', 'quantity', 'ParentCollectiveId', 'HostCollectiveId', 'image', 'backgroundImage', 'hostFeePercent', 'isActive'];

    if (![_constants__WEBPACK_IMPORTED_MODULE_16__/* .ALL_SECTIONS.TIERS */ .J7.TIERS, _constants__WEBPACK_IMPORTED_MODULE_16__/* .ALL_SECTIONS.TICKETS */ .J7.TICKETS].includes(section)) {
      collectiveFields.push('settings');
    }

    const CollectiveInputType = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(collective, collectiveFields);

    if (lodash_isArray__WEBPACK_IMPORTED_MODULE_2___default()(collective.tiers)) {
      CollectiveInputType.tiers = collective.tiers.map(tier => lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(tier, ['id', 'type', 'name', 'description', 'longDescription', 'useStandalonePage', 'amount', 'amountType', 'interval', 'maxQuantity', 'presets', 'minimumAmount', 'goal', 'button', 'invoiceTemplate', 'singleTicket']));
    }

    if (lodash_isArray__WEBPACK_IMPORTED_MODULE_2___default()(collective.socialLinks)) {
      CollectiveInputType.socialLinks = collective.socialLinks.map(sl => lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(sl, '__typename'));
    }

    if (collective.location === null) {
      CollectiveInputType.location = null;
    } else {
      CollectiveInputType.location = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(collective.location, ['name', 'address', 'lat', 'long', 'country']);
    }

    setState(_objectSpread(_objectSpread({}, state), {}, {
      status: 'loading'
    }));

    try {
      const response = await editCollective({
        variables: {
          collective: CollectiveInputType
        },
        // It's heavy, but we need to refetch the information of the account after a mutation as fundamental
        // properties like its name or whether it's a fiscal host can change.
        refetchQueries: [{
          query: _queries__WEBPACK_IMPORTED_MODULE_17__/* .adminPanelQuery */ .l,
          variables: {
            slug: account.slug
          },
          context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
        }]
      });
      const updatedCollective = response.data.editCollective;
      setState(_objectSpread(_objectSpread({}, state), {}, {
        status: 'saved',
        result: {
          error: null
        }
      }));
      const currentSlug = router.query.slug;

      if (currentSlug !== updatedCollective.slug) {
        router.replace({
          pathname: `/${updatedCollective.slug}/admin`,
          query: _objectSpread({}, router.query)
        });
        await refetchLoggedInUser();
      } else {
        setTimeout(() => {
          setState(_objectSpread(_objectSpread({}, state), {}, {
            status: null
          }));
        }, 3000);
      }

      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "Settings.Updated",
          defaultMessage: [{
            "type": 0,
            "value": "Settings updated."
          }]
        })
      });
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_8__/* .getErrorFromGraphqlException */ .H1)(err)?.message || /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "Settings.Updated.Fail",
        defaultMessage: [{
          "type": 0,
          "value": "Update failed."
        }]
      });

      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        message: errorMsg
      });
      setState(_objectSpread(_objectSpread({}, state), {}, {
        status: null,
        result: {
          error: errorMsg
        }
      }));
    }
  };

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {});
  } else if (!collective) {
    return null;
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_edit_collective_Form__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
    collective: collective,
    host: account?.host,
    LoggedInUser: LoggedInUser,
    onSubmit: handleEditCollective,
    status: state.status,
    section: section
  });
};

AccountSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AccountSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AccountSettings);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 8752:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62131);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(25896);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(68185);
/* harmony import */ var _oauth_AuthorizedApp__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(55888);
/* harmony import */ var _oauth_queries__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(332);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(79045);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(90998);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(13398);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_oauth_AuthorizedApp__WEBPACK_IMPORTED_MODULE_13__]);
_oauth_AuthorizedApp__WEBPACK_IMPORTED_MODULE_13__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];






















const AuthorizedAppsSection = () => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)() || {};
  const query = router.query;
  const variables = {
    limit: 10,
    offset: query.offset ? parseInt(query.offset) : 0
  };
  const {
    data,
    loading,
    error,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(_oauth_queries__WEBPACK_IMPORTED_MODULE_14__/* .authorizedAppsQuery */ .v, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T
  });
  const {
    LoggedInUser
  } = (0,_lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)();
  const authorizations = data?.loggedInAccount?.oAuthAuthorizations; // Redirect to previous page when removing the last item of a page

  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(() => {
    if (variables.offset && variables.offset >= authorizations?.totalCount) {
      const pathname = router.asPath.split('?')[0];
      const offset = Math.max(0, variables.offset - variables.limit);
      router.push({
        pathname,
        query: {
          offset,
          limit: variables.limit
        }
      });
      refetch();
    }
  }, [authorizations?.totalCount, variables.offset]);
  return loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
    height: 300
  }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
    error: error
  }) : !data?.loggedInAccount?.oAuthAuthorizations?.totalCount ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx("div", {
    children: LoggedInUser.collective.settings.oauthBeta ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_17__.P, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "7q8x3B",
        defaultMessage: [{
          "type": 0,
          "value": "You haven't configured any application yet"
        }]
      })
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      type: "info",
      withIcon: true,
      mt: 3,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "XhMMHL",
        defaultMessage: [{
          "type": 0,
          "value": "No Authorized App yet. You can create your own OAuth application from the "
        }, {
          "type": 8,
          "value": "ForDevelopersLink",
          "children": [{
            "type": 0,
            "value": "For Developers"
          }]
        }, {
          "type": 0,
          "value": " section."
        }],
        values: {
          ForDevelopersLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_8__/* .getI18nLink */ .fw)({
            as: _Link__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,
            href: (0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_6__/* .getSettingsRoute */ .aT)(LoggedInUser.collective, _constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.FOR_DEVELOPERS */ .J7.FOR_DEVELOPERS)
          })
        }
      })
    })
  }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
    mt: 3,
    children: [authorizations.nodes.map((authorization, index) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_oauth_AuthorizedApp__WEBPACK_IMPORTED_MODULE_13__/* .AuthorizedApp */ .h, {
        authorization: authorization,
        onRevoke: refetch
      }), index !== authorizations.nodes.length - 1 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        my: 4,
        borderColor: "black.300"
      })]
    }, authorization.id)), authorizations.totalCount > variables.limit && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        total: authorizations.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

AuthorizedAppsSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AuthorizedAppsSection"
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthorizedAppsSection);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 67817:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79258);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_1__]);
_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];




const FinancialContributions = ({
  hostSlug
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx(_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
    accountSlug: hostSlug,
    showPlatformTip: true
  });
};

FinancialContributions.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FinancialContributions",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FinancialContributions);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 44102:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_collective_lib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5700);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82525);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25896);
/* harmony import */ var _oauth_OAuthApplicationSettings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(78840);
/* harmony import */ var _oauth_OAuthApplicationsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(88752);
/* harmony import */ var _personal_token_PersonalTokenSettings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(64166);
/* harmony import */ var _personal_token_PersonalTokensList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(24286);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_oauth_OAuthApplicationSettings__WEBPACK_IMPORTED_MODULE_5__, _oauth_OAuthApplicationsList__WEBPACK_IMPORTED_MODULE_6__, _personal_token_PersonalTokenSettings__WEBPACK_IMPORTED_MODULE_7__, _personal_token_PersonalTokensList__WEBPACK_IMPORTED_MODULE_8__]);
([_oauth_OAuthApplicationSettings__WEBPACK_IMPORTED_MODULE_5__, _oauth_OAuthApplicationsList__WEBPACK_IMPORTED_MODULE_6__, _personal_token_PersonalTokenSettings__WEBPACK_IMPORTED_MODULE_7__, _personal_token_PersonalTokensList__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);












const ForDevelopers = ({
  account
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)() || {};
  const query = router.query;
  const [subSection, id] = query.subpath || [];

  if (subSection === 'oauth' && id) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_oauth_OAuthApplicationSettings__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      id: id,
      backPath: router.asPath.replace(/\/oauth\/.+/, '')
    });
  } else if (subSection === 'personal-tokens' && id) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_personal_token_PersonalTokenSettings__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
      id: id,
      backPath: router.asPath.replace(/\/personal-tokens\/.+/, '')
    });
  } else {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_oauth_OAuthApplicationsList__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
        account: account,
        offset: query.offset ? parseInt(query.offset) : 0,
        onApplicationCreated: (app, account) => router.push((0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__/* .getOauthAppSettingsRoute */ .Sn)(account, app))
      }), (0,_lib_collective_lib__WEBPACK_IMPORTED_MODULE_2__/* .isIndividualAccount */ .Sh)(account) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_personal_token_PersonalTokensList__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        account: account,
        offset: query.offset ? parseInt(query.offset) : 0,
        onPersonalTokenCreated: (app, account) => router.push((0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__/* .getPersonalTokenSettingsRoute */ .gb)(account, app))
      })]
    });
  }
};

ForDevelopers.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ForDevelopers",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "type": {
            "name": "enum",
            "computed": true,
            "value": "Object.keys(CollectiveType)",
            "required": true
          },
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ForDevelopers);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 6795:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63901);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _edit_collective_AssignVirtualCardModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90365);
/* harmony import */ var _edit_collective_EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(21408);
/* harmony import */ var _edit_collective_sections_virtual_cards_VirtualCardFilters__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16103);
/* harmony import */ var _edit_collective_VirtualCard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(14896);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(88705);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(53169);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(79045);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_edit_collective_AssignVirtualCardModal__WEBPACK_IMPORTED_MODULE_8__, _edit_collective_EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_9__, _edit_collective_sections_virtual_cards_VirtualCardFilters__WEBPACK_IMPORTED_MODULE_10__, _edit_collective_VirtualCard__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_18__]);
([_edit_collective_AssignVirtualCardModal__WEBPACK_IMPORTED_MODULE_8__, _edit_collective_EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_9__, _edit_collective_sections_virtual_cards_VirtualCardFilters__WEBPACK_IMPORTED_MODULE_10__, _edit_collective_VirtualCard__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_18__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




















const hostVirtualCardsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query HostedVirtualCards(
    $slug: String
    $limit: Int!
    $offset: Int!
    $state: String
    $merchantAccount: AccountReferenceInput
    $collectiveAccountIds: [AccountReferenceInput]
  ) {
    host(slug: $slug) {
      id
      legacyId
      slug
      name
      imageUrl
      currency
      settings
      hostedVirtualCards(
        limit: $limit
        offset: $offset
        state: $state
        merchantAccount: $merchantAccount
        collectiveAccountIds: $collectiveAccountIds
      ) {
        totalCount
        limit
        offset
        nodes {
          id
          name
          last4
          data
          privateData
          provider
          spendingLimitAmount
          spendingLimitInterval
          spendingLimitRenewsOn
          remainingLimit
          currency
          createdAt
          account {
            id
            name
            slug
            imageUrl
          }
          assignee {
            id
            name
            slug
            imageUrl
          }
        }
      }
      hostedVirtualCardMerchants {
        nodes {
          id
          type
          slug
          name
          currency
          location {
            id
            address
            country
          }
          imageUrl(height: 64)
        }
      }
      hostedVirtualCardCollectives {
        totalCount
        limit
        offset
        nodes {
          id
          slug
          name
          legacyId
          imageUrl(height: 64)
          ... on AccountWithParent {
            parentAccount: parent {
              id
              slug
              name
              legacyId
              imageUrl(height: 64)
            }
          }
        }
      }
    }
  }
`;
const AddCardPlaceholder = styled_components__WEBPACK_IMPORTED_MODULE_6___default()(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC).withConfig({
  displayName: "HostVirtualCards__AddCardPlaceholder",
  componentId: "sc-t74hwv-0"
})(["border-radius:20px;", ""], props => `border: 1px dashed ${props.theme.colors.primary[500]};`);
const VIRTUAL_CARDS_PER_PAGE = 6;

const HostVirtualCards = props => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();

  const routerQuery = lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(router.query, ['slug', 'section']);

  const offset = parseInt(routerQuery.offset) || 0;
  const {
    state,
    merchant,
    collectiveAccountIds
  } = routerQuery;
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_18__/* .useToasts */ .e1)();
  const {
    loading,
    data,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(hostVirtualCardsQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: props.hostSlug,
      limit: VIRTUAL_CARDS_PER_PAGE,
      offset,
      state,
      merchantAccount: {
        slug: merchant
      },
      collectiveAccountIds: collectiveAccountIds ? collectiveAccountIds.split(',').map(collectiveAccountId => ({
        legacyId: parseInt(collectiveAccountId)
      })) : undefined
    }
  });
  const [displayAssignCardModal, setAssignCardModalDisplay] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  const [displayCreateVirtualCardModal, setCreateVirtualCardModalDisplay] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);

  const handleUpdateFilters = queryParams => {
    return router.push({
      pathname: `/${props.hostSlug}/admin/host-virtual-cards`,
      query: lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, routerQuery), queryParams), value => !value)
    }, null, {
      scroll: false
    });
  };

  const handleAssignCardSuccess = message => {
    addToast({
      type: _ToastProvider__WEBPACK_IMPORTED_MODULE_18__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
      message: message || /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "Host.VirtualCards.AssignCard.Success",
        defaultMessage: [{
          "type": 0,
          "value": "Card successfully assigned"
        }]
      })
    });
    setAssignCardModalDisplay(false);
    refetch();
  };

  const handleCreateVirtualCardSuccess = message => {
    addToast({
      type: _ToastProvider__WEBPACK_IMPORTED_MODULE_18__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
      message: message || /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "5O/mlD",
        defaultMessage: [{
          "type": 0,
          "value": "Virtual card successfully created"
        }]
      })
    });
    setCreateVirtualCardModalDisplay(false);
    refetch();
  };

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {});
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_17__.P, {
        fontSize: "24px",
        fontWeight: "700",
        lineHeight: "32px",
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "VirtualCards.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Virtual Cards"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_17__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "Host.VirtualCards.List.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Make payments easier by creating virtual cards. One Collective can have multiple virtual cards. "
          }, {
            "type": 8,
            "value": "learnMoreLink",
            "children": [{
              "type": 0,
              "value": "Learn more"
            }]
          }],
          values: {
            learnMoreLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_13__/* .getI18nLink */ .fw)({
              href: 'https://docs.opencollective.com/help/fiscal-hosts/virtual-cards',
              openInNewTabNoFollow: true
            })
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
        mt: 3,
        flexDirection: ['row', 'column'],
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_sections_virtual_cards_VirtualCardFilters__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          isCollectiveFilter: true,
          filters: routerQuery,
          collective: data.host,
          virtualCardMerchants: data.host.hostedVirtualCardMerchants.nodes,
          virtualCardCollectives: data.host.hostedVirtualCardCollectives.nodes,
          onChange: queryParams => handleUpdateFilters(_objectSpread(_objectSpread({}, queryParams), {}, {
            offset: null
          }))
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Grid */ .rj, {
      mt: 4,
      gridTemplateColumns: ['100%', '366px 366px'],
      gridGap: "32px 24px",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(AddCardPlaceholder, {
        width: "366px",
        height: "248px",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "column",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          my: 1,
          px: 14,
          py: 10,
          buttonStyle: "primary",
          buttonSize: "medium",
          "data-cy": "confirmation-modal-continue",
          onClick: () => setCreateVirtualCardModalDisplay(true),
          children: "+"
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
          mt: "10px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "FRM4fb",
            defaultMessage: [{
              "type": 0,
              "value": "Create virtual card"
            }]
          })
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(AddCardPlaceholder, {
        width: "366px",
        height: "248px",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "column",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          my: 1,
          px: 14,
          py: 10,
          buttonStyle: "primary",
          buttonSize: "medium",
          "data-cy": "confirmation-modal-continue",
          onClick: () => setAssignCardModalDisplay(true),
          children: "+"
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
          mt: "10px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "Host.VirtualCards.AssignCard",
            defaultMessage: [{
              "type": 0,
              "value": "Assign Card"
            }]
          })
        })]
      }), data.host.hostedVirtualCards.nodes.map(vc => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_VirtualCard__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        host: data.host,
        virtualCard: vc,
        canEditVirtualCard: true,
        canPauseOrResumeVirtualCard: true,
        canDeleteVirtualCard: true,
        onDeleteRefetchQuery: "HostedVirtualCards"
      }, vc.id))]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
      mt: 5,
      alignItems: "center",
      flexDirection: "column",
      justifyContent: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        route: `/${data.host.slug}/admin/host-virtual-cards`,
        total: data.host.hostedVirtualCards.totalCount,
        limit: VIRTUAL_CARDS_PER_PAGE,
        offset: offset,
        ignoredQueryParams: ['slug', 'section']
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_17__.P, {
        mt: 1,
        fontSize: "12px",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "TotalItems",
          defaultMessage: [{
            "type": 0,
            "value": "Total Items"
          }]
        }), ": ", data.host.hostedVirtualCards.totalCount]
      })]
    }), displayAssignCardModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_AssignVirtualCardModal__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      host: data.host,
      onSuccess: handleAssignCardSuccess,
      onClose: () => {
        setAssignCardModalDisplay(false);
      }
    }), displayCreateVirtualCardModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      host: data.host,
      onSuccess: handleCreateVirtualCardSuccess,
      onClose: () => {
        setCreateVirtualCardModalDisplay(false);
      }
    })]
  });
};

HostVirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostVirtualCards",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostVirtualCards);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 34503:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _styled_icons_boxicons_regular_Plus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23263);
/* harmony import */ var _styled_icons_boxicons_regular_Plus__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_Plus__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_boxicons_regular_Trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50359);
/* harmony import */ var _styled_icons_boxicons_regular_Trash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_Trash__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12136);
/* harmony import */ var _collective_page_graphql_mutations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8914);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(69078);
/* harmony import */ var _edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36317);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(173);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(87262);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(31330);
/* harmony import */ var _ReceiptTemplateForm__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(90331);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_14__, _ToastProvider__WEBPACK_IMPORTED_MODULE_17__]);
([_StyledInputField__WEBPACK_IMPORTED_MODULE_14__, _ToastProvider__WEBPACK_IMPORTED_MODULE_17__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





















const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.defineMessages)({
  extraInfoPlaceholder: {
    id: "EditHostInvoice.extraInfoPlaceholder",
    defaultMessage: [{
      "type": 0,
      "value": "Add any other text to appear on payment receipts, such as your organization's tax ID number, info about tax deductibility of contributions, or a custom thank you message."
    }]
  }
});
const BILL_TO_OPTIONS = [{
  value: 'host',
  label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
    id: "OgbGHX",
    defaultMessage: [{
      "type": 1,
      "value": "value"
    }, {
      "type": 0,
      "value": " (default)"
    }],
    values: {
      value: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "Member.Role.HOST",
        defaultMessage: [{
          "type": 0,
          "value": "Host"
        }]
      })
    }
  })
}, {
  value: 'collective',
  label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
    id: "Collective",
    defaultMessage: [{
      "type": 0,
      "value": "Collective"
    }]
  })
}];

const InvoicesReceipts = ({
  collective
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_17__/* .useToasts */ .e1)(); // For invoice Title

  const defaultReceiptTitlePlaceholder = 'Payment Receipt';

  const defaultReceiptTitle = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective.settings, 'invoice.templates.default.title');

  const defaultAlternativeReceiptTitle = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective.settings, 'invoice.templates.alternative.title', null);

  const [setSettings, {
    loading,
    error,
    data
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(_collective_page_graphql_mutations__WEBPACK_IMPORTED_MODULE_7__/* .editCollectiveSettingsMutation */ .U0);
  const [receiptTitle, setReceiptTitle] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(defaultReceiptTitle);
  const [alternativeReceiptTitle, setAlternativeReceiptTitle] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(defaultAlternativeReceiptTitle);
  const [showAlternativeReceiptsSection, setShowAlternativeReceiptsSection] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(defaultAlternativeReceiptTitle !== null);
  const [isFieldChanged, setIsFieldChanged] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);
  const isSaved = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'editCollective.settings.invoice.templates.default.title') === receiptTitle && lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'editCollective.settings.invoice.templates.alternative.title', null) === alternativeReceiptTitle; // For invoice extra info

  const defaultInfo = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective.settings, 'invoice.templates.default.info');

  const defaultAlternativeInfo = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective.settings, 'invoice.templates.alternative.info');

  const [info, setInfo] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(defaultInfo);
  const [alternativeInfo, setAlternativeInfo] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(defaultAlternativeInfo);
  const infoIsSaved = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'editCollective.settings.invoice.templates.default.info') === info && lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'editCollective.settings.invoice.templates.alternative.info') === alternativeInfo; // For Bill To

  const getBillToOption = value => BILL_TO_OPTIONS.find(option => option.value === value) || BILL_TO_OPTIONS[0];

  const getInExpenseTemplate = (account, field) => lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(account, `settings.invoice.expenseTemplates.default.${field}`);

  const [billTo, setBillTo] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(getInExpenseTemplate(collective, 'billTo'));
  const billToIsSaved = getInExpenseTemplate(collective, 'billTo') === billTo;

  const deleteAlternativeReceipt = () => {
    setAlternativeReceiptTitle(null);
    setAlternativeInfo(null);
    setShowAlternativeReceiptsSection(false);
    setIsFieldChanged(true);
  };

  const getInvoiceTemplatesObj = () => {
    const templates = {
      default: {
        title: receiptTitle,
        info: info
      }
    };
    const expenseTemplates = {
      default: {
        billTo
      }
    };

    if (alternativeReceiptTitle || alternativeInfo) {
      templates.alternative = {
        title: alternativeReceiptTitle,
        info: alternativeInfo
      };
    }

    return {
      templates,
      expenseTemplates
    };
  };

  const onChangeDefault = (title, info) => {
    if (title) {
      setReceiptTitle(title === '' ? defaultReceiptTitlePlaceholder : title);
    }

    if (info) {
      setInfo(info);
    }

    setIsFieldChanged(true);
  };

  const onChangeAlternate = (title, info) => {
    if (title) {
      setAlternativeReceiptTitle(title);
    }

    if (info) {
      setAlternativeInfo(info);
    }

    setIsFieldChanged(true);
  };

  const onChange = (value, stateFunction) => {
    stateFunction(value);
    setIsFieldChanged(true);
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.H2, {
      mb: 3,
      fontSize: "24px",
      lineHeight: "32px",
      fontWeight: "700",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "becomeASponsor.invoiceReceipts",
        defaultMessage: [{
          "type": 0,
          "value": "Invoices & Receipts"
        }]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
      mb: 4,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "Expenses",
          defaultMessage: [{
            "type": 0,
            "value": "Expenses"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        name: "expense-bill-to-select",
        labelProps: {
          fontSize: '16px',
          fontWeight: '700',
          lineHeight: '24px',
          color: 'black.800'
        },
        label: intl.formatMessage({
          id: "izhuHE",
          defaultMessage: [{
            "type": 0,
            "value": "Bill To"
          }]
        }),
        hint: intl.formatMessage({
          id: "yMFA0e",
          defaultMessage: [{
            "type": 0,
            "value": "Set this to \"Collective\" to use the collective info for generated invoices' \"Bill To\" section. You need to make sure that this pattern is legal under your jurisdiction."
          }]
        }),
        children: ({
          id
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, {
          inputId: id,
          options: BILL_TO_OPTIONS,
          value: getBillToOption(billTo),
          onChange: ({
            value
          }) => onChange(value, setBillTo)
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "financialContributions",
        defaultMessage: [{
          "type": 0,
          "value": "Financial contributions"
        }]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
      pb: "26px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "EditHostInvoice.Receipt.Instructions",
        defaultMessage: [{
          "type": 0,
          "value": "You can customize the title (and add custom text) on automatically generated receipts for financial contributions to your Collective(s), e.g., 'donation receipt' or 'tax receipt' or a phrase appropriate for your legal entity type, language, and location. Keep this field empty to use the default title:"
        }]
      }), "\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx("i", {
        children: defaultReceiptTitlePlaceholder
      }), "."]
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      type: "error",
      fontSize: "14px",
      withIcon: true,
      mb: 3,
      children: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_6__/* .i18nGraphqlException */ .t2)(intl, error)
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
      flexWrap: "wrap",
      flexDirection: "column",
      width: "100%",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_ReceiptTemplateForm__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
        defaultTemplate: true,
        value: {
          title: defaultReceiptTitlePlaceholder === receiptTitle || receiptTitle === null ? null : receiptTitle,
          info
        },
        placeholders: {
          title: defaultReceiptTitlePlaceholder,
          info: intl.formatMessage(messages.extraInfoPlaceholder)
        },
        onChange: onChangeDefault
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_edit_collective_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "CJtvlX",
          defaultMessage: [{
            "type": 0,
            "value": "Alternative receipt template"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "MNi3fa",
          defaultMessage: [{
            "type": 0,
            "value": "You can create an additional receipt for you to use as a non-tax-deductible payments for cases like event tickets, merch, or services."
          }]
        })
      }), !showAlternativeReceiptsSection && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        buttonStyle: "secondary",
        mt: "24px",
        mb: "24px",
        maxWidth: 209,
        pt: "7px",
        pb: "7px",
        pl: "18px",
        pr: "16px",
        onClick: () => setShowAlternativeReceiptsSection(true),
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          fontSize: "14px",
          fontWeight: 500,
          lineHeight: "18px",
          color: "#1869F5",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            pr: "10px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_styled_icons_boxicons_regular_Plus__WEBPACK_IMPORTED_MODULE_3__.Plus, {
              size: 17
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "7It+w9",
            defaultMessage: [{
              "type": 0,
              "value": "Add alternative receipt"
            }]
          })]
        })
      }), showAlternativeReceiptsSection && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        mt: "26px",
        mb: "24px",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          flexWrap: "wrap",
          flexDirection: "column",
          width: "100%",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_ReceiptTemplateForm__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
            value: {
              title: alternativeReceiptTitle,
              info: alternativeInfo
            },
            placeholders: {
              title: 'Custom Receipt',
              info: intl.formatMessage(messages.extraInfoPlaceholder)
            },
            onChange: onChangeAlternate
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          buttonStyle: "danger",
          borderColor: "#CC2955",
          backgroundColor: "white",
          background: "none",
          mt: "24px",
          maxWidth: 225,
          pt: "7px",
          pb: "7px",
          pl: "18px",
          pr: "16px",
          onClick: () => deleteAlternativeReceipt(),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__/* .Span */ .Dr, {
            display: "flex",
            fontSize: "14px",
            fontWeight: 500,
            lineHeight: "18px",
            color: "#CC2955",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
              pr: "10px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_styled_icons_boxicons_regular_Trash__WEBPACK_IMPORTED_MODULE_4__.Trash, {
                size: 17
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "aXAB2R",
              defaultMessage: [{
                "type": 0,
                "value": "Delete alternative receipt"
              }]
            })]
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        borderColor: "#C3C6CB"
      }), showAlternativeReceiptsSection && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        type: "info",
        mt: "24px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__/* .Span */ .Dr, {
          fontSize: "13px",
          fontWeight: 400,
          lineHeight: "20px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "nYrU4E",
            defaultMessage: [{
              "type": 0,
              "value": "Please advise your Collectives to select the correct receipt setting for any tiers where the alternative receipt should be used, or manage related contributions through the Add Funds process, where you as the Host Admin can select the correct receipt."
            }]
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        buttonStyle: "primary",
        mt: "24px",
        maxWidth: 200,
        loading: loading,
        disabled: !isFieldChanged,
        onClick: () => {
          setSettings({
            variables: {
              id: collective.legacyId,
              settings: _objectSpread(_objectSpread({}, collective.settings), {}, {
                invoice: getInvoiceTemplatesObj()
              })
            }
          });
          setIsFieldChanged(false);
          addToast({
            type: _ToastProvider__WEBPACK_IMPORTED_MODULE_17__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
            message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "6P4LG/",
              defaultMessage: [{
                "type": 0,
                "value": "Invoices updated successfully"
              }]
            })
          });
        },
        children: isSaved && infoIsSaved && billToIsSaved ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "saved",
          defaultMessage: [{
            "type": 0,
            "value": "Saved"
          }]
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "save",
          defaultMessage: [{
            "type": 0,
            "value": "Save"
          }]
        })
      })]
    })]
  });
};

InvoicesReceipts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "InvoicesReceipts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "legacyId": {
            "name": "number",
            "required": true
          },
          "settings": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InvoicesReceipts);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 34533:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70756);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(69196);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _InputSwitch__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(96124);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(88609);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(31330);
/* harmony import */ var _fragments__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90062);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledTooltip__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_10__]);
([_StyledTooltip__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);














const refetchEmailNotificationQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  query NotificationsSettingsRefetchQuery($id: String!) {
    account(id: $id) {
      id
      ...AccountActivitySubscriptionsFields
    }
  }
  ${_fragments__WEBPACK_IMPORTED_MODULE_11__/* .accountActivitySubscriptionsFragment */ .U}
`;
const setEmailNotificationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation SetEmailNotification($type: ActivityAndClassesType!, $account: AccountReferenceInput, $active: Boolean!) {
    setEmailNotification(type: $type, account: $account, active: $active) {
      id
    }
  }
`;

const ActivitySwitch = ({
  account,
  activityType
}) => {
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_10__/* .useToasts */ .e1)();
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const existingSetting = account.activitySubscriptions?.find(notification => _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityClasses */ .oD[activityType] === notification.type || notification.type === _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityTypes.ACTIVITY_ALL */ .II.ACTIVITY_ALL);
  const isResetingSettings = activityType === 'ACTIVITY_ALL' && account.activitySubscriptions?.filter(notification => notification.type !== _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityTypes.ACTIVITY_ALL */ .II.ACTIVITY_ALL).map(notification => _lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_6__/* .ActivityClassesI18N */ .J[`${notification.type}.title`] ? intl.formatMessage(_lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_6__/* .ActivityClassesI18N */ .J[`${notification.type}.title`]) : notification.type);
  const [isSubscribed, setSubscribed] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(existingSetting ? existingSetting.active : true);
  const isOverridedByAll = activityType !== 'ACTIVITY_ALL' && existingSetting?.type === _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityTypes.ACTIVITY_ALL */ .II.ACTIVITY_ALL;
  const [setEmailNotification] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(setEmailNotificationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    refetchQueries: [{
      query: refetchEmailNotificationQuery,
      variables: {
        id: account.id
      },
      context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
    }]
  });

  const handleToggle = async variables => {
    try {
      setSubscribed(variables.active);
      await setEmailNotification({
        variables
      });
    } catch (e) {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_10__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "NotificationsSettings.ToggleError",
          defaultMessage: [{
            "type": 0,
            "value": "Error updating activity "
          }, {
            "type": 1,
            "value": "activity"
          }, {
            "type": 0,
            "value": ": "
          }, {
            "type": 1,
            "value": "error"
          }],
          values: {
            activity: activityType,
            error: e.message
          }
        })
      });
    }
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
    alignItems: "center",
    children: [isResetingSettings?.length > 0 ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      content: () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "NotificationsSettings.ToggleResetSettings",
        defaultMessage: [{
          "type": 0,
          "value": "By toggling this setting, you're also reseting previously set options for: "
        }, {
          "type": 1,
          "value": "activities"
        }],
        values: {
          activities: isResetingSettings.join(', ')
        }
      }),
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__.Info, {
        size: 16
      })
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
      width: "16px"
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_InputSwitch__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      name: `${activityType}-switch`,
      checked: isSubscribed,
      disabled: isOverridedByAll,
      onChange: event => handleToggle({
        type: activityType,
        account: {
          id: account.id
        },
        active: event.target.checked
      })
    })]
  });
};

ActivitySwitch.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ActivitySwitch",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "imageUrl": {
            "name": "string",
            "required": false
          },
          "activitySubscriptions": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "type": {
                  "name": "string",
                  "required": false
                },
                "active": {
                  "name": "bool",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "activityType": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ActivitySwitch);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 62013:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _styled_icons_feather_ChevronDown__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89711);
/* harmony import */ var _styled_icons_feather_ChevronDown__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_ChevronDown__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_feather_ChevronUp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76841);
/* harmony import */ var _styled_icons_feather_ChevronUp__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_ChevronUp__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70756);
/* harmony import */ var _lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69196);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11194);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(173);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(36422);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _ActivitySwitch__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(34533);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ActivitySwitch__WEBPACK_IMPORTED_MODULE_12__]);
_ActivitySwitch__WEBPACK_IMPORTED_MODULE_12__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
const _excluded = ["account", "advancedSettings", "big", "roleLabel"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

















const CollectiveSettings = _ref => {
  let {
    account,
    advancedSettings,
    big,
    roleLabel
  } = _ref,
      boxProps = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const [displayAdvancedSettings, setDisplayAdvancedSettings] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, _objectSpread(_objectSpread({}, boxProps), {}, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      alignItems: "center",
      justifyContent: "space-between",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        alignItems: "center",
        children: big ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
            collective: account,
            radius: 48,
            mr: 3
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
            fontSize: "16px",
            lineHeight: "24px",
            fontWeight: "500",
            children: [account.name, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("br", {}), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr, {
              fontSize: "14px",
              lineHeight: "20px",
              color: "black.600",
              children: roleLabel
            })]
          })]
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledTag__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            variant: "rounded",
            fontSize: "11px",
            lineHeight: "16px",
            backgroundColor: "black.50",
            border: "1px solid #C3C6CB",
            mr: 2,
            p: "4px 8px",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
              collective: account,
              radius: 16,
              mr: "6px"
            }), account.name]
          }), account.host && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
            children: ["(", account.host.totalHostedCollectives, ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "PEfD6k",
              defaultMessage: [{
                "type": 6,
                "value": "count",
                "options": {
                  "one": {
                    "value": [{
                      "type": 0,
                      "value": "collective"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "collectives"
                    }]
                  }
                },
                "offset": 0,
                "pluralType": "cardinal"
              }],
              values: {
                count: account.host.totalHostedCollectives
              }
            }), ")"]
          })]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        children: [advancedSettings && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          buttonStyle: "secondary",
          buttonSize: "tiny",
          isBorderless: true,
          mr: 2,
          display: ['none', 'block'],
          onClick: () => setDisplayAdvancedSettings(!displayAdvancedSettings),
          children: [displayAdvancedSettings ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "AdvancedSettings.Hide",
            defaultMessage: [{
              "type": 0,
              "value": "Hide advanced settings"
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "AdvancedSettings.Show",
            defaultMessage: [{
              "type": 0,
              "value": "Show advanced settings"
            }]
          }), displayAdvancedSettings ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_styled_icons_feather_ChevronUp__WEBPACK_IMPORTED_MODULE_2__.ChevronUp, {
            size: "1em"
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_styled_icons_feather_ChevronDown__WEBPACK_IMPORTED_MODULE_1__.ChevronDown, {
            size: "1em"
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_ActivitySwitch__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          account: account,
          activityType: "ACTIVITY_ALL"
        })]
      })]
    }), advancedSettings && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      buttonStyle: "secondary",
      buttonSize: "tiny",
      isBorderless: true,
      mt: 2,
      display: ['block', 'none'],
      onClick: () => setDisplayAdvancedSettings(!displayAdvancedSettings),
      children: [displayAdvancedSettings ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "AdvancedSettings.Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide advanced settings"
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "AdvancedSettings.Show",
        defaultMessage: [{
          "type": 0,
          "value": "Show advanced settings"
        }]
      }), displayAdvancedSettings ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_styled_icons_feather_ChevronUp__WEBPACK_IMPORTED_MODULE_2__.ChevronUp, {
        size: "1em"
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_styled_icons_feather_ChevronDown__WEBPACK_IMPORTED_MODULE_1__.ChevronDown, {
        size: "1em"
      })]
    }), big && displayAdvancedSettings && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      width: "100%",
      my: 3
    }), advancedSettings && displayAdvancedSettings && Object.keys(_lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityClasses */ .oD).map(activity => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        mt: 3,
        alignItems: "center",
        justifyContent: "space-between",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
          fontSize: "14px",
          fontWeight: "500",
          lineHeight: "20px",
          children: intl.formatMessage(_lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_5__/* .ActivityClassesI18N */ .J[`${_lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityClasses */ .oD[activity]}.title`])
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_ActivitySwitch__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          account: account,
          activityType: activity
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
        mt: "2",
        fontSize: "12px",
        color: "black.700",
        lineHeight: "18px",
        letterSpacing: "0px",
        children: intl.formatMessage(_lib_i18n_activities_classes__WEBPACK_IMPORTED_MODULE_5__/* .ActivityClassesI18N */ .J[`${_lib_constants_activities__WEBPACK_IMPORTED_MODULE_4__/* .ActivityClasses */ .oD[activity]}.description`])
      })]
    }, activity)), advancedSettings && !big && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      width: "100%",
      mt: displayAdvancedSettings ? 4 : 3,
      borderStyle: "dashed"
    })]
  }));
};

CollectiveSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "imageUrl": {
            "name": "string",
            "required": false
          },
          "activitySubscriptions": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "type": {
                  "name": "string",
                  "required": false
                },
                "active": {
                  "name": "bool",
                  "required": false
                }
              }
            },
            "required": false
          },
          "host": {
            "name": "shape",
            "value": {
              "totalHostedCollectives": {
                "name": "number",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "advancedSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "big": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "roleLabel": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectiveSettings);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 94622:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var _CollectiveSettings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(62013);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CollectiveSettings__WEBPACK_IMPORTED_MODULE_8__]);
_CollectiveSettings__WEBPACK_IMPORTED_MODULE_8__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];











const CollectiveContainer = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Flex */ .kC).withConfig({
  displayName: "GroupView__CollectiveContainer",
  componentId: "sc-1vwu708-0"
})(["border:1px solid rgba(50,51,52,0.1);"]);

const GroupView = ({
  accounts,
  title,
  advancedSettings,
  roleLabel
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)(); // Return user to parent /user/admin/notifications page by removing the group name from the end of the URL

  const handleBack = () => router.push(`/${router.asPath.split('/').slice(1, 4).join('/')}`);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Box */ .xu, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
      color: "blue.800",
      fontSize: "13px",
      fontWeight: "500",
      lineHeight: "16px",
      mb: 4,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
        textDecoration: "underline",
        color: "inherit",
        onClick: handleBack,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "NotificationsSettings.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Notification Settings"
          }]
        })
      }), ' ', "> ", title]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
      fontSize: "24px",
      fontWeight: "700",
      lineHeight: "32px",
      mb: 3,
      children: title
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
      lineHeight: "20px",
      letterSpacing: "0px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "NotificationsSettings.Descripion",
        defaultMessage: [{
          "type": 0,
          "value": "We will always let you know about important changes, but you can customize other settings here. Manage email notifications for your individual profile as well as the collectives and organizations you are part of."
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Flex */ .kC, {
      mt: 4,
      flexDirection: "column",
      children: accounts.map(account => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(CollectiveContainer, {
        mb: 24,
        p: 24,
        flexDirection: "column",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_CollectiveSettings__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          account: account,
          advancedSettings: advancedSettings,
          roleLabel: roleLabel,
          big: true
        })
      }, account.id))
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      onClick: handleBack,
      children: "Back"
    })]
  });
};

GroupView.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "GroupView",
  "props": {
    "accounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "id": {
              "name": "string",
              "required": false
            },
            "name": {
              "name": "string",
              "required": false
            },
            "slug": {
              "name": "string",
              "required": false
            },
            "type": {
              "name": "string",
              "required": false
            },
            "imageUrl": {
              "name": "string",
              "required": false
            },
            "activitySubscriptions": {
              "name": "arrayOf",
              "value": {
                "name": "shape",
                "value": {
                  "type": {
                    "name": "string",
                    "required": false
                  },
                  "active": {
                    "name": "bool",
                    "required": false
                  }
                }
              },
              "required": false
            },
            "host": {
              "name": "shape",
              "value": {
                "totalHostedCollectives": {
                  "name": "number",
                  "required": false
                }
              },
              "required": false
            }
          }
        }
      },
      "required": false
    },
    "title": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "roleLabel": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "advancedSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GroupView);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 90062:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "U": () => (/* binding */ accountActivitySubscriptionsFragment)
/* harmony export */ });
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_0__);

const accountActivitySubscriptionsFragment = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  fragment AccountActivitySubscriptionsFields on Account {
    id
    name
    slug
    type
    imageUrl
    activitySubscriptions(channel: email) {
      id
      channel
      type
      active
    }
  }
`;

/***/ }),

/***/ 59237:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_flatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58579);
/* harmony import */ var lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_compact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39131);
/* harmony import */ var lodash_compact__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_compact__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(11194);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16159);
/* harmony import */ var _InputSwitch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96124);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29242);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(173);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(36422);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(90998);
/* harmony import */ var _CollectiveSettings__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(62013);
/* harmony import */ var _fragments__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(90062);
/* harmony import */ var _GroupView__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(94622);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CollectiveSettings__WEBPACK_IMPORTED_MODULE_17__, _GroupView__WEBPACK_IMPORTED_MODULE_19__]);
([_CollectiveSettings__WEBPACK_IMPORTED_MODULE_17__, _GroupView__WEBPACK_IMPORTED_MODULE_19__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


const _excluded = ["accounts", "group", "title"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }





















const GROUP_VIEWS = {
  COLLECTIVES: 'collectives',
  ORGANIZATIONS: 'organizations',
  BACKED: 'backed'
};
const NecessaryNotificationsList = styled_components__WEBPACK_IMPORTED_MODULE_6___default().ul.withConfig({
  displayName: "NotificationsSettings__NecessaryNotificationsList",
  componentId: "sc-1sxbsf9-0"
})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));grid-gap:12px 24px;font-size:13px;font-weight:500;line-height:20px;"]);
const userActivitySubscriptionsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query ActivitySubscriptionsSettingsQuery($id: String!) {
    account(id: $id) {
      id
      ... on Individual {
        newsletterOptIn
      }
      memberOf(role: [ADMIN], accountType: [COLLECTIVE, FUND, ORGANIZATION], isArchived: false) {
        nodes {
          id
          account {
            id
            ...AccountActivitySubscriptionsFields
            ... on Organization {
              host {
                id
                totalHostedCollectives
              }
            }
          }
        }
      }
      backerOf: memberOf(
        role: [BACKER]
        accountType: [COLLECTIVE, ORGANIZATION, EVENT, FUND, PROJECT]
        isArchived: false
      ) {
        nodes {
          id
          account {
            id
            ...AccountActivitySubscriptionsFields
          }
        }
      }
    }
  }
  ${_fragments__WEBPACK_IMPORTED_MODULE_18__/* .accountActivitySubscriptionsFragment */ .U}
`;
const setNewsletterOptInMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  mutation SetNewsletterOptIn($newsletterOptIn: Boolean!) {
    setNewsletterOptIn(newsletterOptIn: $newsletterOptIn) {
      id
      ... on Individual {
        newsletterOptIn
      }
    }
  }
`;

const GroupSettings = _ref => {
  let {
    accounts,
    group,
    title
  } = _ref,
      boxProps = _objectWithoutProperties(_ref, _excluded);

  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();

  const handleGroupSettings = () => router.push(`${router.asPath}/${group}`);

  const activitySubscriptions = lodash_compact__WEBPACK_IMPORTED_MODULE_1___default()(lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default()(accounts.map(account => account.activitySubscriptions)));

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, _objectSpread(_objectSpread({}, boxProps), {}, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
      alignItems: "center",
      justifyContent: "space-between",
      children: [title, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.700",
        display: ['none', 'block'],
        children: activitySubscriptions.length === 0 ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "GroupSettings.NoActivitySubscriptions",
          defaultMessage: [{
            "type": 0,
            "value": "You are receiving all notifications"
          }]
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "GroupSettings.SomeActivitySubscriptions",
          defaultMessage: [{
            "type": 0,
            "value": "Some notifications are turned off"
          }]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, {
      mt: 3,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
        alignItems: ['flex-start', 'center'],
        justifyContent: "space-between",
        flexWrap: "wrap",
        gap: "8px",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
          alignItems: "center",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledTag__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
            variant: "rounded",
            fontSize: "11px",
            lineHeight: "16px",
            backgroundColor: "black.50",
            border: "1px solid #C3C6CB",
            mr: 2,
            p: "4px 8px",
            children: accounts.slice(0, 5).map(account => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP, {
              collective: account,
              radius: 16,
              mr: "6px"
            }, account.id))
          }), accounts.length - 5 > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "14px",
            lineHeight: "20px",
            color: "black.700",
            children: ["(", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "nMore",
              defaultMessage: [{
                "type": 1,
                "value": "n"
              }, {
                "type": 0,
                "value": " more"
              }],
              values: {
                n: accounts.length - 5
              }
            }), ")"]
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          buttonStyle: "primary",
          buttonSize: "tiny",
          onClick: handleGroupSettings,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "GroupSettings.Show",
            defaultMessage: [{
              "type": 0,
              "value": "Show group settings"
            }]
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, {
        display: ['block', 'none'],
        mt: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          fontSize: "12px",
          lineHeight: "18px",
          color: "black.700",
          children: activitySubscriptions.length === 0 ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "GroupSettings.NoActivitySubscriptions",
            defaultMessage: [{
              "type": 0,
              "value": "You are receiving all notifications"
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "GroupSettings.SomeActivitySubscriptions",
            defaultMessage: [{
              "type": 0,
              "value": "Some notifications are turned off"
            }]
          })
        })
      })]
    })]
  }));
};

const NotificationsSettings = ({
  account,
  subpath
}) => {
  const {
    data,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(userActivitySubscriptionsQuery, {
    variables: {
      id: account.id
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  });
  const [setNewsletterOptIn, {
    loading: setNewsletterOptInLoading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useMutation)(setNewsletterOptInMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  });
  const accounts = data?.account.memberOf.nodes.map(member => member.account) || [];
  const hosts = accounts?.filter(a => !!a.host);
  const orgs = accounts?.filter(a => a.type === 'ORGANIZATION' && !a.host);
  const collectives = accounts?.filter(a => a.type === 'COLLECTIVE');
  const backedAccounts = data?.account.backerOf.nodes.map(member => member.account) // Remove accounts already listed in the advanced settings section
  .filter(backedAccount => !accounts.some(account => account.id === backedAccount.id)) || [];
  const view = subpath?.[0];

  if (Object.values(GROUP_VIEWS).includes(view)) {
    const titles = {
      [GROUP_VIEWS.COLLECTIVES]: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "NotificationsSettings.Activity.List.CollectivesSubtitle",
        defaultMessage: [{
          "type": 0,
          "value": "Collectives you manage"
        }]
      }),
      [GROUP_VIEWS.ORGANIZATIONS]: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "NotificationsSettings.Activity.List.OrganizationsSubtitle",
        defaultMessage: [{
          "type": 0,
          "value": "Organizations you manage"
        }]
      }),
      [GROUP_VIEWS.BACKED]: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "NotificationsSettings.Updates.CollectivesSupported",
        defaultMessage: [{
          "type": 0,
          "value": "Collectives you support"
        }]
      })
    };
    const accountGroups = {
      [GROUP_VIEWS.COLLECTIVES]: collectives,
      [GROUP_VIEWS.ORGANIZATIONS]: orgs,
      [GROUP_VIEWS.BACKED]: backedAccounts
    };
    const roleLabel = view === GROUP_VIEWS.BACKED ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
      id: "NotificationSettings.Label.Backer",
      defaultMessage: [{
        "type": 0,
        "value": "Backer"
      }]
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
      id: "AdminPanel.button",
      defaultMessage: [{
        "type": 0,
        "value": "Admin"
      }]
    });
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_GroupView__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
      accounts: accountGroups[view],
      title: titles[view],
      advancedSettings: view !== GROUP_VIEWS.BACKED,
      roleLabel: roleLabel
    });
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
      fontSize: "24px",
      fontWeight: "700",
      lineHeight: "32px",
      mb: 3,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "NotificationsSettings.Title",
        defaultMessage: [{
          "type": 0,
          "value": "Notification Settings"
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
      lineHeight: "20px",
      letterSpacing: "0px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "NotificationsSettings.Descripion",
        defaultMessage: [{
          "type": 0,
          "value": "We will always let you know about important changes, but you can customize other settings here. Manage email notifications for your individual profile as well as the collectives and organizations you are part of."
        }]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      mt: 4,
      p: "24px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
        fontSize: "18px",
        fontWeight: "700",
        lineHeight: "26px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "NotificationsSettings.NecessaryNotifications.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Necessary notifications"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
        lineHeight: "20px",
        letterSpacing: "0px",
        mt: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "NotificationsSettings.NecessaryNotifications.Description",
          defaultMessage: [{
            "type": 0,
            "value": "There are some notifications we are required to send you, and they can't be opted out of."
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        my: "24px"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(NecessaryNotificationsList, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.ToSUpdates",
            defaultMessage: [{
              "type": 0,
              "value": "Updates on our terms of service"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.MagicLink",
            defaultMessage: [{
              "type": 0,
              "value": "Magic link login"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.EmailUpdate",
            defaultMessage: [{
              "type": 0,
              "value": "Email address update"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.HostMessages",
            defaultMessage: [{
              "type": 0,
              "value": "Communications from your hosts"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.Receipts",
            defaultMessage: [{
              "type": 0,
              "value": "Receipts of your contributions"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.PaymentIssues",
            defaultMessage: [{
              "type": 0,
              "value": "Payment and payment method issues"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.NecessaryNotifications.Expenses",
            defaultMessage: [{
              "type": 0,
              "value": "Recurring and requested expenses"
            }]
          })
        })]
      })]
    }), loading ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        mt: 4,
        width: "100%",
        height: 300,
        borderRadius: "8px"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        mt: 4,
        width: "100%",
        height: 200,
        borderRadius: "8px"
      })]
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
      children: [accounts.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        mt: 4,
        p: "24px",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.Activity.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Notifications regarding your activity"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          lineHeight: "20px",
          letterSpacing: "0px",
          mt: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.Activity.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Notification settings about the profiles you administer."
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
          my: "24px"
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.Activity.List.Title",
            defaultMessage: [{
              "type": 0,
              "value": "What you are following:"
            }]
          })
        }), hosts.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, {
          mt: 3,
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "NotificationsSettings.Activity.List.HostSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Collective you host"
              }]
            }), ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__/* .Span */ .Dr, {
              fontSize: "14px",
              fontWeight: "400",
              lineHeight: "20px",
              color: "black.700",
              children: ["(", hosts.length || 0, ")"]
            })]
          }), hosts.map(a => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_CollectiveSettings__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            account: a,
            advancedSettings: true,
            mt: 3
          }, a.id))]
        }), collectives.length > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(GroupSettings, {
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "NotificationsSettings.Activity.List.CollectivesSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives you manage"
              }]
            })
          }),
          accounts: collectives,
          group: GROUP_VIEWS.COLLECTIVES,
          mt: 4
        }), orgs.length > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(GroupSettings, {
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "NotificationsSettings.Activity.List.OrganizationsSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Organizations you manage"
              }]
            })
          }),
          accounts: orgs,
          group: GROUP_VIEWS.ORGANIZATIONS,
          mt: 4
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        mt: 4,
        p: "24px",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.Updates.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Updates about the platform and Collectives you support"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
          lineHeight: "20px",
          letterSpacing: "0px",
          mt: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "NotificationsSettings.Updates.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Notifications about us, news we want to share with you related to our activities and the development of the platform."
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
          my: "24px"
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Box */ .xu, {
          mt: 3,
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
            alignItems: "center",
            justifyContent: "space-between",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontSize: "15px",
              fontWeight: "500",
              lineHeight: "22px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
                id: "NotificationsSettings.Updates.Newsletter",
                defaultMessage: [{
                  "type": 0,
                  "value": "Receive the Open Collective newsletter (monthly)"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_InputSwitch__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
              name: `newsletter-switch`,
              checked: data?.account?.newsletterOptIn,
              isLoading: setNewsletterOptInLoading,
              onChange: event => setNewsletterOptIn({
                variables: {
                  newsletterOptIn: event.target.checked
                }
              })
            })]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            width: "100%",
            mt: 3,
            borderStyle: "dashed"
          })]
        }), backedAccounts.length > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(GroupSettings, {
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "NotificationsSettings.Updates.CollectivesSupported",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives you support"
              }]
            })
          }),
          accounts: backedAccounts,
          group: GROUP_VIEWS.BACKED,
          mt: 3
        })]
      })]
    })]
  });
};

NotificationsSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "NotificationsSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "subpath": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NotificationsSettings);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 35127:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24317);
/* harmony import */ var _orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79258);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_3__]);
_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];






const FinancialContributions = ({
  hostSlug
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
    status: _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_2__/* .ORDER_STATUS.PENDING */ .D.PENDING,
    accountSlug: hostSlug,
    title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
      id: "PendingContributions",
      defaultMessage: [{
        "type": 0,
        "value": "Pending Contributions"
      }]
    }),
    showPlatformTip: true,
    canCreatePendingOrder: true
  });
};

FinancialContributions.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FinancialContributions",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FinancialContributions);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 90331:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16159);
/* harmony import */ var _PreviewModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43119);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97274);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(93150);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);











const ReceiptTemplateForm = ({
  showTipForDefaultTitle,
  value,
  onChange,
  placeholders,
  template
}) => {
  const [showPreview, setShowPreview] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Label */ .__, {
      htmlFor: `receipt-title-${template}`,
      color: "black.800",
      fontSize: "16px",
      fontWeight: 700,
      lineHeight: "24px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "tOMmos",
        defaultMessage: [{
          "type": 0,
          "value": "Receipt title"
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP, {
      id: `receipt-title-${template}`,
      placeholder: placeholders.title,
      defaultValue: value.title,
      onChange: e => onChange(e.target.value, null),
      width: "100%",
      maxWidth: 414,
      mt: "6px"
    }), showTipForDefaultTitle && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
      mt: "6px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "DsfNxu",
        defaultMessage: [{
          "type": 0,
          "value": "Keep this field empty to use the default title: "
        }, {
          "type": 1,
          "value": "receiptTitlePlaceholder"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          receiptTitlePlaceholder: placeholders.title
        }
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Flex */ .kC, {
      justifyContent: "space-between",
      flexDirection: ['column', 'row'],
      pt: "26px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Label */ .__, {
        htmlFor: `custom-message-${template}`,
        color: "black.800",
        fontSize: "16px",
        fontWeight: 700,
        lineHeight: "24px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "+jDZdn",
          defaultMessage: [{
            "type": 0,
            "value": "Custom Message"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
        buttonStyle: "secondary",
        buttonSize: "tiny",
        maxWidth: "78px",
        pt: "4px",
        pb: "4px",
        pl: "14px",
        pr: "14px",
        height: "24px",
        onClick: () => setShowPreview(true),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, {
          fontSize: "13px",
          fontWeight: 500,
          lineHeight: "16px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
            id: "TJo5E6",
            defaultMessage: [{
              "type": 0,
              "value": "Preview"
            }]
          })
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
      id: `custom-message-${template}`,
      placeholder: placeholders.info,
      defaultValue: value.info,
      onChange: e => onChange(null, e.target.value),
      width: "100%",
      height: "150px",
      fontSize: "13px",
      mt: "14px",
      mb: "23px"
    }), showPreview && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_PreviewModal__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
      heading: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "F21ZZ6",
        defaultMessage: [{
          "type": 0,
          "value": "Receipt Preview"
        }]
      }),
      onClose: () => setShowPreview(false),
      previewImage: "/static/images/invoice-title-preview.jpg",
      imgHeight: "548.6px",
      imgWidth: "667px"
    })]
  });
};

ReceiptTemplateForm.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ReceiptTemplateForm",
  "props": {
    "showTipForDefaultTitle": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "title": {
            "name": "string",
            "required": false
          },
          "info": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "placeholders": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "template": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ReceiptTemplateForm);

/***/ }),

/***/ 51283:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51858);
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_truncate__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_material_Edit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10274);
/* harmony import */ var _styled_icons_material_Edit__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_Edit__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_allowed_features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99708);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82525);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(98216);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(32651);
/* harmony import */ var _lib_i18n_member_role__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(66465);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(25896);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(69078);
/* harmony import */ var _edit_collective_sections_team_EditMemberModal__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(99250);
/* harmony import */ var _edit_collective_sections_team_InviteMemberModal__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(85796);
/* harmony import */ var _edit_collective_sections_team_queries__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(79184);
/* harmony import */ var _edit_collective_sections_team_ResendMemberInviteBtn__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(39779);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(92129);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(53169);
/* harmony import */ var _MemberRoleDescription__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(10878);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(173);
/* harmony import */ var _StyledRoundButton__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(90012);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(36422);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_edit_collective_sections_team_EditMemberModal__WEBPACK_IMPORTED_MODULE_16__, _edit_collective_sections_team_InviteMemberModal__WEBPACK_IMPORTED_MODULE_17__, _edit_collective_sections_team_ResendMemberInviteBtn__WEBPACK_IMPORTED_MODULE_19__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_30__]);
([_edit_collective_sections_team_EditMemberModal__WEBPACK_IMPORTED_MODULE_16__, _edit_collective_sections_team_InviteMemberModal__WEBPACK_IMPORTED_MODULE_17__, _edit_collective_sections_team_ResendMemberInviteBtn__WEBPACK_IMPORTED_MODULE_19__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_30__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


































const MemberContainer = styled_components__WEBPACK_IMPORTED_MODULE_6___default()(_Container__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z).withConfig({
  displayName: "Team__MemberContainer",
  componentId: "sc-h5dpn4-0"
})(["display:block;min-width:164px;background:white;width:170px;height:270px;border-radius:8px;border:1px solid #c0c5cc;"]);
const InviteNewCard = styled_components__WEBPACK_IMPORTED_MODULE_6___default()(MemberContainer).withConfig({
  displayName: "Team__InviteNewCard",
  componentId: "sc-h5dpn4-1"
})(["border:1px dashed #c0c5cc;cursor:pointer;"]);
/** A container to center the logo above a horizontal bar */

const MemberLogoContainer = styled_components__WEBPACK_IMPORTED_MODULE_6___default()(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu).withConfig({
  displayName: "Team__MemberLogoContainer",
  componentId: "sc-h5dpn4-2"
})(["display:flex;justify-content:center;align-items:center;width:100%;border-top:1px solid #e6e8eb;"]);

const MemberCard = ({
  member,
  account,
  index,
  nbAdmins,
  refetch
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.useIntl)();
  const [showEditModal, setShowEditModal] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  const isInvitation = member.__typename === 'MemberInvitation';
  const isInherited = member.inherited;
  const memberCollective = member.account;
  const collectiveId = memberCollective.id;
  const memberKey = member.id ? `member-${member.id}` : `collective-${collectiveId}`;
  const isAdmin = member.role === _lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ADMIN */ .Z.ADMIN;
  const isLastAdmin = isAdmin && member.id && nbAdmins <= (account.host?.policies?.COLLECTIVE_MINIMUM_ADMINS?.numberOfAdmins || 1);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(MemberContainer, {
    position: "relative",
    "data-cy": `member-${index}`,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
      position: "absolute",
      top: "1rem",
      right: "1rem",
      children: [showEditModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_edit_collective_sections_team_EditMemberModal__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        intl: intl,
        member: member,
        collective: account,
        cancelHandler: () => setShowEditModal(false),
        onEdit: refetch,
        isLastAdmin: isLastAdmin,
        canRemove: !isLastAdmin
      }, `member-edit-modal-${index}-${memberKey}`), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z, {
        noTooltip: !isInherited,
        content: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "MemberEdit.Disable.Inherited",
          defaultMessage: [{
            "type": 0,
            "value": "This member is inherited from "
          }, {
            "type": 1,
            "value": "parentCollectiveName"
          }, {
            "type": 0,
            "value": " and cannot be removed."
          }],
          values: {
            parentCollectiveName: account.parent?.name
          }
        }),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledRoundButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
          onClick: () => setShowEditModal(true),
          size: 26,
          disabled: isInherited,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_styled_icons_material_Edit__WEBPACK_IMPORTED_MODULE_4__.Edit, {
            height: 16
          })
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Flex */ .kC, {
      flexDirection: "column",
      alignItems: "center",
      mb: 2,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(MemberLogoContainer, {
        mt: 50,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, {
          mt: -28,
          src: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(memberCollective, 'imageUrl'),
          radius: 56
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        fontSize: "14px",
        lineHeight: "20px",
        m: 2,
        textAlign: "center",
        children: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(memberCollective, 'name')
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledTag__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
        textTransform: "uppercase",
        display: "block",
        mb: 2,
        closeButtonProps: false,
        children: (0,_lib_i18n_member_role__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(intl, lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(member, 'role'))
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        fontSize: "10px",
        lineHeight: "14px",
        fontWeight: 400,
        color: "#9D9FA3",
        mb: 2,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "user.since.label",
          defaultMessage: [{
            "type": 0,
            "value": "Since"
          }]
        }), ":", ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedDate, {
          value: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(member, 'since')
        })]
      }), !isInvitation && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
        mb: 4,
        overflow: "hidden",
        height: 32,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
          fontSize: "11px",
          lineHeight: "16px",
          mx: 2,
          fontWeight: 400,
          children: lodash_truncate__WEBPACK_IMPORTED_MODULE_0___default()(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(member, 'description'), {
            length: 30
          })
        })
      }), isInvitation && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
          mb: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z, {
            content: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "members.pending.details",
              defaultMessage: [{
                "type": 0,
                "value": "This person has not accepted their invitation yet"
              }]
            }),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledTag__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
              "data-cy": "member-pending-tag",
              textTransform: "uppercase",
              display: "block",
              type: "info",
              closeButtonProps: false,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
                id: "Pending",
                defaultMessage: [{
                  "type": 0,
                  "value": "Pending"
                }]
              })
            })
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_edit_collective_sections_team_ResendMemberInviteBtn__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          member: member,
          collective: account
        })]
      })]
    })]
  }, `member-${index}-${memberKey}-${account.id}`);
};

const ChildrenCollectiveSection = ({
  account,
  refetch
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        fontSize: "16px",
        mt: 4,
        children: account.name
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Grid */ .rj, {
      mt: 3,
      gridGap: 20,
      gridTemplateColumns: "repeat(auto-fill, 164px)",
      flexGrow: "1",
      gap: "2px",
      justifyContent: ['center', null, 'start'],
      children: account.members.nodes.map((m, idx) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(MemberCard, {
        index: idx,
        member: m,
        account: account,
        refetch: refetch
      }, `${m.id}-${account.id}`))
    })]
  });
};

const Team = props => {
  const [showInviteModal, setShowInviteModal] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.useIntl)();
  const {
    loading,
    data,
    refetch,
    error
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(_edit_collective_sections_team_queries__WEBPACK_IMPORTED_MODULE_18__/* .teamSectionQuery */ .b, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_11__/* .API_V2_CONTEXT */ .T,
    variables: {
      collectiveSlug: props.account.slug,
      account: {
        slug: props.account.slug
      }
    }
  });

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {});
  } else if (error) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
      type: "error",
      withIcon: true,
      fontSize: "13px",
      children: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_10__/* .i18nGraphqlException */ .t2)(intl, error)
    });
  } else if (data?.account?.isFrozen) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
      type: "warning",
      fontSize: "13px",
      withIcon: true,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "jcAKng",
        defaultMessage: [{
          "type": 0,
          "value": "This account is currently frozen, its team members therefore cannot be edited."
        }]
      }), ' ', (0,_lib_allowed_features__WEBPACK_IMPORTED_MODULE_7__/* .isFeatureEnabled */ .cr)(data.account.host, _lib_allowed_features__WEBPACK_IMPORTED_MODULE_7__/* .FEATURES.CONTACT_FORM */ .h6.CONTACT_FORM) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "KxBiJC",
        defaultMessage: [{
          "type": 0,
          "value": "Please "
        }, {
          "type": 8,
          "value": "ContactLink",
          "children": [{
            "type": 0,
            "value": "contact"
          }]
        }, {
          "type": 0,
          "value": " your fiscal host for more details."
        }],
        values: {
          ContactLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_21__/* .getI18nLink */ .fw)({
            href: `${(0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_13__/* .getCollectivePageRoute */ .x0)(data.account.host)}/contact`
          })
        }
      })]
    });
  }

  const host = data?.account?.host;
  const members = [...(data?.account?.members?.nodes || []), ...(data?.memberInvitations || [])];
  const nbAdmins = members.filter(m => m.role === _lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ADMIN */ .Z.ADMIN && m.id).length;
  const childrenAccountsWithMembers = data?.account?.childrenAccounts?.nodes?.filter(child => child.members?.nodes?.length > 0) || [];
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        fontSize: "24px",
        fontWeight: "700",
        lineHeight: "32px",
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "ContributorsFilter.Core",
          defaultMessage: [{
            "type": 0,
            "value": "Team"
          }]
        })
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
      children: [[_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_8__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_8__/* .CollectiveType.FUND */ .eV.FUND].includes(props.account.type) && Boolean(host?.policies?.COLLECTIVE_MINIMUM_ADMINS?.numberOfAdmins) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        lineHeight: "20px",
        letterSpacing: "normal",
        mt: 3,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "XW00me",
          defaultMessage: [{
            "type": 0,
            "value": "Your host requires that Collectives have "
          }, {
            "type": 6,
            "value": "numberOfAdmins",
            "options": {
              "one": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " active administrator"
                }]
              },
              "other": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " active administrators"
                }]
              }
            },
            "offset": 0,
            "pluralType": "cardinal"
          }, {
            "type": 0,
            "value": "."
          }],
          values: host.policies.COLLECTIVE_MINIMUM_ADMINS
        }), host?.policies?.COLLECTIVE_MINIMUM_ADMINS.freeze && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
          children: ["\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "kOVj5R",
            defaultMessage: [{
              "type": 0,
              "value": "In case of a shortfall, your collective will be frozen until the minimum required administrators are added."
            }],
            values: host.policies.COLLECTIVE_MINIMUM_ADMINS
          })]
        })]
      }), host?.policies?.COLLECTIVE_MINIMUM_ADMINS && nbAdmins < host.policies.COLLECTIVE_MINIMUM_ADMINS.numberOfAdmins && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
        type: "error",
        my: 3,
        fontSize: "13px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "vuvLi/",
          defaultMessage: [{
            "type": 0,
            "value": "Your collective doesn’t meet the requirements of having a minimum of "
          }, {
            "type": 6,
            "value": "numberOfAdmins",
            "options": {
              "one": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " administrator"
                }]
              },
              "other": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " administrators"
                }]
              }
            },
            "offset": 0,
            "pluralType": "cardinal"
          }, {
            "type": 0,
            "value": ". Add more administrators to comply with your host’s policy."
          }],
          values: host.policies.COLLECTIVE_MINIMUM_ADMINS
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
        mt: 3,
        borderColor: "black.200",
        flex: "1 1"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        as: "ul",
        fontSize: "14px",
        lineHeight: "18px",
        mt: 4,
        children: [_lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ADMIN */ .Z.ADMIN, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__/* ["default"].MEMBER */ .Z.MEMBER, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT].map(role => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Box */ .xu, {
          as: "li",
          mb: 2,
          children: (0,_MemberRoleDescription__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)({
            role
          })
        }, role))
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Grid */ .rj, {
      mt: 4,
      gridGap: 20,
      gridTemplateColumns: "repeat(auto-fill, 164px)",
      flexGrow: "1",
      gap: "2px",
      justifyContent: ['center', null, 'start'],
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(InviteNewCard, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Flex */ .kC, {
          alignItems: "center",
          justifyContent: "center",
          height: "100%",
          onClick: () => setShowInviteModal(true),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Flex */ .kC, {
            flexDirection: "column",
            justifyContent: "center",
            alignItems: "center",
            height: "100%",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledRoundButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
              "data-cy": "invite-member-btn",
              buttonStyle: "dark",
              fontSize: 25,
              children: "+"
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
              mt: 3,
              color: "black.700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
                id: "editTeam.member.invite",
                defaultMessage: [{
                  "type": 0,
                  "value": "Invite Team Member"
                }]
              })
            })]
          })
        })
      }), members.map((m, idx) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(MemberCard, {
        index: idx,
        member: m,
        account: props.account,
        nbAdmins: nbAdmins,
        refetch: refetch
      }, `${m.id}-${props.account.id}`))]
    }), childrenAccountsWithMembers.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        fontSize: "18px",
        fontWeight: "700",
        lineHeight: "32px",
        mt: 5,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "OtherAdmins",
          defaultMessage: [{
            "type": 0,
            "value": "Other Admins"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_31__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "068S+6",
          defaultMessage: [{
            "type": 0,
            "value": "This collective has Events and Projects that hold members with privileged access roles outside your admin team."
          }]
        })
      }), childrenAccountsWithMembers.map(child => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(ChildrenCollectiveSection, {
        account: child,
        refetch: refetch
      }, child.id))]
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
      type: "error",
      withIcon: true,
      my: 3,
      children: error.message
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_20__/* .Flex */ .kC, {
      justifyContent: "center",
      flexWrap: "wrap",
      mt: 5,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Link__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
        href: `/${props.account.slug}`,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z, {
          mx: 2,
          minWidth: 200,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "ViewCollectivePage",
            defaultMessage: [{
              "type": 0,
              "value": "View Profile page"
            }]
          })
        })
      })
    }), showInviteModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_edit_collective_sections_team_InviteMemberModal__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
      intl: intl,
      collective: props.account,
      membersIds: members.map(m => m.id),
      cancelHandler: () => setShowInviteModal(false)
    })]
  });
};

Team.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Team"
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Team);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 94542:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24317);
/* harmony import */ var _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1808);
/* harmony import */ var _lib_i18n_payment_method_provider_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1059);
/* harmony import */ var _lib_i18n_payment_method_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72832);
/* harmony import */ var _lib_theme_helpers__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(13875);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(25896);
/* harmony import */ var _AutosizeText__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(81966);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69078);
/* harmony import */ var _DateTime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(95370);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(27596);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(92129);
/* harmony import */ var _LinkCollective__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97619);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(29242);
/* harmony import */ var _orders_OrderStatusTag__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(5455);
/* harmony import */ var _orders_ProcessOrderButtons__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(28374);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(51082);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(36422);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(90998);
/* harmony import */ var _TransactionSign__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(47924);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_orders_ProcessOrderButtons__WEBPACK_IMPORTED_MODULE_18__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_21__]);
([_orders_ProcessOrderButtons__WEBPACK_IMPORTED_MODULE_18__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_21__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



























const DetailColumnHeader = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "OrderBudgetItem__DetailColumnHeader",
  componentId: "sc-1kxgdhv-0"
})(["font-style:normal;font-weight:bold;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#c4c7cc;margin-bottom:2px;"]);
const ButtonsContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.attrs({
  'data-cy': 'order-actions'
}).withConfig({
  displayName: "OrderBudgetItem__ButtonsContainer",
  componentId: "sc-1kxgdhv-1"
})(["display:flex;flex-wrap:wrap;margin-top:8px;flex-grow:1;transition:opacity 0.05s;justify-content:flex-end;@media (max-width:40em){justify-content:center;}& > *:last-child{margin-right:0;}"]);
const OrderContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "OrderBudgetItem__OrderContainer",
  componentId: "sc-1kxgdhv-2"
})(["padding:16px 27px;@media (hover:hover){&:not(:hover):not(:focus-within) ", "{opacity:0.24;}}"], ButtonsContainer);

const OrderBudgetItem = ({
  isLoading,
  order,
  showPlatformTip,
  showAmountSign
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(OrderContainer, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
      justifyContent: "space-between",
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
        flex: "1",
        minWidth: "max(60%, 300px)",
        maxWidth: [null, '70%'],
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Box */ .xu, {
          mr: 3,
          children: isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            width: 40,
            height: 40
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LinkCollective__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
            collective: order.fromAccount,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, {
              collective: order.fromAccount,
              radius: 40
            })
          })
        }), isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          height: 60
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Box */ .xu, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
            as: _Link__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z,
            href: `${(0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_7__/* .getCollectivePageRoute */ .x0)(order.toAccount)}/orders/${order.legacyId}`,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_AutosizeText__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
              value: order.description,
              maxLength: 255,
              minFontSizeInPx: 12,
              maxFontSizeInPx: 16,
              lengthThreshold: 72,
              mobileRatio: 0.875,
              valueFormatter: _lib_theme_helpers__WEBPACK_IMPORTED_MODULE_25__/* .toPx */ .aR,
              children: ({
                value,
                fontSize
              }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.H3, {
                fontWeight: "500",
                lineHeight: "1.5em",
                textDecoration: "none",
                color: "black.900",
                fontSize: fontSize,
                "data-cy": "expense-title",
                children: value
              })
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
            mt: "5px",
            fontSize: "12px",
            color: "black.600",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "Order.fromTo",
              defaultMessage: [{
                "type": 0,
                "value": "for "
              }, {
                "type": 1,
                "value": "account"
              }, {
                "type": 0,
                "value": " from "
              }, {
                "type": 1,
                "value": "contributor"
              }],
              values: {
                contributor: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LinkCollective__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                  collective: order.fromAccount
                }),
                account: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LinkCollective__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                  collective: order.toAccount
                })
              }
            }), ' • ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_DateTime__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
              value: order.createdAt
            })]
          })]
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
        flexDirection: ['row', 'column'],
        mt: [3, 0],
        flexWrap: "wrap",
        alignItems: ['center', 'flex-end'],
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          my: 2,
          mr: [3, 0],
          minWidth: 100,
          justifyContent: "flex-end",
          "data-cy": "order-amount",
          children: isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            height: 19,
            width: 120
          }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
            flexDirection: "column",
            alignItems: ['flex-start', 'flex-end'],
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
              alignItems: "center",
              children: [showAmountSign && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_TransactionSign__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
                isCredit: true
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Span */ .Dr, {
                color: "black.500",
                fontSize: "16px",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
                  currency: order.amount.currency,
                  precision: 2,
                  amount: showPlatformTip && order.platformTipAmount?.valueInCents ? order.amount.valueInCents + order.platformTipAmount.valueInCents : order.amount.valueInCents
                })
              })]
            }), Boolean(showPlatformTip && order.platformTipAmount?.valueInCents) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
              fontSize: "10px",
              color: "black.500",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                id: "OrderBudgetItem.Tip",
                defaultMessage: [{
                  "type": 0,
                  "value": "(includes "
                }, {
                  "type": 1,
                  "value": "amount"
                }, {
                  "type": 0,
                  "value": " platform tip)"
                }],
                values: {
                  amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
                    amount: order.platformTipAmount.valueInCents,
                    currency: order.platformTipAmount.currency,
                    precision: 2,
                    amountStyles: null
                  })
                }
              })
            })]
          })
        }), isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          height: 20,
          width: 140,
          mt: 2
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_StyledTag__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
            variant: "rounded-left",
            fontSize: "10px",
            fontWeight: "500",
            mr: 1,
            textTransform: "uppercase",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "Order",
              defaultMessage: [{
                "type": 0,
                "value": "Order"
              }]
            }), " #", order.legacyId]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_orders_OrderStatusTag__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            status: order.status
          })]
        })]
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
      flexWrap: "wrap",
      justifyContent: "space-between",
      alignItems: "center",
      mt: 2,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
        flexWrap: "wrap",
        alignItems: "center",
        justifyContent: ['space-between', null, 'flex-start'],
        flexGrow: 1,
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          flexDirection: "column",
          justifyContent: "flex-end",
          mr: [3, 4],
          minHeight: 50,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(DetailColumnHeader, {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "paymentmethod.label",
              defaultMessage: [{
                "type": 0,
                "value": "Payment Method"
              }]
            })
          }), isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            height: 16
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Span */ .Dr, {
            fontSize: "11px",
            lineHeight: "16px",
            color: "black.700",
            children: order.paymentMethod?.type ? (0,_lib_i18n_payment_method_type__WEBPACK_IMPORTED_MODULE_6__/* .i18nPaymentMethodType */ .i)(intl, order.paymentMethod.type) : (0,_lib_i18n_payment_method_provider_type__WEBPACK_IMPORTED_MODULE_5__/* .i18nPaymentMethodProviderType */ .z)(intl, // TODO(paymentMethodType): migrate to service+type
            order.paymentMethod?.providerType || order.pendingContributionData?.paymentMethod || _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_4__/* .GQLV2_PAYMENT_METHOD_LEGACY_TYPES.BANK_TRANSFER */ .oy.BANK_TRANSFER)
          })]
        }), order?.status === 'PENDING' && order?.pendingContributionData && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
          children: [order.pendingContributionData.ponumber && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
            flexDirection: "column",
            justifyContent: "flex-end",
            mr: [3, 4],
            minHeight: 50,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(DetailColumnHeader, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
                content: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "3Il70r",
                  defaultMessage: [{
                    "type": 0,
                    "value": "External reference code for this order. This is usually a reference number from the contributor accounting system."
                  }]
                }),
                containerCursor: "default",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "Fields.PONumber",
                  defaultMessage: [{
                    "type": 0,
                    "value": "PO Number"
                  }]
                })
              })
            }), isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              height: 16
            }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Span */ .Dr, {
              fontSize: "11px",
              lineHeight: "16px",
              color: "black.700",
              children: `#${order.pendingContributionData.ponumber}`
            })]
          }), order.pendingContributionData.expectedAt && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
            flexDirection: "column",
            justifyContent: "flex-end",
            mr: [3, 4],
            minHeight: 50,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(DetailColumnHeader, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                id: "6srLb2",
                defaultMessage: [{
                  "type": 0,
                  "value": "Expected"
                }]
              })
            }), isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              height: 16
            }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Span */ .Dr, {
              fontSize: "11px",
              lineHeight: "16px",
              color: "black.700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_DateTime__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
                value: order.pendingContributionData.expectedAt,
                dateStyle: 'medium',
                timeStyle: undefined
              })
            })]
          })]
        })]
      }), order?.permissions && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(ButtonsContainer, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_orders_ProcessOrderButtons__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
          order: order,
          permissions: order.permissions
        })
      })]
    })]
  });
};

OrderBudgetItem.defaultProps = {
  showAmountSign: true
};
OrderBudgetItem.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrderBudgetItem",
  "props": {
    "showAmountSign": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onProcess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "showProcessActions": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "view": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'public'",
          "computed": false
        }, {
          "value": "'admin'",
          "computed": false
        }]
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          },
          "parent": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": true
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "order": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "legacyId": {
            "name": "number",
            "required": false
          },
          "description": {
            "name": "string",
            "required": true
          },
          "status": {
            "name": "enum",
            "computed": true,
            "value": "Object.values(ORDER_STATUS)",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          },
          "amount": {
            "name": "object",
            "required": true
          },
          "platformTipAmount": {
            "name": "object",
            "required": true
          },
          "permissions": {
            "name": "shape",
            "value": {
              "canReject": {
                "name": "bool",
                "required": false
              },
              "canMarkAsPaid": {
                "name": "bool",
                "required": false
              }
            },
            "required": false
          },
          "pendingContributionData": {
            "name": "shape",
            "value": {
              "ponumber": {
                "name": "number",
                "required": false
              },
              "expectedAt": {
                "name": "string",
                "required": false
              },
              "paymentMethod": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "paymentMethod": {
            "name": "shape",
            "value": {
              "providerType": {
                "name": "string",
                "required": false
              },
              "type": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "toAccount": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "description": "If available, this `account` will be used in place of the `collective`",
            "required": false
          },
          "fromAccount": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderBudgetItem);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 66831:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98492);
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _InputField__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99591);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var _CreateOrganizationForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(81830);
/* harmony import */ var _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(81832);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_InputField__WEBPACK_IMPORTED_MODULE_6__, _CreateOrganizationForm__WEBPACK_IMPORTED_MODULE_8__, _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_9__]);
([_InputField__WEBPACK_IMPORTED_MODULE_6__, _CreateOrganizationForm__WEBPACK_IMPORTED_MODULE_8__, _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












class CreateHostForm extends (react__WEBPACK_IMPORTED_MODULE_2___default().Component) {
  constructor(props) {
    super(props);
    const hostId = this.getDefaultHostId();
    this.state = {
      form: {
        hostId
      }
    };
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.defineMessages)({
      'hostType.label': {
        id: "host.types.label",
        defaultMessage: [{
          "type": 0,
          "value": "Select Host type"
        }]
      },
      'hostId.label': {
        id: "host.hostId.label",
        defaultMessage: [{
          "type": 0,
          "value": "Select Organization"
        }]
      },
      'host.types.user.label': {
        id: "host.types.user.label",
        defaultMessage: [{
          "type": 0,
          "value": "An individual (me)"
        }]
      },
      'host.types.organization.label': {
        id: "host.types.organization.label",
        defaultMessage: [{
          "type": 0,
          "value": "An Organization"
        }]
      },
      'organization.create': {
        id: "host.organization.create",
        defaultMessage: [{
          "type": 0,
          "value": "Create an Organization"
        }]
      }
    });
  }

  async createOrganization(org) {
    const organization = await this.props.createOrganization(org);
    this.setState(state => ({
      host: organization,
      form: _objectSpread(_objectSpread({}, state.form), {}, {
        hostId: organization.id
      })
    }));
  }

  handleChange(attr, value) {
    const {
      form
    } = this.state;
    form[attr] = value;
    this.setState({
      form
    });
  }

  getDefaultHostId() {
    return lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.props, 'organizations[0].id', 0);
  }

  getOrganizationsOptions() {
    const organizationsOptions = this.props.organizations.map(({
      name,
      id
    }) => ({
      label: name,
      value: id
    }));
    organizationsOptions.push({
      label: this.props.intl.formatMessage({
        id: "host.organization.create",
        defaultMessage: [{
          "type": 0,
          "value": "Create an Organization"
        }]
      }),
      value: 0
    });
    return organizationsOptions;
  }

  getInputFields() {
    const fields = [{
      name: 'hostId',
      type: 'select',
      options: this.getOrganizationsOptions(),
      value: this.state.form.hostId
    }];
    return fields.map(field => {
      if (this.messages[`${field.name}.label`]) {
        field.label = this.props.intl.formatMessage(this.messages[`${field.name}.label`]);
      }

      return field;
    });
  }

  getHost() {
    if (this.state.host) {
      return this.state.host;
    } else {
      return this.props.organizations.find(c => c.id === Number(this.state.form.hostId));
    }
  }

  render() {
    const host = this.getHost();

    const connectedAccounts = host && lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default()(host.connectedAccounts, 'service');

    const stripeAccount = connectedAccounts && connectedAccounts['stripe'] && connectedAccounts['stripe'][0];
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div", {
      className: "CreateHostForm",
      children: [this.getInputFields().map(field => (!field.when || field.when()) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
          width: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, _objectSpread(_objectSpread({}, field), {}, {
            onChange: value => this.handleChange(field.name, value)
          }))
        })
      }, `${field.name}.input`)), !host && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_CreateOrganizationForm__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          onChange: org => this.handleChange('organization', org)
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          buttonStyle: "primary",
          type: "submit",
          onClick: () => this.createOrganization(this.state.form.organization),
          className: "createOrganizationBtn",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "organization.create",
            defaultMessage: [{
              "type": 0,
              "value": "Create Organization"
            }]
          })
        })]
      }), host && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
        flexDirection: ['column', 'row', 'row'],
        justifyContent: "space-between",
        alignItems: "flex-end",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
          my: [3],
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            type: "submit",
            onClick: () => this.props.onSubmit(host),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "host.link",
              defaultMessage: [{
                "type": 0,
                "value": "Yes, use this Organization as the Fiscal Host"
              }]
            })
          })
        }), !stripeAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
          textAlign: "right",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_EditConnectedAccount__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            collective: host,
            service: "stripe"
          })
        })]
      })]
    });
  }

}

CreateHostForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "createOrganization",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "org",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "attr",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getDefaultHostId",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getOrganizationsOptions",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getInputFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getHost",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateHostForm",
  "props": {
    "organizations": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "userCollective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "createOrganization": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_router__WEBPACK_IMPORTED_MODULE_3__.withRouter)((0,react_intl__WEBPACK_IMPORTED_MODULE_4__.injectIntl)(CreateHostForm)));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 81422:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export addEditCollectiveConnectedAccountsData */
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59591);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97079);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _LoadingGrid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(19306);
/* harmony import */ var _CreateHostForm__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(66831);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CreateHostForm__WEBPACK_IMPORTED_MODULE_9__]);
_CreateHostForm__WEBPACK_IMPORTED_MODULE_9__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }











class CreateHostFormWithData extends (react__WEBPACK_IMPORTED_MODULE_2___default().Component) {
  constructor(props) {
    super(props);
    this.createOrganization = this.createOrganization.bind(this);
  }

  async createOrganization(CollectiveInputType) {
    this.setState({
      status: 'loading'
    });
    CollectiveInputType.type = 'ORGANIZATION';

    try {
      const res = await this.props.createCollective(CollectiveInputType);
      const collective = res.data.createCollective;
      return collective;
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .getErrorFromGraphqlException */ .H1)(err).message;
      this.setState({
        result: {
          error: errorMsg
        }
      });
      throw new Error(errorMsg);
    }
  }

  render() {
    const {
      data,
      collective
    } = this.props;
    const userCollective = data.Collective;

    if (!userCollective) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        py: 3,
        width: 1,
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_LoadingGrid__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {})
      });
    }

    const organizations = [];
    userCollective.memberOf.map(membership => {
      organizations.push(membership.collective);
    });
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_CreateHostForm__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      organizations: organizations,
      collective: collective,
      userCollective: userCollective,
      createOrganization: this.createOrganization,
      onSubmit: this.props.onSubmit
    });
  }

}

const editCollectiveConnectedAccountsQuery = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  query EditCollectiveConnectedAccounts($slug: String!) {
    Collective(slug: $slug) {
      id
      isHost
      slug
      memberOf(role: "ADMIN", type: "ORGANIZATION") {
        id
        collective {
          id
          slug
          name
          isHost
          createdAt
          imageUrl
          connectedAccounts {
            id
            service
            createdAt
            updatedAt
          }
        }
      }
      connectedAccounts {
        id
        service
        createdAt
        updatedAt
      }
    }
  }
`;
const addEditCollectiveConnectedAccountsData = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(editCollectiveConnectedAccountsQuery, {
  options: props => ({
    variables: {
      slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(props, 'LoggedInUser.collective.slug')
    }
  })
});
const editCollectiveCreateHostMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveCreateHost($collective: CollectiveInputType!) {
    createCollective(collective: $collective) {
      id
      slug
      name
      imageUrl
      createdAt
    }
  }
`;
const addEditCollectiveCreateHostMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(editCollectiveCreateHostMutation, {
  props: ({
    ownProps,
    mutate
  }) => ({
    createCollective: async CollectiveInputType => await mutate({
      variables: {
        collective: CollectiveInputType
      },
      update: (proxy, {
        data: {
          createCollective
        }
      }) => {
        const variables = {
          slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(ownProps, 'LoggedInUser.collective.slug')
        }; // Retrieve the query from the cache

        const data = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1___default()(proxy.readQuery({
          query: editCollectiveConnectedAccountsQuery,
          variables
        })); // Insert new Collective at the beginning


        const membership = {
          createdAt: createCollective.createdAt,
          id: Math.round(Math.random() * 10000000),
          __typename: 'MemberType',
          collective: _objectSpread(_objectSpread({}, createCollective), {}, {
            isHost: false,
            connectedAccounts: []
          })
        };
        data.Collective.memberOf.push(membership); // write data back for the query

        proxy.writeQuery({
          query: editCollectiveConnectedAccountsQuery,
          variables,
          data
        });
      }
    })
  })
});
const addGraphql = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__/* .compose */ .qC)(addEditCollectiveConnectedAccountsData, addEditCollectiveCreateHostMutation);
CreateHostFormWithData.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "createOrganization",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "CollectiveInputType",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CreateHostFormWithData",
  "props": {
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "createCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (addGraphql(CreateHostFormWithData));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 81830:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16159);
/* harmony import */ var _InputField__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99591);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_InputField__WEBPACK_IMPORTED_MODULE_3__]);
_InputField__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







class CreateOrganizationForm extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {
      form: {}
    };
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.defineMessages)({
      'order.organization.name': {
        id: "Fields.name",
        defaultMessage: [{
          "type": 0,
          "value": "Name"
        }]
      },
      'order.organization.website': {
        id: "Fields.website",
        defaultMessage: [{
          "type": 0,
          "value": "Website"
        }]
      },
      'order.organization.twitterHandle.description': {
        id: "tier.order.organization.twitterHandle.description",
        defaultMessage: [{
          "type": 0,
          "value": "optional"
        }]
      }
    });
  }

  handleChange(attr, value) {
    const {
      form
    } = this.state;
    form[attr] = value;
    this.setState({
      form
    });
    this.props.onChange(form);
  }

  render() {
    const {
      intl
    } = this.props;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("section", {
      className: "organizationDetailsForm",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Flex */ .kC, {
        flexWrap: "wrap",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Box */ .xu, {
          width: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
            className: "horizontal",
            type: "text",
            name: "organization_name",
            label: intl.formatMessage(this.messages['order.organization.name']),
            onChange: value => this.handleChange('name', value)
          })
        })
      }, "organization.name.input"), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Flex */ .kC, {
        flexWrap: "wrap",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Box */ .xu, {
          width: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
            className: "horizontal",
            type: "text",
            name: "organization_website",
            label: intl.formatMessage(this.messages['order.organization.website']),
            onChange: value => this.handleChange('website', value)
          })
        })
      }, "organization.website.input"), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Flex */ .kC, {
        flexWrap: "wrap",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_2__/* .Box */ .xu, {
          width: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
            className: "horizontal",
            type: "text",
            name: "organization_twitterHandle",
            pre: "@",
            label: "Twitter",
            help: intl.formatMessage(this.messages['order.organization.twitterHandle.description']),
            onChange: value => this.handleChange('twitterHandle', value)
          })
        })
      }, "organization.twitterHandle.input")]
    });
  }

}

CreateOrganizationForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "attr",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CreateOrganizationForm",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(CreateOrganizationForm));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 61364:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_9__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_9__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
const _excluded = ["virtualCard", "onSuccess", "onClose", "onDeleteRefetchQuery"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }













const deleteVirtualCardMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation deleteVirtualCard($virtualCard: VirtualCardReferenceInput!) {
    deleteVirtualCard(virtualCard: $virtualCard)
  }
`;

const DeleteVirtualCardModal = _ref => {
  let {
    virtualCard,
    onSuccess,
    onClose,
    onDeleteRefetchQuery
  } = _ref,
      modalProps = _objectWithoutProperties(_ref, _excluded);

  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_9__/* .useToasts */ .e1)();
  const refetchOptions = onDeleteRefetchQuery ? {
    refetchQueries: [onDeleteRefetchQuery],
    awaitRefetchQueries: true
  } : {};
  const [deleteVirtualCard, {
    loading: isBusy
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deleteVirtualCardMutation, _objectSpread({
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T
  }, refetchOptions));
  const formik = (0,formik__WEBPACK_IMPORTED_MODULE_2__.useFormik)({
    initialValues: {},

    async onSubmit() {
      try {
        await deleteVirtualCard({
          variables: {
            virtualCard: {
              id: virtualCard.id
            }
          }
        });
      } catch (e) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_9__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "qYxNsK",
            defaultMessage: [{
              "type": 0,
              "value": "Error deleting virtual card: "
            }, {
              "type": 1,
              "value": "error"
            }],
            values: {
              error: e.message
            }
          })
        });
        return;
      }

      onSuccess?.( /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "+RvjCt",
        defaultMessage: [{
          "type": 0,
          "value": "Card successfully deleted"
        }]
      }));
      handleClose();
    }

  });

  const handleClose = () => {
    onClose?.();
  };

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
    width: "382px",
    onClose: handleClose,
    trapFocus: true
  }, modalProps), {}, {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_7__/* .ModalHeader */ .xB, {
        onClose: handleClose,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "7nrRJ/",
          defaultMessage: [{
            "type": 0,
            "value": "Delete virtual card"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_7__/* .ModalBody */ .fe, {
        pt: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Text__WEBPACK_IMPORTED_MODULE_8__.P, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "TffQlZ",
            defaultMessage: [{
              "type": 0,
              "value": "You are about to delete the virtual card, are you sure you want to continue ?"
            }]
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_7__/* .ModalFooter */ .mz, {
        isFullWidth: true,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
            my: 1,
            minWidth: 140,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isBusy,
            type: "submit",
            textTransform: "capitalize",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "actions.delete",
              defaultMessage: [{
                "type": 0,
                "value": "Delete"
              }]
            })
          })
        })
      })]
    })
  }));
};

DeleteVirtualCardModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteVirtualCardModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onDeleteRefetchQuery": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "virtualCard": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};

/** @component */
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeleteVirtualCardModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 81832:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59969);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_capitalize__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65985);
/* harmony import */ var _lib_local_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(35427);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97079);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90998);
/* harmony import */ var _EditPayPalAccount__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(86180);
/* harmony import */ var _EditPrivacyAccount__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(77984);
/* harmony import */ var _EditTransferWiseAccount__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(38950);
/* harmony import */ var _EditTwitterAccount__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(97446);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_EditPayPalAccount__WEBPACK_IMPORTED_MODULE_9__, _EditPrivacyAccount__WEBPACK_IMPORTED_MODULE_10__, _EditTwitterAccount__WEBPACK_IMPORTED_MODULE_12__]);
([_EditPayPalAccount__WEBPACK_IMPORTED_MODULE_9__, _EditPrivacyAccount__WEBPACK_IMPORTED_MODULE_10__, _EditTwitterAccount__WEBPACK_IMPORTED_MODULE_12__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
















class EditConnectedAccount extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);
    this.state = {
      editMode: props.editMode || false,
      connectedAccount: props.connectedAccount
    };
    this.connect = this.connect.bind(this);
    this.disconnect = this.disconnect.bind(this);
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.defineMessages)({
      'collective.connectedAccounts.reconnect.button': {
        id: "collective.connectedAccounts.reconnect.button",
        defaultMessage: [{
          "type": 0,
          "value": "Reconnect"
        }]
      },
      'collective.connectedAccounts.disconnect.button': {
        id: "collective.connectedAccounts.disconnect.button",
        defaultMessage: [{
          "type": 0,
          "value": "Disconnect"
        }]
      },
      'collective.connectedAccounts.stripe.description': {
        id: "collective.create.connectedAccounts.stripe.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a Stripe account to start accepting financial contributions."
        }]
      },
      'collective.connectedAccounts.stripe.connected': {
        id: "collective.connectedAccounts.stripe.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Stripe account connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      },
      'collective.connectedAccounts.twitter.description': {
        id: "collective.connectedAccounts.twitter.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a Twitter account to automatically thank new financial contributors"
        }]
      },
      'collective.connectedAccounts.twitter.connected': {
        id: "collective.connectedAccounts.twitter.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Twitter account @"
        }, {
          "type": 1,
          "value": "username"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      },
      'collective.connectedAccounts.github.description': {
        id: "collective.connectedAccounts.github.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a GitHub account to verify your identity and add it to your profile"
        }]
      },
      'collective.connectedAccounts.github.connected': {
        id: "collective.connectedAccounts.github.connected",
        defaultMessage: [{
          "type": 0,
          "value": "GitHub account "
        }, {
          "type": 1,
          "value": "username"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      }
    });
    this.services = ['stripe', 'paypal', 'twitter', 'github', 'transferwise', 'privacy'];
  }

  connect(service) {
    const {
      collective,
      options
    } = this.props;

    if (service === 'github' || service === 'twitter') {
      const redirectUrl = `${(0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__/* .getWebsiteUrl */ .ls)()}/api/connected-accounts/${service}/oauthUrl`;
      const redirectUrlParams = new URLSearchParams({
        CollectiveId: collective.id
      });
      const accessToken = (0,_lib_local_storage__WEBPACK_IMPORTED_MODULE_4__/* .getFromLocalStorage */ .fp)(_lib_local_storage__WEBPACK_IMPORTED_MODULE_4__/* .LOCAL_STORAGE_KEYS.ACCESS_TOKEN */ .dA.ACCESS_TOKEN);

      if (accessToken) {
        redirectUrlParams.set('access_token', accessToken); // eslint-disable-line camelcase
      }

      window.location.href = `${redirectUrl}?${redirectUrlParams.toString()}`;
      return;
    }

    (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__/* .connectAccount */ .Yn)(collective.id, service, options).then(json => {
      return window.location.href = json.redirectUrl;
    }).catch(err => {
      // TODO: this should be reported to the user
      // eslint-disable-next-line no-console
      console.error(`>>> /api/connected-accounts/${service} error`, err);
    });
  }

  disconnect(service) {
    const {
      collective
    } = this.props;
    (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__/* .disconnectAccount */ .DL)(collective.id, service).then(json => {
      if (json.deleted === true) {
        this.setState({
          connectedAccount: null
        });
      }
    }).catch(err => {
      // TODO: this should be reported to the user
      // eslint-disable-next-line no-console
      console.error(`>>> /api/connected-accounts/${service}/disconnect error`, err);
    });
  }

  render() {
    const {
      intl,
      service,
      collective,
      variation
    } = this.props;
    const {
      connectedAccount
    } = this.state;
    let vars = {};

    if (connectedAccount) {
      vars = {
        username: connectedAccount.username,
        updatedAt: new Date(connectedAccount.updatedAt)
      };
    }

    if (service === 'transferwise') {
      // Notice we're passing props.connectedAccount to EditTransferWiseAccount
      // This happens because the component will take care of refetching data from
      // the DB to make sure it is displaying accurate information.
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_EditTransferWiseAccount__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        collective: collective,
        connectedAccount: this.props.connectedAccount,
        intl: intl
      });
    } else if (service === 'paypal') {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_EditPayPalAccount__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        collective: collective,
        connectedAccount: this.props.connectedAccount,
        variation: variation,
        intl: intl
      });
    } else if (service === 'privacy') {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_EditPrivacyAccount__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        collective: collective,
        connectedAccount: this.props.connectedAccount,
        intl: intl
      });
    }

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      width: "100%",
      children: [!connectedAccount && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_8__.P, {
          fontSize: "12px",
          color: "black.600",
          fontWeight: "normal",
          mb: 2,
          children: intl.formatMessage(this.messages[`collective.connectedAccounts.${service}.description`])
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          "data-cy": `connect-${service}-button`,
          buttonSize: "small",
          onClick: () => this.connect(service),
          mb: 2,
          children: intl.formatMessage({
            id: "C9HmCs",
            defaultMessage: [{
              "type": 0,
              "value": "Connect "
            }, {
              "type": 1,
              "value": "service"
            }]
          }, {
            service: lodash_capitalize__WEBPACK_IMPORTED_MODULE_0___default()(service)
          })
        })]
      }), connectedAccount && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        flexDirection: "column",
        width: "100%",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          children: intl.formatMessage(this.messages[`collective.connectedAccounts.${service}.connected`], vars)
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          mt: 1,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            buttonSize: "small",
            onClick: () => this.connect(service),
            children: intl.formatMessage(this.messages['collective.connectedAccounts.reconnect.button'])
          }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            buttonSize: "small",
            onClick: () => this.disconnect(service),
            children: intl.formatMessage(this.messages['collective.connectedAccounts.disconnect.button'])
          })]
        }), connectedAccount.service === 'twitter' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          my: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_EditTwitterAccount__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            collective: collective,
            connectedAccount: connectedAccount
          })
        })]
      })]
    });
  }

}

EditConnectedAccount.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "connect",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }],
    "returns": null
  }, {
    "name": "disconnect",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "EditConnectedAccount",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "connectedAccounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "options": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "editMode": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "service": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "variation": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_2__.injectIntl)(EditConnectedAccount));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 86180:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_trim__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75142);
/* harmony import */ var lodash_trim__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_trim__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _lib_graphql_queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51719);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(88705);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87262);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_10__]);
_StyledInputField__WEBPACK_IMPORTED_MODULE_10__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }














const createConnectedAccountMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation createConnectedAccount($connectedAccount: ConnectedAccountCreateInput!, $account: AccountReferenceInput!) {
    createConnectedAccount(connectedAccount: $connectedAccount, account: $account) {
      id
      settings
      service
      createdAt
      updatedAt
    }
  }
`;

const EditPayPalAccount = props => {
  const isReceiving = props.variation === 'RECEIVING';
  const mutationOptions = {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    refetchQueries: [{
      query: _lib_graphql_queries__WEBPACK_IMPORTED_MODULE_6__/* .editCollectivePageQuery */ .cd,
      variables: {
        slug: props.collective.slug
      }
    }],
    awaitRefetchQueries: true
  };
  const [connectedAccount, setConnectedAccount] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(props.connectedAccount);
  const [createConnectedAccount, {
    loading: isCreating,
    error: createError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(createConnectedAccountMutation, mutationOptions);
  const formik = (0,formik__WEBPACK_IMPORTED_MODULE_3__.useFormik)({
    initialValues: {
      token: '',
      clientId: ''
    },

    async onSubmit(values) {
      const {
        data: {
          createConnectedAccount: createdAccount
        }
      } = await createConnectedAccount({
        variables: {
          connectedAccount: {
            token: lodash_trim__WEBPACK_IMPORTED_MODULE_0___default()(values.token),
            clientId: lodash_trim__WEBPACK_IMPORTED_MODULE_0___default()(values.clientId),
            service: 'paypal'
          },
          account: {
            slug: props.collective.slug
          }
        }
      });
      setConnectedAccount(createdAccount);
    },

    validate(values) {
      const errors = {};

      if (!values.token) {
        errors.token = 'Required';
      }

      if (!values.clientId) {
        errors.clientId = 'Required';
      }

      return errors;
    }

  });

  if (!connectedAccount) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
        fontSize: "12px",
        color: "black.700",
        fontWeight: "normal",
        mb: 3,
        children: isReceiving ? null : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "collective.create.connectedAccounts.paypal.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a PayPal account to pay expenses with one click. ("
          }, {
            "type": 8,
            "value": "a",
            "children": [{
              "type": 0,
              "value": "Instructions"
            }]
          }, {
            "type": 0,
            "value": ")."
          }],
          values: {
            a: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_7__/* .getI18nLink */ .fw)({
              href: 'https://docs.opencollective.com/help/fiscal-hosts/payouts/payouts-with-paypal',
              openInNewTab: true
            })
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        name: "clientId",
        label: "Client ID",
        error: formik.touched.clientId && formik.errors.clientId || createError?.message,
        disabled: isCreating,
        children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
          type: "text"
        }, inputProps), {}, {
          onChange: formik.handleChange,
          value: formik.values.clientId,
          autoComplete: "off"
        }))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        mt: 2,
        name: "token",
        label: "Secret",
        error: formik.touched.token && formik.errors.token || createError?.message,
        disabled: isCreating,
        children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
          type: "text"
        }, inputProps), {}, {
          onChange: formik.handleChange,
          value: formik.values.token,
          autoComplete: "off"
        }))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        type: "submit",
        mt: 2,
        minWidth: 150,
        loading: isCreating,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'PayPal'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "collective.connectedAccounts.paypal.connected",
          defaultMessage: [{
            "type": 0,
            "value": "PayPal connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.updatedAt || connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
        mt: 3,
        fontStyle: "italic",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "ivhAav",
          defaultMessage: [{
            "type": 0,
            "value": "Please contact "
          }, {
            "type": 8,
            "value": "SupportLink",
            "children": [{
              "type": 0,
              "value": "support"
            }]
          }, {
            "type": 0,
            "value": " to disconnect PayPal."
          }],
          values: {
            SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_7__/* .I18nSignInLink */ .Kl
          }
        })
      })]
    });
  }
};

EditPayPalAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPayPalAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "variation": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditPayPalAccount);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 778:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1808);
/* harmony import */ var _lib_payment_method_label__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51515);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92129);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);











const EditPaymentMethod = ({
  collectiveSlug,
  paymentMethod,
  isSaving,
  nbActiveSubscriptions,
  needsConfirmation,
  onConfirm,
  onRemove
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const isStripeCreditCard = (0,_lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_3__/* .matchPm */ .VX)(paymentMethod, _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_3__/* .PAYMENT_METHOD_SERVICE.STRIPE */ .tp.STRIPE, _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_3__/* .PAYMENT_METHOD_TYPE.CREDITCARD */ .td.CREDITCARD);
  const canRemove = !nbActiveSubscriptions && isStripeCreditCard;
  const hasActions = canRemove || nbActiveSubscriptions || needsConfirmation;
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx("div", {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
      flexDirection: ['column-reverse', null, 'row'],
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_StyledFlex, {
        alignItems: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
          minWidth: "150px",
          as: "label",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "paymentMethod.typeSelect",
            values: {
              type: paymentMethod.type.toLowerCase()
            },
            defaultMessage: [{
              "type": 5,
              "value": "type",
              "options": {
                "giftcard": {
                  "value": [{
                    "type": 0,
                    "value": "Gift card"
                  }]
                },
                "creditcard": {
                  "value": [{
                    "type": 0,
                    "value": "Credit card"
                  }]
                },
                "prepaid": {
                  "value": [{
                    "type": 0,
                    "value": "Prepaid"
                  }]
                },
                "other": {
                  "value": []
                }
              }
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
            mb: 2,
            children: (0,_lib_payment_method_label__WEBPACK_IMPORTED_MODULE_4__/* .paymentMethodLabelWithIcon */ .FF)(intl, paymentMethod)
          }), Boolean(nbActiveSubscriptions) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "paymentMethod.activeSubscriptions",
            defaultMessage: [{
              "type": 1,
              "value": "n"
            }, {
              "type": 0,
              "value": " active "
            }, {
              "type": 6,
              "value": "n",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "recurring financial contribution"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "recurring financial contributions"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }],
            values: {
              n: nbActiveSubscriptions
            }
          })]
        })]
      }), hasActions && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_StyledFlex2, {
        mb: [3, 2, 0],
        justifyContent: ['center', null, 'flex-end'],
        alignItems: ['center', null, 'flex-start'],
        children: [Boolean(nbActiveSubscriptions) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Link__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          href: `/${collectiveSlug}/manage-contributions`,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            buttonSize: "medium",
            mx: 1,
            disabled: isSaving,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "paymentMethod.editSubscriptions",
              defaultMessage: [{
                "type": 0,
                "value": "Edit recurring financial contributions"
              }]
            })
          })
        }), needsConfirmation && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          disabled: isSaving,
          buttonStyle: "warningSecondary",
          buttonSize: "medium",
          onClick: () => onConfirm(paymentMethod),
          mx: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "paymentMethod.confirm",
            defaultMessage: [{
              "type": 0,
              "value": "Confirm"
            }]
          })
        }), canRemove && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          disabled: isSaving,
          buttonStyle: "standard",
          buttonSize: "medium",
          onClick: () => onRemove(paymentMethod),
          mx: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "Remove",
            defaultMessage: [{
              "type": 0,
              "value": "Remove"
            }]
          })
        })]
      })]
    })
  });
};

EditPaymentMethod.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPaymentMethod",
  "props": {
    "collectiveSlug": {
      "required": true,
      "tsType": {
        "name": "string"
      },
      "description": ""
    },
    "isSaving": {
      "required": true,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "needsConfirmation": {
      "required": true,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "nbActiveSubscriptions": {
      "required": true,
      "tsType": {
        "name": "number"
      },
      "description": ""
    },
    "paymentMethod": {
      "required": true,
      "tsType": {
        "name": "PaymentMethod"
      },
      "description": ""
    },
    "onConfirm": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(paymentMethod: PaymentMethod) => void",
        "signature": {
          "arguments": [{
            "name": "paymentMethod",
            "type": {
              "name": "PaymentMethod"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    },
    "onRemove": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(paymentMethod: PaymentMethod) => void",
        "signature": {
          "arguments": [{
            "name": "paymentMethod",
            "type": {
              "name": "PaymentMethod"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditPaymentMethod);

var _StyledFlex = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC).withConfig({
  displayName: "EditPaymentMethod___StyledFlex",
  componentId: "sc-1b2006h-0"
})({
  flexGrow: 1
});

var _StyledFlex2 = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC).withConfig({
  displayName: "EditPaymentMethod___StyledFlex2",
  componentId: "sc-1b2006h-1"
})({
  minWidth: 230
});

/***/ }),

/***/ 77984:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_trim__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75142);
/* harmony import */ var lodash_trim__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_trim__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _lib_graphql_queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51719);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87262);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_9__]);
_StyledInputField__WEBPACK_IMPORTED_MODULE_9__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }













const createConnectedAccountMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation createConnectedAccount($connectedAccount: ConnectedAccountCreateInput!, $account: AccountReferenceInput!) {
    createConnectedAccount(connectedAccount: $connectedAccount, account: $account) {
      id
      settings
      service
      createdAt
      updatedAt
    }
  }
`;
const deleteConnectedAccountMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation deleteConnectedAccount($connectedAccount: ConnectedAccountReferenceInput!) {
    deleteConnectedAccount(connectedAccount: $connectedAccount) {
      id
    }
  }
`;

const EditPrivacyAccount = props => {
  const mutationOptions = {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    refetchQueries: [{
      query: _lib_graphql_queries__WEBPACK_IMPORTED_MODULE_6__/* .editCollectivePageQuery */ .cd,
      variables: {
        slug: props.collective.slug
      }
    }],
    awaitRefetchQueries: true
  };
  const [connectedAccount, setConnectedAccount] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(props.connectedAccount);
  const [createConnectedAccount, {
    loading: isCreating,
    error: createError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(createConnectedAccountMutation, mutationOptions);
  const [deleteConnectedAccount, {
    loading: isDeleting
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(deleteConnectedAccountMutation, mutationOptions);
  const formik = (0,formik__WEBPACK_IMPORTED_MODULE_3__.useFormik)({
    initialValues: {
      token: ''
    },

    async onSubmit(values) {
      const {
        data: {
          createConnectedAccount: createdAccount
        }
      } = await createConnectedAccount({
        variables: {
          connectedAccount: {
            token: lodash_trim__WEBPACK_IMPORTED_MODULE_0___default()(values.token),
            service: 'privacy'
          },
          account: {
            slug: props.collective.slug
          }
        }
      });
      setConnectedAccount(createdAccount);
    },

    validate(values) {
      const errors = {};

      if (!values.token) {
        errors.token = 'Required';
      }

      return errors;
    }

  });

  const handleDelete = async () => {
    await deleteConnectedAccount({
      variables: {
        connectedAccount: {
          legacyId: props.connectedAccount.id
        }
      }
    });
    setConnectedAccount();
  };

  if (!connectedAccount) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        fontSize: "12px",
        color: "black.600",
        fontWeight: "normal",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "collective.create.connectedAccounts.privacy.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a Privacy account to emit Virtual Credit Cards to your collectives."
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        mt: 2,
        name: "token",
        label: "API Key",
        error: formik.touched.token && formik.errors.token || createError?.message,
        disabled: isCreating,
        children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
          type: "text"
        }, inputProps), {}, {
          onChange: formik.handleChange,
          value: formik.values.token
        }))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
        mt: 2,
        type: "submit",
        loading: isCreating,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'Privacy'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "collective.connectedAccounts.privacy.connected",
          defaultMessage: [{
            "type": 0,
            "value": "Privacy connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.updatedAt || connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          type: "submit",
          mt: 2,
          loading: isDeleting,
          onClick: handleDelete,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "collective.connectedAccounts.disconnect.button",
            defaultMessage: [{
              "type": 0,
              "value": "Disconnect"
            }]
          })
        })
      })]
    });
  }
};

EditPrivacyAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPrivacyAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "variation": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditPrivacyAccount);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 38950:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65985);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);
const _excluded = ["collective"];

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }











const EditTransferWiseAccount = _ref => {
  let {
    collective
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();
  const error = router.query?.error;
  const [connectedAccount, setConnectedAccount] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(props.connectedAccount);

  const handleConnect = async () => {
    const json = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__/* .connectAccount */ .Yn)(collective.id, 'transferwise');
    window.location.href = json.redirectUrl;
  };

  const handleDisconnect = async () => {
    const json = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__/* .disconnectAccount */ .DL)(collective.id, 'transferwise');

    if (json.deleted === true) {
      setConnectedAccount(null);
    }
  };

  if (!connectedAccount) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
        fontSize: "13px",
        color: "black.700",
        fontWeight: "normal",
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "collective.create.connectedAccounts.transferwise.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a Wise account to pay expenses with one click."
          }]
        })
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
        withIcon: true,
        type: "error",
        mb: 3,
        children: error
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        mt: 2,
        type: "submit",
        onClick: handleConnect,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'Wise'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "collective.connectedAccounts.transferwise.connected",
          defaultMessage: [{
            "type": 0,
            "value": "Wise connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
          type: "submit",
          mt: 2,
          onClick: handleDisconnect,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.connectedAccounts.disconnect.button",
            defaultMessage: [{
              "type": 0,
              "value": "Disconnect"
            }],
            buttonStyle: "dangerSecondary"
          })
        })
      })]
    });
  }
};

EditTransferWiseAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditTransferWiseAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditTransferWiseAccount);

/***/ }),

/***/ 97446:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59591);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _InputSwitch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96124);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87268);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(93150);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_11__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_11__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }













const DEFAULT_TWEETS = {
  newBacker: '{backerTwitterHandle} thank you for your contribution of {amount} 🙏 - it makes a difference!',
  tenBackers: `🎉 {collective} just reached 10 financial contributors! Thank you {topBackersTwitterHandles} 🙌
  Support them too!`,
  fiftyBackers: `🎉 {collective} just reached 50 financial contributors!! 🙌
  Support them too!`,
  oneHundred: `🎉 {collective} just reached 100 financial contributors!! 🙌
  Support them too!`,
  oneThousandBackers: `🎉 {collective} just reached 1,000 financial contributors!!! 🙌
  Support them too!`
};

class EditTwitterAccount extends (react__WEBPACK_IMPORTED_MODULE_2___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "getNotificationTypes", () => {
      const notificationTypes = [];

      if (this.props.collective.type === 'COLLECTIVE') {
        notificationTypes.push('newBacker', 'monthlyStats', 'updatePublished');
      }

      if (this.props.collective.isHost) {
        notificationTypes.push('tenBackers', 'oneHundredBackers', 'oneThousandBackers');
      }

      return notificationTypes;
    });

    this.onClick = this.onClick.bind(this);
    this.renderNotification = this.renderNotification.bind(this);
    this.handleChange = this.handleChange.bind(this);
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.defineMessages)({
      'newBacker.toggle.label': {
        id: "connectedAccounts.twitter.newBacker.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "New financial contributors"
        }]
      },
      'newBacker.toggle.description': {
        id: "connectedAccounts.twitter.newBacker.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever you have a new contributor that has provided a twitter username, a tweet will be sent from your connected account"
        }]
      },
      'monthlyStats.toggle.label': {
        id: "connectedAccounts.twitter.monthlyStats.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "Monthly stats"
        }]
      },
      'monthlyStats.toggle.description': {
        id: "connectedAccounts.twitter.monthlyStats.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "On the first of the month, automatically send a tweet with your latest stats (new and top contributors)"
        }]
      },
      'updatePublished.toggle.label': {
        id: "connectedAccounts.twitter.updatePublished.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "Update published"
        }]
      },
      'updatePublished.toggle.description': {
        id: "connectedAccounts.twitter.updatePublished.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Send a tweet whenever you publish an Update"
        }]
      },
      'tenBackers.toggle.label': {
        id: "connectedAccounts.twitter.tenBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "10 contributors"
        }]
      },
      'tenBackers.toggle.description': {
        id: "connectedAccounts.twitter.tenBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 10 contributors"
        }]
      },
      'oneHundredBackers.toggle.label': {
        id: "connectedAccounts.twitter.oneHundredBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "100 contributors"
        }]
      },
      'oneHundredBackers.toggle.description': {
        id: "connectedAccounts.twitter.oneHundredBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 100 contributors"
        }]
      },
      'oneThousandBackers.toggle.label': {
        id: "connectedAccounts.twitter.oneThousandBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "1,000 contributors"
        }]
      },
      'oneThousandBackers.toggle.description': {
        id: "connectedAccounts.twitter.oneThousandBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 1,000 contributors"
        }]
      }
    });

    const connectedAccount = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1___default()(props.connectedAccount);

    connectedAccount.settings = connectedAccount.settings || {};
    this.getNotificationTypes().forEach(notificationType => {
      connectedAccount.settings[notificationType] = connectedAccount.settings[notificationType] || {
        active: false
      };
    });
    this.state = {
      isSaving: false,
      isModified: false,
      connectedAccount
    };
  }

  async onClick() {
    this.setState({
      isSaving: true
    });

    try {
      const connectedAccount = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(this.state.connectedAccount, ['id', 'settings']);

      await this.props.editConnectedAccount({
        variables: {
          connectedAccount
        }
      });
      this.setState({
        isModified: false
      });
      this.props.addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_11__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: 'Twitter settings updated'
      });
    } finally {
      this.setState({
        isSaving: false
      });
    }
  }

  handleChange(notification, attr, val) {
    const connectedAccount = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_1___default()(this.state.connectedAccount);

    connectedAccount.settings[notification][attr] = val;
    this.setState({
      connectedAccount,
      isModified: true
    });
  }

  renderNotification(notificationType) {
    const {
      intl
    } = this.props;
    const {
      connectedAccount
    } = this.state;
    const defaultTweet = DEFAULT_TWEETS[notificationType];
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      margin: "16px 0",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        alignItems: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          flex: "0 1",
          flexBasis: ['100%', '25%'],
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__/* .Label */ .__, {
            htmlFor: `${notificationType}.active`,
            fontWeight: "700",
            fontSize: "14px",
            cursor: "pointer",
            children: intl.formatMessage(this.messages[`${notificationType}.toggle.label`])
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("div", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_InputSwitch__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            id: `${notificationType}.active`,
            name: `${notificationType}.active`,
            checked: connectedAccount.settings[notificationType].active,
            onChange: event => this.handleChange(notificationType, 'active', event.target.checked)
          })
        })]
      }), this.messages[`${notificationType}.toggle.description`] && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          flex: "0 1",
          flexBasis: [0, '25%']
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          flex: "1 1",
          flexBasis: ['100%', '75%'],
          pl: "12px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
            fontSize: "13px",
            color: "black.600",
            children: intl.formatMessage(this.messages[`${notificationType}.toggle.description`])
          })
        })]
      }), defaultTweet && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        mt: 2,
        flexWrap: "wrap",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          flex: "0 1",
          flexBasis: [0, '25%']
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          flex: "1 1",
          flexBasis: ['100%', '75%'],
          pl: "12px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            maxLength: 280,
            minHeight: "100px",
            width: "100%",
            showCount: true,
            name: `${notificationType}.tweet`,
            defaultValue: connectedAccount.settings[notificationType].tweet || '',
            placeholder: defaultTweet,
            onChange: event => this.handleChange(notificationType, 'tweet', event.target.value)
          })
        })]
      })]
    }, notificationType);
  }

  render() {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("details", {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("summary", {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__/* .Span */ .Dr, {
          fontSize: "15px",
          color: "blue.500",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "Settings",
            defaultMessage: [{
              "type": 0,
              "value": "Settings"
            }]
          })
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div", {
        children: [this.getNotificationTypes().map(this.renderNotification), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          flexWrap: "wrap",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
            width: [1, '25%']
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
            width: [1, '75%'],
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
              disabled: !this.state.isModified,
              buttonStyle: "primary",
              buttonSize: "small",
              onClick: this.onClick,
              loading: this.state.isSaving,
              minWidth: 100,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "save",
                defaultMessage: [{
                  "type": 0,
                  "value": "Save"
                }]
              })
            })
          })]
        })]
      })]
    });
  }

}

const editConnectedAccountMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditConnectedAccount($connectedAccount: ConnectedAccountInputType!) {
    editConnectedAccount(connectedAccount: $connectedAccount) {
      id
      settings
    }
  }
`;
const addEditConnectedAccountMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(editConnectedAccountMutation, {
  name: 'editConnectedAccount'
});
EditTwitterAccount.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getNotificationTypes",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onClick",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "notification",
      "type": null
    }, {
      "name": "attr",
      "type": null
    }, {
      "name": "val",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderNotification",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "notificationType",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "EditTwitterAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editConnectedAccount": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addToast": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_4__.injectIntl)(addEditConnectedAccountMutation((0,_ToastProvider__WEBPACK_IMPORTED_MODULE_11__/* .withToasts */ .CP)(EditTwitterAccount))));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 29025:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86069);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71564);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97274);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);


function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
















class EditUserEmailForm extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "state", {
      step: 'initial',
      newEmail: null,
      error: null,
      isSubmitting: false,
      isResendingConfirmation: false,
      isTouched: false
    });
  }

  componentDidMount() {
    this.loadInitialState();
  }

  componentDidUpdate(oldProps) {
    if (oldProps.data.LoggedInUser !== this.props.data.LoggedInUser) {
      this.loadInitialState();
    }
  }

  loadInitialState() {
    const {
      LoggedInUser
    } = this.props.data;

    if (!LoggedInUser) {
      return;
    }

    this.setState({
      step: LoggedInUser.emailWaitingForValidation ? 'success' : 'initial',
      newEmail: LoggedInUser.emailWaitingForValidation
    });
  }

  render() {
    const {
      data,
      updateUserEmail
    } = this.props;
    const {
      loading,
      LoggedInUser = {
        email: ''
      }
    } = data;
    const {
      step,
      newEmail,
      error,
      isSubmitting,
      isResendingConfirmation,
      isTouched
    } = this.state;
    const isValid = newEmail && (0,validator__WEBPACK_IMPORTED_MODULE_4__.isEmail)(newEmail);
    const isDone = step === 'already-sent' || step === 'success';
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      mb: 50,
      "data-cy": "EditUserEmailForm",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "User.EmailAddress",
          defaultMessage: [{
            "type": 0,
            "value": "Email address"
          }]
        })
      }), LoggedInUser ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        flexWrap: "wrap",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, {
          name: "email",
          type: "email",
          value: lodash_isNil__WEBPACK_IMPORTED_MODULE_0___default()(newEmail) ? LoggedInUser.email : newEmail,
          mr: 3,
          my: 2,
          disabled: !data.LoggedInUser || loading,
          onChange: e => {
            this.setState({
              step: 'form',
              error: null,
              newEmail: e.target.value,
              isTouched: true
            });
          },
          onBlur: () => {
            if (newEmail && !isValid) {
              this.setState({
                error: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                  id: "error.email.invalid",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Invalid email address"
                  }]
                })
              });
            }
          }
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          my: 2,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            minWidth: 180,
            disabled: !isTouched || !newEmail || !isValid || isDone,
            loading: isSubmitting,
            mr: 2,
            onClick: async () => {
              this.setState({
                isSubmitting: true
              });

              try {
                const {
                  data
                } = await updateUserEmail({
                  variables: {
                    email: newEmail
                  }
                });
                this.setState({
                  step: LoggedInUser.email === newEmail ? 'initial' : 'success',
                  error: null,
                  newEmail: data.updateUserEmail.emailWaitingForValidation || LoggedInUser.email,
                  isSubmitting: false,
                  isTouched: false
                });
              } catch (e) {
                this.setState({
                  error: e.message,
                  isSubmitting: false
                });
              }
            },
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "EditUserEmailForm.submit",
              defaultMessage: [{
                "type": 0,
                "value": "Confirm new email"
              }]
            })
          }), isDone && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            minWidth: 180,
            disabled: step === 'already-sent',
            loading: isResendingConfirmation,
            onClick: async () => {
              this.setState({
                isResendingConfirmation: true
              });

              try {
                await updateUserEmail({
                  variables: {
                    email: newEmail
                  }
                });
                this.setState({
                  isResendingConfirmation: false,
                  step: 'already-sent',
                  error: null
                });
              } catch (e) {
                this.setState({
                  error: e.message,
                  isResendingConfirmation: false
                });
              }
            },
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "EditUserEmailForm.reSend",
              defaultMessage: [{
                "type": 0,
                "value": "Re-send confirmation"
              }]
            })
          })]
        })]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
        height: 63
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr, {
        p: 2,
        color: "red.500",
        fontSize: "12px",
        children: error
      }), isDone && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          display: "inline-block",
          type: "success",
          fontSize: "12px",
          withIcon: true,
          mt: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "EditUserEmailForm.success",
            defaultMessage: [{
              "type": 0,
              "value": "An email with a confirmation link has been sent to "
            }, {
              "type": 1,
              "value": "email"
            }, {
              "type": 0,
              "value": ". Please click the link to validate your email address."
            }],
            values: {
              email: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("strong", {
                children: newEmail
              })
            }
          })
        })
      })]
    });
  }

}

const loggedInUserEmailQuery = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  query LoggedInUserEmail {
    LoggedInUser {
      id
      email
      emailWaitingForValidation
    }
  }
`;
const addLoggedInUserEmailData = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_2__.graphql)(loggedInUserEmailQuery, {
  options: {
    fetchPolicy: 'network-only'
  }
});
const updateUserEmailMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation UpdateUserEmail($email: String!) {
    updateUserEmail(email: $email) {
      id
      email
      emailWaitingForValidation
    }
  }
`;
const addUpdateUserEmailMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_2__.graphql)(updateUserEmailMutation, {
  name: 'updateUserEmail'
});
EditUserEmailForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "loadInitialState",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditUserEmailForm",
  "props": {
    "updateUserEmail": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "loading": {
            "name": "bool",
            "required": false
          },
          "LoggedInUser": {
            "name": "shape",
            "value": {
              "email": {
                "name": "string",
                "required": true
              },
              "emailWaitingForValidation": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "updateUserEmail": {
            "name": "shape",
            "value": {
              "emailWaitingForValidation": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (addUpdateUserEmailMutation(addLoggedInUserEmailData(EditUserEmailForm)));

/***/ }),

/***/ 70575:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24298);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76918);
/* harmony import */ var lodash_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_find__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59591);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _opencollective_taxes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(42558);
/* harmony import */ var _opencollective_taxes__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_opencollective_taxes__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _styled_icons_boxicons_regular_InfoCircle__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10054);
/* harmony import */ var _styled_icons_boxicons_regular_InfoCircle__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_InfoCircle__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _styled_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(38218);
/* harmony import */ var _styled_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82525);
/* harmony import */ var _lib_constants_currency__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(38198);
/* harmony import */ var _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(24317);
/* harmony import */ var _lib_constants_tiers_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(12568);
/* harmony import */ var _lib_constants_vat__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(2436);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(15078);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(97079);
/* harmony import */ var _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(13398);
/* harmony import */ var _admin_panel_sections_ActivityLog__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(13112);
/* harmony import */ var _admin_panel_sections_AuthorizedApps__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(8752);
/* harmony import */ var _admin_panel_sections_ForDevelopers__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(44102);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(69078);
/* harmony import */ var _CreateGiftCardsForm__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(10547);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(88705);
/* harmony import */ var _InputField__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(99591);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(92129);
/* harmony import */ var _orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(79258);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(51082);
/* harmony import */ var _actions_Archive__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(38952);
/* harmony import */ var _actions_Delete__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(42554);
/* harmony import */ var _actions_EmptyBalance__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(55923);
/* harmony import */ var _sections_CollectiveGoals__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(85004);
/* harmony import */ var _sections_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(23734);
/* harmony import */ var _sections_CustomMessage__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(893);
/* harmony import */ var _sections_EditCollectivePage__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(40464);
/* harmony import */ var _sections_Export__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(13513);
/* harmony import */ var _sections_FiscalHosting__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(70552);
/* harmony import */ var _sections_GiftCards__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(85600);
/* harmony import */ var _sections_Host__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(64500);
/* harmony import */ var _sections_HostVirtualCardsSettings__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(56232);
/* harmony import */ var _sections_PaymentMethods__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(16653);
/* harmony import */ var _sections_PaymentReceipts__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(66925);
/* harmony import */ var _sections_Policies__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(57098);
/* harmony import */ var _sections_ReceivingMoney__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(25039);
/* harmony import */ var _sections_Security__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(32908);
/* harmony import */ var _sections_SendingMoney__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(54616);
/* harmony import */ var _sections_Tickets__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(85275);
/* harmony import */ var _sections_Tiers__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(29256);
/* harmony import */ var _sections_UserSecurity__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(67023);
/* harmony import */ var _sections_virtual_cards_VirtualCards__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(78034);
/* harmony import */ var _sections_Webhooks__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(88325);
/* harmony import */ var _EditUserEmailForm__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(29025);
/* harmony import */ var _SocialLinksFormField__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(4496);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_admin_panel_sections_ActivityLog__WEBPACK_IMPORTED_MODULE_19__, _admin_panel_sections_AuthorizedApps__WEBPACK_IMPORTED_MODULE_20__, _admin_panel_sections_ForDevelopers__WEBPACK_IMPORTED_MODULE_21__, _CreateGiftCardsForm__WEBPACK_IMPORTED_MODULE_23__, _InputField__WEBPACK_IMPORTED_MODULE_26__, _orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_28__, _actions_EmptyBalance__WEBPACK_IMPORTED_MODULE_33__, _sections_CollectiveGoals__WEBPACK_IMPORTED_MODULE_34__, _sections_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_35__, _sections_CustomMessage__WEBPACK_IMPORTED_MODULE_36__, _sections_EditCollectivePage__WEBPACK_IMPORTED_MODULE_37__, _sections_Export__WEBPACK_IMPORTED_MODULE_38__, _sections_Host__WEBPACK_IMPORTED_MODULE_41__, _sections_HostVirtualCardsSettings__WEBPACK_IMPORTED_MODULE_42__, _sections_PaymentMethods__WEBPACK_IMPORTED_MODULE_43__, _sections_PaymentReceipts__WEBPACK_IMPORTED_MODULE_44__, _sections_Policies__WEBPACK_IMPORTED_MODULE_45__, _sections_ReceivingMoney__WEBPACK_IMPORTED_MODULE_46__, _sections_Security__WEBPACK_IMPORTED_MODULE_47__, _sections_SendingMoney__WEBPACK_IMPORTED_MODULE_48__, _sections_Tickets__WEBPACK_IMPORTED_MODULE_49__, _sections_Tiers__WEBPACK_IMPORTED_MODULE_50__, _sections_UserSecurity__WEBPACK_IMPORTED_MODULE_51__, _sections_virtual_cards_VirtualCards__WEBPACK_IMPORTED_MODULE_52__]);
([_admin_panel_sections_ActivityLog__WEBPACK_IMPORTED_MODULE_19__, _admin_panel_sections_AuthorizedApps__WEBPACK_IMPORTED_MODULE_20__, _admin_panel_sections_ForDevelopers__WEBPACK_IMPORTED_MODULE_21__, _CreateGiftCardsForm__WEBPACK_IMPORTED_MODULE_23__, _InputField__WEBPACK_IMPORTED_MODULE_26__, _orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_28__, _actions_EmptyBalance__WEBPACK_IMPORTED_MODULE_33__, _sections_CollectiveGoals__WEBPACK_IMPORTED_MODULE_34__, _sections_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_35__, _sections_CustomMessage__WEBPACK_IMPORTED_MODULE_36__, _sections_EditCollectivePage__WEBPACK_IMPORTED_MODULE_37__, _sections_Export__WEBPACK_IMPORTED_MODULE_38__, _sections_Host__WEBPACK_IMPORTED_MODULE_41__, _sections_HostVirtualCardsSettings__WEBPACK_IMPORTED_MODULE_42__, _sections_PaymentMethods__WEBPACK_IMPORTED_MODULE_43__, _sections_PaymentReceipts__WEBPACK_IMPORTED_MODULE_44__, _sections_Policies__WEBPACK_IMPORTED_MODULE_45__, _sections_ReceivingMoney__WEBPACK_IMPORTED_MODULE_46__, _sections_Security__WEBPACK_IMPORTED_MODULE_47__, _sections_SendingMoney__WEBPACK_IMPORTED_MODULE_48__, _sections_Tickets__WEBPACK_IMPORTED_MODULE_49__, _sections_Tiers__WEBPACK_IMPORTED_MODULE_50__, _sections_UserSecurity__WEBPACK_IMPORTED_MODULE_51__, _sections_virtual_cards_VirtualCards__WEBPACK_IMPORTED_MODULE_52__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);






function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



























 // Actions



 // Sections




















 // Other Components





const {
  COLLECTIVE,
  FUND,
  PROJECT,
  EVENT,
  ORGANIZATION,
  USER
} = _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__/* .CollectiveType */ .eV;

class EditCollectiveForm extends (react__WEBPACK_IMPORTED_MODULE_5___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "getApplicableTaxesFields", () => {
      const {
        intl
      } = this.props;
      const {
        collective
      } = this.state;
      const fields = [];

      const country = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'location.country') || lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective.host, 'location.country');

      const taxes = (0,_opencollective_taxes__WEBPACK_IMPORTED_MODULE_6__.getApplicableTaxesForCountry)(country);

      if (taxes.includes(_opencollective_taxes__WEBPACK_IMPORTED_MODULE_6__.TaxType.VAT)) {
        const getVATOptions = () => {
          const options = [{
            value: '',
            label: intl.formatMessage(this.messages['VAT.None'])
          }, {
            value: _lib_constants_vat__WEBPACK_IMPORTED_MODULE_15__/* .VAT_OPTIONS.HOST */ .N.HOST,
            label: intl.formatMessage(this.messages['VAT.Host'])
          }];
          return collective.isHost ? options : [...options, {
            value: _lib_constants_vat__WEBPACK_IMPORTED_MODULE_15__/* .VAT_OPTIONS.OWN */ .N.OWN,
            label: intl.formatMessage(this.messages['VAT.Own'])
          }];
        };

        fields.push({
          name: 'VAT',
          type: 'select',
          defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.VAT.type') || _lib_constants_vat__WEBPACK_IMPORTED_MODULE_15__/* .VAT_OPTIONS.HOST */ .N.HOST,
          when: () => {
            return collective.isHost || _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__/* .AccountTypesWithHost.includes */ .Zs.includes(collective.type);
          },
          options: getVATOptions()
        }, {
          name: 'VAT-number',
          type: 'string',
          placeholder: 'FRXX999999999',
          defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.VAT.number'),
          when: () => {
            const {
              collective
            } = this.state;

            if (collective.type === COLLECTIVE || collective.type === EVENT) {
              // Collectives can set a VAT number if configured
              return lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.VAT.type') === _lib_constants_vat__WEBPACK_IMPORTED_MODULE_15__/* .VAT_OPTIONS.OWN */ .N.OWN;
            } else {
              return true;
            }
          }
        });
      } else if (taxes.includes(_opencollective_taxes__WEBPACK_IMPORTED_MODULE_6__.TaxType.GST) && collective.isHost) {
        fields.push({
          name: 'GST-number',
          type: 'string',
          placeholder: '9429037631147',
          defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.GST.number')
        });
      }

      return fields;
    });

    this.state = _objectSpread({}, this.getStateFromProps(props));
    this.handleSubmit = this.handleSubmit.bind(this);
    this.handleChange = this.handleChange.bind(this);
    const {
      collective: _collective
    } = this.state;
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_11__.defineMessages)({
      loading: {
        id: "loading",
        defaultMessage: [{
          "type": 0,
          "value": "loading"
        }]
      },
      save: {
        id: "save",
        defaultMessage: [{
          "type": 0,
          "value": "Save"
        }]
      },
      saved: {
        id: "saved",
        defaultMessage: [{
          "type": 0,
          "value": "Saved"
        }]
      },
      'event.create.btn': {
        id: "event.create.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Create Event"
        }]
      },
      'slug.label': {
        id: "collective.changeUrl.label",
        defaultMessage: [{
          "type": 0,
          "value": "URL slug"
        }]
      },
      'type.label': {
        id: "collective.type.label",
        defaultMessage: [{
          "type": 0,
          "value": "Type"
        }]
      },
      'name.label': {
        id: "Fields.displayName",
        defaultMessage: [{
          "type": 0,
          "value": "Display name"
        }]
      },
      'name.description': {
        id: "Fields.name.description",
        defaultMessage: [{
          "type": 0,
          "value": "Display names are public and used wherever this profile appears publicly, like contributions, comments on updates, public info on expenses, etc."
        }]
      },
      legalName: {
        id: "LegalName",
        defaultMessage: [{
          "type": 0,
          "value": "Legal Name"
        }]
      },
      'legalName.description': {
        id: "editCollective.legalName.description",
        defaultMessage: [{
          "type": 0,
          "value": "Legal names are private and used in receipts, tax forms, payment details on expenses, and other non-public contexts. Legal names are only visible to admins."
        }]
      },
      optional: {
        id: "OptionalFieldLabel",
        defaultMessage: [{
          "type": 1,
          "value": "field"
        }, {
          "type": 0,
          "value": " (optional)"
        }]
      },
      examples: {
        id: "examples",
        defaultMessage: [{
          "type": 0,
          "value": "e.g., "
        }, {
          "type": 1,
          "value": "examples"
        }]
      },
      'tags.label': {
        id: "Tags",
        defaultMessage: [{
          "type": 0,
          "value": "Tags"
        }]
      },
      'tos.label': {
        id: "host.tos",
        defaultMessage: [{
          "type": 0,
          "value": "Terms of fiscal hosting"
        }]
      },
      'tos.description': {
        id: "collective.tos.description",
        defaultMessage: [{
          "type": 0,
          "value": "Link to the terms under which this Host collects and holds funds."
        }]
      },
      'tags.description': {
        id: "collective.tags.edit.description",
        defaultMessage: [{
          "type": 0,
          "value": "Help people find you"
        }]
      },
      'tags.input.placeholder': {
        id: "collective.tags.input.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "+ Add tags"
        }]
      },
      'company.label': {
        id: "collective.company.label",
        defaultMessage: [{
          "type": 0,
          "value": "company"
        }]
      },
      'company.description': {
        id: "collective.company.description",
        defaultMessage: [{
          "type": 0,
          "value": "Start with @ to reference an organization (e.g., @airbnb)"
        }]
      },
      'amount.label': {
        id: "Fields.amount",
        defaultMessage: [{
          "type": 0,
          "value": "Amount"
        }]
      },
      'description.label': {
        id: "collective.description.label",
        defaultMessage: [{
          "type": 0,
          "value": "Short description"
        }]
      },
      'expensePolicy.label': {
        id: "editCollective.menu.expenses",
        defaultMessage: [{
          "type": 0,
          "value": "Expenses Policy"
        }]
      },
      'expensePolicy.description': {
        id: "collective.expensePolicy.description",
        defaultMessage: [{
          "type": 0,
          "value": "It can be daunting to file an expense if you're not sure what's allowed. Provide a clear policy to guide expense submitters."
        }]
      },
      'expensePolicy.placeholder': {
        id: "collective.expensePolicy.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "E.g. approval criteria, limitations, or required documentation."
        }]
      },
      'startsAt.label': {
        id: "startDateAndTime",
        defaultMessage: [{
          "type": 0,
          "value": "start date and time"
        }]
      },
      'endsAt.label': {
        id: "event.endsAt.label",
        defaultMessage: [{
          "type": 0,
          "value": "end date and time"
        }]
      },
      'image.label': {
        id: "collective.image.label",
        defaultMessage: [{
          "type": 0,
          "value": "Avatar"
        }]
      },
      'backgroundImage.label': {
        id: "collective.backgroundImage.label",
        defaultMessage: [{
          "type": 0,
          "value": "Cover image"
        }]
      },
      'website.label': {
        id: "Fields.website",
        defaultMessage: [{
          "type": 0,
          "value": "Website"
        }]
      },
      'application.label': {
        id: "collective.application.label",
        defaultMessage: [{
          "type": 0,
          "value": "Open to Applications"
        }]
      },
      'application.description': {
        id: "collective.application.description",
        defaultMessage: [{
          "type": 0,
          "value": "Enable new Collectives to apply to join your Fiscal Host"
        }]
      },
      'application.message.label': {
        id: "application.message.label",
        defaultMessage: [{
          "type": 0,
          "value": "Application instructions"
        }]
      },
      'application.message.description': {
        id: "application.message.description",
        defaultMessage: [{
          "type": 0,
          "value": "These instructions appear above the text box that applicants see (1000 characters max)"
        }]
      },
      'application.message.defaultValue': {
        id: "ApplyToHost.DefaultMessage",
        defaultMessage: [{
          "type": 0,
          "value": "Explain what information applicants should submit for your review (plain text, 3000 characters max), or direct them to an external application form."
        }]
      },
      'hostFeePercent.label': {
        id: "HostFee",
        defaultMessage: [{
          "type": 0,
          "value": "Host fee"
        }]
      },
      'hostFeePercent.description': {
        id: "collective.hostFeePercent.description",
        defaultMessage: [{
          "type": 0,
          "value": "Fee on financial contributions to Collectives you fiscally host."
        }]
      },
      'hostFeePercent.warning': {
        id: "collective.hostFeePercent.warning",
        defaultMessage: [{
          "type": 0,
          "value": "Open Collective will charge 15% of your Host Fee revenue as its Platform Fee."
        }]
      },
      'hostFeePercent.warning2': {
        id: "newPricing.tab.hostFeeChargeExample",
        defaultMessage: [{
          "type": 0,
          "value": "If your Host fee is 10% and your Collectives bring in $1,000, your Platform fee will be $15. If you host fee is 0%, your Platform fee will be 0."
        }]
      },
      'location.label': {
        id: "SectionLocation.Title",
        defaultMessage: [{
          "type": 0,
          "value": "Location"
        }]
      },
      'country.label': {
        id: "collective.country.label",
        defaultMessage: [{
          "type": 0,
          "value": "Country"
        }]
      },
      'currency.label': {
        id: "Currency",
        defaultMessage: [{
          "type": 0,
          "value": "Currency"
        }]
      },
      'currency.placeholder': {
        id: "collective.currency.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "Select currency"
        }]
      },
      'address.label': {
        id: "collective.address.label",
        defaultMessage: [{
          "type": 0,
          "value": "Address"
        }]
      },
      'VAT.label': {
        id: "EditCollective.VAT",
        defaultMessage: [{
          "type": 0,
          "value": "VAT settings"
        }]
      },
      'VAT.description': {
        id: "EditCollective.VAT.Description",
        defaultMessage: [{
          "type": 0,
          "value": "European Value Added Tax"
        }]
      },
      'VAT.None': {
        id: "EditCollective.VAT.None",
        defaultMessage: [{
          "type": 0,
          "value": "Not subject to VAT"
        }]
      },
      'VAT.Host': {
        id: "EditCollective.VAT.Host",
        defaultMessage: [{
          "type": 0,
          "value": "Use the host VAT settings"
        }]
      },
      'VAT.Own': {
        id: "EditCollective.VAT.Own",
        defaultMessage: [{
          "type": 0,
          "value": "Use my own VAT number"
        }]
      },
      'VAT-number.label': {
        id: "EditCollective.VATNumber",
        defaultMessage: [{
          "type": 0,
          "value": "VAT number"
        }]
      },
      'VAT-number.description': {
        id: "EditCollective.VATNumber.Description",
        defaultMessage: [{
          "type": 0,
          "value": "Your European Value Added Tax (VAT) number"
        }]
      },
      'GST-number.label': {
        id: "EditCollective.GSTNumber",
        defaultMessage: [{
          "type": 0,
          "value": "GST number"
        }]
      },
      'privateInstructions.label': {
        id: "event.privateInstructions.label",
        defaultMessage: [{
          "type": 0,
          "value": "Private instructions"
        }]
      },
      privateInstructionsDescription: {
        id: "event.privateInstructions.description",
        defaultMessage: [{
          "type": 0,
          "value": "These instructions will be provided by email to the participants."
        }]
      },
      inValidDateError: {
        id: "6DCLcI",
        defaultMessage: [{
          "type": 0,
          "value": "Please enter a valid date"
        }]
      }
    });
    _collective.backgroundImage = _collective.backgroundImage || _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__/* .defaultBackgroundImage */ .am[_collective.type];
  }

  getStateFromProps(props) {
    const collective = _objectSpread({}, props.collective || {});

    collective.slug = collective.slug ? collective.slug.replace(/.*\//, '') : '';
    collective.tos = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.tos'); // TODO Remove this once tier legacy is removed

    const tiers = collective.tiers && collective.tiers.filter(tier => tier.type !== _lib_constants_tiers_types__WEBPACK_IMPORTED_MODULE_14__/* .TierTypes.TICKET */ .x$.TICKET);
    const tickets = collective.tiers && collective.tiers.filter(tier => tier.type === _lib_constants_tiers_types__WEBPACK_IMPORTED_MODULE_14__/* .TierTypes.TICKET */ .x$.TICKET);
    return {
      modified: false,
      collective,
      tiers: tiers.length === 0 ? [] : tiers,
      tickets: tickets.length === 0 ? [] : tickets,
      validStartDate: true,
      validEndDate: true,
      isValidSocialLinks: true
    };
  }

  handleChange(fieldname, value) {
    this.setState(state => {
      const collective = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default()(state.collective); // GraphQL schema has address embedded within location
      // mutation expects { location: { address: '' } }


      if (['address', 'country'].includes(fieldname)) {
        collective.location[fieldname] = value;
      } else if (fieldname === 'VAT') {
        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.VAT.type', value);
      } else if (fieldname === 'VAT-number') {
        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.VAT.number', value);
      } else if (fieldname === 'GST-number') {
        if (!value) {
          lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.GST', null);
        } else {
          lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.GST.number', value);
        }
      } else if (fieldname === 'application') {
        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.apply', value);
      } else if (fieldname === 'application.message') {
        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'settings.applyMessage', value);
      } else if (fieldname === 'startsAt' && collective.type === EVENT) {
        const isValid = dayjs__WEBPACK_IMPORTED_MODULE_9___default()(value).isValid();
        this.setState({
          validStartDate: isValid
        });

        if (isValid) {
          collective[fieldname] = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateToApiUtc */ .Zz)(value, collective.timezone);
        }
      } else if (fieldname === 'endsAt' && collective.type === EVENT) {
        const isValid = dayjs__WEBPACK_IMPORTED_MODULE_9___default()(value).isValid();
        this.setState({
          validEndDate: isValid
        });

        if (isValid) {
          collective[fieldname] = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateToApiUtc */ .Zz)(value, collective.timezone);
        }
      } else if (fieldname === 'timezone' && collective.type === EVENT) {
        if (value) {
          const timezone = collective.timezone;
          const startsAt = collective.startsAt;
          const endsAt = collective.endsAt;
          collective.startsAt = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateToApiUtc */ .Zz)((0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateFromApiUtc */ .cq)(startsAt, timezone), value);
          collective.endsAt = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateToApiUtc */ .Zz)((0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_16__/* .convertDateFromApiUtc */ .cq)(endsAt, timezone), value);
          collective.timezone = value;
        }
      } else if (fieldname === 'socialLinks') {
        const isValid = value?.filter(l => !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_17__/* .isValidUrl */ .jv)(l.url))?.length === 0;
        this.setState({
          isValidSocialLinks: isValid
        });

        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'socialLinks', value);
      } else {
        lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(collective, fieldname, value);
      }

      return {
        collective,
        modified: true
      };
    });
  }

  async handleSubmit() {
    const collective = _objectSpread({}, this.state.collective); // Add Tiers and Tickets


    collective.tiers = [];

    if (lodash_find__WEBPACK_IMPORTED_MODULE_2___default()(this.state.tiers, 'name')) {
      collective.tiers = [...this.state.tiers];
    }

    if (lodash_find__WEBPACK_IMPORTED_MODULE_2___default()(this.state.tickets, 'name')) {
      collective.tiers = [...collective.tiers, ...this.state.tickets];
    }

    this.props.onSubmit(collective);
    this.setState({
      modified: false
    });
  }

  getFieldDefaultValue(field) {
    if (field.defaultValue !== undefined) {
      return field.defaultValue;
    } else if (['address', 'country'].includes(field.name)) {
      return lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective.location, field.name);
    }

    return this.state.collective[field.name];
  }

  getMenuSelectedSection(section) {
    if (['gift-cards-create', 'gift-cards-send', 'gift-cards'].includes(section)) {
      return _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.GIFT_CARDS */ .J7.GIFT_CARDS;
    } else {
      return section;
    }
  }

  renderSection(section) {
    const {
      collective,
      LoggedInUser
    } = this.props;

    switch (section) {
      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.INFO */ .J7.INFO:
        return null;

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.COLLECTIVE_GOALS */ .J7.COLLECTIVE_GOALS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_CollectiveGoals__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z, {
          collective: collective,
          currency: collective.currency
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.COLLECTIVE_PAGE */ .J7.COLLECTIVE_PAGE:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_EditCollectivePage__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */ .ZP, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.CONNECTED_ACCOUNTS */ .J7.CONNECTED_ACCOUNTS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z, {
          collective: collective,
          connectedAccounts: collective.connectedAccounts
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.EXPENSES */ .J7.EXPENSES:
        return null;

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.EXPORT */ .J7.EXPORT:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Export__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.HOST */ .J7.HOST:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Host__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */ .Z, {
          collective: collective,
          LoggedInUser: LoggedInUser,
          editCollectiveMutation: this.props.onSubmit
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.PAYMENT_METHODS */ .J7.PAYMENT_METHODS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_PaymentMethods__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */ .Z, {
          collectiveSlug: collective.slug
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.TIERS */ .J7.TIERS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Tiers__WEBPACK_IMPORTED_MODULE_50__/* ["default"] */ .Z, {
          collective: collective,
          types: ['TIER', 'MEMBERSHIP', 'SERVICE', 'PRODUCT', 'DONATION']
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.TICKETS */ .J7.TICKETS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Tickets__WEBPACK_IMPORTED_MODULE_49__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.GIFT_CARDS */ .J7.GIFT_CARDS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_GiftCards__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */ .Z, {
          collectiveId: collective.id,
          collectiveSlug: collective.slug
        });

      case 'gift-cards-create':
      case 'gift-cards-send':
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Flex */ .kC, {
          mt: 3,
          flexDirection: "column",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            mb: 4,
            pb: 4,
            borderBottom: "1px solid #E8E9EB",
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center",
            flexWrap: "wrap",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_Link__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
              href: `/${collective.slug}/admin/gift-cards`,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
                "data-cy": "back-to-giftcards-list",
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_styled_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_8__.ArrowBack, {
                  size: "1em"
                }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_11__.FormattedMessage, {
                  id: "giftCards.returnToEdit",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Back to Gift Cards list"
                  }]
                })]
              })
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z, {
              href: "https://docs.opencollective.com/help/financial-contributors/organizations/gift-cards#faq",
              openInNewTab: true,
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_styled_icons_boxicons_regular_InfoCircle__WEBPACK_IMPORTED_MODULE_7__.InfoCircle, {
                size: "1em"
              }), "\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_11__.FormattedMessage, {
                id: "Giftcard.learnMore",
                defaultMessage: [{
                  "type": 0,
                  "value": "Learn more about Gift Cards"
                }]
              })]
            })]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_CreateGiftCardsForm__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP, {
            collectiveId: collective.id,
            collectiveSlug: collective.slug,
            collectiveSettings: collective.settings,
            currency: collective.currency
          })]
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.WEBHOOKS */ .J7.WEBHOOKS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Webhooks__WEBPACK_IMPORTED_MODULE_53__/* ["default"] */ .Z, {
          collectiveSlug: collective.slug
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.AUTHORIZED_APPS */ .J7.AUTHORIZED_APPS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_admin_panel_sections_AuthorizedApps__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {});

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.FOR_DEVELOPERS */ .J7.FOR_DEVELOPERS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_admin_panel_sections_ForDevelopers__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          account: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.ACTIVITY_LOG */ .J7.ACTIVITY_LOG:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_admin_panel_sections_ActivityLog__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          accountSlug: collective.slug
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.ADVANCED */ .J7.ADVANCED:
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Box */ .xu, {
          children: [collective.type === USER && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_EditUserEmailForm__WEBPACK_IMPORTED_MODULE_54__/* ["default"] */ .Z, {}), [COLLECTIVE, FUND, PROJECT, EVENT].includes(collective.type) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_actions_EmptyBalance__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */ .Z, {
            collective: collective,
            LoggedInUser: LoggedInUser
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_actions_Archive__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z, {
            collective: collective
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_actions_Delete__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z, {
            collective: collective
          })]
        });
      // Fiscal Hosts

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.FISCAL_HOSTING */ .J7.FISCAL_HOSTING:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_FiscalHosting__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */ .Z, {
          collective: collective,
          LoggedInUser: LoggedInUser
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.RECEIVING_MONEY */ .J7.RECEIVING_MONEY:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_ReceivingMoney__WEBPACK_IMPORTED_MODULE_46__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.PENDING_ORDERS */ .J7.PENDING_ORDERS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_orders_OrdersWithData__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
          accountSlug: collective.slug,
          status: _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_13__/* .ORDER_STATUS.PENDING */ .D.PENDING,
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_11__.FormattedMessage, {
            id: "PendingBankTransfers",
            defaultMessage: [{
              "type": 0,
              "value": "Pending bank transfers"
            }]
          }),
          showPlatformTip: true
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.SENDING_MONEY */ .J7.SENDING_MONEY:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_SendingMoney__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.SECURITY */ .J7.SECURITY:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Security__WEBPACK_IMPORTED_MODULE_47__/* ["default"] */ .Z, {
          collective: collective
        });
      // 2FA

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.USER_SECURITY */ .J7.USER_SECURITY:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_UserSecurity__WEBPACK_IMPORTED_MODULE_51__/* ["default"] */ .Z, {
          slug: collective.slug
        });
      // Payment Receipts

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.PAYMENT_RECEIPTS */ .J7.PAYMENT_RECEIPTS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_PaymentReceipts__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */ .Z, {
          collective: collective
        });
      // Policies and moderation

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.POLICIES */ .J7.POLICIES:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_Policies__WEBPACK_IMPORTED_MODULE_45__/* ["default"] */ .Z, {
          collective: collective
        });
      // Policies and moderation

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.CUSTOM_EMAIL */ .J7.CUSTOM_EMAIL:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_CustomMessage__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS */ .J7.HOST_VIRTUAL_CARDS_SETTINGS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_HostVirtualCardsSettings__WEBPACK_IMPORTED_MODULE_42__/* ["default"] */ .Z, {
          collective: collective
        });

      case _admin_panel_constants__WEBPACK_IMPORTED_MODULE_18__/* .ALL_SECTIONS.VIRTUAL_CARDS */ .J7.VIRTUAL_CARDS:
        return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_sections_virtual_cards_VirtualCards__WEBPACK_IMPORTED_MODULE_52__/* ["default"] */ .Z, {
          collective: collective
        });

      default:
        return null;
    }
  }

  render() {
    const {
      collective,
      status,
      intl,
      router
    } = this.props;

    const section = this.props.section || lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(router, 'query.section', 'info');

    const isNew = !(collective && collective.id);
    let submitBtnMessageId = isNew ? 'event.create.btn' : 'save';

    if (['loading', 'saved'].includes(status)) {
      submitBtnMessageId = status;
    }

    const isEvent = collective.type === EVENT;
    const isUser = collective.type === USER;
    const currencyOptions = _lib_constants_currency__WEBPACK_IMPORTED_MODULE_57__/* .Currency.map */ .F.map(c => ({
      value: c,
      label: c
    }));
    const submitBtnLabel = this.messages[submitBtnMessageId] && intl.formatMessage(this.messages[submitBtnMessageId]);
    this.fields = {
      info: [{
        name: 'name',
        placeholder: '',
        maxLength: 255
      }, {
        name: 'legalName',
        label: intl.formatMessage(this.messages.optional, {
          field: intl.formatMessage(this.messages.legalName)
        }),
        placeholder: intl.formatMessage(this.messages.examples, {
          examples: isUser ? 'Maria Garcia' : 'Salesforce, Inc., Airbnb, Inc.'
        }),
        maxLength: 255,
        when: () => isUser || collective.type === ORGANIZATION || collective.isHost,
        isPrivate: true
      }, {
        name: 'company',
        placeholder: '',
        maxLength: 255,
        when: () => isUser
      }, {
        name: 'description',
        type: 'text',
        maxLength: 255,
        placeholder: ''
      }, {
        name: 'slug',
        pre: 'https://opencollective.com/',
        placeholder: '',
        when: () => collective.type !== EVENT
      }, {
        name: 'address',
        placeholder: '',
        maxLength: 255,
        type: 'textarea',
        when: () => collective.type !== EVENT // TODO: Use structured here to be consistent with other places

      }, {
        name: 'country',
        type: 'country',
        placeholder: 'Select country',
        when: () => collective.type !== EVENT
      }, {
        name: 'startsAt',
        type: 'datetime-local',
        defaultValue: dayjs__WEBPACK_IMPORTED_MODULE_9___default()(collective.startsAt).tz(collective.timezone).format('YYYY-MM-DDTHH:mm'),
        when: () => collective.type === EVENT,
        error: !this.state.validStartDate ? intl.formatMessage(this.messages.inValidDateError) : null,
        required: true
      }, {
        name: 'endsAt',
        type: 'datetime-local',
        defaultValue: dayjs__WEBPACK_IMPORTED_MODULE_9___default()(collective.endsAt).tz(collective.timezone).format('YYYY-MM-DDTHH:mm'),
        when: () => collective.type === EVENT,
        error: !this.state.validEndDate ? intl.formatMessage(this.messages.inValidDateError) : null,
        required: true
      }, {
        name: 'timezone',
        type: 'TimezonePicker',
        when: () => collective.type === EVENT
      }, {
        name: 'location',
        placeholder: '',
        type: 'location',
        when: () => collective.type === EVENT
      }, {
        name: 'privateInstructions',
        description: intl.formatMessage(this.messages.privateInstructionsDescription),
        type: 'textarea',
        maxLength: 10000,
        when: () => collective.type === EVENT
      }, {
        name: 'currency',
        type: 'select',
        defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective, 'currency'),
        options: currencyOptions,
        description: [COLLECTIVE, FUND].includes(collective.type) && collective.isActive || collective.isHost ? intl.formatMessage({
          id: "collective.currency.warning",
          defaultMessage: [{
            "type": 0,
            "value": "Active Collectives, Funds and Fiscal Hosts can't edit their currency. Contact "
          }, {
            "type": 8,
            "value": "SupportLink",
            "children": [{
              "type": 0,
              "value": "support"
            }]
          }, {
            "type": 0,
            "value": " if this is an issue."
          }]
        }, {
          SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_25__/* .I18nSupportLink */ .wl
        }) : null,
        when: () => ![EVENT, PROJECT].includes(collective.type),
        // Active Collectives, Funds and Fiscal Hosts can't edit their currency.
        disabled: [COLLECTIVE, FUND].includes(collective.type) && collective.isActive || collective.isHost ? true : false
      }, ...this.getApplicableTaxesFields(), {
        name: 'tags',
        maxLength: 128,
        type: 'collective-tags',
        placeholder: intl.formatMessage(this.messages['tags.input.placeholder']),
        when: () => ![EVENT, PROJECT, FUND].includes(collective.type)
      }],
      'fiscal-hosting': [{
        name: 'application',
        className: 'horizontal',
        type: 'switch',
        defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective, 'settings.apply'),
        when: () => collective.isHost && (collective.type === ORGANIZATION || collective.settings.apply)
      }, {
        name: 'application.message',
        className: 'horizontal',
        type: 'textarea',
        defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective, 'settings.applyMessage'),
        placeholder: intl.formatMessage(this.messages['application.message.defaultValue']),
        disabled: !this.state.collective.settings?.apply,
        maxLength: 1000,
        when: () => collective.isHost && (collective.type === ORGANIZATION || collective.settings.apply)
      }, {
        name: 'hostFeePercent',
        type: 'number',
        className: 'horizontal',
        step: '0.01',
        post: '%',
        defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective, 'hostFeePercent'),
        when: () => collective.isHost && (collective.type === ORGANIZATION || collective.hostFeePercent !== 0)
      }, {
        name: 'tos',
        type: 'text',
        placeholder: '',
        className: 'horizontal',
        defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(this.state.collective, 'settings.tos'),
        when: () => collective.isHost && (collective.type === ORGANIZATION || collective.settings.tos)
      }]
    };
    Object.keys(this.fields).map(fieldname => {
      this.fields[fieldname] = this.fields[fieldname].map(field => {
        if (this.messages[`${field.name}.label`]) {
          field.label = intl.formatMessage(this.messages[`${field.name}.label`]);
        }

        if (this.messages[`${field.name}.description`]) {
          field.description = intl.formatMessage(this.messages[`${field.name}.description`], collective);
        }

        if (this.messages[`${field.name}.placeholder`]) {
          field.placeholder = intl.formatMessage(this.messages[`${field.name}.placeholder`]);
        }

        if (field.name === 'hostFeePercent' && collective.plan.name.includes('2021')) {
          field.description += ` `;
          field.description += intl.formatMessage(this.messages[`${field.name}.warning`], collective);
          field.description += ` `;
          field.description += intl.formatMessage(this.messages[`${field.name}.warning2`], collective);
        }

        return field;
      });
    });
    const fields = (this.fields[section] || []).filter(field => !field.when || field.when());
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx("div", {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Flex */ .kC, {
        flexWrap: "wrap",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_StyledFlex, {
          flexDirection: "column",
          children: [fields && fields.length > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx("div", {
            className: "FormInputs",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)("div", {
              className: "inputs",
              children: [fields.map(field => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z, {
                className: field.className,
                defaultValue: this.getFieldDefaultValue(field),
                validate: field.validate,
                ref: field.name,
                name: field.name,
                label: field.label,
                description: field.description,
                options: field.options,
                placeholder: field.placeholder,
                type: field.type,
                pre: field.pre,
                post: field.post,
                context: this.state.collective,
                error: field.error,
                onChange: value => this.handleChange(field.name, value),
                onKeyDown: event => {
                  if ((field.name === 'startsAt' || field.name === 'endsAt') && event.key === 'Backspace') {
                    event.preventDefault();
                  }
                },
                disabled: field.disabled,
                maxLength: field.maxLength,
                isPrivate: field.isPrivate,
                step: field.step,
                min: field.min,
                overflow: "hidden",
                required: field.required
              }, field.name)), section === 'info' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Box */ .xu, {
                p: 1,
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Box */ .xu, {
                  my: "5px",
                  fontWeight: 700,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_11__.FormattedMessage, {
                    id: "3bLmoU",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Social Links"
                    }]
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_SocialLinksFormField__WEBPACK_IMPORTED_MODULE_55__/* ["default"] */ .Z, {
                  value: this.state.collective?.socialLinks,
                  touched: this.state.modified,
                  onChange: value => this.handleChange('socialLinks', value)
                })]
              })]
            })
          }), fields && fields.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            className: "actions",
            margin: "5rem auto 1rem",
            textAlign: "center",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
              buttonStyle: "primary",
              type: "submit",
              onClick: this.handleSubmit,
              "data-cy": "collective-save",
              disabled: status === 'loading' || !this.state.modified || !this.state.validStartDate || !this.state.validEndDate || !this.state.isValidSocialLinks,
              children: submitBtnLabel
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_Container__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
              className: "backToProfile",
              fontSize: "1.3rem",
              margin: "1rem",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(_Link__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
                "data-cy": "edit-collective-back-to-profile",
                href: isEvent ? `/${collective.parentCollective.slug}/events/${collective.slug}` : `/${collective.slug}`,
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_56__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_11__.FormattedMessage, {
                  id: "QxN1ZU",
                  defaultMessage: [{
                    "type": 0,
                    "value": "View profile page"
                  }]
                })
              })
            })]
          }), this.renderSection(section)]
        })
      })
    });
  }

}

EditCollectiveForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getStateFromProps",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "props",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldname",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "getFieldDefaultValue",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "field",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getMenuSelectedSection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "section",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderSection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "section",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getApplicableTaxesFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditCollectiveForm",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "status": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "query": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_router__WEBPACK_IMPORTED_MODULE_10__.withRouter)((0,react_intl__WEBPACK_IMPORTED_MODULE_11__.injectIntl)(EditCollectiveForm)));

var _StyledFlex = styled_components__WEBPACK_IMPORTED_MODULE_4___default()(_Grid__WEBPACK_IMPORTED_MODULE_24__/* .Flex */ .kC).withConfig({
  displayName: "Form___StyledFlex",
  componentId: "sc-u24m69-0"
})({
  flexGrow: 10,
  flexBasis: 600
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 68530:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17632);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69078);
/* harmony import */ var _SendMoneyToCollectiveBtn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75052);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_SendMoneyToCollectiveBtn__WEBPACK_IMPORTED_MODULE_4__]);
_SendMoneyToCollectiveBtn__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












const SendFundsToCollectiveSection = ({
  collective,
  toCollective,
  LoggedInUser
}) => {
  const {
    locale
  } = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
  const {
    0: modal,
    1: setModal
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    type: 'Transfer',
    show: false,
    isApproved: false
  });

  const confirmTransfer = () => {
    setModal(_objectSpread(_objectSpread({}, modal), {}, {
      show: true,
      isApproved: false
    }));
  };

  const closeModal = () => setModal(_objectSpread(_objectSpread({}, modal), {}, {
    show: false,
    isApproved: false
  }));

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: [collective.stats.balance > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_SendMoneyToCollectiveBtn__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      fromCollective: collective,
      toCollective: toCollective,
      LoggedInUser: LoggedInUser,
      amount: collective.stats.balance,
      currency: collective.currency,
      confirmTransfer: confirmTransfer,
      isTransferApproved: modal.isApproved
    }), collective.stats.balance === 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      disabled: true,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "SendMoneyToCollective.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Send "
        }, {
          "type": 1,
          "value": "amount"
        }, {
          "type": 0,
          "value": " to "
        }, {
          "type": 1,
          "value": "collective"
        }],
        values: {
          amount: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_2__/* .formatCurrency */ .xG)(0, collective.currency, {
            locale
          }),
          collective: toCollective.name
        }
      })
    }), modal.show && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalHeader */ .xB, {
        onClose: closeModal,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "collective.emptyBalance.header",
          values: {
            action: modal.type
          },
          defaultMessage: [{
            "type": 1,
            "value": "action"
          }, {
            "type": 0,
            "value": " Balance"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalBody */ .fe, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
            id: "collective.emptyBalance.body",
            values: {
              collective: toCollective.name,
              action: modal.type.toLowerCase()
            },
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to "
            }, {
              "type": 1,
              "value": "action"
            }, {
              "type": 0,
              "value": " to "
            }, {
              "type": 1,
              "value": "collective"
            }, {
              "type": 0,
              "value": "?"
            }]
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_6__/* .ModalFooter */ .mz, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
            mx: 20,
            onClick: () => setModal(_objectSpread(_objectSpread({}, modal), {}, {
              show: false,
              isApproved: false
            })),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: () => setModal(_objectSpread(_objectSpread({}, modal), {}, {
              show: false,
              isApproved: true
            })),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
              id: "confirm",
              defaultMessage: [{
                "type": 0,
                "value": "Confirm"
              }]
            })
          })]
        })
      })]
    })]
  });
};

SendFundsToCollectiveSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SendFundsToCollectiveSection",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "toCollective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SendFundsToCollectiveSection);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 18656:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);




const SettingsSubtitle = ({
  children
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx(_Text__WEBPACK_IMPORTED_MODULE_1__.P, {
    fontSize: "14px",
    lineHeight: "21px",
    color: "black.700",
    mt: 2,
    children: children
  });
};

SettingsSubtitle.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SettingsSubtitle",
  "props": {
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsSubtitle);

/***/ }),

/***/ 4496:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ SocialLinksFormField)
/* harmony export */ });
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13831);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99565);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92813);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(77192);
/* harmony import */ var _styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97881);
/* harmony import */ var _styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(68765);
/* harmony import */ var _styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97965);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97079);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97274);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);

const _excluded = ["value", "onChange"];

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


















function SocialLinksFormField({
  value = [],
  touched,
  onChange
}) {
  const [items, setItems] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(value.map(({
    url,
    type
  }, i) => ({
    url,
    type,
    sortId: i.toString()
  })));
  react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(() => {
    onChange(items.map(({
      url,
      type
    }) => ({
      url,
      type
    })));
  }, [items]);
  const onItemChange = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback((socialLink, sortId) => {
    const newItems = items.map(item => {
      if (item.sortId === sortId) {
        return _objectSpread(_objectSpread({}, item), socialLink);
      }

      return item;
    });
    setItems(newItems);
  }, [items, onChange]);
  const onRemoveItem = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(sortId => {
    const newItems = items.filter(item => item.sortId !== sortId);
    setItems(newItems);
  }, [items, onChange]);
  const addItem = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(() => {
    const newItems = [...items, {
      url: '',
      type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE */ .Xu.WEBSITE
    }].map((item, i) => _objectSpread(_objectSpread({}, item), {}, {
      sortId: i.toString()
    }));
    setItems(newItems);
  }, [items, onChange]);

  function handleDragEnd(event) {
    const {
      active,
      over
    } = event;

    if (active.id !== over.id) {
      const oldIndex = items.findIndex(item => item.sortId === active.id);
      const newIndex = items.findIndex(item => item.sortId === over.id);
      const newItems = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__.arrayMove)(items, oldIndex, newIndex);
      setItems(newItems);
    }
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_2__.DndContext, {
    collisionDetection: _dnd_kit_core__WEBPACK_IMPORTED_MODULE_2__.closestCenter,
    onDragEnd: handleDragEnd,
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      width: "100%",
      flexDirection: "column",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__.SortableContext, {
        items: items.map(item => item.sortId),
        strategy: _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__.verticalListSortingStrategy,
        children: [items.map(socialLink => {
          return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(SocialLinkItem, {
            error: touched && !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_10__/* .isValidUrl */ .jv)(socialLink.url),
            value: socialLink,
            onChange: onItemChange,
            onRemoveItem: onRemoveItem
          }, socialLink.sortId);
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
          mt: 2,
          justifyContent: "center",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            disabled: value.length >= 10,
            type: "button",
            buttonSize: "tiny",
            buttonStyle: "standard",
            onClick: addItem,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_5__.Plus, {
              size: "10px"
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
              ml: 2,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
                id: "FH4TgN",
                defaultMessage: [{
                  "type": 0,
                  "value": "Add social link"
                }]
              })
            })]
          })
        })]
      })
    })
  });
}

function SocialLinkTypePicker(_ref) {
  let {
    value,
    onChange
  } = _ref,
      pickerProps = _objectWithoutProperties(_ref, _excluded);

  const options = [{
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE.toString */ .Xu.WEBSITE.toString(),
    label: 'Website'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCORD.toString */ .Xu.DISCORD.toString(),
    label: 'Discord'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.FACEBOOK.toString */ .Xu.FACEBOOK.toString(),
    label: 'Facebook'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITHUB.toString */ .Xu.GITHUB.toString(),
    label: 'GitHub'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITLAB.toString */ .Xu.GITLAB.toString(),
    label: 'GitLab'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GIT.toString */ .Xu.GIT.toString(),
    label: 'Git Repository'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.INSTAGRAM.toString */ .Xu.INSTAGRAM.toString(),
    label: 'Instagram'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MASTODON.toString */ .Xu.MASTODON.toString(),
    label: 'Mastodon'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MATTERMOST.toString */ .Xu.MATTERMOST.toString(),
    label: 'Mattermost'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TUMBLR.toString */ .Xu.TUMBLR.toString(),
    label: 'Tumblr'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TWITTER.toString */ .Xu.TWITTER.toString(),
    label: 'Twitter'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.YOUTUBE.toString */ .Xu.YOUTUBE.toString(),
    label: 'YouTube'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MEETUP.toString */ .Xu.MEETUP.toString(),
    label: 'Meetup'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.LINKEDIN.toString */ .Xu.LINKEDIN.toString(),
    label: 'LinkedIn'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.SLACK.toString */ .Xu.SLACK.toString(),
    label: 'Slack'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCOURSE.toString */ .Xu.DISCOURSE.toString(),
    label: 'Discourse'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.PIXELFED.toString */ .Xu.PIXELFED.toString(),
    label: 'Pixelfed'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GHOST.toString */ .Xu.GHOST.toString(),
    label: 'Ghost'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.PEERTUBE.toString */ .Xu.PEERTUBE.toString(),
    label: 'PeerTube'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TIKTOK.toString */ .Xu.TIKTOK.toString(),
    label: 'TikTok'
  }];
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, pickerProps), {}, {
    "data-cy": "social-link-type-picker",
    value: options.find(o => o.value === value?.toString()),
    defaultValue: options.find(o => o.value === _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE.toString */ .Xu.WEBSITE.toString()),
    onChange: ({
      value
    }) => onChange(value),
    options: lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(options, 'label')
  }));
}

function SocialLinkItem({
  value,
  error,
  onChange,
  onRemoveItem
}) {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition
  } = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_3__.useSortable)({
    id: value.sortId
  });
  const style = {
    transform: _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_4__.CSS.Transform.toString(transform),
    transition
  };
  const onFieldChange = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback((field, fieldValue) => {
    onChange(_objectSpread(_objectSpread({}, value), {}, {
      [field]: fieldValue
    }), value.sortId);
  }, [onChange, value]);
  const onUrlChange = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(e => {
    const newUrl = e.target.value;
    onChange({
      type: typeFromUrl(newUrl) ?? value.type,
      url: newUrl
    }, value.sortId);
  }, [onChange, value]);
  const onUrlBlur = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(() => {
    const hasSchemaRegexp = /^[^:]+:\/\//;

    if (value.url.trim() === '') {
      return;
    }

    if (!value.url.match(hasSchemaRegexp)) {
      onChange(_objectSpread(_objectSpread({}, value), {}, {
        url: `https://${value.url}`
      }), value.sortId);
    }
  }, [onChange, value]);
  const onRemove = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(() => {
    onRemoveItem(value.sortId);
  }, [onRemoveItem, value.sortId]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
    ref: setNodeRef,
    style: style,
    alignItems: "center",
    my: 1,
    gap: "5px",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx("div", _objectSpread(_objectSpread(_objectSpread({}, listeners), attributes), {}, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_7__.DragIndicator, {
        size: "15px",
        style: {
          cursor: 'grab'
        }
      })
    })), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      flexGrow: 1,
      flexWrap: "wrap",
      gap: "5px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        width: ['100%', '120px'],
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(SocialLinkTypePicker, {
          value: value.type,
          onChange: type => onFieldChange('type', type)
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, {
        autoFocus: value.url === '',
        error: error,
        flexGrow: 1,
        value: value.url,
        onBlur: onUrlBlur,
        onChange: onUrlChange,
        placeholder: "https://opencollective.com/"
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      tabIndex: -1,
      padding: 0,
      width: "20px",
      height: "20px",
      type: "button",
      buttonStyle: "borderless",
      onClick: onRemove,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_6__.Times, {
        size: "10px"
      })
    })]
  });
}

const knownSocialLinkDomains = [{
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCORD */ .Xu.DISCORD,
  regexp: /^(https:\/\/)?discord.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.FACEBOOK */ .Xu.FACEBOOK,
  regexp: /^(https:\/\/)?(www\.)?facebook.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITHUB */ .Xu.GITHUB,
  regexp: /^(https:\/\/)?github.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITLAB */ .Xu.GITLAB,
  regexp: /^(https:\/\/)?gitlab.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.INSTAGRAM */ .Xu.INSTAGRAM,
  regexp: /^(https:\/\/)?(www\.)?instagram.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.LINKEDIN */ .Xu.LINKEDIN,
  regexp: /^(https:\/\/)?(www\.)?linkedin.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MEETUP */ .Xu.MEETUP,
  regexp: /^(https:\/\/)?meetup.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.SLACK */ .Xu.SLACK,
  regexp: /^(https:\/\/)?[^.]+.?slack.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TIKTOK */ .Xu.TIKTOK,
  regexp: /^(https:\/\/)?(www\.)?tiktok.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TUMBLR */ .Xu.TUMBLR,
  regexp: /^(https:\/\/)?[^.]+\.?tumblr.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TWITTER */ .Xu.TWITTER,
  regexp: /^(https:\/\/)?twitter.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.YOUTUBE */ .Xu.YOUTUBE,
  regexp: /^(https:\/\/)?(www\.)?youtube.com/
}];

function typeFromUrl(url) {
  for (const knownDomain of knownSocialLinkDomains) {
    if (url.match(knownDomain.regexp)) {
      return knownDomain.type;
    }
  }

  return null;
}

SocialLinksFormField.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SocialLinksFormField",
  "props": {
    "value": {
      "defaultValue": {
        "value": "[]",
        "computed": false
      },
      "required": false,
      "tsType": {
        "name": "Array",
        "elements": [{
          "name": "SocialLink"
        }],
        "raw": "SocialLink[]"
      },
      "description": ""
    },
    "touched": {
      "required": false,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "onChange": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(value: SocialLinkInput[]) => void",
        "signature": {
          "arguments": [{
            "name": "value",
            "type": {
              "name": "Array",
              "elements": [{
                "name": "SocialLinkInput"
              }],
              "raw": "SocialLinkInput[]"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    }
  }
};

/***/ }),

/***/ 51393:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(91337);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(93150);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(46217);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












const List = styled_components__WEBPACK_IMPORTED_MODULE_2___default().ul.withConfig({
  displayName: "UpdateBankDetailsForm__List",
  componentId: "sc-1a0b0bq-0"
})(["margin:0;padding:0;position:relative;list-style:none;"]);

class UpdateBankDetailsForm extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {
  constructor(props) {
    super(props);
    this.state = {
      form: {
        instructions: props.value
      }
    };
    this.onChange = this.onChange.bind(this);
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.defineMessages)({
      'bankaccount.instructions.label': {
        id: "paymentMethods.manual.instructions",
        defaultMessage: [{
          "type": 0,
          "value": "Bank transfer instructions"
        }]
      }
    });
  }

  onChange(field, value) {
    this.setState(state => {
      return {
        form: _objectSpread(_objectSpread({}, state.form), {}, {
          [field]: value
        })
      };
    }, () => {
      return this.props.onChange(this.state.form);
    });
  }

  renderInstructions() {
    const formatValues = {
      account: this.props.bankAccount ? (0,_utils__WEBPACK_IMPORTED_MODULE_8__/* .formatAccountDetails */ .H)(this.props.bankAccount) : '',
      reference: '76400',
      OrderId: '76400',
      amount: '$30',
      collective: 'acme'
    };
    return (0,_lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_3__/* .formatManualInstructions */ .U8)(this.state.form.instructions, formatValues);
  }

  render() {
    const {
      intl,
      value,
      error,
      useStructuredForm,
      bankAccount
    } = this.props;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
      flexDirection: "column",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
        as: "fieldset",
        border: "none",
        width: 1,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
          flexDirection: ['column-reverse', 'row'],
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
            mb: 3,
            flexGrow: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
              label: intl.formatMessage(this.messages['bankaccount.instructions.label']),
              htmlFor: "instructions",
              width: "100%",
              height: 400,
              onChange: e => this.onChange('instructions', e.target.value),
              defaultValue: value
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
            fontSize: "1.4rem",
            pl: [0, 3],
            width: [1, 0.5],
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                id: "bankaccount.instructions.variables",
                defaultMessage: [{
                  "type": 0,
                  "value": "Financial contributors will receive these instructions when they select bank transfer as the payment method. You can use the following variables (like blanks that gets filled in):"
                }]
              })
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(List, {
              children: [useStructuredForm && bankAccount?.currency && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("li", {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("code", {
                  children: "{account}"
                }), ":", ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "bankaccount.instructions.account",
                  defaultMessage: [{
                    "type": 0,
                    "value": "The bank account details you added above."
                  }]
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("li", {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("code", {
                  children: "{amount}"
                }), ":", ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "bankaccount.instructions.amount",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Total amount the payer should transfer."
                  }]
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("li", {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("code", {
                  children: "{collective}"
                }), ":", ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "bankaccount.instructions.collective",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Collective to receive the funds. If you only have one Collective, you might not need to include this."
                  }]
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("li", {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("code", {
                  children: "{reference}"
                }), ":", ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "bankaccount.instructions.reference",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Unique ID code, to confirm receipt of funds."
                  }]
                })]
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
                  id: "bankaccount.instructions.preview",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Preview:"
                  }]
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx("pre", {
                style: {
                  whiteSpace: 'pre-wrap'
                },
                children: this.renderInstructions()
              })]
            })]
          })]
        })
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, {
        display: "block",
        color: "red.500",
        pt: 2,
        fontSize: "10px",
        children: error
      })]
    });
  }

}

UpdateBankDetailsForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "field",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderInstructions",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "UpdateBankDetailsForm",
  "props": {
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "profileType": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "error": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "useStructuredForm": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "bankAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(UpdateBankDetailsForm));

/***/ }),

/***/ 14896:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32431);
/* harmony import */ var _styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_popper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42932);
/* harmony import */ var react_popper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_popper__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(95834);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(styled_system__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(17632);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(32651);
/* harmony import */ var _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97965);
/* harmony import */ var _lib_hooks_useGlobalBlur__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(55348);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(11194);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(47988);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(16159);
/* harmony import */ var _icons_DismissIcon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(56667);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(173);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(51082);
/* harmony import */ var _StyledSpinner__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(40486);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(31330);
/* harmony import */ var _DeleteVirtualCardModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(61364);
/* harmony import */ var _EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(21408);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_21__, _DeleteVirtualCardModal__WEBPACK_IMPORTED_MODULE_22__, _EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_23__]);
([_ToastProvider__WEBPACK_IMPORTED_MODULE_21__, _DeleteVirtualCardModal__WEBPACK_IMPORTED_MODULE_22__, _EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_23__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-disable camelcase */


























const CardContainer = styled_components__WEBPACK_IMPORTED_MODULE_5___default()(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC).withConfig({
  displayName: "VirtualCard__CardContainer",
  componentId: "sc-1gxxp85-0"
})(["border:1px solid #dcdee0;border-radius:12px;background:#050505;position:relative;color:#fff;overflow:hidden;transition:box-shadow 400ms ease-in-out,transform 500ms ease;box-shadow:0px 0px 4px rgba(20,20,20,0);:hover{box-shadow:0px 8px 12px rgba(20,20,20,0.16);transform:translate(0,-4px);}> div{z-index:1;}> div:first-child{position:absolute;top:0px;left:0px;height:100%;width:100%;background:linear-gradient(to right,#f7f8fa23,#f7f8fa16);clip-path:ellipse(102% 102% at 0px 100%);}"]);
const Action = styled_components__WEBPACK_IMPORTED_MODULE_5___default().button.withConfig({
  displayName: "VirtualCard__Action",
  componentId: "sc-1gxxp85-1"
})(["", " cursor:pointer;line-height:16px;font-size:14px;font-weight:500;border:none;background:transparent;outline:none;text-align:inherit;color:", ";:hover{color:", ";}&[disabled]{color:", ";}"], styled_system__WEBPACK_IMPORTED_MODULE_6__.margin, props => props.theme.colors[props.color]?.[500] || props.color || props.theme.colors.black[900], props => props.theme.colors[props.color]?.[300] || props.color || props.theme.colors.black[700], props => props.theme.colors[props.color]?.[200] || props.color || props.theme.colors.black[600]);
const Arrow = styled_components__WEBPACK_IMPORTED_MODULE_5___default().div.withConfig({
  displayName: "VirtualCard__Arrow",
  componentId: "sc-1gxxp85-2"
})(["position:absolute;width:8px;height:8px;background:inherit;visibility:hidden;bottom:4px;::before{position:absolute;width:8px;height:8px;background:inherit;}::before{visibility:visible;content:'';transform:rotate(45deg);}"]);
const StateLabel = styled_components__WEBPACK_IMPORTED_MODULE_5___default()(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu).withConfig({
  displayName: "VirtualCard__StateLabel",
  componentId: "sc-1gxxp85-3"
})(["align-self:center;padding:2px 6px;border-radius:4px;background:", ";color:", ";font-size:12px;font-weight:700;line-height:16px;letter-spacing:0.06em;text-transform:uppercase;"], props => props.isActive ? props.theme.colors.green[100] : props.theme.colors.black[100], props => props.isActive ? props.theme.colors.green[600] : props.theme.colors.black[500]);
const pauseCardMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation PauseVirtualCard($virtualCard: VirtualCardReferenceInput!) {
    pauseVirtualCard(virtualCard: $virtualCard) {
      id
      data
    }
  }
`;
const resumeCardMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation ResumeVirtualCard($virtualCard: VirtualCardReferenceInput!) {
    resumeVirtualCard(virtualCard: $virtualCard) {
      id
      data
    }
  }
`;

const ActionsButton = props => {
  const wrapperRef = react__WEBPACK_IMPORTED_MODULE_0___default().useRef();
  const arrowRef = react__WEBPACK_IMPORTED_MODULE_0___default().useRef();
  const [displayActions, setDisplayActions] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const [showConfirmationModal, setShowConfirmationModal] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const [isEditingVirtualCard, setIsEditingVirtualCard] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const [isDeletingVirtualCard, setIsDeletingVirtualCard] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .useToasts */ .e1)();
  const {
    virtualCard,
    host,
    canEditVirtualCard,
    canDeleteVirtualCard,
    confirmOnPauseCard
  } = props;
  const handleActionSuccess = react__WEBPACK_IMPORTED_MODULE_0___default().useCallback(message => {
    setIsEditingVirtualCard(false);
    setIsDeletingVirtualCard(false);
    addToast({
      type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
      message: message
    });
  }, [addToast]);
  (0,_lib_hooks_useGlobalBlur__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(wrapperRef, outside => {
    if (outside) {
      setDisplayActions(false);
    }
  });
  const [pauseCard, {
    loading: pauseLoading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(pauseCardMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const [resumeCard, {
    loading: resumeLoading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(resumeCardMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const isActive = virtualCard.data.status === 'active' || virtualCard.data.state === 'OPEN';

  const handlePauseUnpause = async () => {
    try {
      if (isActive) {
        await pauseCard({
          variables: {
            virtualCard: {
              id: virtualCard.id
            }
          }
        });
      } else {
        await resumeCard({
          variables: {
            virtualCard: {
              id: virtualCard.id
            }
          }
        });
      }

      handleActionSuccess();
    } catch (e) {
      props.onError(e);
    }
  };

  const isLoading = pauseLoading || resumeLoading;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div", {
    ref: wrapperRef,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_popper__WEBPACK_IMPORTED_MODULE_4__.Manager, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_popper__WEBPACK_IMPORTED_MODULE_4__.Reference, {
        children: ({
          ref
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
          ref: ref,
          onClick: () => setDisplayActions(true),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "CollectivePage.NavBar.ActionMenu.Actions",
            defaultMessage: [{
              "type": 0,
              "value": "Actions"
            }]
          })
        })
      }), displayActions && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_popper__WEBPACK_IMPORTED_MODULE_4__.Popper, {
        placement: "bottom",
        modifiers: [{
          name: 'arrow',
          options: {
            element: arrowRef
          }
        }],
        children: ({
          placement,
          ref,
          style,
          arrowProps
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx("div", {
          "data-placement": placement,
          ref: ref,
          style: _objectSpread({}, style),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            m: 1,
            mb: 2,
            overflow: "auto",
            overflowY: "auto",
            padding: "12px 15px",
            width: "180px",
            borderWidth: "0px",
            boxShadow: "0px 8px 12px rgba(20, 20, 20, 0.16)",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
              flexDirection: "column",
              fontSize: "13px",
              lineHeight: "16px",
              fontWeight: "500",
              children: [virtualCard.provider === 'STRIPE' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(Action, {
                onClick: () => confirmOnPauseCard && isActive ? setShowConfirmationModal(true) : handlePauseUnpause(),
                disabled: isLoading,
                children: [isActive ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                  id: "VirtualCards.PauseCard",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Pause Card"
                  }]
                }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                  id: "VirtualCards.ResumeCard",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Resume Card"
                  }]
                }), ' ', isLoading && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledSpinner__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                  size: "0.9em",
                  mb: "2px"
                })]
              }), canDeleteVirtualCard && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
                  borderColor: "black.300",
                  mt: 2,
                  mb: 2
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
                  onClick: () => setIsDeletingVirtualCard(true),
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                    id: "mLx6pg",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Delete Card"
                    }]
                  })
                })]
              }), canEditVirtualCard && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
                  borderColor: "black.300",
                  mt: 2,
                  mb: 2
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
                  onClick: () => setIsEditingVirtualCard(true),
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                    id: "ILnhs8",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Edit Card Details"
                    }]
                  })
                })]
              })]
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Arrow, _objectSpread({
              ref: arrowRef
            }, arrowProps))]
          })
        })
      })]
    }), showConfirmationModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      isDanger: true,
      type: "confirm",
      header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "f9PwAQ",
        defaultMessage: [{
          "type": 0,
          "value": "Pause Virtual Card"
        }]
      }),
      continueLabel: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "VirtualCards.PauseCard",
        defaultMessage: [{
          "type": 0,
          "value": "Pause Card"
        }]
      }),
      onClose: () => setShowConfirmationModal(false),
      continueHandler: async () => {
        await handlePauseUnpause();
        setShowConfirmationModal(false);
      },
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "6VPa5L",
          defaultMessage: [{
            "type": 0,
            "value": "This will pause the virtual card. To unpause, you will need to contact the host."
          }]
        })
      })
    }), isEditingVirtualCard && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_EditVirtualCardModal__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
      host: host,
      onSuccess: handleActionSuccess,
      onClose: () => setIsEditingVirtualCard(false),
      virtualCard: virtualCard
    }), isDeletingVirtualCard && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_DeleteVirtualCardModal__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
      host: host,
      onSuccess: handleActionSuccess,
      onDeleteRefetchQuery: props.onDeleteRefetchQuery,
      onClose: () => setIsDeletingVirtualCard(false),
      virtualCard: virtualCard
    })]
  });
};

const getLimitIntervalString = spendingLimitInterval => {
  switch (spendingLimitInterval) {
    case _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.DAILY */ .nV.DAILY:
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["/", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "aVqg31",
          defaultMessage: [{
            "type": 0,
            "value": "day"
          }]
        })]
      });

    case _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.WEEKLY */ .nV.WEEKLY:
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["/", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "ZqbBGv",
          defaultMessage: [{
            "type": 0,
            "value": "wk"
          }]
        })]
      });

    case _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.MONTHLY */ .nV.MONTHLY:
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["/", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "Frequency.Monthly.Short",
          defaultMessage: [{
            "type": 0,
            "value": "mo"
          }]
        })]
      });

    case _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.YEARLY */ .nV.YEARLY:
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["/", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "Frequency.Yearly.Short",
          defaultMessage: [{
            "type": 0,
            "value": "yr"
          }]
        })]
      });

    default:
      return null;
  }
};

const getLimitString = ({
  spendingLimitAmount,
  spendingLimitInterval,
  spendingLimitRenewsOn,
  remainingLimit,
  currency,
  locale
}) => {
  if (!spendingLimitAmount) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "VirtualCards.NoLimit",
      defaultMessage: [{
        "type": 0,
        "value": "No Limit"
      }]
    });
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: spendingLimitInterval === _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.PER_AUTHORIZATION */ .nV.PER_AUTHORIZATION ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "VirtualCards.LimitedToPerAuthorization",
      defaultMessage: [{
        "type": 0,
        "value": "Limited to "
      }, {
        "type": 1,
        "value": "limit"
      }, {
        "type": 0,
        "value": " per authorization"
      }],
      values: {
        limit: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_7__/* .formatCurrency */ .xG)(spendingLimitAmount, currency, {
          locale
        })
      }
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "VirtualCards.AvailableOfLimit",
        defaultMessage: [{
          "type": 0,
          "value": "Avl. "
        }, {
          "type": 1,
          "value": "available"
        }, {
          "type": 0,
          "value": " of "
        }, {
          "type": 1,
          "value": "limit"
        }, {
          "type": 1,
          "value": "interval"
        }],
        values: {
          available: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_7__/* .formatCurrency */ .xG)(remainingLimit, currency, {
            locale
          }),
          limit: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_7__/* .formatCurrency */ .xG)(spendingLimitAmount, currency, {
            locale
          }),
          interval: getLimitIntervalString(spendingLimitInterval)
        }
      }), spendingLimitInterval === _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_10__/* .VirtualCardLimitInterval.ALL_TIME */ .nV.ALL_TIME ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["\xA0\u2022\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "VirtualCards.LimitDoesNotRenew",
          defaultMessage: [{
            "type": 0,
            "value": "Limit does not renew"
          }]
        })]
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: ["\xA0\u2022\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "tARVTJ",
          defaultMessage: [{
            "type": 0,
            "value": "Renews on "
          }, {
            "type": 3,
            "value": "renewsOnDate",
            "style": "medium"
          }],
          values: {
            renewsOnDate: new Date(spendingLimitRenewsOn)
          }
        })]
      })]
    })
  });
};

const VirtualCard = props => {
  const [displayDetails, setDisplayDetails] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .useToasts */ .e1)();
  const {
    virtualCard
  } = props;
  const isActive = virtualCard.data.state === 'OPEN' || virtualCard.data.status === 'active';
  const name = virtualCard.name || '';
  const cardNumber = `****  ****  ****  ${virtualCard.last4}`;

  const handleCopy = value => () => {
    navigator.clipboard.writeText(value);
    addToast({
      type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
      message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "Clipboard.Copied",
        defaultMessage: [{
          "type": 0,
          "value": "Copied!"
        }]
      })
    });
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(CardContainer, {
    width: "366px",
    height: "248px",
    flexDirection: "column",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx("div", {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
      flexGrow: 1,
      m: "24px 24px 0 24px",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        justifyContent: "space-between",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
          children: name
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(StateLabel, {
          isActive: isActive,
          children: (virtualCard.data.state || virtualCard.data.status).toUpperCase()
        })]
      }), displayDetails ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          mt: "27px",
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: [virtualCard.privateData.cardNumber.replace(/\d{4}(?=.)/g, '$& '), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
            color: "black",
            ml: 2,
            onClick: handleCopy(virtualCard.privateData.cardNumber),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2__.Copy, {
              size: "18px"
            })
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          fontSize: "12px",
          fontWeight: "500",
          lineHeight: "16px",
          textTransform: "uppercase",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "VirtualCards.CardNumber",
            defaultMessage: [{
              "type": 0,
              "value": "Card Number"
            }]
          }), ' ']
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
            mt: "19px",
            mr: 4,
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "18px",
              fontWeight: "700",
              lineHeight: "26px",
              children: [// expireDate should be removed once https://github.com/opencollective/opencollective-api/pull/7307 is deployed to production
              virtualCard.privateData.expireDate || virtualCard.privateData.expiryDate, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
                color: "black",
                ml: 2,
                onClick: // expireDate should be removed once https://github.com/opencollective/opencollective-api/pull/7307 is deployed to production
                handleCopy(virtualCard.privateData.expireDate || virtualCard.privateData.expiryDate),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2__.Copy, {
                  size: "18px"
                })
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "12px",
              fontWeight: "500",
              lineHeight: "16px",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "VirtualCards.ExpireDate",
                defaultMessage: [{
                  "type": 0,
                  "value": "MM/YYYY"
                }]
              }), ' ']
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
            mt: "19px",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "18px",
              fontWeight: "700",
              lineHeight: "26px",
              children: [virtualCard.privateData.cvv, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
                color: "black",
                ml: 2,
                onClick: handleCopy(virtualCard.privateData.cvv),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
                  position: "relative",
                  display: "inline-block",
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_styled_icons_feather_Copy__WEBPACK_IMPORTED_MODULE_2__.Copy, {
                    size: "18px"
                  })
                })
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "12px",
              fontWeight: "500",
              lineHeight: "16px",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "VirtualCards.CVV",
                defaultMessage: [{
                  "type": 0,
                  "value": "CVV"
                }]
              }), ' ']
            })]
          })]
        })]
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          mt: "18px",
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          letterSpacing: "0",
          children: cardNumber
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
          mt: "8px",
          fontSize: "13px",
          fontWeight: "500",
          lineHeight: "20px",
          letterSpacing: "0",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
            href: `/${virtualCard.account.slug}`,
            color: "white.full",
            hoverColor: "white.transparent.72",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .ZP, {
              collective: virtualCard.account,
              radius: "20px",
              display: "inline-block",
              mr: 2,
              verticalAlign: "middle"
            }), ' ', virtualCard.account.name]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          mt: "16px",
          fontSize: "11px",
          fontWeight: "400",
          lineHeight: "16px",
          letterSpacing: "0",
          children: getLimitString(_objectSpread(_objectSpread({}, virtualCard), {}, {
            locale: intl.locale
          }))
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          mt: "8px",
          fontSize: "11px",
          fontWeight: "400",
          lineHeight: "16px",
          letterSpacing: "0",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "VirtualCards.AssignedOnDateTo",
            defaultMessage: [{
              "type": 0,
              "value": "Assigned on "
            }, {
              "type": 3,
              "value": "createdAt",
              "style": "medium"
            }, {
              "type": 0,
              "value": " to "
            }, {
              "type": 1,
              "value": "assignedTo"
            }],
            values: {
              createdAt: new Date(virtualCard.createdAt),
              assignedTo: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
                href: `/${virtualCard.assignee.slug}`,
                color: "white.full",
                hoverColor: "white.transparent.72",
                fontWeight: "700",
                children: virtualCard.assignee.name
              })
            }
          })
        })]
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
      backgroundColor: "#fff",
      color: "black.900",
      minHeight: "48px",
      px: "24px",
      justifyContent: 'space-between',
      alignItems: "center",
      shrink: 0,
      children: [(props.canEditVirtualCard || props.canPauseOrResumeVirtualCard || props.canDeleteVirtualCard) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(ActionsButton, {
        virtualCard: virtualCard,
        host: props.host,
        onError: error => addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_8__/* .i18nGraphqlException */ .t2)(intl, error)
        }),
        onDeleteRefetchQuery: props.onDeleteRefetchQuery,
        confirmOnPauseCard: props.confirmOnPauseCard,
        canEditVirtualCard: props.canEditVirtualCard,
        canDeleteVirtualCard: props.canDeleteVirtualCard
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(Action, {
        onClick: () => setDisplayDetails(!displayDetails),
        children: displayDetails ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "closeDetails",
            defaultMessage: [{
              "type": 0,
              "value": "Close Details"
            }]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_icons_DismissIcon__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
            height: "12px",
            width: "12px",
            ml: 2,
            mb: "2px"
          })]
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "VirtualCards.DisplayDetails",
            defaultMessage: [{
              "type": 0,
              "value": "View Card Details"
            }]
          }), "\xA0\u2192"]
        })
      })]
    })]
  });
};

VirtualCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCard",
  "props": {
    "canEditVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canPauseOrResumeVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canDeleteVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "virtualCard": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "last4": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "data": {
            "name": "object",
            "required": false
          },
          "privateData": {
            "name": "object",
            "required": false
          },
          "provider": {
            "name": "string",
            "required": false
          },
          "spendingLimitAmount": {
            "name": "number",
            "required": false
          },
          "spendingLimitInterval": {
            "name": "string",
            "required": false
          },
          "spendingLimitRenewsOn": {
            "name": "string",
            "required": false
          },
          "remainingLimit": {
            "name": "number",
            "required": false
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "createdAt": {
            "name": "string",
            "required": false
          },
          "assignee": {
            "name": "shape",
            "value": {
              "name": {
                "name": "string",
                "required": false
              },
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": false
              },
              "imageUrl": {
                "name": "string",
                "required": false
              },
              "name": {
                "name": "string",
                "required": false
              },
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "confirmOnPauseCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onDeleteRefetchQuery": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VirtualCard);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 38952:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82525);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _admin_panel_queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35950);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69078);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88705);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

















const archiveCollectiveMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation ArchiveCollective($id: Int!) {
    archiveCollective(id: $id) {
      id
      isArchived
    }
  }
`;
const unarchiveCollectiveMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation UnarchiveCollective($id: Int!) {
    unarchiveCollective(id: $id) {
      id
      isArchived
    }
  }
`;

const ArchiveCollective = ({
  collective
}) => {
  const {
    0: archiveStatus,
    1: setArchiveStatus
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    processing: false,
    isArchived: collective.isArchived,
    error: null,
    confirmationMsg: ''
  });
  const {
    processing,
    isArchived,
    error,
    confirmationMsg
  } = archiveStatus;
  const defaultAction = isArchived ? 'Archive' : 'Unarchive';
  const {
    0: modal,
    1: setModal
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    type: defaultAction,
    show: false
  });
  const adminPanelMutationParams = {
    refetchQueries: [{
      query: _admin_panel_queries__WEBPACK_IMPORTED_MODULE_6__/* .adminPanelQuery */ .l,
      variables: {
        slug: collective.slug
      },
      context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
    }]
  };
  const [archiveCollective] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(archiveCollectiveMutation, adminPanelMutationParams);
  const [unarchiveCollective] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(unarchiveCollectiveMutation, adminPanelMutationParams);

  const handleArchiveCollective = async ({
    id
  }) => {
    setModal({
      type: 'Archive',
      show: false
    });

    try {
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: true
      }));
      await archiveCollective({
        variables: {
          id
        }
      });
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: false,
        isArchived: true
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const handleUnarchiveCollective = async ({
    id
  }) => {
    setModal({
      type: 'Unarchive',
      show: false
    });

    try {
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: true
      }));
      await unarchiveCollective({
        variables: {
          id
        }
      });
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: false,
        isArchived: false
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setArchiveStatus(_objectSpread(_objectSpread({}, archiveStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const hasBalance = collective.stats.balance > 0 && (collective.type === 'COLLECTIVE' || collective.type === 'FUND');

  const closeModal = () => setModal(_objectSpread(_objectSpread({}, modal), {}, {
    show: false
  }));

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.title",
        defaultMessage: [{
          "type": 0,
          "value": "Archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
      mb: 3,
      lineHeight: "16px",
      fontSize: "14px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.description",
        defaultMessage: [{
          "type": 0,
          "value": "Archiving "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " means it will visually appear inactive and no new activity will be allowed."
        }],
        values: {
          type: collective.type
        }
      }), "\xA0", collective.type === 'COLLECTIVE' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.subscriptions",
        defaultMessage: [{
          "type": 0,
          "value": "Recurring financial contributions will be automatically canceled."
        }]
      })]
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
      my: 3,
      color: "#ff5252",
      children: error
    }), !isArchived && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      onClick: () => setModal({
        type: 'Archive',
        show: true
      }),
      loading: processing,
      disabled: collective.isHost || hasBalance,
      mb: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.title",
        defaultMessage: [{
          "type": 0,
          "value": "Archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && hasBalance && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.availableBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Only "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Funds"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collectives"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with a balance of zero can be archived. To pay out the funds, submit an expense, donate to another Collective, or send the funds to your Fiscal Host using the 'empty balance' option."
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && collective.isHost && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: collective.type === _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.selfHosted",
        defaultMessage: [{
          "type": 0,
          "value": "To archive this Independent Collective, first go to your "
        }, {
          "type": 8,
          "value": "SettingsLink",
          "children": [{
            "type": 0,
            "value": "Fiscal Host settings"
          }]
        }, {
          "type": 0,
          "value": " and click 'Reset Fiscal Host'."
        }],
        values: {
          SettingsLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_8__/* .getI18nLink */ .fw)({
            href: `/${collective.host?.slug}/admin/host`
          })
        }
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.archive.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You can't archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "your Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "your account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " while being a Host. Please deactivate as Host first (in your Fiscal Hosting settings)."
        }],
        values: {
          type: collective.type
        }
      })
    }), isArchived && confirmationMsg && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      withIcon: true,
      type: "info",
      mb: 4,
      children: confirmationMsg
    }), isArchived && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      onClick: () => setModal({
        type: 'Unarchive',
        show: true
      }),
      loading: processing,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.unarchive.button",
        defaultMessage: [{
          "type": 0,
          "value": "Unarchive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), modal.show && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalHeader */ .xB, {
        onClose: closeModal,
        children: modal.type === 'Unarchive' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "unarchive.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Unarchive "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "archive.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Archive "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalBody */ .fe, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
          children: [modal.type !== 'Unarchive' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "archive.account.confirmation",
              defaultMessage: [{
                "type": 0,
                "value": "Are you sure you want to archive "
              }, {
                "type": 5,
                "value": "type",
                "options": {
                  "EVENT": {
                    "value": [{
                      "type": 0,
                      "value": "this Event"
                    }]
                  },
                  "PROJECT": {
                    "value": [{
                      "type": 0,
                      "value": "this Project"
                    }]
                  },
                  "FUND": {
                    "value": [{
                      "type": 0,
                      "value": "this Fund"
                    }]
                  },
                  "COLLECTIVE": {
                    "value": [{
                      "type": 0,
                      "value": "this Collective"
                    }]
                  },
                  "ORGANIZATION": {
                    "value": [{
                      "type": 0,
                      "value": "this Organization"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "this account"
                    }]
                  }
                }
              }, {
                "type": 0,
                "value": "?"
              }],
              values: {
                type: collective.type
              }
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              fontSize: 13,
              type: "warning",
              withIcon: true,
              mt: 3,
              mb: 3,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "kyC4C+",
                defaultMessage: [{
                  "type": 0,
                  "value": "Note that archiving will cancel all active recurring contributions."
                }]
              })
            })]
          }), modal.type === 'Unarchive' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "unarchive.account.confirmation",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to unarchive "
            }, {
              "type": 5,
              "value": "type",
              "options": {
                "EVENT": {
                  "value": [{
                    "type": 0,
                    "value": "this Event"
                  }]
                },
                "PROJECT": {
                  "value": [{
                    "type": 0,
                    "value": "this Project"
                  }]
                },
                "FUND": {
                  "value": [{
                    "type": 0,
                    "value": "this Fund"
                  }]
                },
                "COLLECTIVE": {
                  "value": [{
                    "type": 0,
                    "value": "this Collective"
                  }]
                },
                "ORGANIZATION": {
                  "value": [{
                    "type": 0,
                    "value": "this Organization"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "this account"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              type: collective.type
            }
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalFooter */ .mz, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            mx: 20,
            onClick: () => setModal(_objectSpread(_objectSpread({}, modal), {}, {
              show: false
            })),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: () => {
              if (modal.type === 'Unarchive') {
                handleUnarchiveCollective({
                  id: collective.id
                });
              } else {
                handleArchiveCollective({
                  id: collective.id
                });
              }
            },
            children: modal.type === 'Unarchive' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "collective.unarchive.confirm.btn",
              defaultMessage: [{
                "type": 0,
                "value": "Unarchive"
              }]
            }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "collective.archive.confirm.btn",
              defaultMessage: [{
                "type": 0,
                "value": "Archive"
              }]
            })
          })]
        })
      })]
    })]
  });
};

ArchiveCollective.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ArchiveCollective",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "archiveCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "unarchiveCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ArchiveCollective);

/***/ }),

/***/ 42554:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82525);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69078);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88705);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _UserProvider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(51927);
/* harmony import */ var _sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
const _excluded = ["collective"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

















const deleteCollectiveMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation DeleteCollective($id: Int!) {
    deleteCollective(id: $id) {
      id
    }
  }
`;
const deleteUserCollectiveMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation DeleteUserCollective($id: Int!) {
    deleteUserCollective(id: $id) {
      id
    }
  }
`;

const DeleteCollective = _ref => {
  let {
    collective
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const {
    0: showModal,
    1: setShowModal
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const {
    0: deleteStatus,
    1: setDeleteStatus
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    deleting: false,
    error: null
  });
  const [deleteCollective] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deleteCollectiveMutation);
  const [deleteUserCollective] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deleteUserCollectiveMutation);
  const isSelfHosted = collective.host?.id === collective.id;

  const handleDelete = async () => {
    try {
      setDeleteStatus(_objectSpread(_objectSpread({}, deleteStatus), {}, {
        deleting: true
      }));

      if (collective.type === 'USER') {
        await deleteUserCollective({
          variables: {
            id: collective.id
          }
        });
      } else {
        await deleteCollective({
          variables: {
            id: collective.id
          }
        });
        await props.refetchLoggedInUser();
      }

      await props.router.push(`/deleteCollective/confirmed?type=${collective.type}`);
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_5__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setDeleteStatus({
        deleting: false,
        error: errorMsg
      });
    }
  };

  const {
    deleting,
    error
  } = deleteStatus;

  const closeModal = () => setShowModal(false);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.title",
        defaultMessage: [{
          "type": 0,
          "value": "Delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      mb: 3,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.description",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "This Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "This Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "This Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "This Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "This Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "This account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " will be deleted, along with all related data."
        }],
        values: {
          type: collective.type
        }
      })
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      my: 3,
      color: "#ff5252",
      children: error
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      onClick: () => setShowModal(true),
      loading: deleting,
      disabled: collective.isHost || !collective.isDeletable,
      mb: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.title",
        defaultMessage: [{
          "type": 0,
          "value": "Delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), collective.isHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: [isSelfHosted ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.selfHost",
        defaultMessage: [{
          "type": 0,
          "value": "To delete this Independent Collective, first go to your "
        }, {
          "type": 8,
          "value": "SettingsLink",
          "children": [{
            "type": 0,
            "value": "Fiscal Host settings"
          }]
        }, {
          "type": 0,
          "value": " and click 'Reset Fiscal Host'."
        }],
        values: {
          SettingsLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_8__/* .getI18nLink */ .fw)({
            href: `/${collective.host?.slug}/admin/host`
          })
        }
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You can't delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "your Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "your account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " while being a Host. Please deactivate as Host first (in your Fiscal Hosting settings)."
        }],
        values: {
          type: collective.type
        }
      }), ' ']
    }), !collective.isDeletable && collective.type !== _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.EVENT */ .eV.EVENT && collective.type !== _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.PROJECT */ .eV.PROJECT && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.delete.isNotDeletable-message",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Funds"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collectives"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "Organizations"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with transactions, orders, events or paid expenses cannot be deleted. Please archive it instead."
        }],
        values: {
          type: collective.type
        }
      }), ' ']
    }), !collective.isDeletable && (collective.type === _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.EVENT */ .eV.EVENT || collective.type === _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.PROJECT */ .eV.PROJECT) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "collective.event.delete.isNotDeletable-message",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with transactions, orders or paid expenses cannot be deleted. Please archive it instead."
        }],
        values: {
          type: collective.type
        }
      })
    }), showModal && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalHeader */ .xB, {
        onClose: closeModal,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "collective.delete.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Delete "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalBody */ .fe, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "collective.delete.modal.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to delete "
            }, {
              "type": 5,
              "value": "type",
              "options": {
                "EVENT": {
                  "value": [{
                    "type": 0,
                    "value": "this Event"
                  }]
                },
                "PROJECT": {
                  "value": [{
                    "type": 0,
                    "value": "this Project"
                  }]
                },
                "FUND": {
                  "value": [{
                    "type": 0,
                    "value": "this Fund"
                  }]
                },
                "COLLECTIVE": {
                  "value": [{
                    "type": 0,
                    "value": "this Collective"
                  }]
                },
                "ORGANIZATION": {
                  "value": [{
                    "type": 0,
                    "value": "this Organization"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "this account"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              type: collective.type
            }
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalFooter */ .mz, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            mx: 20,
            onClick: () => setShowModal(false),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            "data-cy": "delete",
            onClick: () => {
              setShowModal(false);
              handleDelete();
            },
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "actions.delete",
              defaultMessage: [{
                "type": 0,
                "value": "Delete"
              }]
            })
          })]
        })
      })]
    })]
  });
};

DeleteCollective.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteCollective",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "refetchLoggedInUser": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_UserProvider__WEBPACK_IMPORTED_MODULE_12__/* .withUser */ .ns)((0,next_router__WEBPACK_IMPORTED_MODULE_2__.withRouter)(DeleteCollective)));

/***/ }),

/***/ 55923:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82525);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69078);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90998);
/* harmony import */ var _sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36317);
/* harmony import */ var _SendFundsToCollectiveSection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(68530);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_SendFundsToCollectiveSection__WEBPACK_IMPORTED_MODULE_6__]);
_SendFundsToCollectiveSection__WEBPACK_IMPORTED_MODULE_6__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];










const EmptyBalance = ({
  collective,
  LoggedInUser
}) => {
  if (!collective.host || collective.host.id === collective.id) {
    return null;
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_sections_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "collective.balance.title",
        defaultMessage: [{
          "type": 0,
          "value": "Empty "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " balance"
        }],
        values: {
          type: collective.type
        }
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.P, {
      mb: 2,
      lineHeight: "16px",
      fontSize: "14px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "collective.balance.description",
        defaultMessage: [{
          "type": 0,
          "value": "Transfer remaining balance to "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "the Collective"
              }]
            },
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "the Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "the Fiscal Host"
              }]
            }
          }
        }, {
          "type": 0,
          "value": ". "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " balance must be zero to archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "the Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "the Project"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "or change Hosts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": ". "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": []
            },
            "PROJECT": {
              "value": []
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Alternatively, you can submit an expense or donate to another Collective to zero the balance."
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.FUND */ .eV.FUND, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE].includes(collective.type) && !collective.host.hostCollective && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.P, {
      color: "rgb(224, 183, 0)",
      my: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "collective.balance.notAvailable",
        defaultMessage: [{
          "type": 0,
          "value": "The Host doesn't support this feature. Submit an expense, donate to another Collective, or contact support if you're blocked."
        }]
      })
    }), [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.FUND */ .eV.FUND, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE].includes(collective.type) && collective.host.hostCollective && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_SendFundsToCollectiveSection__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
      LoggedInUser: LoggedInUser,
      collective: collective,
      toCollective: collective.host.hostCollective
    }), [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.PROJECT */ .eV.PROJECT, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_2__/* .CollectiveType.EVENT */ .eV.EVENT].includes(collective.type) && collective.parentCollective && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_SendFundsToCollectiveSection__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
      LoggedInUser: LoggedInUser,
      collective: collective,
      toCollective: collective.parentCollective
    })]
  });
};

EmptyBalance.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EmptyBalance",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmptyBalance);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 10446:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ editAccountSettingsMutation)
/* harmony export */ });
/* unused harmony export editCollectiveSettingsMutation */
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32651);


const editCollectiveSettingsMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_1__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {
    editCollective(collective: { id: $id, settings: $settings }) {
      id
      settings
    }
  }
`;
const editAccountSettingsMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  mutation EditAccountSetting($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {
    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      settings
    }
  }
`;

/***/ }),

/***/ 96784:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63901);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_findLast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98145);
/* harmony import */ var lodash_findLast__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_findLast__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10208);
/* harmony import */ var _styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _lib_constants_payout_method__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(56508);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(32651);
/* harmony import */ var _lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(91337);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(47988);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(69078);
/* harmony import */ var _expenses_PayoutBankInformationForm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(38884);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(16159);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(56562);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(53169);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(90998);
/* harmony import */ var _UpdateBankDetailsForm__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(51393);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(46217);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_expenses_PayoutBankInformationForm__WEBPACK_IMPORTED_MODULE_13__]);
_expenses_PayoutBankInformationForm__WEBPACK_IMPORTED_MODULE_13__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






















const hostQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`
  query EditCollectiveBankTransferHost($slug: String) {
    host(slug: $slug) {
      id
      slug
      legacyId
      currency
      settings
      connectedAccounts {
        id
        service
      }
      plan {
        id
        hostedCollectives
        manualPayments
        name
      }
      payoutMethods {
        id
        name
        data
        type
      }
    }
  }
`;
const createPayoutMethodMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`
  mutation EditCollectiveBankTransferCreatePayoutMethod(
    $payoutMethod: PayoutMethodInput!
    $account: AccountReferenceInput!
  ) {
    createPayoutMethod(payoutMethod: $payoutMethod, account: $account) {
      data
      id
      name
      type
    }
  }
`;
const removePayoutMethodMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`
  mutation EditCollectiveBankTransferRemovePayoutMethod($payoutMethodId: String!) {
    removePayoutMethod(payoutMethodId: $payoutMethodId) {
      id
    }
  }
`;
const editBankTransferMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`
  mutation EditCollectiveBankTransfer($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {
    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      settings
    }
  }
`;

const renderBankInstructions = (instructions, bankAccountInfo) => {
  const formatValues = {
    account: bankAccountInfo ? (0,_utils__WEBPACK_IMPORTED_MODULE_20__/* .formatAccountDetails */ .H)(bankAccountInfo) : '',
    reference: '76400',
    OrderId: '76400',
    amount: '$30',
    collective: 'acme'
  };
  return (0,_lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_10__/* .formatManualInstructions */ .U8)(instructions, formatValues);
};

const BankTransfer = props => {
  const {
    loading,
    data
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useQuery)(hostQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: props.collectiveSlug
    }
  });
  const [createPayoutMethod] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useMutation)(createPayoutMethodMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const [removePayoutMethod] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useMutation)(removePayoutMethodMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const [editBankTransfer] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useMutation)(editBankTransferMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const [showForm, setShowForm] = react__WEBPACK_IMPORTED_MODULE_3___default().useState(false);
  const [showRemoveBankConfirmationModal, setShowRemoveBankConfirmationModal] = react__WEBPACK_IMPORTED_MODULE_3___default().useState(false);

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {});
  }

  const existingManualPaymentMethod = !!lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data.host, 'settings.paymentMethods.manual');
  const showEditManualPaymentMethod = !showForm && data.host;
  const existingPayoutMethod = data.host.payoutMethods.find(pm => pm.data.isManualBankTransfer);
  const useStructuredForm = !existingManualPaymentMethod || existingManualPaymentMethod && existingPayoutMethod ? true : false;
  const instructions = data.host.settings?.paymentMethods?.manual?.instructions || _lib_constants_payout_method__WEBPACK_IMPORTED_MODULE_8__/* .BANK_TRANSFER_DEFAULT_INSTRUCTIONS */ .kD; // Fix currency if the existing payout method already matches the collective currency
  // or if it was already defined by Stripe

  const existingPayoutMethodMatchesCurrency = existingPayoutMethod?.data?.currency === data.host.currency;
  const isConnectedToStripe = data.host.connectedAccounts?.find?.(ca => ca.service === 'stripe');
  const fixedCurrency = useStructuredForm && (existingPayoutMethodMatchesCurrency || isConnectedToStripe) && data.host.currency;

  const initialValues = _objectSpread(_objectSpread({}, existingPayoutMethod || {
    data: {
      currency: fixedCurrency || data.host.currency
    }
  }), {}, {
    instructions
  });

  const latestBankAccount = lodash_findLast__WEBPACK_IMPORTED_MODULE_2___default()(data?.host?.payoutMethods, payoutMethod => payoutMethod.type === _lib_constants_payout_method__WEBPACK_IMPORTED_MODULE_8__/* .PayoutMethodType.BANK_ACCOUNT */ .Nk.BANK_ACCOUNT);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
    className: "EditPaymentMethods",
    flexDirection: "column",
    children: [showEditManualPaymentMethod && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
          id: "editCollective.receivingMoney.bankTransfers",
          defaultMessage: [{
            "type": 0,
            "value": "Bank Transfers"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          fontSize: "12px",
          mt: 2,
          color: "black.600",
          textAlign: "left",
          children: data.host.plan.manualPayments ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "paymentMethods.manual.add.info",
            defaultMessage: [{
              "type": 0,
              "value": "Define instructions for contributions via bank transfer. When funds arrive, you can mark them as confirmed to credit the budget balance."
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "paymentMethods.manual.upgradePlan",
            defaultMessage: [{
              "type": 0,
              "value": "Subscribe to our special plans for hosts"
            }]
          })
        })
      }), existingManualPaymentMethod && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
        pt: 2,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          fontSize: "12px",
          mt: 2,
          mb: 2,
          color: "black.600",
          textAlign: "left",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "13qBPb",
            defaultMessage: [{
              "type": 0,
              "value": "Preview of bank transfer instructions"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("pre", {
          style: {
            whiteSpace: 'pre-wrap'
          },
          children: renderBankInstructions(instructions, latestBankAccount?.data)
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
        alignItems: "center",
        my: 2,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          buttonStyle: "standard",
          buttonSize: "small",
          disabled: !data.host.plan.manualPayments,
          onClick: () => {
            setShowForm(true);
            props.hideTopsection(true);
          },
          children: existingManualPaymentMethod ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "paymentMethods.manual.edit",
            defaultMessage: [{
              "type": 0,
              "value": "Edit bank details"
            }]
          }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_5__.Add, {
              size: "1em"
            }), '  ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "paymentMethods.manual.add",
              defaultMessage: [{
                "type": 0,
                "value": "Set bank details"
              }]
            })]
          })
        }), ' ', existingManualPaymentMethod && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          mt: [2, 0],
          buttonStyle: "standard",
          buttonSize: "small",
          disabled: !data.host.plan.manualPayments,
          onClick: () => {
            setShowRemoveBankConfirmationModal(true);
          },
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "D0TAWz",
            defaultMessage: [{
              "type": 0,
              "value": "Remove bank details"
            }]
          })
        })]
      })]
    }), showForm && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(formik__WEBPACK_IMPORTED_MODULE_6__.Formik, {
      initialValues: initialValues,
      onSubmit: async (values, {
        setSubmitting
      }) => {
        const {
          data,
          instructions
        } = values;

        if (data?.currency && data?.type) {
          await createPayoutMethod({
            variables: {
              payoutMethod: {
                data: _objectSpread(_objectSpread({}, data), {}, {
                  isManualBankTransfer: true
                }),
                type: 'BANK_ACCOUNT'
              },
              account: {
                slug: props.collectiveSlug
              }
            }
          });
        }

        await editBankTransfer({
          variables: {
            key: 'paymentMethods.manual.instructions',
            value: instructions,
            account: {
              slug: props.collectiveSlug
            }
          },
          refetchQueries: [{
            query: hostQuery,
            context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T,
            variables: {
              slug: props.collectiveSlug
            }
          }],
          awaitRefetchQueries: true
        });
        setSubmitting(false);
        setShowForm(false);
        props.hideTopsection(false);
      },
      children: ({
        handleSubmit,
        isSubmitting,
        setFieldValue,
        values
      }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("form", {
        onSubmit: handleSubmit,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "paymentMethods.manual.HowDoesItWork",
            defaultMessage: [{
              "type": 0,
              "value": "How does it work?"
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
          flexDirection: ['column', 'row'],
          alignItems: ['center', 'start'],
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
            mr: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "paymentMethod.manual.edit.description",
              defaultMessage: [{
                "type": 0,
                "value": "Contributors can choose \"Bank Transfer\" as a payment method at checkout and instructions will be automatically emailed to them. Once received, you can mark the transaction as confirmed to credit the budget on Open Collective."
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Image__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
            alt: "",
            src: "/static/images/ManualPaymentMethod-BankTransfer.png",
            width: 350,
            height: 168
          })]
        }), useStructuredForm && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
            mt: 4,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "paymentMethods.manual.bankInfo.title",
              defaultMessage: [{
                "type": 0,
                "value": "Add your bank account information"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
            mr: 2,
            flexDirection: "column",
            width: [1, 0.5],
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_expenses_PayoutBankInformationForm__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              getFieldName: string => string,
              fixedCurrency: fixedCurrency,
              ignoreBlockedCurrencies: false,
              isNew: true,
              optional: true
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "paymentMethods.manual.instructions.title",
            defaultMessage: [{
              "type": 0,
              "value": "Define instructions"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
          mr: 2,
          flexGrow: 1,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_UpdateBankDetailsForm__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
            value: instructions,
            onChange: ({
              instructions
            }) => setFieldValue('instructions', instructions),
            useStructuredForm: useStructuredForm,
            bankAccount: values.data
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Box */ .xu, {
          my: 3,
          textAlign: ['center', 'left'],
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            mr: 2,
            buttonStyle: "standard",
            buttonSize: "medium",
            onClick: () => {
              setShowForm(false);
              props.hideTopsection(false);
            },
            disabled: isSubmitting,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            buttonSize: "medium",
            type: "submit",
            disabled: isSubmitting,
            loading: isSubmitting,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })]
      })
    }), showRemoveBankConfirmationModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      width: "100%",
      maxWidth: "570px",
      onClose: () => {
        setShowRemoveBankConfirmationModal(false);
      },
      header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
        id: "GW8+0X",
        defaultMessage: [{
          "type": 0,
          "value": "Remove Bank Account"
        }]
      }),
      continueHandler: async () => {
        const paymentMethods = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data.host, 'settings.paymentMethods');

        const modifiedPaymentMethods = lodash_omit__WEBPACK_IMPORTED_MODULE_0___default()(paymentMethods, 'manual');

        if (latestBankAccount) {
          await removePayoutMethod({
            variables: {
              payoutMethodId: latestBankAccount.id
            }
          });
        }

        await editBankTransfer({
          variables: {
            key: 'paymentMethods',
            value: modifiedPaymentMethods,
            account: {
              slug: props.collectiveSlug
            }
          },
          refetchQueries: [{
            query: hostQuery,
            context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T,
            variables: {
              slug: props.collectiveSlug
            }
          }],
          awaitRefetchQueries: true
        });
        setShowRemoveBankConfirmationModal(false);
      },
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
        fontSize: "14px",
        lineHeight: "18px",
        mt: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
          id: "kNxL0S",
          defaultMessage: [{
            "type": 0,
            "value": "Are you sure you want to remove bank account details?"
          }]
        })
      })
    })]
  });
};

BankTransfer.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "BankTransfer",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_7__.injectIntl)(BankTransfer));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 85004:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35007);
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(46555);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(69078);
/* harmony import */ var _GoalsCover__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(75593);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(92129);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(87268);
/* harmony import */ var _StyledCheckbox__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(41433);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(87262);
/* harmony import */ var _StyledInputGroup__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(32631);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(66943);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(93150);
/* harmony import */ var _SettingsSubtitle__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(18656);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_6__, _GoalsCover__WEBPACK_IMPORTED_MODULE_9__, _StyledInputField__WEBPACK_IMPORTED_MODULE_16__]);
([uuid__WEBPACK_IMPORTED_MODULE_6__, _GoalsCover__WEBPACK_IMPORTED_MODULE_9__, _StyledInputField__WEBPACK_IMPORTED_MODULE_16__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





















const BORDER = '1px solid #efefef';

const getInterpolationOption = value => ({
  label: lodash_startCase__WEBPACK_IMPORTED_MODULE_0___default()(value),
  value
});

const INTERPOLATION_OPTIONS = ['auto', 'logarithm', 'linear'].map(getInterpolationOption);

class CollectiveGoals extends (react__WEBPACK_IMPORTED_MODULE_3___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "editGoal", (index, fieldName, value) => {
      if (value === 'onetime') {
        value = null;
      }

      this.setState(state => {
        const goal = state.goals[index];

        const updatedGoal = _objectSpread(_objectSpread({}, goal), {}, {
          type: goal.type || this.defaultType,
          [fieldName]: value
        });

        const updatedGoals = [...state.goals];
        updatedGoals[index] = updatedGoal;
        return {
          isTouched: true,
          goals: updatedGoals
        };
      });
    });

    _defineProperty(this, "toggleGoalsOnCollectivePage", ({
      checked
    }) => {
      this.setState(state => ({
        isTouched: true,
        collectivePage: _objectSpread(_objectSpread({}, state.collectivePage), {}, {
          showGoals: checked
        })
      }));
    });

    _defineProperty(this, "addGoal", () => {
      const newGoal = {
        type: this.defaultType,
        key: (0,uuid__WEBPACK_IMPORTED_MODULE_6__.v4)()
      };
      this.setState(state => ({
        isTouched: true,
        goals: [...state.goals, newGoal]
      }));
    });

    _defineProperty(this, "removeGoal", index => {
      this.setState(state => {
        if (index < 0 || index > state.goals.length) {
          return null;
        } else {
          const updatedGoals = [...state.goals];
          updatedGoals.splice(index, 1);
          return {
            isTouched: true,
            goals: updatedGoals
          };
        }
      });
    });

    _defineProperty(this, "handleSubmit", async () => {
      try {
        this.setState({
          isSubmitting: true
        });
        await this.props.editCollectiveSettings({
          variables: {
            id: this.props.collective.id,
            settings: _objectSpread(_objectSpread({}, this.props.collective.settings), {}, {
              goals: this.state.goals,
              goalsInterpolation: this.state.goalsInterpolation,
              collectivePage: this.state.collectivePage
            })
          }
        });
        this.setState({
          isSubmitting: false,
          isTouched: false,
          submitted: true
        });
        setTimeout(() => this.setState({
          submitted: false
        }), 2000);
      } catch (e) {
        this.setState({
          isSubmitting: false,
          error: e.toString()
        });
      }
    });

    _defineProperty(this, "renderGoal", (goal, index) => {
      const {
        intl
      } = this.props;

      const defaultValues = _objectSpread(_objectSpread({}, goal), {}, {
        type: goal.type || this.defaultType
      });

      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        mt: 4,
        pb: 4,
        borderBottom: BORDER,
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("form", {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: this.fields[0].name,
              label: this.fields[0].label,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, {
                width: "100%",
                type: "text",
                placeholder: this.fields[0].placeholder,
                onChange: event => this.editGoal(index, this.fields[0].name, event.target.value),
                value: defaultValues[this.fields[0].name] || ''
              })
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: this.fields[1].name,
              label: this.fields[1].label,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, {
                inputId: `collective-goals-${this.fields[1].name}`,
                options: this.fields[1].options,
                onChange: obj => this.editGoal(index, this.fields[1].name, obj.value),
                isSearchable: false,
                defaultValue: goal.type && {
                  value: goal.type,
                  label: intl.formatMessage(this.messages[goal.type])
                }
              })
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: this.fields[2].name,
              label: this.fields[2].label,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInputGroup__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
                prepend: this.fields[2].pre,
                type: this.fields[2].type,
                placeholder: this.fields[2].placeholder,
                onChange: event => this.editGoal(index, this.fields[2].name, event.target.value * 100),
                value: defaultValues[this.fields[2].name] / 100 || ''
              })
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: this.fields[3].name,
              label: this.fields[3].label,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                placeholder: this.fields[3].placeholder,
                onChange: event => this.editGoal(index, this.fields[3].name, event.target.value),
                value: defaultValues[this.fields[3].name] || '',
                width: "100%"
              })
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          className: "goalActions",
          textAlign: "right",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            isBorderless: true,
            buttonStyle: "dangerSecondary",
            onClick: () => this.removeGoal(index),
            children: intl.formatMessage(this.messages.remove)
          })
        })]
      }, `goal-${index}-${goal.key}`);
    });

    const {
      intl: _intl,
      collective
    } = props;
    this.state = {
      collectivePage: lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective.settings, 'collectivePage', {}),
      isTouched: false,
      error: null,
      submitting: false,
      submitted: false,
      goalsInterpolation: lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective.settings, 'goalsInterpolation', 'auto'),
      goals: lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default()(lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective.settings, 'goals', []), 'amount').map(goal => _objectSpread(_objectSpread({}, goal), {}, {
        key: goal.key || (0,uuid__WEBPACK_IMPORTED_MODULE_6__.v4)()
      }))
    };
    this.defaultType = 'yearlyBudget';
    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.defineMessages)({
      add: {
        id: "goal.add",
        defaultMessage: [{
          "type": 0,
          "value": "Add goal"
        }]
      },
      remove: {
        id: "Remove",
        defaultMessage: [{
          "type": 0,
          "value": "Remove"
        }]
      },
      type: {
        id: "goal.type.label",
        defaultMessage: [{
          "type": 0,
          "value": "Type"
        }]
      },
      balance: {
        id: "goal.balance.label",
        defaultMessage: [{
          "type": 0,
          "value": "Balance"
        }]
      },
      monthlyBudget: {
        id: "MonthlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Monthly budget"
        }]
      },
      yearlyBudget: {
        id: "YearlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Yearly budget"
        }]
      },
      title: {
        id: "goal.title.label",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      },
      description: {
        id: "Fields.description",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      },
      amount: {
        id: "Fields.amount",
        defaultMessage: [{
          "type": 0,
          "value": "Amount"
        }]
      },
      showToggle: {
        id: "goal.show",
        defaultMessage: [{
          "type": 0,
          "value": "Show goals on my Profile page"
        }]
      }
    });

    const getOptions = arr => {
      return arr.map(key => {
        return {
          value: key,
          label: _intl.formatMessage(this.messages[key])
        };
      });
    };

    this.fields = [{
      name: 'title',
      label: _intl.formatMessage(this.messages.title),
      placeholder: 'Please add a title to your new goal',
      maxLength: 64
    }, {
      name: 'type',
      type: 'select',
      options: getOptions(['balance', 'monthlyBudget', 'yearlyBudget']),
      label: _intl.formatMessage(this.messages.type)
    }, {
      name: 'amount',
      pre: props.currency,
      type: 'currency',
      label: _intl.formatMessage(this.messages.amount),
      placeholder: '0.00'
    }, {
      name: 'description',
      type: 'textarea',
      label: _intl.formatMessage(this.messages.description),
      placeholder: 'Tell your community about your goal.'
    }];
  }

  render() {
    const {
      intl,
      collective
    } = this.props;
    const {
      goals,
      goalsInterpolation,
      collectivePage,
      isSubmitting,
      submitted,
      isTouched,
      error
    } = this.state;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        borderBottom: BORDER,
        mb: 4,
        pb: 4,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_SettingsSubtitle__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "EditGoals.Instructions",
            defaultMessage: [{
              "type": 0,
              "value": "You can define custom goals to motivate contributors and track your progress. Goals appear in automated email notifications to your contributors. You can also choose to display them on your Collective by ticking the box below."
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            name: "show-on-collective-page",
            label: intl.formatMessage(this.messages.showToggle),
            onChange: this.toggleGoalsOnCollectivePage,
            defaultChecked: Boolean(collectivePage.showGoals)
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, {
          options: INTERPOLATION_OPTIONS,
          onChange: ({
            value
          }) => this.setState({
            goalsInterpolation: value,
            isTouched: true
          }),
          value: getInterpolationOption(goalsInterpolation),
          isSearchable: false
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        textAlign: "left",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          background: "rgb(245, 247, 250)",
          pt: 5,
          pb: 40,
          px: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_GoalsCover__WEBPACK_IMPORTED_MODULE_9__["default"], {
            collective: _objectSpread(_objectSpread({}, collective), {}, {
              settings: {
                goals
              }
            }),
            interpolation: goalsInterpolation
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          borderTop: BORDER,
          children: goals.map(this.renderGoal)
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        textAlign: "center",
        py: 4,
        mb: 4,
        borderBottom: BORDER,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
          width: "100%",
          color: "#297EFF",
          borderColor: "#297EFF",
          onClick: () => this.addGoal(),
          children: [intl.formatMessage(this.messages.add), " +"]
        })
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        type: "error",
        withIcon: true,
        my: 3,
        children: error
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
        justifyContent: "center",
        flexWrap: "wrap",
        mt: 5,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Link__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          href: `/${collective.slug}`,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            mx: 2,
            minWidth: 200,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "ViewCollectivePage",
              defaultMessage: [{
                "type": 0,
                "value": "View Profile page"
              }]
            })
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
          buttonStyle: "primary",
          onClick: this.handleSubmit,
          loading: isSubmitting,
          disabled: submitted || !isTouched,
          mx: 2,
          minWidth: 200,
          children: submitted ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "saved",
            defaultMessage: [{
              "type": 0,
              "value": "Saved"
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        })]
      })]
    });
  }

}

const editCollectiveSettingsMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {
    editCollective(collective: { id: $id, settings: $settings }) {
      id
      settings
    }
  }
`;
const addEditCollectiveSettingsMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_4__.graphql)(editCollectiveSettingsMutation, {
  name: 'editCollectiveSettings'
});
CollectiveGoals.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "editGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }, {
      "name": "fieldName",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "toggleGoalsOnCollectivePage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "{ checked }",
      "type": null
    }],
    "returns": null
  }, {
    "name": "addGoal",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "removeGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "goal",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CollectiveGoals",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": true
          },
          "slug": {
            "name": "string",
            "required": true
          },
          "settings": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": true
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveSettings": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "title": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_5__.injectIntl)(addEditCollectiveSettingsMutation(CollectiveGoals)));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 23734:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98492);
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97079);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(88705);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90998);
/* harmony import */ var _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(81832);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_EditConnectedAccount__WEBPACK_IMPORTED_MODULE_7__]);
_EditConnectedAccount__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];











const TITLE_OVERRIDE = {
  transferwise: 'Wise'
};

const ConnectedAccounts = props => {
  const connectedAccountsByService = lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default()(props.connectedAccounts, 'service');

  let services = [];

  if (props.services) {
    services = [...props.services, ...services];
  } else {
    if (props.collective.type === 'COLLECTIVE' || props.collective.isHost) {
      services.push('twitter');
    }
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div", {
    className: "EditConnectedAccounts",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
      mb: 4,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "5thSOv",
        defaultMessage: [{
          "type": 0,
          "value": "See "
        }, {
          "type": 8,
          "value": "Link",
          "children": [{
            "type": 0,
            "value": "the documentation"
          }]
        }, {
          "type": 0,
          "value": " to learn more about Connected Accounts."
        }],
        values: {
          Link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_5__/* .getI18nLink */ .fw)({
            href: 'https://docs.opencollective.com/help/fiscal-hosts/fiscal-host-settings/connected-accounts',
            openInNewTab: true
          })
        }
      })
    }), services.map(service => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_4__/* .Box */ .xu, {
      mb: 4,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        children: TITLE_OVERRIDE[service] || (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__/* .capitalize */ .kC)(service)
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_EditConnectedAccount__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
        collective: props.collective,
        service: service,
        connectedAccount: connectedAccountsByService[service] && connectedAccountsByService[service][0],
        variation: props.variation
      })]
    }, `connect-${service}`))]
  });
};

ConnectedAccounts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ConnectedAccounts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "connectedAccounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "editMode": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "services": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "variation": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'SENDING'",
          "computed": false
        }, {
          "value": "'RECEIVING'",
          "computed": false
        }]
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConnectedAccounts);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 893:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82525);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37278);
/* harmony import */ var _PreviewModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43119);
/* harmony import */ var _RichTextEditor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(59139);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_RichTextEditor__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__]);
([_RichTextEditor__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
















const updateCustomMessageMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation UpdateCustomMessage($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {
    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      type
      isActive
      settings
    }
  }
`;

const CustomMessage = ({
  collective
}) => {
  const thankYouMessage = collective?.settings?.customEmailMessage || collective?.parentCollective?.settings?.customEmailMessage;
  const {
    0: customMessage,
    1: setCustomMessage
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(thankYouMessage);
  const {
    0: isModified,
    1: setIsModified
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const {
    0: showPreview,
    1: setShowPreview
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .useToasts */ .e1)();
  const [updateCustomEmailMessage, {
    loading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(updateCustomMessageMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T,
    onError: e => {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "DVdz90",
          defaultMessage: [{
            "type": 0,
            "value": "Error updating custom email message: "
          }, {
            "type": 1,
            "value": "error"
          }],
          values: {
            error: e.message
          }
        })
      });
    },
    onCompleted: () => {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "PoJg0R",
          defaultMessage: [{
            "type": 0,
            "value": "Email message updated"
          }]
        })
      });
    }
  });

  const handleSubmit = async message => {
    await updateCustomEmailMessage({
      variables: {
        account: {
          legacyId: collective.id
        },
        key: 'customEmailMessage',
        value: message || ''
      }
    });
    setIsModified(false);
  };

  const onChange = async value => {
    setCustomMessage(value);
    setIsModified(true);
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
      fontSize: "14px",
      fontWeight: 400,
      lineHeight: "20ppx",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "jRacqf",
        defaultMessage: [{
          "type": 0,
          "value": "Add a custom message to be included in the email sent to financial contributors of your Collective, Project, or Event."
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      mt: "32px",
      mb: "34px",
      borderStyle: "dotted"
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      maxWidth: "1000px",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        justifyContent: "space-between",
        flexDirection: ['column', 'row'],
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          mb: 2,
          fontSize: "18px",
          fontWeight: 700,
          lineHeight: "26px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "+jDZdn",
            defaultMessage: [{
              "type": 0,
              "value": "Custom Message"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          buttonStyle: "secondary",
          buttonSize: "tiny",
          maxWidth: "78px",
          pt: "4px",
          pb: "4px",
          pl: "14px",
          pr: "14px",
          height: "24px",
          onClick: () => setShowPreview(true),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__/* .Span */ .Dr, {
            fontSize: "13px",
            fontWeight: 500,
            lineHeight: "16px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "TJo5E6",
              defaultMessage: [{
                "type": 0,
                "value": "Preview"
              }]
            })
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_RichTextEditor__WEBPACK_IMPORTED_MODULE_9__["default"], {
        kind: "ACCOUNT_CUSTOM_EMAIL",
        inputName: "message",
        onChange: e => onChange(e.target.value),
        defaultValue: customMessage,
        withBorders: true,
        editorMinHeight: "150px",
        maxLength: 500,
        showCount: true
      })]
    }), [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__/* .CollectiveType.EVENT */ .eV.EVENT, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_3__/* .CollectiveType.PROJECT */ .eV.PROJECT].includes(collective.type) ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
      type: "info",
      mt: "24px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
        fontSize: "13px",
        fontWeight: 400,
        lineHeight: "20px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "l/qt37",
          defaultMessage: [{
            "type": 0,
            "value": "The above text will override the customized message set by the parent Collective of this Event or Project."
          }]
        })
      })
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
      type: "info",
      mt: "24px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
        fontSize: "13px",
        fontWeight: 400,
        lineHeight: "20px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "4L4QX2",
          defaultMessage: [{
            "type": 0,
            "value": "The above text will be considered as the default customized email response for all contributions to your Collective, and all of your Events and Projects. You also have the ability to customize the messages for Events & Projects from within their individual Setting's Menus."
          }]
        })
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      justifyContent: ['center', 'left'],
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        disabled: loading || !isModified,
        mt: "35px",
        buttonStyle: "primary",
        width: "157px",
        onClick: () => handleSubmit(customMessage),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "save",
          defaultMessage: [{
            "type": 0,
            "value": "Save"
          }]
        })
      })
    }), showPreview && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_PreviewModal__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      heading: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "XvKF/A",
        defaultMessage: [{
          "type": 0,
          "value": "Preview Notification"
        }]
      }),
      subheading: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "cka+9I",
        defaultMessage: [{
          "type": 0,
          "value": "This is the preview of the email template which your financial contributor will receive."
        }]
      }),
      onClose: () => setShowPreview(false),
      previewImage: "/static/images/custom-email-preview.png",
      imgHeight: "715px",
      imgWidth: "809px"
    })]
  });
};

CustomMessage.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CustomMessage",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "settings": {
            "name": "shape",
            "value": {
              "customEmailMessage": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "parentCollective": {
            "name": "shape",
            "value": {
              "settings": {
                "name": "shape",
                "value": {
                  "customEmailMessage": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "isInheritSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CustomMessage);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 40464:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Mi": () => (/* binding */ getSettingsQuery),
/* harmony export */   "ZP": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "cH": () => (/* binding */ collectiveSettingsV1Query)
/* harmony export */ });
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24298);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40113);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_flatten__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58579);
/* harmony import */ var lodash_flatten__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59591);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(13831);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(99565);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92813);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _styled_icons_fa_solid_InfoCircle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(86954);
/* harmony import */ var _styled_icons_fa_solid_InfoCircle__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_fa_solid_InfoCircle__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(68765);
/* harmony import */ var _styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _lib_collective_sections__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(64453);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(82525);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(32651);
/* harmony import */ var _lib_i18n_navbar_categories__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(86971);
/* harmony import */ var _lib_i18n_collective_page_section__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(42994);
/* harmony import */ var _collective_page_constants__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(24839);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(69078);
/* harmony import */ var _faqs_EditCollectivePageFAQ__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(88694);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(173);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(66943);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(90998);
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(10446);
/* harmony import */ var _SettingsSubtitle__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(18656);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledTooltip__WEBPACK_IMPORTED_MODULE_31__]);
_StyledTooltip__WEBPACK_IMPORTED_MODULE_31__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

































const getSettingsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_7__.gql`
  query GetSettingsForEditCollectivePage($slug: String!) {
    account(slug: $slug) {
      id
      type
      currency
      isActive
      isHost
      settings
      policies {
        EXPENSE_AUTHOR_CANNOT_APPROVE {
          enabled
          amountInCents
          appliesToHostedCollectives
          appliesToSingleAdminCollectives
        }
        COLLECTIVE_MINIMUM_ADMINS {
          numberOfAdmins
          applies
          freeze
        }
      }
      ... on AccountWithHost {
        host {
          id
          policies {
            EXPENSE_AUTHOR_CANNOT_APPROVE {
              enabled
              amountInCents
              appliesToHostedCollectives
              appliesToSingleAdminCollectives
            }
          }
        }
      }
    }
  }
`;
const collectiveSettingsV1Query = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_17__/* .gqlV1 */ .N
/* GraphQL */
`
  query EditCollectivePage($slug: String) {
    Collective(slug: $slug) {
      id
      settings
    }
  }
`;
const ItemContainer = styled_components__WEBPACK_IMPORTED_MODULE_5___default().div.withConfig({
  displayName: "EditCollectivePage__ItemContainer",
  componentId: "sc-jg1dbu-0"
})(["", " background:", ";", ""], props => props.isDragging && (0,styled_components__WEBPACK_IMPORTED_MODULE_5__.css)(["border-color:#99c9ff;background:#f0f8ff;& > *{opacity:0;}"]), props => props.isDragging ? '#f0f8ff' : !props.isDragOverlay ? 'transparent' : props.isSubSection ? props.theme.colors.black[100] : 'white', props => props.isDragOverlay && (0,styled_components__WEBPACK_IMPORTED_MODULE_5__.css)(["box-shadow:0px 4px 6px rgba(26,27,31,0.16);"]));

const CollectiveSectionEntry = ({
  isEnabled,
  version,
  restrictedTo,
  section,
  onSectionToggle,
  collectiveType,
  isSubSection,
  hasData,
  showMissingDataWarning,
  showDragIcon,
  dragHandleProps
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_13__.useIntl)();
  let options = [{
    label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
      id: "EditCollectivePage.ShowSection.AlwaysVisible",
      defaultMessage: [{
        "type": 0,
        "value": "Always visible"
      }]
    }),
    value: 'ALWAYS'
  }, {
    label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
      id: "EditCollectivePage.ShowSection.OnlyAdmins",
      defaultMessage: [{
        "type": 0,
        "value": "Only for admins"
      }]
    }),
    value: 'ADMIN'
  }, {
    label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
      id: "tthToS",
      defaultMessage: [{
        "type": 0,
        "value": "Disabled"
      }]
    }),
    value: 'DISABLED'
  }]; // Remove the "Only for admins" option if it's not a FUND or PROJECT
  // That can be re-considered later

  if (collectiveType !== _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_15__/* .CollectiveType.FUND */ .eV.FUND && collectiveType !== _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_15__/* .CollectiveType.PROJECT */ .eV.PROJECT) {
    options = options.filter(({
      value
    }) => value !== 'ADMIN');
  } // Can't hide the budget, except if already hidden


  if (section === 'budget') {
    if (isEnabled && !lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default()(restrictedTo, ['ADMIN'])) {
      options = options.filter(({
        value
      }) => value !== 'ADMIN' && value !== 'DISABLED');
    } // New budget version not available for


    if (collectiveType !== _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_15__/* .CollectiveType.USER */ .eV.USER) {
      options.push({
        label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
          id: "EditCollectivePage.ShowSection.AlwaysVisibleV2",
          defaultMessage: [{
            "type": 0,
            "value": "New version visible"
          }]
        }),
        value: 'ALWAYS_V2'
      });
    }
  }

  let defaultValue;

  if (!isEnabled) {
    defaultValue = options.find(({
      value
    }) => value === 'DISABLED');
  } else if (restrictedTo && restrictedTo.includes('ADMIN')) {
    defaultValue = options.find(({
      value
    }) => value === 'ADMIN');
  } else if (version === 2) {
    defaultValue = options.find(({
      value
    }) => value === 'ALWAYS_V2');
  } else {
    defaultValue = options.find(({
      value
    }) => value === 'ALWAYS');
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Flex */ .kC, {
    justifyContent: "space-between",
    alignItems: "center",
    padding: "4px 16px",
    children: [showDragIcon && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, _objectSpread(_objectSpread({
      mr: 3,
      cursor: "move"
    }, dragHandleProps), {}, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_12__.DragIndicator, {
        size: 14
      })
    })), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_StyledP, {
      letterSpacing: isSubSection ? undefined : 0,
      fontSize: "14px",
      fontWeight: isSubSection ? '500' : '700',
      children: (0,_lib_i18n_collective_page_section__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(intl, section)
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .ZP, {
      inputId: `section-select-${section}`,
      fontSize: "11px",
      name: `show-section-${section}`,
      defaultValue: defaultValue,
      options: options,
      minWidth: 150,
      isSearchable: false,
      onChange: ({
        value
      }) => {
        const isEnabled = value !== 'DISABLED' || value === 'ALWAYS_V2';
        const restrictedTo = value === 'ADMIN' ? ['ADMIN'] : [];
        const version = value === 'ALWAYS_V2' ? 2 : 1;
        onSectionToggle(section, {
          isEnabled,
          restrictedTo,
          version
        });
      },
      formatOptionLabel: option => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Text__WEBPACK_IMPORTED_MODULE_32__/* .Span */ .Dr, {
        fontSize: "11px",
        children: option.label
      })
    }), showMissingDataWarning && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Box */ .xu, {
      width: 16,
      ml: 2,
      children: !hasData && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z, {
        content: () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
          id: "EditCollectivePage.EmptySection",
          defaultMessage: [{
            "type": 0,
            "value": "This section does not appear to have any associated data and will not appear publicly until it does."
          }]
        }),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_styled_icons_fa_solid_InfoCircle__WEBPACK_IMPORTED_MODULE_11__.InfoCircle, {
          size: 16
        })
      })
    })]
  });
};

const MenuCategory = ({
  item,
  collective,
  onSectionToggle,
  setSubSections,
  dragHandleProps
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_13__.useIntl)();
  const [draggingId, setDraggingId] = react__WEBPACK_IMPORTED_MODULE_6___default().useState(null);

  function handleDragStart(event) {
    setDraggingId(event.active.id);
  }

  function handleDragEnd(event) {
    const {
      active,
      over
    } = event;
    setDraggingId(null);

    if (active.id !== over.id) {
      const oldSubsections = item.sections;
      const oldIndex = oldSubsections.findIndex(item => item.name === active.id);
      const newIndex = oldSubsections.findIndex(item => item.name === over.id);
      const newSections = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.arrayMove)(oldSubsections, oldIndex, newIndex);
      setSubSections(newSections);
    }
  }

  const draggingItem = item.sections.find(item => item.name === draggingId);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)((react__WEBPACK_IMPORTED_MODULE_6___default().Fragment), {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
      display: "flex",
      px: 3,
      py: "10px",
      fontSize: "14px",
      fontWeight: "bold",
      boxShadow: "0 3px 4px 0px #6b6b6b38",
      alignItems: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, _objectSpread(_objectSpread({
        display: "inline-block",
        mr: 3,
        cursor: "move"
      }, dragHandleProps), {}, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_12__.DragIndicator, {
          size: 14
        })
      })), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
        children: (0,_lib_i18n_navbar_categories__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(intl, item.name)
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.DndContext, {
        collisionDetection: _dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.closestCenter,
        onDragStart: handleDragStart,
        onDragEnd: handleDragEnd,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.SortableContext, {
          items: item.sections?.map(item => item.name),
          strategy: _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.verticalListSortingStrategy,
          children: item.sections?.map(section => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Container__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
            pl: 1,
            borderLeft: "8px solid",
            borderColor: "black.200",
            bg: "black.100",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(DraggableItem, {
              id: section.name,
              item: section,
              collective: collective,
              onSectionToggle: onSectionToggle,
              showDragIcon: item.sections.length > 1,
              isSubSection: true
            })
          }, section.name))
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.DragOverlay, {
          children: draggingItem ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(Item, {
            item: draggingItem,
            collective: collective,
            showDragIcon: true,
            isDragOverlay: true,
            isSubSection: true
          }) : null
        })]
      })
    })]
  });
};

const Item = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().forwardRef(({
  dragHandleProps,
  isDragging,
  isDragOverlay,
  style,
  setSubSections,
  onSectionToggle,
  collective,
  item,
  isSubSection,
  showDragIcon
}, ref) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(ItemContainer, {
    ref: ref,
    style: style,
    isDragging: isDragging,
    isDragOverlay: isDragOverlay,
    isSubSection: isSubSection,
    children: item.type === 'CATEGORY' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(MenuCategory, {
      item: item,
      collective: collective,
      onSectionToggle: onSectionToggle,
      setSubSections: setSubSections,
      dragHandleProps: dragHandleProps
    }) : item.type === 'SECTION' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(CollectiveSectionEntry, {
      section: item.name,
      isEnabled: item.isEnabled,
      version: item.version,
      collectiveType: collective.type,
      restrictedTo: item.restrictedTo,
      onSectionToggle: onSectionToggle,
      isSubSection: isSubSection,
      showDragIcon: showDragIcon,
      dragHandleProps: dragHandleProps
    }) : null
  });
});
Item.displayName = 'Item';
const MemoizedItem = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_6__.memo)(Item);

const DraggableItem = props => {
  const {
    attributes,
    listeners,
    isDragging,
    setNodeRef,
    transform,
    transition
  } = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.useSortable)({
    id: props.id
  });
  const style = {
    transform: _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_10__.CSS.Transform.toString(transform),
    transition
  };
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(MemoizedItem, _objectSpread({
    ref: setNodeRef,
    style: style,
    dragHandleProps: _objectSpread(_objectSpread({}, attributes), listeners),
    isDragging: isDragging
  }, props));
};

const EditCollectivePage = ({
  collective
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_13__.useIntl)();
  const [isDirty, setDirty] = react__WEBPACK_IMPORTED_MODULE_6___default().useState(false);
  const [sections, setSections] = react__WEBPACK_IMPORTED_MODULE_6___default().useState([]);
  const [draggingId, setDraggingId] = react__WEBPACK_IMPORTED_MODULE_6___default().useState(null);
  const {
    loading,
    data
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_7__.useQuery)(getSettingsQuery, {
    variables: {
      slug: collective.slug
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_17__/* .API_V2_CONTEXT */ .T
  });
  const [submitSetting, {
    loading: isSubmitting,
    error
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_7__.useMutation)(_mutations__WEBPACK_IMPORTED_MODULE_33__/* .editAccountSettingsMutation */ .T, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_17__/* .API_V2_CONTEXT */ .T,
    // Refresh the settings for GQLV1 cache, to refresh the navbar
    refetchQueries: [{
      query: collectiveSettingsV1Query,
      variables: {
        slug: collective.slug
      }
    }]
  }); // Load sections from fetched collective

  react__WEBPACK_IMPORTED_MODULE_6___default().useEffect(() => {
    if (data?.account) {
      const sections = (0,_lib_collective_sections__WEBPACK_IMPORTED_MODULE_14__/* .getCollectiveSections */ .t4)(data.account);
      setSections(sections);
    }
  }, [data?.account]);

  const onSectionToggle = (selectedSection, {
    isEnabled,
    restrictedTo,
    version
  }) => {
    const newSections = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_4___default()(sections);

    const sectionPath = (0,_lib_collective_sections__WEBPACK_IMPORTED_MODULE_14__/* .getSectionPath */ .YH)(sections, selectedSection);

    lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(newSections, `${sectionPath}`, _objectSpread(_objectSpread({}, lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(newSections, sectionPath)), {}, {
      isEnabled,
      restrictedTo,
      version
    }));

    setSections(newSections);
    setDirty(true);
  };

  function handleDragStart(event) {
    setDraggingId(event.active.id);
  }

  function handleDragEnd(event) {
    const {
      active,
      over
    } = event;
    setDraggingId(null);

    if (active.id !== over.id) {
      const oldIndex = sections.findIndex(item => item.name === active.id);
      const newIndex = sections.findIndex(item => item.name === over.id);
      const newSections = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.arrayMove)(sections, oldIndex, newIndex);
      setSections(newSections);
      setDirty(true);
    }
  }

  const draggingSection = sections.find(section => section.name === draggingId);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.DndContext, {
    collisionDetection: _dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.closestCenter,
    onDragStart: handleDragStart,
    onDragEnd: handleDragEnd,
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_SettingsSubtitle__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
        id: "EditCollectivePage.SectionsDescription",
        defaultMessage: [{
          "type": 0,
          "value": "Drag and drop to reorder sections. Toggle on and off with the visibility setting dropdown. Remember to click save at the bottom!"
        }]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Flex */ .kC, {
      flexWrap: "wrap",
      mt: 4,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Box */ .xu, {
        width: "100%",
        maxWidth: 436,
        children: loading || !sections ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
          height: 400
        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)("div", {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
            mb: 4,
            overflowX: 'visible',
            overflowY: "visible",
            position: "relative",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.SortableContext, {
              items: sections?.map(item => item.name),
              strategy: _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_9__.verticalListSortingStrategy,
              children: sections.map((item, index) => {
                return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)((react__WEBPACK_IMPORTED_MODULE_6___default().Fragment), {
                  children: [index !== 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
                    borderColor: "black.200"
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(DraggableItem, {
                    id: item.name,
                    item: item,
                    collective: collective,
                    onSectionToggle: onSectionToggle,
                    fontWeight: "bold",
                    showDragIcon: true,
                    setSubSections: subSections => {
                      const newSections = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_4___default()(sections);

                      const subSectionsIdx = newSections.findIndex(e => e.type === 'CATEGORY' && e.name === item.name);
                      newSections[subSectionsIdx] = _objectSpread(_objectSpread({}, newSections[subSectionsIdx]), {}, {
                        sections: subSections
                      });
                      setSections(newSections);
                      setDirty(true);
                    }
                  })]
                }, item.name);
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_8__.DragOverlay, {
              children: draggingSection ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(Item, {
                item: draggingSection,
                collective: collective,
                isDragOverlay: true,
                showDragIcon: true
              }) : null
            })]
          }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z, {
            type: "error",
            fontSize: "14px",
            withIcon: true,
            my: 2,
            children: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_16__/* .formatErrorMessage */ .jN)(intl, (0,_lib_errors__WEBPACK_IMPORTED_MODULE_16__/* .getErrorFromGraphqlException */ .H1)(error))
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Flex */ .kC, {
            flexWrap: "wrap",
            alignItems: "center",
            justifyContent: ['center', 'flex-start'],
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
              buttonStyle: "primary",
              m: 2,
              minWidth: 150,
              loading: isSubmitting,
              disabled: !isDirty,
              onClick: async () => {
                await submitSetting({
                  variables: {
                    account: {
                      id: data.account.id
                    },
                    key: 'collectivePage',
                    value: _objectSpread(_objectSpread({}, data.account.settings.collectivePage), {}, {
                      sections,
                      showGoals: lodash_flatten__WEBPACK_IMPORTED_MODULE_3___default()(sections, item => item.sections || item).some(({
                        section
                      }) => section === _collective_page_constants__WEBPACK_IMPORTED_MODULE_20__/* .Sections.GOALS */ .bx.GOALS)
                    })
                  }
                });
                setDirty(false);
              },
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
                id: "save",
                defaultMessage: [{
                  "type": 0,
                  "value": "Save"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Box */ .xu, {
              m: 2,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Link__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                href: `/${collective.slug}`,
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Text__WEBPACK_IMPORTED_MODULE_32__/* .Span */ .Dr, {
                  fontSize: "14px",
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.FormattedMessage, {
                    id: "ViewCollectivePage",
                    defaultMessage: [{
                      "type": 0,
                      "value": "View Profile page"
                    }]
                  })
                })
              })
            })]
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_23__/* .Box */ .xu, {
        ml: [0, null, null, 42],
        maxWidth: 400,
        width: "100%",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx(_faqs_EditCollectivePageFAQ__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          withNewButtons: true,
          withBorderLeft: true
        })
      })]
    })]
  });
};

EditCollectivePage.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditCollectivePage",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditCollectivePage);

var _StyledP = styled_components__WEBPACK_IMPORTED_MODULE_5___default()(_Text__WEBPACK_IMPORTED_MODULE_32__.P).withConfig({
  displayName: "EditCollectivePage___StyledP",
  componentId: "sc-jg1dbu-1"
})({
  flex: '1'
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 13513:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_collective_sections__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(64453);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82525);
/* harmony import */ var _lib_export_file__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15985);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(69078);
/* harmony import */ var _ExportImages__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(91962);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ExportImages__WEBPACK_IMPORTED_MODULE_7__]);
_ExportImages__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
















class Export extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);
  }

  render() {
    const {
      collective
    } = this.props;
    const widgetCode = `<script src="https://opencollective.com/${collective.slug}/banner.js"></script>`;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div", {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        mt: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "Export.Format",
          defaultMessage: [{
            "type": 0,
            "value": "Export "
          }, {
            "type": 1,
            "value": "format"
          }],
          values: {
            format: 'CSV'
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "ExportContributors.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Export your contributor data in "
          }, {
            "type": 1,
            "value": "format"
          }, {
            "type": 0,
            "value": " format"
          }],
          values: {
            format: 'CSV'
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        onClick: async () => await (0,_lib_export_file__WEBPACK_IMPORTED_MODULE_5__/* .exportMembers */ .$G)(collective.slug),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "Export.Format",
          defaultMessage: [{
            "type": 0,
            "value": "Export "
          }, {
            "type": 1,
            "value": "format"
          }],
          values: {
            format: 'CSV'
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        mt: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "Export.Format",
          defaultMessage: [{
            "type": 0,
            "value": "Export "
          }, {
            "type": 1,
            "value": "format"
          }],
          values: {
            format: 'JSON'
          }
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("p", {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "ExportContributors.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Export your contributor data in "
          }, {
            "type": 1,
            "value": "format"
          }, {
            "type": 0,
            "value": " format"
          }],
          values: {
            format: 'JSON'
          }
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("ul", {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "ExportContributors.All",
            defaultMessage: [{
              "type": 0,
              "value": "All contributors: "
            }, {
              "type": 1,
              "value": "link"
            }],
            values: {
              link: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                href: `/${collective.slug}/members/all.json`,
                children: ["https://opencollective.com/", collective.slug, "/members/all.json"]
              })
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "ExportContributors.OnlyIndividuals",
            defaultMessage: [{
              "type": 0,
              "value": "Only individuals: "
            }, {
              "type": 1,
              "value": "link"
            }],
            values: {
              link: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                href: `/${collective.slug}/members/users.json`,
                children: ["https://opencollective.com/", collective.slug, "/members/users.json"]
              })
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("li", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "ExportContributors.OnlyOrganizations",
            defaultMessage: [{
              "type": 0,
              "value": "Only organizations: "
            }, {
              "type": 1,
              "value": "link"
            }],
            values: {
              link: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                href: `/${collective.slug}/members/organizations.json`,
                children: ["https://opencollective.com/", collective.slug, "/members/organizations.json"]
              })
            }
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__.H4, {
        fontSize: "14px",
        fontWeight: "500",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "export.json.parameters.title",
          defaultMessage: [{
            "type": 0,
            "value": "Parameters"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_StyledContainer, {
        as: "table",
        fontSize: "14px",
        mb: 3,
        width: "100%",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("tbody", {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("tr", {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("td", {
              children: "limit"
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("td", {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "export.json.parameters.limit",
                defaultMessage: [{
                  "type": 0,
                  "value": "number of contributors to return"
                }]
              })
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("tr", {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("td", {
              children: "offset"
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("td", {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "export.json.parameters.offset",
                defaultMessage: [{
                  "type": 0,
                  "value": "number of contributors to skip (for paging)"
                }]
              })
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("tr", {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Container__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
              as: "td",
              pr: 2,
              children: "TierId"
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("td", {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "export.json.parameters.TierId",
                defaultMessage: [{
                  "type": 0,
                  "value": "only return contributors that belong to this Tier (select a tier on your Collective page and look at the URL to find its ID)."
                }]
              })
            })]
          })]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
        mb: 4,
        children: [collective.tiers[0] && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div", {
          children: ["e.g.,", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("br", {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("a", {
            href: `/${collective.slug}/members/all.json?limit=10&offset=0&TierId=${collective.tiers[0].id}`,
            children: ["https://opencollective.com/", collective.slug, "/members/all.json?limit=10&offset=0&TierId=", collective.tiers[0].id]
          })]
        }), !collective.tiers[0] && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div", {
          children: ["e.g.,", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("br", {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("a", {
            href: `/${collective.slug}/members/all.json?limit=10&offset=0`,
            children: ["https://opencollective.com/", collective.slug, "/members/all.json?limit=10&offset=0"]
          })]
        })]
      }), !(0,_lib_collective_sections__WEBPACK_IMPORTED_MODULE_3__/* .isOneOfTypes */ .B_)(collective, [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.EVENT */ .eV.EVENT, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.PROJECT */ .eV.PROJECT]) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "export.widget.title",
            defaultMessage: [{
              "type": 0,
              "value": "Widget"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Container__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          as: "pre",
          fontSize: "11px",
          whiteSpace: "pre-wrap",
          mb: 4,
          children: widgetCode
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
          my: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_ExportImages__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            collective: collective
          })
        })]
      })]
    });
  }

}

Export.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Export",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Export);

var _StyledContainer = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Container__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z).withConfig({
  displayName: "Export___StyledContainer",
  componentId: "sc-1g70bs6-0"
})({
  borderSpacing: 16
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 70552:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(34487);
/* harmony import */ var _admin_panel_queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35950);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69078);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(90998);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }















const activateCollectiveAsHostMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation ActivateCollectiveAsHost($id: Int!) {
    activateCollectiveAsHost(id: $id) {
      id
      currency
      isHost
      plan {
        id
        name
      }
    }
  }
`;
const deactivateCollectiveAsHostMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation DeactivateCollectiveAsHost($id: Int!) {
    deactivateCollectiveAsHost(id: $id) {
      id
      currency
      isHost
      plan {
        id
        name
      }
    }
  }
`;
const activateBudgetMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation ActivateHostBudget($id: Int!) {
    activateBudget(id: $id) {
      id
      isActive
    }
  }
`;
const deactivateBudgetMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation DeactivateHostBudget($id: Int!) {
    deactivateBudget(id: $id) {
      id
      isActive
    }
  }
`;

const getCollectiveType = type => {
  switch (type) {
    case 'ORGANIZATION':
      return 'Organization';

    case 'COLLECTIVE':
      return 'Collective';

    default:
      return 'Account';
  }
};

const FiscalHosting = ({
  collective
}) => {
  const isHostAccount = collective.isHost;
  const isBudgetActive = collective.isActive;
  const collectiveType = getCollectiveType(collective.type);
  const {
    0: activateAsHostStatus,
    1: setActivateAsHostStatus
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    processing: false,
    error: null
  });
  const {
    0: activateBudgetStatus,
    1: setActivateBudgetStatus
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    processing: false,
    error: null
  });
  const {
    0: activateAsHostModal,
    1: setActivateAsHostModal
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    type: isHostAccount ? 'Activate' : 'Deactivate',
    show: false
  });
  const {
    0: activateBudgetModal,
    1: setActivateBudgetModal
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
    type: collective.isActive ? 'Activate' : 'Deactivate',
    show: false
  });
  const adminPanelMutationParams = {
    refetchQueries: [{
      query: _admin_panel_queries__WEBPACK_IMPORTED_MODULE_6__/* .adminPanelQuery */ .l,
      variables: {
        slug: collective.slug
      },
      context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T
    }]
  };
  const [activateCollectiveAsHost] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(activateCollectiveAsHostMutation, adminPanelMutationParams);
  const [deactivateCollectiveAsHost] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deactivateCollectiveAsHostMutation, adminPanelMutationParams);
  const [activateBudget] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(activateBudgetMutation);
  const [deactivateBudget] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deactivateBudgetMutation);

  const handleActivateAsHost = async ({
    id
  }) => {
    setActivateAsHostModal({
      type: 'Activate',
      show: false
    });

    try {
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: true
      }));
      await activateCollectiveAsHost({
        variables: {
          id
        }
      });
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: false
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const handleDeactivateAsHost = async ({
    id
  }) => {
    setActivateAsHostModal({
      type: 'Deactivate',
      show: false
    });

    try {
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: true
      }));
      await deactivateCollectiveAsHost({
        variables: {
          id
        }
      });
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: false
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setActivateAsHostStatus(_objectSpread(_objectSpread({}, activateAsHostStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const closeActivateAsHost = () => setActivateAsHostModal(_objectSpread(_objectSpread({}, activateAsHostModal), {}, {
    show: false
  }));

  const handleActivateBudget = async ({
    id
  }) => {
    setActivateBudgetModal({
      type: 'Activate',
      show: false
    });

    try {
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: true
      }));
      await activateBudget({
        variables: {
          id
        }
      });
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: false
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const handleDeactivateBudget = async ({
    id
  }) => {
    setActivateBudgetModal({
      type: 'Deactivate',
      show: false
    });

    try {
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: true
      }));
      await deactivateBudget({
        variables: {
          id
        }
      });
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: false
      }));
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .getErrorFromGraphqlException */ .H1)(err).message;
      setActivateBudgetStatus(_objectSpread(_objectSpread({}, activateBudgetStatus), {}, {
        processing: false,
        error: errorMsg
      }));
    }
  };

  const closeActivateBudget = () => setActivateBudgetModal(_objectSpread(_objectSpread({}, activateBudgetModal), {}, {
    show: false
  }));

  const handlePrimaryBtnClick = () => {
    if (activateBudgetModal.type === 'Deactivate') {
      handleDeactivateBudget({
        id: collective.id
      });
    } else {
      handleActivateBudget({
        id: collective.id
      });
    }
  };

  (0,_lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP)({
    callback: handlePrimaryBtnClick,
    keyMatch: _lib_hooks_useKeyboardKey__WEBPACK_IMPORTED_MODULE_5__/* .ENTER_KEY */ .q7
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    children: [!isHostAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.hostAccount.activate.description",
        defaultMessage: [{
          "type": 0,
          "value": "A Fiscal Host is a legal entity who holds Collective funds in their bank account, manages payouts, and generates invoices and receipts."
        }]
      })
    }), isHostAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "host.deactivate",
        defaultMessage: [{
          "type": 0,
          "value": "Deactivate as Host"
        }]
      })
    }), isHostAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
      mb: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        values: {
          type: collectiveType.toLowerCase()
        },
        id: "collective.hostAccount.deactivate.description",
        defaultMessage: [{
          "type": 0,
          "value": "After deactivating, you will not be able to act as a Host anymore. The profile will remain active as a "
        }, {
          "type": 1,
          "value": "type"
        }, {
          "type": 0,
          "value": "."
        }]
      })
    }), activateAsHostStatus.error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
      color: "#ff5252",
      children: activateAsHostStatus.error
    }), !isHostAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      onClick: () => setActivateAsHostModal({
        type: 'Activate',
        show: true
      }),
      loading: activateAsHostStatus.processing,
      disabled: false,
      my: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.activateAsHost",
        defaultMessage: [{
          "type": 0,
          "value": "Activate as Host"
        }]
      })
    }), isHostAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      onClick: () => setActivateAsHostModal({
        type: 'Deactivate',
        show: true
      }),
      loading: activateAsHostStatus.processing,
      disabled: collective.plan.hostedCollectives > 0,
      mb: 2,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "host.deactivate",
        defaultMessage: [{
          "type": 0,
          "value": "Deactivate as Host"
        }]
      })
    }), collective.plan.hostedCollectives > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        values: {
          hostedCollectives: collective.plan.hostedCollectives
        },
        id: "collective.hostAccount.deactivate.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You are currently hosting "
        }, {
          "type": 1,
          "value": "hostedCollectives"
        }, {
          "type": 0,
          "value": " Collectives. To deactivate, they need to be moved to a different Host or archived."
        }]
      })
    }), activateAsHostModal.show && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, {
      width: "570px",
      onClose: closeActivateAsHost,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalHeader */ .xB, {
        onClose: closeActivateAsHost,
        children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "collective.activateAsHost",
          defaultMessage: [{
            "type": 0,
            "value": "Activate as Host"
          }]
        }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "host.deactivate",
          defaultMessage: [{
            "type": 0,
            "value": "Deactivate as Host"
          }]
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalBody */ .fe, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
          mb: "1rem",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.hostAccount.modal.description",
            defaultMessage: [{
              "type": 0,
              "value": "A Fiscal Host is a legal entity (company or individual) who holds Collective funds in their bank account, and can generate invoices and receipts for Financial Contributors."
            }, {
              "type": 1,
              "value": "br"
            }, {
              "type": 0,
              "value": "Think of a Fiscal Host as an umbrella organization for its Collectives."
            }],
            values: {
              br: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx("br", {})
            }
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
          children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.hostAccount.modal.activate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to activate this Fiscal Host?"
            }]
          }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.hostAccount.modal.deactivate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to deactivate this Fiscal Host?"
            }]
          })]
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalFooter */ .mz, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            mx: 20,
            onClick: () => setActivateAsHostModal(_objectSpread(_objectSpread({}, activateAsHostModal), {}, {
              show: false
            })),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: () => {
              if (activateAsHostModal.type === 'Deactivate') {
                handleDeactivateAsHost({
                  id: collective.id
                });
              } else {
                handleActivateAsHost({
                  id: collective.id
                });
              }
            },
            children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "collective.activateAsHost",
              defaultMessage: [{
                "type": 0,
                "value": "Activate as Host"
              }]
            }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "host.deactivate",
              defaultMessage: [{
                "type": 0,
                "value": "Deactivate as Host"
              }]
            })]
          })]
        })
      })]
    }), isHostAccount && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
      children: [!isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        mt: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        })
      }), isBudgetActive && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.deactivate.description",
          defaultMessage: [{
            "type": 0,
            "value": "Your Host Budget is activated. It can receive financial contributions and manage expenses."
          }]
        })
      }), !isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.activate.description",
          defaultMessage: [{
            "type": 0,
            "value": "By activating the Host Budget, it will be able to receive financial contributions and manage expenses."
          }]
        })
      }), activateBudgetStatus.error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
        color: "#ff5252",
        children: activateBudgetStatus.error
      }), !isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        onClick: () => setActivateBudgetModal({
          type: 'Activate',
          show: true
        }),
        loading: activateBudgetStatus.processing,
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        })
      })]
    }), activateBudgetModal.show && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, {
      width: "570px",
      onClose: closeActivateBudget,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalHeader */ .xB, {
        onClose: closeActivateBudget,
        children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FiscalHosting.budget.deactivate",
          defaultMessage: [{
            "type": 0,
            "value": "Deactivate Host Budget"
          }]
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalBody */ .fe, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_10__.P, {
          children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "FiscalHosting.budget.modal.activate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to activate the Host budget?"
            }]
          }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "FiscalHosting.budget.modal.deactivate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to deactivate the Host budget?"
            }]
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_9__/* .ModalFooter */ .mz, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            mx: 20,
            onClick: () => setActivateBudgetModal(_objectSpread(_objectSpread({}, activateBudgetModal), {}, {
              show: false
            })),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: () => handlePrimaryBtnClick(),
            children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "FiscalHosting.budget.activate",
              defaultMessage: [{
                "type": 0,
                "value": "Activate Host Budget"
              }]
            }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "FiscalHosting.budget.deactivate",
              defaultMessage: [{
                "type": 0,
                "value": "Deactivate Host Budget"
              }]
            })]
          })]
        })
      })]
    })]
  });
};

FiscalHosting.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FiscalHosting",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FiscalHosting);

/***/ }),

/***/ 85600:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ sections_GiftCards)
});

// EXTERNAL MODULE: external "lodash/omitBy"
var omitBy_ = __webpack_require__(66011);
var omitBy_default = /*#__PURE__*/__webpack_require__.n(omitBy_);
// EXTERNAL MODULE: external "lodash/last"
var last_ = __webpack_require__(83824);
var last_default = /*#__PURE__*/__webpack_require__.n(last_);
// EXTERNAL MODULE: external "lodash/get"
var get_ = __webpack_require__(1712);
var get_default = /*#__PURE__*/__webpack_require__.n(get_);
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
// EXTERNAL MODULE: external "@apollo/client/react/hoc"
var hoc_ = __webpack_require__(95159);
// EXTERNAL MODULE: external "@styled-icons/material/Add"
var Add_ = __webpack_require__(10208);
// EXTERNAL MODULE: external "memoize-one"
var external_memoize_one_ = __webpack_require__(17809);
var external_memoize_one_default = /*#__PURE__*/__webpack_require__.n(external_memoize_one_);
// EXTERNAL MODULE: external "next/router"
var router_ = __webpack_require__(71853);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: external "@styled-system/theme-get"
var theme_get_ = __webpack_require__(19099);
// EXTERNAL MODULE: external "dayjs"
var external_dayjs_ = __webpack_require__(1635);
var external_dayjs_default = /*#__PURE__*/__webpack_require__.n(external_dayjs_);
// EXTERNAL MODULE: ./lib/currency-utils.js
var currency_utils = __webpack_require__(17632);
// EXTERNAL MODULE: ./components/icons/GiftCard.js
var GiftCard = __webpack_require__(19740);
// EXTERNAL MODULE: ./components/Avatar.tsx
var Avatar = __webpack_require__(11194);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/Link.js
var Link = __webpack_require__(92129);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/GiftCardDetails.js

















const DetailsColumnHeader = external_styled_components_default().span.withConfig({
  displayName: "GiftCardDetails__DetailsColumnHeader",
  componentId: "sc-18b01nd-0"
})(["text-transform:uppercase;color:", ";font-weight:300;white-space:nowrap;"], (0,theme_get_.themeGet)('colors.black.500'));
/** Render a text status to indicate if gift card is claimed, and by whom */

const GiftCardStatus = ({
  isConfirmed,
  collective,
  data
}) => {
  if (isConfirmed) {
    return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
      id: "giftCards.claimedBy",
      defaultMessage: [{
        "type": 0,
        "value": "claimed by "
      }, {
        "type": 1,
        "value": "user"
      }],
      values: {
        user: /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
          href: `/${collective.slug}`,
          children: collective.name
        })
      }
    });
  } else if (get_default()(data, 'email')) {
    return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
      id: "giftCards.sentTo",
      defaultMessage: [{
        "type": 0,
        "value": "sent to "
      }, {
        "type": 1,
        "value": "email"
      }],
      values: {
        email: /*#__PURE__*/jsx_runtime_.jsx("a", {
          href: `mailto:${data.email}`,
          children: data.email
        })
      }
    });
  } else {
    return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
      id: "giftCards.notYetClaimed",
      defaultMessage: [{
        "type": 0,
        "value": "not yet claimed"
      }]
    });
  }
};

/**
 * Render GiftCard details like its status (claimed or not), who claimed it,
 * when was it created... It is not meant to be show to all users, but just to
 * the organizations that create the gift cards.
 */
class GiftCardDetails extends (external_react_default()).Component {
  constructor(props) {
    super(props);
    this.state = {
      expended: false
    };
  }

  toggleExpended() {
    this.setState(state => ({
      expended: !state.expended
    }));
  }

  getStatusColor(isConfirmed, balance, isExpired) {
    const {
      colors
    } = this.props.theme;

    if (balance === 0 || isExpired) {
      return colors.black[200];
    }

    return isConfirmed ? colors.green[500] : colors.yellow[500];
  }

  renderDetails() {
    const {
      giftCard,
      collectiveSlug
    } = this.props;
    const redeemCode = giftCard.uuid.split('-')[0];

    const email = get_default()(giftCard, 'data.email');

    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      mt: "0.75em",
      fontSize: "0.8em",
      children: [!giftCard.isConfirmed && /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        mr: "2em",
        children: [/*#__PURE__*/jsx_runtime_.jsx(DetailsColumnHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.redeemCode",
            defaultMessage: [{
              "type": 0,
              "value": "REDEEM CODE"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
          href: {
            pathname: `/${collectiveSlug}/redeem/${redeemCode}`,
            query: {
              email
            }
          },
          children: redeemCode
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        mr: "2em",
        children: [/*#__PURE__*/jsx_runtime_.jsx(DetailsColumnHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.emmited",
            defaultMessage: [{
              "type": 0,
              "value": "Emitted"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedDate, {
          value: giftCard.createdAt
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        mr: "2em",
        children: [/*#__PURE__*/jsx_runtime_.jsx(DetailsColumnHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.expiryDate",
            defaultMessage: [{
              "type": 0,
              "value": "EXPIRY DATE"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx("span", {
          children: external_dayjs_default()(giftCard.expiryDate).format('MM/YYYY')
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        mr: "2em",
        children: [/*#__PURE__*/jsx_runtime_.jsx(DetailsColumnHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.batch",
            defaultMessage: [{
              "type": 0,
              "value": "Batch name"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx("span", {
          children: giftCard.batch || /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
            fontStyle: "italic",
            color: "black.500",
            children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "giftCards.notBatched",
              defaultMessage: [{
                "type": 0,
                "value": "Not batched"
              }]
            })
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        mr: "2em",
        children: [/*#__PURE__*/jsx_runtime_.jsx(DetailsColumnHeader, {
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.description",
            defaultMessage: [{
              "type": 0,
              "value": "DESCRIPTION"
            }]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx("span", {
          children: giftCard.description
        })]
      })]
    });
  }

  renderValue() {
    const {
      initialBalance,
      currency,
      monthlyLimitPerMember
    } = this.props.giftCard;
    const {
      locale
    } = this.props.intl;
    return monthlyLimitPerMember ? /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
      id: "giftCards.monthlyValue",
      defaultMessage: [{
        "type": 1,
        "value": "value"
      }, {
        "type": 0,
        "value": " monthly"
      }],
      values: {
        value: (0,currency_utils/* formatCurrency */.xG)(monthlyLimitPerMember, currency, {
          locale
        })
      }
    }) : (0,currency_utils/* formatCurrency */.xG)(initialBalance, currency, {
      locale
    });
  }

  render() {
    const {
      isConfirmed,
      collective,
      balance,
      currency,
      expiryDate,
      data
    } = this.props.giftCard;
    const isExpired = Boolean(expiryDate && new Date(expiryDate) < new Date());
    const {
      locale
    } = this.props.intl;
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      "data-cy": "vc-details",
      children: [/*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
        mr: "20px",
        children: isConfirmed ? /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
          href: `/${collective.slug}`,
          title: collective.name,
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Container/* default */.Z, {
            children: [/*#__PURE__*/jsx_runtime_.jsx(GiftCard/* default */.Z, {
              alignSelf: "center",
              size: "2.5em",
              color: this.getStatusColor(isConfirmed, balance, isExpired)
            }), /*#__PURE__*/jsx_runtime_.jsx(_StyledAvatar, {
              collective: collective,
              radius: 24,
              mt: "-1em",
              ml: "1em"
            })]
          })
        }) : /*#__PURE__*/jsx_runtime_.jsx(GiftCard/* default */.Z, {
          alignSelf: "center",
          size: "2.5em",
          color: this.getStatusColor(isConfirmed, balance, isExpired)
        })
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        p: "0.1em",
        children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
          children: [/*#__PURE__*/jsx_runtime_.jsx("strong", {
            children: this.renderValue()
          }), ' ', /*#__PURE__*/jsx_runtime_.jsx(GiftCardStatus, {
            isConfirmed: isConfirmed,
            collective: collective,
            data: data
          })]
        }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          color: this.props.theme.colors.black[500],
          fontSize: "0.9em",
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "giftCards.balance",
              defaultMessage: [{
                "type": 0,
                "value": "Balance: "
              }, {
                "type": 1,
                "value": "balance"
              }],
              values: {
                balance: (0,currency_utils/* formatCurrency */.xG)(balance, currency, {
                  locale
                })
              }
            }), isExpired && /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
              children: [/*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
                mx: 1,
                children: "|"
              }), /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "GiftCard.Expired",
                defaultMessage: [{
                  "type": 0,
                  "value": "Expired"
                }]
              })]
            }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
              mx: 1,
              children: "|"
            }), /*#__PURE__*/jsx_runtime_.jsx(StyledButton/* default */.Z, {
              isBorderless: true,
              buttonSize: "tiny",
              buttonStyle: "secondary",
              fontSize: "11px",
              onClick: () => this.toggleExpended(),
              px: 1,
              children: this.state.expended ? /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "closeDetails",
                defaultMessage: [{
                  "type": 0,
                  "value": "Close Details"
                }]
              }) : /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "viewDetails",
                defaultMessage: [{
                  "type": 0,
                  "value": "View Details"
                }]
              })
            })]
          })
        }), this.state.expended && this.renderDetails()]
      })]
    });
  }

}

GiftCardDetails.__docgenInfo = {
  "description": "Render GiftCard details like its status (claimed or not), who claimed it,\nwhen was it created... It is not meant to be show to all users, but just to\nthe organizations that create the gift cards.",
  "methods": [{
    "name": "toggleExpended",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getStatusColor",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "isConfirmed",
      "type": null
    }, {
      "name": "balance",
      "type": null
    }, {
      "name": "isExpired",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderDetails",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderValue",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "GiftCardDetails",
  "props": {
    "giftCard": {
      "description": "The gift card, which is actually a PaymentMethod",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "Collective slug",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "theme": {
      "description": "@ignore Provided by styled-component withTheme(...)",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore Provided by injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const components_GiftCardDetails = ((0,external_styled_components_.withTheme)((0,external_react_intl_.injectIntl)(GiftCardDetails)));

var _StyledAvatar = external_styled_components_default()(Avatar/* default */.ZP).withConfig({
  displayName: "GiftCardDetails___StyledAvatar",
  componentId: "sc-18b01nd-1"
})({
  position: 'absolute'
});
// EXTERNAL MODULE: ./components/Loading.js
var Loading = __webpack_require__(53169);
// EXTERNAL MODULE: ./components/Pagination.js
var Pagination = __webpack_require__(79045);
// EXTERNAL MODULE: ./components/StyledButtonSet.js
var StyledButtonSet = __webpack_require__(16738);
// EXTERNAL MODULE: ./components/StyledSelect.tsx
var StyledSelect = __webpack_require__(66943);
;// CONCATENATED MODULE: ./components/edit-collective/sections/GiftCards.js




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



















const messages = (0,external_react_intl_.defineMessages)({
  notBatched: {
    id: "giftCards.notBatched",
    defaultMessage: [{
      "type": 0,
      "value": "Not batched"
    }]
  },
  allBatches: {
    id: "giftCards.batches.all",
    defaultMessage: [{
      "type": 0,
      "value": "All batches"
    }]
  }
});
const NOT_BATCHED_KEY = '__not-batched__';
/**
 * A filterable list of gift cards meant to be displayed for organization
 * admins.
 */

class GiftCards extends (external_react_default()).Component {
  constructor(props) {
    super(props);

    _defineProperty(this, "getBatchesOptions", external_memoize_one_default()((batches, selected, intl) => {
      if (!batches || batches.length < 2) {
        return [[], null];
      } else {
        const options = [{
          label: intl.formatMessage(messages.allBatches),
          value: undefined
        }, ...batches.map(batch => ({
          label: `${batch.name || intl.formatMessage(messages.notBatched)} (${batch.count})`,
          value: batch.name || NOT_BATCHED_KEY
        }))];
        return [options, options.find(option => option.value === selected)];
      }
    }));

    this.state = {
      claimedFilter: 'all'
    };
  }

  getQueryParams(picked, newParams) {
    return omitBy_default()(_objectSpread(_objectSpread({}, this.props.router.query), newParams), (value, key) => !value || !picked.includes(key));
  }

  renderFilters(onlyConfirmed) {
    let selected = 'all';

    if (onlyConfirmed) {
      selected = 'redeemed';
    }

    if (onlyConfirmed === false) {
      selected = 'pending';
    }

    const query = this.getQueryParams(['filter', 'batch']);
    return /*#__PURE__*/jsx_runtime_.jsx(StyledButtonSet/* default */.Z, {
      justifyContent: "center",
      mt: [4, 0],
      items: ['all', 'redeemed', 'pending'],
      selected: selected,
      buttonProps: {
        p: 1
      },
      display: "block",
      children: ({
        item,
        isSelected
      }) => /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
        href: {
          pathname: `/${this.props.collectiveSlug}/admin/gift-cards`,
          query: _objectSpread(_objectSpread({}, query), {}, {
            filter: item
          })
        },
        children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text.P, {
          p: "0.5em 1em",
          color: isSelected ? 'white.full' : 'black.800',
          style: {
            margin: 0
          },
          children: [item === 'all' && /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.filterAll",
            defaultMessage: [{
              "type": 0,
              "value": "All"
            }]
          }), item === 'redeemed' && /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.filterRedeemed",
            defaultMessage: [{
              "type": 0,
              "value": "Redeemed"
            }]
          }), item === 'pending' && /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "giftCards.filterPending",
            defaultMessage: [{
              "type": 0,
              "value": "Pending"
            }]
          })]
        })
      })
    });
  }

  renderNoGiftCardMessage(onlyConfirmed) {
    if (onlyConfirmed === undefined) {
      return /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
        href: `/${this.props.collectiveSlug}/admin/gift-cards-create`,
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "giftCards.createFirst",
          defaultMessage: [{
            "type": 0,
            "value": "Create your first gift card!"
          }]
        })
      });
    } else if (onlyConfirmed) {
      return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
        id: "giftCards.emptyClaimed",
        defaultMessage: [{
          "type": 0,
          "value": "No gift cards claimed yet"
        }]
      });
    } else {
      return /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
        id: "giftCards.emptyUnclaimed",
        defaultMessage: [{
          "type": 0,
          "value": "No unclaimed gift cards"
        }]
      });
    }
  }
  /** Get batch options for select. First option is always "No batch" */


  render() {
    const {
      data,
      collectiveSlug,
      intl
    } = this.props;

    const queryResult = get_default()(data, 'Collective.createdGiftCards', {});

    const onlyConfirmed = get_default()(data, 'variables.isConfirmed');

    const batches = get_default()(data, 'Collective.giftCardsBatches');

    const {
      offset,
      limit,
      total,
      paymentMethods = []
    } = queryResult;

    const lastGiftCard = last_default()(paymentMethods);

    const [batchesOptions, selectedOption] = this.getBatchesOptions(batches, get_default()(data, 'variables.batch'), intl);
    return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
      mt: 4,
      children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
        mb: 4,
        children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
          mb: 3,
          flexDirection: ['column-reverse', 'row'],
          justifyContent: "space-between",
          alignItems: "center",
          flexWrap: "wrap",
          children: [this.renderFilters(onlyConfirmed), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
            justifyContent: "center",
            children: /*#__PURE__*/jsx_runtime_.jsx(Link/* default */.Z, {
              href: `/${collectiveSlug}/admin/gift-cards-create`,
              children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledButton/* default */.Z, {
                buttonStyle: "primary",
                buttonSize: "medium",
                children: [/*#__PURE__*/jsx_runtime_.jsx(Add_.Add, {
                  size: "1em"
                }), '  ', /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                  id: "giftCards.create",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Create gift cards"
                  }]
                })]
              })
            })
          })]
        }), batchesOptions.length > 1 && /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          mb: 3,
          children: /*#__PURE__*/jsx_runtime_.jsx(StyledSelect/* default */.ZP, {
            inputId: "batches-options",
            options: batchesOptions,
            onChange: ({
              value
            }) => this.props.router.push({
              pathname: `/${collectiveSlug}/admin/gift-cards`,
              query: this.getQueryParams(['filter', 'batch'], {
                batch: value
              })
            }),
            defaultValue: selectedOption
          })
        })]
      }), data.loading ? /*#__PURE__*/jsx_runtime_.jsx(Loading/* default */.Z, {}) : /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
        "data-cy": "gift-cards-list",
        children: [paymentMethods.length === 0 && /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
          justifyContent: "center",
          mt: "4em",
          children: this.renderNoGiftCardMessage(onlyConfirmed)
        }), paymentMethods.map(v => /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
          children: [/*#__PURE__*/jsx_runtime_.jsx(components_GiftCardDetails, {
            giftCard: v,
            collectiveSlug: this.props.collectiveSlug
          }), v !== lastGiftCard && /*#__PURE__*/jsx_runtime_.jsx("hr", {})]
        }, v.id)), total > limit && /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
          className: "vc-pagination",
          justifyContent: "center",
          mt: 4,
          children: /*#__PURE__*/jsx_runtime_.jsx(Pagination/* default */.Z, {
            offset: offset,
            total: total,
            limit: limit
          })
        })]
      })]
    });
  }

}

const GIFT_CARDS_PER_PAGE = 15;

const getIsConfirmedFromFilter = filter => {
  if (filter === undefined || filter === 'all') {
    return undefined;
  }

  return filter === 'redeemed';
};
/** A query to get the gift cards created by a collective. Must be authenticated. */


const giftCardsQuery = helpers/* gqlV1 */.N
/* GraphQL */
`
  query EditCollectiveGiftCards($CollectiveId: Int, $isConfirmed: Boolean, $limit: Int, $offset: Int, $batch: String) {
    Collective(id: $CollectiveId) {
      id
      giftCardsBatches {
        id
        name
        count
      }
      createdGiftCards(isConfirmed: $isConfirmed, limit: $limit, offset: $offset, batch: $batch) {
        offset
        limit
        total
        paymentMethods {
          id
          uuid
          currency
          name
          service
          type
          batch
          data
          initialBalance
          monthlyLimitPerMember
          balance
          expiryDate
          isConfirmed
          data
          createdAt
          expiryDate
          description
          collective {
            id
            slug
            imageUrl
            type
            name
          }
        }
      }
    }
  }
`;

const getGiftCardsVariablesFromProps = ({
  collectiveId,
  router,
  limit
}) => ({
  CollectiveId: collectiveId,
  isConfirmed: getIsConfirmedFromFilter(router.query.filter),
  batch: router.query.batch === NOT_BATCHED_KEY ? null : router.query.batch,
  offset: Number(router.query.offset) || 0,
  limit: limit || GIFT_CARDS_PER_PAGE
});

const addGiftCardsData = (0,hoc_.graphql)(giftCardsQuery, {
  options: props => ({
    variables: getGiftCardsVariablesFromProps(props),
    fetchPolicy: 'network-only'
  })
});
GiftCards.__docgenInfo = {
  "description": "A filterable list of gift cards meant to be displayed for organization\nadmins.",
  "methods": [{
    "name": "getQueryParams",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "picked",
      "type": null
    }, {
      "name": "newParams",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderFilters",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "onlyConfirmed",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderNoGiftCardMessage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "onlyConfirmed",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "GiftCards",
  "props": {
    "collectiveId": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "limit": {
      "description": "Max number of items to display",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "data": {
      "description": "Provided by graphql",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "Provided by withRouter",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const sections_GiftCards = ((0,router_.withRouter)((0,external_react_intl_.injectIntl)(addGiftCardsData(GiftCards))));

/***/ }),

/***/ 64500:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98492);
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17632);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97079);
/* harmony import */ var _CollectiveCard__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(68654);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _HostsWithData__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(12823);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92129);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97274);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(51082);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90998);
/* harmony import */ var _CreateHostFormWithData__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(81422);
/* harmony import */ var _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(81832);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CreateHostFormWithData__WEBPACK_IMPORTED_MODULE_20__, _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_21__]);
([_CreateHostFormWithData__WEBPACK_IMPORTED_MODULE_20__, _EditConnectedAccount__WEBPACK_IMPORTED_MODULE_21__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
























const OptionLabel = styled_components__WEBPACK_IMPORTED_MODULE_5___default().label.withConfig({
  displayName: "Host__OptionLabel",
  componentId: "sc-p2wcs9-0"
})(["display:block;font-weight:bold;cursor:pointer;"]);
const Fineprint = styled_components__WEBPACK_IMPORTED_MODULE_5___default().div.withConfig({
  displayName: "Host__Fineprint",
  componentId: "sc-p2wcs9-1"
})(["font-size:14px;"]);
const EditCollectiveHostSection = styled_components__WEBPACK_IMPORTED_MODULE_5___default().div.withConfig({
  displayName: "Host__EditCollectiveHostSection",
  componentId: "sc-p2wcs9-2"
})(["h2 label{cursor:pointer;width:auto;}select{cursor:pointer;}"]);

class Host extends (react__WEBPACK_IMPORTED_MODULE_2___default().Component) {
  constructor(props) {
    super(props);
    this.changeHost = this.changeHost.bind(this);
    this.updateSelectedOption = this.updateSelectedOption.bind(this);
    this.state = {
      collective: props.collective,
      showModal: false,
      action: '',
      isSubmitting: false
    };
  }

  updateSelectedOption(option) {
    this.props.router.push({
      pathname: `/${this.props.collective.slug}/admin/host`,
      query: {
        selectedOption: option
      }
    });
  }

  async changeHost(newHost = {
    id: null
  }) {
    const {
      collective
    } = this.props;
    this.setState({
      showModal: false
    });

    if (newHost.id === lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.id')) {
      return;
    }

    this.setState({
      isSubmitting: true
    });

    try {
      await this.props.editCollectiveMutation({
        id: collective.id,
        HostCollectiveId: newHost.id
      });

      if (!newHost.id) {
        this.updateSelectedOption('noHost');
      }
    } finally {
      this.setState({
        isSubmitting: false
      });
    }
  }

  renderLegalNameSetInfoMessage(collective) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      type: "info",
      fontSize: "13px",
      withIcon: true,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "collective.edit.host.legalName.info",
        defaultMessage: [{
          "type": 0,
          "value": "Please set the legal name "
        }, {
          "type": 5,
          "value": "isSelfHosted",
          "options": {
            "false": {
              "value": [{
                "type": 0,
                "value": "of the host"
              }]
            },
            "other": {
              "value": []
            }
          }
        }, {
          "type": 0,
          "value": " in the Info section of "
        }, {
          "type": 8,
          "value": "SettingsLink",
          "children": [{
            "type": 0,
            "value": "the settings"
          }]
        }, {
          "type": 0,
          "value": ". This is required if the legal name is different than the display name for tax and accounting purposes."
        }],
        values: {
          SettingsLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_12__/* .getI18nLink */ .fw)({
            href: `/${collective.host?.slug}/admin`
          }),
          isSelfHosted: collective.id === collective.host?.id
        }
      })
    });
  }

  render() {
    const {
      LoggedInUser,
      collective,
      router,
      intl
    } = this.props;
    const {
      showModal,
      action
    } = this.state;
    const {
      locale
    } = intl;

    const selectedOption = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(router, 'query.selectedOption', 'noHost');

    const hostMembership = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'members', []).find(m => m.role === 'HOST');

    const closeModal = () => this.setState({
      showModal: false
    });

    const showLegalNameInfoBox = LoggedInUser?.isHostAdmin(collective) && !collective?.host?.legalName;

    if (lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.id') === collective.id) {
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "editCollective.selfHost.label",
            defaultMessage: [{
              "type": 5,
              "value": "type",
              "options": {
                "COLLECTIVE": {
                  "value": [{
                    "type": 0,
                    "value": "Your Collective"
                  }]
                },
                "FUND": {
                  "value": [{
                    "type": 0,
                    "value": "Your Fund"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "Your Account"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": " hold its own funds; it doesn't use a Fiscal Host."
            }],
            values: {
              type: collective.type
            }
          })
        }), collective.stats.balance > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("p", {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "editCollective.selfHost.balance",
              defaultMessage: [{
                "type": 0,
                "value": "Current balance: "
              }, {
                "type": 1,
                "value": "balance"
              }, {
                "type": 0,
                "value": "."
              }],
              values: {
                balance: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__/* .formatCurrency */ .xG)(collective.stats.balance, collective.currency, {
                  locale
                }),
                type: collective.type
              }
            }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "editCollective.selfHost.change.balanceNotEmpty",
              defaultMessage: [{
                "type": 0,
                "value": "To change your Fiscal Host, you first need to empty "
              }, {
                "type": 5,
                "value": "type",
                "options": {
                  "COLLECTIVE": {
                    "value": [{
                      "type": 0,
                      "value": "your Collective's balance"
                    }]
                  },
                  "FUND": {
                    "value": [{
                      "type": 0,
                      "value": "your Fund's balance"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "your balance"
                    }]
                  }
                }
              }, {
                "type": 0,
                "value": " by submitting and paying expenses."
              }],
              values: {
                type: collective.type
              }
            })]
          })
        }), showLegalNameInfoBox && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          children: this.renderLegalNameSetInfoMessage(collective)
        }), collective.stats.balance === 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              buttonStyle: "primary",
              type: "submit",
              onClick: () => this.changeHost(),
              minWidth: 200,
              loading: this.state.isSubmitting,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "editCollective.selfHost.removeBtn",
                defaultMessage: [{
                  "type": 0,
                  "value": "Reset Fiscal Host"
                }]
              })
            })
          })
        })]
      });
    }

    if (lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.id')) {
      const name = collective.host.name;
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          flexDirection: ['column', 'row'],
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            p: 1,
            mr: 3,
            width: [1, 1 / 2],
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_CollectiveCard__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
              collective: collective.host,
              membership: hostMembership
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            children: [!collective.isActive && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "editCollective.host.pending",
                  defaultMessage: [{
                    "type": 0,
                    "value": "You applied to be hosted by "
                  }, {
                    "type": 1,
                    "value": "host"
                  }, {
                    "type": 0,
                    "value": " on "
                  }, {
                    "type": 1,
                    "value": "date"
                  }, {
                    "type": 0,
                    "value": ". Your application is being reviewed."
                  }],
                  values: {
                    host: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.name'),
                    date: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_7__/* .formatDate */ .p6)(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(hostMembership, 'createdAt'), {
                      day: 'numeric',
                      month: 'long',
                      year: 'numeric'
                    })
                  }
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                  buttonStyle: "primary",
                  type: "submit",
                  onClick: () => this.setState({
                    showModal: true,
                    action: 'Withdraw'
                  }),
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                    id: "editCollective.host.cancelApplicationBtn",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Withdraw application"
                    }]
                  })
                })
              })]
            }), collective.isActive && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "editCollective.host.label",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Your Fiscal Host is "
                  }, {
                    "type": 1,
                    "value": "host"
                  }, {
                    "type": 0,
                    "value": "."
                  }],
                  values: {
                    host: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.name')
                  }
                })
              }), collective.stats.balance > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "editCollective.host.balance",
                  defaultMessage: [{
                    "type": 0,
                    "value": "It currently holds "
                  }, {
                    "type": 1,
                    "value": "balance"
                  }, {
                    "type": 0,
                    "value": " on behalf of "
                  }, {
                    "type": 5,
                    "value": "type",
                    "options": {
                      "COLLECTIVE": {
                        "value": [{
                          "type": 0,
                          "value": "your Collective"
                        }]
                      },
                      "FUND": {
                        "value": [{
                          "type": 0,
                          "value": "your Fund"
                        }]
                      },
                      "other": {
                        "value": [{
                          "type": 0,
                          "value": "your Account"
                        }]
                      }
                    }
                  }, {
                    "type": 0,
                    "value": "."
                  }],
                  values: {
                    balance: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__/* .formatCurrency */ .xG)(collective.stats.balance, collective.currency, {
                      locale
                    }),
                    type: collective.type
                  }
                })
              }), collective.stats.balance > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "editCollective.host.change.balanceNotEmpty",
                  defaultMessage: [{
                    "type": 0,
                    "value": "To change your Fiscal Host, you first need to empty "
                  }, {
                    "type": 5,
                    "value": "type",
                    "options": {
                      "COLLECTIVE": {
                        "value": [{
                          "type": 0,
                          "value": "your Collective's balance"
                        }]
                      },
                      "FUND": {
                        "value": [{
                          "type": 0,
                          "value": "your Fund's balance"
                        }]
                      },
                      "other": {
                        "value": [{
                          "type": 0,
                          "value": "your balance"
                        }]
                      }
                    }
                  }, {
                    "type": 0,
                    "value": ". You can do this by submitting expenses, making financial contributions, or sending the balance to your Fiscal Host using the "
                  }, {
                    "type": 1,
                    "value": "emptyBalanceLink"
                  }, {
                    "type": 0,
                    "value": " feature."
                  }],
                  values: {
                    type: collective.type,
                    emptyBalanceLink: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Link__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                      href: `/${collective.slug}/admin/advanced`,
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                        id: "emptyBalance",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Empty Balance"
                        }]
                      })
                    })
                  }
                })
              }), collective.stats.balance === 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("p", {
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                    buttonStyle: "primary",
                    type: "submit",
                    onClick: () => this.setState({
                      showModal: true,
                      action: 'Remove'
                    }),
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                      id: "editCollective.host.removeBtn",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Remove Host"
                      }]
                    })
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(Fineprint, {
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                    id: "editCollective.host.change.removeFirst",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Without a Fiscal Host, "
                    }, {
                      "type": 5,
                      "value": "type",
                      "options": {
                        "COLLECTIVE": {
                          "value": [{
                            "type": 0,
                            "value": "your Collective"
                          }]
                        },
                        "FUND": {
                          "value": [{
                            "type": 0,
                            "value": "your Fund"
                          }]
                        },
                        "other": {
                          "value": []
                        }
                      }
                    }, {
                      "type": 0,
                      "value": " won't be able to accept financial contributions. You will be able to apply to another Fiscal Host."
                    }],
                    values: {
                      type: collective.type
                    }
                  })
                })]
              }), showLegalNameInfoBox && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                mt: 4,
                children: this.renderLegalNameSetInfoMessage(collective)
              })]
            })]
          })]
        }), showModal && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, {
          width: "570px",
          onClose: closeModal,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_18__/* .ModalHeader */ .xB, {
            onClose: closeModal,
            children: action === 'Remove' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.editHost.remove",
              values: {
                name
              },
              defaultMessage: [{
                "type": 0,
                "value": "Remove "
              }, {
                "type": 1,
                "value": "name"
              }]
            }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.editHost.header",
              values: {
                name
              },
              defaultMessage: [{
                "type": 0,
                "value": "Withdraw application to "
              }, {
                "type": 1,
                "value": "name"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_18__/* .ModalBody */ .fe, {
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
              children: [action === 'Withdraw' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "collective.editHost.withdrawApp",
                values: {
                  name
                },
                defaultMessage: [{
                  "type": 0,
                  "value": "Are you sure you want to withdraw your application to "
                }, {
                  "type": 1,
                  "value": "name"
                }, {
                  "type": 0,
                  "value": "?"
                }]
              }), action === 'Remove' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "collective.editHost.removeHost",
                values: {
                  name
                },
                defaultMessage: [{
                  "type": 0,
                  "value": "Are you sure you want to remove "
                }, {
                  "type": 1,
                  "value": "name"
                }, {
                  "type": 0,
                  "value": "?"
                }]
              })]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_18__/* .ModalFooter */ .mz, {
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              display: "flex",
              justifyContent: "flex-end",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                mx: 20,
                onClick: () => this.setState({
                  showModal: false
                }),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "actions.cancel",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Cancel"
                  }]
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                buttonStyle: "primary",
                onClick: () => this.changeHost(),
                "data-cy": "continue",
                children: action
              })]
            })
          })]
        })]
      });
    }

    const connectedAccounts = lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default()(collective.connectedAccounts, 'service');

    const stripeAccount = connectedAccounts && connectedAccounts['stripe'] && connectedAccounts['stripe'][0];
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(EditCollectiveHostSection, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H4, {
        fontSize: "15px",
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "acceptContributions.picker.subtitle",
          defaultMessage: [{
            "type": 0,
            "value": "Who will hold money on behalf of this Collective?"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("div", {
        id: "noHost",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            flex: "0 0 35px",
            mr: 2,
            pl: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
              type: "radio",
              name: "host-radio",
              id: "host-radio-noHost",
              checked: selectedOption === 'noHost',
              onChange: () => this.updateSelectedOption('noHost'),
              className: "hostRadio"
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(OptionLabel, {
              htmlFor: "host-radio-noHost",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "tcxpLX",
                defaultMessage: [{
                  "type": 0,
                  "value": "No one"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.edit.host.noHost.description",
              defaultMessage: [{
                "type": 0,
                "value": "You can't receive financial contributions or use the budget features. You can still edit your profile page, submit expenses to be paid later, and post updates."
              }]
            })]
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("div", {
        id: "selfHost",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            flex: "0 0 35px",
            mr: 2,
            pl: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
              type: "radio",
              name: "host-radio",
              id: "host-radio-selfHost",
              checked: selectedOption === 'selfHost',
              onChange: () => this.updateSelectedOption('selfHost'),
              className: "hostRadio"
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(OptionLabel, {
              htmlFor: "host-radio-selfHost",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "acceptContributions.picker.ourselves",
                defaultMessage: [{
                  "type": 0,
                  "value": "Independent Collective"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.edit.host.selfHost.description",
              defaultMessage: [{
                "type": 0,
                "value": "Simply connect a bank account for a single Collective. You will be responsible for accounting, taxes, payments, and liability."
              }]
            }), "\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
              href: "https://docs.opencollective.com/help/independent-collectives",
              openInNewTab: true,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "moreInfo",
                defaultMessage: [{
                  "type": 0,
                  "value": "More info"
                }]
              })
            }), selectedOption === 'selfHost' && LoggedInUser && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
              flexDirection: ['column', 'row', 'row'],
              justifyContent: "space-between",
              alignItems: "flex-end",
              mt: 3,
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
                mb: [3],
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                  buttonStyle: "primary",
                  type: "submit",
                  onClick: () => this.changeHost({
                    id: collective.id
                  }),
                  loading: this.state.isSubmitting,
                  minWidth: 200,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                    id: "host.selfHost.confirm",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Yes, Activate Independent Collective"
                    }]
                  })
                })
              }), !stripeAccount && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
                textAlign: "right",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_EditConnectedAccount__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
                  collective: collective,
                  service: "stripe",
                  options: {
                    redirect: `${(0,_lib_utils__WEBPACK_IMPORTED_MODULE_7__/* .getWebsiteUrl */ .ls)()}/${collective.slug}/admin/host?selectedOption=selfHost`
                  }
                })
              })]
            })]
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("div", {
        id: "ownHost",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            flex: "0 0 35px",
            mr: 2,
            pl: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
              type: "radio",
              id: "host-radio-ownHost",
              name: "host-radio",
              checked: selectedOption === 'ownHost',
              onChange: () => this.updateSelectedOption('ownHost'),
              className: "hostRadio"
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(OptionLabel, {
              htmlFor: "host-radio-ownHost",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "acceptContributions.organization.subtitle",
                defaultMessage: [{
                  "type": 0,
                  "value": "Our Own Fiscal Host"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.edit.host.useOwn.description",
              defaultMessage: [{
                "type": 0,
                "value": "Select or create your own Fiscal Host, which you manage to hold funds for multiple Collectives, to hold funds and do associated admin for this Collective."
              }]
            }), "\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
              href: "https://docs.opencollective.com/help/fiscal-hosts/become-a-fiscal-host",
              openInNewTab: true,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "moreInfo",
                defaultMessage: [{
                  "type": 0,
                  "value": "More info"
                }]
              })
            }), selectedOption === 'ownHost' && LoggedInUser && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_CreateHostFormWithData__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
              collective: collective,
              LoggedInUser: LoggedInUser,
              onSubmit: hostCollective => this.changeHost(hostCollective)
            })]
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx("div", {
        id: "findHost",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            flex: "0 0 35px",
            mr: 2,
            pl: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
              type: "radio",
              name: "host-radio",
              id: "host-radio-findHost",
              checked: selectedOption === 'findHost',
              onChange: () => this.updateSelectedOption('findHost'),
              className: "hostRadio"
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
            mb: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(OptionLabel, {
              htmlFor: "host-radio-findHost",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                id: "collective.edit.host.findHost.title",
                defaultMessage: [{
                  "type": 0,
                  "value": "Apply to a Fiscal Host"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "collective.edit.host.findHost.description",
              defaultMessage: [{
                "type": 0,
                "value": "Join an existing Fiscal Host who will hold funds on your behalf and take care of accounting, taxes, banking, admin, payments, and liability. Most Hosts charge a fee for this service (you can review the details before choosing a Host)."
              }]
            }), selectedOption === 'findHost' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)("div", {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                display: "flex",
                alignItems: "baseline",
                mt: 2,
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H4, {
                  fontSize: "13px",
                  mr: 2,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                    id: "collective.edit.host.suggestedHosts.title",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Suggested Hosts"
                    }]
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
                  as: _Link__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z,
                  fontSize: "13px",
                  href: `${collective.slug}/accept-financial-contributions/host`,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                    id: "collective.edit.host.viewAllHosts",
                    defaultMessage: [{
                      "type": 0,
                      "value": "View all Fiscal Hosts"
                    }]
                  })
                })]
              }), collective.tags && collective.tags.length > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                color: "#666f80",
                fontSize: "12px",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "collective.edit.host.suggestedHosts.description",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Based on the tags ("
                  }, {
                    "type": 1,
                    "value": "tags"
                  }, {
                    "type": 0,
                    "value": ")"
                  }],
                  values: {
                    tags: collective.tags.join(', ')
                  }
                })
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(_HostsWithData__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
                limit: 6,
                tags: collective.tags,
                empty: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
                  id: "collective.edit.host.suggestedHosts.empty",
                  defaultMessage: [{
                    "type": 0,
                    "value": "No suggestions. Please look at all Hosts or consider creating a new one."
                  }]
                })
              })]
            })]
          })]
        })
      })]
    });
  }

}

Host.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "updateSelectedOption",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "option",
      "type": null
    }],
    "returns": null
  }, {
    "name": "changeHost",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "newHost",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderLegalNameSetInfoMessage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "collective",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "Host",
  "props": {
    "goals": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveMutation": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_router__WEBPACK_IMPORTED_MODULE_3__.withRouter)((0,react_intl__WEBPACK_IMPORTED_MODULE_4__.injectIntl)(Host)));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 56232:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _InputField__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99591);
/* harmony import */ var _RichTextEditor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(59139);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87262);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(31330);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_InputField__WEBPACK_IMPORTED_MODULE_7__, _RichTextEditor__WEBPACK_IMPORTED_MODULE_8__, _StyledInputField__WEBPACK_IMPORTED_MODULE_10__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__]);
([_InputField__WEBPACK_IMPORTED_MODULE_7__, _RichTextEditor__WEBPACK_IMPORTED_MODULE_8__, _StyledInputField__WEBPACK_IMPORTED_MODULE_10__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);

















const VIRTUAL_CARDS_POLICY_MAX_LENGTH = 3000; // 600 words * 5 characters average length word

const updateAccountSettingsMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation UpdateAccountSettings($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {
    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      type
      isActive
      settings
    }
  }
`;
const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.defineMessages)({
  'policy.placeholder': {
    id: "Host.VirtualCards.Policy.Placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. deadlines to submit receipts, allowed charges, limits, or who to contact with questions."
    }]
  }
});

const HostVirtualCards = props => {
  const {
    formatMessage
  } = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .useToasts */ .e1)();
  const [updateAccountSetting, {
    loading: updateLoading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(updateAccountSettingsMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    onError: e => {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "Host.VirtualCards.Settings.Error",
          defaultMessage: [{
            "type": 0,
            "value": "Error updating setting: "
          }, {
            "type": 1,
            "value": "error"
          }],
          values: {
            error: e.message
          }
        })
      });
    }
  });
  const [virtualCardPolicy, setVirtualCardPolicy] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(props.collective.settings?.virtualcards?.policy || '');

  const handleSettingsUpdate = key => async value => {
    await updateAccountSetting({
      variables: {
        account: {
          legacyId: props.collective.id
        },
        key,
        value
      }
    });
    addToast({
      type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
      message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "Host.VirtualCards.Settings.Success",
        defaultMessage: [{
          "type": 0,
          "value": "Setting updated"
        }]
      })
    });
  };

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "Host.VirtualCards.Settings.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Settings and Policy"
          }]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "Host.VirtualCards.RequestCard.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Enable card requests"
            }]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "Host.VirtualCards.RequestCard.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives can request a card to be linked to their budget."
              }]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          name: "virtualcards.requestcard",
          htmlFor: "virtualcards.requestcard",
          disabled: updateLoading,
          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            name: "application",
            className: "horizontal",
            type: "switch",
            id: inputProps.id,
            inputName: inputProps.name,
            onChange: handleSettingsUpdate(inputProps.name),
            defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(props.collective, `settings.${inputProps.name}`)
          })
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "Host.VirtualCards.Reminder.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Automatically notify collectives about pending receipts"
            }]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "Host.VirtualCards.Reminder.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Send missing receipt reminder after 15 and 29 days after syncing the transaction."
              }]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          name: "virtualcards.reminder",
          htmlFor: "virtualcards.reminder",
          disabled: updateLoading,
          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            name: "application",
            className: "horizontal",
            type: "switch",
            id: inputProps.id,
            inputName: inputProps.name,
            onChange: handleSettingsUpdate(inputProps.name),
            defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(props.collective, `settings.${inputProps.name}`)
          })
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
            id: "Host.VirtualCards.AutoPause.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Automatically suspend cards"
            }]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "Host.VirtualCards.AutoPause.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Automatically suspend cards with pending receipts after 31 days and resume after all receipts are submitted."
              }]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          name: "virtualcards.autopause",
          htmlFor: "virtualcards.autopause",
          disabled: updateLoading,
          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_InputField__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
            name: "application",
            className: "horizontal",
            type: "switch",
            id: inputProps.id,
            inputName: inputProps.name,
            onChange: handleSettingsUpdate(inputProps.name),
            defaultValue: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(props.collective, `settings.${inputProps.name}`)
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        name: "virtualcards.policy",
        htmlFor: "virtualcards.policy",
        disabled: updateLoading,
        mt: 4,
        label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__/* .Span */ .Dr, {
            mr: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "Host.VirtualCards.Policy.Title",
              defaultMessage: [{
                "type": 0,
                "value": "Virtual Card Policy"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
            content: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
              id: "Host.VirtualCards.Policy.ToolTip",
              defaultMessage: [{
                "type": 0,
                "value": "This policy text will appear in a pop up when someone 'Requests a Virtual Card' from the Action menu on the collective's page."
              }]
            }),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_3__.Info, {
              size: 16
            })
          })]
        }),
        children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_RichTextEditor__WEBPACK_IMPORTED_MODULE_8__["default"], {
          withBorders: true,
          showCount: true,
          maxLength: VIRTUAL_CARDS_POLICY_MAX_LENGTH,
          version: "simplified",
          editorMinHeight: "20rem",
          editorMaxHeight: 500,
          id: inputProps.id,
          inputName: inputProps.name,
          onChange: e => setVirtualCardPolicy(e.target.value),
          value: virtualCardPolicy,
          placeholder: formatMessage(messages['policy.placeholder']),
          fontSize: "14px"
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        mt: 10,
        loading: updateLoading,
        onClick: () => handleSettingsUpdate('virtualcards.policy')(virtualCardPolicy),
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "Host.VirtualCards.Policy.Save",
          defaultMessage: [{
            "type": 0,
            "value": "Save Policy"
          }]
        })
      })]
    })
  });
};

HostVirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostVirtualCards",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "settings": {
            "name": "shape",
            "value": {
              "virtualcards": {
                "name": "shape",
                "value": {
                  "autopause": {
                    "name": "bool",
                    "required": false
                  },
                  "requestcard": {
                    "name": "bool",
                    "required": false
                  },
                  "policy": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostVirtualCards);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 16653:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(61831);
/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89699);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(64515);
/* harmony import */ var _stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(10208);
/* harmony import */ var _styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1808);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(32651);
/* harmony import */ var _lib_payment_method_label__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(51515);
/* harmony import */ var _lib_stripe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(79936);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(97079);
/* harmony import */ var _pages_confirmOrder__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(46224);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(92129);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(53169);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(37278);
/* harmony import */ var _NewCreditCardForm__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(86501);
/* harmony import */ var _recurring_contributions_UpdatePaymentMethodPopUp__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(43072);
/* harmony import */ var _StripeProvider__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(41499);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(31330);
/* harmony import */ var _EditPaymentMethod__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(778);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_confirmOrder__WEBPACK_IMPORTED_MODULE_19__, _NewCreditCardForm__WEBPACK_IMPORTED_MODULE_25__, _recurring_contributions_UpdatePaymentMethodPopUp__WEBPACK_IMPORTED_MODULE_26__, _ToastProvider__WEBPACK_IMPORTED_MODULE_30__]);
([_pages_confirmOrder__WEBPACK_IMPORTED_MODULE_19__, _NewCreditCardForm__WEBPACK_IMPORTED_MODULE_25__, _recurring_contributions_UpdatePaymentMethodPopUp__WEBPACK_IMPORTED_MODULE_26__, _ToastProvider__WEBPACK_IMPORTED_MODULE_30__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);







function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






























class EditPaymentMethods extends (react__WEBPACK_IMPORTED_MODULE_6___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "state", {
      showCreditCardForm: false,
      newCreditCardInfo: null,
      bankDetails: null,
      error: null,
      stripe: null,
      stripeElements: null,
      submitting: false,
      removedId: null,
      savingId: null
    });

    _defineProperty(this, "submitNewCreditCard", async () => {
      const data = lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(this.state, 'newCreditCardInfo.value');

      if (!data || !this.state.stripe) {
        this.setState({
          error: 'There was a problem initializing the payment form'
        });
      } else if (data.error) {
        this.setState({
          error: data.error.message
        });
      } else {
        try {
          this.setState({
            submitting: true
          });
          const cardElement = this.state.stripeElements.getElement(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_9__.CardElement);
          const {
            token,
            error
          } = await this.state.stripe.createToken(cardElement);

          if (error) {
            throw error;
          }

          const newStripePaymentMethod = (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_17__/* .stripeTokenToPaymentMethod */ .kJ)(token);

          const newCreditCardInfo = lodash_merge__WEBPACK_IMPORTED_MODULE_2___default()(newStripePaymentMethod.data, lodash_pick__WEBPACK_IMPORTED_MODULE_1___default()(newStripePaymentMethod, ['token']));

          const res = await this.props.createCreditCardEditCollective({
            variables: {
              creditCardInfo: newCreditCardInfo,
              name: lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(newStripePaymentMethod, 'name'),
              account: {
                id: this.props.data.account.id
              }
            }
          });
          const {
            paymentMethod,
            stripeError
          } = res.data.addCreditCard;

          if (stripeError) {
            this.handleStripeError(paymentMethod, stripeError);
          } else {
            this.handleSuccess('setup');
          }
        } catch (e) {
          this.setState({
            error: e.message,
            submitting: false
          });
        }
      }
    });

    _defineProperty(this, "confirmCreditCard", async paymentMethod => {
      try {
        this.setState({
          savingId: paymentMethod.id
        });
        await this.props.confirmCreditCardEditCollective({
          variables: {
            paymentMethod: {
              id: paymentMethod.id
            }
          },
          refetchQueries: [{
            query: paymentMethodsQuery,
            variables: {
              collectiveSlug: this.props.collectiveSlug
            },
            context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
          }]
        });
      } catch (error) {
        this.props.addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_30__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_14__/* .i18nGraphqlException */ .t2)(this.props.intl, error)
        });
      } finally {
        this.setState({
          savingId: null
        });
      }
    });

    _defineProperty(this, "confirmOrderForPaymentMethod", async paymentMethod => {
      try {
        this.setState({
          savingId: paymentMethod.id
        });
        const orderToConfirm = paymentMethod.orders.nodes.find(order => order.needsConfirmation);
        const res = await this.props.confirmOrder({
          variables: {
            order: {
              id: orderToConfirm.id
            },
            refetchQueries: [{
              query: paymentMethodsQuery,
              context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
            }]
          }
        });
        const {
          stripeError
        } = res.data.confirmOrder;

        if (stripeError) {
          await this.handleStripeError(paymentMethod, stripeError);
        } else {
          this.handleSuccess('payment');
        }
      } catch (error) {
        this.props.addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_30__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_14__/* .i18nGraphqlException */ .t2)(this.props.intl, error)
        });
      } finally {
        this.setState({
          savingId: null
        });
      }
    });

    _defineProperty(this, "handleSuccess", successType => {
      this.props.data.refetch();

      if (successType) {
        const pathname = this.props.router.asPath.split('?')[0];
        this.props.router.replace({
          pathname,
          query: {
            successType
          }
        }, undefined, {
          shallow: true
        });
      }

      this.setState({
        showCreditCardForm: false,
        error: null,
        newCreditCardInfo: null,
        submitting: false
      });
    });

    _defineProperty(this, "handleStripeError", async (paymentMethod, stripeError) => {
      const {
        message,
        response
      } = stripeError;
      let newError;

      if (!response) {
        newError = message;
      } else if (response.setupIntent) {
        const stripe = await (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_17__/* .getStripe */ .d2)();
        const result = await stripe.handleCardSetup(response.setupIntent.client_secret);

        if (result.error) {
          newError = result.error.message;
        } else {
          try {
            await this.props.confirmCreditCardEditCollective({
              variables: {
                paymentMethod: {
                  id: paymentMethod.id
                }
              }
            });
          } catch (error) {
            newError = result.error.message;
          }
        }
      } else if (response.paymentIntent) {
        const stripe = await (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_17__/* .getStripe */ .d2)(null, stripeError.account);
        const result = await stripe.handleCardAction(response.paymentIntent.client_secret);

        if (result.paymentIntent && result.paymentIntent.status === 'requires_confirmation') {
          return this.confirmOrderForPaymentMethod(paymentMethod);
        } else if (result.error) {
          newError = result.error.message;
        }
      }

      if (newError) {
        this.props.addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_30__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_14__/* .i18nGraphqlException */ .t2)(this.props.intl, newError)
        });
      } else {
        this.handleSuccess(response.setupIntent ? 'setup' : response.paymentIntent ? 'payment' : null);
      }
    });

    _defineProperty(this, "removePaymentMethod", async paymentMethod => {
      const pmLabel = (0,_lib_payment_method_label__WEBPACK_IMPORTED_MODULE_16__/* .paymentMethodLabel */ .uB)(this.props.intl, paymentMethod, lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(this.props.data, 'Collective.name'));
      const confirmQuestion = this.props.intl.formatMessage(this.messages['removeConfirm']);

      if (confirm(`${pmLabel} - ${confirmQuestion}`)) {
        try {
          this.setState({
            removedId: paymentMethod.id
          });
          await this.props.removePaymentMethod({
            variables: {
              id: paymentMethod.legacyId
            }
          });
          this.setState({
            error: null
          });
          await this.props.data.refetch();
        } catch (e) {
          this.showError((0,_lib_errors__WEBPACK_IMPORTED_MODULE_14__/* .getErrorFromGraphqlException */ .H1)(e));
        }
      }

      this.setState({
        removedId: null
      });
    });

    _defineProperty(this, "showError", error => {
      this.setState({
        error
      });
      window.scrollTo(0, 0);
    });

    _defineProperty(this, "hasOrdersThatNeedConfirmation", () => {
      return !lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(this.props.data, 'account.paymentMethodsWithPendingConfirmation', []));
    });

    _defineProperty(this, "paymentMethodRequiresConfirmation", paymentMethod => {
      return paymentMethod.orders?.nodes?.some(order => order.needsConfirmation);
    });

    _defineProperty(this, "dismissSuccess", () => {
      const {
        router
      } = this.props;

      if (this.props.router.query.successType) {
        const pathname = router.asPath.split('?')[0];
        this.props.router.replace({
          pathname,
          query: null
        }, undefined, {
          shallow: true
        });
      }
    });

    this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_12__.defineMessages)({
      removeConfirm: {
        id: "paymentMethods.removeConfirm",
        defaultMessage: [{
          "type": 0,
          "value": "Do you really want to remove this payment method?"
        }]
      }
    });
  }

  componentDidMount() {
    this.props.loadStripe();
  }

  getPaymentMethodsToDisplay() {
    const {
      data
    } = this.props;
    const paymentMethodsWithPendingConfirmation = lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(data, 'account.paymentMethodsWithPendingConfirmation') || [];
    const paymentMethods = (lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(data, 'account.paymentMethods') || []).filter(pm => // Remove payment methods with no balance, unless it's a gift card with a monthly limit
    (pm.balance.valueInCents > 0 || pm.type === _lib_constants_payment_methods__WEBPACK_IMPORTED_MODULE_13__/* .PAYMENT_METHOD_TYPE.GIFTCARD */ .td.GIFTCARD && pm.monthlyLimit) && // Remove payment methods with pending confirmation, they'll be displayed at the top
    !paymentMethodsWithPendingConfirmation.some(p => p.id === pm.id));
    return [...lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(paymentMethodsWithPendingConfirmation, ['type', 'id']), ...lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(paymentMethods, ['type', 'id'])];
  }

  renderError(error) {
    if (typeof error === 'string') {
      return error;
    } else if ((0,_lib_errors__WEBPACK_IMPORTED_MODULE_14__/* .isErrorType */ .kY)(error, 'PM.Remove.HasActiveSubscriptions')) {
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)((react__WEBPACK_IMPORTED_MODULE_6___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
          id: "errors.PM.Remove.HasActiveSubscriptions",
          defaultMessage: [{
            "type": 0,
            "value": "This payment method cannot be removed because it has active recurring financial contributions."
          }]
        }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Link__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          href: `/${this.props.collectiveSlug}/manage-contributions`,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_29__/* .Span */ .Dr, {
            textTransform: "capitalize",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "paymentMethod.editSubscriptions",
              defaultMessage: [{
                "type": 0,
                "value": "Edit recurring financial contributions"
              }]
            })
          })
        })]
      });
    } else {
      return error.message;
    }
  }

  render() {
    const {
      account,
      loading
    } = this.props.data;
    const {
      showCreditCardForm,
      error,
      submitting,
      removedId,
      savingId
    } = this.state;
    const successType = this.props.router.query.successType;
    const paymentMethods = this.getPaymentMethodsToDisplay();
    return loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Flex */ .kC, {
      className: "EditPaymentMethods",
      flexDirection: "column",
      pt: 2,
      children: [this.hasOrdersThatNeedConfirmation() && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        type: "warning",
        withIcon: true,
        mb: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
          id: "bHYOPb",
          defaultMessage: [{
            "type": 0,
            "value": "You need to confirm at least one of your payment methods."
          }]
        })
      }), successType && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        type: "success",
        display: "flex",
        alignItems: "center",
        withIcon: true,
        mb: 3,
        onClick: () => this.setState({
          successType: null
        }),
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Flex */ .kC, {
          justifyContent: "space-between",
          alignItems: "center",
          flex: "1 1",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx("span", {
            children: successType === 'payment' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "Order.Confirm.Success",
              defaultMessage: [{
                "type": 0,
                "value": "Your payment method has now been confirmed and the payment successfully went through."
              }]
            }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "hqJi3D",
              defaultMessage: [{
                "type": 0,
                "value": "Your payment method has been successfully added."
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
            buttonSize: "tiny",
            onClick: this.dismissSuccess,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "TDaF6J",
              defaultMessage: [{
                "type": 0,
                "value": "Dismiss"
              }]
            })
          })]
        })
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        type: "error",
        withIcon: true,
        mb: 4,
        children: this.renderError(error)
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Flex */ .kC, {
        className: "paymentMethods",
        flexDirection: "column",
        my: 2,
        children: paymentMethods.map(pm => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Container__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          className: "paymentMethod",
          my: 3,
          p: 3,
          border: "1px solid #dedede",
          borderRadius: 4,
          style: {
            filter: pm.id === removedId ? 'blur(1px)' : 'none'
          },
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_EditPaymentMethod__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z, {
            collectiveSlug: account.slug,
            isSaving: pm.id === savingId,
            nbActiveSubscriptions: pm.orders?.totalCount || 0,
            paymentMethod: pm,
            onRemove: pm => this.removePaymentMethod(pm),
            needsConfirmation: this.paymentMethodRequiresConfirmation(pm),
            onConfirm: pm => this.confirmOrderForPaymentMethod(pm)
          })
        }, pm.id))
      }), !showCreditCardForm && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Flex */ .kC, {
        alignItems: "center",
        mx: 3,
        my: 4,
        flexDirection: "column",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
          buttonStyle: "standard",
          buttonSize: "large",
          onClick: () => this.setState({
            showCreditCardForm: true
          }),
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_styled_icons_material_Add__WEBPACK_IMPORTED_MODULE_10__.Add, {
            size: "1em"
          }), '  ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
            id: "paymentMethods.creditcard.add",
            defaultMessage: [{
              "type": 0,
              "value": "Add a credit card"
            }]
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_29__/* .Span */ .Dr, {
          fontSize: "12px",
          mt: 2,
          color: "black.600",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
            id: "paymentMethods.creditcard.add.info",
            defaultMessage: [{
              "type": 0,
              "value": "For making contributions as "
            }, {
              "type": 1,
              "value": "contributeAs"
            }],
            values: {
              contributeAs: account.name
            }
          })
        })]
      }), showCreditCardForm && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        display: "flex",
        alignItems: "center",
        flexWrap: "wrap",
        my: 4,
        px: 3,
        py: 1,
        borderRadius: 4,
        border: "1px solid #dedede",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_Text__WEBPACK_IMPORTED_MODULE_29__.P, {
          fontSize: "14px",
          fontWeight: "bold",
          mr: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
            id: "paymentMethod.add",
            defaultMessage: [{
              "type": 0,
              "value": "New Credit Card"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledBox, {
          mr: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_NewCreditCardForm__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
            hasSaveCheckBox: false,
            onChange: newCreditCardInfo => this.setState({
              newCreditCardInfo,
              error: null
            }),
            onReady: ({
              stripe,
              stripeElements
            }) => this.setState({
              stripe,
              stripeElements
            })
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Box */ .xu, {
          my: 2,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
            mr: 2,
            buttonStyle: "standard",
            buttonSize: "medium",
            onClick: () => this.setState({
              showCreditCardForm: false,
              error: null
            }),
            disabled: submitting,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
            buttonStyle: "primary",
            buttonSize: "medium",
            type: "submit",
            onClick: this.submitNewCreditCard,
            disabled: submitting,
            loading: submitting,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_12__.FormattedMessage, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })]
      })]
    });
  }

}

const editPaymentMethodFragment = _apollo_client__WEBPACK_IMPORTED_MODULE_7__.gql`
  fragment EditPaymentMethodFragment on PaymentMethod {
    id
    legacyId
    name
    data
    service
    type
    balance {
      valueInCents
      currency
    }
    expiryDate
    monthlyLimit {
      valueInCents
    }
  }
`;
const paymentMethodsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_7__.gql`
  query EditCollectivePaymentMethods($collectiveSlug: String) {
    account(slug: $collectiveSlug) {
      id
      legacyId
      type
      slug
      name
      currency
      isHost
      settings
      paymentMethods(type: [CREDITCARD, GIFTCARD, PREPAID]) {
        id
        ...EditPaymentMethodFragment
      }
      paymentMethodsWithPendingConfirmation {
        id
        ...EditPaymentMethodFragment
        orders(onlyActiveSubscriptions: true, status: [ACTIVE, ERROR, PENDING, REQUIRE_CLIENT_CONFIRMATION]) {
          totalCount
          nodes {
            id
            legacyId
            needsConfirmation
          }
        }
      }
    }
  }
  ${editPaymentMethodFragment}
`;
const addPaymentMethodsData = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__.graphql)(paymentMethodsQuery, {
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
  }
});
const addCreateCreditCardMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__.graphql)(_recurring_contributions_UpdatePaymentMethodPopUp__WEBPACK_IMPORTED_MODULE_26__/* .addCreditCardMutation */ .$B, {
  name: 'createCreditCardEditCollective',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
  }
});
const addConfirmCreditCardMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__.graphql)(_recurring_contributions_UpdatePaymentMethodPopUp__WEBPACK_IMPORTED_MODULE_26__/* .confirmCreditCardMutation */ .SF, {
  name: 'confirmCreditCardEditCollective',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
  }
});
const removePaymentMethodMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveRemovePaymentMethod($id: Int!) {
    removePaymentMethod(id: $id) {
      id
    }
  }
`;
const addRemovePaymentMethodMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__.graphql)(removePaymentMethodMutation, {
  name: 'removePaymentMethod'
});
const addConfirmOrderMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_8__.graphql)(_pages_confirmOrder__WEBPACK_IMPORTED_MODULE_19__.confirmOrderMutation, {
  name: 'confirmOrder',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_15__/* .API_V2_CONTEXT */ .T
  }
});
const addGraphql = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_18__/* .compose */ .qC)(addPaymentMethodsData, addRemovePaymentMethodMutation, addCreateCreditCardMutation, addConfirmCreditCardMutation, addConfirmOrderMutation);
EditPaymentMethods.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "submitNewCreditCard",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "confirmCreditCard",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "confirmOrderForPaymentMethod",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "successType",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleStripeError",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }, {
      "name": "stripeError",
      "type": null
    }],
    "returns": null
  }, {
    "name": "removePaymentMethod",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "showError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "error",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getPaymentMethodsToDisplay",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "hasOrdersThatNeedConfirmation",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "paymentMethodRequiresConfirmation",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "error",
      "type": null
    }],
    "returns": null
  }, {
    "name": "dismissSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditPaymentMethods",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "data": {
      "description": "From graphql query",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "createCreditCardEditCollective": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "confirmCreditCardEditCollective": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "removePaymentMethod": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "confirmOrder": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "loadStripe": {
      "description": "From stripeLoader",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addToast": {
      "description": "from withToast",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "router": {
      "description": "from withRouter",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_12__.injectIntl)((0,_StripeProvider__WEBPACK_IMPORTED_MODULE_27__/* .withStripeLoader */ .kc)(addGraphql((0,_ToastProvider__WEBPACK_IMPORTED_MODULE_30__/* .withToasts */ .CP)((0,next_router__WEBPACK_IMPORTED_MODULE_11__.withRouter)(EditPaymentMethods))))));

var _StyledBox = styled_components__WEBPACK_IMPORTED_MODULE_5___default()(_Grid__WEBPACK_IMPORTED_MODULE_21__/* .Box */ .xu).withConfig({
  displayName: "PaymentMethods___StyledBox",
  componentId: "sc-1535jj0-0"
})({
  flexGrow: 1
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 66925:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export invoicesQuery */
/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18459);
/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_uniq__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98492);
/* harmony import */ var lodash_groupBy__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_groupBy__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36619);
/* harmony import */ var dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(46233);
/* harmony import */ var _lib_transactions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(5949);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(11194);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(68185);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(173);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90998);
/* harmony import */ var _SettingsSubtitle__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(18656);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_9__]);
_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_9__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






















const HostName = styled_components__WEBPACK_IMPORTED_MODULE_7___default()(_Text__WEBPACK_IMPORTED_MODULE_19__.P).withConfig({
  displayName: "PaymentReceipts__HostName",
  componentId: "sc-1178wi3-0"
})(["margin:0 !important;"]);
dayjs__WEBPACK_IMPORTED_MODULE_4___default().extend((dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_5___default()));
const invoicesQuery = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .gqlV1 */ .N
/* GraphQL */
`
  query TransactionsDownloadInvoices($fromCollectiveSlug: String!) {
    allInvoices(fromCollectiveSlug: $fromCollectiveSlug) {
      slug
      year
      month
      totalAmount
      totalTransactions
      currency
      fromCollective {
        id
        slug
      }
      host {
        id
        slug
        name
        imageUrl
      }
    }
  }
`;

const filterInvoices = (allInvoices, filterBy) => {
  if (filterBy === 'PAST_12_MONTHS') {
    const twelveMonthsAgo = dayjs__WEBPACK_IMPORTED_MODULE_4___default()().subtract(11, 'month');
    return allInvoices.filter(i => {
      const dateMonth = dayjs__WEBPACK_IMPORTED_MODULE_4___default().utc(`${i.year}-${i.month}`, 'YYYY-M');
      return dateMonth.isAfter(twelveMonthsAgo);
    });
  }

  return allInvoices.filter(i => i.year === filterBy);
};

const ReceiptsLoadingPlaceholder = () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
  flexDirection: "column",
  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
    alignItems: "center",
    justifyContent: "space-between",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      mr: 3,
      width: "104px",
      height: "24px"
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
      width: "80%",
      borderStyle: "solid",
      borderColor: "#C4C7CC"
    })]
  }), Array.from({
    length: 3
  }, (_, index) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
    my: 3,
    display: "flex",
    alignItems: "center",
    py: 3,
    px: "24px",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      borderRadius: "16px",
      width: "48px",
      height: "48px",
      mr: 3
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        mb: 2,
        width: ['164px', '361px'],
        height: "24px"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        width: "115px",
        height: "14px"
      })]
    })]
  }, index))]
});

const NoReceipts = () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
  alignItems: "center",
  justifyContent: "center",
  my: 5,
  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
    height: "100px",
    padding: "16px 24px",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H3, {
      fontSize: "15px",
      lineHeight: "24px",
      color: "black.500",
      textAlign: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "paymentReceipt.noReceipts",
        defaultMessage: [{
          "type": 0,
          "value": "No receipts available in this period."
        }]
      })
    })
  })
});

const ReceiptCard = _ref => {
  let props = Object.assign({}, _ref);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
    my: 3,
    alignItems: "center",
    display: "flex",
    flexDirection: ['column', 'row'],
    justifyContent: "space-between",
    py: 3,
    px: "24px",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
      alignItems: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP, {
        collective: props.host,
        borderRadius: "16px",
        mr: 3,
        size: "48px"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(HostName, {
          fontSize: ['13px', '16px'],
          lineHeight: ['20px', '28px'],
          letterSpacing: [null, '-0.16px'],
          color: "black.900",
          fontWeight: "500",
          my: 0,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "Fiscalhost",
            defaultMessage: [{
              "type": 0,
              "value": "Fiscal Host"
            }]
          }), ": ", props.host.name]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_19__/* .Span */ .Dr, {
          fontSize: ['10px', '15px'],
          lineHeight: ['14px', '21px'],
          letterSpacing: [null, '-0.1px'],
          color: "black.600",
          fontWeight: "400",
          mt: 0,
          children: [`${props.month}/${props.year}`, " - ", props.totalTransactions, ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "paymentReceipt.transaction",
            values: {
              n: props.totalTransactions
            },
            defaultMessage: [{
              "type": 6,
              "value": "n",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "Transaction"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "Transactions"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }]
          })]
        })]
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
      lineHeight: "16px",
      fontSize: "13px",
      width: "142px",
      padding: "4px 16px",
      disabled: props.loadingInvoice,
      mt: 3,
      borderColor: "#C4C7CC",
      onClick: () => {
        props.downloadInvoice({
          fromCollectiveSlug: props.fromCollective.slug,
          toCollectiveSlug: props.host.slug,
          dateFrom: props.dateFrom,
          dateTo: props.dateTo
        });
      },
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "DownloadReceipt",
        defaultMessage: [{
          "type": 0,
          "value": "Download receipt"
        }]
      })
    })]
  });
};

const Receipts = ({
  invoices
}) => {
  const {
    loading: loadingInvoice,
    call: downloadInvoice
  } = (0,_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_9__/* .useAsyncCall */ .N)(_lib_transactions__WEBPACK_IMPORTED_MODULE_10__/* .saveInvoice */ .US, {
    useErrorToast: true
  });

  const byMonthYear = lodash_groupBy__WEBPACK_IMPORTED_MODULE_1___default()(invoices, invoice => `${invoice.month}-${invoice.year}`);

  return Object.keys(byMonthYear).map(monthYear => {
    const dateMonth = dayjs__WEBPACK_IMPORTED_MODULE_4___default().utc(`${byMonthYear[monthYear][0].year}-${byMonthYear[monthYear][0].month}`, 'YYYY-M');
    const dateFrom = dateMonth.toISOString();
    const dateTo = dateMonth.endOf('month').toISOString();
    const [month, year] = monthYear.split('-');
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
      flexDirection: "column",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
        alignItems: "center",
        justifyContent: "space-between",
        mt: 3,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H3, {
          fontSize: "16px",
          lineHeight: "24px",
          color: "black.900",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedDate, {
            value: new Date(year, month - 1),
            month: "long",
            year: "numeric"
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          width: ['60%', '80%'],
          borderStyle: "solid",
          borderColor: "#C4C7CC"
        })]
      }), byMonthYear[monthYear].map(invoice => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(ReceiptCard, _objectSpread({}, _objectSpread(_objectSpread({}, invoice), {}, {
        loadingInvoice,
        downloadInvoice,
        dateFrom,
        dateTo
      })), `${invoice.year}-${invoice.month}-${invoice.slug}`))]
    }, monthYear);
  });
};

const PaymentReceipts = ({
  collective
}) => {
  const defaultFilter = {
    label: 'Past 12 months',
    value: 'PAST_12_MONTHS'
  };
  const [activeFilter, setActiveFilter] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(defaultFilter);
  const {
    data,
    loading,
    error
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(invoicesQuery, {
    variables: {
      fromCollectiveSlug: collective.slug
    }
  });

  const yearsFilter = lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default()(data?.allInvoices.map(i => i.year)).map(year => ({
    value: year,
    label: year
  }));

  const invoices = data ? filterInvoices(data.allInvoices, activeFilter.value) : [];
  let content = null;

  if (loading) {
    content = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(ReceiptsLoadingPlaceholder, {});
  } else if (invoices.length === 0) {
    content = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(NoReceipts, {});
  } else if (error) {
    content = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      error: error
    });
  } else {
    content = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(Receipts, {
      invoices: invoices
    });
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
    flexDirection: "column",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_SettingsSubtitle__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "paymentReceipts.section.description",
        defaultMessage: [{
          "type": 0,
          "value": "Consolidated receipts for your financial contributions."
        }]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      mt: 4,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
        fontSize: "9px",
        lineHeight: "12px",
        fontWeight: "500",
        letterSpacing: "0.06em",
        textTransform: "uppercase",
        color: "black.800",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "paymentReceipts.selectDate.label",
          defaultMessage: [{
            "type": 0,
            "value": "Time period"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, {
        inputId: "active-filter-set",
        options: [defaultFilter, ...yearsFilter],
        value: activeFilter,
        width: "184px",
        isLoading: loading,
        fontSize: "12px",
        lineHeight: "18px",
        fontWeight: "400",
        color: "black.800",
        mb: "24px",
        onChange: setActiveFilter,
        isSearchable: false
      }), content]
    })]
  });
};

PaymentReceipts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PaymentReceipts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "id": {
            "name": "number",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PaymentReceipts);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 57098:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_size__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71156);
/* harmony import */ var lodash_size__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_size__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89699);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9368);
/* harmony import */ var lodash_filter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_filter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _lib_constants_moderation_categories__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(15084);
/* harmony import */ var _lib_expenses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(45624);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97079);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(92129);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(68185);
/* harmony import */ var _RichTextEditor__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(59139);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(87268);
/* harmony import */ var _StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(41433);
/* harmony import */ var _StyledInputAmount__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(54029);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(87262);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(31330);
/* harmony import */ var _EditCollectivePage__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(40464);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_RichTextEditor__WEBPACK_IMPORTED_MODULE_18__, _StyledInputField__WEBPACK_IMPORTED_MODULE_22__, _ToastProvider__WEBPACK_IMPORTED_MODULE_25__, _EditCollectivePage__WEBPACK_IMPORTED_MODULE_26__]);
([_RichTextEditor__WEBPACK_IMPORTED_MODULE_18__, _StyledInputField__WEBPACK_IMPORTED_MODULE_22__, _ToastProvider__WEBPACK_IMPORTED_MODULE_25__, _EditCollectivePage__WEBPACK_IMPORTED_MODULE_26__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);





function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



























const EXPENSE_POLICY_MAX_LENGTH = 16000; // max in database is ~15,500

const CONTRIBUTION_POLICY_MAX_LENGTH = 3000; // 600 words * 5 characters average length word

const updateFilterCategoriesMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_5__.gql`
  mutation UpdateFilterCategories($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {
    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      type
      isActive
      settings
    }
  }
`;
const editCollectiveMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveMutation($collective: CollectiveInputType!) {
    editCollective(collective: $collective) {
      id
      type
      isActive
      settings
    }
  }
`;
const setPoliciesMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_5__.gql`
  mutation SetPolicies($account: AccountReferenceInput!, $policies: PoliciesInput!) {
    setPolicies(account: $account, policies: $policies) {
      id
      policies {
        EXPENSE_AUTHOR_CANNOT_APPROVE {
          enabled
          amountInCents
          appliesToHostedCollectives
          appliesToSingleAdminCollectives
        }
        REQUIRE_2FA_FOR_ADMINS
        COLLECTIVE_MINIMUM_ADMINS {
          numberOfAdmins
          applies
          freeze
        }
      }
    }
  }
`;
const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_7__.defineMessages)({
  'rejectCategories.placeholder': {
    id: "editCollective.rejectCategories.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "Choose categories"
    }]
  },
  'contributionPolicy.label': {
    id: "collective.contributionPolicy.label",
    defaultMessage: [{
      "type": 0,
      "value": "Contribution Policy"
    }]
  },
  'contributionPolicy.placeholder': {
    id: "collective.contributionPolicy.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. what types of contributions you will and will not accept."
    }]
  },
  'contributionPolicy.error': {
    id: "collective.contributionPolicy.error",
    defaultMessage: [{
      "type": 0,
      "value": "Contribution policy must contain less than "
    }, {
      "type": 1,
      "value": "maxLength"
    }, {
      "type": 0,
      "value": " characters"
    }]
  },
  'expensePolicy.label': {
    id: "editCollective.menu.expenses",
    defaultMessage: [{
      "type": 0,
      "value": "Expenses Policy"
    }]
  },
  'expensePolicy.placeholder': {
    id: "collective.expensePolicy.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. approval criteria, limitations, or required documentation."
    }]
  },
  'expensePolicy.error': {
    id: "collective.expensePolicy.error",
    defaultMessage: [{
      "type": 0,
      "value": "Expense policy must contain less than "
    }, {
      "type": 1,
      "value": "maxLength"
    }, {
      "type": 0,
      "value": " characters"
    }]
  },
  'expensePolicy.allowExpense': {
    id: "collective.expensePolicy.allowExpense",
    defaultMessage: [{
      "type": 0,
      "value": "Only allow expenses to be created by Team Members and Financial Contributors (they may invite expenses from other payees)"
    }]
  },
  'expensePolicy.RECEIPT': {
    id: "collective.expensePolicy.hasReceipt",
    defaultMessage: [{
      "type": 0,
      "value": "Allow receipts"
    }]
  },
  'expensePolicy.GRANT': {
    id: "collective.expensePolicy.hasGrant",
    defaultMessage: [{
      "type": 0,
      "value": "Allow grants"
    }]
  },
  'expensePolicy.INVOICE': {
    id: "collective.expensePolicy.hasInvoice",
    defaultMessage: [{
      "type": 0,
      "value": "Allow invoices"
    }]
  },
  'requiredAdmins.numberOfAdmins': {
    id: "tGmvPD",
    defaultMessage: [{
      "type": 6,
      "value": "admins",
      "options": {
        "=0": {
          "value": [{
            "type": 0,
            "value": "Do not enforce minimum number of admins"
          }]
        },
        "one": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " Admin"
          }]
        },
        "other": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " Admins"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  }
});

const Policies = ({
  collective,
  showOnlyExpensePolicy
}) => {
  const {
    formatMessage
  } = (0,react_intl__WEBPACK_IMPORTED_MODULE_7__.useIntl)();
  const [selected, setSelected] = react__WEBPACK_IMPORTED_MODULE_4___default().useState([]);
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_25__/* .useToasts */ .e1)(); // GraphQL

  const {
    loading,
    data
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useQuery)(_EditCollectivePage__WEBPACK_IMPORTED_MODULE_26__/* .getSettingsQuery */ .Mi, {
    variables: {
      slug: collective.slug
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });
  const [updateCategories, {
    loading: isSubmittingCategories,
    error: categoriesError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useMutation)(updateFilterCategoriesMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });
  const [updateCollective, {
    loading: isSubmittingSettings,
    error: settingsError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useMutation)(editCollectiveMutation);
  const [setPolicies, {
    loading: isSettingPolicies,
    error: policiesError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useMutation)(setPoliciesMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });
  const error = categoriesError || settingsError || policiesError; // Data and data handling

  const collectiveContributionFilteringCategories = lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(data, 'account.settings.moderation.rejectedCategories', null);

  const collectiveContributionPolicy = lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective, 'contributionPolicy', null);

  const collectiveExpensePolicy = lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective, 'expensePolicy', null);

  const collectiveDisableExpenseSubmission = lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective, 'settings.disablePublicExpenseSubmission', false);

  const expenseTypes = lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(collective, 'settings.expenseTypes') || _lib_expenses__WEBPACK_IMPORTED_MODULE_9__/* .DEFAULT_SUPPORTED_EXPENSE_TYPES */ .qc;

  const numberOfAdmins = lodash_size__WEBPACK_IMPORTED_MODULE_0___default()(lodash_filter__WEBPACK_IMPORTED_MODULE_3___default()(collective.members, m => m.role === 'ADMIN'));

  const selectOptions = react__WEBPACK_IMPORTED_MODULE_4___default().useMemo(() => {
    const optionsArray = Object.entries(_lib_constants_moderation_categories__WEBPACK_IMPORTED_MODULE_8__/* .MODERATION_CATEGORIES */ .Q).map(([key, value], index) => ({
      id: index,
      value: key,
      label: value
    }));
    return optionsArray;
  }, [_lib_constants_moderation_categories__WEBPACK_IMPORTED_MODULE_8__/* .MODERATION_CATEGORIES */ .Q]); // Form

  const formik = (0,formik__WEBPACK_IMPORTED_MODULE_6__.useFormik)({
    initialValues: {
      contributionPolicy: collectiveContributionPolicy || '',
      expensePolicy: collectiveExpensePolicy || '',
      disablePublicExpenseSubmission: collectiveDisableExpenseSubmission || false,
      expenseTypes,
      policies: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .omitDeep */ .Cd)(data?.account?.policies || {}, ['__typename'])
    },

    async onSubmit(values) {
      const {
        contributionPolicy,
        expensePolicy,
        disablePublicExpenseSubmission,
        expenseTypes,
        policies
      } = values;

      const newSettings = _objectSpread(_objectSpread({}, collective.settings), {}, {
        disablePublicExpenseSubmission
      });

      if (collective.isHost) {
        newSettings.expenseTypes = expenseTypes;
      }

      await updateCollective({
        variables: {
          collective: {
            id: collective.id,
            contributionPolicy,
            expensePolicy,
            settings: newSettings
          }
        }
      });
      const selectedRejectCategories = selected.map(option => option.value);
      await Promise.all([updateCategories({
        variables: {
          account: {
            legacyId: collective.id
          },
          key: 'moderation',
          value: {
            rejectedCategories: selectedRejectCategories
          }
        }
      }), setPolicies({
        variables: {
          account: {
            legacyId: collective.id
          },
          policies
        }
      })]);
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_25__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: formatMessage({
          id: "Owy3QB",
          defaultMessage: [{
            "type": 0,
            "value": "Policies updated successfully"
          }]
        })
      });
    },

    validate(values) {
      const errors = {};
      const contributionPolicyText = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .stripHTML */ .Cb)(values.contributionPolicy);
      const expensePolicyText = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .stripHTML */ .Cb)(values.expensePolicy);

      if (contributionPolicyText.length > CONTRIBUTION_POLICY_MAX_LENGTH) {
        errors.contributionPolicy = formatMessage(messages['contributionPolicy.error'], {
          maxLength: CONTRIBUTION_POLICY_MAX_LENGTH
        });
      }

      if (expensePolicyText.length > EXPENSE_POLICY_MAX_LENGTH) {
        errors.expensePolicy = formatMessage(messages['expensePolicy.error'], {
          maxLength: EXPENSE_POLICY_MAX_LENGTH
        });
      }

      return errors;
    }

  });
  react__WEBPACK_IMPORTED_MODULE_4___default().useEffect(() => {
    if (collectiveContributionFilteringCategories && lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default()(selected)) {
      const alreadyPickedCategories = collectiveContributionFilteringCategories.map(category => {
        return selectOptions.find(option => option.value === category);
      });
      setSelected(alreadyPickedCategories);
    }
  }, [loading, collectiveContributionFilteringCategories]);
  react__WEBPACK_IMPORTED_MODULE_4___default().useEffect(() => {
    if (data) {
      formik.setFieldValue('policies', (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .omitDeep */ .Cd)(data?.account?.policies || {}, ['__typename']));
    }
  }, [data]);
  const numberOfAdminsOptions = [0, 2, 3, 4, 5].map(n => ({
    value: n,
    label: formatMessage(messages['requiredAdmins.numberOfAdmins'], {
      admins: n
    })
  }));
  const minAdminsApplies = [{
    value: 'NEW_COLLECTIVES',
    label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
      id: "SeQW9/",
      defaultMessage: [{
        "type": 0,
        "value": "New Collectives Only"
      }]
    })
  }, {
    value: 'ALL_COLLECTIVES',
    label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
      id: "uQguR/",
      defaultMessage: [{
        "type": 0,
        "value": "All Collectives"
      }]
    })
  }];
  const hostAuthorCannotApproveExpensePolicy = data?.account?.host?.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE'];
  const authorCannotApproveExpenseEnforcedByHost = hostAuthorCannotApproveExpensePolicy?.enabled && hostAuthorCannotApproveExpensePolicy?.appliesToHostedCollectives;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
    flexDirection: "column",
    children: [error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
      error: error
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: [!showOnlyExpensePolicy && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          mb: 4,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            name: "contributionPolicy",
            htmlFor: "contributionPolicy",
            error: formik.errors.contributionPolicy,
            disabled: isSubmittingSettings,
            labelProps: {
              mb: 2,
              pt: 2,
              lineHeight: '18px',
              fontWeight: 'bold'
            },
            label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
              children: formatMessage(messages['contributionPolicy.label'])
            }),
            children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_RichTextEditor__WEBPACK_IMPORTED_MODULE_18__["default"], {
              withBorders: true,
              showCount: true,
              maxLength: CONTRIBUTION_POLICY_MAX_LENGTH,
              error: formik.errors.contributionPolicy,
              version: "simplified",
              editorMinHeight: "20rem",
              editorMaxHeight: 500,
              id: inputProps.id,
              inputName: inputProps.name,
              onChange: formik.handleChange,
              placeholder: formatMessage(messages['contributionPolicy.placeholder']),
              defaultValue: formik.values.contributionPolicy,
              fontSize: "14px"
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
            fontSize: "14px",
            lineHeight: "18px",
            color: "black.600",
            mt: 2,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "collective.contributionPolicy.description",
              defaultMessage: [{
                "type": 0,
                "value": "Financial Contributors are manually reviewed by the Open Collective team to check for abuse or spam. Financial Contributors with a good reputation should not be affected by this setting."
              }]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          name: "expensePolicy",
          htmlFor: "expensePolicy",
          error: formik.errors.expensePolicy,
          disabled: isSubmittingSettings,
          labelProps: {
            mb: 2,
            pt: 2,
            lineHeight: '18px',
            fontWeight: 'bold'
          },
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
            children: formatMessage(messages['expensePolicy.label'])
          }),
          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_RichTextEditor__WEBPACK_IMPORTED_MODULE_18__["default"], {
            "data-cy": "expense-policy-input",
            withBorders: true,
            showCount: true,
            maxLength: EXPENSE_POLICY_MAX_LENGTH,
            error: formik.errors.expensePolicy,
            version: "simplified",
            editorMinHeight: "20rem",
            editorMaxHeight: 500,
            id: inputProps.id,
            inputName: inputProps.name,
            onChange: formik.handleChange,
            placeholder: formatMessage(messages['expensePolicy.placeholder']),
            defaultValue: formik.values.expensePolicy,
            fontSize: "14px",
            maxHeight: 600
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          my: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "collective.expensePolicy.description",
            defaultMessage: [{
              "type": 0,
              "value": "It can be daunting to file an expense if you're not sure what's allowed. Provide a clear policy to guide expense submitters."
            }]
          })
        })]
      }), collective?.isHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.admins.header",
            defaultMessage: [{
              "type": 0,
              "value": "Required Admins"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.admins.description",
            defaultMessage: [{
              "type": 0,
              "value": "Please specify the minimum number of admins a collective needs to have for being accepted by your fiscal host and to accept contributions."
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          gap: "12px 24px",
          mb: 3,
          mt: 2,
          flexDirection: ['column', 'row'],
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            disabled: isSubmittingSettings,
            labelFontSize: "13px",
            labelFontWeight: "700",
            label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "s01/Qi",
              defaultMessage: [{
                "type": 0,
                "value": "Minimum number of admins"
              }]
            }),
            flexGrow: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP, {
              inputId: "numberOfAdmins",
              isSearchable: false,
              options: numberOfAdminsOptions,
              onChange: option => {
                if (option.value === 0) {
                  formik.setFieldValue('policies', _objectSpread(_objectSpread({}, formik.values.policies), {}, {
                    COLLECTIVE_MINIMUM_ADMINS: null
                  }));
                } else {
                  formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', _objectSpread(_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
                    numberOfAdmins: option.value
                  }));
                }
              },
              value: numberOfAdminsOptions.find(option => option.value === (formik.values.policies?.COLLECTIVE_MINIMUM_ADMINS?.numberOfAdmins || 0))
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            disabled: isSubmittingSettings,
            labelFontSize: "13px",
            labelFontWeight: "700",
            label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "8F65mn",
              defaultMessage: [{
                "type": 0,
                "value": "Whom does this apply to"
              }]
            }),
            flexGrow: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP, {
              inputId: "applies",
              isSearchable: false,
              options: minAdminsApplies,
              onChange: option => formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', _objectSpread(_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
                applies: option.value
              })),
              disabled: true,
              value: minAdminsApplies[0]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          name: "minAdminsFreeze",
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "FcYV6Y",
            defaultMessage: [{
              "type": 0,
              "value": "Freeze collectives that don’t meet the minimum requirement"
            }]
          }),
          onChange: ({
            checked
          }) => {
            formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', _objectSpread(_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
              freeze: checked
            }));
          },
          checked: Boolean(formik.values.policies?.COLLECTIVE_MINIMUM_ADMINS?.freeze)
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          ml: "2.2rem",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "mp9gR3",
            defaultMessage: [{
              "type": 0,
              "value": "Freezing the collective will prevent them from accepting and distributing contributions till they meet the requirements. This is a security measure to make sure the admins are within their rights. Read More."
            }]
          })
        }), formik.values.policies?.COLLECTIVE_MINIMUM_ADMINS?.applies === 'ALL_COLLECTIVES' && formik.values.policies?.COLLECTIVE_MINIMUM_ADMINS?.freeze && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          type: "warning",
          mt: 2,
          fontSize: "13px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "amI2+/",
            defaultMessage: [{
              "type": 0,
              "value": "Some collectives hosted by you may not fulfill the minimum admin requirements. If you choose to apply the setting to all Collectives, the ones that don't comply will be frozen until they meet the minimum requirements for admins."
            }]
          })
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.expenseApprovalsPolicy.header",
            defaultMessage: [{
              "type": 0,
              "value": "Expense approvals"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          name: "authorCannotApproveExpense",
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.expenseApprovalsPolicy.authorCannotApprove",
            defaultMessage: [{
              "type": 0,
              "value": "Admins cannot approve their own expenses. With this feature turned on, admins will need another admin to approve their expenses"
            }]
          }),
          onChange: () => formik.setFieldValue('policies', _objectSpread(_objectSpread({}, formik.values.policies), {}, {
            ['EXPENSE_AUTHOR_CANNOT_APPROVE']: _objectSpread(_objectSpread({}, formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
              enabled: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled,
              appliesToHostedCollectives: false,
              appliesToSingleAdminCollectives: false,
              amountInCents: 0
            })
          })),
          checked: authorCannotApproveExpenseEnforcedByHost || Boolean(formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled),
          disabled: isSettingPolicies || numberOfAdmins < 2 && Boolean(!formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled) || authorCannotApproveExpenseEnforcedByHost
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          ml: "2.2rem",
          mt: "1rem",
          alignItems: "center",
          color: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled ? 'black.600' : undefined,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
            mr: "2rem",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
              id: "8bP95s",
              defaultMessage: [{
                "type": 0,
                "value": "Enforce for expenses above:"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledInputAmount__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
            maxWidth: "11em",
            disabled: isSettingPolicies || authorCannotApproveExpenseEnforcedByHost || !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled,
            currency: data?.account?.currency,
            currencyDisplay: "CODE",
            placeholder: "0",
            value: authorCannotApproveExpenseEnforcedByHost ? hostAuthorCannotApproveExpensePolicy.amountInCents : formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.amountInCents,
            onChange: value => formik.setFieldValue('policies', _objectSpread(_objectSpread({}, formik.values.policies), {}, {
              ['EXPENSE_AUTHOR_CANNOT_APPROVE']: _objectSpread(_objectSpread({}, formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                amountInCents: value
              })
            }))
          })]
        }), collective?.isHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
            ml: "2.2rem",
            mt: "1rem",
            color: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled ? 'black.600' : undefined,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
              name: "authorCannotApproveExpense.appliesToHostedCollectives",
              label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
                id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.appliesToHostedCollectives",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enforce this policy on collectives hosted by you."
                }]
              }),
              checked: formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToHostedCollectives,
              disabled: isSettingPolicies || !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled,
              onChange: () => formik.setFieldValue('policies', _objectSpread(_objectSpread({}, formik.values.policies), {}, {
                ['EXPENSE_AUTHOR_CANNOT_APPROVE']: _objectSpread(_objectSpread({}, formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                  appliesToHostedCollectives: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToHostedCollectives,
                  appliesToSingleAdminCollectives: false
                })
              }))
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
            ml: "2.2rem",
            mt: "1rem",
            color: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToHostedCollectives ? 'black.600' : undefined,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
              name: "authorCannotApproveExpense.appliesToSingleAdminCollectives",
              label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
                id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.appliesToSingleAdminCollectives",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enforce this policy on collectives with a single admin."
                }]
              }),
              checked: formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToSingleAdminCollectives,
              disabled: isSettingPolicies || !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToHostedCollectives,
              onChange: () => formik.setFieldValue('policies', _objectSpread(_objectSpread({}, formik.values.policies), {}, {
                ['EXPENSE_AUTHOR_CANNOT_APPROVE']: _objectSpread(_objectSpread({}, formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                  appliesToSingleAdminCollectives: !formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.appliesToSingleAdminCollectives
                })
              }))
            })
          })]
        }), numberOfAdmins < 2 && Boolean(!formik.values.policies?.['EXPENSE_AUTHOR_CANNOT_APPROVE']?.enabled) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          ml: "2.2rem",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.minAdminRequired",
            defaultMessage: [{
              "type": 0,
              "value": "You need to have at least two admins to enable this policy."
            }]
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        mt: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          name: "allow-expense-submission",
          label: formatMessage(messages['expensePolicy.allowExpense']),
          onChange: () => formik.setFieldValue('disablePublicExpenseSubmission', !formik.values.disablePublicExpenseSubmission),
          defaultChecked: Boolean(formik.values.disablePublicExpenseSubmission)
        })
      }), collective.isHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "7oAuzt",
            defaultMessage: [{
              "type": 0,
              "value": "Expense types"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.expenseTypes.description",
            defaultMessage: [{
              "type": 0,
              "value": "Specify the types of expenses allowed for all the collectives you're hosting. If you wish to customize these options for specific collectives, head to the "
            }, {
              "type": 8,
              "value": "HostedCollectivesLink",
              "children": [{
                "type": 0,
                "value": "Hosted Collectives"
              }]
            }, {
              "type": 0,
              "value": " section."
            }],
            values: {
              HostedCollectivesLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_14__/* .getI18nLink */ .fw)({
                as: _Link__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z,
                href: `/${collective.slug}/admin/hosted-collectives`
              })
            }
          })
        }), ['RECEIPT', 'INVOICE', 'GRANT'].map(type => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
          name: `allow-${type}-submission`,
          label: formatMessage(messages[`expensePolicy.${type}`]),
          checked: Boolean(formik.values.expenseTypes[type]),
          onChange: () => formik.setFieldValue('expenseTypes', _objectSpread(_objectSpread({}, formik.values.expenseTypes), {}, {
            [type]: !formik.values.expenseTypes[type]
          }))
        }, type))]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          mt: 4,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.rejectCategories.header",
            defaultMessage: [{
              "type": 0,
              "value": "Rejected categories"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Text__WEBPACK_IMPORTED_MODULE_24__.P, {
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "editCollective.rejectCategories.description",
            defaultMessage: [{
              "type": 0,
              "value": "Specify any categories of contributor that you do not wish to accept money from, to automatically prevent these types of contributions. (You can also reject contributions individually using the button on a specific unwanted transaction)"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP, {
          inputId: "policy-select",
          isSearchable: false,
          isLoading: loading,
          placeholder: formatMessage(messages['rejectCategories.placeholder']),
          minWidth: 300,
          maxWidth: 600,
          options: selectOptions,
          value: selected,
          onChange: selectedOptions => setSelected(selectedOptions),
          isMulti: true
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
        mt: 5,
        mb: 3,
        alignItems: "center",
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          "data-cy": "submit-policy-btn",
          buttonStyle: "primary",
          mx: 2,
          minWidth: 200,
          buttonSize: "medium",
          loading: isSubmittingSettings || isSubmittingCategories,
          type: "submit",
          onSubmit: formik.handleSubmit,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_28__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_7__.FormattedMessage, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        })
      })]
    })]
  });
};

Policies.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Policies",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "settings": {
            "name": "object",
            "required": false
          },
          "id": {
            "name": "number",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          },
          "members": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "role": {
                  "name": "string",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "showOnlyExpensePolicy": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Policies);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 25039:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_has__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98210);
/* harmony import */ var lodash_has__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_has__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99708);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82525);
/* harmony import */ var _BankTransfer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96784);
/* harmony import */ var _ConnectedAccounts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(23734);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_BankTransfer__WEBPACK_IMPORTED_MODULE_5__, _ConnectedAccounts__WEBPACK_IMPORTED_MODULE_6__]);
([_BankTransfer__WEBPACK_IMPORTED_MODULE_5__, _ConnectedAccounts__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }









const {
  USER
} = _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType */ .eV;

class ReceivingMoney extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "state", {
      hideTopsection: false
    });

    _defineProperty(this, "hideTopsection", value => {
      this.setState({
        hideTopsection: value
      });
    });
  }

  render() {
    const services = ['stripe'];

    if ((0,_lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP)(this.props.collective, _lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* .FEATURES.PAYPAL_DONATIONS */ .h6.PAYPAL_DONATIONS)) {
      services.push('paypal');
    }

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
      children: [!this.state.hideTopsection && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
        collective: this.props.collective,
        connectedAccounts: this.props.collective.connectedAccounts,
        services: services,
        variation: "RECEIVING"
      }), (this.props.collective.type !== USER || lodash_has__WEBPACK_IMPORTED_MODULE_0___default()(this.props.collective, 'data.settings.paymentMethods.manual')) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_BankTransfer__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        collectiveSlug: this.props.collective.slug,
        hideTopsection: this.hideTopsection
      })]
    });
  }

}

ReceivingMoney.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "hideTopsection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "ReceivingMoney",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_2__.injectIntl)(ReceivingMoney));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 32908:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_feather_ExternalLink__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70441);
/* harmony import */ var _styled_icons_feather_ExternalLink__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_ExternalLink__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(95834);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(styled_system__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32651);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29242);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(87268);
/* harmony import */ var _StyledCheckbox__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(41433);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(173);
/* harmony import */ var _StyledInputAmount__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(54029);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(87262);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(31330);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_18__, _ToastProvider__WEBPACK_IMPORTED_MODULE_21__]);
([_StyledInputField__WEBPACK_IMPORTED_MODULE_18__, _ToastProvider__WEBPACK_IMPORTED_MODULE_21__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
























const accountQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query Account($slug: String) {
    account(slug: $slug) {
      id
      slug
      name
      isHost
      settings
      currency
      policies {
        REQUIRE_2FA_FOR_ADMINS
      }
    }
  }
`;
const updateSecuritySettingsMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  mutation UpdateSecuritySettings(
    $account: AccountReferenceInput!
    $payoutsTwoFactorAuth: JSON!
    $require2FAForAdmins: Boolean!
  ) {
    editAccountSetting(account: $account, key: "payoutsTwoFactorAuth", value: $payoutsTwoFactorAuth) {
      id
      settings
    }
    setPolicies(account: $account, policies: { REQUIRE_2FA_FOR_ADMINS: $require2FAForAdmins }) {
      id
      policies {
        REQUIRE_2FA_FOR_ADMINS
      }
    }
  }
`;
const CheckboxContainer = styled_components__WEBPACK_IMPORTED_MODULE_7___default().label.withConfig({
  displayName: "Security__CheckboxContainer",
  componentId: "sc-mvslh4-0"
})(["display:flex;align-items:center;cursor:pointer;padding:16px;border:1px solid #dcdee0;font-weight:normal;transition:box-shadow 0.3s;border-radius:8px;", " &:hover{box-shadow:0px 4px 12px rgba(20,20,20,0.1);}"], styled_system__WEBPACK_IMPORTED_MODULE_8__.margin);

const getInitialValues = account => {
  return {
    require2FAForAdmins: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(account, 'policies.REQUIRE_2FA_FOR_ADMINS', false),
    payoutsTwoFactorAuth: {
      enabled: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(account, 'settings.payoutsTwoFactorAuth.enabled', false),
      rollingLimit: lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(account, 'settings.payoutsTwoFactorAuth.rollingLimit', 1000000)
    }
  };
};

const Security = ({
  collective
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .useToasts */ .e1)();
  const {
    data,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(accountQuery, {
    variables: {
      slug: collective.slug
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });
  const [updateSecuritySettings, {
    loading: submitting
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useMutation)(updateSecuritySettingsMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      height: 300
    });
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(formik__WEBPACK_IMPORTED_MODULE_5__.Formik, {
    enableReinitialize: true,
    initialValues: getInitialValues(data.account),
    onSubmit: async values => {
      try {
        await updateSecuritySettings({
          variables: _objectSpread({
            account: lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(data.account, ['id'])
          }, values)
        });
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
          message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "Settings.Updated",
            defaultMessage: [{
              "type": 0,
              "value": "Settings updated."
            }]
          })
        });
      } catch (error) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "Settings.Updated.Fail",
            defaultMessage: [{
              "type": 0,
              "value": "Update failed."
            }]
          }),
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_9__/* .i18nGraphqlException */ .t2)(intl, error)
        });
      }
    },
    children: ({
      handleSubmit,
      setFieldValue,
      values,
      dirty
    }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("form", {
      onSubmit: handleSubmit,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "TwoFactorAuth",
          defaultMessage: [{
            "type": 0,
            "value": "Two-factor authentication"
          }]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        mb: "26px",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          color: "black.700",
          fontSize: "14px",
          lineHeight: "20px",
          mb: 24,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "TwoFactorAuth.Setup.FiscalHost.Info",
            defaultMessage: [{
              "type": 0,
              "value": "Two-factor authentication (2FA) adds an extra layer of security when logging in. For Fiscal Hosts or Collectives that manage their own funds, 2FA helps ensure payouts are secure."
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(CheckboxContainer, {
          htmlFor: "enable-enforce-2fa-checkbox",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
            width: "32px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              inputId: "enable-enforce-2fa-checkbox",
              name: "enable-enforce-2fa",
              fontSize: "14px",
              checked: values.require2FAForAdmins,
              width: "auto",
              onChange: () => setFieldValue('require2FAForAdmins', !values.require2FAForAdmins)
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
            flex: "1 1",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "16px",
              lineHeight: "24px",
              fontWeight: "700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "/EO1Lu",
                defaultMessage: [{
                  "type": 0,
                  "value": "All "
                }, {
                  "type": 1,
                  "value": "account"
                }, {
                  "type": 0,
                  "value": " admins must have 2FA"
                }],
                values: {
                  account: data.account.name
                }
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              mt: "5px",
              color: "black.700",
              fontSize: "14px",
              lineHeight: "20px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "ixSLWY",
                defaultMessage: [{
                  "type": 0,
                  "value": "Checking this will require all admins of your team to activate a two-factor authentication to perform admin tasks like payouts."
                }]
              })
            })]
          })]
        })]
      }), data.account.isHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.H4, {
          htmlFor: "rollingLimit",
          mb: "16px",
          fontSize: "16px",
          lineHeight: "24px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "editCollective.rollingLimit.label",
            defaultMessage: [{
              "type": 0,
              "value": "Rolling payout limit"
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(CheckboxContainer, {
          htmlFor: "enable-rolling-limit-checkbox",
          mb: 24,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
            width: "32px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              inputId: "enable-rolling-limit-checkbox",
              name: "enable-rolling-limit",
              checked: values.payoutsTwoFactorAuth.enabled,
              width: "auto",
              onChange: () => setFieldValue('payoutsTwoFactorAuth.enabled', !values.payoutsTwoFactorAuth.enabled)
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
            flex: "1 1",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "16px",
              lineHeight: "24px",
              fontWeight: "700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "2u8jmQ",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enable rolling limit 2FA for payouts"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              mt: "5px",
              color: "black.700",
              fontSize: "14px",
              lineHeight: "20px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "S6+1h1",
                defaultMessage: [{
                  "type": 0,
                  "value": "Admins will be asked to authenticate with 2FA code when they make the first payment after turning it on, and again once they've hit the rolling limit."
                }]
              })
            })]
          })]
        }), values.payoutsTwoFactorAuth.enabled && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
          name: "rollingLimit",
          htmlFor: "rollingLimit",
          disabled: loading,
          mr: "24px",
          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledInputAmount__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, _objectSpread(_objectSpread({}, inputProps), {}, {
            currency: data.account.currency,
            type: "number",
            fontSize: "14px",
            value: values.payoutsTwoFactorAuth.rollingLimit,
            onChange: value => setFieldValue('payoutsTwoFactorAuth.rollingLimit', value),
            min: 100,
            precision: 2,
            disabled: !values.payoutsTwoFactorAuth.enabled,
            px: "2px",
            placeholder: intl.formatMessage({
              id: "collective.contributionPolicy.placeholder",
              defaultMessage: [{
                "type": 0,
                "value": "E.g. what types of contributions you will and will not accept."
              }]
            })
          }))
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
        mt: 26,
        fontWeight: "500",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          openInNewTab: true,
          href: data.account.isHost ? 'https://docs.opencollective.com/help/fiscal-hosts/payouts/two-factor-authentication-for-payouts' : 'https://docs.opencollective.com/help/product/two-factor-authentication',
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx("span", {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
              id: "E+Bll1",
              defaultMessage: [{
                "type": 0,
                "value": "Read the documentation about 2FA"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__/* .Span */ .Dr, {
            ml: "6px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_styled_icons_feather_ExternalLink__WEBPACK_IMPORTED_MODULE_4__.ExternalLink, {
              size: "1.1em",
              strokeWidth: 2,
              style: {
                marginBottom: 3
              }
            })
          })]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        borderColor: "black.400",
        my: 4
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx("div", {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
          buttonStyle: "primary",
          minWidth: 100,
          type: "submit",
          loading: submitting,
          disabled: !dirty,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        })
      })]
    })
  });
};

Security.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Security",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Security);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 54616:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99708);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87268);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var _ConnectedAccounts__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(23734);
/* harmony import */ var _SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36317);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_8__]);
_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_8__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }














class SendingMoney extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {
  constructor(props) {
    super(props);

    _defineProperty(this, "togglePaypal", async () => {
      try {
        this.setState({
          isSubmitting: true
        });
        await this.props.editCollectiveSettings({
          variables: {
            id: this.props.collective.id,
            settings: _objectSpread(_objectSpread({}, this.props.collective.settings), {}, {
              disablePaypalPayouts: !this.props.collective.settings.disablePaypalPayouts
            })
          }
        });
        this.setState({
          isSubmitting: false
        });
      } catch (e) {
        this.setState({
          error: e.toString()
        });
      }
    });

    this.state = {
      error: null,
      isSubmitting: false
    };
  }

  render() {
    const services = ['transferwise'];

    if ((0,_lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP)(this.props.collective, _lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* .FEATURES.PAYPAL_PAYOUTS */ .h6.PAYPAL_PAYOUTS)) {
      services.push('paypal');
    }

    if ((0,_lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .ZP)(this.props.collective, _lib_allowed_features__WEBPACK_IMPORTED_MODULE_3__/* .FEATURES.VIRTUAL_CARDS */ .h6.VIRTUAL_CARDS) && ['opensource', 'foundation', 'opencollective'].includes(this.props.collective.slug)) {
      services.push('privacy');
    }

    let paypalConnectButton;

    if (this.props.collective.settings?.disablePaypalPayouts) {
      paypalConnectButton = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.paypalEnable.button",
        defaultMessage: [{
          "type": 0,
          "value": "Enable PayPal"
        }]
      });
    } else {
      paypalConnectButton = /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "collective.paypalDisable.button",
        defaultMessage: [{
          "type": 0,
          "value": "Disable PayPal"
        }]
      });
    }

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_ConnectedAccounts__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        collective: this.props.collective,
        connectedAccounts: this.props.collective.connectedAccounts,
        services: services
      }), !services.includes('paypal') && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_SettingsSectionTitle__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "PayoutMethod.Type.Paypal",
            defaultMessage: [{
              "type": 0,
              "value": "PayPal"
            }]
          })
        }), !this.props.collective.settings?.disablePaypalPayouts && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
          mb: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.sendMoney.paypalEnabled.description",
            defaultMessage: [{
              "type": 0,
              "value": "PayPal Payouts are active. Contributors can request Expenses to be paid with PayPal."
            }]
          })
        }), this.props.collective.settings?.disablePaypalPayouts && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
          mb: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "collective.sendMoney.paypalDisabled.description",
            defaultMessage: [{
              "type": 0,
              "value": "PayPal Payouts are disabled. Contributors are not able to request Expenses to be paid with PayPal."
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          loading: this.state.isSubmitting,
          onClick: this.togglePaypal,
          mt: 2,
          type: "submit",
          maxWidth: 200,
          children: paypalConnectButton
        }), this.state.error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
          type: "error",
          withIcon: true,
          my: 3,
          children: this.state.error
        })]
      })]
    });
  }

}

const editCollectiveSettingsMutation = _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {
    editCollective(collective: { id: $id, settings: $settings }) {
      id
      settings
    }
  }
`;
const addEditCollectiveSettingsMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__.graphql)(editCollectiveSettingsMutation, {
  name: 'editCollectiveSettings'
});
SendingMoney.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "togglePaypal",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }],
  "displayName": "SendingMoney",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveSettings": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_2__.injectIntl)(addEditCollectiveSettingsMutation(SendingMoney)));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 36317:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16159);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
const _excluded = ["children"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }








const SettingsSectionTitle = _ref => {
  let {
    children
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_1__/* .Flex */ .kC, _objectSpread(_objectSpread({
    alignItems: "center",
    mb: 3,
    width: "100%"
  }, props), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_Text__WEBPACK_IMPORTED_MODULE_3__.H3, {
      fontSize: "18px",
      lineHeight: "26px",
      children: children
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
      ml: 2,
      flex: "1 1",
      borderColor: "black.400"
    })]
  }));
};

SettingsSectionTitle.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SettingsSectionTitle",
  "props": {
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsSectionTitle);

/***/ }),

/***/ 85275:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(38613);
/* harmony import */ var _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(78826);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68185);
/* harmony import */ var _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(48329);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_6__, _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_7__, _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_11__]);
([_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_6__, _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_7__, _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_11__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);














const prepareCards = (collective, sortedTiers) => {
  return sortedTiers.map(tier => {
    return {
      key: tier.id,
      Component: _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,
      componentProps: {
        collective,
        tier,
        hideContributors: true,
        hideCTA: true
      }
    };
  });
};

const CardsContainer = styled_components__WEBPACK_IMPORTED_MODULE_4___default()(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Grid */ .rj).attrs({
  justifyItems: 'center',
  gridGap: '30px',
  gridTemplateColumns: ['repeat(auto-fit, minmax(280px, 1fr))'],
  gridAutoRows: ['1fr']
}).withConfig({
  displayName: "Tickets__CardsContainer",
  componentId: "sc-sgjjus-0"
})(["& > *{padding:0;}"]);
/**
 * A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready
 * to replace the old tiers form.
 */

const Tickets = ({
  collective
}) => {
  const variables = {
    accountSlug: collective.slug
  };
  const {
    data,
    loading,
    error,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(_tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_11__/* .listTierQuery */ .L5, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
  });

  const tiers = lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'account.tiers.nodes', []), 'legacyId');

  const tickets = tiers.filter(tier => tier.type === 'TICKET');
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
    my: 4,
    children: loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      height: 500,
      width: "100%"
    }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      error: error
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_6__["default"], {
      collective: collective,
      cards: prepareCards(collective, tickets),
      CardsContainer: CardsContainer,
      useTierModals: true,
      enableReordering: false,
      createNewType: "TICKET",
      onTierUpdate: () => refetch()
    })
  });
};

Tickets.__docgenInfo = {
  "description": "A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready\nto replace the old tiers form.",
  "methods": [],
  "displayName": "Tickets",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "id": {
            "name": "number",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Tickets);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 29256:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client_react_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72743);
/* harmony import */ var _apollo_client_react_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(38613);
/* harmony import */ var _contribute_cards_ContributeCrypto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(9881);
/* harmony import */ var _contribute_cards_ContributeCustom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(35744);
/* harmony import */ var _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(78826);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16159);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(56562);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(68185);
/* harmony import */ var _StyledCheckbox__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(41433);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(173);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90998);
/* harmony import */ var _mutations__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(10446);
/* harmony import */ var _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(48329);
/* harmony import */ var _EditCollectivePage__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(40464);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_8__, _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_11__, _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_21__, _EditCollectivePage__WEBPACK_IMPORTED_MODULE_22__]);
([_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_8__, _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_11__, _tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_21__, _EditCollectivePage__WEBPACK_IMPORTED_MODULE_22__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);






















 // TODO Make this a common function with the contribute section




const getFinancialContributions = (collective, sortedTiers) => {
  const hasCustomContribution = !lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.disableCustomContributions', false);

  const hasCryptoContribution = !lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.disableCryptoContributions', true) && lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.settings.cryptoEnabled', false);

  const waysToContribute = [];
  sortedTiers.forEach(tier => {
    if (tier === 'custom') {
      if (hasCustomContribution) {
        waysToContribute.push({
          key: 'custom',
          Component: _contribute_cards_ContributeCustom__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z,
          componentProps: {
            collective,
            hideContributors: true,
            hideCTA: true
          }
        });
      }

      if (hasCryptoContribution) {
        waysToContribute.push({
          key: 'crypto',
          Component: _contribute_cards_ContributeCrypto__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,
          componentProps: {
            collective,
            hideContributors: true,
            // for the MVP we shall not display the financial contributors for crypto
            hideCTA: true
          }
        });
      }
    } else {
      waysToContribute.push({
        key: tier.id,
        Component: _contribute_cards_ContributeTier__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z,
        componentProps: {
          collective,
          tier,
          hideContributors: true,
          hideCTA: true
        }
      });
    }
  });
  return waysToContribute;
};

const CardsContainer = styled_components__WEBPACK_IMPORTED_MODULE_6___default()(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Grid */ .rj).attrs({
  justifyItems: 'center',
  gridGap: '30px',
  gridTemplateColumns: ['repeat(auto-fit, minmax(280px, 1fr))'],
  gridAutoRows: ['1fr']
}).withConfig({
  displayName: "Tiers__CardsContainer",
  componentId: "sc-vn3yy8-0"
})(["& > *{padding:0;}"]);
/**
 * A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready
 * to replace the old tiers form.
 */

const Tiers = ({
  collective
}) => {
  const variables = {
    accountSlug: collective.slug
  };
  const {
    data,
    loading,
    error,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(_tiers_EditTierModal__WEBPACK_IMPORTED_MODULE_21__/* .listTierQuery */ .L5, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  });

  const tiers = lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(data, 'account.tiers.nodes', []), 'legacyId');

  const filteredTiers = collective.type === 'EVENT' ? tiers.filter(tier => tier.type !== 'TICKET') : tiers; // Events have their tickets displayed in the "Tickets" section

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.useIntl)();

  const cryptoContributionsEnabledByHost = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'host.settings.cryptoEnabled', false);

  const hasCryptoContributionsDisabled = lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.disableCryptoContributions', true);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div", {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Grid */ .rj, {
      gridTemplateColumns: ['1fr', '172px 1fr'],
      gridGap: 62,
      mt: 34,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Image__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
          src: "/static/images/tiers-graphic.png",
          alt: "",
          width: 172,
          height: 145,
          layout: "fixed"
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
        ml: 2,
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__/* .Strong */ .cK, {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "RHApk3",
              defaultMessage: [{
                "type": 0,
                "value": "About contribution tiers"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx("br", {}), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx("br", {}), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__/* .Span */ .Dr, {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "LdgLV7",
              defaultMessage: [{
                "type": 0,
                "value": "You can provide perks or rewards for your tiers, have a set membership fee, or create categories for your contributors. Tiers can be limited to an amount or frequency (one time, monthly, yearly), or allowed to be flexibly set by contributors."
              }]
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
          mt: 3,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
            href: "https://docs.opencollective.com/help/collectives/collective-settings/tiers-goals",
            openInNewTab: true,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "108gPp",
              defaultMessage: [{
                "type": 0,
                "value": "Learn more about tiers"
              }]
            }), "."]
          })
        })]
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
      my: 4,
      borderColor: "black.300"
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      my: 4,
      children: loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        height: 500,
        width: "100%"
      }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        error: error
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div", {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
          mb: 4,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
            fontSize: "14px",
            lineHeight: "20x",
            mb: 3,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "J/LnMZ",
              defaultMessage: [{
                "type": 0,
                "value": "The custom contribution adds a default tier on your collective that doesn't enforce any minimum amount or interval. This is the easiest way for people to contribute to your Collective, but it cannot be customized."
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_apollo_client_react_components__WEBPACK_IMPORTED_MODULE_4__.Mutation, {
            mutation: _mutations__WEBPACK_IMPORTED_MODULE_20__/* .editAccountSettingsMutation */ .T,
            refetchQueries: [{
              query: _EditCollectivePage__WEBPACK_IMPORTED_MODULE_22__/* .collectiveSettingsV1Query */ .cH,
              variables: {
                slug: collective.slug
              }
            }],
            awaitRefetchQueries: true,
            children: (editSettings, {
              loading
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: "custom-contributions",
              label: intl.formatMessage({
                id: "tier.customContributions.label",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enable flexible contributions"
                }]
              }),
              defaultChecked: !lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(collective, 'settings.disableCustomContributions', false),
              width: "auto",
              isLoading: loading,
              onChange: ({
                target
              }) => {
                editSettings({
                  variables: {
                    account: {
                      legacyId: collective.id
                    },
                    key: 'disableCustomContributions',
                    value: !target.value
                  },
                  context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
                });
              }
            })
          })]
        }), cryptoContributionsEnabledByHost && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
          mb: 4,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            my: 4,
            borderColor: "black.300"
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
            fontSize: "14px",
            lineHeight: "20x",
            mb: 3,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "Tiers.CryptoTierDescription",
              defaultMessage: [{
                "type": 0,
                "value": "Enabling this will enable support for donations with Cryptocurrencies such as Bitcoin or Ethereum."
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_apollo_client_react_components__WEBPACK_IMPORTED_MODULE_4__.Mutation, {
            mutation: _mutations__WEBPACK_IMPORTED_MODULE_20__/* .editAccountSettingsMutation */ .T,
            refetchQueries: [{
              query: _EditCollectivePage__WEBPACK_IMPORTED_MODULE_22__/* .collectiveSettingsV1Query */ .cH,
              variables: {
                slug: collective.slug
              }
            }],
            awaitRefetchQueries: true,
            children: (editSettings, {
              loading
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_StyledCheckbox__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              name: "crypto-contributions",
              label: intl.formatMessage({
                id: "tier.cryptoContributions.label",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enable Crypto contributions"
                }]
              }),
              defaultChecked: !hasCryptoContributionsDisabled,
              width: "auto",
              isLoading: loading,
              onChange: ({
                target
              }) => {
                editSettings({
                  variables: {
                    account: {
                      legacyId: collective.id
                    },
                    key: 'disableCryptoContributions',
                    value: !target.value
                  },
                  context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
                });
              }
            })
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx(_contribute_cards_AdminContributeCardsContainer__WEBPACK_IMPORTED_MODULE_8__["default"], {
          collective: collective,
          cards: getFinancialContributions(collective, filteredTiers),
          CardsContainer: CardsContainer,
          useTierModals: true,
          enableReordering: false,
          onTierUpdate: () => refetch()
        })]
      })
    })]
  });
};

Tiers.__docgenInfo = {
  "description": "A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready\nto replace the old tiers form.",
  "methods": [],
  "displayName": "Tiers",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "type": {
            "name": "string",
            "required": true
          },
          "id": {
            "name": "number",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Tiers);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 67023:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_feather_Download__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57847);
/* harmony import */ var _styled_icons_feather_Download__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Download__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28109);
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43860);
/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(qrcode_react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var speakeasy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(99200);
/* harmony import */ var speakeasy__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(speakeasy__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(97079);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(47988);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(88705);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(56562);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(53169);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(37278);
/* harmony import */ var _PasswordStrengthBar__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(8634);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(19156);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(87262);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(71792);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(31330);
/* harmony import */ var _UserProvider__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(51927);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_27__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_29__, _ToastProvider__WEBPACK_IMPORTED_MODULE_31__]);
([_StyledInputField__WEBPACK_IMPORTED_MODULE_27__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_29__, _ToastProvider__WEBPACK_IMPORTED_MODULE_31__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



































const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_9__.defineMessages)({
  errorWrongLength: {
    id: "TwoFactorAuth.Setup.Form.ErrorLength",
    defaultMessage: [{
      "type": 0,
      "value": "Incorrect code length. Please re-enter your 6-digit code."
    }]
  },
  errorWrongFormat: {
    id: "TwoFactorAuth.Setup.Form.ErrorFormat",
    defaultMessage: [{
      "type": 0,
      "value": "Incorrect code format. Please enter only numbers."
    }]
  },
  inputLabel: {
    id: "TwoFactorAuth.Setup.Form.InputLabel",
    defaultMessage: [{
      "type": 0,
      "value": "Please enter your 6-digit code without any dashes."
    }]
  }
});

const content = () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx("div", {
  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
    fontSize: "12px",
    lineHeight: "18px",
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
      id: "TwoFactorAuth.Setup.AppInfo",
      defaultMessage: [{
        "type": 0,
        "value": "You can use 2FA apps such as Google Authenticator, Authy, 1Password, LastPass, or Microsoft Authenticator to scan the QR code."
      }]
    })
  })
});

const TokenBox = styled_components__WEBPACK_IMPORTED_MODULE_11___default()(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu).withConfig({
  displayName: "UserSecurity__TokenBox",
  componentId: "sc-7kexzp-0"
})(["overflow-wrap:break-word;word-wrap:break-word;"]);
const Code = styled_components__WEBPACK_IMPORTED_MODULE_11___default().code.withConfig({
  displayName: "UserSecurity__Code",
  componentId: "sc-7kexzp-1"
})(["background:", ";color:", ";word-break:break-all;display:block;margin-top:8px;font-weight:400;font-size:14px;line-height:20px;color:#4d4f51;max-width:350px;"], props => props.theme.colors.black[100], props => props.theme.colors.black[700]);

class UserSecurity extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(props) {
    super(props);
    this.state = {
      error: null,
      disablingTwoFactorAuth: false,
      disableError: null,
      recoveryCodes: null,
      enablingTwoFactorAuth: false,
      showRecoveryCodesModal: false,

      /* Password management state */
      passwordLoading: false,
      passwordError: null,
      currentPassword: '',
      password: '',
      passwordKey: 1,
      passwordScore: null
    };
    this.enableTwoFactorAuth = this.enableTwoFactorAuth.bind(this);
    this.disableTwoFactorAuth = this.disableTwoFactorAuth.bind(this);
    this.setPassword = this.setPassword.bind(this);
  }

  componentDidMount() {
    // speakeasy options object does not add issuer as expected so we add it ourselves to the otp url
    // do not use URLParams from universal-url or the web API to encode the issuer
    // see https://github.com/opencollective/opencollective-frontend/pull/4520#discussion_r447690237 for discussion
    let issuer;

    if (window.location.hostname === 'localhost') {
      issuer = '&issuer=Open%20Collective%20Local';
    } else if (window.location.hostname === 'staging.opencollective.com') {
      issuer = '&issuer=Open%20Collective%20Staging';
    } else {
      issuer = '&issuer=Open%20Collective';
    }

    const options = {
      name: this.props.LoggedInUser.email,
      length: 64
    };
    const secret = speakeasy__WEBPACK_IMPORTED_MODULE_10___default().generateSecret(options);
    const otpAuthUrl = secret.otpauth_url + issuer;
    this.setState({
      secret,
      base32: secret.base32,
      otpAuthUrl
    });
  }

  async enableTwoFactorAuth(values) {
    try {
      // verify QR code
      const {
        twoFactorAuthenticatorCode
      } = values;
      const verified = speakeasy__WEBPACK_IMPORTED_MODULE_10___default().totp.verify({
        secret: this.state.base32,
        encoding: 'base32',
        token: twoFactorAuthenticatorCode,
        window: 2
      }); // if not verified, ask the user to try again

      if (!verified) {
        this.setState({
          error: '2FA token not verified. Please try again.'
        });
      } // if ok, send secret to backend


      if (verified) {
        const account = {
          id: this.props.data.individual.id
        };
        await this.props.addTwoFactorAuthTokenToIndividual({
          variables: {
            account,
            token: this.state.base32
          }
        }).then(data => {
          this.setState({
            recoveryCodes: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'data.addTwoFactorAuthTokenToIndividual.recoveryCodes')
          });
        }).then(() => {
          this.props.refetchLoggedInUser(); // No need to await
        });
        this.setState({
          error: null,
          enablingTwoFactorAuth: true
        });
      }
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_12__/* .getErrorFromGraphqlException */ .H1)(err).message;
      this.setState({
        error: errorMsg
      });
    }
  }

  async disableTwoFactorAuth(values) {
    try {
      const {
        twoFactorAuthenticatorCode
      } = values;
      const account = {
        id: this.props.data.individual.id
      };
      await this.props.removeTwoFactorAuthTokenFromIndividual({
        variables: {
          account,
          code: twoFactorAuthenticatorCode
        }
      });
      this.props.refetchLoggedInUser(); // No need to await

      this.setState({
        disablingTwoFactorAuth: false,
        error: null
      });
    } catch (err) {
      const errorMsg = (0,_lib_errors__WEBPACK_IMPORTED_MODULE_12__/* .getErrorFromGraphqlException */ .H1)(err).message;
      this.setState({
        disableError: errorMsg
      });
    }
  }

  async setPassword() {
    const {
      password,
      passwordKey,
      currentPassword,
      passwordScore
    } = this.state;

    if (password === currentPassword) {
      this.setState({
        passwordError: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "HhwRys",
          defaultMessage: [{
            "type": 0,
            "value": "Password can't be the same as current password"
          }]
        })
      });
      return;
    }

    if (passwordScore <= 1) {
      this.setState({
        passwordError: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "C2rcD0",
          defaultMessage: [{
            "type": 0,
            "value": "Password is too weak. Try to use more characters or use a password manager to generate a strong one."
          }]
        })
      });
      return;
    }

    try {
      this.setState({
        passwordLoading: true
      });
      const result = await this.props.setPassword({
        variables: {
          password,
          currentPassword
        }
      });

      if (result.data.setPassword.token) {
        await this.props.login(result.data.setPassword.token);
      }

      await this.props.refetchLoggedInUser();
      this.setState({
        currentPassword: '',
        password: '',
        passwordError: null,
        passwordScore: null,
        passwordLoading: false,
        passwordKey: Number(passwordKey) + 1
      });
      this.props.addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_31__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: this.props.LoggedInUser.hasPassword ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "6oGOC9",
          defaultMessage: [{
            "type": 0,
            "value": "Password successfully updated"
          }]
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "cLP25w",
          defaultMessage: [{
            "type": 0,
            "value": "Password successfully set"
          }]
        })
      });
    } catch (e) {
      this.setState({
        passwordError: e.message,
        passwordLoading: false
      });
    }
  }

  renderPasswordManagement() {
    const {
      LoggedInUser
    } = this.props;
    const {
      password,
      passwordError,
      passwordLoading,
      passwordKey,
      currentPassword
    } = this.state;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.H3, {
        fontSize: "18px",
        fontWeight: "700",
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "Password",
          defaultMessage: [{
            "type": 0,
            "value": "Password"
          }]
        })
      }), passwordError && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
        type: "error",
        withIcon: true,
        my: 2,
        "data-cy": "password-error",
        children: passwordError
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        mb: "4",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
          py: 2,
          mb: 2,
          children: LoggedInUser.hasPassword ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Password.Change.Info",
            defaultMessage: [{
              "type": 0,
              "value": "You already have a password set, you can change it using the following form."
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Password.Set.Info",
            defaultMessage: [{
              "type": 0,
              "value": "Setting a password is optional but can be useful if you're using a password manager."
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .ZP, {
          style: {
            display: 'none'
          },
          id: "email",
          autoComplete: "email",
          name: "email",
          value: LoggedInUser.email,
          type: "email"
        }), LoggedInUser.hasPassword && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "GretYf",
            defaultMessage: [{
              "type": 0,
              "value": "Current Password"
            }]
          }),
          labelFontWeight: "bold",
          htmlFor: "current-password",
          mb: 2,
          width: "100%",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .ZP, {
            fontSize: "14px",
            id: "current-password",
            autoComplete: "current-password",
            name: "current-password",
            type: "password",
            required: true,
            onChange: e => {
              this.setState({
                passwordError: null,
                currentPassword: e.target.value
              });
            }
          }, `current-password-${passwordKey}`)
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
          label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Ev6SEF",
            defaultMessage: [{
              "type": 0,
              "value": "New Password"
            }]
          }),
          labelFontWeight: "bold",
          htmlFor: "new-password",
          mt: 2,
          mb: 2,
          width: "100%",
          hint: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "qaIW32",
            defaultMessage: [{
              "type": 0,
              "value": "Strong password recommended. Short or weak one restricted. "
            }, {
              "type": 8,
              "value": "link",
              "children": [{
                "type": 0,
                "value": "The strength of a password is a function of length, complexity, and unpredictability."
              }]
            }],
            values: {
              link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_18__/* .getI18nLink */ .fw)({
                href: 'https://en.wikipedia.org/wiki/Password_strength',
                openInNewTab: true
              })
            }
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .ZP, {
            fontSize: "14px",
            id: "new-password",
            autoComplete: "new-password",
            type: "password",
            required: true,
            onChange: e => {
              this.setState({
                passwordError: null,
                password: e.target.value
              });
            }
          }, `current-password-${passwordKey}`)
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx("div", {
          "data-cy": "password-strength-bar",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_PasswordStrengthBar__WEBPACK_IMPORTED_MODULE_23__/* .PasswordStrengthBar */ ._, {
            password: password,
            onChangeScore: passwordScore => {
              this.setState({
                passwordScore
              });
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
          my: 2,
          minWidth: 140,
          loading: passwordLoading,
          disabled: !password || LoggedInUser.hasPassword && !currentPassword,
          onClick: this.setPassword,
          children: LoggedInUser.hasPassword ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Security.UpdatePassword.Button",
            defaultMessage: [{
              "type": 0,
              "value": "Update Password"
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
            id: "Security.SetPassword.Button",
            defaultMessage: [{
              "type": 0,
              "value": "Set Password"
            }]
          })
        })]
      })]
    });
  }

  render() {
    const {
      intl,
      data
    } = this.props;
    const {
      error,
      disableError,
      secret,
      base32,
      otpAuthUrl,
      disablingTwoFactorAuth,
      enablingTwoFactorAuth,
      recoveryCodes,
      showRecoveryCodesModal
    } = this.state;
    const {
      loading
    } = data;

    if (loading) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {});
    }

    const account = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, 'individual', null);

    const doesAccountAlreadyHave2FA = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(account, 'hasTwoFactorAuth', false);

    const initialSetupFormValues = {
      twoFactorAuthenticatorCode: ''
    };
    const initialDisableFormValues = {
      twoFactorAuthenticatorCode: ''
    };

    const validate = values => {
      const errors = {};

      if (values.twoFactorAuthenticatorCode.toString().length !== 6) {
        errors.twoFactorAuthenticatorCode = intl.formatMessage(messages.errorWrongLength);
      }

      return errors;
    };

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
      flexDirection: "column",
      children: [this.renderPasswordManagement(), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.H3, {
        fontSize: "18px",
        fontWeight: "700",
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
          id: "TwoFactorAuth",
          defaultMessage: [{
            "type": 0,
            "value": "Two-factor authentication"
          }]
        })
      }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
        type: "error",
        withIcon: true,
        my: 2,
        "data-cy": "add-two-factor-auth-error",
        children: error
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        flexDirection: "column",
        children: doesAccountAlreadyHave2FA && !enablingTwoFactorAuth ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
              id: "TwoFactorAuth.Setup.Info",
              defaultMessage: [{
                "type": 0,
                "value": "Two-factor authentication adds an extra layer of security for your account when logging in or performing admin actions."
              }]
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
            display: "flex",
            flexWrap: "wrap",
            alignItems: "center",
            justifyContent: "center",
            my: "32px",
            p: "36px",
            maxWidth: "496px",
            "data-cy": "add-two-factor-auth-success",
            padding: "36px",
            borderWidth: "2px",
            borderColor: "green.500",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
              flex: "0 0 183px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Image__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                src: "/static/images/lock-green.png",
                width: "183px",
                height: "183px",
                alt: ""
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
              flex: "1 1 223px",
              pr: "9px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
                fontSize: "20px",
                fontWeight: "500",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                  id: "TwoFactorAuth.Setup.AlreadyAdded",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Two-factor authentication (2FA) is enabled on this account. Well done! 🎉"
                  }]
                })
              })
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
              my: 1,
              minWidth: 140,
              buttonStyle: 'danger',
              onClick: () => this.setState({
                disablingTwoFactorAuth: true
              }),
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "TwoFactorAuth.Disable.Button",
                defaultMessage: [{
                  "type": 0,
                  "value": "Disable 2FA"
                }]
              })
            }), disablingTwoFactorAuth && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Formik, {
              validate: validate,
              initialValues: initialDisableFormValues,
              onSubmit: this.disableTwoFactorAuth,
              children: formik => {
                const {
                  values,
                  errors,
                  touched,
                  handleSubmit,
                  isSubmitting
                } = formik;
                return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .ZP, {
                  width: "570px",
                  onClose: () => this.setState({
                    disablingTwoFactorAuth: false
                  }),
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_28__/* .ModalHeader */ .xB, {
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                      id: "TwoFactorAuth.Disable.Header",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Are you sure you want to remove two-factor authentication from your account?"
                      }]
                    })
                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_28__/* .ModalBody */ .fe, {
                    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
                      type: "warning",
                      withIcon: true,
                      my: 3,
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                        id: "TwoFactorAuth.Disable.Warning",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Removing 2FA from your account can make it less secure."
                        }]
                      })
                    }), disableError && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
                      type: "error",
                      withIcon: true,
                      mb: 3,
                      children: disableError
                    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                        id: "TwoFactorAuth.Disable.Info",
                        defaultMessage: [{
                          "type": 0,
                          "value": "If you would like to remove 2FA from your account, you will need to enter the code from your authenticator app one more time."
                        }]
                      })
                    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Form, {
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
                        name: "twoFactorAuthenticatorCode",
                        htmlFor: "twoFactorAuthenticatorCode",
                        error: touched.twoFactorAuthenticatorCode && errors.twoFactorAuthenticatorCode,
                        label: intl.formatMessage(messages.inputLabel),
                        value: values.twoFactorAuthenticatorCode,
                        required: true,
                        mt: 2,
                        mb: 3,
                        children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, _objectSpread(_objectSpread({
                          as: _StyledInput__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .ZP
                        }, inputProps), {}, {
                          width: 240,
                          minHeight: 75,
                          fontSize: "20px",
                          autoComplete: "off",
                          placeholder: "123456",
                          pattern: "[0-9]{6}",
                          inputMode: "numeric",
                          autoFocus: true
                        }))
                      })
                    })]
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_28__/* .ModalFooter */ .mz, {
                    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                      display: "flex",
                      justifyContent: "flex-end",
                      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                        mx: 20,
                        onClick: () => this.setState({
                          disablingTwoFactorAuth: false
                        }),
                        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                          id: "actions.cancel",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Cancel"
                          }]
                        })
                      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                        buttonStyle: "danger",
                        loading: isSubmitting,
                        onClick: handleSubmit,
                        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                          id: "actions.continue",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Continue"
                          }]
                        })
                      })]
                    })
                  })]
                });
              }
            })]
          })]
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
          children: recoveryCodes ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "TwoFactorAuth.Setup.RecoveryCodes.Info",
                defaultMessage: [{
                  "type": 0,
                  "value": "Recovery codes are used to access your account in case you can't access it with your authenticator app (for example, if you have lost your phone). Each code can only be used once. Save your 2FA recovery codes in a safe place, like a password manager app."
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
                  alignItems: "center",
                  mt: 3,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.H3, {
                    fontSize: "18px",
                    mr: 1,
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                      id: "TwoFactorAuth.Setup.StepThree",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Step three: save your recovery codes"
                      }]
                    })
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                  maxWidth: 480,
                  border: "2px solid black",
                  borderRadius: 8,
                  my: 3,
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Grid */ .rj, {
                    gridTemplateColumns: ['1fr', '1fr 1fr'],
                    p: "32px",
                    gridGap: "16px",
                    "data-cy": "recovery-codes-container",
                    children: recoveryCodes.map(code => {
                      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
                        fontSize: "16px",
                        fontWeight: "700",
                        m: "0 16px 16px 0",
                        children: code
                      }, code);
                    })
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
                    justifyContent: ['center', 'left'],
                    mb: 4,
                    gap: "16px",
                    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                      minWidth: "148px",
                      buttonStyle: "primary",
                      onClick: () => this.setState({
                        showRecoveryCodesModal: true
                      }),
                      loading: showRecoveryCodesModal,
                      "data-cy": "add-two-factor-auth-confirm-recovery-codes-button",
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                        id: "TwoFactorAuth.Setup.Form.FinishSetup",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Finish setup"
                        }]
                      })
                    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                      onClick: () => (0,file_saver__WEBPACK_IMPORTED_MODULE_6__.saveAs)(new Blob([recoveryCodes.join('\n')], {
                        type: 'text/plain;charset=utf-8'
                      }), 'opencollective-recovery-codes.txt'),
                      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                        id: "TvWROv",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Download codes"
                        }]
                      }), "\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_styled_icons_feather_Download__WEBPACK_IMPORTED_MODULE_4__.Download, {
                        size: "1em"
                      })]
                    })]
                  })
                })]
              })
            }), showRecoveryCodesModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              isDanger: true,
              type: "confirm",
              onClose: () => this.setState({
                showRecoveryCodesModal: false
              }),
              continueHandler: () => this.setState({
                recoveryCodes: null,
                enablingTwoFactorAuth: false,
                showRecoveryCodesModal: false
              }),
              header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "TwoFactorAuth.Setup.RecoveryCodes.ConfirmationModal.Header",
                defaultMessage: [{
                  "type": 0,
                  "value": "Are you sure?"
                }]
              }),
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "TwoFactorAuth.Setup.RecoveryCodes.ConfirmationModal.Body",
                defaultMessage: [{
                  "type": 0,
                  "value": "Once you click 'Confirm', you will no longer have access to your recovery codes."
                }]
              })
            })]
          }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                id: "TwoFactorAuth.Setup.Info",
                defaultMessage: [{
                  "type": 0,
                  "value": "Two-factor authentication adds an extra layer of security for your account when logging in or performing admin actions."
                }]
              })
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
                  alignItems: "center",
                  mt: 3,
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.H3, {
                    fontSize: "18px",
                    fontWeight: "700",
                    mr: 1,
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                      id: "TwoFactorAuth.Setup.StepOne",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Step one: scan this QR code with an authenticator app"
                      }]
                    })
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
                    content: content,
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_5__.Info, {
                      size: 16
                    })
                  })]
                }), secret ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
                  flexDirection: "column",
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx((qrcode_react__WEBPACK_IMPORTED_MODULE_8___default()), {
                    value: otpAuthUrl,
                    renderAs: "svg",
                    size: 256,
                    level: "L",
                    includeMargin: true,
                    "data-cy": "qr-code"
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(TokenBox, {
                    "data-cy": "manual-entry-2fa-token",
                    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.P, {
                      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                        id: "TwoFactorAuth.Setup.ManualEntry",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Manual entry: "
                        }, {
                          "type": 1,
                          "value": "token"
                        }],
                        values: {
                          token: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(Code, {
                            children: base32
                          })
                        }
                      })
                    })
                  })]
                }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
                  height: 256,
                  width: 256
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
                mt: 3,
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Text__WEBPACK_IMPORTED_MODULE_30__.H3, {
                  fontSize: "18px",
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                    id: "TwoFactorAuth.Setup.StepTwo",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Step two: enter the code from your authentication app"
                    }]
                  })
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Formik, {
                    validate: validate,
                    initialValues: initialSetupFormValues,
                    onSubmit: this.enableTwoFactorAuth,
                    children: formik => {
                      const {
                        values,
                        handleSubmit,
                        errors,
                        touched,
                        isSubmitting
                      } = formik;
                      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_7__.Form, {
                        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
                          name: "twoFactorAuthenticatorCode",
                          htmlFor: "twoFactorAuthenticatorCode",
                          error: touched.twoFactorAuthenticatorCode && errors.twoFactorAuthenticatorCode,
                          label: intl.formatMessage(messages.inputLabel),
                          value: values.twoFactorAuthenticatorCode,
                          required: true,
                          mt: 2,
                          mb: 3,
                          children: inputProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, _objectSpread(_objectSpread({
                            as: _StyledInput__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .ZP
                          }, inputProps), {}, {
                            width: 240,
                            minHeight: 60,
                            fontSize: "20px",
                            lineHeight: "28px",
                            placeholder: "123456",
                            pattern: "[0-9]{6}",
                            inputMode: "numeric",
                            minLength: 6,
                            maxLength: 6,
                            "data-cy": "add-two-factor-auth-totp-code-field"
                          }))
                        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
                          justifyContent: ['center', 'left'],
                          mb: 4,
                          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                            fontSize: "13px",
                            minWidth: "148px",
                            minHeight: "36px",
                            buttonStyle: "primary",
                            type: "submit",
                            onSubmit: handleSubmit,
                            loading: isSubmitting,
                            disabled: values.twoFactorAuthenticatorCode.length < 6,
                            "data-cy": "add-two-factor-auth-totp-code-button",
                            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_9__.FormattedMessage, {
                              id: "TwoFactorAuth.Setup.Form.VerifyButton",
                              defaultMessage: [{
                                "type": 0,
                                "value": "Verify & see recovery codes"
                              }]
                            })
                          })
                        })]
                      });
                    }
                  })
                })]
              })]
            })]
          })
        })
      })]
    });
  }

}

const addTwoFactorAuthToIndividualMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation AddTwoFactorAuthToIndividual($account: AccountReferenceInput!, $token: String!) {
    addTwoFactorAuthTokenToIndividual(account: $account, token: $token) {
      account {
        id
        hasTwoFactorAuth
      }
      recoveryCodes
    }
  }
`;
const removeTwoFactorAuthFromIndividualMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation RemoveTwoFactorAuthFromIndividual($account: AccountReferenceInput!, $code: String!) {
    removeTwoFactorAuthTokenFromIndividual(account: $account, code: $code) {
      id
      hasTwoFactorAuth
    }
  }
`;
const accountHasTwoFactorAuthQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  query AccountHasTwoFactorAuth($slug: String) {
    individual(slug: $slug) {
      id
      slug
      name
      type
      id
      slug
      name
      type
      hasTwoFactorAuth
    }
  }
`;
const setPasswordMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation SetPassword($password: String!, $currentPassword: String) {
    setPassword(password: $password, currentPassword: $currentPassword) {
      individual {
        id
        hasPassword
      }
      token
    }
  }
`;
const addGraphql = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_14__/* .compose */ .qC)((0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(setPasswordMutation, {
  name: 'setPassword',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T
  }
}), (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(addTwoFactorAuthToIndividualMutation, {
  name: 'addTwoFactorAuthTokenToIndividual',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T
  }
}), (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(removeTwoFactorAuthFromIndividualMutation, {
  name: 'removeTwoFactorAuthTokenFromIndividual',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T
  }
}), (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(accountHasTwoFactorAuthQuery, {
  options: props => ({
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: props.slug
    }
  })
}));
UserSecurity.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "enableTwoFactorAuth",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "values",
      "type": null
    }],
    "returns": null
  }, {
    "name": "disableTwoFactorAuth",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "values",
      "type": null
    }],
    "returns": null
  }, {
    "name": "setPassword",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderPasswordManagement",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "UserSecurity",
  "props": {
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "setPassword": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addTwoFactorAuthTokenToIndividual": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "removeTwoFactorAuthTokenFromIndividual": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "From withUser",
      "type": {
        "name": "shape",
        "value": {
          "isRoot": {
            "name": "bool",
            "required": true
          },
          "hasPassword": {
            "name": "bool",
            "required": true
          },
          "hasRole": {
            "name": "func",
            "required": true
          },
          "email": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "login": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "refetchLoggedInUser": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "individual": {
            "name": "object",
            "required": false
          },
          "loading": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    },
    "addToast": {
      "description": "From withToasts",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "slug": {
      "description": "From parent component",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_9__.injectIntl)((0,_ToastProvider__WEBPACK_IMPORTED_MODULE_31__/* .withToasts */ .CP)((0,_UserProvider__WEBPACK_IMPORTED_MODULE_32__/* .withUser */ .ns)(addGraphql(UserSecurity)))));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 88325:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ sections_Webhooks)
});

// EXTERNAL MODULE: external "lodash/pick"
var pick_ = __webpack_require__(84159);
var pick_default = /*#__PURE__*/__webpack_require__.n(pick_);
// EXTERNAL MODULE: external "lodash/get"
var get_ = __webpack_require__(1712);
var get_default = /*#__PURE__*/__webpack_require__.n(get_);
// EXTERNAL MODULE: external "lodash/difference"
var difference_ = __webpack_require__(77047);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference_);
// EXTERNAL MODULE: external "lodash/cloneDeep"
var cloneDeep_ = __webpack_require__(59591);
var cloneDeep_default = /*#__PURE__*/__webpack_require__.n(cloneDeep_);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
// EXTERNAL MODULE: external "@apollo/client/react/hoc"
var hoc_ = __webpack_require__(95159);
// EXTERNAL MODULE: external "@styled-icons/boxicons-regular/InfoCircle"
var InfoCircle_ = __webpack_require__(10054);
// EXTERNAL MODULE: external "@styled-icons/material/Add"
var Add_ = __webpack_require__(10208);
// EXTERNAL MODULE: external "@styled-icons/material/Close"
var Close_ = __webpack_require__(20384);
// EXTERNAL MODULE: external "memoize-one"
var external_memoize_one_ = __webpack_require__(17809);
var external_memoize_one_default = /*#__PURE__*/__webpack_require__.n(external_memoize_one_);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: external "validator"
var external_validator_ = __webpack_require__(71564);
// EXTERNAL MODULE: ./lib/constants/collectives.js
var collectives = __webpack_require__(82525);
;// CONCATENATED MODULE: ./lib/constants/notificationEvents.js
// Webhook notification events
const WebhookEvents = {
  ALL: 'all',
  CONNECTED_ACCOUNT_CREATED: 'connected_account.created',
  COLLECTIVE_APPLY: 'collective.apply',
  COLLECTIVE_APPROVED: 'collective.approved',
  COLLECTIVE_CREATED: 'collective.created',
  COLLECTIVE_COMMENT_CREATED: 'collective.comment.created',
  COLLECTIVE_EXPENSE_CREATED: 'collective.expense.created',
  COLLECTIVE_EXPENSE_DELETED: 'collective.expense.deleted',
  COLLECTIVE_EXPENSE_UPDATED: 'collective.expense.updated',
  COLLECTIVE_EXPENSE_REJECTED: 'collective.expense.rejected',
  COLLECTIVE_EXPENSE_APPROVED: 'collective.expense.approved',
  COLLECTIVE_EXPENSE_PAID: 'collective.expense.paid',
  COLLECTIVE_MEMBER_CREATED: 'collective.member.created',
  COLLECTIVE_TRANSACTION_CREATED: 'collective.transaction.created',
  COLLECTIVE_UPDATE_CREATED: 'collective.update.created',
  COLLECTIVE_UPDATE_PUBLISHED: 'collective.update.published',
  SUBSCRIPTION_CANCELED: 'subscription.canceled',
  TICKET_CONFIRMED: 'ticket.confirmed'
};
const WebhookEventsList = Object.values(WebhookEvents).sort();
// EXTERNAL MODULE: ./lib/errors/index.js + 1 modules
var errors = __webpack_require__(12136);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
;// CONCATENATED MODULE: ./lib/i18n/webhook-event-type.js


const TypesI18n = (0,external_react_intl_.defineMessages)({
  [WebhookEvents.ALL]: {
    id: "WebhookEvents.All",
    defaultMessage: [{
      "type": 0,
      "value": "All"
    }]
  },
  [WebhookEvents.CONNECTED_ACCOUNT_CREATED]: {
    id: "WebhookEvents.CONNECTED_ACCOUNT_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "Connected account added"
    }]
  },
  [WebhookEvents.COLLECTIVE_APPLY]: {
    id: "WebhookEvents.COLLECTIVE_APPLY",
    defaultMessage: [{
      "type": 0,
      "value": "New collective application"
    }]
  },
  [WebhookEvents.COLLECTIVE_APPROVED]: {
    id: "WebhookEvents.COLLECTIVE_APPROVED",
    defaultMessage: [{
      "type": 0,
      "value": "Collective application approved"
    }]
  },
  [WebhookEvents.COLLECTIVE_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "Collective created"
    }]
  },
  [WebhookEvents.COLLECTIVE_COMMENT_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_COMMENT_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "New comment"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_EXPENSE_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "New expenses"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_DELETED]: {
    id: "KYXMJ6",
    defaultMessage: [{
      "type": 0,
      "value": "Expense deleted"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_UPDATED]: {
    id: "Expense.Activity.Updated",
    defaultMessage: [{
      "type": 0,
      "value": "Expense updated"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_REJECTED]: {
    id: "Expense.Activity.Rejected",
    defaultMessage: [{
      "type": 0,
      "value": "Expense rejected"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_APPROVED]: {
    id: "Expense.Activity.Approved",
    defaultMessage: [{
      "type": 0,
      "value": "Expense approved"
    }]
  },
  [WebhookEvents.COLLECTIVE_EXPENSE_PAID]: {
    id: "Expense.Activity.Paid",
    defaultMessage: [{
      "type": 0,
      "value": "Expense paid"
    }]
  },
  [WebhookEvents.COLLECTIVE_MEMBER_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_MEMBER_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "New member"
    }]
  },
  [WebhookEvents.COLLECTIVE_TRANSACTION_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_TRANSACTION_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "New transaction"
    }]
  },
  [WebhookEvents.COLLECTIVE_UPDATE_CREATED]: {
    id: "WebhookEvents.COLLECTIVE_UPDATE_CREATED",
    defaultMessage: [{
      "type": 0,
      "value": "New update drafted"
    }]
  },
  [WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED]: {
    id: "connectedAccounts.twitter.updatePublished.toggle.label",
    defaultMessage: [{
      "type": 0,
      "value": "Update published"
    }]
  },
  [WebhookEvents.SUBSCRIPTION_CANCELED]: {
    id: "p9V1Z4",
    defaultMessage: [{
      "type": 0,
      "value": "Recurring contribution cancelled"
    }]
  },
  [WebhookEvents.TICKET_CONFIRMED]: {
    id: "WebhookEvents.TICKET_CONFIRMED",
    defaultMessage: [{
      "type": 0,
      "value": "Ticket confirmed"
    }]
  }
});
/**
 * Translate the webhook event
 *
 * @param {object} `intl` - see `injectIntl`
 * @param {string} `type`
 */

const i18nWebhookEventType = (intl, type) => {
  const i18nMsg = TypesI18n[type];
  return i18nMsg ? intl.formatMessage(i18nMsg) : type;
};
// EXTERNAL MODULE: ./lib/utils.js
var utils = __webpack_require__(97079);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/I18nFormatters.js
var I18nFormatters = __webpack_require__(88705);
// EXTERNAL MODULE: ./components/Loading.js
var Loading = __webpack_require__(53169);
// EXTERNAL MODULE: ./components/MessageBox.tsx + 1 modules
var MessageBox = __webpack_require__(37278);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./components/StyledHr.tsx
var StyledHr = __webpack_require__(173);
// EXTERNAL MODULE: ./components/StyledInputGroup.js
var StyledInputGroup = __webpack_require__(32631);
// EXTERNAL MODULE: ./components/StyledSelect.tsx
var StyledSelect = __webpack_require__(66943);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: ./components/StyledModal.tsx
var StyledModal = __webpack_require__(71792);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/edit-collective/sections/WebhookActivityInfoModal.js
const _excluded = ["activity"];

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }











const getFakeActivity = (type, data) => {
  return {
    createdAt: '2022-07-18T10:30:44.479Z',
    id: 309906,
    CollectiveId: 16658,
    type,
    data
  };
};

const getFakeIndividual = () => ({
  id: 4469,
  type: 'USER',
  slug: 'betree',
  name: 'Benjamin',
  twitterHandle: 'Betree83',
  githubHandle: 'Betree',
  repositoryUrl: 'https://github.com/Betree',
  image: 'https://opencollective-staging.s3.us-west-1.amazonaws.com/550ac070-e0f8-11e9-9d4c-e9c71c24ba70.jpg'
});

const getFakeCollective = () => ({
  id: 16658,
  type: 'COLLECTIVE',
  slug: 'captainfact_io',
  name: 'CaptainFact',
  twitterHandle: null,
  githubHandle: 'test',
  repositoryUrl: 'https://github.com/CaptainFact',
  image: 'https://opencollective-staging.s3.us-west-1.amazonaws.com/10dd8f00-54c8-11eb-bfdc-17c9ddbead53.png'
});

const getFakeTransaction = () => ({
  id: 233159,
  kind: 'CONTRIBUTION',
  type: 'CREDIT',
  uuid: 'a6a00550-95c4-48b2-bb32-ceb185232725',
  group: '9268b46d-74e7-4360-ac99-9413f78bb73e',
  amount: 4198,
  isDebt: false,
  OrderId: 50684,
  currency: 'EUR',
  isRefund: false,
  ExpenseId: null,
  createdAt: '2022-07-18T10:30:14.942Z',
  taxAmount: null,
  description: 'Monthly financial contribution to CaptainFact (Fixed recurring)',
  CollectiveId: 16658,
  hostCurrency: 'EUR',
  CreatedByUserId: 4829,
  FromCollectiveId: 4469,
  amountInHostCurrency: 4198,
  hostFeeInHostCurrency: 0,
  netAmountInHostCurrency: 4033,
  platformFeeInHostCurrency: 0,
  UsingGiftCardFromCollectiveId: null,
  netAmountInCollectiveCurrency: 4033,
  amountSentToHostInHostCurrency: 4033,
  paymentProcessorFeeInHostCurrency: -165,
  formattedAmount: '€41.98',
  formattedAmountWithInterval: '€41.98'
}); // All expenses have the same payload format


const getFakeExpenseEventActivity = type => {
  return getFakeActivity(type, {
    expense: {
      id: 9214,
      description: 'Food for the team retreat',
      amount: 5500,
      currency: 'USD',
      formattedAmount: '$55.00',
      formattedAmountWithInterval: '$55.00'
    },
    fromCollective: getFakeIndividual(),
    collective: getFakeCollective()
  });
};

const getFakeMember = () => ({
  role: 'BACKER',
  description: null,
  since: '2022-07-18T10:30:14.985Z',
  memberCollective: {
    id: 4469,
    type: 'USER',
    slug: 'betree',
    name: 'Ben',
    company: '@CaptainFact_io @opencollective',
    website: 'https://benjamin.piouffle.com',
    twitterHandle: 'Betree83',
    githubHandle: 'Betree',
    repositoryUrl: 'https://github.com/Betree',
    description: 'Developer and civic tech enthusiast !',
    previewImage: 'https://res.cloudinary.com/opencollective/image/fetch/c_thumb,g_face,h_48,r_max,w_48,bo_3px_solid_white/c_thumb,h_48,r_max,w_48,bo_2px_solid_rgb:66C71A/e_trim/f_jpg/https%3A%2F%2Fopencollective-staging.s3.us-west-1.amazonaws.com%2F550ac070-e0f8-11e9-9d4c-e9c71c24ba70.jpg'
  }
});

const getFakeOrder = () => ({
  id: 50684,
  totalAmount: 4198,
  currency: 'EUR',
  description: 'Monthly financial contribution to CaptainFact (Fixed recurring)',
  interval: 'month',
  createdAt: '2022-07-18T10:30:09.855Z',
  quantity: 1,
  formattedAmount: '€41.98',
  formattedAmountWithInterval: '€41.98 / month'
});

const ExpenseEvents = [WebhookEvents.COLLECTIVE_EXPENSE_PAID, WebhookEvents.COLLECTIVE_EXPENSE_CREATED, WebhookEvents.COLLECTIVE_EXPENSE_APPROVED, WebhookEvents.COLLECTIVE_EXPENSE_DELETED, WebhookEvents.COLLECTIVE_EXPENSE_REJECTED, WebhookEvents.COLLECTIVE_EXPENSE_UPDATED];

const WebhookEventInfo = _objectSpread(_objectSpread({}, ExpenseEvents.reduce((acc, type) => {
  acc[type] = () => getFakeExpenseEventActivity(type);

  return acc;
}, {})), {}, {
  [WebhookEvents.COLLECTIVE_TRANSACTION_CREATED]: () => getFakeActivity(WebhookEvents.COLLECTIVE_TRANSACTION_CREATED, {
    fromCollective: getFakeIndividual(),
    collective: getFakeCollective(),
    transaction: getFakeTransaction()
  }),
  [WebhookEvents.COLLECTIVE_MEMBER_CREATED]: () => getFakeActivity(WebhookEvents.COLLECTIVE_MEMBER_CREATED, {
    member: getFakeMember(),
    order: getFakeOrder()
  }),
  [WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED]: () => getFakeActivity(WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED, {
    update: {
      html: '<div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Paria sunt igitur. Atque ab his initiis profecti omnium virtutum et originem et progressionem persecuti sunt. Non igitur de improbo, sed de callido improbo quaerimus, qualis Q. Si quidem, inquit, tollerem, sed relinquo. Non quam nostram quidem, inquit Pomponius iocans; <strong>Quantum Aristoxeni ingenium consumptum videmus in musicis?</strong><br /><br /></div><div><strong><br />Praeteritis, inquit, gaudeo.</strong> Aliter enim explicari, quod quaeritur, non potest. Hic nihil fuit, quod quaereremus. Hinc ceteri particulas arripere conati suam quisque videro voluit afferre sententiam. <strong>Nam, ut sint illa vendibiliora, haec uberiora certe sunt.</strong> Respondent extrema primis, media utrisque, omnia omnibus. Quamvis enim depravatae non sint, pravae tamen esse possunt. <em>Iam id ipsum absurdum, maximum malum neglegi.</em> <em>Expectoque quid ad id, quod quaerebam, respondeas.</em> Nec vero alia sunt quaerenda contra Carneadeam illam sententiam. Quid ei reliquisti, nisi te, quoquo modo loqueretur, intellegere, quid diceret? Si enim ad populum me vocas, eum. <br /><br /></div><div><br />Duo Reges: constructio interrete. <em>Sed ad rem redeamus;</em> Hinc ceteri particulas arripere conati suam quisque videro voluit afferre sententiam. Aperiendum est igitur, quid sit voluptas; Oratio me istius philosophi non offendit; <em>Itaque ab his ordiamur.</em></div>',
      title: 'Duo Reges: constructio interrete',
      slug: 'duo-reges-constructio-interrete',
      isPrivate: false
    }
  })
});

const hasWebhookEventInfo = event => Boolean(WebhookEventInfo[event]);
const CodeContainer = external_styled_components_default().pre.withConfig({
  displayName: "WebhookActivityInfoModal__CodeContainer",
  componentId: "sc-1wy9bxr-0"
})(["max-width:500px;max-height:800px;overflow:auto;"]);

const WebhookActivityInfoModal = _ref => {
  let {
    activity
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,external_react_intl_.useIntl)();
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledModal/* default */.ZP, _objectSpread(_objectSpread({}, props), {}, {
    children: [/*#__PURE__*/jsx_runtime_.jsx(StyledModal/* ModalHeader */.xB, {
      children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
        id: "NSE1N3",
        defaultMessage: [{
          "type": 0,
          "value": "Details for the \""
        }, {
          "type": 1,
          "value": "event"
        }, {
          "type": 0,
          "value": "\" webhook event"
        }],
        values: {
          event: i18nWebhookEventType(intl, activity)
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledModal/* ModalBody */.fe, {
      mt: 4,
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text.P, {
        mb: 2,
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "dwABvu",
          defaultMessage: [{
            "type": 0,
            "value": "Sample payload:"
          }]
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(CodeContainer, {
        children: JSON.stringify(WebhookEventInfo[activity](), null, 2)
      })]
    })]
  }));
};

WebhookActivityInfoModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "WebhookActivityInfoModal",
  "props": {
    "activity": {
      "description": "",
      "type": {
        "name": "enum",
        "computed": true,
        "value": "Object.values(WebhookEvents)"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const sections_WebhookActivityInfoModal = (WebhookActivityInfoModal);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Webhooks.js






function Webhooks_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Webhooks_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Webhooks_ownKeys(Object(source), !0).forEach(function (key) { Webhooks_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Webhooks_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function Webhooks_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



























const EMPTY_WEBHOOKS = [];

class Webhooks extends (external_react_default()).Component {
  constructor(_props) {
    super(_props);

    Webhooks_defineProperty(this, "getWebhooksFromProps", props => {
      return get_default()(props, 'data.Collective.notifications', EMPTY_WEBHOOKS);
    });

    Webhooks_defineProperty(this, "validateWebhookUrl", value => {
      return (0,external_validator_.isURL)(value);
    });

    Webhooks_defineProperty(this, "cleanWebhookUrl", value => {
      return value ? value.trim().replace(/https?:\/\//, '') : '';
    });

    Webhooks_defineProperty(this, "getEventTypes", external_memoize_one_default()((collectiveType, isHost) => {
      const removeList = [];

      if (collectiveType !== collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE) {
        removeList.push('collective.comment.created', 'collective.expense.created', 'collective.expense.deleted', 'collective.expense.updated', 'collective.expense.rejected', 'collective.expense.approved', 'collective.expense.paid', 'collective.monthly', 'collective.transaction.created', 'collective.transaction.paid', 'collective.update.created', 'collective.update.published');
      }

      if (collectiveType !== collectives/* CollectiveType.ORGANIZATION */.eV.ORGANIZATION) {
        removeList.push('organization.collective.created', 'user.created');
      }

      if (collectiveType !== collectives/* CollectiveType.EVENT */.eV.EVENT) {
        removeList.push('ticket.confirmed');
      }

      if (!isHost) {
        removeList.push('collective.apply', 'collective.approved', 'collective.created');
      }

      return difference_default()(WebhookEventsList, removeList);
    }));

    Webhooks_defineProperty(this, "editWebhook", (index, fieldname, value) => {
      const {
        webhooks,
        status
      } = this.state;
      let newStatus = status;

      if (fieldname === 'webhookUrl') {
        const cleanValue = this.cleanWebhookUrl(value);
        webhooks[index][fieldname] = cleanValue;
        const isValid = webhooks.every(webhook => this.validateWebhookUrl(webhook.webhookUrl));
        newStatus = isValid ? null : 'invalid';
      } else {
        webhooks[index][fieldname] = value;
      }

      this.setState({
        webhooks,
        modified: true,
        status: newStatus
      });
    });

    Webhooks_defineProperty(this, "addWebhook", () => {
      const {
        webhooks
      } = this.state;
      webhooks.push({
        webhookUrl: '',
        type: 'all'
      });
      this.setState({
        webhooks,
        modified: true,
        status: 'invalid'
      });
    });

    Webhooks_defineProperty(this, "removeWebhook", index => {
      const {
        webhooks
      } = this.state;

      if (index < 0 || index > webhooks.length) {
        return;
      }

      webhooks.splice(index, 1);
      this.setState({
        webhooks,
        modified: true
      });
    });

    Webhooks_defineProperty(this, "handleSubmit", async () => {
      this.setState({
        status: 'loading'
      });
      const {
        webhooks
      } = this.state;
      const notifications = webhooks.map(webhook => pick_default()(webhook, ['type', 'webhookUrl', 'id']));

      try {
        const result = await this.props.editWebhooks({
          collectiveId: this.props.data.Collective.id,
          notifications
        });
        this.setState({
          modified: false,
          status: 'saved',
          webhooks: cloneDeep_default()(result.data.editWebhooks)
        });
        setTimeout(() => {
          this.setState({
            status: null
          });
        }, 3000);
      } catch (e) {
        const message = (0,errors/* getErrorFromGraphqlException */.H1)(e).message;
        this.setState({
          status: 'error',
          error: message
        });
      }
    });

    Webhooks_defineProperty(this, "renderWebhook", (webhook, index) => {
      const {
        intl,
        data
      } = this.props;
      return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
        py: 4,
        width: [0.9, 1],
        mx: ['auto', 0],
        px: [0, 3, 0],
        flexWrap: "wrap",
        flexDirection: "row-reverse",
        justifyContent: "space-between",
        children: [/*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          my: [0, 3],
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(StyledButton/* default */.Z, {
            width: 1,
            py: 1,
            px: 3,
            buttonSize: "small",
            buttonStyle: "standard",
            onClick: () => this.removeWebhook(index),
            children: [/*#__PURE__*/jsx_runtime_.jsx(Close_.Close, {
              size: "1.2em"
            }), '  ', /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "webhooks.remove",
              defaultMessage: [{
                "type": 0,
                "value": "Remove webhook"
              }]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
          width: [1, 0.75],
          children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
            mb: 4,
            children: [/*#__PURE__*/jsx_runtime_.jsx(Text/* Label */.__, {
              fontSize: "14px",
              mb: 1,
              children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "webhooks.url.label",
                defaultMessage: [{
                  "type": 0,
                  "value": "URL"
                }]
              })
            }), /*#__PURE__*/jsx_runtime_.jsx(StyledInputGroup/* default */.Z, {
              type: "type",
              name: "webhookUrl",
              prepend: "https://",
              error: !this.validateWebhookUrl(webhook.webhookUrl),
              value: this.cleanWebhookUrl(webhook.webhookUrl),
              onChange: ({
                target
              }) => this.editWebhook(index, 'webhookUrl', target.value)
            })]
          }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
            children: [/*#__PURE__*/jsx_runtime_.jsx(Text/* Label */.__, {
              fontSize: "14px",
              mb: 1,
              children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "ZmlNQ3",
                defaultMessage: [{
                  "type": 0,
                  "value": "Activity"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
              alignItems: "center",
              children: [/*#__PURE__*/jsx_runtime_.jsx(StyledSelect/* default */.ZP, {
                minWidth: 300,
                isSearchable: false,
                inputId: "event-type-select",
                options: this.getEventTypes(data.Collective.type, data.Collective.isHost).map(eventType => ({
                  label: i18nWebhookEventType(intl, eventType),
                  value: eventType
                })),
                value: {
                  label: i18nWebhookEventType(intl, webhook.type),
                  value: webhook.type
                },
                onChange: ({
                  value
                }) => this.editWebhook(index, 'type', value)
              }), hasWebhookEventInfo(webhook.type) && /*#__PURE__*/jsx_runtime_.jsx(StyledButton/* default */.Z, {
                buttonSize: "tiny",
                isBorderless: true,
                title: intl.formatMessage({
                  id: "moreInfo",
                  defaultMessage: [{
                    "type": 0,
                    "value": "More info"
                  }]
                }),
                onClick: () => this.setState({
                  moreInfoModal: webhook.type
                }),
                ml: 2,
                children: /*#__PURE__*/jsx_runtime_.jsx(InfoCircle_.InfoCircle, {
                  size: 24,
                  color: "#a3a3a3"
                })
              })]
            })]
          }), this.state.moreInfoModal && /*#__PURE__*/jsx_runtime_.jsx(sections_WebhookActivityInfoModal, {
            activity: this.state.moreInfoModal,
            onClose: () => this.setState({
              moreInfoModal: null
            })
          })]
        })]
      }, index);
    });

    this.state = {
      moreInfoModal: null,
      modified: false,
      webhooks: cloneDeep_default()(this.getWebhooksFromProps(_props)),
      isLoaded: false,
      status: null,
      error: ''
    };
  }

  componentDidUpdate(oldProps) {
    if (this.getWebhooksFromProps(oldProps) !== this.getWebhooksFromProps(this.props)) {
      this.setState({
        webhooks: cloneDeep_default()(this.getWebhooksFromProps(this.props))
      });
    }
  }

  render() {
    const {
      webhooks,
      status,
      error
    } = this.state;
    const {
      data
    } = this.props;
    const webhooksCount = webhooks.length;

    if (data.loading) {
      return /*#__PURE__*/jsx_runtime_.jsx(Loading/* default */.Z, {});
    }

    return /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text.P, {
        fontSize: "14px",
        lineHeight: "18px",
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "gN829M",
          defaultMessage: [{
            "type": 0,
            "value": "You can use Webhooks to build custom integrations with Open Collective. Slack and Discord webhooks are natively supported. You can also integrate them with tools like Zapier, IFTTT, or Huginn. Learn more about this from "
          }, {
            "type": 8,
            "value": "DocLink",
            "children": [{
              "type": 0,
              "value": "the documentation"
            }]
          }, {
            "type": 0,
            "value": " or see how you can go further using our "
          }, {
            "type": 8,
            "value": "GraphqlAPILink",
            "children": [{
              "type": 0,
              "value": "public GraphQL API"
            }]
          }, {
            "type": 0,
            "value": "."
          }],
          values: {
            GraphqlAPILink: (0,I18nFormatters/* getI18nLink */.fw)({
              href: 'https://docs.opencollective.com/help/contributing/development/api#graphql-api',
              openInNewTab: true
            }),
            DocLink: (0,I18nFormatters/* getI18nLink */.fw)({
              href: 'https://docs.opencollective.com/help/collectives/collective-settings/integrations#webhooks-generic-slack-discord',
              openInNewTab: true
            })
          }
        })
      }), /*#__PURE__*/jsx_runtime_.jsx("div", {
        children: webhooks.map(this.renderWebhook)
      }), webhooksCount > 0 && /*#__PURE__*/jsx_runtime_.jsx(StyledHr/* default */.Z, {
        borderColor: "black.300"
      }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
        width: [0.9, 0.75],
        mx: ['auto', 0],
        my: 3,
        children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(_StyledStyledButton, {
          width: 1,
          px: [0, 3, 0],
          borderRadius: 6,
          buttonSize: "medium",
          buttonStyle: "standard",
          onClick: () => this.addWebhook(),
          $_css: 'border-style: dashed',
          children: [/*#__PURE__*/jsx_runtime_.jsx(Add_.Add, {
            size: "1.2em"
          }), '  ', /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "M3IHfl",
            defaultMessage: [{
              "type": 0,
              "value": "Add "
            }, {
              "type": 5,
              "value": "existingWebhooksCount",
              "options": {
                "0": {
                  "value": [{
                    "type": 0,
                    "value": "your first"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "another"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": " webhook"
            }],
            values: {
              existingWebhooksCount: webhooksCount
            }
          })]
        })
      }), status === 'error' && /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
        my: 3,
        children: /*#__PURE__*/jsx_runtime_.jsx(MessageBox/* default */.Z, {
          type: "error",
          children: error
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
        mr: 3,
        children: /*#__PURE__*/jsx_runtime_.jsx(StyledButton/* default */.Z, {
          px: 4,
          buttonSize: "medium",
          buttonStyle: "primary",
          onClick: this.handleSubmit,
          loading: status === 'loading',
          disabled: data.loading || !this.state.modified || status === 'invalid',
          children: status === 'saved' ? /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
            textTransform: "capitalize",
            children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "saved",
              defaultMessage: [{
                "type": 0,
                "value": "Saved"
              }]
            })
          }) : /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "webhooks.save",
            defaultMessage: [{
              "type": 0,
              "value": "Save "
            }, {
              "type": 1,
              "value": "count"
            }, {
              "type": 0,
              "value": " webhooks"
            }],
            values: {
              count: webhooksCount
            }
          })
        })
      })]
    });
  }

}

const editCollectiveWebhooksQuery = helpers/* gqlV1 */.N
/* GraphQL */
`
  query EditCollectiveWebhooks($collectiveSlug: String) {
    Collective(slug: $collectiveSlug) {
      id
      type
      slug
      isHost
      notifications(channel: "webhook") {
        id
        type
        active
        webhookUrl
      }
    }
  }
`;
const editCollectiveWebhooksMutation = helpers/* gqlV1 */.N
/* GraphQL */
`
  mutation EditCollectiveWebhooks($collectiveId: Int!, $notifications: [NotificationInputType]) {
    editWebhooks(collectiveId: $collectiveId, notifications: $notifications) {
      id
      type
      active
      webhookUrl
    }
  }
`;
const addEditCollectiveWebhooksData = (0,hoc_.graphql)(editCollectiveWebhooksQuery);
const editEditCollectiveWebhooksMutation = (0,hoc_.graphql)(editCollectiveWebhooksMutation, {
  props: ({
    mutate,
    ownProps
  }) => ({
    editWebhooks: variables => mutate({
      variables,
      update: (cache, {
        data: {
          editWebhooks
        }
      }) => {
        const {
          Collective
        } = cache.readQuery({
          query: editCollectiveWebhooksQuery,
          variables: {
            collectiveSlug: ownProps.collectiveSlug
          }
        });
        cache.writeQuery({
          query: editCollectiveWebhooksQuery,
          data: {
            Collective: Webhooks_objectSpread(Webhooks_objectSpread({}, Collective), {}, {
              notifications: editWebhooks
            })
          }
        });
      }
    })
  })
});
const addGraphql = (0,utils/* compose */.qC)(addEditCollectiveWebhooksData, editEditCollectiveWebhooksMutation);
Webhooks.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getWebhooksFromProps",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "props",
      "type": null
    }],
    "returns": null
  }, {
    "name": "validateWebhookUrl",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "cleanWebhookUrl",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "editWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }, {
      "name": "fieldname",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "addWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "removeWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "webhook",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "Webhooks",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "editWebhooks": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "data": {
      "description": "From graphql query",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const sections_Webhooks = ((0,external_react_intl_.injectIntl)(addGraphql(Webhooks)));

var _StyledStyledButton = external_styled_components_default()(StyledButton/* default */.Z).withConfig({
  displayName: "Webhooks___StyledStyledButton",
  componentId: "sc-9r3b0d-0"
})(["", ""], p => p.$_css);

/***/ }),

/***/ 99250:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _styled_icons_material_Delete__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(31004);
/* harmony import */ var _styled_icons_material_Delete__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_material_Delete__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(98216);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(62131);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(71792);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(88609);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(31330);
/* harmony import */ var _MemberForm__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(13288);
/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(79184);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledTooltip__WEBPACK_IMPORTED_MODULE_14__, _ToastProvider__WEBPACK_IMPORTED_MODULE_15__, _MemberForm__WEBPACK_IMPORTED_MODULE_16__]);
([_StyledTooltip__WEBPACK_IMPORTED_MODULE_14__, _ToastProvider__WEBPACK_IMPORTED_MODULE_15__, _MemberForm__WEBPACK_IMPORTED_MODULE_16__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




















const editMemberMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation EditMember(
    $memberAccount: AccountReferenceInput!
    $account: AccountReferenceInput!
    $role: MemberRole
    $description: String
    $since: DateTime
  ) {
    editMember(
      memberAccount: $memberAccount
      account: $account
      role: $role
      description: $description
      since: $since
    ) {
      id
      role
      description
      since
    }
  }
`;
const editMemberInvitationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation EditMemberInvitation(
    $memberAccount: AccountReferenceInput!
    $account: AccountReferenceInput!
    $role: MemberRole
    $description: String
    $since: DateTime
  ) {
    editMemberInvitation(
      memberAccount: $memberAccount
      account: $account
      role: $role
      description: $description
      since: $since
    ) {
      id
      role
      description
      since
    }
  }
`;
const removeMemberMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation RemoveMember(
    $memberAccount: AccountReferenceInput!
    $account: AccountReferenceInput!
    $role: MemberRole!
    $isInvitation: Boolean
  ) {
    removeMember(memberAccount: $memberAccount, account: $account, role: $role, isInvitation: $isInvitation)
  }
`;

const EditMemberModal = props => {
  const {
    intl,
    member,
    collective,
    canRemove,
    isLastAdmin,
    cancelHandler,
    onEdit
  } = props;
  const {
    LoggedInUser,
    refetchLoggedInUser
  } = (0,_lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .useToasts */ .e1)();
  const isInvitation = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, '__typename') === 'MemberInvitation';
  const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_5__.defineMessages)({
    cantRemoveLast: {
      id: "members.remove.cantRemoveLast",
      defaultMessage: [{
        "type": 0,
        "value": "The last admin cannot be removed. Please add another admin first."
      }]
    },
    removeConfirm: {
      id: "members.remove.confirm",
      defaultMessage: [{
        "type": 0,
        "value": "Do you really want to remove "
      }, {
        "type": 1,
        "value": "name"
      }, {
        "type": 0,
        "value": " @"
      }, {
        "type": 1,
        "value": "slug"
      }, {
        "type": 0,
        "value": " "
      }, {
        "type": 5,
        "value": "hasEmail",
        "options": {
          "1": {
            "value": [{
              "type": 0,
              "value": "("
            }, {
              "type": 1,
              "value": "email"
            }, {
              "type": 0,
              "value": ")"
            }]
          },
          "other": {
            "value": []
          }
        }
      }, {
        "type": 0,
        "value": "?"
      }]
    }
  });
  const [editMemberAccount, {
    loading: isEditingMember
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(editMemberMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T
  });
  const [editMemberInvitationAccount, {
    loading: isEditingMemberInvitation
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(editMemberInvitationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T
  });
  const [removeMemberAccount, {
    loading: isRemovingMember
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(removeMemberMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T,
    refetchQueries: [{
      query: _queries__WEBPACK_IMPORTED_MODULE_17__/* .teamSectionQuery */ .b,
      context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T,
      variables: {
        collectiveSlug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug'),
        account: {
          slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
        }
      }
    }],
    awaitRefetchQueries: true
  });
  let submitMemberForm = null;

  const bindSubmitForm = submitForm => {
    submitMemberForm = submitForm;
  };

  const handleEditMemberMutation = async values => {
    const {
      description,
      role,
      since
    } = values;

    try {
      await editMemberAccount({
        variables: {
          memberAccount: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member.account, 'slug')
          },
          account: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
          },
          description,
          role,
          since
        }
      });
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "editTeam.member.edit.success",
          defaultMessage: [{
            "type": 0,
            "value": "Member updated successfully."
          }]
        })
      });

      if (lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'account.slug') === lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(LoggedInUser, 'collective.slug')) {
        await refetchLoggedInUser();
      }

      onEdit?.();
      cancelHandler();
    } catch (error) {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "editTeam.member.edit.error",
          defaultMessage: [{
            "type": 0,
            "value": "Failed to update member."
          }]
        }),
        message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_7__/* .i18nGraphqlException */ .t2)(intl, error),
        variant: 'light'
      });
    }
  };

  const handleEditMemberInvitationMutation = async values => {
    const {
      description,
      role,
      since
    } = values;

    try {
      await editMemberInvitationAccount({
        variables: {
          memberAccount: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'memberAccount.slug')
          },
          account: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
          },
          description,
          role,
          since
        }
      });
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "editTeam.memberInvitation.edit.success",
          defaultMessage: [{
            "type": 0,
            "value": "Member invitation updated successfully."
          }]
        })
      });
      onEdit?.();
      cancelHandler();
    } catch (error) {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "editTeam.memberInvitation.edit.error",
          defaultMessage: [{
            "type": 0,
            "value": "Failed to update member invitation."
          }]
        }),
        message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_7__/* .i18nGraphqlException */ .t2)(intl, error)
      });
    }
  };

  const confirmRemoveMember = memberEntry => {
    const account = memberEntry.account || memberEntry.memberAccount;
    return window.confirm(intl.formatMessage(messages.removeConfirm, _objectSpread(_objectSpread({}, account), {}, {
      hasEmail: Number(account.email)
    })));
  };

  const handleRemoveMemberMutation = async () => {
    if (confirmRemoveMember(member)) {
      try {
        await removeMemberAccount({
          variables: {
            memberAccount: {
              slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'account.slug') || lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'memberAccount.slug')
            },
            account: {
              slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
            },
            role: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'role'),
            isInvitation
          }
        });
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
          message: isInvitation ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "editTeam.memberInvitation.remove.success",
            defaultMessage: [{
              "type": 0,
              "value": "Member invitation removed successfully."
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "editTeam.member.remove.success",
            defaultMessage: [{
              "type": 0,
              "value": "Member removed successfully."
            }]
          })
        });

        if (lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'account.slug') === lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(LoggedInUser, 'collective.slug')) {
          await props.router.push({
            pathname: `/${lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')}`
          });
          await refetchLoggedInUser();
        }

        onEdit?.();
        cancelHandler();
      } catch (error) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          title: isInvitation ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "editTeam.member.remove.error",
            defaultMessage: [{
              "type": 0,
              "value": "Failed to remove member."
            }]
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "editTeam.memberInvitation.remove.error",
            defaultMessage: [{
              "type": 0,
              "value": "Failed to remove member invitation."
            }]
          }),
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_7__/* .i18nGraphqlException */ .t2)(intl, error)
        });
      }
    } else {
      cancelHandler();
    }
  };

  const handleSubmitForm = () => {
    if (submitMemberForm) {
      submitMemberForm();
    }
  };

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, {
      width: 688,
      onClose: cancelHandler,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_13__/* .ModalHeader */ .xB, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "editTeam.member.edit",
          defaultMessage: [{
            "type": 0,
            "value": "Edit Team Member"
          }]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_13__/* .ModalBody */ .fe, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_MemberForm__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          intl: intl,
          collectiveImg: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'imageUrl'),
          member: member,
          bindSubmitForm: bindSubmitForm,
          triggerSubmit: isInvitation ? handleEditMemberInvitationMutation : handleEditMemberMutation
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
          justifyContent: "flex-end",
          children: isLastAdmin && member.role === _lib_constants_roles__WEBPACK_IMPORTED_MODULE_6__/* ["default"].ADMIN */ .Z.ADMIN ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            place: "bottom",
            content: () => intl.formatMessage(messages.cantRemoveLast),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
              mt: 4,
              disabled: true,
              buttonSize: "tiny",
              buttonStyle: "dangerSecondary",
              "data-cy": "remove-member",
              onClick: handleRemoveMemberMutation,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
                alignItems: "center",
                children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_styled_icons_material_Delete__WEBPACK_IMPORTED_MODULE_3__.Delete, {
                  height: 25
                }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
                  id: "Remove",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Remove"
                  }]
                })]
              })
            })
          }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            mt: 4,
            disabled: !canRemove,
            buttonSize: "tiny",
            buttonStyle: "dangerSecondary",
            "data-cy": "remove-member",
            onClick: handleRemoveMemberMutation,
            loading: isRemovingMember,
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
              alignItems: "center",
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_styled_icons_material_Delete__WEBPACK_IMPORTED_MODULE_3__.Delete, {
                height: 25
              }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
                id: "Remove",
                defaultMessage: [{
                  "type": 0,
                  "value": "Remove"
                }]
              })]
            })
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_13__/* .ModalFooter */ .mz, {
        mt: 5,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            mx: 20,
            my: 1,
            autoFocus: true,
            onClick: cancelHandler,
            disabled: isEditingMember || isEditingMemberInvitation || isRemovingMember,
            "data-cy": "confirmation-modal-cancel",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            my: 1,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isEditingMember || isEditingMemberInvitation,
            disabled: isRemovingMember,
            onClick: handleSubmitForm,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })
      })]
    })
  });
};

EditMemberModal.defaultProps = {
  canRemove: true
};
EditMemberModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditMemberModal",
  "props": {
    "canRemove": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "cancelHandler": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onEdit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "isLastAdmin": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "member": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_router__WEBPACK_IMPORTED_MODULE_4__.withRouter)(EditMemberModal));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 85796:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "G": () => (/* binding */ inviteMemberMutation),
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82525);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(5993);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87268);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(71792);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(31330);
/* harmony import */ var _MemberForm__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13288);
/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(79184);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_6__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__, _MemberForm__WEBPACK_IMPORTED_MODULE_14__]);
([_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_6__, _ToastProvider__WEBPACK_IMPORTED_MODULE_13__, _MemberForm__WEBPACK_IMPORTED_MODULE_14__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


















const inviteMemberMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation InviteMember(
    $memberAccount: AccountReferenceInput!
    $account: AccountReferenceInput!
    $role: MemberRole!
    $description: String
    $since: DateTime
  ) {
    inviteMember(
      memberAccount: $memberAccount
      account: $account
      role: $role
      description: $description
      since: $since
    ) {
      id
      role
      description
      since
    }
  }
`;

const InviteMemberModal = props => {
  const {
    intl,
    collective,
    membersIds,
    cancelHandler
  } = props;
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .useToasts */ .e1)();
  const [member, setMember] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(null);
  const mutationOptions = {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    refetchQueries: [{
      query: _queries__WEBPACK_IMPORTED_MODULE_15__/* .teamSectionQuery */ .b,
      context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
      variables: {
        collectiveSlug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug'),
        account: {
          slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
        }
      }
    }],
    awaitRefetchQueries: true
  };
  const [inviteMemberAccount, {
    loading: isInviting,
    error: inviteError
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useMutation)(inviteMemberMutation, mutationOptions);
  let submitMemberForm = null;

  const bindSubmitForm = submitForm => {
    submitMemberForm = submitForm;
  };

  const handleInviteMemberMutation = async values => {
    const {
      description,
      role,
      since
    } = values;

    try {
      await inviteMemberAccount({
        variables: {
          memberAccount: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'slug')
          },
          account: {
            slug: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'slug')
          },
          description,
          role,
          since,
          isInvitee: true
        }
      });
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "editTeam.member.invite.success",
          defaultMessage: [{
            "type": 0,
            "value": "Member invited successfully."
          }]
        })
      });
      cancelHandler();
    } catch (error) {
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "editTeam.member.invite.error",
          defaultMessage: [{
            "type": 0,
            "value": "Failed to invite member."
          }]
        })
      });
    }
  };

  const handleSubmitForm = () => {
    if (submitMemberForm) {
      submitMemberForm();
    }
  };

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP, {
      width: 688,
      onClose: cancelHandler,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalHeader */ .xB, {
        mb: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "editTeam.member.invite",
          defaultMessage: [{
            "type": 0,
            "value": "Invite Team Member"
          }]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalBody */ .fe, {
        children: [inviteError && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Flex */ .kC, {
          alignItems: "center",
          justifyContent: "center",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            type: "error",
            withIcon: true,
            m: [1, 3],
            "data-cy": "cof-error-message",
            children: inviteError.message
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Flex */ .kC, {
          m: 1,
          flexDirection: "column",
          mb: 2,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
            fontSize: "14px",
            lineHeight: "20px",
            fontWeight: 700,
            mb: 1,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "Tags.USER",
              defaultMessage: [{
                "type": 0,
                "value": "User"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
            inputId: "member-collective-picker",
            creatable: true,
            width: "100%",
            minWidth: 325,
            onChange: option => setMember(option.value),
            isDisabled: Boolean(member),
            types: [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.USER */ .eV.USER],
            filterResults: collectives => collectives.filter(c => !membersIds.includes(c.id)),
            "data-cy": "member-collective-picker"
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_MemberForm__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
          intl: intl,
          collectiveImg: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(collective, 'imageUrl'),
          bindSubmitForm: bindSubmitForm,
          triggerSubmit: handleInviteMemberMutation
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_11__/* .ModalFooter */ .mz, {
        mt: 6,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            mx: 20,
            my: 1,
            autoFocus: true,
            minWidth: 140,
            onClick: cancelHandler,
            disabled: isInviting,
            "data-cy": "confirmation-modal-cancel",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            my: 1,
            minWidth: 140,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isInviting,
            onClick: handleSubmitForm,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })
      })]
    })
  });
};

InviteMemberModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "InviteMemberModal",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "cancelHandler": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "membersIds": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (InviteMemberModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 13288:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82525);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(98216);
/* harmony import */ var _lib_i18n_member_role__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(66465);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _MemberRoleDescription__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(10878);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(75667);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__]);
_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



















const MemberContainer = styled_components__WEBPACK_IMPORTED_MODULE_5___default()(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z).withConfig({
  displayName: "MemberForm__MemberContainer",
  componentId: "sc-1n51ikg-0"
})(["border:1px solid #dcdee0;border-radius:10px;max-width:250px;padding:16px;"]);
const memberFormMessages = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.defineMessages)({
  roleLabel: {
    id: "members.role.label",
    defaultMessage: [{
      "type": 0,
      "value": "Role"
    }]
  },
  sinceLabel: {
    id: "user.since.label",
    defaultMessage: [{
      "type": 0,
      "value": "Since"
    }]
  },
  descriptionLabel: {
    id: "Fields.description",
    defaultMessage: [{
      "type": 0,
      "value": "Description"
    }]
  },
  inValidDateError: {
    id: "6DCLcI",
    defaultMessage: [{
      "type": 0,
      "value": "Please enter a valid date"
    }]
  }
});

const MemberForm = props => {
  const {
    intl,
    member,
    collectiveImg,
    bindSubmitForm,
    triggerSubmit
  } = props;
  const [memberRole, setMemberRole] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(member?.role || _lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__/* ["default"].ADMIN */ .Z.ADMIN);
  const memberCollective = member && (member.account || member.memberAccount);
  const initialValues = {
    description: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'description') || '',
    role: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'role') || _lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__/* ["default"].ADMIN */ .Z.ADMIN,
    since: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'since') ? dayjs__WEBPACK_IMPORTED_MODULE_2___default()(lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'since')).format('YYYY-MM-DD') : dayjs__WEBPACK_IMPORTED_MODULE_2___default()(new Date()).format('YYYY-MM-DD')
  };

  const submit = values => {
    triggerSubmit(_objectSpread(_objectSpread({}, values), {}, {
      since: dayjs__WEBPACK_IMPORTED_MODULE_2___default()(values.since).toISOString()
    }));
  };

  const getOptions = arr => {
    return arr.map(key => {
      return {
        value: key,
        label: (0,_lib_i18n_member_role__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(intl, key)
      };
    });
  };

  const validate = values => {
    const errors = {};

    if (!dayjs__WEBPACK_IMPORTED_MODULE_2___default()(values.since).isValid()) {
      errors.since = intl.formatMessage(memberFormMessages.inValidDateError);
    }

    return errors;
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
    flexDirection: "column",
    justifyContent: "center",
    children: [member && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(MemberContainer, {
      mb: 2,
      mt: 2,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          position: "relative",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, {
            src: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(memberCollective, 'imageUrl'),
            radius: 48
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Container__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            mt: 13,
            position: "absolute",
            bottom: "-10%",
            right: "-10%",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP, {
              type: _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_6__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE,
              backgroundColor: "#ffffff",
              src: collectiveImg,
              radius: 20
            })
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
          mx: 10,
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "16px",
            lineHeight: "24px",
            fontWeight: 500,
            children: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(memberCollective, 'name')
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
            fontSize: "13px",
            lineHeight: "20px",
            color: "#4E5052",
            fontWeight: 400,
            children: (0,_lib_i18n_member_role__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(intl, lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(member, 'role'))
          })]
        })]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(formik__WEBPACK_IMPORTED_MODULE_3__.Formik, {
      validate: validate,
      initialValues: initialValues,
      onSubmit: submit,
      validateOnChange: true,
      children: formik => {
        const {
          submitForm
        } = formik;
        bindSubmitForm(submitForm);
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_3__.Form, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            name: "role",
            htmlFor: "memberForm-role",
            label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontWeight: "bold",
              children: [" ", intl.formatMessage(memberFormMessages.roleLabel), " "]
            }),
            mt: 3,
            children: ({
              form,
              field
            }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, {
                inputId: field.id,
                error: field.error,
                defaultValue: getOptions([memberRole])[0],
                onBlur: () => form.setFieldTouched(field.name, true),
                onChange: ({
                  value
                }) => {
                  form.setFieldValue(field.name, value);
                  setMemberRole(value);
                },
                options: getOptions([_lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__/* ["default"].ADMIN */ .Z.ADMIN, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MEMBER */ .Z.MEMBER, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_7__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT])
              }), (0,_MemberRoleDescription__WEBPACK_IMPORTED_MODULE_12__/* .hasRoleDescription */ .T)(memberRole) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
                mb: 3,
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
                  mx: 1,
                  mt: 1,
                  fontSize: "12px",
                  color: "black.600",
                  fontStyle: "italic",
                  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_MemberRoleDescription__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
                    role: memberRole
                  })
                })
              })]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            name: "description",
            htmlFor: "memberForm-description",
            label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontWeight: "bold",
              children: intl.formatMessage(memberFormMessages.descriptionLabel)
            }),
            mt: 3,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, _objectSpread({}, field))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            name: "since",
            htmlFor: "memberForm-since",
            inputType: "date",
            label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontWeight: "bold",
              children: intl.formatMessage(memberFormMessages.sinceLabel)
            }),
            mt: 3,
            children: ({
              form,
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              required: true,
              onChange: event => {
                if (event.target.value) {
                  form.setFieldValue(field.name, event.target.value);
                }
              },
              value: field.value
            }))
          })]
        });
      }
    })]
  });
};

MemberForm.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MemberForm",
  "props": {
    "bindSubmitForm": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collectiveImg": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "member": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "triggerSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_intl__WEBPACK_IMPORTED_MODULE_4__.injectIntl)(MemberForm));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 39779:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_collective_lib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5700);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87268);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(31330);
/* harmony import */ var _InviteMemberModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85796);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_7__, _InviteMemberModal__WEBPACK_IMPORTED_MODULE_8__]);
([_ToastProvider__WEBPACK_IMPORTED_MODULE_7__, _InviteMemberModal__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);











const ResendMemberInviteBtn = ({
  member,
  collective
}) => {
  const [inviteMember, {
    loading,
    error,
    data
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(_InviteMemberModal__WEBPACK_IMPORTED_MODULE_8__/* .inviteMemberMutation */ .G, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
  });
  const success = !error && data?.inviteMember?.id;
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .useToasts */ .e1)();
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
    buttonStyle: success ? 'successSecondary' : 'standard',
    buttonSize: "tiny",
    mr: 1,
    loading: loading,
    disabled: success,
    "data-cy": "resend-invite-btn",
    onClick: async () => {
      try {
        await inviteMember({
          variables: {
            memberAccount: {
              id: member.account.id
            },
            account: {
              legacyId: (0,_lib_collective_lib__WEBPACK_IMPORTED_MODULE_3__/* .getLegacyIdForCollective */ .Cl)(collective)
            },
            role: member.role
          }
        });
      } catch (e) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          title: intl.formatMessage({
            id: "mGnvLd",
            defaultMessage: [{
              "type": 0,
              "value": "Cannot send member invitation"
            }]
          }),
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .i18nGraphqlException */ .t2)(intl, e)
        });
      }
    },
    children: success ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
      id: "ResendInviteSuccessful",
      defaultMessage: [{
        "type": 0,
        "value": "Invite sent"
      }]
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
      id: "ResendInvite",
      defaultMessage: [{
        "type": 0,
        "value": "Resend invite"
      }]
    })
  });
};

ResendMemberInviteBtn.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ResendMemberInviteBtn",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "member": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "role": {
            "name": "string",
            "required": false
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ResendMemberInviteBtn);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 79184:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "b": () => (/* binding */ teamSectionQuery)
/* harmony export */ });
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_0__);

const memberFieldsFragment = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  fragment MemberFields on Member {
    id
    role
    since
    createdAt
    description
    inherited
    account {
      id
      name
      slug
      type
      imageUrl(height: 64)
      ... on Individual {
        email
      }
    }
  }
`;
const teamSectionQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  query TeamSection($collectiveSlug: String!, $account: AccountReferenceInput!) {
    account(slug: $collectiveSlug) {
      id
      isFrozen
      ... on AccountWithParent {
        parent {
          id
          slug
          type
          name
        }
      }
      ... on AccountWithHost {
        host {
          id
          slug
          name
          features {
            id
            CONTACT_FORM
          }
        }
      }
      members(role: [ADMIN, MEMBER, ACCOUNTANT], limit: 100) {
        nodes {
          id
          ...MemberFields
        }
      }
      childrenAccounts {
        nodes {
          id
          slug
          type
          name
          members(includeInherited: false, role: [ADMIN, MEMBER, ACCOUNTANT], limit: 100) {
            nodes {
              id
              ...MemberFields
            }
          }
        }
      }
    }
    memberInvitations(account: $account) {
      id
      role
      since
      createdAt
      description
      account: memberAccount {
        id
        name
        slug
        type
        imageUrl(height: 64)
        ... on Individual {
          email
        }
      }
    }
  }
  ${memberFieldsFragment}
`;

/***/ }),

/***/ 16103:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15078);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49106);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _RequestVirtualCardBtn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(96177);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _filters_CollectiveFilter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(39569);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_6__, _RequestVirtualCardBtn__WEBPACK_IMPORTED_MODULE_8__]);
([_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_6__, _RequestVirtualCardBtn__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }













const FilterContainer = styled_components__WEBPACK_IMPORTED_MODULE_3___default()(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu).withConfig({
  displayName: "VirtualCardFilters__FilterContainer",
  componentId: "sc-o5thlk-0"
})(["margin-bottom:8px;"]);
const FilterLabel = styled_components__WEBPACK_IMPORTED_MODULE_3___default().label.withConfig({
  displayName: "VirtualCardFilters__FilterLabel",
  componentId: "sc-o5thlk-1"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);

const VirtualCardFilters = ({
  filters,
  onChange,
  isCollectiveFilter,
  virtualCardCollectives,
  collective,
  host,
  displayPeriodFilter
}) => {
  const allowRequestVirtualCard = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(host, 'settings.virtualcards.requestcard');

  const getFilterProps = (name, valueModifier) => {
    return {
      inputId: `virtual-cards-filter-${name}`,
      value: filters?.[name],
      onChange: value => {
        const preparedValue = valueModifier ? valueModifier(value) : value;
        onChange(_objectSpread(_objectSpread({}, filters), {}, {
          [name]: value === 'ALL' ? null : preparedValue
        }));
      }
    };
  };

  let filterWidth;

  if (allowRequestVirtualCard && displayPeriodFilter) {
    filterWidth = 0.22;
  } else if (allowRequestVirtualCard || displayPeriodFilter) {
    filterWidth = 0.32;
  } else {
    filterWidth = 0.48;
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
    children: [isCollectiveFilter && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(FilterContainer, {
      mr: [0, '8px'],
      mb: ['8px', 0],
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(FilterLabel, {
        htmlFor: "virtual-card-filter-collective",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "Collective",
          defaultMessage: [{
            "type": 0,
            "value": "Collective"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_filters_CollectiveFilter__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, _objectSpread(_objectSpread({}, getFilterProps('collectiveAccountIds')), {}, {
        virtualCardCollectives: virtualCardCollectives
      }))]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      flexWrap: "wrap",
      children: [displayPeriodFilter && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(FilterContainer, {
        mr: [0, '8px'],
        mb: ['8px', 0],
        width: [1, filterWidth],
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(FilterLabel, {
          htmlFor: "virtual-card-filter-period",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "Period",
            defaultMessage: [{
              "type": 0,
              "value": "Period"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, _objectSpread({}, getFilterProps('period', _lib_date_utils__WEBPACK_IMPORTED_MODULE_4__/* .encodeDateInterval */ .EB)))]
      }), allowRequestVirtualCard && collective.isApproved && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_RequestVirtualCardBtn__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        collective: collective,
        host: host,
        children: btnProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, _objectSpread(_objectSpread({
          m: 3
        }, btnProps), {}, {
          width: [1, 1 / 4],
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "VirtualCards.RequestCardButton",
            defaultMessage: [{
              "type": 0,
              "value": "Request card"
            }]
          })
        }))
      })]
    })]
  });
};

VirtualCardFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCardFilters",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filters": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "virtualCardCollectives": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "isCollectiveFilter": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "displayPeriodFilter": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(VirtualCardFilters));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 78034:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63901);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82525);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(15078);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32651);
/* harmony import */ var _Collapse__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(90175);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _HTMLContent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(74770);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(88705);
/* harmony import */ var _Loading__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(53169);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(79045);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(90998);
/* harmony import */ var _VirtualCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(14896);
/* harmony import */ var _VirtualCardFilters__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(16103);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_VirtualCard__WEBPACK_IMPORTED_MODULE_16__, _VirtualCardFilters__WEBPACK_IMPORTED_MODULE_17__]);
([_VirtualCard__WEBPACK_IMPORTED_MODULE_16__, _VirtualCardFilters__WEBPACK_IMPORTED_MODULE_17__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



















const virtualCardsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query AccountVirtualCards(
    $slug: String
    $limit: Int!
    $offset: Int!
    $state: String
    $merchantAccount: AccountReferenceInput
    $dateFrom: DateTime
    $dateTo: DateTime
  ) {
    account(slug: $slug) {
      id
      legacyId
      slug
      type
      name
      imageUrl
      ... on AccountWithHost {
        host {
          legacyId
          slug
          id
          type
          name
          imageUrl
          settings
        }
      }
      virtualCards(
        limit: $limit
        offset: $offset
        state: $state
        merchantAccount: $merchantAccount
        dateFrom: $dateFrom
        dateTo: $dateTo
      ) {
        totalCount
        limit
        offset
        nodes {
          id
          name
          last4
          data
          currency
          provider
          privateData
          createdAt
          spendingLimitAmount
          spendingLimitInterval
          spendingLimitRenewsOn
          remainingLimit
          account {
            id
            slug
            name
            imageUrl
          }
          assignee {
            id
            name
            slug
            imageUrl
          }
        }
      }
      virtualCardMerchants {
        nodes {
          id
          type
          slug
          name
          currency
          location {
            id
            address
            country
          }
          imageUrl(height: 64)
        }
      }
    }
  }
`;
const VIRTUAL_CARDS_PER_PAGE = 6;

const VirtualCards = props => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();

  const routerQuery = lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(router.query, ['slug', 'section']);

  const offset = parseInt(routerQuery.offset) || 0;
  const {
    state,
    merchant,
    period
  } = routerQuery;
  const {
    from: dateFrom,
    to: dateTo
  } = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_7__/* .parseDateInterval */ .dr)(period);
  const {
    loading,
    data
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(virtualCardsQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: props.collective.slug,
      limit: VIRTUAL_CARDS_PER_PAGE,
      offset,
      state,
      merchantAccount: {
        slug: merchant
      },
      dateFrom: dateFrom,
      dateTo: dateTo
    }
  });

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Loading__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {});
  }

  const handleUpdateFilters = queryParams => {
    return router.push({
      pathname: `/${props.collective.slug}/admin/virtual-cards`,
      query: lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, routerQuery), queryParams), value => !value)
    });
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
    width: ['366px', '764px'],
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__.P, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "VirtualCards.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Use a virtual card to spend from your collective's budget. You can request multiple cards (review the host's policy to see how many). Your fiscal host will create the card for you and assign it a limit and a merchant. You will be notified by email once the card is assigned. "
          }, {
            "type": 8,
            "value": "learnMoreLink",
            "children": [{
              "type": 0,
              "value": "Learn more"
            }]
          }],
          values: {
            learnMoreLink: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_12__/* .getI18nLink */ .fw)({
              href: 'https://docs.opencollective.com/help/expenses-and-getting-paid/virtual-cards',
              openInNewTabNoFollow: true
            })
          }
        })
      }), props.collective.host?.settings?.virtualcards?.policy && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__.P, {
        mt: 3,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Collapse__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          title: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "VirtualCards.Policy.Reminder",
            defaultMessage: [{
              "type": 1,
              "value": "hostName"
            }, {
              "type": 0,
              "value": " Virtual Card use Policy"
            }],
            values: {
              hostName: props.collective.host.name
            }
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_HTMLContent__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
            content: props.collective.host?.settings?.virtualcards?.policy
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
        mt: 3,
        flexDirection: ['row', 'column'],
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_VirtualCardFilters__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          filters: routerQuery,
          collective: props.collective,
          host: props.collective.host,
          virtualCardMerchants: data.account.virtualCardMerchants.nodes,
          onChange: queryParams => handleUpdateFilters(_objectSpread(_objectSpread({}, queryParams), {}, {
            offset: null
          })),
          displayPeriodFilter: true
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Grid */ .rj, {
      mt: 4,
      gridTemplateColumns: ['100%', '366px 366px'],
      gridGap: "32px 24px",
      children: data.account.virtualCards.nodes.map(virtualCard => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_VirtualCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        host: data.account.host,
        canEditVirtualCard: virtualCard.data.status === 'active',
        canPauseOrResumeVirtualCard: true,
        canDeleteVirtualCard: true,
        confirmOnPauseCard: props.collective.type === _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_6__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE,
        virtualCard: virtualCard,
        onDeleteRefetchQuery: "AccountVirtualCards"
      }, virtualCard.id))
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        route: `/${props.collective.slug}/admin/virtual-cards`,
        total: data.account.virtualCards.totalCount,
        limit: VIRTUAL_CARDS_PER_PAGE,
        offset: offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

VirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCards",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "virtualCards": {
            "name": "object",
            "required": false
          },
          "virtualCardMerchants": {
            "name": "array",
            "required": false
          },
          "host": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VirtualCards);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 39569:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(69309);
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23672);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76918);
/* harmony import */ var lodash_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_find__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(66943);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);









const CollectiveFilter = ({
  onChange,
  virtualCardCollectives
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();
  const {
    collectiveAccountIds
  } = router.query;

  const getAllCollectives = () => {
    return lodash_sortBy__WEBPACK_IMPORTED_MODULE_1___default()(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_0___default()(virtualCardCollectives, 'legacyId'), 'name').map(collective => {
      const label = collective.parentAccount ? `${collective.parentAccount.name} - ${collective.name}` : collective.name;
      return {
        label,
        value: String(collective.legacyId)
      };
    });
  };

  const findCollectiveFilters = () => {
    return collectiveAccountIds?.split(',').map(collectiveAccountId => lodash_find__WEBPACK_IMPORTED_MODULE_2___default()(getAllCollectives(), {
      value: collectiveAccountId
    }));
  };

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
      inputId: "virtual-card-collective-picker",
      isMulti: true,
      useCompactMode: true,
      options: getAllCollectives(),
      value: findCollectiveFilters(),
      onChange: selectedValues => {
        let selectedValuesString = '';
        selectedValues?.forEach(selectedValue => selectedValuesString = `${selectedValue.value},${selectedValuesString}`);
        onChange(selectedValuesString.slice(0, -1));
      }
    })
  });
};

CollectiveFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "virtualCardCollectives": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectiveFilter);

/***/ }),

/***/ 46217:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "H": () => (/* binding */ formatAccountDetails)
/* harmony export */ });
/* harmony import */ var lodash_toUpper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19358);
/* harmony import */ var lodash_toUpper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_toUpper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(35007);
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase__WEBPACK_IMPORTED_MODULE_1__);


const formatAccountDetails = payoutMethodData => {
  const ignoredKeys = ['type', 'isManualBankTransfer', 'currency'];
  const labels = {
    abartn: 'Routing Number: ',
    firstLine: ''
  };

  const formatKey = s => {
    if (labels[s] !== undefined) {
      return labels[s];
    }

    if (lodash_toUpper__WEBPACK_IMPORTED_MODULE_0___default()(s) === s) {
      return `${s}: `;
    }

    return `${lodash_startCase__WEBPACK_IMPORTED_MODULE_1___default()(s)}: `;
  };

  const renderObject = (object, prefix = '') => Object.entries(object).sort(a => typeof a[1] === 'object' ? 1 : -1).reduce((acc, [key, value]) => {
    if (ignoredKeys.includes(key)) {
      return acc;
    }

    if (typeof value === 'object') {
      if (key === 'details') {
        return [...acc, ...renderObject(value, '')];
      }

      return [...acc, formatKey(key), ...renderObject(value, '  ')];
    }

    return [...acc, `${prefix}${formatKey(key)}${value}`];
  }, []);

  const lines = renderObject(payoutMethodData);
  return lines.join('\n');
};

/***/ }),

/***/ 38884:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export msg */
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24298);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_partition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32027);
/* harmony import */ var lodash_partition__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_partition__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51546);
/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(17632);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(88705);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(37278);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87262);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(66943);
/* harmony import */ var _StyledSpinner__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(40486);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputField__WEBPACK_IMPORTED_MODULE_15__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__]);
([_StyledInputField__WEBPACK_IMPORTED_MODULE_15__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




const _excluded = ["field"];

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




















const formatStringOptions = strings => strings.map(s => ({
  label: s,
  value: s
}));

const formatTransferWiseSelectOptions = values => values.map(({
  key,
  name
}) => ({
  label: name,
  value: key
}));

const TW_API_COLLECTIVE_SLUG = "opencollective-host";
const msg = (0,react_intl__WEBPACK_IMPORTED_MODULE_8__.defineMessages)({
  currency: {
    id: "Currency",
    defaultMessage: [{
      "type": 0,
      "value": "Currency"
    }]
  }
});
const requiredFieldsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_5__.gql`
  query PayoutBankInformationRequiredFields($slug: String, $currency: String!, $accountDetails: JSON) {
    host(slug: $slug) {
      id
      transferwise {
        id
        requiredFields(currency: $currency, accountDetails: $accountDetails) {
          type
          title
          fields {
            name
            group {
              key
              name
              type
              required
              example
              validationRegexp
              refreshRequirementsOnChange
              valuesAllowed {
                key
                name
              }
            }
          }
        }
      }
    }
  }
`;
const CUSTOM_METHOD_LABEL_BY_CURRENCY = {
  // Here I'm using the same wording Wise uses on their documentation
  USD: {
    requiredFields: {
      // No need to internationalize this, since the form is generated by Wise API and it is always in English
      label: "Where's your bank account located?",
      options: {
        aba: 'In the US',
        // eslint-disable-next-line camelcase
        swift_code: 'Outside the US'
      }
    }
  }
};

const Input = ({
  input,
  getFieldName,
  disabled,
  currency,
  loading,
  refetch,
  formik,
  host
}) => {
  const isAccountHolderName = input.key === 'accountHolderName';
  const fieldName = isAccountHolderName ? getFieldName(`data.${input.key}`) : getFieldName(`data.details.${input.key}`);
  const required = disabled ? false : input.required;
  let validate = required ? value => value ? undefined : `${input.name} is required` : undefined;

  if (input.type === 'text') {
    if (input.validationRegexp) {
      validate = value => {
        const matches = new RegExp(input.validationRegexp).test(value); // TODO(intl): This should be internationalized, ideally with `formatFormErrorMessage`

        if (!value && required) {
          return `${input.name} is required`;
        } else if (!matches && value) {
          return input.validationError || `Invalid ${input.name}`;
        }
      };
    }

    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, {
        name: fieldName,
        validate: validate,
        children: ({
          field,
          meta
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          label: input.name,
          labelFontSize: "13px",
          required: required,
          hideOptionalLabel: disabled,
          error: (meta.touched || disabled) && meta.error,
          hint: input.hint,
          children: () => {
            const inputValue = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, field.name);

            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), {
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
                placeholder: input.example,
                error: (meta.touched || disabled) && meta.error,
                disabled: disabled,
                width: "100%",
                value: inputValue || ''
              })), isAccountHolderName && inputValue && inputValue.match(/^[^\s]{1}\b/) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                mt: 2,
                fontSize: "12px",
                type: "warning",
                withIcon: true,
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
                  id: "Warning.AccountHolderNameNotValid",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Full names for personal recipients. They must include more than one name, and both first and last name must have more than one character."
                  }]
                })
              })]
            });
          }
        })
      })
    }, input.key);
  } else if (input.type === 'date') {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, {
        name: fieldName,
        validate: validate,
        children: ({
          field,
          meta
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          label: input.name,
          labelFontSize: "13px",
          required: required,
          hideOptionalLabel: disabled,
          error: (meta.touched || disabled) && meta.error,
          hint: input.hint,
          children: () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
            type: "date",
            error: (meta.touched || disabled) && meta.error,
            disabled: disabled,
            width: "100%",
            value: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, field.name) || ''
          }))
        })
      })
    }, input.key);
  } else if (input.type === 'radio' || input.type === 'select') {
    const options = formatTransferWiseSelectOptions(input.valuesAllowed || []);
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, {
        name: fieldName,
        validate: validate,
        children: ({
          field,
          meta
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          label: input.name,
          labelFontSize: "13px",
          required: required,
          hideOptionalLabel: disabled,
          error: (meta.touched || disabled) && meta.error,
          children: () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
            inputId: field.name,
            disabled: disabled,
            error: (meta.touched || disabled) && meta.error,
            isLoading: loading && !options.length,
            name: field.name,
            options: options,
            value: options.find(c => c.value === lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, field.name)) || null,
            onChange: ({
              value
            }) => {
              formik.setFieldValue(field.name, value);

              if (input.refreshRequirementsOnChange) {
                refetch({
                  slug: host ? host.slug : TW_API_COLLECTIVE_SLUG,
                  currency,
                  accountDetails: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread({}, formik.values), field.name, value), getFieldName('data'))
                });
              }
            }
          })
        })
      })
    });
  } else {
    return null;
  }
};

const FieldGroup = _ref => {
  let {
    field
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
    flex: "1",
    children: field.group.map(input => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(Input, _objectSpread({
      input: input
    }, props), input.key))
  });
};

const DetailsForm = ({
  disabled,
  getFieldName,
  formik,
  host,
  currency
}) => {
  const {
    loading,
    error,
    data,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useQuery)(requiredFieldsQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T,
    // A) If `fixedCurrency` was passed in PayoutBankInformationForm (2) (3)
    //    then `host` is not set and we'll use the Platform Wise account
    // B) If `host` is set, we expect to be in 2 cases:
    //      * The Collective Host has Wise configured and we should be able to fetch `requiredFields` from it
    //      * The Collective Host doesn't have Wise configured and `host` is already switched to the Platform account
    variables: {
      slug: host ? host.slug : TW_API_COLLECTIVE_SLUG,
      currency
    }
  }); // Make sure we load the form data on initial load. Otherwise certain form fields such
  // as the state field in the "Recipient's Address" section might not be visible on first load
  // and only be visible after the user reselect the country.

  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {
    refetch({
      accountDetails: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, getFieldName('data'))
    });
  }, []);

  if (loading && !data) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledSpinner__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {});
  }

  if (error) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "error",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
        id: "PayoutBankInformationForm.Error.RequiredFields",
        defaultMessage: [{
          "type": 0,
          "value": "There was an error fetching the required fields"
        }]
      }), error.message && `: ${error.message}`]
    });
  } // If at this point we don't have `requiredFields` available,
  // we can display an error message, Wise is likely not configured on the platform


  if (!data?.host?.transferwise?.requiredFields) {
    if (false) {} else {
      // eslint-disable-next-line no-console
      console.warn('Could not fetch requiredFields through Wise.');
      return;
    }
  }

  const transactionTypeValues = data.host.transferwise.requiredFields.map(rf => ({
    label: CUSTOM_METHOD_LABEL_BY_CURRENCY?.[currency]?.requiredFields?.options?.[rf.type] || rf.title,
    value: rf.type
  })); // Some currencies offer different methods for the transaction
  // e.g., USD allows ABA and SWIFT transactions.

  const availableMethods = data.host.transferwise.requiredFields.find(method => method.type === lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, getFieldName(`data.type`)));

  const [addressFields, otherFields] = lodash_partition__WEBPACK_IMPORTED_MODULE_1___default()(availableMethods?.fields, field => field.group.every(g => g.key.includes('address.')));

  const transactionMethodFieldName = getFieldName('data.type');

  const transactionMethod = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, transactionMethodFieldName);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
    flexDirection: "column",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, {
      name: getFieldName('data.type'),
      children: ({
        field
      }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        name: field.name,
        label: CUSTOM_METHOD_LABEL_BY_CURRENCY?.[currency]?.requiredFields?.label || /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
          id: "PayoutBankInformationForm.TransactionMethod",
          defaultMessage: [{
            "type": 0,
            "value": "Transaction Method"
          }]
        }),
        labelFontSize: "13px",
        mt: 3,
        mb: 2,
        children: ({
          id
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
          inputId: id,
          name: field.name,
          onChange: ({
            value
          }) => {
            const {
              type,
              currency
            } = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, getFieldName(`data`));

            formik.setFieldValue(getFieldName('data'), {
              type,
              currency
            });
            formik.setFieldValue(field.name, value);
          },
          options: transactionTypeValues,
          value: transactionTypeValues.find(method => method.value === availableMethods?.type) || null,
          disabled: disabled
        })
      })
    }), transactionMethod && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_19__/* .Span */ .Dr, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        mt: 3,
        flex: "1",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.P, {
          fontSize: "14px",
          fontWeight: "bold",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
            id: "PayoutBankInformationForm.AccountInfo",
            defaultMessage: [{
              "type": 0,
              "value": "Account Information"
            }]
          })
        })
      }), otherFields.map(field => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(FieldGroup, {
        currency: currency,
        disabled: disabled,
        field: field,
        formik: formik,
        getFieldName: getFieldName,
        host: host,
        loading: loading,
        refetch: refetch
      }, lodash_kebabCase__WEBPACK_IMPORTED_MODULE_2___default()(field.name)))]
    }), Boolean(addressFields.length) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        mt: 3,
        flex: "1",
        fontSize: "14px",
        fontWeight: "bold",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__/* .Span */ .Dr, {
          mr: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
            id: "PayoutBankInformationForm.RecipientAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Recipient's Address"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
          content: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
            id: "PayoutBankInformationForm.HolderAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Bank account holder address (not the bank address)"
            }]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_6__.Info, {
            size: 16
          })
        })]
      }), addressFields.map(field => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(FieldGroup, {
        currency: currency,
        disabled: disabled,
        field: field,
        formik: formik,
        getFieldName: getFieldName,
        host: host,
        loading: loading,
        refetch: refetch
      }, lodash_kebabCase__WEBPACK_IMPORTED_MODULE_2___default()(field.name)))]
    })]
  });
};

const availableCurrenciesQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_5__.gql`
  query PayoutBankInformationAvailableCurrencies($slug: String, $ignoreBlockedCurrencies: Boolean) {
    host(slug: $slug) {
      id
      slug
      currency
      transferwise {
        id
        availableCurrencies(ignoreBlockedCurrencies: $ignoreBlockedCurrencies)
      }
    }
  }
`;
/**
 * Form for payout bank information. Must be used with Formik.
 *
 * The main goal is to use this component in the Expense Flow (1) but it's also reused in:
 *
 * - Collective onboarding, AcceptContributionsOurselvesOrOrg.js (2)
 * - In Collective/Host settings -> Receiving Money, BankTransfer.js (3)
 *
 * In (1) we pass the host where the expense is submitted and fixedCurrency is never set.
 *   * If Wise is configured on that host, `availableCurrencies` should normally be available.
 *   * If it's not, we'll have to fetch `availableCurrencies` from the Platform Wise account
 *
 * In (2) and (3), we never pass an `host` and `fixedCurrency` is sometimes set.
 *   * If `fixedCurrency` is set, we don't need `availableCurrencies`
 *   * If `fixedCurrency` is not set, we'll fetch `availableCurrencies` from the Platform Wise account
 */

const PayoutBankInformationForm = ({
  isNew,
  getFieldName,
  host,
  fixedCurrency,
  ignoreBlockedCurrencies,
  optional
}) => {
  const {
    data,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useQuery)(availableCurrenciesQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: TW_API_COLLECTIVE_SLUG,
      ignoreBlockedCurrencies
    },
    // Skip fetching/loading if the currency is fixed (2) (3)
    // Or if availableCurrencies is already available. Expense Flow + Host with Wise configured (1)
    skip: Boolean(fixedCurrency || host?.transferwise?.availableCurrencies)
  });
  const formik = (0,formik__WEBPACK_IMPORTED_MODULE_7__.useFormikContext)();
  const {
    formatMessage
  } = (0,react_intl__WEBPACK_IMPORTED_MODULE_8__.useIntl)(); // Display spinner if loading

  if (loading) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledSpinner__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {});
  } // Fiscal Host with Wise configured (1) OR Platform account as fallback (1) or default (2) (3)
  // NOTE: If `fixedCurrency is set`, `wiseHost` will be null (at least today)


  const wiseHost = data?.host || host;
  const availableCurrencies = wiseHost?.transferwise?.availableCurrencies;
  let currencies;

  if (fixedCurrency) {
    currencies = formatStringOptions([fixedCurrency]);
  } else if (availableCurrencies) {
    currencies = formatStringOptions(availableCurrencies.map(c => c.code));
  } else {
    // If at this point we don't have `fixedCurrency` or `availableCurrencies`,
    // we can display an error message, Wise is likely not configured on the platform
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "warning",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
        id: "v2j/7L",
        defaultMessage: [{
          "type": 0,
          "value": "An error ocurred while preparing the form for bank accounts. Please contact "
        }, {
          "type": 8,
          "value": "I18nSupportLink",
          "children": [{
            "type": 0,
            "value": "support"
          }]
        }],
        values: {
          I18nSupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_12__/* .I18nSupportLink */ .wl
        }
      })
    });
  }

  if (optional) {
    currencies.unshift({
      label: 'No selection',
      value: null
    });
  }

  const currencyFieldName = getFieldName('data.currency');

  const selectedCurrency = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(formik.values, currencyFieldName);

  const validateCurrencyMinimumAmount = () => {
    // Skip if currency is fixed (2) (3)
    // or if `availableCurrencies` is not set (but we're not supposed to be there anyway)
    if (fixedCurrency || !availableCurrencies) {
      return;
    } // Only validate minimum amount if the form has items


    if (formik?.values?.items?.length > 0) {
      const invoiceTotalAmount = formik.values.items.reduce((amount, attachment) => amount + (attachment.amount || 0), 0);
      const minAmountForSelectedCurrency = availableCurrencies.find(c => c.code === selectedCurrency)?.minInvoiceAmount * 100;

      if (invoiceTotalAmount < minAmountForSelectedCurrency) {
        return formatMessage({
          id: "AzGwgz",
          defaultMessage: [{
            "type": 0,
            "value": "The minimum amount for transferring to "
          }, {
            "type": 1,
            "value": "selectedCurrency"
          }, {
            "type": 0,
            "value": " is "
          }, {
            "type": 1,
            "value": "minAmountForSelectedCurrency"
          }]
        }, {
          selectedCurrency,
          minAmountForSelectedCurrency: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_9__/* .formatCurrency */ .xG)(minAmountForSelectedCurrency, wiseHost.currency)
        });
      }
    }
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(formik__WEBPACK_IMPORTED_MODULE_7__.Field, {
      name: currencyFieldName,
      validate: validateCurrencyMinimumAmount,
      children: ({
        field
      }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledInputField__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        name: field.name,
        label: formatMessage(msg.currency),
        labelFontSize: "13px",
        mt: 3,
        mb: 2,
        children: ({
          id
        }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, {
          inputId: id,
          name: field.name,
          onChange: ({
            value
          }) => {
            formik.setFieldValue(getFieldName('data'), {});
            formik.setFieldValue(field.name, value);
          },
          options: currencies,
          value: currencies.find(c => c.label === selectedCurrency) || null,
          disabled: Boolean(fixedCurrency && !optional) || !isNew
        })
      })
    }), selectedCurrency && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(DetailsForm, {
      currency: selectedCurrency,
      disabled: !isNew,
      formik: formik,
      getFieldName: getFieldName,
      host: wiseHost
    }), !selectedCurrency && !currencies?.length && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "error",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_8__.FormattedMessage, {
        id: "PayoutBankInformationForm.Error.AvailableCurrencies",
        defaultMessage: [{
          "type": 0,
          "value": "There was an error loading available currencies for this host"
        }]
      }), "."]
    })]
  });
};

PayoutBankInformationForm.__docgenInfo = {
  "description": "Form for payout bank information. Must be used with Formik.\n\nThe main goal is to use this component in the Expense Flow (1) but it's also reused in:\n\n- Collective onboarding, AcceptContributionsOurselvesOrOrg.js (2)\n- In Collective/Host settings -> Receiving Money, BankTransfer.js (3)\n\nIn (1) we pass the host where the expense is submitted and fixedCurrency is never set.\n  * If Wise is configured on that host, `availableCurrencies` should normally be available.\n  * If it's not, we'll have to fetch `availableCurrencies` from the Platform Wise account\n\nIn (2) and (3), we never pass an `host` and `fixedCurrency` is sometimes set.\n  * If `fixedCurrency` is set, we don't need `availableCurrencies`\n  * If `fixedCurrency` is not set, we'll fetch `availableCurrencies` from the Platform Wise account",
  "methods": [],
  "displayName": "PayoutBankInformationForm",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "transferwise": {
            "name": "shape",
            "value": {
              "availableCurrencies": {
                "name": "arrayOf",
                "value": {
                  "name": "object"
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "isNew": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "optional": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "ignoreBlockedCurrencies": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "getFieldName": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "fixedCurrency": {
      "description": "Enforces a fixedCurrency",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "errors": {
      "description": "A map of errors for this object",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "formik": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PayoutBankInformationForm);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 88694:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FAQ__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99849);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
const _excluded = ["defaultOpen"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }







const EditCollectivePageFAQ = _ref => {
  let {
    defaultOpen
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, props), {}, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Entry */ .kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .Dx, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.Data",
          defaultMessage: [{
            "type": 0,
            "value": "If I disable a section will its content be deleted?"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .VY, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.DataDetails",
          defaultMessage: [{
            "type": 0,
            "value": "No, your data is preserved when you disable a section. You can re-enable it any time."
          }]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Entry */ .kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .Dx, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.EditHidden",
          defaultMessage: [{
            "type": 0,
            "value": "Can I edit a disabled section?"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .VY, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.EditHiddenDetails",
          defaultMessage: [{
            "type": 0,
            "value": "No. To edit a section, you need to make it to visible."
          }]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Entry */ .kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .Dx, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.Publish",
          defaultMessage: [{
            "type": 0,
            "value": "When will changes be published?"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .VY, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.PublishDetails",
          defaultMessage: [{
            "type": 0,
            "value": "As soon as you click \"Save\"."
          }]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Entry */ .kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .Dx, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.HideBudget",
          defaultMessage: [{
            "type": 0,
            "value": "Why can't I hide my budget section?"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(_FAQ__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .VY, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "EditCollectivePageFAQ.HideBudgetDetails",
          defaultMessage: [{
            "type": 0,
            "value": "Open Collective is all about transparency, and visibility of the budget section is a key part of that."
          }]
        })
      })]
    })]
  }));
};

EditCollectivePageFAQ.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditCollectivePageFAQ",
  "props": {
    "defaultOpen": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditCollectivePageFAQ);

/***/ }),

/***/ 27303:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(47869);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86069);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isBoolean__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(72327);
/* harmony import */ var lodash_isBoolean__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isBoolean__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_clamp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12154);
/* harmony import */ var lodash_clamp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_constants_expenseTypes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(19878);
/* harmony import */ var _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10922);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32651);
/* harmony import */ var _lib_i18n_expense__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(8480);
/* harmony import */ var _admin_panel_constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13398);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(92129);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(87268);
/* harmony import */ var _StyledInputGroup__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(32631);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(71792);
/* harmony import */ var _StyledRadioList__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(36718);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_23__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_23__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];




const _excluded = ["host", "collective"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }























const OPTION_LABELS = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.defineMessages)({
  [_lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.DEFAULT */ .s.DEFAULT]: {
    id: "CollectiveFeesForm.Default",
    defaultMessage: [{
      "type": 0,
      "value": "Use global host fees"
    }]
  },
  [_lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE]: {
    id: "CollectiveFeesForm.CustomFees",
    defaultMessage: [{
      "type": 0,
      "value": "Set a custom fee for this Collective."
    }]
  }
});

const getDefaultFee = (collective, host) => {
  if (lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default()(collective.hostFeePercent) || collective.hostFeePercent === host.hostFeePercent) {
    return host.hostFeePercent;
  } else {
    return collective.hostFeePercent;
  }
};

const editAccountSettingsMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_5__.gql`
  mutation EditAccountSettings(
    $account: AccountReferenceInput!
    $hostFeePercent: Float!
    $isCustomFee: Boolean!
    $key: AccountSettingsKey!
    $value: JSON!
  ) {
    editAccountFeeStructure(account: $account, hostFeePercent: $hostFeePercent, isCustomFee: $isCustomFee) {
      id
      ... on AccountWithHost {
        hostFeesStructure
        hostFeePercent
      }
      childrenAccounts {
        nodes {
          id
          ... on AccountWithHost {
            hostFeesStructure
            hostFeePercent
          }
        }
      }
    }

    editAccountSetting(account: $account, key: $key, value: $value) {
      id
      settings
    }
  }
`;
const DISPLAYED_EXPENSE_TYPES = [_lib_constants_expenseTypes__WEBPACK_IMPORTED_MODULE_7__/* ["default"].INVOICE */ .Z.INVOICE, _lib_constants_expenseTypes__WEBPACK_IMPORTED_MODULE_7__/* ["default"].RECEIPT */ .Z.RECEIPT, _lib_constants_expenseTypes__WEBPACK_IMPORTED_MODULE_7__/* ["default"].GRANT */ .Z.GRANT];
const EXPENSE_TYPE_OPTIONS = [{
  value: null,
  label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
    id: "tdQA1F",
    defaultMessage: [{
      "type": 0,
      "value": "Use global host settings"
    }]
  })
}, {
  value: true,
  label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
    id: "V52jNn",
    defaultMessage: [{
      "type": 0,
      "value": "Enabled"
    }]
  })
}, {
  value: false,
  label: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
    id: "tthToS",
    defaultMessage: [{
      "type": 0,
      "value": "Disabled"
    }]
  })
}];
const EXPENSE_TYPE_SELECT_STYLES = {
  option: {
    fontSize: '12px'
  }
};

const CollectiveSettingsModal = _ref => {
  let {
    host,
    collective
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_23__/* .useToasts */ .e1)();
  const {
    0: hostFeePercent,
    1: setHostFeePercent
  } = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(getDefaultFee(collective, host));
  const {
    0: selectedOption,
    1: setSelectedOption
  } = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(hostFeePercent === host.hostFeePercent ? _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.DEFAULT */ .s.DEFAULT : _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE);
  const [expenseTypes, setExpenseTypes] = react__WEBPACK_IMPORTED_MODULE_4___default().useState(() => collective.settings?.expenseTypes || {});
  const [submitEditSettings, {
    loading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_5__.useMutation)(editAccountSettingsMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_10__/* .API_V2_CONTEXT */ .T
  });
  const hasParent = Boolean(collective.parent);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
    maxWidth: 432,
    trapFocus: true
  }, props), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_19__/* .CollectiveModalHeader */ .I4, {
      collective: collective,
      mb: 3
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_19__/* .ModalBody */ .fe, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "7oAuzt",
          defaultMessage: [{
            "type": 0,
            "value": "Expense types"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx("div", {
        children: DISPLAYED_EXPENSE_TYPES.map(expenseType => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
          mb: 3,
          alignItems: "center",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Box */ .xu, {
            mr: 2,
            flex: "0 1 70px",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Label */ .__, {
              htmlFor: `select-expense-type-${expenseType}`,
              fontWeight: "normal",
              children: (0,_lib_i18n_expense__WEBPACK_IMPORTED_MODULE_11__/* .i18nExpenseType */ .kD)(intl, expenseType)
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .ZP, {
            inputId: `select-expense-type-${expenseType}`,
            fontSize: "12px",
            minWidth: 195,
            styles: EXPENSE_TYPE_SELECT_STYLES,
            options: EXPENSE_TYPE_OPTIONS,
            onChange: ({
              value
            }) => setExpenseTypes(_objectSpread(_objectSpread({}, expenseTypes), {}, {
              [expenseType]: value
            })),
            value: lodash_isBoolean__WEBPACK_IMPORTED_MODULE_2___default()(expenseTypes[expenseType]) ? EXPENSE_TYPE_OPTIONS.find(({
              value
            }) => value === expenseTypes[expenseType]) : EXPENSE_TYPE_OPTIONS[0]
          })]
        }, expenseType))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "CollectiveFeesForm.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Set fee structure"
          }]
        })
      }), hasParent ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        type: "info",
        withIcon: true,
        lineHeight: "18px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "UlTOwN",
          defaultMessage: [{
            "type": 0,
            "value": "Events and Projects inherit the host fees structure configuration of their parents."
          }]
        })
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "2RrtBD",
            defaultMessage: [{
              "type": 0,
              "value": "This change will also apply to all the projects and events created by this collective"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledRadioList__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .ZP, {
          id: "fees-structure-radio",
          name: "fees-structure-radio",
          options: [_lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.DEFAULT */ .s.DEFAULT, _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE],
          value: selectedOption,
          onChange: ({
            value
          }) => setSelectedOption(value),
          children: ({
            key,
            radio
          }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
            mt: 3,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Box */ .xu, {
              mr: 12,
              children: radio
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Box */ .xu, {
              children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
                mb: 2,
                fontWeight: "500",
                children: intl.formatMessage(OPTION_LABELS[key])
              }), key === _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.DEFAULT */ .s.DEFAULT && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
                fontSize: "11px",
                lineHeight: "16px",
                color: "black.600",
                fontWeight: "normal",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                  id: "CollectiveFeesForm.DefaultDescription",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Set the global (default) fee in your "
                  }, {
                    "type": 8,
                    "value": "Link",
                    "children": [{
                      "type": 0,
                      "value": "settings"
                    }]
                  }, {
                    "type": 0,
                    "value": "."
                  }],
                  values: {
                    Link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_14__/* .getI18nLink */ .fw)({
                      as: _Link__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z,
                      href: `/${host.slug}/admin/${_admin_panel_constants__WEBPACK_IMPORTED_MODULE_12__/* .ALL_SECTIONS.FISCAL_HOSTING */ .J7.FISCAL_HOSTING}`,
                      openInNewTab: true
                    })
                  }
                })
              }), key === _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledInputGroup__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
                append: "%",
                type: "number",
                min: "0",
                max: "100",
                maxWidth: 90,
                appendProps: {
                  color: 'black.600'
                },
                fontWeight: "normal",
                value: isNaN(hostFeePercent) ? '' : hostFeePercent,
                step: "0.01",
                onClick: () => setSelectedOption(key),
                onChange: e => setHostFeePercent(parseFloat(e.target.value)),
                onBlur: e => {
                  const newValue = lodash_clamp__WEBPACK_IMPORTED_MODULE_3___default()(lodash_round__WEBPACK_IMPORTED_MODULE_0___default()(parseFloat(e.target.value), 2), 0, 100);

                  setHostFeePercent(isNaN(newValue) ? host.hostFeePercent : newValue);
                }
              })]
            })]
          }, key)
        })]
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_19__/* .ModalFooter */ .mz, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_13__/* .Flex */ .kC, {
        justifyContent: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          buttonStyle: "primary",
          minWidth: 90,
          loading: loading,
          onClick: async () => {
            const isCustomFee = selectedOption === _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_8__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE;

            try {
              await submitEditSettings({
                variables: {
                  account: {
                    id: collective.id
                  },
                  hostFeePercent: isCustomFee ? hostFeePercent : host.hostFeePercent,
                  isCustomFee,
                  key: 'expenseTypes',
                  value: expenseTypes
                }
              });
              props?.onClose();
            } catch (e) {
              addToast({
                type: _ToastProvider__WEBPACK_IMPORTED_MODULE_23__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
                variant: 'light',
                message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_9__/* .i18nGraphqlException */ .t2)(intl, e)
              });
            }
          },
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          ml: 3,
          minWidth: 90,
          onClick: props.onClose,
          disabled: loading,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "actions.cancel",
            defaultMessage: [{
              "type": 0,
              "value": "Cancel"
            }]
          })
        })]
      })
    })]
  }));
};

CollectiveSettingsModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSettingsModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectiveSettingsModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 98485:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65985);
/* harmony import */ var _lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46233);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87268);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_3__]);
_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];






/**
 * A button for hosts to either connect or refill the balance for their PayPal account.
 */




const ConnectPaypalButton = ({
  host,
  paymentMethod
}) => {
  const {
    loading,
    error,
    call
  } = (0,_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_3__/* .useAsyncCall */ .N)(async () => {
    const urlParams = {
      redirect: window.location.href,
      useNewFlow: true
    };
    const json = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_2__/* .connectAccount */ .Yn)(host.legacyId || host.id, 'paypal', urlParams);
    window.location.replace(json.redirectUrl); // Give some time (60s) for redirect

    return new Promise(resolve => setTimeout(resolve, 60000));
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      withIcon: true,
      type: "error",
      fontSize: "10px",
      mb: 2,
      children: error.message || 'Oops, something went wrong. Please try again.'
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
      buttonStyle: "secondary",
      isBorderless: true,
      buttonSize: "tiny",
      fontSize: "10px",
      fontWeight: "normal",
      loading: loading,
      onClick: call,
      minWidth: 85,
      children: paymentMethod ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "ConnectPaypal.refill",
        defaultMessage: [{
          "type": 0,
          "value": "Refill balance"
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "C9HmCs",
        defaultMessage: [{
          "type": 0,
          "value": "Connect "
        }, {
          "type": 1,
          "value": "service"
        }],
        values: {
          service: 'PayPal'
        }
      })
    })]
  });
};

ConnectPaypalButton.__docgenInfo = {
  "description": "A button for hosts to either connect or refill the balance for their PayPal account.",
  "methods": [],
  "displayName": "ConnectPaypalButton",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "union",
            "value": [{
              "name": "string"
            }, {
              "name": "number"
            }],
            "required": false
          },
          "legacyId": {
            "name": "number",
            "required": false
          }
        }
      },
      "required": true
    },
    "paymentMethod": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {}
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConnectPaypalButton);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 83962:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51082);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);




/**
 * A button for hosts to either connect or refill the balance for their PayPal account.
 */



const ConnectTransferwiseButton = ({
  isConnected
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
    openInNewTab: true,
    href: isConnected ? 'https://wise.com/user/account' : 'https://docs.opencollective.com/help/fiscal-hosts/payouts/payouts-with-transferwise#connecting-transferwise',
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
      buttonStyle: "secondary",
      isBorderless: true,
      buttonSize: "tiny",
      fontSize: "10px",
      fontWeight: "normal",
      children: isConnected ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "ConnectPaypal.refill",
        defaultMessage: [{
          "type": 0,
          "value": "Refill balance"
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
        id: "C9HmCs",
        defaultMessage: [{
          "type": 0,
          "value": "Connect "
        }, {
          "type": 1,
          "value": "service"
        }],
        values: {
          service: 'Wise'
        }
      })
    })
  });
};

ConnectTransferwiseButton.__docgenInfo = {
  "description": "A button for hosts to either connect or refill the balance for their PayPal account.",
  "methods": [],
  "displayName": "ConnectTransferwiseButton",
  "props": {
    "isConnected": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConnectTransferwiseButton);

/***/ }),

/***/ 62605:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export BoldMsg */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _styled_icons_boxicons_regular_SliderAlt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42161);
/* harmony import */ var _styled_icons_boxicons_regular_SliderAlt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_SliderAlt__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82525);
/* harmony import */ var _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10922);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17632);
/* harmony import */ var _lib_i18n_host_fee_structure__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(64);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(69078);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(27596);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _StyledCollectiveCard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(41216);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(173);
/* harmony import */ var _StyledRoundButton__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(90012);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(90998);
/* harmony import */ var _AddFundsModal__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(29301);
/* harmony import */ var _CollectiveSettingsModal__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(27303);
/* harmony import */ var _HostAdminCollectiveCardMoreButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(67925);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_AddFundsModal__WEBPACK_IMPORTED_MODULE_15__, _CollectiveSettingsModal__WEBPACK_IMPORTED_MODULE_16__, _HostAdminCollectiveCardMoreButton__WEBPACK_IMPORTED_MODULE_17__]);
([_AddFundsModal__WEBPACK_IMPORTED_MODULE_15__, _CollectiveSettingsModal__WEBPACK_IMPORTED_MODULE_16__, _HostAdminCollectiveCardMoreButton__WEBPACK_IMPORTED_MODULE_17__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
const _excluded = ["since", "collective", "host"];

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






















const SectionTitle = props => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
  alignItems: "center",
  mb: 1,
  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.P, _objectSpread({
    textTransform: "uppercase",
    fontSize: "9px",
    lineHeight: "14px",
    fontWeight: "600",
    color: "black.500",
    letterSpacing: "0.6px"
  }, props)), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
    borderColor: "black.300",
    flex: "1",
    ml: 3
  })]
});

const PlusIcon = styled_components__WEBPACK_IMPORTED_MODULE_3___default().div.withConfig({
  displayName: "HostAdminCollectiveCard__PlusIcon",
  componentId: "sc-1edx9mq-0"
})(["position:absolute;background:white;border-radius:100%;width:12px;height:12px;font-size:14px;left:20px;top:-3px;color:", ";"], props => props.theme.colors.green[600]);
const BoldMsg = msg => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__/* .Span */ .Dr, {
  color: "black.900",
  fontWeight: "bold",
  fontSize: "14px",
  children: msg
});

const HostAdminCollectiveCard = _ref => {
  let {
    since,
    collective,
    host
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const [currentModal, setCurrentModal] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(null);
  const balance = collective.stats.balance.valueInCents || 0;
  const nbFinancialContributors = collective.totalFinancialContributors || 0;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_StyledCollectiveCard__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, _objectSpread(_objectSpread({
    collective: collective,
    bodyHeight: 320
  }, props), {}, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
      px: 3,
      mb: 16,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        mb: 22,
        lineHeight: "19px",
        color: "black.600",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.P, {
          mb: 2,
          fontSize: "12px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "FinancialContributorsCountWithBold",
            defaultMessage: [{
              "type": 8,
              "value": "bold",
              "children": [{
                "type": 1,
                "value": "count"
              }]
            }, {
              "type": 0,
              "value": " "
            }, {
              "type": 6,
              "value": "count",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "financial contributor"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "financial contributors"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }],
            values: {
              count: nbFinancialContributors,
              bold: BoldMsg
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.P, {
          fontSize: "12px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "AmountBalance",
            defaultMessage: [{
              "type": 1,
              "value": "amount"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__/* .Span */ .Dr, {
                fontSize: "14px",
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                  amount: balance,
                  currency: collective.currency,
                  currencyCodeStyles: {
                    color: 'black.900',
                    fontWeight: 'bold'
                  }
                })
              })
            }
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(SectionTitle, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "FeeStructure",
          defaultMessage: [{
            "type": 0,
            "value": "Fee structure"
          }]
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_14__.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.800",
        mb: 3,
        children: [(0,_lib_i18n_host_fee_structure__WEBPACK_IMPORTED_MODULE_7__/* .formatHostFeeStructure */ .i)(intl, collective.hostFeesStructure), collective.hostFeesStructure === _lib_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_5__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE && ` (${collective.hostFeePercent}%)`]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(SectionTitle, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "HostingSince",
          defaultMessage: [{
            "type": 0,
            "value": "Hosting since"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.800",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedDate, {
          value: since,
          day: "numeric",
          month: "long",
          year: "numeric"
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        position: "relative",
        mt: 20,
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_StyledRoundButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            "data-cy": "hosted-collective-add-funds-btn",
            buttonStyle: "successSecondary",
            size: 32,
            fontSize: "16px",
            onClick: () => setCurrentModal('addFunds'),
            title: intl.formatMessage({
              id: "menu.addFunds",
              defaultMessage: [{
                "type": 0,
                "value": "Add Funds"
              }]
            }),
            children: [(0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__/* .getCurrencySymbol */ .jK)(collective.currency), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(PlusIcon, {
              children: "+"
            })]
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledRoundButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            ml: 2,
            size: 32,
            onClick: () => setCurrentModal('accountSettings'),
            title: intl.formatMessage({
              id: "Af5zIY",
              defaultMessage: [{
                "type": 0,
                "value": "Account settings"
              }]
            }),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_styled_icons_boxicons_regular_SliderAlt__WEBPACK_IMPORTED_MODULE_1__.SliderAlt, {
              size: 14,
              color: "#9D9FA3"
            })
          })]
        }), [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_4__/* .CollectiveType.FUND */ .eV.FUND].includes(collective.type) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_HostAdminCollectiveCardMoreButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          collective: collective,
          host: host
        })]
      })]
    }), currentModal === 'addFunds' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_AddFundsModal__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
      collective: collective,
      onClose: () => setCurrentModal(null)
    }), currentModal === 'accountSettings' && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_CollectiveSettingsModal__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
      collective: collective,
      host: host,
      onClose: () => setCurrentModal(null)
    })]
  }));
};

HostAdminCollectiveCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveCard",
  "props": {
    "since": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "type": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "hostFeesStructure": {
            "name": "enum",
            "value": [{
              "value": "null",
              "computed": false
            }, {
              "value": "...Object.values(HOST_FEE_STRUCTURE)",
              "computed": true
            }],
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "totalFinancialContributors": {
            "name": "number",
            "required": false
          },
          "isFrozen": {
            "name": "bool",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostAdminCollectiveCard);
BoldMsg.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "BoldMsg"
};
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 67925:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_boxicons_regular_DotsVerticalRounded__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(93842);
/* harmony import */ var _styled_icons_boxicons_regular_DotsVerticalRounded__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_DotsVerticalRounded__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _styled_icons_boxicons_regular_Unlink__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40137);
/* harmony import */ var _styled_icons_boxicons_regular_Unlink__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_boxicons_regular_Unlink__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _styled_icons_feather_Pause__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(83849);
/* harmony import */ var _styled_icons_feather_Pause__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Pause__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _styled_icons_feather_Play__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71178);
/* harmony import */ var _styled_icons_feather_Play__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Play__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _MenuPopover__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(79846);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledRoundButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(90012);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _FreezeAccountModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(37670);
/* harmony import */ var _UnhostAccountModal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(21466);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_MenuPopover__WEBPACK_IMPORTED_MODULE_8__, _FreezeAccountModal__WEBPACK_IMPORTED_MODULE_12__, _UnhostAccountModal__WEBPACK_IMPORTED_MODULE_13__]);
([_MenuPopover__WEBPACK_IMPORTED_MODULE_8__, _FreezeAccountModal__WEBPACK_IMPORTED_MODULE_12__, _UnhostAccountModal__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

















const FreezeAccountButton = ({
  collective,
  onClick
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
    isBorderless: true,
    buttonStyle: collective.isFrozen ? 'standard' : 'dangerSecondary',
    onClick: onClick,
    borderRadius: 0,
    children: [collective.isFrozen ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_styled_icons_feather_Play__WEBPACK_IMPORTED_MODULE_5__.Play, {
      size: 18,
      color: "#75777A"
    }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_styled_icons_feather_Pause__WEBPACK_IMPORTED_MODULE_4__.Pause, {
      size: 16
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledSpan, {
      ml: 3,
      fontSize: "14px",
      lineHeight: "20px",
      children: collective.isFrozen ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "5SBeLS",
        defaultMessage: [{
          "type": 0,
          "value": "Unfreeze"
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "EgadwQ",
        defaultMessage: [{
          "type": 0,
          "value": "Freeze"
        }]
      })
    })]
  });
};

const UnhostAccountButton = ({
  onClick
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
    isBorderless: true,
    buttonStyle: 'dangerSecondary',
    onClick: onClick,
    borderRadius: 0,
    width: "100%",
    display: "flex",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_styled_icons_boxicons_regular_Unlink__WEBPACK_IMPORTED_MODULE_3__.Unlink, {
      size: 18
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledSpan2, {
      ml: 3,
      fontSize: "14px",
      lineHeight: "20px",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "kJ57me",
        defaultMessage: [{
          "type": 0,
          "value": "Un-host"
        }]
      })
    })]
  });
};

const HostAdminCollectiveCardMoreButton = ({
  collective,
  host
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.useIntl)();
  const [hasFreezeModal, setHasFreezeModal] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);
  const [hasUnhostModal, setHasUnhostModal] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MenuPopover__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      content: ({
        onClose
      }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        flexDirection: "column",
        alignItems: "start",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(FreezeAccountButton, {
          collective: collective,
          onClick: () => {
            setHasFreezeModal(true);
            onClose();
          }
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(UnhostAccountButton, {
          onClick: () => {
            setHasUnhostModal(true);
            onClose();
          }
        })]
      }),
      children: btnProps => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledRoundButton__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, _objectSpread(_objectSpread({
        size: 32,
        title: intl.formatMessage({
          id: "IzCVhG",
          defaultMessage: [{
            "type": 0,
            "value": "More options"
          }]
        })
      }, btnProps), {}, {
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_styled_icons_boxicons_regular_DotsVerticalRounded__WEBPACK_IMPORTED_MODULE_2__.DotsVerticalRounded, {
          size: 18,
          color: "#75777A"
        })
      }))
    }), hasFreezeModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_FreezeAccountModal__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      collective: collective,
      onClose: () => setHasFreezeModal(false)
    }), hasUnhostModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_UnhostAccountModal__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      collective: collective,
      host: host,
      onClose: () => setHasUnhostModal(false)
    })]
  });
};

HostAdminCollectiveCardMoreButton.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveCardMoreButton",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostAdminCollectiveCardMoreButton);

var _StyledSpan = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr).withConfig({
  displayName: "HostAdminCollectiveCardMoreButton___StyledSpan",
  componentId: "sc-il7t2-0"
})({
  verticalAlign: 'middle'
});

var _StyledSpan2 = styled_components__WEBPACK_IMPORTED_MODULE_0___default()(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr).withConfig({
  displayName: "HostAdminCollectiveCardMoreButton___StyledSpan2",
  componentId: "sc-il7t2-1"
})({
  verticalAlign: 'middle'
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 18357:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "k": () => (/* binding */ COLLECTIVE_FILTER),
  "Z": () => (/* binding */ host_dashboard_HostAdminCollectiveFilters)
});

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: external "styled-components"
var external_styled_components_ = __webpack_require__(57518);
var external_styled_components_default = /*#__PURE__*/__webpack_require__.n(external_styled_components_);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./lib/constants/host-fee-structure.js
var host_fee_structure = __webpack_require__(10922);
// EXTERNAL MODULE: ./lib/i18n/host-fee-structure.js
var i18n_host_fee_structure = __webpack_require__(64);
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/host-dashboard/admin-collective-filters/CollectiveHostFeeStructureFilter.js
const _excluded = ["value", "onChange"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }








const CollectiveHostFeeStructureFilter = _ref => {
  let {
    value,
    onChange
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,external_react_intl_.useIntl)();

  const getOption = value => ({
    label: (0,i18n_host_fee_structure/* formatHostFeeStructure */.i)(intl, value),
    value
  });

  const optionAll = getOption('ALL');
  const options = [optionAll, getOption(host_fee_structure/* HOST_FEE_STRUCTURE.DEFAULT */.s.DEFAULT), getOption(host_fee_structure/* HOST_FEE_STRUCTURE.CUSTOM_FEE */.s.CUSTOM_FEE)];
  return /*#__PURE__*/jsx_runtime_.jsx(StyledSelectFilter/* StyledSelectFilter */.V, _objectSpread({
    inputId: "fee-structure-filter",
    value: value ? getOption(value) : optionAll,
    onChange: ({
      value
    }) => onChange(value),
    options: options
  }, props));
};

CollectiveHostFeeStructureFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveHostFeeStructureFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const admin_collective_filters_CollectiveHostFeeStructureFilter = (CollectiveHostFeeStructureFilter);
;// CONCATENATED MODULE: ./components/host-dashboard/admin-collective-filters/CollectiveSortByFilter.js
const CollectiveSortByFilter_excluded = ["value", "onChange"];

function CollectiveSortByFilter_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveSortByFilter_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveSortByFilter_ownKeys(Object(source), !0).forEach(function (key) { CollectiveSortByFilter_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveSortByFilter_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function CollectiveSortByFilter_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function CollectiveSortByFilter_objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = CollectiveSortByFilter_objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function CollectiveSortByFilter_objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }





const labels = (0,external_react_intl_.defineMessages)({
  'most-recent': {
    id: "Collectives.MostRecent",
    defaultMessage: [{
      "type": 0,
      "value": "Most recent"
    }]
  },
  oldest: {
    id: "Collectives.Oldest",
    defaultMessage: [{
      "type": 0,
      "value": "Oldest"
    }]
  }
});

const CollectiveSortByFilter = _ref => {
  let {
    value,
    onChange
  } = _ref,
      props = CollectiveSortByFilter_objectWithoutProperties(_ref, CollectiveSortByFilter_excluded);

  const intl = (0,external_react_intl_.useIntl)();

  const getOption = value => ({
    label: intl.formatMessage(labels[value]),
    value
  });

  const options = [getOption('most-recent'), getOption('oldest')];
  return /*#__PURE__*/jsx_runtime_.jsx(StyledSelectFilter/* StyledSelectFilter */.V, CollectiveSortByFilter_objectSpread({
    inputId: "collective-sort-filter",
    value: labels[value] ? getOption(value) : options[0],
    onChange: ({
      value
    }) => onChange(value),
    options: options
  }, props));
};

CollectiveSortByFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSortByFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const admin_collective_filters_CollectiveSortByFilter = (CollectiveSortByFilter);
;// CONCATENATED MODULE: ./components/host-dashboard/HostAdminCollectiveFilters.js
function HostAdminCollectiveFilters_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostAdminCollectiveFilters_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostAdminCollectiveFilters_ownKeys(Object(source), !0).forEach(function (key) { HostAdminCollectiveFilters_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostAdminCollectiveFilters_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function HostAdminCollectiveFilters_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }









const FilterLabel = external_styled_components_default().label.withConfig({
  displayName: "HostAdminCollectiveFilters__FilterLabel",
  componentId: "sc-1q9gbkr-0"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);
const COLLECTIVE_FILTER = {
  SORT_BY: 'sort-by',
  FEE_STRUCTURE: 'fees-structure'
};

const HostAdminCollectiveFilters = ({
  filters,
  values,
  onChange
}) => {
  const getFilterProps = name => ({
    inputId: `collectives-filter-${name}`,
    value: values?.[name],
    onChange: value => {
      onChange(HostAdminCollectiveFilters_objectSpread(HostAdminCollectiveFilters_objectSpread({}, values), {}, {
        [name]: value === 'ALL' ? null : value
      }));
    }
  });

  return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Grid */.rj, {
    gridGap: 18,
    gridTemplateColumns: ['1fr', '1fr 1fr'],
    maxWidth: 400,
    children: [filters.includes(COLLECTIVE_FILTER.SORT_BY) && /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
      children: [/*#__PURE__*/jsx_runtime_.jsx(FilterLabel, {
        htmlFor: "collectives-filter-sort-by",
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "SortBy",
          defaultMessage: [{
            "type": 0,
            "value": "Sort by"
          }]
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(admin_collective_filters_CollectiveSortByFilter, HostAdminCollectiveFilters_objectSpread({}, getFilterProps(COLLECTIVE_FILTER.SORT_BY)))]
    }), filters.includes(COLLECTIVE_FILTER.FEE_STRUCTURE) && /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
      children: [/*#__PURE__*/jsx_runtime_.jsx(FilterLabel, {
        htmlFor: "collectives-filter-fees-structure",
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "FeeStructure",
          defaultMessage: [{
            "type": 0,
            "value": "Fee structure"
          }]
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(admin_collective_filters_CollectiveHostFeeStructureFilter, HostAdminCollectiveFilters_objectSpread({}, getFilterProps(COLLECTIVE_FILTER.FEE_STRUCTURE)))]
    })]
  });
};

HostAdminCollectiveFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveFilters",
  "props": {
    "filters": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "enum",
          "value": [{
            "value": "\"fees-structure\"",
            "computed": false
          }, {
            "value": "\"sort-by\"",
            "computed": false
          }]
        }
      },
      "required": true
    },
    "values": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ const host_dashboard_HostAdminCollectiveFilters = (HostAdminCollectiveFilters);

/***/ }),

/***/ 77161:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63901);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89699);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_constants_expense_status__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(38083);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(15078);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useLazyGraphQLPaginatedResults__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(26154);
/* harmony import */ var _budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(93765);
/* harmony import */ var _DismissibleMessage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(94858);
/* harmony import */ var _expenses_ExpensesFilters__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(95487);
/* harmony import */ var _expenses_ExpensesList__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(11221);
/* harmony import */ var _expenses_filters_ExpensesOrder__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(78877);
/* harmony import */ var _expenses_graphql_fragments__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(17738);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(68185);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(79045);
/* harmony import */ var _SearchBar__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(32606);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(90998);
/* harmony import */ var _HostInfoCard__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(56301);
/* harmony import */ var _ScheduledExpensesBanner__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(68953);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_expenses_ExpensesFilters__WEBPACK_IMPORTED_MODULE_13__, _expenses_ExpensesList__WEBPACK_IMPORTED_MODULE_14__, _HostInfoCard__WEBPACK_IMPORTED_MODULE_27__, _ScheduledExpensesBanner__WEBPACK_IMPORTED_MODULE_28__]);
([_expenses_ExpensesFilters__WEBPACK_IMPORTED_MODULE_13__, _expenses_ExpensesList__WEBPACK_IMPORTED_MODULE_14__, _HostInfoCard__WEBPACK_IMPORTED_MODULE_27__, _ScheduledExpensesBanner__WEBPACK_IMPORTED_MODULE_28__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





























const hostDashboardExpensesQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`
  query HostDashboardExpenses(
    $hostSlug: String!
    $limit: Int!
    $offset: Int!
    $type: ExpenseType
    $tags: [String]
    $status: ExpenseStatusFilter
    $minAmount: Int
    $maxAmount: Int
    $payoutMethodType: PayoutMethodType
    $dateFrom: DateTime
    $dateTo: DateTime
    $searchTerm: String
    $orderBy: ChronologicalOrderInput
  ) {
    host(slug: $hostSlug) {
      id
      ...ExpenseHostFields
      ...HostInfoCardFields
      transferwise {
        id
        availableCurrencies
      }
    }
    expenses(
      host: { slug: $hostSlug }
      limit: $limit
      offset: $offset
      type: $type
      tag: $tags
      status: $status
      minAmount: $minAmount
      maxAmount: $maxAmount
      payoutMethodType: $payoutMethodType
      dateFrom: $dateFrom
      dateTo: $dateTo
      searchTerm: $searchTerm
      orderBy: $orderBy
    ) {
      totalCount
      offset
      limit
      nodes {
        id
        ...ExpensesListFieldsFragment
        ...ExpensesListAdminFieldsFragment
      }
    }
  }

  ${_expenses_graphql_fragments__WEBPACK_IMPORTED_MODULE_16__/* .expensesListFieldsFragment */ .xe}
  ${_expenses_graphql_fragments__WEBPACK_IMPORTED_MODULE_16__/* .expensesListAdminFieldsFragment */ .H2}
  ${_expenses_graphql_fragments__WEBPACK_IMPORTED_MODULE_16__/* .expenseHostFields */ .RR}
  ${_HostInfoCard__WEBPACK_IMPORTED_MODULE_27__/* .hostInfoCardFields */ .t}
`;

const onExpenseUpdate = (updatedExpense, cache, filteredStatus) => {
  if (updatedExpense.status !== filteredStatus) {
    cache.modify({
      fields: {
        expenses(existingExpenses, {
          readField
        }) {
          if (!existingExpenses?.nodes) {
            return existingExpenses;
          } else {
            return _objectSpread(_objectSpread({}, existingExpenses), {}, {
              totalCount: existingExpenses.totalCount - 1,
              nodes: existingExpenses.nodes.filter(expense => updatedExpense.id !== readField('id', expense))
            });
          }
        }

      }
    });
  }
};

const NB_EXPENSES_DISPLAYED = 10;

const isValidStatus = status => {
  return Boolean(status === 'READY_TO_PAY' || _lib_constants_expense_status__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z[status]);
};

const getVariablesFromQuery = query => {
  const amountRange = (0,_budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_11__/* .parseAmountRange */ .t)(query.amount);
  const {
    from: dateFrom,
    to: dateTo
  } = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_8__/* .parseDateInterval */ .dr)(query.period);
  const orderBy = query.orderBy && (0,_expenses_filters_ExpensesOrder__WEBPACK_IMPORTED_MODULE_15__/* .parseChronologicalOrderInput */ .P)(query.orderBy);
  return {
    offset: parseInt(query.offset) || 0,
    limit: (parseInt(query.limit) || NB_EXPENSES_DISPLAYED) * 2,
    status: isValidStatus(query.status) ? query.status : null,
    type: query.type,
    tags: query.tag ? [query.tag] : undefined,
    minAmount: amountRange[0] && amountRange[0] * 100,
    maxAmount: amountRange[1] && amountRange[1] * 100,
    payoutMethodType: query.payout,
    dateFrom,
    dateTo,
    orderBy,
    searchTerm: query.searchTerm
  };
};

const ROUTE_PARAMS = ['hostCollectiveSlug', 'view', 'slug', 'section'];

const hasParams = query => {
  return Object.entries(query).some(([key, value]) => {
    return ![...ROUTE_PARAMS, 'offset', 'limit', 'paypalApprovalError', 'orderBy'].includes(key) && value;
  });
};

const HostDashboardExpenses = ({
  hostSlug,
  isNewAdmin
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)() || {};
  const query = router.query;
  const [paypalPreApprovalError, setPaypalPreApprovalError] = react__WEBPACK_IMPORTED_MODULE_3___default().useState(null);
  const hasFilters = react__WEBPACK_IMPORTED_MODULE_3___default().useMemo(() => hasParams(query), [query]);
  const pageRoute = isNewAdmin ? `/${hostSlug}/admin/expenses` : `/${hostSlug}/dashboard/expenses`;
  const expenses = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_4__.useQuery)(hostDashboardExpensesQuery, {
    variables: _objectSpread({
      hostSlug
    }, getVariablesFromQuery(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(query, (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default())))),
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const paginatedExpenses = (0,_lib_hooks_useLazyGraphQLPaginatedResults__WEBPACK_IMPORTED_MODULE_10__/* .useLazyGraphQLPaginatedResults */ .V)(expenses, 'expenses');
  react__WEBPACK_IMPORTED_MODULE_3___default().useEffect(() => {
    if (query.paypalApprovalError && !paypalPreApprovalError) {
      setPaypalPreApprovalError(query.paypalApprovalError);
      router.replace(pageRoute, lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(query, 'paypalApprovalError'), {
        shallow: true
      });
    }
  }, [query.paypalApprovalError]);
  const {
    data,
    error,
    loading
  } = expenses;
  const {
    hasDisputedOrders,
    hasInReviewOrders
  } = data?.host || {};

  const getQueryParams = newParams => {
    return lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, router.query), newParams), (value, key) => !value || ROUTE_PARAMS.includes(key));
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [!loading && (hasDisputedOrders || hasInReviewOrders) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
      type: "warning",
      withIcon: true,
      mb: 3,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        flexDirection: hasDisputedOrders && hasInReviewOrders ? 'column' : 'row',
        gridGap: '8px',
        flexWrap: 'wrap',
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Text__WEBPACK_IMPORTED_MODULE_26__.P, {
          fontWeight: 700,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "host.fraudProtectionWarning",
            defaultMessage: [{
              "type": 0,
              "value": "Fraud Protection Warning"
            }]
          })
        }), hasDisputedOrders && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_26__.P, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "host.disputes.warning",
            defaultMessage: [{
              "type": 0,
              "value": "There are disputed charges that need review."
            }]
          }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Link__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
            href: `/${hostSlug}/admin/orders?status=DISPUTED`,
            children: "Disputed Orders"
          }), ' ']
        }), hasInReviewOrders && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_26__.P, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "host.in_review.warning",
            defaultMessage: [{
              "type": 0,
              "value": "There are charges under review that need attention."
            }]
          }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Link__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
            href: `/${hostSlug}/admin/orders?status=IN_REVIEW`,
            children: "In Review Orders"
          }), ' ']
        })]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
      mb: 24,
      alignItems: "center",
      flexWrap: "wrap",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Text__WEBPACK_IMPORTED_MODULE_26__.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "Expenses",
          defaultMessage: [{
            "type": 0,
            "value": "Expenses"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
        mx: "auto"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
        p: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_SearchBar__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
          defaultValue: query.searchTerm,
          onSubmit: searchTerm => router.push({
            pathname: pageRoute,
            query: getQueryParams({
              searchTerm,
              offset: null
            })
          })
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
      mb: 26,
      borderWidth: "0.5px",
      borderColor: "black.300"
    }), paypalPreApprovalError && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_DismissibleMessage__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      children: ({
        dismiss
      }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        type: "warning",
        mb: 3,
        withIcon: true,
        onClose: dismiss,
        children: paypalPreApprovalError === 'PRE_APPROVAL_EMAIL_CHANGED' ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "paypal.preApproval.emailWarning",
          defaultMessage: [{
            "type": 0,
            "value": "Warning: the associated PayPal email was changed from "
          }, {
            "type": 1,
            "value": "oldEmail"
          }, {
            "type": 0,
            "value": " to "
          }, {
            "type": 1,
            "value": "newEmail"
          }, {
            "type": 0,
            "value": ". If this was not intentional, click "
          }, {
            "type": 1,
            "value": "refillBalance"
          }, {
            "type": 0,
            "value": " and use the correct account."
          }],
          values: {
            oldEmail: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("strong", {
              children: query.oldPaypalEmail
            }),
            newEmail: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("strong", {
              children: query.newPaypalEmail
            }),
            refillBalance: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx("q", {
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "ConnectPaypal.refill",
                defaultMessage: [{
                  "type": 0,
                  "value": "Refill balance"
                }]
              })
            })
          }
        }) : paypalPreApprovalError
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
      mb: 4,
      children: loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
        height: 150
      }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
        error: error
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_HostInfoCard__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z, {
        host: data.host
      })
    }), !expenses.loading && data?.host && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_ScheduledExpensesBanner__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
      host: data.host,
      expenses: paginatedExpenses.nodes,
      onSubmit: () => {
        expenses.refetch();
      },
      secondButton: !(query.status === 'SCHEDULED_FOR_PAYMENT' && query.payout === 'BANK_ACCOUNT') ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        buttonSize: "tiny",
        buttonStyle: "successSecondary",
        mr: 1,
        onClick: () => {
          router.push({
            pathname: pageRoute,
            query: getQueryParams({
              status: 'SCHEDULED_FOR_PAYMENT',
              payout: 'BANK_ACCOUNT',
              offset: null
            })
          });
        },
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "expenses.list",
          defaultMessage: [{
            "type": 0,
            "value": "List Expenses"
          }]
        })
      }) : null
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Box */ .xu, {
      mb: 34,
      children: data?.host ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_expenses_ExpensesFilters__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        collective: data.host,
        filters: query,
        onChange: queryParams => router.push({
          pathname: pageRoute,
          query: getQueryParams(_objectSpread(_objectSpread({}, queryParams), {}, {
            offset: null
          }))
        })
      }) : loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
        height: 70
      }) : null
    }), error ? null : !loading && !data.expenses?.nodes.length ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-expense-message",
      children: hasFilters ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "ExpensesList.Empty",
        defaultMessage: [{
          "type": 0,
          "value": "No expense matches the given filters, "
        }, {
          "type": 8,
          "value": "ResetLink",
          "children": [{
            "type": 0,
            "value": "reset them"
          }]
        }, {
          "type": 0,
          "value": " to see all expenses."
        }],
        values: {
          ResetLink(text) {
            return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Link__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
              "data-cy": "reset-expenses-filters",
              href: {
                pathname: pageRoute
              },
              children: text
            });
          }

        }
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "expenses.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No expenses"
        }]
      })
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_expenses_ExpensesList__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        isLoading: loading,
        host: data?.host,
        nbPlaceholders: paginatedExpenses.limit,
        expenses: paginatedExpenses.nodes,
        view: "admin",
        onProcess: (expense, cache) => {
          hasFilters && onExpenseUpdate(expense, cache, query.status);
        }
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_17__/* .Flex */ .kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          route: pageRoute,
          total: paginatedExpenses.totalCount,
          limit: paginatedExpenses.limit,
          offset: paginatedExpenses.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

HostDashboardExpenses.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardExpenses",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "isNewAdmin": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostDashboardExpenses);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 71374:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89699);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68185);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(79045);
/* harmony import */ var _SearchBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(32606);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(90998);
/* harmony import */ var _HostAdminCollectiveCard__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(62605);
/* harmony import */ var _HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(18357);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_HostAdminCollectiveCard__WEBPACK_IMPORTED_MODULE_15__]);
_HostAdminCollectiveCard__WEBPACK_IMPORTED_MODULE_15__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


















const COLLECTIVES_PER_PAGE = 20; // TODO: This query is using `legacyId` for host and member.account to interface with the
// legacy `AddFundsForm`. Once the new add funds form will be implemented, we can remove these fields.

const hostedCollectivesQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query HostDashboardHostedCollectives(
    $hostSlug: String!
    $limit: Int!
    $offset: Int!
    $orderBy: OrderByInput
    $hostFeesStructure: HostFeeStructure
    $searchTerm: String
  ) {
    host(slug: $hostSlug) {
      id
      legacyId
      slug
      name
      currency
      isHost
      type
      settings
      hostFeePercent
      plan {
        id
        hostFees
        hostFeeSharePercent
      }
      memberOf(
        role: HOST
        limit: $limit
        offset: $offset
        orderBy: $orderBy
        hostFeesStructure: $hostFeesStructure
        searchTerm: $searchTerm
        isApproved: true
      ) {
        offset
        limit
        totalCount
        nodes {
          id
          createdAt
          account {
            id
            legacyId
            name
            slug
            website
            type
            currency
            imageUrl(height: 96)
            isFrozen
            tags
            settings
            createdAt
            stats {
              id
              balance {
                valueInCents
                currency
              }
            }
            ... on AccountWithHost {
              hostFeesStructure
              hostFeePercent
            }
            ... on AccountWithContributions {
              totalFinancialContributors
            }
            ... on AccountWithParent {
              parent {
                id
                slug
                name
              }
            }
          }
        }
      }
    }
  }
`;

const checkIfQueryHasFilters = query => Object.entries(query).some(([key, value]) => {
  return !['view', 'offset', 'limit', 'hostCollectiveSlug', 'sort-by'].includes(key) && value;
});

const getVariablesFromQuery = query => {
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || COLLECTIVES_PER_PAGE,
    searchTerm: query.searchTerm,
    hostFeesStructure: query['fees-structure'],
    orderBy: {
      field: 'CREATED_AT',
      direction: query['sort-by'] === 'oldest' ? 'ASC' : 'DESC'
    }
  };
};

const ROUTE_PARAMS = ['hostCollectiveSlug', 'slug', 'section', 'view'];

const updateQuery = (router, newParams) => {
  const query = lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, router.query), newParams), (value, key) => !value || ROUTE_PARAMS.includes(key));

  const pathname = router.asPath.split('?')[0];
  return router.push({
    pathname,
    query
  });
};

const HostDashboardHostedCollectives = ({
  hostSlug
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)() || {};
  const query = router.query;
  const hasFilters = react__WEBPACK_IMPORTED_MODULE_2___default().useMemo(() => checkIfQueryHasFilters(query), [query]);
  const {
    data,
    error,
    loading,
    variables
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(hostedCollectivesQuery, {
    variables: _objectSpread({
      hostSlug
    }, getVariablesFromQuery(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(query, (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default())))),
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .API_V2_CONTEXT */ .T
  });
  const hostedMemberships = data?.host?.memberOf;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
          id: "HostedCollectives",
          defaultMessage: [{
            "type": 0,
            "value": "Hosted Collectives"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
        mx: "auto"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
        p: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_SearchBar__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          defaultValue: query.searchTerm,
          onSubmit: searchTerm => updateQuery(router, {
            searchTerm,
            offset: null
          })
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      mb: 26,
      borderWidth: "0.5px"
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
      mb: 34,
      children: data?.host ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        values: query,
        filters: [_HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_16__/* .COLLECTIVE_FILTER.SORT_BY */ .k.SORT_BY, _HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_16__/* .COLLECTIVE_FILTER.FEE_STRUCTURE */ .k.FEE_STRUCTURE],
        onChange: queryParams => updateQuery(router, _objectSpread(_objectSpread({}, queryParams), {}, {
          offset: null
        }))
      }) : loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
        height: 70
      }) : null
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      error: error,
      mb: 2
    }), !error && !loading && !hostedMemberships?.nodes.length ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-collective-message",
      children: hasFilters ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "discover.searchNoResult",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives match the current search."
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
        id: "menu.collective.none",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives yet"
        }]
      })
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Grid */ .rj, {
        gridGap: 24,
        gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))",
        children: loading ? Array.from(new Array(COLLECTIVES_PER_PAGE)).map((_, index) =>
        /*#__PURE__*/
        // eslint-disable-next-line react/no-array-index-key
        react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          height: 362,
          borderRadius: "8px"
        }, index)) : hostedMemberships?.nodes.map(member => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_HostAdminCollectiveCard__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          host: data.host,
          collective: member.account,
          since: member.createdAt
        }, member.id))
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          total: hostedMemberships?.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

HostDashboardHostedCollectives.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardHostedCollectives",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostDashboardHostedCollectives);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 82945:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_remix_line_Question__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83002);
/* harmony import */ var _styled_icons_remix_line_Question__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_remix_line_Question__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82525);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(15078);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(5993);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69078);
/* harmony import */ var _filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(49106);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(68185);
/* harmony import */ var _NotFound__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(40517);
/* harmony import */ var _PeriodFilterPresetsSelect__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(60732);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(173);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90998);
/* harmony import */ var _reports_section_HostCSVDownloadButton__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(87165);
/* harmony import */ var _reports_section_HostFeesSection__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(70407);
/* harmony import */ var _reports_section_PlatformTipsCollected__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(8309);
/* harmony import */ var _reports_section_TotalMoneyManagedSection__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(98984);
/* harmony import */ var _reports_section_TransactionsOverviewSection__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(97468);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_8__, _filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_10__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__, _reports_section_HostCSVDownloadButton__WEBPACK_IMPORTED_MODULE_20__]);
([_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_8__, _filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_10__, _StyledTooltip__WEBPACK_IMPORTED_MODULE_18__, _reports_section_HostCSVDownloadButton__WEBPACK_IMPORTED_MODULE_20__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




























const hostReportPageQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  query HostReportsPage(
    $hostSlug: String!
    $account: [AccountReferenceInput!]
    $dateFrom: DateTime
    $dateTo: DateTime
  ) {
    host(slug: $hostSlug) {
      id
      legacyId
      slug
      name
      currency
      isHost
      isActive
      type
      createdAt
      hostFeePercent
      isTrustedHost
      stats {
        id
        balance(dateTo: $dateTo) {
          valueInCents
          currency
        }
      }
      contributionStats(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {
        contributionsCount
        oneTimeContributionsCount
        recurringContributionsCount
        dailyAverageIncomeAmount {
          valueInCents
        }
      }
      expenseStats(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {
        expensesCount
        dailyAverageAmount {
          valueInCents
        }
        invoicesCount
        reimbursementsCount
        grantsCount
      }
      hostMetrics(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {
        hostFees {
          valueInCents
          currency
        }
        hostFeeShare {
          valueInCents
          currency
        }
        pendingPlatformFees {
          valueInCents
          currency
        }
        platformTips {
          valueInCents
          currency
        }
        pendingPlatformTips {
          valueInCents
          currency
        }
        pendingHostFeeShare {
          valueInCents
          currency
        }
        totalMoneyManaged {
          valueInCents
          currency
        }
      }
      hostMetricsTimeSeries(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {
        timeUnit
        totalReceived {
          timeUnit
          nodes {
            date
            kind
            amount {
              value
            }
          }
        }
        totalSpent {
          timeUnit
          nodes {
            date
            kind
            amount {
              value
            }
          }
        }
      }
    }
  }
`;

const SectionTitle = ({
  children,
  hint = null
}) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
  alignItems: "center",
  justifyContent: "space-between",
  mb: 22,
  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H2, {
    fontWeight: "500",
    fontSize: "20px",
    lineHeight: "28px",
    children: children
  }), hint && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
    mx: 2,
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
      content: hint,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_styled_icons_remix_line_Question__WEBPACK_IMPORTED_MODULE_2__.Question, {
        size: 18,
        color: "#75777A"
      })
    })
  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
    borderColor: "black.300",
    flex: "1",
    ml: 2
  })]
});

const FilterLabel = styled_components__WEBPACK_IMPORTED_MODULE_4___default().label.withConfig({
  displayName: "HostDashboardReports__FilterLabel",
  componentId: "sc-1occr4f-0"
})(["font-weight:500;text-transform:uppercase;margin-bottom:8px;color:#4e5052;"]);

const prepareCollectivesForFilter = collectives => {
  return !collectives?.length ? null : collectives.map(collective => ({
    legacyId: collective.value.id
  }));
};

const getDefaultDateInterval = () => {
  const interval = _PeriodFilterPresetsSelect__WEBPACK_IMPORTED_MODULE_15__/* .PERIOD_FILTER_PRESETS.thisMonth.getInterval */ .p.thisMonth.getInterval();
  return {
    timezoneType: 'UTC',
    // To match the monthly host report sent by email
    from: interval.from.format('YYYY-MM-DD'),
    to: interval.to.format('YYYY-MM-DD')
  };
};

const HostDashboardReports = ({
  hostSlug
}) => {
  const [dateInterval, setDateInterval] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(getDefaultDateInterval);
  const [collectives, setCollectives] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(null);
  const dateFrom = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_6__/* .simpleDateToISOString */ .GF)(dateInterval?.from, false, dateInterval?.timezoneType);
  const dateTo = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_6__/* .simpleDateToISOString */ .GF)(dateInterval?.to, true, dateInterval?.timezoneType);
  const variables = {
    hostSlug,
    account: collectives,
    dateFrom,
    dateTo
  };
  const {
    data,
    error,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(hostReportPageQuery, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  });
  const host = data?.host;

  if (!loading) {
    if (error) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        error: error,
        maxWidth: 500,
        m: "0 auto"
      });
    } else if (!host) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_NotFound__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {});
    } else if (!host.isActive) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        withIcon: true,
        type: "error",
        maxWidth: 400,
        m: "0 auto",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "host.onlyActive",
          defaultMessage: [{
            "type": 0,
            "value": "This page is only available for active fiscal hosts"
          }]
        })
      });
    }
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_19__.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "Reports",
          defaultMessage: [{
            "type": 0,
            "value": "Reports"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        mx: "auto"
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      position: ['relative', 'sticky'],
      top: "0",
      background: "white",
      zIndex: "10",
      py: 3,
      mb: 4,
      boxShadow: "5px 12px 7px -10px #44444429",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Grid */ .rj, {
        gridTemplateColumns: ['100%', '1fr 2fr auto'],
        gridGap: ['8px', null, null, '28px'],
        width: "100%",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div", {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(FilterLabel, {
            htmlFor: "transactions-period-filter",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "TransactionsOverviewSection.PeriodFilter",
              defaultMessage: [{
                "type": 0,
                "value": "Filter by Date"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            onChange: setDateInterval,
            value: dateInterval,
            minDate: host?.createdAt
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div", {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(FilterLabel, {
            htmlFor: "transactions-collective-filter",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "TransactionsOverviewSection.CollectiveFilter",
              defaultMessage: [{
                "type": 0,
                "value": "Filter by Collective"
              }]
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_CollectivePickerAsync__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            inputId: "TransactionsCollectiveFilter",
            "data-cy": "transactions-collective-filter",
            types: [_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__/* .CollectiveType.COLLECTIVE */ .eV.COLLECTIVE, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__/* .CollectiveType.EVENT */ .eV.EVENT, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__/* .CollectiveType.PROJECT */ .eV.PROJECT, _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_5__/* .CollectiveType.FUND */ .eV.FUND],
            isMulti: true,
            hostCollectiveIds: [host?.legacyId],
            onChange: value => setCollectives(prepareCollectivesForFilter(value)),
            styles: {
              control: baseStyles => _objectSpread(_objectSpread({}, baseStyles), {}, {
                borderRadius: 16
              })
            },
            isLoading: loading,
            disabled: loading,
            useCompactMode: true
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
          alignItems: "flex-end",
          width: "100%",
          mt: [24, 0],
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_reports_section_HostCSVDownloadButton__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
            host: host,
            collectives: collectives,
            dateInterval: dateInterval
          })
        })]
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
      mb: 5,
      borderRadius: "12px",
      padding: "32px 24px",
      borderColor: "black.400",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        mb: 38,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(SectionTitle, {
          hint: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "Host.Metrics.TotalMoneyManages.description",
            defaultMessage: [{
              "type": 0,
              "value": "Total amount held in your bank account for the Host and its Collectives."
            }]
          }),
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "Host.Metrics.TotalMoneyManages",
            defaultMessage: [{
              "type": 0,
              "value": "Total Money Managed"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_reports_section_TotalMoneyManagedSection__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
          host: host,
          isLoading: loading,
          collectives: collectives
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        mb: 38,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(SectionTitle, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "Host.Metrics.HostFees",
            defaultMessage: [{
              "type": 0,
              "value": "Host Fees"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_reports_section_HostFeesSection__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
          host: host,
          collectives: collectives,
          isLoading: loading
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        mb: 38,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(SectionTitle, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "TransactionsOverview",
            defaultMessage: [{
              "type": 0,
              "value": "Contributions and Expenses"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_reports_section_TransactionsOverviewSection__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
          host: host,
          isLoading: loading
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        mb: 4,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_reports_section_PlatformTipsCollected__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          host: host,
          isLoading: loading
        })
      })]
    })]
  });
};

HostDashboardReports.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardReports",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostDashboardReports);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 56301:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "t": () => (/* binding */ hostInfoCardFields)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(91337);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(27596);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _icons_PayPal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43385);
/* harmony import */ var _icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12173);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92129);
/* harmony import */ var _LocationAddress__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(41627);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(173);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(90998);
/* harmony import */ var _ConnectPaypalButton__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(98485);
/* harmony import */ var _ConnectTransferwiseButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(83962);
/* harmony import */ var _PaypalPreApprovalDetailsIcon__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(89848);
/* harmony import */ var _TransferwiseDetailsIcon__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(60527);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ConnectPaypalButton__WEBPACK_IMPORTED_MODULE_16__, _PaypalPreApprovalDetailsIcon__WEBPACK_IMPORTED_MODULE_18__, _TransferwiseDetailsIcon__WEBPACK_IMPORTED_MODULE_19__]);
([_ConnectPaypalButton__WEBPACK_IMPORTED_MODULE_16__, _PaypalPreApprovalDetailsIcon__WEBPACK_IMPORTED_MODULE_18__, _TransferwiseDetailsIcon__WEBPACK_IMPORTED_MODULE_19__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);






















const hostInfoCardFields = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  fragment HostInfoCardFields on Host {
    id
    legacyId
    slug
    currency
    location {
      id
      address
      country
    }
    paypalPreApproval {
      id
      name
      expiryDate
      createdAt
      balance {
        currency
        valueInCents
      }
    }
    transferwiseBalances {
      valueInCents
      currency
    }
    stats {
      id
      balance {
        valueInCents
      }
    }
  }
`;
const ColumnTitle = styled_components__WEBPACK_IMPORTED_MODULE_3___default().span.withConfig({
  displayName: "HostInfoCard__ColumnTitle",
  componentId: "sc-19rwlgd-0"
})({
  textTransform: 'uppercase',
  color: 'black.600',
  fontSize: '9px',
  lineHeight: '14px',
  letterSpacing: '0.6px',
  fontWeight: '600',
  flex: '1 1',
  paddingTop: '3px'
});

const Separator = () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
  alignItems: "center",
  mx: [null, null, 24],
  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
    width: ['100%', null, '1px'],
    borderTop: [null, null, 'none'],
    height: ['1px', null, '60%'],
    my: [3, null, 0],
    borderLeft: "1px solid",
    borderColor: "black.200"
  })
});

const getMainTransferwiseBalance = (balances, hostCurrency) => {
  if (!balances) {
    return null;
  } else {
    return balances.find(({
      currency
    }) => currency === hostCurrency) || balances[0];
  }
};
/**
 * A box to display some info about the host, with links to refill the
 * PayPal & Transferwise balances.
 */


const HostInfoCard = ({
  host
}) => {
  const mainTransferwiseBalance = getMainTransferwiseBalance(host.transferwiseBalances, host.currency);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
    display: ['block', null, 'flex'],
    justifyContent: "space-evenly",
    px: 4,
    py: 22,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        alignItems: "center",
        width: "100%",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
          mr: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_icons_PayPal__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            size: 14,
            style: {
              color: '#9D9FA3'
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(ColumnTitle, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "ServiceBalance",
            defaultMessage: [{
              "type": 1,
              "value": "service"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              service: 'Paypal'
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_PaypalPreApprovalDetailsIcon__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
          paymentMethod: host.paypalPreApproval
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        justifyContent: "space-between",
        py: 3,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
          color: "black.400",
          fontSize: "15px",
          children: host.currency
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
          fontSize: "15px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
            showCurrencyCode: false,
            currency: host.paypalPreApproval?.balance.currency || host.currency,
            amount: !host.paypalPreApproval || (0,_lib_payment_method_utils__WEBPACK_IMPORTED_MODULE_4__/* .hasPaypalPreApprovalExpired */ .qi)(host.paypalPreApproval) ? null : host.paypalPreApproval.balance.valueInCents
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        display: "inline-block",
        ml: "-16px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_ConnectPaypalButton__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          host: host,
          paymentMethod: host.paypalPreApproval
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(Separator, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        alignItems: "center",
        width: "100%",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
          mr: 3,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            size: 14,
            color: "#9D9FA3"
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(ColumnTitle, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "ServiceBalance",
            defaultMessage: [{
              "type": 1,
              "value": "service"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              service: 'Wise'
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_TransferwiseDetailsIcon__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          size: 18,
          balances: host.transferwiseBalances
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
        justifyContent: "space-between",
        py: 3,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
          color: "black.400",
          fontSize: "15px",
          children: mainTransferwiseBalance?.currency || host.currency
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
          fontSize: "15px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
            showCurrencyCode: false,
            amount: mainTransferwiseBalance?.valueInCents,
            currency: mainTransferwiseBalance?.currency || host.currency
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        display: "inline-block",
        ml: "-16px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_ConnectTransferwiseButton__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          isConnected: Boolean(host.transferwiseBalances)
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(Separator, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Box */ .xu, {
        mb: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(ColumnTitle, {
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "BillingAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Billing address"
            }]
          })
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        fontSize: "10px",
        lineHeight: "15px",
        color: "black.500",
        my: 2,
        minHeight: 35,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_LocationAddress__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          location: host.location,
          showMessageIfEmpty: true
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        as: _Link__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z,
        href: `/${host.slug}/admin`,
        fontSize: "10px",
        lineHeight: "15px",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "Edit",
          defaultMessage: [{
            "type": 0,
            "value": "Edit"
          }]
        })
      })]
    })]
  });
};

HostInfoCard.__docgenInfo = {
  "description": "A box to display some info about the host, with links to refill the\nPayPal & Transferwise balances.",
  "methods": [],
  "displayName": "HostInfoCard",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "location": {
            "name": "object",
            "required": false
          },
          "paypalPreApproval": {
            "name": "shape",
            "value": {
              "expiryDate": {
                "name": "string",
                "required": false
              },
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  },
                  "currency": {
                    "name": "string",
                    "required": true
                  }
                },
                "required": true
              }
            },
            "required": false
          },
          "transferwiseBalances": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "valueInCents": {
                  "name": "number",
                  "required": false
                },
                "currency": {
                  "name": "string",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostInfoCard);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 89848:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _styled_icons_fa_solid_ExclamationTriangle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25730);
/* harmony import */ var _styled_icons_fa_solid_ExclamationTriangle__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_fa_solid_ExclamationTriangle__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(88609);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledTooltip__WEBPACK_IMPORTED_MODULE_4__]);
_StyledTooltip__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







const getPaypalExpiryInfo = paymentMethod => {
  const timeBeforeExpiry = new Date(paymentMethod.expiryDate) - new Date();
  const twoWeeks = 1000 * 60 * 60 * 24 * 14;

  if (timeBeforeExpiry <= 0) {
    return {
      icon: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(_styled_icons_fa_solid_ExclamationTriangle__WEBPACK_IMPORTED_MODULE_1__.ExclamationTriangle, {
        size: 16,
        color: "#E03F6A"
      }),
      message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "PaypalPreApproval.expired",
        defaultMessage: [{
          "type": 0,
          "value": "Your PayPal pre-approval has expired. To reconnect your account, click "
        }, {
          "type": 1,
          "value": "refillBalance"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          refillBalance: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx("q", {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "ConnectPaypal.refill",
              defaultMessage: [{
                "type": 0,
                "value": "Refill balance"
              }]
            })
          })
        }
      })
    };
  } else if (timeBeforeExpiry < twoWeeks) {
    return {
      icon: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(_styled_icons_fa_solid_ExclamationTriangle__WEBPACK_IMPORTED_MODULE_1__.ExclamationTriangle, {
        size: 16,
        color: "#E0E01B"
      }),
      message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "PaypalPreApproval.expireSoon",
        defaultMessage: [{
          "type": 0,
          "value": "Your PayPal pre-approval will expire on "
        }, {
          "type": 3,
          "value": "expiryDate",
          "style": "long"
        }, {
          "type": 0,
          "value": ". Renew it by clicking on "
        }, {
          "type": 1,
          "value": "refillBalance"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          expiryDate: new Date(paymentMethod.expiryDate),
          refillBalance: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx("q", {
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "ConnectPaypal.refill",
              defaultMessage: [{
                "type": 0,
                "value": "Refill balance"
              }]
            })
          })
        }
      })
    };
  } else {
    return {
      icon: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_2__.Info, {
        size: 18,
        color: "#76777A"
      }),
      message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "PaypalPreApproval.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Paypal account "
        }, {
          "type": 1,
          "value": "paypalEmail"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "createdAt",
          "style": "long"
        }, {
          "type": 0,
          "value": ". The token will expire on "
        }, {
          "type": 3,
          "value": "expiryDate",
          "style": "long"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          createdAt: new Date(paymentMethod.createdAt),
          expiryDate: new Date(paymentMethod.expiryDate),
          paypalEmail: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx("strong", {
            children: paymentMethod.name
          })
        }
      })
    };
  }
};

const PaypalPreApprovalDetailsIcon = ({
  paymentMethod
}) => {
  if (!paymentMethod) {
    return null;
  }

  const {
    message,
    icon
  } = getPaypalExpiryInfo(paymentMethod);
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
    content: message,
    children: icon
  });
};

PaypalPreApprovalDetailsIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PaypalPreApprovalDetailsIcon",
  "props": {
    "paymentMethod": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "name": {
            "name": "string",
            "required": false
          },
          "expiryDate": {
            "name": "string",
            "required": false
          },
          "balance": {
            "name": "shape",
            "value": {
              "valueInCents": {
                "name": "number",
                "required": false
              },
              "currency": {
                "name": "string",
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PaypalPreApprovalDetailsIcon);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 68953:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(30417);
/* harmony import */ var _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(65985);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97079);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(47988);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(88705);
/* harmony import */ var _icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(12173);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_13__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
















const scheduledExpensesQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  query ScheduledExpensesBanner(
    $hostId: String!
    $limit: Int!
    $status: ExpenseStatusFilter
    $payoutMethodType: PayoutMethodType
  ) {
    expenses(host: { id: $hostId }, limit: $limit, status: $status, payoutMethodType: $payoutMethodType) {
      totalCount
      offset
      limit
      nodes {
        id
      }
    }
  }
`;

const ScheduledExpensesBanner = ({
  host,
  onSubmit,
  secondButton,
  expenses
}) => {
  const scheduledExpenses = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(scheduledExpensesQuery, {
    variables: {
      hostId: host.id,
      limit: 100,
      status: 'SCHEDULED_FOR_PAYMENT',
      payoutMethodType: 'BANK_ACCOUNT'
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
  });
  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(() => {
    scheduledExpenses.refetch();
  }, [expenses]);
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .useToasts */ .e1)();
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const [showConfirmationModal, setConfirmationModalDisplay] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const hasScheduledExpenses = scheduledExpenses.data?.expenses?.totalCount > 0;

  if (!hasScheduledExpenses) {
    return null;
  }

  const request = (0,_transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_2__.create)({
    mode:  false ? 0 : _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_2__.Mode.SANDBOX
  });

  const handlePayBatch = async () => {
    const expenseIds = scheduledExpenses.data.expenses.nodes.map(e => e.id);

    try {
      await request(`${(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__/* .getWebsiteUrl */ .ls)()}/api/services/transferwise/pay-batch`, {
        method: 'POST',
        body: JSON.stringify({
          expenseIds,
          hostId: host.id
        }),
        headers: (0,_lib_api__WEBPACK_IMPORTED_MODULE_4__/* .addAuthTokenToHeader */ .Pj)()
      });
      setConfirmationModalDisplay(false);
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
        message: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
          id: "expenses.scheduled.paybatch.success",
          defaultMessage: [{
            "type": 0,
            "value": "Expenses paid! They're now being processed by Wise."
          }]
        })
      });
      onSubmit?.();
    } catch (e) {
      const message = e?.response ? await e.response.text() : intl.formatMessage({
        id: "MEB9ET",
        defaultMessage: [{
          "type": 0,
          "value": "There was an error trying to process this batch, please "
        }, {
          "type": 8,
          "value": "SupportLink",
          "children": [{
            "type": 0,
            "value": "contact support"
          }]
        }]
      }, {
        SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_9__/* .I18nSupportLink */ .wl
      });
      addToast({
        type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
        title: intl.formatMessage({
          id: "HYFu3j",
          defaultMessage: [{
            "type": 0,
            "value": "Batch payment failed"
          }]
        }),
        message
      });
    }
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      type: "success",
      mb: 4,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Flex */ .kC, {
        alignItems: "center",
        justifyContent: "space-between",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
            size: "1em",
            color: "#25B869",
            mr: 2
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
            id: "expenses.scheduled.notification",
            defaultMessage: [{
              "type": 0,
              "value": "You have "
            }, {
              "type": 6,
              "value": "count",
              "options": {
                "one": {
                  "value": [{
                    "type": 7
                  }, {
                    "type": 0,
                    "value": " expense"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 7
                  }, {
                    "type": 0,
                    "value": " expenses"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }, {
              "type": 0,
              "value": " scheduled for payment."
            }],
            values: {
              count: scheduledExpenses.data.expenses.totalCount
            }
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
          children: [secondButton, /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            buttonSize: "tiny",
            buttonStyle: "successSecondary",
            onClick: () => setConfirmationModalDisplay(true),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
              id: "expenses.scheduled.paybatch",
              defaultMessage: [{
                "type": 0,
                "value": "Pay Batch"
              }]
            })
          })]
        })]
      })
    }), showConfirmationModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
      zindex: 1000,
      header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "expenses.scheduled.confirmation.title",
        defaultMessage: [{
          "type": 0,
          "value": "Pay Expenses Batch"
        }]
      }),
      body: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "expenses.scheduled.confirmation.body",
        defaultMessage: [{
          "type": 0,
          "value": "Are you sure you want to batch and pay "
        }, {
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expense"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expenses"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }, {
          "type": 0,
          "value": " scheduled for payment?"
        }],
        values: {
          count: scheduledExpenses.data.expenses.totalCount
        }
      }),
      onClose: () => setConfirmationModalDisplay(false),
      continueLabel: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "expense.pay.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Pay with "
        }, {
          "type": 1,
          "value": "paymentMethod"
        }],
        values: {
          paymentMethod: 'Wise'
        }
      }),
      continueHandler: handlePayBatch
    })]
  });
};

ScheduledExpensesBanner.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ScheduledExpensesBanner",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "expenses": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "secondButton": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ScheduledExpensesBanner);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 60527:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57153);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(27596);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(88609);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledTooltip__WEBPACK_IMPORTED_MODULE_3__]);
_StyledTooltip__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







const BalancesBreakdown = ({
  balances
}) => {
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx("div", {
    children: balances.map(({
      valueInCents,
      currency
    }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
      children: [currency, ":\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        amount: valueInCents,
        currency: currency,
        amountStyles: {
          color: '#FFFFFF',
          fontWeight: 'bold'
        },
        showCurrencyCode: false
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx("br", {})]
    }, currency))
  });
};

const TransferwiseDetailsIcon = ({
  size,
  balances
}) => {
  if (!balances || balances.length < 2) {
    return null;
  } else {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledTooltip__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
      content: () => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(BalancesBreakdown, {
        balances: balances
      }),
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_1__.Info, {
        size: size,
        color: "#76777A"
      })
    });
  }
};

TransferwiseDetailsIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TransferwiseDetailsIcon",
  "props": {
    "size": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "balances": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TransferwiseDetailsIcon);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 21466:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17632);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37278);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(51082);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(71792);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(93150);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_13__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_13__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
const _excluded = ["collective", "host"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

















const unhostAccountMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation UnhostAccount($account: AccountReferenceInput!, $message: String) {
    removeHost(account: $account, message: $message) {
      id
      slug
      name
      ... on AccountWithHost {
        host {
          id
        }
      }
    }
  }
`;

const UnhostAccountModal = _ref => {
  let {
    collective,
    host
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .useToasts */ .e1)();
  const {
    0: message,
    1: setMessage
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');
  const [unhostAccount, {
    loading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(unhostAccountMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    variables: {
      account: {
        id: collective.id
      },
      message
    },
    refetchQueries: ['HostDashboardHostedCollectives'],
    awaitRefetchQueries: true
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
    maxWidth: 432,
    trapFocus: true
  }, props), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .CollectiveModalHeader */ .I4, {
      collective: collective,
      mb: 3
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalBody */ .fe, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div", {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
          fontSize: "16px",
          fontWeight: "700",
          lineHeight: "24px",
          color: "red.900",
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "JYMdjW",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to un-host "
            }, {
              "type": 1,
              "value": "collectiveName"
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              collectiveName: collective.name
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__.P, {
          fontSize: "14px",
          lineHeight: "20px",
          color: "black.700",
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "E0P87E",
            defaultMessage: [{
              "type": 1,
              "value": "fiscalHostName"
            }, {
              "type": 0,
              "value": " will no longer be the Fiscal Host for this Collective. Un-hosting this Collective means no longer holding funds for them, neither managing tax compliance and accounting."
            }],
            values: {
              fiscalHostName: host.name
            }
          })
        }), collective.stats.balance.valueInCents > 0 && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          type: "warning",
          mb: 2,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "J2/jVu",
            defaultMessage: [{
              "type": 0,
              "value": "The Collective's balance must be zero to un-host, including its Events or Projects. There is a remaining balance of "
            }, {
              "type": 1,
              "value": "collectiveBalanceAmount"
            }, {
              "type": 0,
              "value": ". You can pay out these funds by "
            }, {
              "type": 8,
              "value": "Link",
              "children": [{
                "type": 0,
                "value": "processing expenses."
              }]
            }],
            values: {
              collectiveBalanceAmount: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_3__/* .formatCurrency */ .xG)(collective.stats.balance.valueInCents, collective.stats.balance.currency, {
                locale: intl.locale
              }),
              Link: value => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                color: "black.800",
                href: "https://docs.opencollective.com/help/expenses-and-getting-paid/submitting-expenses",
                textDecoration: "underline",
                openInNewTab: true,
                children: value
              })
            }
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_Text__WEBPACK_IMPORTED_MODULE_12__/* .Label */ .__, {
          htmlFor: "unhost-account-message",
          fontSize: "16px",
          fontWeight: "700",
          lineHeight: "24px",
          color: "black.800.900",
          mb: "6px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "GLo1nw",
            defaultMessage: [{
              "type": 0,
              "value": "Include a message to the Collective admins (Optional)"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          id: "unhost-account-message",
          width: "100%",
          minHeight: 126,
          maxHeight: 300,
          onChange: e => setMessage(e.target.value),
          value: message,
          fontSize: "13px"
        })]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalFooter */ .mz, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        justifyContent: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          buttonStyle: 'danger',
          minWidth: 90,
          disabled: collective.stats.balance.valueInCents > 0,
          loading: loading,
          onClick: async () => {
            try {
              await unhostAccount();
              const successMsgArgs = {
                accountName: collective.name,
                accountSlug: collective.slug
              };
              addToast({
                type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
                message: intl.formatMessage({
                  id: "hOzNmK",
                  defaultMessage: [{
                    "type": 1,
                    "value": "accountName"
                  }, {
                    "type": 0,
                    "value": " (@"
                  }, {
                    "type": 1,
                    "value": "accountSlug"
                  }, {
                    "type": 0,
                    "value": ") has been un-hosted"
                  }]
                }, successMsgArgs)
              });
              props?.onClose();
            } catch (e) {
              addToast({
                type: _ToastProvider__WEBPACK_IMPORTED_MODULE_13__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
                variant: 'light',
                message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .i18nGraphqlException */ .t2)(intl, e)
              });
            }
          },
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "w5thcm",
            defaultMessage: [{
              "type": 0,
              "value": "Un-host Collective"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          ml: 3,
          minWidth: 120,
          onClick: props.onClose,
          disabled: loading,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
            id: "actions.cancel",
            defaultMessage: [{
              "type": 0,
              "value": "Cancel"
            }]
          })
        })]
      })
    })]
  }));
};

UnhostAccountModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "UnhostAccountModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "isFrozen": {
            "name": "bool",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  },
                  "currency": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UnhostAccountModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 66959:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(68185);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(79045);
/* harmony import */ var _SearchBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(32606);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(90998);
/* harmony import */ var _HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(18357);
/* harmony import */ var _PendingApplication__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87659);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_PendingApplication__WEBPACK_IMPORTED_MODULE_15__]);
_PendingApplication__WEBPACK_IMPORTED_MODULE_15__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


















const COLLECTIVES_PER_PAGE = 20;
const pendingApplicationsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  query HostDashboardPendingApplications(
    $hostSlug: String!
    $limit: Int!
    $offset: Int!
    $orderBy: ChronologicalOrderInput!
    $searchTerm: String
  ) {
    host(slug: $hostSlug) {
      id
      slug
      name
      type
      settings
      policies {
        COLLECTIVE_MINIMUM_ADMINS {
          numberOfAdmins
        }
      }
      pendingApplications(limit: $limit, offset: $offset, orderBy: $orderBy, searchTerm: $searchTerm) {
        offset
        limit
        totalCount
        nodes {
          id
          message
          customData
          account {
            id
            legacyId
            name
            slug
            website
            description
            type
            imageUrl(height: 96)
            createdAt
            ... on AccountWithHost {
              ...ProcessHostApplicationFields
            }
            memberInvitations(role: [ADMIN]) {
              id
              role
            }
            admins: members(role: ADMIN) {
              totalCount
              nodes {
                id
                account {
                  id
                  type
                  slug
                  name
                  imageUrl(height: 48)
                }
              }
            }
          }
        }
      }
    }
  }
  ${_PendingApplication__WEBPACK_IMPORTED_MODULE_15__/* .processApplicationAccountFields */ .qM}
`;

const checkIfQueryHasFilters = query => Object.entries(query).some(([key, value]) => {
  return !['view', 'offset', 'limit', 'hostCollectiveSlug', 'sort-by'].includes(key) && value;
});

const getVariablesFromQuery = query => {
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || COLLECTIVES_PER_PAGE,
    searchTerm: query.searchTerm,
    hostFeesStructure: query['fees-structure'],
    orderBy: {
      field: 'CREATED_AT',
      direction: query['sort-by'] === 'oldest' ? 'ASC' : 'DESC'
    }
  };
};

const ROUTE_PARAMS = ['hostCollectiveSlug', 'slug', 'section', 'view'];

const updateQuery = (router, newParams) => {
  const query = lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, router.query), newParams), (value, key) => !value || ROUTE_PARAMS.includes(key));

  const pathname = router.asPath.split('?')[0];
  return router.push({
    pathname,
    query
  });
};

const PendingApplications = ({
  hostSlug
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)() || {};
  const query = router.query;
  const hasFilters = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(() => checkIfQueryHasFilters(query), [query]);
  const {
    data,
    error,
    loading,
    variables
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useQuery)(pendingApplicationsQuery, {
    variables: _objectSpread({
      hostSlug
    }, getVariablesFromQuery(query)),
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T
  });
  const hostApplications = data?.host?.pendingApplications;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Text__WEBPACK_IMPORTED_MODULE_13__.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "host.dashboard.tab.pendingApplications",
          defaultMessage: [{
            "type": 0,
            "value": "Pending applications"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        mx: "auto"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        p: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_SearchBar__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          defaultValue: query.searchTerm,
          onSubmit: searchTerm => updateQuery(router, {
            searchTerm,
            offset: null
          })
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      mb: 26,
      borderWidth: "0.5px"
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      mb: 34,
      children: data?.host ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        filters: [_HostAdminCollectiveFilters__WEBPACK_IMPORTED_MODULE_14__/* .COLLECTIVE_FILTER.SORT_BY */ .k.SORT_BY],
        values: query,
        onChange: queryParams => updateQuery(router, _objectSpread(_objectSpread({}, queryParams), {}, {
          offset: null
        }))
      }) : loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
        height: 70
      }) : null
    }), error && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      error: error,
      mb: 2
    }), !error && !loading && !hostApplications?.nodes.length ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-collective-message",
      children: hasFilters ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "discover.searchNoResult",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives match the current search."
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "menu.collective.none",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives yet"
        }]
      })
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
      children: [loading ? Array.from(new Array(COLLECTIVES_PER_PAGE)).map((_, index) =>
      /*#__PURE__*/
      // eslint-disable-next-line react/no-array-index-key
      react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        mb: 24,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
          height: 362,
          borderRadius: "8px"
        })
      }, index)) : hostApplications?.nodes.map(application => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
        mb: 24,
        "data-cy": "host-application",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_PendingApplication__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, {
          host: data.host,
          application: application
        })
      }, application.id)), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          total: hostApplications?.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

PendingApplications.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PendingApplications",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PendingApplications);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 87165:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65985);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15078);
/* harmony import */ var _lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(46233);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92129);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(51082);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_5__]);
_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












const getHostReportURL = (hostSlug, params) => {
  const {
    dateFrom,
    dateTo,
    accountsSlugs,
    format = 'txt'
  } = params || {};
  const url = new URL(`${"https://rest-staging.opencollective.com"}/v2/${hostSlug}/hostTransactions.${format}`);

  if (dateFrom) {
    url.searchParams.set('dateFrom', dateFrom);
  }

  if (dateTo) {
    url.searchParams.set('dateTo', dateTo);
  }

  if (accountsSlugs?.length) {
    url.searchParams.set('account', accountsSlugs.join(','));
  }

  url.searchParams.set('fetchAll', '1');
  return url.toString();
};

const prepareDateArgs = dateInterval => {
  if (!dateInterval) {
    return {};
  } else {
    return {
      dateFrom: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_4__/* .simpleDateToISOString */ .GF)(dateInterval.from, false, dateInterval.timezoneType),
      dateTo: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_4__/* .simpleDateToISOString */ .GF)(dateInterval.to, true, dateInterval.timezoneType)
    };
  }
};

const triggerCSVDownload = (host, reportUrl, dateInterval) => {
  let filename = `host-${host.slug}-transactions`;

  if (dateInterval?.from) {
    const until = dateInterval.to || dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD');
    filename += `-${dateInterval.from}-${until}`;
  }

  return (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__/* .fetchCSVFileFromRESTService */ .Zu)(reportUrl, filename);
};

const HostCSVDownloadButton = ({
  host,
  collectives,
  dateInterval
}) => {
  const accountsSlugs = collectives?.map(c => c.slug);
  const hostReportUrl = getHostReportURL(host?.slug, _objectSpread(_objectSpread({}, prepareDateArgs(dateInterval)), {}, {
    accountsSlugs
  }));
  const {
    loading: isFetching,
    call: downloadCSV
  } = (0,_lib_hooks_useAsyncCall__WEBPACK_IMPORTED_MODULE_5__/* .useAsyncCall */ .N)(() => triggerCSVDownload(host, hostReportUrl, dateInterval), {
    useErrorToast: true
  });
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
    as: _Link__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z,
    width: "100%",
    href: hostReportUrl,
    onClick: e => {
      e.preventDefault();
      downloadCSV();
    },
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
      buttonStyle: "primary",
      buttonSize: "small",
      py: "7px",
      minWidth: 140,
      width: "100%",
      loading: isFetching,
      disabled: !host,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "gefgLF",
        defaultMessage: [{
          "type": 0,
          "value": "Generate CSV report"
        }]
      })
    })
  });
};

HostCSVDownloadButton.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostCSVDownloadButton",
  "props": {
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "slug": {
              "name": "string",
              "required": true
            }
          }
        }
      },
      "required": false
    },
    "dateInterval": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "legacyId": {
            "name": "number",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostCSVDownloadButton);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 70407:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ reports_section_HostFeesSection)
});

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
// EXTERNAL MODULE: external "@styled-icons/fa-solid/ChevronDown/ChevronDown"
var ChevronDown_ = __webpack_require__(86613);
// EXTERNAL MODULE: external "@styled-icons/fa-solid/ChevronUp/ChevronUp"
var ChevronUp_ = __webpack_require__(63486);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: ./lib/currency-utils.js
var currency_utils = __webpack_require__(17632);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/Image.js
var Image = __webpack_require__(56562);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/StyledLinkButton.js
var StyledLinkButton = __webpack_require__(67001);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "lodash/groupBy"
var groupBy_ = __webpack_require__(98492);
var groupBy_default = /*#__PURE__*/__webpack_require__.n(groupBy_);
// EXTERNAL MODULE: external "lodash/get"
var get_ = __webpack_require__(1712);
var get_default = /*#__PURE__*/__webpack_require__.n(get_);
// EXTERNAL MODULE: external "@apollo/client"
var client_ = __webpack_require__(29114);
// EXTERNAL MODULE: ./node_modules/next/dynamic.js
var dynamic = __webpack_require__(5152);
var dynamic_default = /*#__PURE__*/__webpack_require__.n(dynamic);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
// EXTERNAL MODULE: ./lib/i18n/transaction.js
var transaction = __webpack_require__(3025);
// EXTERNAL MODULE: ./components/ChartWrapper.js
var ChartWrapper = __webpack_require__(91739);
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: ./components/host-dashboard/reports-section/helpers.js
var reports_section_helpers = __webpack_require__(17358);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/HostFeesSectionHistorical.js



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












 // Dynamic imports



const Chart = dynamic_default()(() => Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 28403, 23)), {
  ssr: false,
  loadableGenerated: {
    modules: ["../components/host-dashboard/reports-section/HostFeesSectionHistorical.js -> " + 'react-apexcharts']
  }
});
const hostFeeSectionTimeSeriesQuery = client_.gql`
  query HostFeeSectionTimeSeries($hostSlug: String!, $dateFrom: DateTime!, $dateTo: DateTime!) {
    host(slug: $hostSlug) {
      id
      legacyId
      createdAt
      currency
      hostMetricsTimeSeries(dateFrom: $dateFrom, dateTo: $dateTo, timeUnit: MONTH) {
        hostFees {
          nodes {
            date
            amount {
              value
              valueInCents
              currency
            }
          }
        }
        hostFeeShare {
          nodes {
            date
            settlementStatus
            amount {
              value
              valueInCents
              currency
            }
          }
        }
      }
    }
  }
`;

const getChartOptions = (intl, hostCurrency) => ({
  chart: {
    id: 'chart-host-report-fees',
    stacked: true
  },
  legend: {
    show: true,
    showForSingleSeries: true,
    horizontalAlign: 'left',
    fontWeight: 'bold',
    fontSize: '12px',
    markers: {
      width: 16,
      height: 16
    }
  },
  dataLabels: {
    enabled: false
  },
  grid: {
    raw: {
      opacity: 0
    },
    column: {
      opacity: 0
    },
    xaxis: {
      lines: {
        show: true
      }
    },
    yaxis: {
      lines: {
        show: false
      }
    }
  },
  plotOptions: {
    bar: {
      columnWidth: '50%'
    }
  },
  colors: ['#46347F', '#95DDF4', '#F5C451', '#0EA755'],
  // TODO(HostReport): Use host primary colors
  xaxis: {
    categories: [...new Array(12)].map((_, idx) => `${intl.formatDate(new Date(0, idx), {
      month: 'short'
    }).toUpperCase()}`)
  },
  yaxis: {
    labels: {
      minWidth: 38,
      formatter: value => (0,reports_section_helpers/* formatAmountForLegend */.zz)(value, hostCurrency, intl.locale)
    }
  },
  tooltip: {
    y: {
      formatter: value => (0,reports_section_helpers/* formatAmountForLegend */.zz)(value, hostCurrency, intl.locale, false) // Never use compact notation in tooltip

    }
  }
});

const SERIES_NAMES = (0,external_react_intl_.defineMessages)({
  hostRevenue: {
    id: "4kaWYR",
    defaultMessage: [{
      "type": 0,
      "value": "Net Host Fees"
    }]
  },
  hostFeeShare: {
    id: "Transaction.kind.HOST_FEE_SHARE",
    defaultMessage: [{
      "type": 0,
      "value": "Platform share"
    }]
  }
});

const getHostFeesWithoutShare = (hostFeeNodes, hostFeeShareNodes) => {
  const totalHostFeeSharePerMonthInCents = hostFeeShareNodes.reduce((result, node) => {
    const monthKey = new Date(node.date).getMonth();
    result[monthKey] = (result[monthKey] || 0) + node.amount.valueInCents;
    return result;
  }, {});
  return hostFeeNodes.map(node => {
    const monthKey = new Date(node.date).getMonth();

    if (totalHostFeeSharePerMonthInCents[monthKey]) {
      const valueInCents = node.amount.valueInCents - totalHostFeeSharePerMonthInCents[monthKey];
      return _objectSpread(_objectSpread({}, node), {}, {
        amount: _objectSpread(_objectSpread({}, node.amount), {}, {
          valueInCents,
          value: valueInCents / 100
        })
      });
    } else {
      return node;
    }
  });
};

const getSeriesFromData = (intl, timeSeries) => {
  const dataToSeries = data => {
    const series = new Array(12).fill(0); // = 12 months

    data?.forEach(({
      date,
      amount
    }) => series[new Date(date).getMonth()] = amount.value);
    return series;
  };

  const hostFeeNodes = get_default()(timeSeries, 'hostFees.nodes', []);

  const hostFeeShareNodes = get_default()(timeSeries, 'hostFeeShare.nodes', []);

  return [{
    name: intl.formatMessage(SERIES_NAMES.hostRevenue),
    data: dataToSeries(getHostFeesWithoutShare(hostFeeNodes, hostFeeShareNodes))
  }, ...Object.entries(groupBy_default()(hostFeeShareNodes, 'settlementStatus')).map(([status, nodes]) => ({
    name: `${intl.formatMessage(SERIES_NAMES.hostFeeShare)} (${(0,transaction/* i18nTransactionSettlementStatus */.pK)(intl, status)})`,
    data: dataToSeries(nodes)
  }))];
};

const getQueryVariables = (hostSlug, year) => {
  return {
    hostSlug,
    dateFrom: `${year}-01-01T00:00:00Z`,
    dateTo: `${year}-12-31T23:59:59Z`
  };
};

const HostFeesSectionHistorical = ({
  hostSlug
}) => {
  const intl = (0,external_react_intl_.useIntl)();
  const {
    0: selectedYear,
    1: setSelectedYear
  } = (0,external_react_.useState)(() => new Date().getFullYear());
  const variables = getQueryVariables(hostSlug, selectedYear);
  const {
    loading,
    data
  } = (0,client_.useQuery)(hostFeeSectionTimeSeriesQuery, {
    variables,
    context: helpers/* API_V2_CONTEXT */.T
  });
  const host = data?.host;
  const timeSeries = data?.host?.hostMetricsTimeSeries;
  const series = (0,external_react_.useMemo)(() => getSeriesFromData(intl, timeSeries), [timeSeries]);
  const yearsOptions = (0,external_react_.useMemo)(() => (0,reports_section_helpers/* getActiveYearsOptions */.i8)(host), [host]);
  const chartOptions = (0,external_react_.useMemo)(() => getChartOptions(intl, host?.currency), [host?.currency]);
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
    py: 3,
    children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      px: 2,
      mb: 2,
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text.P, {
        fontSize: "11px",
        fontWeight: "700",
        mr: 3,
        textTransform: "uppercase",
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "HostFeesSection.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Host Fees per year"
          }]
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(StyledSelectFilter/* StyledSelectFilter */.V, {
        inputId: "host-report-host-fees-year-select",
        options: yearsOptions,
        defaultValue: {
          value: selectedYear,
          label: selectedYear
        },
        onChange: ({
          value
        }) => setSelectedYear(value),
        isSearchable: false,
        minWidth: 100,
        isLoading: loading,
        disabled: loading
      })]
    }), loading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      height: 250
    }) : /*#__PURE__*/jsx_runtime_.jsx(ChartWrapper/* ChartWrapper */.h, {
      children: /*#__PURE__*/jsx_runtime_.jsx(Chart, {
        type: "bar",
        width: "100%",
        height: "250px",
        options: chartOptions,
        series: series
      })
    })]
  });
};
HostFeesSectionHistorical.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostFeesSectionHistorical",
  "props": {
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/HostFeesSection.js















const getValuesToDisplay = (isLoading, host, locale) => {
  if (isLoading) {
    const loadingComponent = /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      height: 21,
      width: 120
    });

    return {
      fees: loadingComponent,
      netHostFee: loadingComponent,
      sharedRevenue: loadingComponent
    };
  } else {
    const {
      hostFees,
      hostFeeShare
    } = host.hostMetrics;
    return {
      fees: (0,currency_utils/* formatCurrency */.xG)(hostFees.valueInCents, host.currency, {
        locale
      }),
      sharedRevenue: (0,currency_utils/* formatCurrency */.xG)(hostFeeShare.valueInCents, host.currency, {
        locale
      }),
      netHostFee: (0,currency_utils/* formatCurrency */.xG)(hostFees.valueInCents - hostFeeShare.valueInCents, host.currency, {
        locale
      })
    };
  }
};

const HostFeesSection = ({
  host,
  collectives,
  isLoading
}) => {
  const {
    0: showHostFeeChart,
    1: setShowHostFeeChart
  } = (0,external_react_.useState)(false);
  const {
    locale
  } = (0,external_react_intl_.useIntl)();
  const valuesToDisplay = getValuesToDisplay(isLoading, host, locale);
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)((external_react_default()).Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/jsx_runtime_.jsx(Image/* default */.Z, {
              width: 14,
              height: 7,
              src: "/static/images/host-fees-timeline.svg"
            }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "Kw8wV2",
                defaultMessage: [{
                  "type": 0,
                  "value": "Total Collected"
                }]
              })
            })]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.fees
        }), /*#__PURE__*/jsx_runtime_.jsx(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "suKNE1",
            defaultMessage: [{
              "type": 0,
              "value": "Host Fees charged to Collectives during this time period (these are added continuously to your budget)."
            }]
          })
        })]
      }), /*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
        display: ['none', 'none', 'flex'],
        borderLeft: "1px solid",
        borderColor: "primary.800",
        height: "88px",
        mt: "39px"
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/jsx_runtime_.jsx(Image/* default */.Z, {
              width: 9.42,
              height: 12,
              mr: 10,
              src: "/static/images/host-fees-oc.svg"
            }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "zMq41p",
                defaultMessage: [{
                  "type": 0,
                  "value": "Platform Share"
                }]
              })
            })]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.sharedRevenue
        }), /*#__PURE__*/jsx_runtime_.jsx(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "oEyZeo",
            defaultMessage: [{
              "type": 0,
              "value": "Portion of Host Fees paid to Open Collective (which are either paid as you go, or charged monthly through settlement expenses, depending on the payment method.)"
            }]
          })
        })]
      }), /*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
        display: ['none', 'none', 'flex'],
        borderLeft: "1px solid",
        borderColor: "primary.800",
        height: "88px",
        mt: "39px"
      }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/jsx_runtime_.jsx(Image/* default */.Z, {
              width: 6.5,
              height: 12,
              mr: 10,
              src: "/static/images/host-fees-money-sign.svg"
            }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
                id: "4kaWYR",
                defaultMessage: [{
                  "type": 0,
                  "value": "Net Host Fees"
                }]
              })
            })]
          })
        }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.netHostFee
        }), /*#__PURE__*/jsx_runtime_.jsx(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
            id: "fOMB1g",
            defaultMessage: [{
              "type": 0,
              "value": "Net amount of Host Fees retained by your Organization after removing the Platform Share."
            }]
          })
        })]
      })]
    }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      my: 3,
      justifyContent: "space-between",
      children: /*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
        px: 2,
        textAlign: "right",
        children: /*#__PURE__*/jsx_runtime_.jsx(StyledLinkButton/* default */.Z, {
          asLink: true,
          onClick: () => setShowHostFeeChart(!showHostFeeChart),
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text.P, {
            fontSize: "12px",
            fontWeight: "400",
            mt: "16px",
            children: [/*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "BWoXXL",
              defaultMessage: [{
                "type": 0,
                "value": "See historic"
              }]
            }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
              pl: "8px",
              children: showHostFeeChart ? /*#__PURE__*/jsx_runtime_.jsx(ChevronUp_.ChevronUp, {
                size: 12
              }) : /*#__PURE__*/jsx_runtime_.jsx(ChevronDown_.ChevronDown, {
                fontVariant: "solid",
                size: 12
              })
            })]
          })
        })
      })
    }), showHostFeeChart && isLoading && /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      height: 250
    }), showHostFeeChart && !isLoading && /*#__PURE__*/jsx_runtime_.jsx(HostFeesSectionHistorical, {
      collectives: collectives,
      hostSlug: host.slug
    })]
  });
};

HostFeesSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostFeesSection",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "hostMetrics": {
            "name": "shape",
            "value": {
              "hostFees": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": true
                  }
                },
                "required": true
              },
              "hostFeeShare": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": true
                  }
                },
                "required": true
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const reports_section_HostFeesSection = (HostFeesSection);

/***/ }),

/***/ 8309:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25675);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69078);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27596);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(29242);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }












const AMOUNT_STYLES = _objectSpread(_objectSpread({}, _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__/* .DEFAULT_AMOUNT_STYLES */ .a), {}, {
  fontSize: '18px',
  lineHeight: '26px'
});

const PlatformTipsCollected = ({
  host,
  isLoading
}) => {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
    p: 24,
    bg: "blue.50",
    border: "1px solid",
    borderColor: "blue.700",
    borderRadius: "8px",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
      alignItems: "center",
      my: 2,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx((next_image__WEBPACK_IMPORTED_MODULE_1___default()), {
        src: "/static/images/opencollective-icon.png",
        width: 14,
        height: 14,
        alt: ""
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
        textTransform: "uppercase",
        ml: 2,
        fontSize: "12px",
        fontWeight: "500",
        color: "black.700",
        letterSpacing: "0.06em",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "PlatformTipsCollected",
          defaultMessage: [{
            "type": 0,
            "value": "Platform Tips"
          }]
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
      mt: 20,
      mb: 10,
      children: isLoading ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          height: 26,
          maxWidth: 200
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, {
          mx: 2,
          children: ' / '
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
          height: 26,
          maxWidth: 200
        })]
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
        fontSize: "14px",
        color: "black.700",
        textTransform: "capitalize",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "AmountCollected",
          defaultMessage: [{
            "type": 1,
            "value": "amount"
          }, {
            "type": 0,
            "value": " collected"
          }],
          values: {
            amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
              amount: host.hostMetrics.platformTips.valueInCents,
              currency: host.currency,
              amountStyles: AMOUNT_STYLES
            })
          }
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, {
          mx: 2,
          children: ' / '
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "UKIPT2",
          defaultMessage: [{
            "type": 1,
            "value": "amount"
          }, {
            "type": 0,
            "value": " owed to "
          }, {
            "type": 1,
            "value": "account"
          }],
          values: {
            account: 'Open Collective',
            amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
              amount: host.hostMetrics.pendingPlatformTips.valueInCents,
              currency: host.currency,
              amountStyles: AMOUNT_STYLES
            })
          }
        })]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
      fontSize: "12px",
      lineHeight: "18px",
      color: "black.700",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "Host.PlatformTip.description",
        defaultMessage: [{
          "type": 0,
          "value": "Contributors optionally add Platform Tips to transactions. Amounts owed to Open Collective that have been deposited into the Host's bank account are charged as part of monthly Settlement Expenses."
        }]
      })
    })]
  });
};

PlatformTipsCollected.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PlatformTipsCollected",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "hostMetrics": {
            "name": "shape",
            "value": {
              "platformTips": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              },
              "pendingPlatformTips": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PlatformTipsCollected);

/***/ }),

/***/ 98984:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ reports_section_TotalMoneyManagedSection)
});

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(16689);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);
// EXTERNAL MODULE: external "@styled-icons/fa-solid/ChevronDown/ChevronDown"
var ChevronDown_ = __webpack_require__(86613);
// EXTERNAL MODULE: external "@styled-icons/fa-solid/ChevronUp/ChevronUp"
var ChevronUp_ = __webpack_require__(63486);
// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(13126);
// EXTERNAL MODULE: ./lib/currency-utils.js
var currency_utils = __webpack_require__(17632);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/ProportionalAreaChart.js
var ProportionalAreaChart = __webpack_require__(69486);
// EXTERNAL MODULE: ./components/StyledLinkButton.js
var StyledLinkButton = __webpack_require__(67001);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: external "lodash/get"
var get_ = __webpack_require__(1712);
var get_default = /*#__PURE__*/__webpack_require__.n(get_);
// EXTERNAL MODULE: external "@apollo/client"
var client_ = __webpack_require__(29114);
// EXTERNAL MODULE: ./node_modules/next/dynamic.js
var dynamic = __webpack_require__(5152);
var dynamic_default = /*#__PURE__*/__webpack_require__.n(dynamic);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
// EXTERNAL MODULE: ./components/ChartWrapper.js
var ChartWrapper = __webpack_require__(91739);
// EXTERNAL MODULE: ./components/ContainerOverlay.js
var ContainerOverlay = __webpack_require__(3798);
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: ./components/StyledSpinner.tsx
var StyledSpinner = __webpack_require__(40486);
// EXTERNAL MODULE: ./components/host-dashboard/reports-section/helpers.js
var reports_section_helpers = __webpack_require__(17358);
// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(20997);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/TotalMoneyManagedHistorical.js












 // Dynamic imports



const Chart = dynamic_default()(() => Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 28403, 23)), {
  ssr: false,
  loadableGenerated: {
    modules: ["../components/host-dashboard/reports-section/TotalMoneyManagedHistorical.js -> " + 'react-apexcharts']
  }
});
const totalMoneyManagedQuery = client_.gql`
  query TotalMoneyManagedQuery(
    $hostSlug: String!
    $dateFrom: DateTime!
    $account: [AccountReferenceInput!]
    $dateTo: DateTime!
  ) {
    host(slug: $hostSlug) {
      id
      hostMetricsTimeSeries(dateFrom: $dateFrom, dateTo: $dateTo, account: $account, timeUnit: MONTH) {
        totalMoneyManaged {
          nodes {
            date
            amount {
              value
              valueInCents
              currency
            }
          }
        }
      }
    }
  }
`;

const getQueryVariables = (hostSlug, year, collectives) => {
  return {
    hostSlug,
    account: collectives?.map(collective => ({
      legacyId: collective.legacyId
    })),
    dateFrom: `${year}-01-01T00:00:00Z`,
    dateTo: `${year}-12-31T23:59:59Z`
  };
};

const getSeriesFromData = (intl, timeSeries, year) => {
  const currentYear = new Date().getUTCFullYear();
  const currentMonth = new Date().getUTCMonth();

  const dataToSeries = data => {
    let series; // For previous years we show all the months in the chart

    if (year < currentYear) {
      series = new Array(12).fill(0); // = 12 months
      // For current year we only show upto the current month (as no data is available for future)
    } else {
      series = new Array(currentMonth + 1).fill(0); // = upto current month
    }

    data?.forEach(({
      date,
      amount
    }) => series[new Date(date).getUTCMonth()] = amount.value);
    return series;
  };

  const totalMoneyManagedProgressNodes = get_default()(timeSeries, 'totalMoneyManaged.nodes', []);

  return [{
    name: intl.formatMessage({
      id: "MzXqKG",
      defaultMessage: [{
        "type": 0,
        "value": "Total Managed Amount"
      }]
    }),
    data: dataToSeries(totalMoneyManagedProgressNodes)
  }];
};

const getChartOptions = (intl, hostCurrency, isCompactNotation) => ({
  chart: {
    id: 'chart-host-report-money-managed'
  },
  stroke: {
    curve: 'straight',
    width: 2
  },
  markers: {
    size: 4
  },
  colors: ['#46347F'],
  xaxis: {
    categories: [...new Array(12)].map((_, idx) => `${intl.formatDate(new Date(0, idx), {
      month: 'short'
    }).toUpperCase()}`)
  },
  yaxis: {
    labels: {
      minWidth: 38,
      formatter: value => (0,reports_section_helpers/* formatAmountForLegend */.zz)(value, hostCurrency, intl.locale, isCompactNotation)
    }
  },
  tooltip: {
    y: {
      formatter: value => (0,reports_section_helpers/* formatAmountForLegend */.zz)(value, hostCurrency, intl.locale, false) // Never use compact notation in tooltip

    }
  }
});

const TotalMoneyManagedHistorical = ({
  host,
  collectives
}) => {
  const intl = (0,external_react_intl_.useIntl)();
  const yearsOptions = (0,external_react_.useMemo)(() => (0,reports_section_helpers/* getActiveYearsOptions */.i8)(host), [null]);
  const {
    0: selectedYear,
    1: setSelectedYear
  } = (0,external_react_.useState)(() => new Date().getFullYear());
  const variables = getQueryVariables(host.slug, selectedYear, collectives);
  const {
    loading,
    data,
    previousData
  } = (0,client_.useQuery)(totalMoneyManagedQuery, {
    variables,
    context: helpers/* API_V2_CONTEXT */.T
  });
  const hostTimeSeriesData = loading && !data ? previousData?.host : data?.host;
  const timeSeries = hostTimeSeriesData?.hostMetricsTimeSeries;
  const series = external_react_default().useMemo(() => getSeriesFromData(intl, timeSeries, selectedYear), [timeSeries]);
  const isCompactNotation = (0,reports_section_helpers/* getMinMaxDifference */._h)(series[0].data) >= 10000;
  const chartOptions = (0,external_react_.useMemo)(() => getChartOptions(intl, host.currency, isCompactNotation), [host.currency, isCompactNotation]);
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Box */.xu, {
    py: 3,
    children: [/*#__PURE__*/(0,jsx_runtime_.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      px: 2,
      mb: 2,
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text.P, {
        fontSize: "11px",
        fontWeight: "700",
        mr: 3,
        textTransform: "uppercase",
        children: /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
          id: "hx2hjA",
          defaultMessage: [{
            "type": 0,
            "value": "Total money managed per year"
          }]
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(StyledSelectFilter/* StyledSelectFilter */.V, {
        inputId: "host-report-money-managed-year-select",
        options: yearsOptions,
        defaultValue: {
          value: selectedYear,
          label: selectedYear
        },
        onChange: ({
          value
        }) => setSelectedYear(value),
        isSearchable: false,
        minWidth: 100
      })]
    }), /*#__PURE__*/(0,jsx_runtime_.jsxs)(ChartWrapper/* ChartWrapper */.h, {
      children: [loading && /*#__PURE__*/jsx_runtime_.jsx(ContainerOverlay/* default */.Z, {
        children: /*#__PURE__*/jsx_runtime_.jsx(StyledSpinner/* default */.Z, {
          size: 64
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(Chart, {
        type: "line",
        width: "100%",
        height: "250px",
        options: chartOptions,
        series: series
      })]
    })]
  });
};

TotalMoneyManagedHistorical.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TotalMoneyManagedHistorical",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": true
          },
          "hostMetrics": {
            "name": "object",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const reports_section_TotalMoneyManagedHistorical = (TotalMoneyManagedHistorical);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/TotalMoneyManagedSection.js















const getMoneyManagedChartAreas = (hostBalance, collectivesBalance, hostCurrency, isLoading, locale) => {
  return [{
    key: 'organization',
    color: 'primary.800',
    label: isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      width: 195,
      height: 16
    }) : /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      color: "black.700",
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
        fontWeight: "bold",
        children: (0,currency_utils/* formatCurrency */.xG)(hostBalance, hostCurrency, {
          locale
        })
      }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
        id: "TotalMoneyManagedSection.hostBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Host Organization balance"
        }]
      })]
    })
  }, {
    key: 'my-collectives',
    color: 'primary.500',
    label: isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      width: 165,
      height: 16
    }) : /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
        fontWeight: "700",
        children: (0,currency_utils/* formatCurrency */.xG)(collectivesBalance, hostCurrency, {
          locale
        })
      }), ' ', /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
        id: "TotalMoneyManagedSection.collectivesBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Collectives balance"
        }]
      })]
    })
  }];
};

const TotalMoneyManagedSection = ({
  host,
  collectives,
  isLoading
}) => {
  const {
    locale
  } = (0,external_react_intl_.useIntl)();
  const {
    0: showMoneyManagedChart,
    1: setShowMoneyManagedChart
  } = (0,external_react_.useState)(false); // Compute some general stats

  const hostMetrics = host?.hostMetrics;
  const hostBalance = host?.stats.balance.valueInCents;
  let collectivesBalance;

  if (!collectives || collectives.length === 0) {
    collectivesBalance = hostMetrics?.totalMoneyManaged.valueInCents - hostBalance;
  } else {
    collectivesBalance = hostMetrics?.totalMoneyManaged.valueInCents;
  } // Generate graph data (memoized for performances)


  const chartArgs = [hostBalance, collectivesBalance, host?.currency, isLoading, locale];
  const chartAreas = external_react_default().useMemo(() => getMoneyManagedChartAreas(...chartArgs), chartArgs);
  return /*#__PURE__*/(0,jsx_runtime_.jsxs)("div", {
    children: [(!collectives || collectives.length === 0) && /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      my: 14,
      alignItems: "baseline",
      children: isLoading ? /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
        height: 21,
        width: 125
      }) : /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
        fontSize: 18,
        fontWeight: "500",
        children: (0,currency_utils/* formatCurrency */.xG)(hostMetrics.totalMoneyManaged.valueInCents, host.currency, {
          locale
        })
      })
    }), /*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
      mt: 18,
      mb: 12,
      children: /*#__PURE__*/jsx_runtime_.jsx(ProportionalAreaChart/* default */.Z, {
        areas: chartAreas
      })
    }), /*#__PURE__*/jsx_runtime_.jsx(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      justifyContent: "space-between",
      children: /*#__PURE__*/jsx_runtime_.jsx(Container/* default */.Z, {
        px: 2,
        textAlign: "right",
        children: /*#__PURE__*/jsx_runtime_.jsx(StyledLinkButton/* default */.Z, {
          asLink: true,
          onClick: () => setShowMoneyManagedChart(!showMoneyManagedChart),
          children: /*#__PURE__*/(0,jsx_runtime_.jsxs)(Text.P, {
            fontSize: "12px",
            fontWeight: "400",
            mt: "16px",
            children: [/*#__PURE__*/jsx_runtime_.jsx(external_react_intl_.FormattedMessage, {
              id: "BWoXXL",
              defaultMessage: [{
                "type": 0,
                "value": "See historic"
              }]
            }), /*#__PURE__*/jsx_runtime_.jsx(Text/* Span */.Dr, {
              pl: "8px",
              children: showMoneyManagedChart ? /*#__PURE__*/jsx_runtime_.jsx(ChevronUp_.ChevronUp, {
                size: 12
              }) : /*#__PURE__*/jsx_runtime_.jsx(ChevronDown_.ChevronDown, {
                fontVariant: "solid",
                size: 12
              })
            })]
          })
        })
      })
    }), isLoading && /*#__PURE__*/jsx_runtime_.jsx(LoadingPlaceholder/* default */.Z, {
      height: 250
    }), !isLoading && showMoneyManagedChart && /*#__PURE__*/jsx_runtime_.jsx(reports_section_TotalMoneyManagedHistorical, {
      host: host,
      collectives: collectives
    })]
  });
};

TotalMoneyManagedSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TotalMoneyManagedSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": true
          },
          "hostMetrics": {
            "name": "object",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const reports_section_TotalMoneyManagedSection = (TotalMoneyManagedSection);

/***/ }),

/***/ 97468:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1635);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5152);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_charts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(26043);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17632);
/* harmony import */ var _lib_i18n_transaction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3025);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(29242);
/* harmony import */ var _ProportionalAreaChart__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69486);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90998);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(17358);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);












 // Dynamic imports



const Chart = next_dynamic__WEBPACK_IMPORTED_MODULE_2___default()(() => Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 28403, 23)), {
  ssr: false,
  loadableGenerated: {
    modules: ["../components/host-dashboard/reports-section/TransactionsOverviewSection.js -> " + 'react-apexcharts']
  }
});
const StyledBox = styled_components__WEBPACK_IMPORTED_MODULE_4___default()(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu).withConfig({
  displayName: "TransactionsOverviewSection__StyledBox",
  componentId: "sc-1f5ws6m-0"
})([".apexcharts-toolbar{z-index:0;}"]);

const getChartOptions = (intl, timeUnit, hostCurrency, series) => {
  return {
    chart: {
      id: 'chart-transactions-overview'
    },
    legend: {
      show: true,
      horizontalAlign: 'left'
    },
    colors: ['#29CC75', '#F55882'],
    grid: {
      xaxis: {
        lines: {
          show: true
        }
      },
      yaxis: {
        lines: {
          show: false
        }
      }
    },
    stroke: {
      curve: 'straight',
      width: 1.5
    },
    dataLabels: {
      enabled: false
    },
    xaxis: {
      labels: {
        formatter: function (value) {
          // Show data aggregated yearly
          if (timeUnit === 'YEAR') {
            return dayjs__WEBPACK_IMPORTED_MODULE_1___default()(value).utc().year(); // Show data aggregated monthly
          } else if (timeUnit === 'MONTH') {
            return dayjs__WEBPACK_IMPORTED_MODULE_1___default()(value).utc().format('MMM-YYYY'); // Show data aggregated by week or day
          } else if (timeUnit === 'WEEK' || timeUnit === 'DAY') {
            return dayjs__WEBPACK_IMPORTED_MODULE_1___default()(value).utc().format('DD-MMM-YYYY');
          }
        }
      }
    },
    yaxis: {
      labels: {
        formatter: value => (0,_helpers__WEBPACK_IMPORTED_MODULE_12__/* .formatAmountForLegend */ .zz)(value, hostCurrency, intl.locale)
      }
    },
    tooltip: {
      y: {
        formatter: (value, {
          seriesIndex,
          dataPointIndex
        }) => {
          const formatAmount = amount => (0,_helpers__WEBPACK_IMPORTED_MODULE_12__/* .formatAmountForLegend */ .zz)(amount, hostCurrency, intl.locale, false); // Never use compact notation in tooltip


          const dataPoint = series[seriesIndex].data[dataPointIndex];

          if (dataPoint.kinds && Object.keys(dataPoint.kinds).length > 1) {
            const formatKindAmount = ([kind, amount]) => `${formatAmount(amount)} ${(0,_lib_i18n_transaction__WEBPACK_IMPORTED_MODULE_7__/* .i18nTransactionKind */ .w$)(intl, kind)}`;

            const amountsByKind = Object.entries(dataPoint.kinds).map(formatKindAmount).join(', ');
            const prettyKindAmounts = `<small style="font-weight: normal; text-transform: lowercase;">(${amountsByKind})</small>`;
            return `${formatAmount(value)} ${prettyKindAmounts}`;
          } else {
            return formatAmount(value);
          }
        }
      }
    }
  };
};

const getTransactionsAreaChartData = (host, locale) => {
  if (!host) {
    return [];
  }

  const currency = host.currency;
  const {
    contributionsCount,
    dailyAverageIncomeAmount
  } = host.contributionStats;
  const {
    expensesCount,
    dailyAverageAmount
  } = host.expenseStats;
  return [{
    key: 'contributions',
    percentage: 0.5,
    color: 'green.500',
    label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "bBBcZ8",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " contribution"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " contributions"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: contributionsCount
        }
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "tmShv9",
        defaultMessage: [{
          "type": 0,
          "value": "Daily average: "
        }, {
          "type": 1,
          "value": "amount"
        }],
        values: {
          amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("strong", {
            children: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__/* .formatCurrency */ .xG)(dailyAverageIncomeAmount.valueInCents, currency, {
              locale
            })
          })
        }
      })]
    })
  }, {
    key: 'expenses',
    percentage: 0.5,
    color: 'red.500',
    label: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_11__.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "kygWtR",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expense"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expenses"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: expensesCount
        }
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Text__WEBPACK_IMPORTED_MODULE_11__/* .Span */ .Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "tmShv9",
        defaultMessage: [{
          "type": 0,
          "value": "Daily average: "
        }, {
          "type": 1,
          "value": "amount"
        }],
        values: {
          amount: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx("strong", {
            children: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_6__/* .formatCurrency */ .xG)(dailyAverageAmount.valueInCents, currency, {
              locale
            })
          })
        }
      })]
    })
  }];
};

const getTransactionsBreakdownChartData = host => {
  if (!host) {
    return [];
  }

  const contributionStats = host?.contributionStats;
  const expenseStats = host?.expenseStats;
  const {
    recurringContributionsCount,
    oneTimeContributionsCount
  } = contributionStats;
  const {
    invoicesCount,
    reimbursementsCount,
    grantsCount
  } = expenseStats;
  const hasGrants = grantsCount > 0;
  const areas = [{
    key: 'one-time',
    percentage: 0.25,
    color: 'green.400',
    legend: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "xKaQkm",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " One-time"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " One-time"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: oneTimeContributionsCount
      }
    })
  }, {
    key: 'recurring',
    percentage: 0.25,
    color: 'green.300',
    legend: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "9DioA1",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Recurring"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Recurring"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: recurringContributionsCount
      }
    })
  }, {
    key: 'invoices',
    percentage: hasGrants ? 0.166 : 0.25,
    color: 'red.600',
    legend: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "U7psWO",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Invoice"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Invoices"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: invoicesCount
      }
    })
  }, {
    key: 'receipts',
    percentage: hasGrants ? 0.166 : 0.25,
    color: 'red.400',
    legend: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "jo45s2",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Reimbursement"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Reimbursements"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: reimbursementsCount
      }
    })
  }]; // Grants are only enabled for a few hosts/collectives, we only display the metric if active

  if (hasGrants) {
    areas.push({
      key: 'grants',
      percentage: 0.166,
      color: 'red.300',
      legend: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "ERs/eC",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " Grant"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " Grants"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: grantsCount
        }
      })
    });
  }

  return areas;
};
/**
 * Transforms a list of datapoints like [{ date, kind, amount }] into a series like:
 * `[{ x: date, y: 3000, kinds: { ADDED_FUNDS: 2000, CONTRIBUTION: 1000 } }]`
 */


const getSeriesDataFromTotalReceivedNodes = nodes => {
  const keyedData = {};
  nodes.forEach(({
    date,
    amount,
    kind
  }) => {
    if (!keyedData[date]) {
      keyedData[date] = {
        x: date,
        y: 0,
        kinds: {}
      };
    }

    keyedData[date].y += amount.value;
    keyedData[date]['kinds'][kind] = amount.value;
  });
  return Object.values(keyedData);
};

const getSeries = (host, intl) => {
  const getNodes = timeSeries => host?.hostMetricsTimeSeries?.[timeSeries]?.nodes || [];

  const series = [{
    name: intl.formatMessage({
      id: "Contributions",
      defaultMessage: [{
        "type": 0,
        "value": "Contributions"
      }]
    }),
    data: getSeriesDataFromTotalReceivedNodes(getNodes('totalReceived'))
  }, {
    name: intl.formatMessage({
      id: "Expenses",
      defaultMessage: [{
        "type": 0,
        "value": "Expenses"
      }]
    }),
    data: getNodes('totalSpent').map(({
      date,
      amount
    }) => ({
      x: date,
      y: Math.abs(amount.value)
    }))
  }];
  (0,_lib_charts__WEBPACK_IMPORTED_MODULE_5__/* .alignSeries */ .yc)(series);
  return series;
};

const TransactionsOverviewSection = ({
  host,
  isLoading
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const {
    locale
  } = intl;
  const timeUnit = host?.hostMetricsTimeSeries?.timeUnit;
  const series = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => getSeries(host, intl), [host]);
  const areaChartData = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => getTransactionsAreaChartData(host, locale), [host, locale]);
  const transactionBreakdownChart = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => getTransactionsBreakdownChartData(host), [host]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
      mt: 18,
      mb: 12,
      children: isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        height: "98px",
        borderRadius: "8px"
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div", {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_ProportionalAreaChart__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          areas: areaChartData,
          borderRadius: "6px 6px 0 0"
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_ProportionalAreaChart__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          areas: transactionBreakdownChart,
          borderRadius: "0 0 6px 6px"
        })]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(StyledBox, {
      mt: "24px",
      mb: "12px",
      children: isLoading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        height: 21,
        width: "100%",
        borderRadius: "8px"
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx(Chart, {
        type: "area",
        width: "100%",
        height: "250px",
        options: getChartOptions(intl, timeUnit, host.currency, series),
        series: series
      })
    })]
  });
};

TransactionsOverviewSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TransactionsOverviewSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "createdAt": {
            "name": "string",
            "required": false
          },
          "hostMetricsTimeSeries": {
            "name": "shape",
            "value": {
              "timeUnit": {
                "name": "string",
                "required": false
              },
              "totalReceived": {
                "name": "shape",
                "value": {
                  "nodes": {
                    "name": "shape",
                    "value": {
                      "date": {
                        "name": "string",
                        "required": false
                      },
                      "kind": {
                        "name": "string",
                        "required": false
                      },
                      "amount": {
                        "name": "shape",
                        "value": {
                          "valueInCents": {
                            "name": "number",
                            "required": false
                          }
                        },
                        "required": false
                      }
                    },
                    "required": false
                  }
                },
                "required": false
              },
              "totalSpent": {
                "name": "shape",
                "value": {
                  "nodes": {
                    "name": "shape",
                    "value": {
                      "date": {
                        "name": "string",
                        "required": false
                      },
                      "kind": {
                        "name": "string",
                        "required": false
                      },
                      "amount": {
                        "name": "shape",
                        "value": {
                          "valueInCents": {
                            "name": "number",
                            "required": false
                          }
                        },
                        "required": false
                      }
                    },
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TransactionsOverviewSection);

/***/ }),

/***/ 17358:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_h": () => (/* binding */ getMinMaxDifference),
/* harmony export */   "i8": () => (/* binding */ getActiveYearsOptions),
/* harmony export */   "zz": () => (/* binding */ formatAmountForLegend)
/* harmony export */ });
/* harmony import */ var lodash_min__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(604);
/* harmony import */ var lodash_min__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_min__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_max__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36625);
/* harmony import */ var lodash_max__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_max__WEBPACK_IMPORTED_MODULE_1__);


const getActiveYearsOptions = host => {
  const currentYear = new Date().getFullYear();
  const firstYear = host ? parseInt(host.createdAt.split('-')[0]) : currentYear;
  const activeYears = [...Array(currentYear - firstYear + 1).keys()].map(year => year + firstYear);
  return activeYears.map(year => ({
    value: year,
    label: year
  })).reverse();
};
const formatAmountForLegend = (value, currency, locale, isCompactNotation = true) => {
  return new Intl.NumberFormat(locale, {
    currency,
    style: 'currency',
    notation: isCompactNotation ? 'compact' : 'standard'
  }).format(value);
};
const getMinMaxDifference = numberArray => {
  const minVal = lodash_min__WEBPACK_IMPORTED_MODULE_0___default()(numberArray);

  const maxVal = lodash_max__WEBPACK_IMPORTED_MODULE_1___default()(numberArray);

  return maxVal - minVal;
};

/***/ }),

/***/ 56667:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _CustomStyledIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50333);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





const DismissIcon = props => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx(_CustomStyledIcon__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, _objectSpread(_objectSpread({
  width: "14",
  height: "14",
  viewBox: "0 0 14 14",
  fill: "none"
}, props), {}, {
  children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx("path", {
    d: "M0.586873 0.814096L0.678557 0.706658C1.01473 0.366575 1.54079 0.335658 1.91149 0.613908L2.01769 0.706658L6.99998 5.64487L12.0502 0.613882C12.42 0.23979 13.0195 0.23979 13.3893 0.613882C13.7591 0.987973 13.7591 1.5945 13.3893 1.96859L8.33954 7.00001L13.2831 11.9386C13.6193 12.2787 13.6499 12.8109 13.3748 13.1859L13.2831 13.2933C12.9469 13.6334 12.4209 13.6643 12.0502 13.3861L11.944 13.2933L6.99998 8.35515L1.94977 13.3861C1.57998 13.7602 0.98043 13.7602 0.610638 13.3861C0.240847 13.012 0.240847 12.4055 0.610638 12.0314L5.66042 7.00001L0.678557 2.06136C0.342382 1.72128 0.311821 1.18911 0.586873 0.814096Z",
    fill: "#141414"
  })
}));

DismissIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DismissIcon",
  "props": {
    "size": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DismissIcon);

/***/ }),

/***/ 55888:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "h": () => (/* binding */ AuthorizedApp)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_collective_lib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5700);
/* harmony import */ var _lib_dayjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82114);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(69078);
/* harmony import */ var _DateTime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(95370);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _LinkCollective__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97619);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_15__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_15__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


















const revokeAuthorizationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation RevokeAuthorization($id: String!) {
    revokeOAuthAuthorization(oAuthAuthorization: { id: $id }) {
      id
    }
  }
`;
const AuthorizedApp = ({
  authorization,
  onRevoke
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .useToasts */ .e1)();
  const [revokeAuthorization, {
    loading
  }] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(revokeAuthorizationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .API_V2_CONTEXT */ .T,
    onCompleted: onRevoke
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
    "data-cy": "connected-oauth-app",
    alignItems: "center",
    justifyContent: "space-between",
    maxWidth: 776,
    mb: 3,
    flexWrap: "wrap",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
      alignItems: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .ZP, {
        collective: authorization.application.account,
        size: 64
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
        ml: 24,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__.P, {
          fontWeight: "800",
          fontSize: "15px",
          children: authorization.application.name
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
          display: "flex",
          alignItems: "center",
          flexWrap: "wrap",
          fontSize: "12px",
          mt: 2,
          color: "black.700",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx("time", {
            dateTime: authorization.createdAt,
            title: (0,_DateTime__WEBPACK_IMPORTED_MODULE_9__/* .generateDateTitle */ .r)(intl, new Date(authorization.createdAt)),
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "Zi4M6s",
              defaultMessage: [{
                "type": 0,
                "value": "Connected on "
              }, {
                "type": 3,
                "value": "date",
                "style": "simple"
              }],
              values: {
                date: new Date()
              }
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Text__WEBPACK_IMPORTED_MODULE_14__/* .Span */ .Dr, {
            mr: 1,
            children: authorization.lastUsedAt && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {
              children: ["\xA0\u2022\xA0", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx("time", {
                dateTime: authorization.lastUsedAt,
                title: (0,_DateTime__WEBPACK_IMPORTED_MODULE_9__/* .generateDateTitle */ .r)(intl, new Date(authorization.lastUsedAt)),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "lihKZ1",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Last used "
                  }, {
                    "type": 1,
                    "value": "timeElapsed"
                  }],
                  values: {
                    timeElapsed: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedRelativeTime, {
                      value: (0,_lib_dayjs__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(authorization.lastUsedAt).diff((0,_lib_dayjs__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(), 'second'),
                      unit: "second",
                      updateIntervalInSeconds: 60
                    })
                  }
                })
              })]
            })
          }), !(0,_lib_collective_lib__WEBPACK_IMPORTED_MODULE_3__/* .isIndividualAccount */ .Sh)(authorization.account) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
            alignItems: "center",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
              id: "CreatedBy",
              defaultMessage: [{
                "type": 0,
                "value": "by "
              }, {
                "type": 1,
                "value": "name"
              }],
              values: {
                name: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
                  alignItems: "center",
                  ml: 2,
                  children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .ZP, {
                    collective: authorization.account,
                    size: 24,
                    mr: 1
                  }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                    as: _LinkCollective__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z,
                    collective: authorization.account,
                    color: "black.700"
                  })]
                })
              }
            })
          })]
        })]
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_Container__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      ml: 2,
      textAlign: "center",
      mt: 2,
      width: ['100%', 'auto'],
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        "data-cy": "oauth-app-revoke-btn",
        buttonSize: "small",
        buttonStyle: "dangerSecondary",
        isBorderless: true,
        loading: loading,
        onClick: async () => {
          try {
            await revokeAuthorization({
              variables: {
                id: authorization.id
              }
            });
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
              message: intl.formatMessage({
                id: "hfh76h",
                defaultMessage: [{
                  "type": 0,
                  "value": "Authorization for "
                }, {
                  "type": 1,
                  "value": "appName"
                }, {
                  "type": 0,
                  "value": " revoked"
                }]
              }, {
                appName: authorization.application.name
              })
            });
          } catch (e) {
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
              message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_5__/* .i18nGraphqlException */ .t2)(intl, e)
            });
          }
        },
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "KUFMiM",
          defaultMessage: [{
            "type": 0,
            "value": "Revoke access"
          }]
        })
      })
    })]
  });
};
AuthorizedApp.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AuthorizedApp",
  "props": {
    "authorization": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          },
          "lastUsedAt": {
            "name": "string",
            "required": true
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              },
              "name": {
                "name": "string",
                "required": true
              },
              "slug": {
                "name": "string",
                "required": true
              },
              "type": {
                "name": "string",
                "required": true
              },
              "imageUrl": {
                "name": "string",
                "required": false
              }
            },
            "required": true
          },
          "application": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              },
              "name": {
                "name": "string",
                "required": true
              },
              "account": {
                "name": "shape",
                "value": {
                  "id": {
                    "name": "string",
                    "required": true
                  },
                  "name": {
                    "name": "string",
                    "required": true
                  },
                  "slug": {
                    "name": "string",
                    "required": true
                  },
                  "type": {
                    "name": "string",
                    "required": true
                  },
                  "imageUrl": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    },
    "onRevoke": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 59313:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(75667);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(71792);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(93150);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(31330);
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97550);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_12__]);
([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__, _ToastProvider__WEBPACK_IMPORTED_MODULE_12__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
const _excluded = ["account", "onSuccess", "onClose"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

















const createApplicationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation CreateApplication($application: ApplicationCreateInput!) {
    createApplication(application: $application) {
      id
      name
    }
  }
`;
const LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '14px',
  lineHeight: '17px'
};
const INITIAL_VALUES = {
  name: '',
  description: '',
  redirectUri: ''
};

const CreateOauthApplicationModal = _ref => {
  let {
    account,
    onSuccess,
    onClose
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_12__/* .useToasts */ .e1)();
  const [createApplication] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(createApplicationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_5__/* .API_V2_CONTEXT */ .T,
    update: cache => {
      const accountCacheId = cache.identify(account);
      cache.modify({
        id: accountCacheId,
        fields: {
          oAuthApplications: (_, {
            DELETE
          }) => DELETE
        }
      });
    }
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
    width: "576px",
    onClose: onClose,
    "data-cy": "create-oauth-app-modal"
  }, props), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalHeader */ .xB, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "m6BfW0",
        defaultMessage: [{
          "type": 0,
          "value": "Create OAuth app"
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(formik__WEBPACK_IMPORTED_MODULE_2__.Formik, {
      initialValues: INITIAL_VALUES,
      validate: values => (0,_lib__WEBPACK_IMPORTED_MODULE_13__/* .validateOauthApplicationValues */ .F)(intl, values),
      onSubmit: async values => {
        try {
          const appInput = _objectSpread(_objectSpread({}, values), {}, {
            account: {
              id: account.id
            }
          });

          const result = await createApplication({
            variables: {
              application: appInput
            }
          });
          addToast({
            type: _ToastProvider__WEBPACK_IMPORTED_MODULE_12__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
            message: intl.formatMessage({
              id: "E8zg4M",
              defaultMessage: [{
                "type": 0,
                "value": "Application \""
              }, {
                "type": 1,
                "value": "name"
              }, {
                "type": 0,
                "value": "\" created"
              }]
            }, {
              name: result.data.createApplication.name
            })
          });
          onSuccess(result.data.createApplication, account);
        } catch (e) {
          addToast({
            type: _ToastProvider__WEBPACK_IMPORTED_MODULE_12__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
            variant: 'light',
            message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_4__/* .i18nGraphqlException */ .t2)(intl, e)
          });
        }
      },
      children: ({
        isSubmitting
      }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_2__.Form, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalBody */ .fe, {
          mt: "36px",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            name: "name",
            label: intl.formatMessage({
              id: "J7xOu/",
              defaultMessage: [{
                "type": 0,
                "value": "Name of the app"
              }]
            }),
            labelProps: LABEL_STYLES,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              placeholder: intl.formatMessage({
                id: "examples",
                defaultMessage: [{
                  "type": 0,
                  "value": "e.g., "
                }, {
                  "type": 1,
                  "value": "examples"
                }]
              }, {
                examples: 'Back Your Stack'
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            name: "description",
            label: intl.formatMessage({
              id: "Fields.description",
              defaultMessage: [{
                "type": 0,
                "value": "Description"
              }]
            }),
            hint: intl.formatMessage({
              id: "sZy/sl",
              defaultMessage: [{
                "type": 0,
                "value": "A short description of your app so users know what it does."
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, _objectSpread(_objectSpread({}, field), {}, {
              height: "98px",
              resize: "none",
              placeholder: intl.formatMessage({
                id: "oauthApp.descriptionPlaceholder",
                defaultMessage: [{
                  "type": 0,
                  "value": "Discover the Open Source projects your organization is using that need financial support."
                }]
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
            name: "redirectUri",
            label: intl.formatMessage({
              id: "5nkU0l",
              defaultMessage: [{
                "type": 0,
                "value": "Callback URL"
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              type: "url",
              placeholder: "http://example.com/path"
            }))
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_10__/* .ModalFooter */ .mz, {
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            gap: "16px",
            justifyContent: "center",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
              type: "submit",
              buttonStyle: "primary",
              buttonSize: "small",
              loading: isSubmitting,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "r+ksJu",
                defaultMessage: [{
                  "type": 0,
                  "value": "Create app"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
              type: "button",
              buttonStyle: "secondary",
              buttonSize: "small",
              disabled: isSubmitting,
              onClick: () => onClose(),
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "actions.cancel",
                defaultMessage: [{
                  "type": 0,
                  "value": "Cancel"
                }]
              })
            })]
          })
        })]
      })
    })]
  }));
};

CreateOauthApplicationModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CreateOauthApplicationModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreateOauthApplicationModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 20709:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47988);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_7__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
const _excluded = ["application", "onDelete"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }










const deleteApplicationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation DeleteOAuthApplication($id: String!) {
    deleteApplication(application: { id: $id }) {
      id
      account {
        id
      }
    }
  }
`;

const DeleteOAuthApplicationModal = _ref => {
  let {
    application,
    onDelete
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .useToasts */ .e1)();
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const [deleteApplication] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deleteApplicationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T,
    update: (cache, {
      data
    }) => {
      // Remove object from cache
      cache.evict({
        id: cache.identify(application)
      });
      cache.gc(); // Remove object from parent query

      const accountCacheId = cache.identify(data.deleteApplication.account);
      cache.modify({
        id: accountCacheId,
        fields: {
          oAuthApplications: (_, {
            DELETE
          }) => DELETE
        }
      });
    }
  });
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, _objectSpread(_objectSpread({
    isDanger: true,
    type: "delete",
    header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
      id: "M5dGYy",
      defaultMessage: [{
        "type": 0,
        "value": "Delete application "
      }, {
        "type": 1,
        "value": "name"
      }],
      values: {
        name: application.name
      }
    })
  }, props), {}, {
    continueHandler: async () => {
      try {
        await deleteApplication({
          variables: {
            id: application.id
          }
        });
        await onDelete(application);
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
          message: intl.formatMessage({
            id: "vAzArE",
            defaultMessage: [{
              "type": 0,
              "value": "Application "
            }, {
              "type": 1,
              "value": "name"
            }, {
              "type": 0,
              "value": " deleted"
            }]
          }, {
            name: application.name
          })
        });
        return _ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__/* .CONFIRMATION_MODAL_TERMINATE */ .p;
      } catch (e) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          variant: 'light',
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .i18nGraphqlException */ .t2)(intl, e)
        });
      }
    },
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "pp/kVH",
        defaultMessage: [{
          "type": 0,
          "value": "This will permanently delete the application, revoking all tokens associated with it. Are you sure you want to continue?"
        }]
      })
    })
  }));
};

DeleteOAuthApplicationModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteOAuthApplicationModal",
  "props": {
    "application": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeleteOAuthApplicationModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 78840:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(68185);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(173);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(75667);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(51082);
/* harmony import */ var _StyledTextarea__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(93150);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(31330);
/* harmony import */ var _WarnIfUnsavedChanges__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(84906);
/* harmony import */ var _DeleteOAuthApplicationModal__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(20709);
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(97550);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__, _ToastProvider__WEBPACK_IMPORTED_MODULE_21__, _DeleteOAuthApplicationModal__WEBPACK_IMPORTED_MODULE_23__]);
([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__, _ToastProvider__WEBPACK_IMPORTED_MODULE_21__, _DeleteOAuthApplicationModal__WEBPACK_IMPORTED_MODULE_23__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



























const applicationSettingsFragment = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  fragment ApplicationSettings on Application {
    id
    name
    description
    redirectUri
    clientId
    clientSecret
  }
`;
const applicationQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query OAuthApplicationQuery($id: String!) {
    application(id: $id) {
      id
      ...ApplicationSettings
    }
  }
  ${applicationSettingsFragment}
`;
const updateApplicationMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  mutation UpdateOAuthApplication($application: ApplicationUpdateInput!) {
    updateApplication(application: $application) {
      id
      ...ApplicationSettings
    }
  }
  ${applicationSettingsFragment}
`;
const CodeContainer = styled_components__WEBPACK_IMPORTED_MODULE_1___default()(_Text__WEBPACK_IMPORTED_MODULE_20__/* .Span */ .Dr).withConfig({
  displayName: "OAuthApplicationSettings__CodeContainer",
  componentId: "sc-1kead3n-0"
})(["overflow-wrap:anywhere;user-select:all;margin-right:8px;"]);

var _StyledCodeContainer = styled_components__WEBPACK_IMPORTED_MODULE_1___default()(CodeContainer).withConfig({
  displayName: "OAuthApplicationSettings___StyledCodeContainer",
  componentId: "sc-1kead3n-1"
})({});

const ObfuscatedClientSecret = ({
  secret
}) => {
  const [show, setShow] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
    children: [show && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(CodeContainer, {
      "data-cy": "unhidden-secret",
      children: secret
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
      "data-cy": "show-secret-btn",
      as: "button",
      color: "blue.600",
      onClick: () => setShow(!show),
      children: show ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide"
        }]
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
        id: "K7AkdL",
        defaultMessage: [{
          "type": 0,
          "value": "Show"
        }]
      })
    })]
  });
};

const LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '16px',
  lineHeight: '24px'
};

const OAuthApplicationSettings = ({
  backPath,
  id
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.useIntl)();
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .useToasts */ .e1)();
  const [showDeleteModal, setShowDeleteModal] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  const {
    data,
    loading,
    error
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(applicationQuery, {
    variables: {
      id
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T
  });
  const [updateApplication] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useMutation)(updateApplicationMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_8__/* .API_V2_CONTEXT */ .T
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div", {
    "data-cy": "oauth-app-settings",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
      mt: 3,
      mb: 4,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
        "data-cy": "go-back-link",
        as: _Link__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z,
        color: "black.800",
        href: backPath,
        children: ["\u2190 ", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "05doZ2",
          defaultMessage: [{
            "type": 0,
            "value": "Go back to all your apps"
          }]
        })]
      })
    }), loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
      height: 300
    }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      error: error
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div", {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
        width: "100%",
        alignItems: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.H3, {
          fontSize: "18px",
          fontWeight: "700",
          children: data.application.name
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          ml: 2,
          flex: "1",
          borderColor: "black.400"
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        maxWidth: "600px",
        p: 3,
        my: 4,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.H4, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          color: "black.800",
          mb: "20px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "FJBnaq",
            defaultMessage: [{
              "type": 0,
              "value": "Client ID and client secret"
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
          flexWrap: "wrap",
          justifyContent: "space-between",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
            flexDirection: "column",
            width: "35%",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "15px",
              fontWeight: "500",
              color: "black.800",
              mb: 2,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "U5+MBC",
                defaultMessage: [{
                  "type": 0,
                  "value": "Client ID"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledCodeContainer, {
              "data-cy": "oauth-app-client-id",
              fontSize: "14px",
              color: "black.800",
              children: data.application.clientId
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
            flexDirection: "column",
            width: "65%",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
              fontSize: "15px",
              fontWeight: "500",
              color: "black.800",
              mb: 2,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "B7p2EC",
                defaultMessage: [{
                  "type": 0,
                  "value": "Client secret"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(ObfuscatedClientSecret, {
              secret: data.application.clientSecret
            })]
          })]
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(formik__WEBPACK_IMPORTED_MODULE_4__.Formik, {
        initialValues: data.application,
        validate: values => (0,_lib__WEBPACK_IMPORTED_MODULE_24__/* .validateOauthApplicationValues */ .F)(intl, values),
        onSubmit: async (values, {
          resetForm
        }) => {
          try {
            const filteredValues = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(values, ['name', 'description', 'redirectUri']);

            const applicationInput = _objectSpread({
              id: data.application.id
            }, filteredValues);

            const result = await updateApplication({
              variables: {
                application: applicationInput
              }
            });
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
              message: intl.formatMessage({
                id: "NZ1C9t",
                defaultMessage: [{
                  "type": 0,
                  "value": "Application \""
                }, {
                  "type": 1,
                  "value": "name"
                }, {
                  "type": 0,
                  "value": "\" updated"
                }]
              }, {
                name: result.data.updateApplication.name
              })
            });
            resetForm({
              values: result.data.updateApplication
            });
          } catch (e) {
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_21__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
              variant: 'light',
              message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_7__/* .i18nGraphqlException */ .t2)(intl, e)
            });
          }
        },
        children: ({
          isSubmitting,
          dirty
        }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_4__.Form, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_WarnIfUnsavedChanges__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
            hasUnsavedChanges: dirty && !showDeleteModal
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            name: "name",
            label: intl.formatMessage({
              id: "J7xOu/",
              defaultMessage: [{
                "type": 0,
                "value": "Name of the app"
              }]
            }),
            labelProps: LABEL_STYLES,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              placeholder: intl.formatMessage({
                id: "examples",
                defaultMessage: [{
                  "type": 0,
                  "value": "e.g., "
                }, {
                  "type": 1,
                  "value": "examples"
                }]
              }, {
                examples: 'Back Your Stack'
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            name: "description",
            label: intl.formatMessage({
              id: "Fields.description",
              defaultMessage: [{
                "type": 0,
                "value": "Description"
              }]
            }),
            hint: intl.formatMessage({
              id: "sZy/sl",
              defaultMessage: [{
                "type": 0,
                "value": "A short description of your app so users know what it does."
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledTextarea__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, _objectSpread(_objectSpread({}, field), {}, {
              height: "98px",
              resize: "none",
              placeholder: intl.formatMessage({
                id: "oauthApp.descriptionPlaceholder",
                defaultMessage: [{
                  "type": 0,
                  "value": "Discover the Open Source projects your organization is using that need financial support."
                }]
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            name: "redirectUri",
            label: intl.formatMessage({
              id: "5nkU0l",
              defaultMessage: [{
                "type": 0,
                "value": "Callback URL"
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              type: "url",
              placeholder: "http://example.com/path"
            }))
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_9__/* .Flex */ .kC, {
            gap: "16px",
            justifyContent: "space-between",
            mt: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              type: "submit",
              buttonStyle: "primary",
              buttonSize: "small",
              loading: isSubmitting,
              disabled: !dirty,
              minWidth: "125px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "UtDIxu",
                defaultMessage: [{
                  "type": 0,
                  "value": "Update app"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              type: "button",
              buttonStyle: "dangerSecondary",
              buttonSize: "small",
              disabled: isSubmitting,
              onClick: () => setShowDeleteModal(true),
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "3I6uVw",
                defaultMessage: [{
                  "type": 0,
                  "value": "Delete app"
                }]
              })
            })]
          })]
        })
      }), showDeleteModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx(_DeleteOAuthApplicationModal__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
        application: data.application,
        onClose: () => setShowDeleteModal(false),
        onDelete: () => router.push(backPath)
      })]
    })]
  });
};

OAuthApplicationSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OAuthApplicationSettings",
  "props": {
    "id": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "backPath": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OAuthApplicationSettings);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 88752:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32651);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25896);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11194);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(88705);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(56562);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(68185);
/* harmony import */ var _oauth_CreateOauthApplicationModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(59313);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(79045);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(173);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_oauth_CreateOauthApplicationModal__WEBPACK_IMPORTED_MODULE_12__]);
_oauth_CreateOauthApplicationModal__WEBPACK_IMPORTED_MODULE_12__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];





















const applicationsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  query ApplicationsQuery($slug: String!, $limit: Int, $offset: Int) {
    account(slug: $slug) {
      id
      name
      slug
      type
      imageUrl(height: 128)
      oAuthApplications(limit: $limit, offset: $offset) {
        totalCount
        nodes {
          id
          name
        }
      }
    }
  }
`;

const OAuthApplicationsList = ({
  account,
  onApplicationCreated,
  offset = 0
}) => {
  const variables = {
    slug: account.slug,
    limit: 12,
    offset: offset
  };
  const [showCreateApplicationModal, setShowCreateApplicationModal] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const {
    data,
    loading,
    error,
    networkStatus
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(applicationsQuery, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__/* .API_V2_CONTEXT */ .T
  });
  const showLoadingState = loading || networkStatus === _apollo_client__WEBPACK_IMPORTED_MODULE_1__.NetworkStatus.refetch;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div", {
    "data-cy": "oauth-apps-list",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      width: "100%",
      alignItems: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.H3, {
        fontSize: "18px",
        fontWeight: "700",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "cGHrNj",
          defaultMessage: [{
            "type": 0,
            "value": "OAuth Apps"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        mx: 2,
        flex: "1",
        borderColor: "black.400"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        "data-cy": "create-app-btn",
        buttonSize: "tiny",
        onClick: () => setShowCreateApplicationModal(true),
        children: ["+ ", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "m6BfW0",
          defaultMessage: [{
            "type": 0,
            "value": "Create OAuth app"
          }]
        })]
      }), showCreateApplicationModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_oauth_CreateOauthApplicationModal__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        account: data.account,
        onClose: () => setShowCreateApplicationModal(false),
        onSuccess: onApplicationCreated
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
      my: 2,
      color: "black.700",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "p4WWnt",
        defaultMessage: [{
          "type": 0,
          "value": "You can register new apps that you developed using Open Collective's API."
        }]
      }), ' ', /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "dG3sDf",
        defaultMessage: [{
          "type": 0,
          "value": "For more information about OAuth applications, check "
        }, {
          "type": 8,
          "value": "link",
          "children": [{
            "type": 0,
            "value": "our documentation"
          }]
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_7__/* .getI18nLink */ .fw)({
            href: 'https://docs.opencollective.com/help/developers/oauth'
          })
        }
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      my: 4,
      children: error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        error: error
      }) : !showLoadingState && !data.account.oAuthApplications.totalCount ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledCard__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        p: "24px",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flex: "0 0 64px",
            height: "64px",
            justifyContent: "center",
            alignItems: "center",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Image__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
              src: "/static/icons/apps.png",
              width: "52px",
              height: "52px",
              alt: ""
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flexDirection: "column",
            ml: 3,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
              fontSize: "14px",
              fontWeight: "700",
              lineHeight: "20px",
              mb: "12px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "v8bmup",
                defaultMessage: [{
                  "type": 0,
                  "value": "You don't have any app yet"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
              fontSize: "12px",
              lineHeight: "18px",
              color: "black.700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "1lIftz",
                defaultMessage: [{
                  "type": 0,
                  "value": "You can create apps that integrate with the Open Collective platform. "
                }, {
                  "type": 8,
                  "value": "CreateAppLink",
                  "children": [{
                    "type": 0,
                    "value": "Create an app"
                  }]
                }, {
                  "type": 0,
                  "value": " using the Open Collective's API."
                }],
                values: {
                  CreateAppLink: children => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
                    "data-cy": "create-app-link",
                    as: "button",
                    color: "blue.500",
                    onClick: () => setShowCreateApplicationModal(true),
                    children: children
                  })
                }
              })
            })]
          })]
        })
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Grid */ .rj, {
        gridTemplateColumns: ['1fr', null, null, '1fr 1fr', '1fr 1fr 1fr'],
        gridGap: "46px",
        children: showLoadingState ? Array.from({
          length: variables.limit
        }, (_, index) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          height: "64px"
        }, index)) : data.account.oAuthApplications.nodes.map(app => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          "data-cy": "oauth-app",
          alignItems: "center",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
            mr: 24,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP, {
              radius: 64,
              collective: data.account
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
              fontSize: "18px",
              lineHeight: "26px",
              fontWeight: "500",
              color: "black.900",
              children: app.name
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Text__WEBPACK_IMPORTED_MODULE_18__.P, {
              mt: "10px",
              fontSize: "14px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Link__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                href: (0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__/* .getOauthAppSettingsRoute */ .Sn)(data.account, app),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "Settings",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Settings"
                  }]
                })
              })
            })]
          })]
        }, app.id))
      })
    }), data?.account?.oAuthApplications?.totalCount > variables.limit && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        total: data.account.oAuthApplications.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

OAuthApplicationsList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OAuthApplicationsList",
  "props": {
    "offset": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "onApplicationCreated": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OAuthApplicationsList);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 97550:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "F": () => (/* binding */ validateOauthApplicationValues)
/* harmony export */ });
/* harmony import */ var _lib_form_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40986);

const validateOauthApplicationValues = (intl, values) => {
  const errors = {};
  (0,_lib_form_utils__WEBPACK_IMPORTED_MODULE_0__/* .verifyFieldLength */ .zy)(intl, errors, values, 'name', 3, 100);
  return errors;
};

/***/ }),

/***/ 332:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "v": () => (/* binding */ authorizedAppsQuery)
/* harmony export */ });
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_0__);

const authorizedAppsQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_0__.gql`
  query AuthorizedApps($limit: Int, $offset: Int) {
    loggedInAccount {
      id
      oAuthAuthorizations(limit: $limit, offset: $offset) {
        totalCount
        nodes {
          id
          createdAt
          lastUsedAt
          account {
            id
            name
            slug
            type
            imageUrl(height: 48)
          }
          application {
            id
            name
            account {
              id
              name
              slug
              type
              imageUrl(height: 128)
            }
          }
        }
      }
    }
  }
`;

/***/ }),

/***/ 84939:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24317);
/* harmony import */ var _lib_i18n_order_status__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(732);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97079);
/* harmony import */ var _StyledSelectFilter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52847);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);
const _excluded = ["onChange", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }









const OrderStatusFilter = _ref => {
  let {
    onChange,
    value
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_1__.useIntl)();

  const getOption = value => ({
    label: (0,_lib_i18n_order_status__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(intl, value),
    value
  });

  const options = [getOption('ALL'), ...Object.values(_lib_constants_order_status__WEBPACK_IMPORTED_MODULE_2__/* .ORDER_STATUS */ .D).map(getOption)];
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx(_StyledSelectFilter__WEBPACK_IMPORTED_MODULE_5__/* .StyledSelectFilter */ .V, _objectSpread({
    inputId: "order-status-filter",
    isSearchable: false,
    onChange: ({
      value
    }) => onChange(value),
    value: getOption(value || 'ALL'),
    options: options.sort(_lib_utils__WEBPACK_IMPORTED_MODULE_4__/* .sortSelectOptions */ .V_)
  }, props));
};

OrderStatusFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrderStatusFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrderStatusFilter);

/***/ }),

/***/ 80913:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(15078);
/* harmony import */ var _budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93765);
/* harmony import */ var _filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(49106);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _OrderStatusFilter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84939);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_5__]);
_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }











const FilterContainer = styled_components__WEBPACK_IMPORTED_MODULE_2___default().div.withConfig({
  displayName: "OrdersFilters__FilterContainer",
  componentId: "sc-zmw1a3-0"
})(["margin-bottom:8px;flex:1 1 120px;&:not(:last-child){margin-right:18px;}"]);
const FilterLabel = styled_components__WEBPACK_IMPORTED_MODULE_2___default().label.withConfig({
  displayName: "OrdersFilters__FilterLabel",
  componentId: "sc-zmw1a3-1"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);

const OrdersFilters = ({
  currency,
  filters,
  hasStatus,
  onChange
}) => {
  const getFilterProps = (name, valueModifier) => ({
    inputId: `orders-filter-${name}`,
    value: filters?.[name],
    onChange: value => {
      const preparedValue = valueModifier ? valueModifier(value) : value;
      onChange(_objectSpread(_objectSpread({}, filters), {}, {
        [name]: value === 'ALL' ? null : preparedValue
      }));
    }
  });

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
    flexWrap: "wrap",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(FilterLabel, {
        htmlFor: "orders-filter-period",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "Period",
          defaultMessage: [{
            "type": 0,
            "value": "Period"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_filters_PeriodFilter__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, _objectSpread({}, getFilterProps('period', _lib_date_utils__WEBPACK_IMPORTED_MODULE_3__/* .encodeDateInterval */ .EB)))]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(FilterLabel, {
        htmlFor: "orders-filter-amount",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "Fields.amount",
          defaultMessage: [{
            "type": 0,
            "value": "Amount"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, _objectSpread({
        currency: currency
      }, getFilterProps('amount')))]
    }), hasStatus && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(FilterLabel, {
        htmlFor: "orders-filter-status",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_1__.FormattedMessage, {
          id: "order.status",
          defaultMessage: [{
            "type": 0,
            "value": "Status"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_OrderStatusFilter__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, _objectSpread({}, getFilterProps('status')))]
    })]
  });
};

OrdersFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersFilters",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filters": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "hasStatus": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().memo(OrdersFilters));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 80483:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _budget_OrderBudgetItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(94542);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19156);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_budget_OrderBudgetItem__WEBPACK_IMPORTED_MODULE_2__]);
_budget_OrderBudgetItem__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];





const OrderContainer = styled_components__WEBPACK_IMPORTED_MODULE_1___default().div.withConfig({
  displayName: "OrdersList__OrderContainer",
  componentId: "sc-6wv824-0"
})(["", ""], props => !props.isFirst && (0,styled_components__WEBPACK_IMPORTED_MODULE_1__.css)(["border-top:1px solid #e6e8eb;"]));

const OrdersList = ({
  orders,
  isLoading,
  nbPlaceholders,
  showPlatformTip,
  showAmountSign
}) => {
  orders = !isLoading ? orders : [...new Array(nbPlaceholders)];

  if (!orders?.length) {
    return null;
  }

  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_StyledCard__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
    children: orders.map((order, idx) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(OrderContainer, {
      isFirst: !idx,
      "data-cy": `order-${order?.status}`,
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx(_budget_OrderBudgetItem__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
        isLoading: isLoading,
        order: order,
        showPlatformTip: showPlatformTip,
        showAmountSign: showAmountSign
      })
    }, order?.id || idx))
  });
};

OrdersList.defaultProps = {
  nbPlaceholders: 10
};
OrdersList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersList",
  "props": {
    "nbPlaceholders": {
      "defaultValue": {
        "value": "10",
        "computed": false
      },
      "description": "When `isLoading` is true, this sets the number of \"loading\" items displayed",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "orders": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "id": {
              "name": "string",
              "required": true
            },
            "legacyId": {
              "name": "number",
              "required": true
            }
          }
        }
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "showAmountSign": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrdersList);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 79258:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66011);
/* harmony import */ var lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_omitBy__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_constants_order_status__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24317);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(15078);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(62131);
/* harmony import */ var _lib_hooks_usePrevious__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(19123);
/* harmony import */ var _budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(93765);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _host_dashboard_CreatePendingOrderModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54646);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(37278);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(68185);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(79045);
/* harmony import */ var _SearchBar__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(32606);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(87268);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(173);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(90998);
/* harmony import */ var _OrdersFilters__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(80913);
/* harmony import */ var _OrdersList__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(80483);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_host_dashboard_CreatePendingOrderModal__WEBPACK_IMPORTED_MODULE_12__, _OrdersFilters__WEBPACK_IMPORTED_MODULE_22__, _OrdersList__WEBPACK_IMPORTED_MODULE_23__]);
([_host_dashboard_CreatePendingOrderModal__WEBPACK_IMPORTED_MODULE_12__, _OrdersFilters__WEBPACK_IMPORTED_MODULE_22__, _OrdersList__WEBPACK_IMPORTED_MODULE_23__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


























const accountOrdersQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  query Orders(
    $accountSlug: String
    $limit: Int!
    $offset: Int!
    $status: [OrderStatus]
    $minAmount: Int
    $maxAmount: Int
    $dateFrom: DateTime
    $dateTo: DateTime
    $searchTerm: String
  ) {
    account(slug: $accountSlug) {
      id
      slug
      currency
      legacyId
      name
    }
    orders(
      account: { slug: $accountSlug }
      includeHostedAccounts: true
      filter: INCOMING
      status: $status
      searchTerm: $searchTerm
      limit: $limit
      offset: $offset
      dateFrom: $dateFrom
      dateTo: $dateTo
      minAmount: $minAmount
      maxAmount: $maxAmount
    ) {
      totalCount
      nodes {
        id
        legacyId
        description
        createdAt
        status
        amount {
          valueInCents
          currency
        }
        platformTipAmount {
          valueInCents
          currency
        }
        paymentMethod {
          id
          providerType
        }
        fromAccount {
          id
          slug
          name
          imageUrl
        }
        pendingContributionData {
          expectedAt
          paymentMethod
          ponumber
          memo
          fromAccountInfo {
            name
            email
          }
        }
        toAccount {
          id
          slug
          name
          imageUrl
          isHost
          ... on AccountWithHost {
            bankTransfersHostFeePercent: hostFeePercent(paymentMethodType: MANUAL)
          }
        }
        permissions {
          id
          canMarkAsExpired
          canMarkAsPaid
        }
      }
    }
  }
`;
const ORDERS_PER_PAGE = 15;

const isValidStatus = status => {
  return Boolean(_lib_constants_order_status__WEBPACK_IMPORTED_MODULE_5__/* .ORDER_STATUS */ .D[status]);
};

const getVariablesFromQuery = (query, forcedStatus) => {
  const amountRange = (0,_budget_filters_AmountFilter__WEBPACK_IMPORTED_MODULE_10__/* .parseAmountRange */ .t)(query.amount);
  const {
    from: dateFrom,
    to: dateTo
  } = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_6__/* .parseDateInterval */ .dr)(query.period);
  const searchTerm = query.searchTerm || null;
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || ORDERS_PER_PAGE,
    status: searchTerm ? null : forcedStatus ? forcedStatus : isValidStatus(query.status) ? query.status : null,
    minAmount: amountRange[0] && amountRange[0] * 100,
    maxAmount: amountRange[1] && amountRange[1] * 100,
    dateFrom,
    dateTo,
    searchTerm
  };
};

const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.defineMessages)({
  searchPlaceholder: {
    id: "Orders.Search.Placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "Search all contributions..."
    }]
  }
});

const hasParams = query => {
  return Object.entries(query).some(([key, value]) => {
    return !['collectiveSlug', 'hostCollectiveSlug', 'limit', 'offset', 'paypalApprovalError', 'section', 'slug', 'view'].includes(key) && value;
  });
};

const ROUTE_PARAMS = ['hostCollectiveSlug', 'collectiveSlug', 'view', 'slug', 'section'];

const updateQuery = (router, newParams) => {
  const query = lodash_omitBy__WEBPACK_IMPORTED_MODULE_0___default()(_objectSpread(_objectSpread({}, router.query), newParams), (value, key) => !value || ROUTE_PARAMS.includes(key));

  const pathname = router.asPath.split('?')[0];
  return router.push({
    pathname,
    query
  });
};

const OrdersWithData = ({
  accountSlug,
  title,
  status,
  showPlatformTip,
  canCreatePendingOrder
}) => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)() || {
    query: {}
  };
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__.useIntl)();
  const hasFilters = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(() => hasParams(router.query), [router.query]);
  const [showCreatePendingOrderModal, setShowCreatePendingOrderModal] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);

  const queryVariables = _objectSpread({
    accountSlug
  }, getVariablesFromQuery(router.query, status));

  const queryParams = {
    variables: queryVariables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  };
  const {
    data,
    error,
    loading,
    variables,
    refetch
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.useQuery)(accountOrdersQuery, queryParams);
  const {
    LoggedInUser
  } = (0,_lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)();
  const prevLoggedInUser = (0,_lib_hooks_usePrevious__WEBPACK_IMPORTED_MODULE_9__/* .usePrevious */ .D)(LoggedInUser);
  const isHostAdmin = LoggedInUser?.isAdminOfCollective(data?.account); // Refetch data when user logs in

  react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(() => {
    if (!prevLoggedInUser && LoggedInUser) {
      refetch();
    }
  }, [LoggedInUser]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
    maxWidth: 1000,
    width: "100%",
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      mb: 24,
      alignItems: "center",
      flexWrap: "wrap",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Text__WEBPACK_IMPORTED_MODULE_21__.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: title || /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
          id: "FinancialContributions",
          defaultMessage: [{
            "type": 0,
            "value": "Financial Contributions"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        mx: "auto"
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        p: 2,
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_SearchBar__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
          defaultValue: router.query.searchTerm,
          onSubmit: searchTerm => updateQuery(router, {
            searchTerm,
            offset: null
          }),
          placeholder: intl.formatMessage(messages.searchPlaceholder)
        })
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
      mb: 26,
      borderWidth: "0.5px",
      borderColor: "black.300"
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      mb: 34,
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        flexGrow: "1",
        mr: "18px",
        children: data?.account ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_OrdersFilters__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          currency: data.account.currency,
          filters: router.query,
          onChange: queryParams => updateQuery(router, _objectSpread(_objectSpread({}, queryParams), {}, {
            offset: null
          })),
          hasStatus: !status
        }) : loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
          height: 70
        }) : null
      }), isHostAdmin && canCreatePendingOrder && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          onClick: () => setShowCreatePendingOrderModal(true),
          buttonSize: "small",
          buttonStyle: "primary",
          height: "38px",
          lineHeight: "12px",
          mt: "17px",
          "data-cy": "create-pending-contribution",
          children: "Create +"
        }), showCreatePendingOrderModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_host_dashboard_CreatePendingOrderModal__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          host: data.account,
          onClose: () => setShowCreatePendingOrderModal(false),
          onSuccess: () => refetch()
        })]
      })]
    }), error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
      error: error
    }) : !loading && !data.orders?.nodes.length ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_MessageBox__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-order-message",
      children: hasFilters ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "OrdersList.Empty",
        defaultMessage: [{
          "type": 0,
          "value": "No contributions match the given filters. "
        }, {
          "type": 8,
          "value": "ResetLink",
          "children": [{
            "type": 0,
            "value": "Reset"
          }]
        }, {
          "type": 0,
          "value": " to see all."
        }],
        values: {
          ResetLink(text) {
            return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Link__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              "data-cy": "reset-orders-filters",
              href: {
                pathname: router.asPath.split('?')[0],
                query: {}
              },
              children: text
            });
          }

        }
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_4__.FormattedMessage, {
        id: "orders.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No orders"
        }]
      })
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_OrdersList__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
        isLoading: loading,
        orders: data?.orders?.nodes,
        nbPlaceholders: variables.limit,
        showPlatformTip: showPlatformTip
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          total: data?.orders?.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

OrdersWithData.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersWithData",
  "props": {
    "accountSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "status": {
      "description": "If provided, only orders matching this status will be fetched",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "title": {
      "description": "An optional title to be used instead of \"Financial contributions\"",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canCreatePendingOrder": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OrdersWithData);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 34493:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15078);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(88705);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(75667);
/* harmony import */ var _StyledModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(71792);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(66943);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(31330);
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(7868);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_14__]);
([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__, _ToastProvider__WEBPACK_IMPORTED_MODULE_14__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
const _excluded = ["account", "onSuccess", "onClose"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



















const createPersonalTokenMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation CreatePersonalToken($personalToken: PersonalTokenCreateInput!) {
    createPersonalToken(personalToken: $personalToken) {
      id
      name
    }
  }
`;
const LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '14px',
  lineHeight: '17px'
};
const INITIAL_VALUES = {
  name: '',
  scope: [],
  expiresAt: ''
};

const CreatePersonalTokenModal = _ref => {
  let {
    account,
    onSuccess,
    onClose
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_14__/* .useToasts */ .e1)();
  const [createPersonalToken] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(createPersonalTokenMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .API_V2_CONTEXT */ .T,
    update: cache => {
      const accountCacheId = cache.identify(account);
      cache.modify({
        id: accountCacheId,
        fields: {
          personalTokens: (_, {
            DELETE
          }) => DELETE
        }
      });
    }
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
    width: "576px",
    onClose: onClose,
    "data-cy": "create-personal-token-modal"
  }, props), {}, {
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_12__/* .ModalHeader */ .xB, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "MMyZfL",
        defaultMessage: [{
          "type": 0,
          "value": "Create Personal token"
        }]
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(formik__WEBPACK_IMPORTED_MODULE_2__.Formik, {
      initialValues: INITIAL_VALUES,
      validate: values => (0,_lib__WEBPACK_IMPORTED_MODULE_15__/* .validatePersonalTokenValues */ .E)(intl, values),
      onSubmit: async values => {
        try {
          const tokenInput = _objectSpread(_objectSpread({}, values), {}, {
            account: {
              id: account.id
            },
            scope: values.scope.map(scope => scope.value),
            expiresAt: values.expiresAt ? values.expiresAt : null
          });

          const result = await createPersonalToken({
            variables: {
              personalToken: tokenInput
            }
          });
          addToast({
            type: _ToastProvider__WEBPACK_IMPORTED_MODULE_14__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
            message: intl.formatMessage({
              id: "aIdo8o",
              defaultMessage: [{
                "type": 0,
                "value": "Personal token \""
              }, {
                "type": 1,
                "value": "name"
              }, {
                "type": 0,
                "value": "\" created"
              }]
            }, {
              name: result.data.createPersonalToken.name
            })
          });
          onSuccess(result.data.createPersonalToken, account);
        } catch (e) {
          addToast({
            type: _ToastProvider__WEBPACK_IMPORTED_MODULE_14__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
            variant: 'light',
            message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_5__/* .i18nGraphqlException */ .t2)(intl, e)
          });
        }
      },
      children: ({
        isSubmitting
      }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_2__.Form, {
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledModal__WEBPACK_IMPORTED_MODULE_12__/* .ModalBody */ .fe, {
          mt: "36px",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
            name: "name",
            label: intl.formatMessage({
              id: "w0wvhm",
              defaultMessage: [{
                "type": 0,
                "value": "Token Name"
              }]
            }),
            labelProps: LABEL_STYLES,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              placeholder: intl.formatMessage({
                id: "examples",
                defaultMessage: [{
                  "type": 0,
                  "value": "e.g., "
                }, {
                  "type": 1,
                  "value": "examples"
                }]
              }, {
                examples: 'Back Your Stack'
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
            name: "scope",
            label: "Scopes",
            labelProps: LABEL_STYLES,
            mt: 20,
            hint: intl.formatMessage({
              id: "OL9S0O",
              defaultMessage: [{
                "type": 0,
                "value": "Scopes define the access for personal tokens. "
              }, {
                "type": 8,
                "value": "Link",
                "children": [{
                  "type": 0,
                  "value": "More info"
                }]
              }, {
                "type": 0,
                "value": "."
              }]
            }, {
              Link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_8__/* .getI18nLink */ .fw)({
                href: 'https://docs.opencollective.com/help/developers/oauth#text-available-scopes',
                openInNewTab: true
              })
            }),
            children: ({
              form,
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, {
              options: (0,_lib__WEBPACK_IMPORTED_MODULE_15__/* .getScopesOptions */ ._)(),
              inputId: field.id,
              error: field.error,
              name: field.name,
              defaultValue: field.value,
              onBlur: () => form.setFieldTouched(field.name, true),
              onChange: value => form.setFieldValue(field.name, value),
              isMulti: true,
              "data-cy": "personal-token-scope"
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
            name: "expiresAt",
            label: intl.formatMessage({
              id: "CICBj0",
              defaultMessage: [{
                "type": 0,
                "value": "Expiration date"
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            hint: intl.formatMessage({
              id: "Slkvpr",
              defaultMessage: [{
                "type": 0,
                "value": "Personal tokens can expire after a certain date."
              }]
            }),
            children: ({
              field
            }) => {
              return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
                type: "date",
                min: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_4__/* .stripTime */ .xR)(new Date())
              }));
            }
          })]
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledModal__WEBPACK_IMPORTED_MODULE_12__/* .ModalFooter */ .mz, {
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
            gap: "16px",
            justifyContent: "center",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              type: "submit",
              buttonStyle: "primary",
              buttonSize: "small",
              loading: isSubmitting,
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "c+swVk",
                defaultMessage: [{
                  "type": 0,
                  "value": "Create token"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
              type: "button",
              buttonStyle: "secondary",
              buttonSize: "small",
              disabled: isSubmitting,
              onClick: () => onClose(),
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
                id: "actions.cancel",
                defaultMessage: [{
                  "type": 0,
                  "value": "Cancel"
                }]
              })
            })]
          })
        })]
      })
    })]
  }));
};

CreatePersonalTokenModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CreatePersonalTokenModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreatePersonalTokenModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 1982:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47988);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ToastProvider__WEBPACK_IMPORTED_MODULE_7__]);
_ToastProvider__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
const _excluded = ["personalToken", "onDelete"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }










const deletePersonalTokenMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  mutation DeletePersonalToken($id: String!) {
    deletePersonalToken(personalToken: { id: $id }) {
      id
      account {
        id
      }
    }
  }
`;

const DeletePersonalTokenModal = _ref => {
  let {
    personalToken,
    onDelete
  } = _ref,
      props = _objectWithoutProperties(_ref, _excluded);

  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .useToasts */ .e1)();
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_2__.useIntl)();
  const [deleteToken] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useMutation)(deletePersonalTokenMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_4__/* .API_V2_CONTEXT */ .T,
    update: (cache, {
      data
    }) => {
      cache.evict({
        id: cache.identify(personalToken)
      });
      cache.gc(); // Remove object from parent query

      const accountCacheId = cache.identify(data.deletePersonalToken.account);
      cache.modify({
        id: accountCacheId,
        fields: {
          personalTokens: (_, {
            DELETE
          }) => DELETE
        }
      });
    }
  });
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, _objectSpread(_objectSpread({
    isDanger: true,
    type: "delete",
    header: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
      id: "WzSLvB",
      defaultMessage: [{
        "type": 0,
        "value": "Delete token "
      }, {
        "type": 1,
        "value": "name"
      }],
      values: {
        name: personalToken.name || ''
      }
    })
  }, props), {}, {
    continueHandler: async () => {
      try {
        await deleteToken({
          variables: {
            id: personalToken.id
          }
        });
        await onDelete(personalToken);
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
          message: intl.formatMessage({
            id: "Ix3kXB",
            defaultMessage: [{
              "type": 0,
              "value": "Personal token \""
            }, {
              "type": 1,
              "value": "name"
            }, {
              "type": 0,
              "value": "\" deleted"
            }]
          }, {
            name: personalToken.name || ''
          })
        });
        return _ConfirmationModal__WEBPACK_IMPORTED_MODULE_5__/* .CONFIRMATION_MODAL_TERMINATE */ .p;
      } catch (e) {
        addToast({
          type: _ToastProvider__WEBPACK_IMPORTED_MODULE_7__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
          variant: 'light',
          message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_3__/* .i18nGraphqlException */ .t2)(intl, e)
        });
      }
    },
    children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(_Text__WEBPACK_IMPORTED_MODULE_6__.P, {
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "7YAGj2",
        defaultMessage: [{
          "type": 0,
          "value": "This will permanently delete the token, revoking all access associated with it. Are you sure you want to continue?"
        }]
      })
    })
  }));
};

DeletePersonalTokenModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeletePersonalTokenModal",
  "props": {
    "personalToken": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeletePersonalTokenModal);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 64166:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57518);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2296);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(formik__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(15078);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(88705);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(68185);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(173);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(75667);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(51082);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(90998);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(31330);
/* harmony import */ var _WarnIfUnsavedChanges__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(84906);
/* harmony import */ var _DeletePersonalTokenModal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(1982);
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(7868);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__, _ToastProvider__WEBPACK_IMPORTED_MODULE_23__, _DeletePersonalTokenModal__WEBPACK_IMPORTED_MODULE_25__]);
([_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__, _ToastProvider__WEBPACK_IMPORTED_MODULE_23__, _DeletePersonalTokenModal__WEBPACK_IMPORTED_MODULE_25__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





























const personalTokenSettingsFragment = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  fragment PersonalTokenSettings on PersonalToken {
    id
    name
    scope
    expiresAt
    token
  }
`;
const personalTokenQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  query PersonalTokenQuery($id: String!) {
    personalToken(id: $id) {
      id
      ...PersonalTokenSettings
    }
  }
  ${personalTokenSettingsFragment}
`;
const updatePersonalTokenMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_3__.gql`
  mutation UpdatePersonalToken($personalToken: PersonalTokenUpdateInput!) {
    updatePersonalToken(personalToken: $personalToken) {
      id
      ...PersonalTokenSettings
    }
  }
  ${personalTokenSettingsFragment}
`;
const CodeContainer = styled_components__WEBPACK_IMPORTED_MODULE_1___default()(_Text__WEBPACK_IMPORTED_MODULE_22__/* .Span */ .Dr).withConfig({
  displayName: "PersonalTokenSettings__CodeContainer",
  componentId: "sc-ve0c2j-0"
})(["overflow-wrap:anywhere;user-select:all;margin-right:8px;"]);

var _StyledCodeContainer = styled_components__WEBPACK_IMPORTED_MODULE_1___default()(CodeContainer).withConfig({
  displayName: "PersonalTokenSettings___StyledCodeContainer",
  componentId: "sc-ve0c2j-1"
})({});

const ObfuscatedClientSecret = ({
  secret
}) => {
  const [show, setShow] = React.useState(false);
  return /*#__PURE__*/_jsxs(P, {
    children: [show && /*#__PURE__*/_jsx(CodeContainer, {
      "data-cy": "unhidden-secret",
      children: secret
    }), /*#__PURE__*/_jsx(StyledLink, {
      "data-cy": "show-secret-btn",
      as: "button",
      color: "blue.600",
      onClick: () => setShow(!show),
      children: show ? /*#__PURE__*/_jsx(FormattedMessage, {
        id: "Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide"
        }]
      }) : /*#__PURE__*/_jsx(FormattedMessage, {
        id: "K7AkdL",
        defaultMessage: [{
          "type": 0,
          "value": "Show"
        }]
      })
    })]
  });
};

const LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '16px',
  lineHeight: '24px'
};

const PersonalTokenSettings = ({
  backPath,
  id
}) => {
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.useIntl)();
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();
  const {
    addToast
  } = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_23__/* .useToasts */ .e1)();
  const [showDeleteModal, setShowDeleteModal] = react__WEBPACK_IMPORTED_MODULE_2___default().useState(false);
  const {
    data,
    loading,
    error
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(personalTokenQuery, {
    variables: {
      id
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  const [updateToken] = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.useMutation)(updatePersonalTokenMutation, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_9__/* .API_V2_CONTEXT */ .T
  });
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div", {
    "data-cy": "personal-token-settings",
    children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.P, {
      mt: 3,
      mb: 4,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_StyledLink__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        "data-cy": "go-back-link",
        as: _Link__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z,
        color: "black.800",
        href: backPath,
        children: ["\u2190 ", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
          id: "3Sl9Fc",
          defaultMessage: [{
            "type": 0,
            "value": "Go back to all your tokens"
          }]
        })]
      })
    }), loading ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      height: 300
    }) : error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      error: error
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div", {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
        width: "100%",
        alignItems: "center",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.H3, {
          fontSize: "18px",
          fontWeight: "700",
          children: data.personalToken.name
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
          ml: 2,
          flex: "1",
          borderColor: "black.400"
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
        maxWidth: "600px",
        p: 3,
        my: 4,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_Text__WEBPACK_IMPORTED_MODULE_22__.H4, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          color: "black.800",
          mb: "20px",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
            id: "hAcvJ3",
            defaultMessage: [{
              "type": 0,
              "value": "Personal Token"
            }]
          })
        }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
          flexWrap: "wrap",
          justifyContent: "space-between",
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
            flexDirection: "column",
            width: "100%",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledCodeContainer, {
              "data-cy": "personalToken-token",
              fontSize: "14px",
              color: "black.800",
              children: data.personalToken.token
            })
          })
        })]
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(formik__WEBPACK_IMPORTED_MODULE_4__.Formik, {
        initialValues: _objectSpread(_objectSpread({}, data.personalToken), {}, {
          name: data.personalToken.name || '',
          expiresAt: data.personalToken.expiresAt ? (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_7__/* .stripTime */ .xR)(data.personalToken.expiresAt) : '',
          scope: (data.personalToken.scope || []).map(scope => ({
            value: scope,
            label: scope
          }))
        }),
        validate: values => (0,_lib__WEBPACK_IMPORTED_MODULE_26__/* .validatePersonalTokenValues */ .E)(intl, values),
        onSubmit: async (values, {
          resetForm
        }) => {
          try {
            const filteredValue = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(values, ['name', 'scope', 'expiresAt']);

            const personalToken = _objectSpread(_objectSpread({}, filteredValue), {}, {
              id,
              scope: filteredValue.scope.map(s => s.value),
              expiresAt: filteredValue.expiresAt ? filteredValue.expiresAt : null
            });

            const result = await updateToken({
              variables: {
                personalToken
              }
            });
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_23__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
              message: intl.formatMessage({
                id: "aS9iWV",
                defaultMessage: [{
                  "type": 0,
                  "value": "Personal token \""
                }, {
                  "type": 1,
                  "value": "name"
                }, {
                  "type": 0,
                  "value": "\" updated"
                }]
              }, {
                name: result.data.updatePersonalToken.name
              })
            });
            resetForm({
              values: _objectSpread(_objectSpread({}, result.data.updatePersonalToken), {}, {
                expiresAt: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_7__/* .stripTime */ .xR)(result.data.updatePersonalToken.expiresAt)
              })
            });
          } catch (e) {
            addToast({
              type: _ToastProvider__WEBPACK_IMPORTED_MODULE_23__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
              variant: 'light',
              message: (0,_lib_errors__WEBPACK_IMPORTED_MODULE_8__/* .i18nGraphqlException */ .t2)(intl, e)
            });
          }
        },
        children: ({
          isSubmitting,
          dirty
        }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_4__.Form, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_WarnIfUnsavedChanges__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
            hasUnsavedChanges: dirty && !showDeleteModal
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
            name: "name",
            label: intl.formatMessage({
              id: "xQXSru",
              defaultMessage: [{
                "type": 0,
                "value": "Token name"
              }]
            }),
            labelProps: LABEL_STYLES,
            required: true,
            children: ({
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
              placeholder: intl.formatMessage({
                id: "examples",
                defaultMessage: [{
                  "type": 0,
                  "value": "e.g., "
                }, {
                  "type": 1,
                  "value": "examples"
                }]
              }, {
                examples: 'Back Your Stack'
              })
            }))
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
            name: "scope",
            label: "Scopes",
            labelProps: LABEL_STYLES,
            mt: 20,
            hint: intl.formatMessage({
              id: "OL9S0O",
              defaultMessage: [{
                "type": 0,
                "value": "Scopes define the access for personal tokens. "
              }, {
                "type": 8,
                "value": "Link",
                "children": [{
                  "type": 0,
                  "value": "More info"
                }]
              }, {
                "type": 0,
                "value": "."
              }]
            }, {
              Link: (0,_I18nFormatters__WEBPACK_IMPORTED_MODULE_11__/* .getI18nLink */ .fw)({
                href: 'https://docs.opencollective.com/help/developers/oauth#text-available-scopes',
                openInNewTab: true
              })
            }),
            children: ({
              form,
              field
            }) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledSelect__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .ZP, {
              options: (0,_lib__WEBPACK_IMPORTED_MODULE_26__/* .getScopesOptions */ ._)(),
              inputId: field.id,
              error: field.error,
              name: field.name,
              defaultValue: field.value,
              onBlur: () => form.setFieldTouched(field.name, true),
              onChange: value => form.setFieldValue(field.name, value),
              isMulti: true,
              "data-cy": "personal-token-scope"
            })
          }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledInputFormikField__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
            name: "expiresAt",
            label: intl.formatMessage({
              id: "CICBj0",
              defaultMessage: [{
                "type": 0,
                "value": "Expiration date"
              }]
            }),
            labelProps: LABEL_STYLES,
            mt: 20,
            hint: intl.formatMessage({
              id: "Slkvpr",
              defaultMessage: [{
                "type": 0,
                "value": "Personal tokens can expire after a certain date."
              }]
            }),
            children: ({
              field
            }) => {
              return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledInput__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
                type: "date",
                min: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_7__/* .stripTime */ .xR)(new Date())
              }));
            }
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
            gap: "16px",
            justifyContent: "space-between",
            mt: 4,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              type: "submit",
              buttonStyle: "primary",
              buttonSize: "small",
              loading: isSubmitting,
              disabled: !dirty,
              minWidth: "125px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "FoRCrl",
                defaultMessage: [{
                  "type": 0,
                  "value": "Update token"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_StyledButton__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
              type: "button",
              buttonStyle: "dangerSecondary",
              buttonSize: "small",
              disabled: isSubmitting,
              onClick: () => setShowDeleteModal(true),
              "data-cy": "personalToken-delete",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_6__.FormattedMessage, {
                id: "+5KHJy",
                defaultMessage: [{
                  "type": 0,
                  "value": "Delete token"
                }]
              })
            })]
          })]
        })
      }), showDeleteModal && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx(_DeletePersonalTokenModal__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
        personalToken: data.personalToken,
        onClose: () => setShowDeleteModal(false),
        onDelete: () => router.push(backPath)
      })]
    })]
  });
};

PersonalTokenSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PersonalTokenSettings",
  "props": {
    "id": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "backPath": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PersonalTokenSettings);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 24286:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32651);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25896);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11194);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16159);
/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(56562);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92129);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(29242);
/* harmony import */ var _MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68185);
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(79045);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(19156);
/* harmony import */ var _StyledHr__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(173);
/* harmony import */ var _StyledLink__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(51082);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(90998);
/* harmony import */ var _CreatePersonalTokenModal__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(34493);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CreatePersonalTokenModal__WEBPACK_IMPORTED_MODULE_17__]);
_CreatePersonalTokenModal__WEBPACK_IMPORTED_MODULE_17__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];




















const personalTokenQuery = _apollo_client__WEBPACK_IMPORTED_MODULE_1__.gql`
  query PersonalTokens($slug: String!, $limit: Int, $offset: Int) {
    individual(slug: $slug) {
      id
      name
      slug
      type
      imageUrl(height: 128)
      personalTokens(limit: $limit, offset: $offset) {
        totalCount
        nodes {
          id
          name
        }
      }
    }
  }
`;

const PersonalTokensList = ({
  account,
  onPersonalTokenCreated,
  offset = 0
}) => {
  const variables = {
    slug: account.slug,
    limit: 12,
    offset: offset
  };
  const [showCreatePersonalToken, setShowCreatePersonalTokenModal] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);
  const {
    data,
    loading,
    error,
    networkStatus
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(personalTokenQuery, {
    variables,
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_3__/* .API_V2_CONTEXT */ .T
  });
  const showLoadingState = loading || networkStatus === _apollo_client__WEBPACK_IMPORTED_MODULE_1__.NetworkStatus.refetch;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)("div", {
    "data-cy": "personal-tokens-list",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      width: "100%",
      alignItems: "center",
      children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.H3, {
        fontSize: "18px",
        fontWeight: "700",
        children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "IPdwXJ",
          defaultMessage: [{
            "type": 0,
            "value": "Personal Tokens"
          }]
        })
      }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledHr__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        mx: 2,
        flex: "1",
        borderColor: "black.400"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        "data-cy": "create-personal-token-btn",
        buttonSize: "tiny",
        onClick: () => setShowCreatePersonalTokenModal(true),
        children: ["+ ", /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
          id: "MMyZfL",
          defaultMessage: [{
            "type": 0,
            "value": "Create Personal token"
          }]
        })]
      }), showCreatePersonalToken && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_CreatePersonalTokenModal__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
        account: data.individual,
        onClose: () => setShowCreatePersonalTokenModal(false),
        onSuccess: onPersonalTokenCreated
      })]
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
      my: 2,
      color: "black.700",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
        id: "QZRYxh",
        defaultMessage: [{
          "type": 0,
          "value": "Personal tokens are used to authenticate with the API. They are not tied to a specific application. Pass it as "
        }, {
          "type": 1,
          "value": "headerName"
        }, {
          "type": 0,
          "value": " HTTP header or "
        }, {
          "type": 1,
          "value": "queryParam"
        }, {
          "type": 0,
          "value": " query parameter in the URL."
        }],
        values: {
          headerName: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx("code", {
            children: "Personal-Token"
          }),
          queryParam: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx("code", {
            children: "personalToken"
          })
        }
      })
    }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
      my: 4,
      children: error ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_MessageBoxGraphqlError__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
        error: error
      }) : !showLoadingState && !data.individual.personalTokens.totalCount ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledCard__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        p: "24px",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flex: "0 0 64px",
            height: "64px",
            justifyContent: "center",
            alignItems: "center",
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Image__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
              src: "/static/icons/apps.png",
              width: "52px",
              height: "52px",
              alt: ""
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flexDirection: "column",
            ml: 3,
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontSize: "14px",
              fontWeight: "700",
              lineHeight: "20px",
              mb: "12px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "1SzDWu",
                defaultMessage: [{
                  "type": 0,
                  "value": "You don't have any token yet"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontSize: "12px",
              lineHeight: "18px",
              color: "black.700",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "oG4/dR",
                defaultMessage: [{
                  "type": 0,
                  "value": "You can create personal token that integrate with the Open Collective platform. "
                }, {
                  "type": 8,
                  "value": "CreateTokenLink",
                  "children": [{
                    "type": 0,
                    "value": "Create Personal Token"
                  }]
                }, {
                  "type": 0,
                  "value": "."
                }],
                values: {
                  CreateTokenLink: children => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_StyledLink__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
                    "data-cy": "create-token-link",
                    as: "button",
                    color: "blue.500",
                    onClick: () => setShowCreatePersonalTokenModal(true),
                    children: children
                  })
                }
              })
            })]
          })]
        })
      }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Grid */ .rj, {
        gridTemplateColumns: ['1fr', null, null, '1fr 1fr', '1fr 1fr 1fr'],
        gridGap: "46px",
        children: showLoadingState ? Array.from({
          length: variables.limit
        }, (_, index) => /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          height: "64px"
        }, index)) : data.individual.personalTokens.nodes.map(token => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
          "data-cy": "personal-token",
          alignItems: "center",
          children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Box */ .xu, {
            mr: 24,
            children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Avatar__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP, {
              radius: 64,
              collective: data.individual
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              fontSize: "18px",
              lineHeight: "26px",
              fontWeight: "500",
              color: "black.900",
              children: token.name ?? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                id: "3IwVoe",
                defaultMessage: [{
                  "type": 0,
                  "value": "Unnamed token"
                }]
              })
            }), /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Text__WEBPACK_IMPORTED_MODULE_16__.P, {
              mt: "10px",
              fontSize: "14px",
              children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Link__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
                href: (0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_4__/* .getPersonalTokenSettingsRoute */ .gb)(data.individual, token),
                children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_2__.FormattedMessage, {
                  id: "Settings",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Settings"
                  }]
                })
              })
            })]
          })]
        }, token.id))
      })
    }), data?.individual?.personalTokens?.totalCount > variables.limit && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Grid__WEBPACK_IMPORTED_MODULE_6__/* .Flex */ .kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx(_Pagination__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
        total: data.individual.personalTokens.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

PersonalTokensList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PersonalTokensList",
  "props": {
    "offset": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "onPersonalTokenCreated": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PersonalTokensList);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 7868:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ validatePersonalTokenValues),
/* harmony export */   "_": () => (/* binding */ getScopesOptions)
/* harmony export */ });
/* harmony import */ var _lib_form_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40986);
/* harmony import */ var _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97965);


const validatePersonalTokenValues = (intl, values) => {
  const errors = {};
  (0,_lib_form_utils__WEBPACK_IMPORTED_MODULE_0__/* .verifyFieldLength */ .zy)(intl, errors, values, 'name', 3, 100);
  return errors;
};
const getScopesOptions = () => {
  const scopes = Object.values(_lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_1__/* .OAuthScope */ .YX);
  return scopes.map(scope => ({
    label: scope,
    value: scope
  }));
};

/***/ }),

/***/ 10922:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "s": () => (/* binding */ HOST_FEE_STRUCTURE)
/* harmony export */ });
const HOST_FEE_STRUCTURE = {
  DEFAULT: 'DEFAULT',
  MONTHLY_RETAINER: 'MONTHLY_RETAINER',
  CUSTOM_FEE: 'CUSTOM_FEE'
};

/***/ }),

/***/ 15084:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q": () => (/* binding */ MODERATION_CATEGORIES),
/* harmony export */   "l": () => (/* binding */ MODERATION_CATEGORIES_ALIASES)
/* harmony export */ });
const MODERATION_CATEGORIES = {
  ADULT: 'Adult websites',
  AFFILIATE_REVIEW: 'Affiliate and review websites',
  // creating “review” pages for the sake of linking to Amazon
  CASINO_GAMBLING: 'Casinos and gambling',
  FINANCE_INSURANCE: 'Insurance & financial products (credit)',
  PHARMACY: 'Pharmacy products (weight loss, anti-aging)',
  SEO_AUDIENCE: 'SEO services & social media buying',
  // black-hat SEO services
  VPN_PROXY: 'VPN and proxy services',
  WRITER: 'Essay writing services'
};
const MODERATION_CATEGORIES_ALIASES = {
  ADULT: ['adult'],
  AFFILIATE_REVIEW: ['affiliate', 'review'],
  CASINO_GAMBLING: ['casino', 'gambling'],
  FINANCE_INSURANCE: ['finance', 'insurance', 'credit'],
  PHARMACY: ['pharmacy', 'pills', 'weightloss'],
  SEO_AUDIENCE: ['seo', 'audience'],
  VPN_PROXY: ['vpn', 'proxy'],
  WRITER: ['writer']
};

/***/ }),

/***/ 2436:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "N": () => (/* binding */ VAT_OPTIONS)
/* harmony export */ });
const VAT_OPTIONS = {
  HOST: 'HOST',
  OWN: 'OWN'
};

/***/ }),

/***/ 79618:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "S": () => (/* binding */ editCollectiveMutation),
/* harmony export */   "Z": () => (/* binding */ addCreateCollectiveMutation)
/* harmony export */ });
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84159);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32651);
/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51719);




const createCollectiveMutation = _helpers__WEBPACK_IMPORTED_MODULE_2__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation CreateCollective($collective: CollectiveInputType!) {
    createCollective(collective: $collective) {
      id
      name
      slug
      type
      website
      twitterHandle
      isIncognito
    }
  }
`;
const editCollectiveMutation = _helpers__WEBPACK_IMPORTED_MODULE_2__/* .gqlV1 */ .N
/* GraphQL */
`
  mutation EditCollective($collective: CollectiveInputType!) {
    editCollective(collective: $collective) {
      id
      ...EditCollectivePageFields
    }
  }

  ${_queries__WEBPACK_IMPORTED_MODULE_3__/* .editCollectivePageFieldsFragment */ .s9}
`;
const addCreateCollectiveMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_1__.graphql)(createCollectiveMutation, {
  props: ({
    mutate
  }) => ({
    createCollective: async collective => {
      const CollectiveInputType = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(collective, ['slug', 'type', 'name', 'image', 'description', 'longDescription', 'location', 'privateInstructions', 'twitterHandle', 'githubHandle', 'website', 'tags', 'startsAt', 'endsAt', 'timezone', 'currency', 'quantity', 'HostCollectiveId', 'ParentCollectiveId', 'isIncognito', 'settings']);

      CollectiveInputType.tiers = (collective.tiers || []).map(tier => lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(tier, ['type', 'name', 'description', 'amount', 'maxQuantity']));
      CollectiveInputType.location = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(collective.location, ['name', 'address', 'lat', 'long', 'country']);
      return await mutate({
        variables: {
          collective: CollectiveInputType
        }
      });
    }
  })
});

/***/ }),

/***/ 26154:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V": () => (/* binding */ useLazyGraphQLPaginatedResults)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


const DEFAULT_OPTIONS = {
  /** Defines the percentage of items actually displayed */
  percentageDisplayed: 0.5
};
/**
 * An helper to work with dynamic paginated lists coming from GraphQL, intended to reduce
 * the load on server by loading a bigger batches at the start and updating the list in cache manually.
 */

const useLazyGraphQLPaginatedResults = (query, key, options = DEFAULT_OPTIONS) => {
  const allOptions = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);

  const limit = query?.variables?.limit || 0;
  const results = query?.data?.[key];
  const nbItemsDisplayed = limit * allOptions.percentageDisplayed;
  const resultsCount = results?.nodes?.length || 0;
  const nodes = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => results?.nodes?.slice(0, nbItemsDisplayed) || [], [results, nbItemsDisplayed]); // Refetch when the number of items go below the threshold

  react__WEBPACK_IMPORTED_MODULE_0___default().useEffect(() => {
    if (results && !query.loading && resultsCount <= nbItemsDisplayed && resultsCount < results.totalCount) {
      query.refetch();
    }
  }, [query?.loading, resultsCount, nbItemsDisplayed]);

  if (!results) {
    return {
      nodes,
      totalCount: 0,
      offset: 0,
      limit: nbItemsDisplayed
    };
  }

  return {
    offset: query.variables.offset,
    limit: nbItemsDisplayed,
    totalCount: results.totalCount,
    nodes
  };
};

/***/ }),

/***/ 19123:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D": () => (/* binding */ usePrevious)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

/**
 * Holds the previous value. Useful to reproduce a `componentDidUpdate(prevProps)` behavior
 * in a hook component.
 */

const usePrevious = value => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    ref.current = value;
  });
  return ref.current;
};

/***/ }),

/***/ 69196:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "J": () => (/* binding */ ActivityClassesI18N)
/* harmony export */ });
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_0__);

const ActivityClassesI18N = (0,react_intl__WEBPACK_IMPORTED_MODULE_0__.defineMessages)({
  'collectives.title': {
    id: "collectives.title",
    defaultMessage: [{
      "type": 0,
      "value": "Main collective activity"
    }]
  },
  'collectives.description': {
    id: "collectives.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a new collective applies for fiscal hosting or is approved. Also get updates when new members are added to the collectives or when a new social media account is connected."
    }]
  },
  'expenses.title': {
    id: "Expenses",
    defaultMessage: [{
      "type": 0,
      "value": "Expenses"
    }]
  },
  'expenses.description': {
    id: "expenses.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails of new submissions, and all expense activity."
    }]
  },
  'contributions.title': {
    id: "Contributions",
    defaultMessage: [{
      "type": 0,
      "value": "Contributions"
    }]
  },
  'contributions.description': {
    id: "contributions.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when new contributions come through and other contribution-related notifications."
    }]
  },
  'activitiesUpdates.title': {
    id: "activitiesUpdates.title",
    defaultMessage: [{
      "type": 0,
      "value": "Activities and Updates"
    }]
  },
  'activitiesUpdates.description': {
    id: "activitiesUpdates.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a new update is published or comments are added to a conversation."
    }]
  },
  'virtualCards.title': {
    id: "VirtualCards.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Virtual Cards"
    }]
  },
  'virtualCards.description': {
    id: "virtualCards.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when virtual cards are requested, assigned and when a charge is declined or it is missing its receipt."
    }]
  },
  'fundsEvents.title': {
    id: "fundsEvents.title",
    defaultMessage: [{
      "type": 0,
      "value": "Funds and Events"
    }]
  },
  'fundsEvents.description': {
    id: "fundsEvents.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a fund or event is created, for tickets confirmations and events reminders."
    }]
  },
  'reports.title': {
    id: "reports.title",
    defaultMessage: [{
      "type": 0,
      "value": "Monthly reports"
    }]
  },
  'reports.description': {
    id: "reports.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive monthly reports sent by collectives"
    }]
  }
});

/***/ }),

/***/ 64:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ formatHostFeeStructure)
/* harmony export */ });
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(10922);


const TypesI18n = (0,react_intl__WEBPACK_IMPORTED_MODULE_0__.defineMessages)({
  ALL: {
    id: "HostFee.AllTypes",
    defaultMessage: [{
      "type": 0,
      "value": "All"
    }]
  },
  [_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_1__/* .HOST_FEE_STRUCTURE.DEFAULT */ .s.DEFAULT]: {
    id: "HostFee.Global",
    defaultMessage: [{
      "type": 0,
      "value": "Global host fees"
    }]
  },
  [_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_1__/* .HOST_FEE_STRUCTURE.CUSTOM_FEE */ .s.CUSTOM_FEE]: {
    id: "HostFee.Custom",
    defaultMessage: [{
      "type": 0,
      "value": "Custom fee"
    }]
  },
  [_constants_host_fee_structure__WEBPACK_IMPORTED_MODULE_1__/* .HOST_FEE_STRUCTURE.MONTHLY_RETAINER */ .s.MONTHLY_RETAINER]: {
    id: "HostFee.MonthlyRetainer",
    defaultMessage: [{
      "type": 0,
      "value": "Monthly retainer"
    }]
  }
});
/**
 * Translate a member role
 *
 * @param {object} `intl` - see `injectIntl`
 * @param {string} `type`
 */

const formatHostFeeStructure = (intl, type) => {
  const i18nMsg = TypesI18n[type];
  return i18nMsg ? intl.formatMessage(i18nMsg) : type;
};

/***/ }),

/***/ 88855:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_collective_lib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5700);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98216);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(62131);
/* harmony import */ var _lib_policies__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(43176);
/* harmony import */ var _components_admin_panel_AdminPanelContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2729);
/* harmony import */ var _components_admin_panel_AdminPanelSection__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(58777);
/* harmony import */ var _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13398);
/* harmony import */ var _components_admin_panel_queries__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(35950);
/* harmony import */ var _components_admin_panel_SideBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(52079);
/* harmony import */ var _components_admin_panel_TopBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(91988);
/* harmony import */ var _components_Grid__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(16159);
/* harmony import */ var _components_MessageBox__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(37278);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(25087);
/* harmony import */ var _components_Page__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(84842);
/* harmony import */ var _components_SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(78720);
/* harmony import */ var _components_TwoFactorAuthRequiredMessage__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(37066);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_admin_panel_AdminPanelSection__WEBPACK_IMPORTED_MODULE_9__, _components_Page__WEBPACK_IMPORTED_MODULE_17__, _components_SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_18__]);
([_components_admin_panel_AdminPanelSection__WEBPACK_IMPORTED_MODULE_9__, _components_Page__WEBPACK_IMPORTED_MODULE_17__, _components_SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_18__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
























const messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.defineMessages)({
  collectiveIsArchived: {
    id: "collective.isArchived",
    defaultMessage: [{
      "type": 1,
      "value": "name"
    }, {
      "type": 0,
      "value": " has been archived."
    }]
  },
  collectiveIsArchivedDescription: {
    id: "collective.isArchived.edit.description",
    defaultMessage: [{
      "type": 0,
      "value": "This "
    }, {
      "type": 1,
      "value": "type"
    }, {
      "type": 0,
      "value": " has been archived and is no longer active."
    }]
  },
  userIsArchived: {
    id: "user.isArchived",
    defaultMessage: [{
      "type": 0,
      "value": "Account has been archived."
    }]
  },
  userIsArchivedDescription: {
    id: "user.isArchived.edit.description",
    defaultMessage: [{
      "type": 0,
      "value": "This account has been archived and is no longer active."
    }]
  }
});

const getDefaultSectionForAccount = (account, loggedInUser) => {
  if (!account) {
    return _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .ALL_SECTIONS.INFO */ .J7.INFO;
  }

  const isAdmin = loggedInUser?.isAdminOfCollective(account);
  const isAccountant = loggedInUser?.hasRole(_lib_constants_roles__WEBPACK_IMPORTED_MODULE_5__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT, account);
  const isAccountantOnly = !isAdmin && isAccountant;

  if ((0,_lib_collective_lib__WEBPACK_IMPORTED_MODULE_4__/* .isHostAccount */ .aD)(account)) {
    return isAccountantOnly ? _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .ALL_SECTIONS.REPORTS */ .J7.REPORTS : _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .ALL_SECTIONS.EXPENSES */ .J7.EXPENSES;
  } else {
    return isAccountantOnly ? _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .ALL_SECTIONS.PAYMENT_RECEIPTS */ .J7.PAYMENT_RECEIPTS : _components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .ALL_SECTIONS.INFO */ .J7.INFO;
  }
};

const getNotification = (intl, account) => {
  if (account?.isArchived) {
    if (account.type === 'USER') {
      return {
        type: 'warning',
        title: intl.formatMessage(messages.userIsArchived),
        description: intl.formatMessage(messages.userIsArchivedDescription)
      };
    } else {
      return {
        type: 'warning',
        title: intl.formatMessage(messages.collectiveIsArchived, {
          name: account.name
        }),
        description: intl.formatMessage(messages.collectiveIsArchivedDescription, {
          type: account.type.toLowerCase()
        })
      };
    }
  }
};

function getBlocker(LoggedInUser, account, section) {
  if (!LoggedInUser) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "mustBeLoggedIn",
      defaultMessage: [{
        "type": 0,
        "value": "You must be logged in to see this page"
      }]
    });
  } else if (!account) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "3ABdi3",
      defaultMessage: [{
        "type": 0,
        "value": "This account doesn't exist"
      }]
    });
  } else if (account.isIncognito) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "ZonfjV",
      defaultMessage: [{
        "type": 0,
        "value": "You cannot edit this collective"
      }]
    });
  } // Check permissions


  const isAdmin = LoggedInUser.isAdminOfCollective(account);

  if (_components_admin_panel_constants__WEBPACK_IMPORTED_MODULE_10__/* .SECTIONS_ACCESSIBLE_TO_ACCOUNTANTS.includes */ .aD.includes(section)) {
    if (!isAdmin && !LoggedInUser.hasRole(_lib_constants_roles__WEBPACK_IMPORTED_MODULE_5__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT, account)) {
      return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
        id: "9FWGOh",
        defaultMessage: [{
          "type": 0,
          "value": "You need to be logged in as an admin or accountant to view this page"
        }]
      });
    }
  } else if (!isAdmin) {
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_3__.FormattedMessage, {
      id: "AQNF/n",
      defaultMessage: [{
        "type": 0,
        "value": "You need to be logged in as an admin"
      }]
    });
  }
}

const getIsAccountantOnly = (LoggedInUser, account) => {
  return LoggedInUser && !LoggedInUser.isAdminOfCollective(account) && LoggedInUser.hasRole(_lib_constants_roles__WEBPACK_IMPORTED_MODULE_5__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT, account);
};

const AdminPanelPage = () => {
  const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();
  const {
    slug,
    section,
    subpath
  } = router.query;
  const intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.useIntl)();
  const {
    LoggedInUser,
    loadingLoggedInUser
  } = (0,_lib_hooks_useLoggedInUser__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)();
  const {
    data,
    loading
  } = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.useQuery)(_components_admin_panel_queries__WEBPACK_IMPORTED_MODULE_11__/* .adminPanelQuery */ .l, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug
    }
  });
  const account = data?.account;
  const notification = getNotification(intl, account);
  const selectedSection = section || getDefaultSectionForAccount(account, LoggedInUser);
  const isLoading = loading || loadingLoggedInUser;
  const blocker = !isLoading && getBlocker(LoggedInUser, account, selectedSection);
  const titleBase = account?.isHost ? intl.formatMessage({
    id: "AdminPanel.button",
    defaultMessage: [{
      "type": 0,
      "value": "Admin"
    }]
  }) : intl.formatMessage({
    id: "Settings",
    defaultMessage: [{
      "type": 0,
      "value": "Settings"
    }]
  });
  return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_admin_panel_AdminPanelContext__WEBPACK_IMPORTED_MODULE_8__/* .AdminPanelContext.Provider */ .U.Provider, {
    value: {
      selectedSection
    },
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_components_Page__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
      noRobots: true,
      collective: account,
      title: account ? `${account.name} - ${titleBase}` : titleBase,
      children: [!blocker && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_admin_panel_TopBar__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
        isLoading: isLoading,
        collective: data?.account,
        collectiveSlug: slug,
        selectedSection: selectedSection,
        display: ['flex', null, 'none']
      }), Boolean(notification) && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_NotificationBar__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .ZP, _objectSpread({}, notification)), blocker ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_components_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Flex */ .kC, {
        flexDirection: "column",
        alignItems: "center",
        my: 6,
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_MessageBox__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          type: "warning",
          mb: 4,
          maxWidth: 400,
          withIcon: true,
          children: blocker
        }), !LoggedInUser && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_SignInOrJoinFree__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .ZP, {
          form: "signin",
          disableSignup: true
        })]
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_components_Grid__WEBPACK_IMPORTED_MODULE_14__/* .Grid */ .rj, {
        gridTemplateColumns: ['1fr', null, '208px 1fr'],
        maxWidth: 1280,
        minHeight: 600,
        gridGap: 56,
        m: "0 auto",
        px: 3,
        py: 4,
        "data-cy": "admin-panel-container",
        children: [/*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_admin_panel_SideBar__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          isLoading: isLoading,
          collective: account,
          selectedSection: selectedSection,
          display: ['none', null, 'block'],
          isAccountantOnly: getIsAccountantOnly(LoggedInUser, account)
        }), (0,_lib_policies__WEBPACK_IMPORTED_MODULE_21__/* .require2FAForAdmins */ .u)(account) && LoggedInUser && !LoggedInUser.hasTwoFactorAuth ? /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_TwoFactorAuthRequiredMessage__WEBPACK_IMPORTED_MODULE_19__/* .TwoFactorAuthRequiredMessage */ .l, {
          mt: [null, null, '64px']
        }) : /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx(_components_admin_panel_AdminPanelSection__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          section: selectedSection,
          isLoading: isLoading,
          collective: account,
          subpath: subpath
        })]
      })]
    })
  });
};

AdminPanelPage.getInitialProps = () => {
  return {
    scripts: {
      googleMaps: true
    } // TODO: This should be enabled only for events

  };
};

AdminPanelPage.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getInitialProps",
    "docblock": null,
    "modifiers": ["static"],
    "params": [],
    "returns": null
  }],
  "displayName": "AdminPanelPage"
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdminPanelPage);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 46224:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "confirmOrderMutation": () => (/* binding */ confirmOrderMutation),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1712);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29114);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apollo_client__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95159);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13126);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_intl__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32651);
/* harmony import */ var _lib_stripe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(79936);
/* harmony import */ var _components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(54812);
/* harmony import */ var _components_Container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69078);
/* harmony import */ var _components_MessageBox__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(37278);
/* harmony import */ var _components_UserProvider__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(51927);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_8__]);
_components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_8__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }















class ConfirmOrderPage extends (react__WEBPACK_IMPORTED_MODULE_1___default().Component) {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "state", {
      status: ConfirmOrderPage.SUBMITTING,
      isRequestSent: false,
      error: null
    });

    _defineProperty(this, "handleStripeError", async ({
      id,
      stripeError: {
        message,
        account,
        response
      }
    }) => {
      if (!response) {
        this.setState({
          status: ConfirmOrderPage.ERROR,
          error: message
        });
        return;
      }

      if (response.paymentIntent) {
        const stripe = await (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_7__/* .getStripe */ .d2)(null, account);
        const result = await stripe.handleCardAction(response.paymentIntent.client_secret);

        if (result.error) {
          this.setState({
            status: ConfirmOrderPage.ERROR,
            error: result.error.message
          });
        }

        if (result.paymentIntent && result.paymentIntent.status === 'requires_confirmation') {
          this.triggerRequest({
            id
          });
        }
      }
    });
  }

  static getInitialProps({
    query
  }) {
    return {
      id: parseInt(query.id)
    };
  }

  componentDidMount() {
    if (!this.props.loadingLoggedInUser && this.props.LoggedInUser) {
      return this.triggerRequest();
    }
  }

  componentDidUpdate() {
    if (!this.state.isRequestSent && !this.props.loadingLoggedInUser && this.props.LoggedInUser) {
      return this.triggerRequest();
    }
  }

  async triggerRequest() {
    try {
      this.setState({
        isRequestSent: true
      });
      const res = await this.props.confirmOrder({
        variables: {
          order: {
            legacyId: this.props.id
          }
        }
      });
      const orderConfirmed = res.data.confirmOrder;

      if (orderConfirmed.stripeError) {
        this.handleStripeError(orderConfirmed);
      } else {
        this.props.router.replace(`/${orderConfirmed.order.fromAccount.slug}/admin/payment-methods?successType=payment`);
      }
    } catch (e) {
      const error = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(e, 'graphQLErrors.0') || e;
      this.setState({
        status: ConfirmOrderPage.ERROR,
        error: error.message
      });
    }
  }

  render() {
    const {
      status,
      error
    } = this.state;
    return /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      title: "Order confirmation",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_components_Container__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        display: "flex",
        py: [5, 6],
        px: 2,
        flexDirection: "column",
        alignItems: "center",
        background: "linear-gradient(180deg, #EBF4FF, #FFFFFF)",
        children: [status === ConfirmOrderPage.SUBMITTING && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_components_MessageBox__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          type: "info",
          isLoading: true,
          children: /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(react_intl__WEBPACK_IMPORTED_MODULE_5__.FormattedMessage, {
            id: "Order.Confirm.Processing",
            defaultMessage: [{
              "type": 0,
              "value": "Confirming your payment method…"
            }]
          })
        }), status === ConfirmOrderPage.ERROR && /*#__PURE__*/react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx(_components_MessageBox__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
          type: "error",
          withIcon: true,
          children: error
        })]
      })
    });
  }

}

_defineProperty(ConfirmOrderPage, "SUBMITTING", 1);

_defineProperty(ConfirmOrderPage, "ERROR", 3);

const confirmOrderMutation = _apollo_client__WEBPACK_IMPORTED_MODULE_2__.gql`
  mutation ConfirmOrder($order: OrderReferenceInput!) {
    confirmOrder(order: $order) {
      order {
        id
        status
        transactions {
          id
        }
        fromAccount {
          id
          slug
        }
      }
      stripeError {
        message
        account
        response
      }
    }
  }
`;
const addConfirmOrderMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_3__.graphql)(confirmOrderMutation, {
  name: 'confirmOrder',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_6__/* .API_V2_CONTEXT */ .T
  }
});
ConfirmOrderPage.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getInitialProps",
    "docblock": null,
    "modifiers": ["static"],
    "params": [{
      "name": "{ query }",
      "type": null
    }],
    "returns": null
  }, {
    "name": "triggerRequest",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "handleStripeError",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "{ id, stripeError: { message, account, response } }",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "ConfirmOrderPage",
  "props": {
    "id": {
      "description": "OrderId",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "confirmOrder": {
      "description": "@ignore from graphql",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "loadingLoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "bool"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "@ignore from withRouter",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_components_UserProvider__WEBPACK_IMPORTED_MODULE_11__/* .withUser */ .ns)(addConfirmOrderMutation((0,next_router__WEBPACK_IMPORTED_MODULE_4__.withRouter)(ConfirmOrderPage))));
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 29114:
/***/ ((module) => {

module.exports = require("@apollo/client");

/***/ }),

/***/ 72743:
/***/ ((module) => {

module.exports = require("@apollo/client/react/components");

/***/ }),

/***/ 95159:
/***/ ((module) => {

module.exports = require("@apollo/client/react/hoc");

/***/ }),

/***/ 13831:
/***/ ((module) => {

module.exports = require("@dnd-kit/core");

/***/ }),

/***/ 99565:
/***/ ((module) => {

module.exports = require("@dnd-kit/sortable");

/***/ }),

/***/ 92813:
/***/ ((module) => {

module.exports = require("@dnd-kit/utilities");

/***/ }),

/***/ 27943:
/***/ ((module) => {

module.exports = require("@material-ui/core/Switch");

/***/ }),

/***/ 48308:
/***/ ((module) => {

module.exports = require("@material-ui/core/styles");

/***/ }),

/***/ 42558:
/***/ ((module) => {

module.exports = require("@opencollective/taxes");

/***/ }),

/***/ 3115:
/***/ ((module) => {

module.exports = require("@sentry/browser");

/***/ }),

/***/ 64515:
/***/ ((module) => {

module.exports = require("@stripe/react-stripe-js");

/***/ }),

/***/ 33244:
/***/ ((module) => {

module.exports = require("@styled-icons/bootstrap/ShieldFillCheck");

/***/ }),

/***/ 7257:
/***/ ((module) => {

module.exports = require("@styled-icons/bootstrap/ShieldFillExclamation");

/***/ }),

/***/ 58847:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Check");

/***/ }),

/***/ 47435:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/CheckShield");

/***/ }),

/***/ 18022:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/ChevronDown");

/***/ }),

/***/ 28054:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/ChevronRight");

/***/ }),

/***/ 52160:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/ChevronUp");

/***/ }),

/***/ 93842:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/DotsVerticalRounded");

/***/ }),

/***/ 51104:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Exit");

/***/ }),

/***/ 10054:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/InfoCircle");

/***/ }),

/***/ 99812:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/LoaderAlt");

/***/ }),

/***/ 11515:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Lock");

/***/ }),

/***/ 24594:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/MinusCircle");

/***/ }),

/***/ 23263:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Plus");

/***/ }),

/***/ 42161:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/SliderAlt");

/***/ }),

/***/ 60476:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Support");

/***/ }),

/***/ 50359:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Trash");

/***/ }),

/***/ 99232:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Undo");

/***/ }),

/***/ 40137:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-regular/Unlink");

/***/ }),

/***/ 39553:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-solid/Bank");

/***/ }),

/***/ 42126:
/***/ ((module) => {

module.exports = require("@styled-icons/boxicons-solid/Lock");

/***/ }),

/***/ 60270:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Alipay");

/***/ }),

/***/ 97244:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/ApplePay");

/***/ }),

/***/ 45933:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Github");

/***/ }),

/***/ 38254:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/GooglePay");

/***/ }),

/***/ 3592:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Mastodon");

/***/ }),

/***/ 54427:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Paypal");

/***/ }),

/***/ 64374:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Slack");

/***/ }),

/***/ 14638:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-brands/Twitter");

/***/ }),

/***/ 81594:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Ban");

/***/ }),

/***/ 19153:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Bars");

/***/ }),

/***/ 41032:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/CaretDown");

/***/ }),

/***/ 2331:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/CaretUp");

/***/ }),

/***/ 9443:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Check");

/***/ }),

/***/ 62876:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/CheckCircle");

/***/ }),

/***/ 86613:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/ChevronDown/ChevronDown");

/***/ }),

/***/ 63486:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/ChevronUp/ChevronUp");

/***/ }),

/***/ 55457:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/CreditCard");

/***/ }),

/***/ 63387:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/ExchangeAlt");

/***/ }),

/***/ 83514:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/ExclamationCircle");

/***/ }),

/***/ 25730:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/ExclamationTriangle");

/***/ }),

/***/ 86954:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/InfoCircle");

/***/ }),

/***/ 64965:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/MoneyCheck");

/***/ }),

/***/ 77192:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Plus");

/***/ }),

/***/ 26201:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Redo");

/***/ }),

/***/ 97881:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/Times");

/***/ }),

/***/ 8866:
/***/ ((module) => {

module.exports = require("@styled-icons/fa-solid/University");

/***/ }),

/***/ 56758:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/AlertTriangle");

/***/ }),

/***/ 62941:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ArrowLeft");

/***/ }),

/***/ 22198:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ArrowRight");

/***/ }),

/***/ 61975:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Calendar");

/***/ }),

/***/ 89711:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ChevronDown");

/***/ }),

/***/ 87208:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ChevronDown/ChevronDown");

/***/ }),

/***/ 76841:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ChevronUp");

/***/ }),

/***/ 29872:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ChevronUp/ChevronUp");

/***/ }),

/***/ 11479:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Clipboard");

/***/ }),

/***/ 32431:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Copy");

/***/ }),

/***/ 57847:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Download");

/***/ }),

/***/ 70441:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/ExternalLink");

/***/ }),

/***/ 40710:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/FileText");

/***/ }),

/***/ 57153:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Info");

/***/ }),

/***/ 371:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Lock");

/***/ }),

/***/ 71362:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Mail");

/***/ }),

/***/ 67520:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Maximize2");

/***/ }),

/***/ 75827:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/MessageSquare");

/***/ }),

/***/ 13371:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Move");

/***/ }),

/***/ 83849:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Pause");

/***/ }),

/***/ 71178:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Play");

/***/ }),

/***/ 62556:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/PlusCircle");

/***/ }),

/***/ 52021:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Settings");

/***/ }),

/***/ 72142:
/***/ ((module) => {

module.exports = require("@styled-icons/feather/Trash2");

/***/ }),

/***/ 50567:
/***/ ((module) => {

module.exports = require("@styled-icons/icomoon/ArrowLeft2");

/***/ }),

/***/ 89457:
/***/ ((module) => {

module.exports = require("@styled-icons/icomoon/ArrowRight2");

/***/ }),

/***/ 73949:
/***/ ((module) => {

module.exports = require("@styled-icons/icomoon/Blog");

/***/ }),

/***/ 21522:
/***/ ((module) => {

module.exports = require("@styled-icons/icomoon/PriceTags");

/***/ }),

/***/ 4965:
/***/ ((module) => {

module.exports = require("@styled-icons/ionicons-solid/Expand");

/***/ }),

/***/ 10208:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Add");

/***/ }),

/***/ 38218:
/***/ ((module) => {

module.exports = require("@styled-icons/material/ArrowBack");

/***/ }),

/***/ 93974:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Clear");

/***/ }),

/***/ 20384:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Close");

/***/ }),

/***/ 31004:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Delete");

/***/ }),

/***/ 68765:
/***/ ((module) => {

module.exports = require("@styled-icons/material/DragIndicator");

/***/ }),

/***/ 10274:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Edit");

/***/ }),

/***/ 6534:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Lock");

/***/ }),

/***/ 34427:
/***/ ((module) => {

module.exports = require("@styled-icons/material/Mail");

/***/ }),

/***/ 47505:
/***/ ((module) => {

module.exports = require("@styled-icons/material/RadioButtonChecked");

/***/ }),

/***/ 24545:
/***/ ((module) => {

module.exports = require("@styled-icons/material/RadioButtonUnchecked");

/***/ }),

/***/ 95830:
/***/ ((module) => {

module.exports = require("@styled-icons/material/ShowChart");

/***/ }),

/***/ 80924:
/***/ ((module) => {

module.exports = require("@styled-icons/octicons/Mail");

/***/ }),

/***/ 21825:
/***/ ((module) => {

module.exports = require("@styled-icons/octicons/Question");

/***/ }),

/***/ 83002:
/***/ ((module) => {

module.exports = require("@styled-icons/remix-line/Question");

/***/ }),

/***/ 42038:
/***/ ((module) => {

module.exports = require("@styled-system/css");

/***/ }),

/***/ 45284:
/***/ ((module) => {

module.exports = require("@styled-system/prop-types");

/***/ }),

/***/ 19099:
/***/ ((module) => {

module.exports = require("@styled-system/theme-get");

/***/ }),

/***/ 30417:
/***/ ((module) => {

module.exports = require("@transferwise/approve-api-action-helpers");

/***/ }),

/***/ 28992:
/***/ ((module) => {

module.exports = require("country-currency-emoji-flags");

/***/ }),

/***/ 69031:
/***/ ((module) => {

module.exports = require("cross-fetch");

/***/ }),

/***/ 71934:
/***/ ((module) => {

module.exports = require("currency-symbol-map");

/***/ }),

/***/ 1635:
/***/ ((module) => {

module.exports = require("dayjs");

/***/ }),

/***/ 14195:
/***/ ((module) => {

module.exports = require("dayjs/plugin/relativeTime");

/***/ }),

/***/ 53291:
/***/ ((module) => {

module.exports = require("dayjs/plugin/timezone");

/***/ }),

/***/ 36619:
/***/ ((module) => {

module.exports = require("dayjs/plugin/utc");

/***/ }),

/***/ 28109:
/***/ ((module) => {

module.exports = require("file-saver");

/***/ }),

/***/ 92869:
/***/ ((module) => {

module.exports = require("focus-trap-react");

/***/ }),

/***/ 2296:
/***/ ((module) => {

module.exports = require("formik");

/***/ }),

/***/ 99344:
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ 70154:
/***/ ((module) => {

module.exports = require("load-script");

/***/ }),

/***/ 99226:
/***/ ((module) => {

module.exports = require("lodash/assign");

/***/ }),

/***/ 59969:
/***/ ((module) => {

module.exports = require("lodash/capitalize");

/***/ }),

/***/ 12154:
/***/ ((module) => {

module.exports = require("lodash/clamp");

/***/ }),

/***/ 59591:
/***/ ((module) => {

module.exports = require("lodash/cloneDeep");

/***/ }),

/***/ 39131:
/***/ ((module) => {

module.exports = require("lodash/compact");

/***/ }),

/***/ 93908:
/***/ ((module) => {

module.exports = require("lodash/debounce");

/***/ }),

/***/ 77047:
/***/ ((module) => {

module.exports = require("lodash/difference");

/***/ }),

/***/ 90857:
/***/ ((module) => {

module.exports = require("lodash/endsWith");

/***/ }),

/***/ 9368:
/***/ ((module) => {

module.exports = require("lodash/filter");

/***/ }),

/***/ 76918:
/***/ ((module) => {

module.exports = require("lodash/find");

/***/ }),

/***/ 98145:
/***/ ((module) => {

module.exports = require("lodash/findLast");

/***/ }),

/***/ 22265:
/***/ ((module) => {

module.exports = require("lodash/first");

/***/ }),

/***/ 58579:
/***/ ((module) => {

module.exports = require("lodash/flatten");

/***/ }),

/***/ 1712:
/***/ ((module) => {

module.exports = require("lodash/get");

/***/ }),

/***/ 98492:
/***/ ((module) => {

module.exports = require("lodash/groupBy");

/***/ }),

/***/ 98210:
/***/ ((module) => {

module.exports = require("lodash/has");

/***/ }),

/***/ 74292:
/***/ ((module) => {

module.exports = require("lodash/identity");

/***/ }),

/***/ 41238:
/***/ ((module) => {

module.exports = require("lodash/includes");

/***/ }),

/***/ 53493:
/***/ ((module) => {

module.exports = require("lodash/intersection");

/***/ }),

/***/ 52626:
/***/ ((module) => {

module.exports = require("lodash/invert");

/***/ }),

/***/ 35599:
/***/ ((module) => {

module.exports = require("lodash/isArray");

/***/ }),

/***/ 72327:
/***/ ((module) => {

module.exports = require("lodash/isBoolean");

/***/ }),

/***/ 89699:
/***/ ((module) => {

module.exports = require("lodash/isEmpty");

/***/ }),

/***/ 40113:
/***/ ((module) => {

module.exports = require("lodash/isEqual");

/***/ }),

/***/ 77876:
/***/ ((module) => {

module.exports = require("lodash/isError");

/***/ }),

/***/ 86069:
/***/ ((module) => {

module.exports = require("lodash/isNil");

/***/ }),

/***/ 48524:
/***/ ((module) => {

module.exports = require("lodash/isNull");

/***/ }),

/***/ 75795:
/***/ ((module) => {

module.exports = require("lodash/isObject");

/***/ }),

/***/ 22133:
/***/ ((module) => {

module.exports = require("lodash/isUndefined");

/***/ }),

/***/ 51546:
/***/ ((module) => {

module.exports = require("lodash/kebabCase");

/***/ }),

/***/ 83824:
/***/ ((module) => {

module.exports = require("lodash/last");

/***/ }),

/***/ 36625:
/***/ ((module) => {

module.exports = require("lodash/max");

/***/ }),

/***/ 11341:
/***/ ((module) => {

module.exports = require("lodash/maxBy");

/***/ }),

/***/ 61831:
/***/ ((module) => {

module.exports = require("lodash/merge");

/***/ }),

/***/ 604:
/***/ ((module) => {

module.exports = require("lodash/min");

/***/ }),

/***/ 63901:
/***/ ((module) => {

module.exports = require("lodash/omit");

/***/ }),

/***/ 66011:
/***/ ((module) => {

module.exports = require("lodash/omitBy");

/***/ }),

/***/ 49949:
/***/ ((module) => {

module.exports = require("lodash/orderBy");

/***/ }),

/***/ 96839:
/***/ ((module) => {

module.exports = require("lodash/padStart");

/***/ }),

/***/ 32027:
/***/ ((module) => {

module.exports = require("lodash/partition");

/***/ }),

/***/ 84159:
/***/ ((module) => {

module.exports = require("lodash/pick");

/***/ }),

/***/ 20808:
/***/ ((module) => {

module.exports = require("lodash/pickBy");

/***/ }),

/***/ 47869:
/***/ ((module) => {

module.exports = require("lodash/round");

/***/ }),

/***/ 24298:
/***/ ((module) => {

module.exports = require("lodash/set");

/***/ }),

/***/ 71156:
/***/ ((module) => {

module.exports = require("lodash/size");

/***/ }),

/***/ 23672:
/***/ ((module) => {

module.exports = require("lodash/sortBy");

/***/ }),

/***/ 35007:
/***/ ((module) => {

module.exports = require("lodash/startCase");

/***/ }),

/***/ 79800:
/***/ ((module) => {

module.exports = require("lodash/sumBy");

/***/ }),

/***/ 19358:
/***/ ((module) => {

module.exports = require("lodash/toUpper");

/***/ }),

/***/ 75142:
/***/ ((module) => {

module.exports = require("lodash/trim");

/***/ }),

/***/ 51858:
/***/ ((module) => {

module.exports = require("lodash/truncate");

/***/ }),

/***/ 18459:
/***/ ((module) => {

module.exports = require("lodash/uniq");

/***/ }),

/***/ 69309:
/***/ ((module) => {

module.exports = require("lodash/uniqBy");

/***/ }),

/***/ 73022:
/***/ ((module) => {

module.exports = require("lodash/upperCase");

/***/ }),

/***/ 57260:
/***/ ((module) => {

module.exports = require("lodash/values");

/***/ }),

/***/ 17809:
/***/ ((module) => {

module.exports = require("memoize-one");

/***/ }),

/***/ 3280:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 92796:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/head-manager-context.js");

/***/ }),

/***/ 94957:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/head.js");

/***/ }),

/***/ 34014:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/i18n/normalize-locale-path.js");

/***/ }),

/***/ 50744:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config-context.js");

/***/ }),

/***/ 35843:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/image-config.js");

/***/ }),

/***/ 78524:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/is-plain-object.js");

/***/ }),

/***/ 95832:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/loadable.js");

/***/ }),

/***/ 78020:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/mitt.js");

/***/ }),

/***/ 64406:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/page-path/denormalize-page-path.js");

/***/ }),

/***/ 24964:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router-context.js");

/***/ }),

/***/ 11751:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 46220:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/compare-states.js");

/***/ }),

/***/ 10299:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/format-next-pathname-info.js");

/***/ }),

/***/ 23938:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/format-url.js");

/***/ }),

/***/ 29565:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/get-asset-path-from-route.js");

/***/ }),

/***/ 35789:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/get-next-pathname-info.js");

/***/ }),

/***/ 1897:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/is-bot.js");

/***/ }),

/***/ 1428:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/is-dynamic.js");

/***/ }),

/***/ 28854:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 91292:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/parse-relative-url.js");

/***/ }),

/***/ 34567:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/path-has-prefix.js");

/***/ }),

/***/ 80979:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/querystring.js");

/***/ }),

/***/ 93297:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 36052:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/resolve-rewrites.js");

/***/ }),

/***/ 84226:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/route-matcher.js");

/***/ }),

/***/ 95052:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/router/utils/route-regex.js");

/***/ }),

/***/ 59232:
/***/ ((module) => {

module.exports = require("next/dist/shared/lib/utils.js");

/***/ }),

/***/ 40968:
/***/ ((module) => {

module.exports = require("next/head");

/***/ }),

/***/ 71853:
/***/ ((module) => {

module.exports = require("next/router");

/***/ }),

/***/ 42863:
/***/ ((module) => {

module.exports = require("payment");

/***/ }),

/***/ 42042:
/***/ ((module) => {

module.exports = require("polished");

/***/ }),

/***/ 580:
/***/ ((module) => {

module.exports = require("prop-types");

/***/ }),

/***/ 43860:
/***/ ((module) => {

module.exports = require("qrcode.react");

/***/ }),

/***/ 16689:
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ 28403:
/***/ ((module) => {

module.exports = require("react-apexcharts");

/***/ }),

/***/ 66405:
/***/ ((module) => {

module.exports = require("react-dom");

/***/ }),

/***/ 95050:
/***/ ((module) => {

module.exports = require("react-flip-move");

/***/ }),

/***/ 48580:
/***/ ((module) => {

module.exports = require("react-geosuggest");

/***/ }),

/***/ 13126:
/***/ ((module) => {

module.exports = require("react-intl");

/***/ }),

/***/ 98355:
/***/ ((module) => {

module.exports = require("react-password-strength-bar");

/***/ }),

/***/ 42932:
/***/ ((module) => {

module.exports = require("react-popper");

/***/ }),

/***/ 35073:
/***/ ((module) => {

module.exports = require("react-scrollchor");

/***/ }),

/***/ 61929:
/***/ ((module) => {

module.exports = require("react-select");

/***/ }),

/***/ 31325:
/***/ ((module) => {

module.exports = require("react-select/creatable");

/***/ }),

/***/ 37597:
/***/ ((module) => {

module.exports = require("react-text-mask");

/***/ }),

/***/ 20997:
/***/ ((module) => {

module.exports = require("react/jsx-runtime");

/***/ }),

/***/ 86109:
/***/ ((module) => {

module.exports = require("sanitize-html");

/***/ }),

/***/ 73673:
/***/ ((module) => {

module.exports = require("slugify");

/***/ }),

/***/ 84103:
/***/ ((module) => {

module.exports = require("spdx-license-list");

/***/ }),

/***/ 99200:
/***/ ((module) => {

module.exports = require("speakeasy");

/***/ }),

/***/ 57518:
/***/ ((module) => {

module.exports = require("styled-components");

/***/ }),

/***/ 95834:
/***/ ((module) => {

module.exports = require("styled-system");

/***/ }),

/***/ 71564:
/***/ ((module) => {

module.exports = require("validator");

/***/ }),

/***/ 94970:
/***/ ((module) => {

module.exports = import("diff");;

/***/ }),

/***/ 85598:
/***/ ((module) => {

module.exports = import("react-animate-height");;

/***/ }),

/***/ 46555:
/***/ ((module) => {

module.exports = import("uuid");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [676,1664,5675,5152,7079,2328,5656,8101,2352,7278,5582,3169,3908,4842,9156,7262,1433,1808,1012,2631,7619,7632,2143,986,242,3129,8185,5993,7965,9468,8720,7772,414,9591,5471,2566,8247,2221,3112,8613], () => (__webpack_exec__(88855)));
module.exports = __webpack_exports__;

})();