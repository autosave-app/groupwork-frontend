{"version":3,"file":"static/chunks/9139-88e128ea56b0072d.js","mappings":"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","sources":["webpack://_N_E/./components/RichTextEditor.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@styled-system/css';\nimport { get } from 'lodash';\nimport styled from 'styled-components';\nimport { v4 as uuid } from 'uuid';\nimport { isURL } from 'validator';\n\nimport { uploadImageWithXHR } from '../lib/api';\nimport { CustomScrollbarCSS } from '../lib/styled-components-shared-styles';\nimport { stripHTML } from '../lib/utils';\n\nimport Container from './Container';\nimport HTMLContent from './HTMLContent';\nimport LoadingPlaceholder from './LoadingPlaceholder';\nimport MessageBox from './MessageBox';\nimport StyledTag from './StyledTag';\n\nconst TrixEditorContainer = styled.div`\n  ${props =>\n    props.withBorders &&\n    css({\n      border: '1px solid',\n      borderColor: !props.error ? 'black.300' : 'red.300',\n      borderRadius: 10,\n      padding: 3,\n    })}\n\n  trix-editor {\n    border: none;\n    padding: 0;\n    margin-top: 8px;\n    padding-top: 8px;\n    outline-offset: 0.5em;\n    ${CustomScrollbarCSS}\n    &::-webkit-scrollbar {\n      width: 8px;\n    }\n    ${props => Boolean(props.editorMaxHeight) && css({ overflowY: 'scroll' })}\n\n    // Outline (only when there's no border)\n    ${props =>\n      !props.withBorders &&\n      css({\n        outline: !props.error ? 'none' : `1px dashed ${props.theme.colors.red[300]}`,\n        '&:focus': {\n          outline: `1px dashed ${props.theme.colors.black[200]}`,\n        },\n      })}\n\n    // Placeholder\n    &:empty:not(:focus)::before {\n      color: ${props => props.theme.colors.black[400]};\n    }\n\n    // Image captions are disabled\n    figcaption {\n      display: none;\n    }\n\n    ${props =>\n      css({\n        minHeight: props.editorMinHeight,\n        maxHeight: props.editorMaxHeight,\n      })}\n  }\n\n  trix-toolbar {\n    min-height: 40px;\n    background: ${props => props.toolbarBackgroundColor};\n    ${props => !props.withBorders && `box-shadow: 0px 5px 3px -3px rgba(0, 0, 0, 0.1);`}\n    z-index: 2;\n    margin-bottom: 8px;\n    ${props => props.withBorders && `min-height: 0px; margin-bottom: 0;`}\n\n    .trix-button-group {\n      border-radius: 6px;\n      border-color: #c4c7cc;\n      margin-bottom: 0;\n      background: white;\n    }\n\n    .trix-button {\n      border-bottom: none;\n      display: inline-block;\n      height: auto;\n\n      &:hover {\n        background: ${props => props.theme.colors.blue[100]};\n      }\n\n      &.trix-active {\n        background: ${props => props.theme.colors.blue[200]};\n      }\n\n      &::before,\n      &.trix-active::before {\n        margin: 4px; // Use this to reduce the icons size\n      }\n    }\n\n    /** Hide some buttons on the simplified version */\n    ${props =>\n      props.version === 'simplified' &&\n      css({\n        '.trix-button-group--file-tools': {\n          display: 'none',\n        },\n        '.trix-button-group--block-tools .trix-button:not(.trix-button--icon-number-list):not(.trix-button--icon-bullet-list)':\n          {\n            display: 'none',\n          },\n        '.trix-button--icon-bullet-list': {\n          borderLeft: 'none',\n        },\n      })}\n\n    /** Hide some buttons on mobile */\n    @media (max-width: 500px) {\n      .trix-button--icon-strike,\n      .trix-button--icon-number-list,\n      .trix-button--icon-decrease-nesting-level,\n      .trix-button--icon-increase-nesting-level {\n        display: none;\n      }\n    }\n\n    /** Sticky mode */\n    ${props =>\n      props.withStickyToolbar &&\n      css({\n        position: 'sticky',\n        top: props.toolbarTop || 0,\n        marginTop: props.toolbarOffsetY,\n        p: '10px',\n      })}\n\n    /** Custom icons */\n    .trix-button--icon-attach::before {\n      // See https://feathericons.com/?query=image\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'/%3E%3Ccircle cx='8.5' cy='8.5' r='1.5'/%3E%3Cpolyline points='21 15 16 10 5 21'/%3E%3C/svg%3E\");\n    }\n    .trix-button--video-attach::before {\n      top: 8%;\n      bottom: 4%;\n      // See https://feathericons.com/?query=video\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-video'%3E%3Cpolygon points='23 7 16 12 23 17 23 7'%3E%3C/polygon%3E%3Crect x='1' y='5' width='15' height='14' rx='2' ry='2'%3E%3C/rect%3E%3C/svg%3E\");\n    }\n  } // End of toolbar customization\n\n  /** Disabled mode */\n  ${props =>\n    props.isDisabled &&\n    css({\n      pointerEvents: 'none',\n      cursor: 'not-allowed',\n      background: '#f3f3f3',\n      'trix-toolbar,.trix-button-group': {\n        background: '#f3f3f3 !important',\n      },\n    })}\n`;\n\nconst SUPPORTED_SERVICE_URLS = { youTube: 'https://www.youtube-nocookie.com/embed/', anchorFm: 'https://anchor.fm/' };\n\n/**\n * A React wrapper around the Trix library to edit rich text.\n * Produces HTML and clear text.\n */\nexport default class RichTextEditor extends React.Component {\n  static propTypes = {\n    /** If not provided, an id will be automatically generated which will require a component update */\n    id: PropTypes.string,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    placeholder: PropTypes.string,\n    toolbarBackgroundColor: PropTypes.string.isRequired,\n    /** A unique identified for the category of uploaded files. Required if version is not \"simplified\" */\n    kind: PropTypes.string,\n    /** Font size for the text */\n    fontSize: PropTypes.string,\n    autoFocus: PropTypes.bool,\n    /** Called when text is changed with html content as first param and text content as second param */\n    onChange: PropTypes.func,\n    /** A name for the input */\n    inputName: PropTypes.string,\n    /** Change this prop to reset the value */\n    reset: PropTypes.any,\n    /** If true, max text length will be displayed at the bottom right */\n    showCount: PropTypes.bool,\n    /** max length which is allowed */\n    maxLength: PropTypes.number,\n    /** Whether the toolbar should stick to the top */\n    withStickyToolbar: PropTypes.bool,\n    /** This component is borderless by default. Set this to `true` to change that. */\n    withBorders: PropTypes.bool,\n    /** This component is borderless by default. Set this to `true` to change that. */\n    version: PropTypes.oneOf(['default', 'simplified']),\n    /** Whether the field should be disabled */\n    disabled: PropTypes.bool,\n    /** If position is sticky, this prop defines the `top` property. Support responsive arrays */\n    toolbarTop: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.array]),\n    /** Useful to compensate the height of the toolbar when editing inline */\n    toolbarOffsetY: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.array]),\n    /** Min height for the full component */\n    editorMinHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.array]),\n    editorMaxHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.array]),\n    /** If truthy, will display a red outline */\n    error: PropTypes.any,\n    'data-cy': PropTypes.string,\n    videoEmbedEnabled: PropTypes.bool,\n    /** Called when an image is being uploaded to set a boolean */\n    setUploading: PropTypes.func,\n  };\n\n  static defaultProps = {\n    withStickyToolbar: false,\n    toolbarTop: 0,\n    toolbarOffsetY: -62, // Default Trix toolbar height\n    inputName: 'content',\n    toolbarBackgroundColor: 'white',\n    version: 'default',\n    'data-cy': 'RichTextEditor',\n    videoEmbedEnabled: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.mainContainerRef = React.createRef();\n    this.state = { id: props.id, error: null };\n    this.isReady = false;\n\n    if (typeof window !== 'undefined') {\n      this.Trix = require('trix');\n      this.Trix.config.blockAttributes.heading1 = { tagName: 'h3' };\n      this.Trix.config.attachments.preview.caption = { name: false, size: false };\n    }\n  }\n\n  componentDidMount() {\n    if (!this.state.id) {\n      this.setState({ id: uuid() });\n    } else if (!this.isReady) {\n      this.initialize();\n    }\n  }\n\n  componentDidUpdate(oldProps) {\n    if (!this.isReady) {\n      this.initialize();\n    } else if (oldProps.reset !== this.props.reset) {\n      this.editorRef.current.editor.loadHTML('');\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.isReady) {\n      this.editorRef.current.removeEventListener('trix-change', this.handleChange);\n      this.editorRef.current.removeEventListener('trix-attachment-add', this.handleUpload);\n      this.editorRef.current.removeEventListener('trix-attachment-add', this.handleFileAccept);\n      this.editorRef.current.removeEventListener('trix-action-invoke', this.trixActionInvoke);\n    }\n  }\n\n  getEditor() {\n    return this.editorRef.current.editor;\n  }\n\n  initialize = () => {\n    if (this.Trix && this.editorRef.current) {\n      // Listen for changes\n      this.editorRef.current.addEventListener('trix-change', this.handleChange, false);\n      this.editorRef.current.addEventListener('trix-attachment-add', this.handleUpload);\n      this.editorRef.current.addEventListener('trix-file-accept', this.handleFileAccept);\n      this.editorRef.current.addEventListener('trix-action-invoke', this.trixActionInvoke);\n      this.editorRef.current.addEventListener('trix-initialize', event => {\n        if (this.props.videoEmbedEnabled) {\n          this.replaceEmbeddedIFrames(this.props.value || this.props.defaultValue);\n          this.trixEmbed(event);\n        }\n        // Some special handling for links\n        if (this.mainContainerRef.current) {\n          // We must listen when the user presses the 'Enter' key and when the user clicks the 'Link' button as well\n          const linkInput = this.mainContainerRef.current.querySelector(\"[data-trix-input][name='href']\");\n          linkInput?.addEventListener('keydown', e => {\n            if (e.key === 'Enter') {\n              this.handleLink();\n            }\n          });\n\n          const addLinkBtn = this.mainContainerRef.current.querySelector(\"[data-trix-method='setAttribute']\");\n          addLinkBtn?.addEventListener('click', this.handleLink);\n        }\n      });\n\n      // Component ready!\n      this.isReady = true;\n    }\n  };\n\n  /** ---- Trix handlers ---- */\n\n  replaceEmbeddedIFrames = value => {\n    const iframeRegex = new RegExp(`<iframe.+?iframe>`, 'ig');\n    let match;\n    let lastIndex = 0;\n\n    while ((match = iframeRegex.exec(value))) {\n      if (lastIndex === 0) {\n        this.getEditor().loadHTML('');\n      }\n      const iframe = match[0];\n      const position = match.index;\n      const preText = value.substring(lastIndex, position);\n      this.getEditor().setSelectedRange([lastIndex, position]);\n      this.getEditor().insertHTML(preText);\n      const attachment = new this.Trix.Attachment({ content: iframe });\n      this.getEditor().insertAttachment(attachment);\n      lastIndex = match.index + iframe.length;\n      const postText = value.substring(lastIndex, value.length);\n      this.getEditor().insertHTML(postText);\n    }\n  };\n\n  trixEmbed = e => {\n    const videoEmbedButton = `<button type=\"button\" tabindex=\"-1\" data-trix-action=\"x-video-dialog-open\" title=\"Attach Video\" class=\"trix-button trix-button--icon trix-button--video-attach\">Attach Video</button>`;\n    const videoEmbedDialog = `\n            <div class=\"trix-dialog\" data-trix-dialog=\"video-url\" data-trix-dialog-attribute=\"video\">\n              <div class=\"trix-dialog__link-fields\">\n                <input type=\"url\" name=\"video-url\" class=\"trix-input trix-input--dialog trix-input--dialog-embed\" placeholder=\"Enter Video URL…\" aria-label=\"Video URL\" data-trix-input=\"\">\n                <div class=\"trix-button-group\">\n                  <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"Add Video\" data-trix-action=\"x-add-embed\">\n                </div>\n              </div>\n              <strong>Note: Only YouTube and Anchor.fm links are supported.</strong>\n            </div>`;\n    const { toolbarElement } = e.target;\n    const attachFilesButton = toolbarElement.querySelector('[data-trix-action=attachFiles]');\n    attachFilesButton.insertAdjacentHTML('afterend', videoEmbedButton);\n    const trixDialog = toolbarElement.querySelector('.trix-dialog--link');\n    trixDialog.insertAdjacentHTML('afterend', videoEmbedDialog);\n  };\n\n  trixActionInvoke = e => {\n    const { toolbarElement } = e.target;\n    if (e.actionName === 'x-video-dialog-open') {\n      const attachVideoDialog = toolbarElement.querySelector('[data-trix-dialog=video-url]');\n      const attachVideoDialogInput = toolbarElement.querySelector('.trix-input--dialog-embed');\n      if (attachVideoDialog.getAttribute('data-trix-active') === '') {\n        attachVideoDialog.removeAttribute('data-trix-active');\n      } else {\n        attachVideoDialog.setAttribute('data-trix-active', '');\n        attachVideoDialogInput.removeAttribute('disabled');\n      }\n    } else if (e.actionName === 'x-add-embed') {\n      const embedLink = toolbarElement.querySelector('.trix-input--dialog-embed').value?.trim();\n      if (embedLink) {\n        this.embedIframe(embedLink);\n      }\n    }\n  };\n\n  constructVideoEmbedURL = (service, id) => {\n    if (service === 'youtube') {\n      return `${SUPPORTED_SERVICE_URLS.youTube}${id}`;\n    } /* else if (service === 'vimeo') {\n      return `https://player.vimeo.com/video/${id}`;\n    } */ else if (service === 'anchorFm') {\n      return `${SUPPORTED_SERVICE_URLS.anchorFm}${id}`;\n    } else {\n      return null;\n    }\n  };\n\n  parseServiceLink = videoLink => {\n    const regexps = {\n      youtube: new RegExp(\n        '(?:https?://)?(?:www\\\\.)?youtu(?:\\\\.be/|be\\\\.com/\\\\S*(?:watch|embed)(?:(?:(?=/[^&\\\\s?]+(?!\\\\S))/)|(?:\\\\S*v=|v/)))([^&\\\\s?]+)',\n        'i',\n      ),\n      vimeo: new RegExp(\n        '(http|https)?://(www\\\\.)?vimeo\\\\.com/(?:channels/(?:\\\\w+/)?|groups/([^/]*)/videos/|)(\\\\d+)(?:|/?)',\n      ),\n      anchorFm: /^(http|https)?:\\/\\/(www\\.)?anchor\\.fm\\/([^/]+)(\\/embed)?(\\/episodes\\/)?([^/]+)?\\/?$/,\n    };\n    for (const service in regexps) {\n      const matches = regexps[service].exec(videoLink);\n      if (matches) {\n        if (service === 'anchorFm') {\n          const podcastName = matches[3];\n          const episodeId = matches[6];\n          const podcastUrl = `${podcastName}/embed`;\n          return { service, id: episodeId ? `${podcastUrl}/episodes/${episodeId}` : podcastUrl };\n        } else {\n          return { service, id: matches[matches.length - 1] };\n        }\n      }\n    }\n    return {};\n  };\n\n  embedIframe = videoLink => {\n    const { id, service } = this.parseServiceLink(videoLink);\n    const embedLink = this.constructVideoEmbedURL(service, id);\n    if (embedLink) {\n      const sanitizedLink = embedLink.replace(/[\"\\\\]/g, ''); // Small security enhancement, prevents going out of `src`\n      const videoServices = ['youtube', 'vimeo'];\n      let attachmentData;\n      if (videoServices.includes(service)) {\n        attachmentData = {\n          contentType: '--embed-iframe-video',\n          content: `<iframe src=\"${sanitizedLink}/?showinfo=0\" width=\"100%\" height=\"394\" frameborder=\"0\" allowfullscreen/>`,\n        };\n      } else {\n        attachmentData = {\n          contentType: `--embed-iframe-${service}`,\n          content: `<iframe src=\"${sanitizedLink}\" width=\"100%\" frameborder=\"0\"/>`,\n        };\n      }\n\n      this.getEditor().insertAttachment(new this.Trix.Attachment(attachmentData));\n    }\n  };\n\n  handleChange = e => {\n    // Trigger content formatters\n    this.autolink();\n\n    // Notify parent function\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n\n    // Reset errors\n    if (this.state.error) {\n      this.setState({ error: null });\n    }\n  };\n\n  handleFileAccept = e => {\n    if (!/^image\\//.test(e.file.type)) {\n      alert('You can only upload images.');\n      e.preventDefault();\n    } else if (e.file.size > 4000000) {\n      // Prevent attaching files > 4MB\n      alert('This file is too big (max: 4mb).');\n      e.preventDefault();\n    }\n  };\n\n  handleUpload = e => {\n    const { attachment } = e;\n    const attachmentContent = get(attachment, 'attachment.attributes.values.content');\n    const isVideoAttachment =\n      attachmentContent?.includes(`<iframe src=\"${SUPPORTED_SERVICE_URLS.youTube}`) ||\n      attachmentContent?.includes(`<iframe src=\"${SUPPORTED_SERVICE_URLS.anchorFm}`);\n    if (isVideoAttachment) {\n      return;\n    } else if (!attachment.file) {\n      attachment.remove(); // Remove unknown stuff, for example when copy-pasting HTML\n      return;\n    }\n\n    this.props.setUploading?.(true);\n\n    const onProgress = progress => attachment.setUploadProgress(progress);\n    const onSuccess = fileURL => {\n      this.props.setUploading?.(false);\n      attachment.setAttributes({ url: fileURL, href: fileURL });\n    };\n    const onFailure = () => {\n      this.props.setUploading?.(false);\n      this.setState({ error: 'File upload failed' });\n      attachment.remove();\n    };\n    uploadImageWithXHR(attachment.file, this.props.kind, { onProgress, onSuccess, onFailure });\n    return e;\n  };\n\n  handleLink = () => {\n    const urlInput = this.mainContainerRef.current?.querySelector(\"[data-trix-input][name='href']\");\n    const urlInputValue = urlInput?.value?.trim();\n\n    // Ignore missing input or empty values\n    if (!urlInputValue) {\n      return;\n    }\n\n    // Automatically add 'https://' to the url\n    // eslint-disable-next-line camelcase\n    if (isURL(urlInputValue, { require_protocol: false }) && !isURL(urlInputValue, { require_protocol: true })) {\n      urlInput.value = `https://${urlInputValue}`;\n    }\n  };\n\n  /** Automatically create anchors with hrefs for links */\n  autolink() {\n    const linkRegex = new RegExp(`(https?://\\\\S+\\\\.\\\\S+)\\\\s`, 'ig');\n    const editor = this.getEditor();\n    const content = editor.getDocument().toString();\n    let match;\n    while ((match = linkRegex.exec(content))) {\n      const url = match[1];\n      if (isURL(url)) {\n        const position = match.index;\n        const urlLength = this.autolinkDelimiter(url);\n        const range = [position, position + urlLength];\n        const hrefAtRange = editor.getDocument().getCommonAttributesAtRange(range).href;\n        const newURL = url.slice(0, urlLength);\n        if (hrefAtRange !== newURL) {\n          this.updateInRange(editor, range, 0, () => {\n            if (editor.canActivateAttribute('href')) {\n              editor.activateAttribute('href', newURL);\n            }\n          });\n        }\n      }\n    }\n  }\n\n  /** A helper used by autolink to find where the url actually ends\n   * Credits:\n   * https://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37\n   * https://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58\n   */\n  autolinkDelimiter = url => {\n    let lastCharacterPosition = url.length;\n\n    while (lastCharacterPosition > 0) {\n      const lastCharacterIndex = lastCharacterPosition - 1;\n      const closingPair = url[lastCharacterIndex];\n\n      let openingPair;\n      if (closingPair === ')') {\n        openingPair = '(';\n      } else if (closingPair === ']') {\n        openingPair = '[';\n      } else if (closingPair === '}') {\n        openingPair = '{';\n      } else if (closingPair === '\"') {\n        openingPair = '\"';\n      } else if (closingPair === \"'\") {\n        openingPair = \"'\";\n      }\n\n      // Ensure single punctuations marks at the end of the URL are not included as part of link\n      if ('?!.,:;*_~'.includes(url[lastCharacterIndex])) {\n        lastCharacterPosition--;\n      } else if (openingPair) {\n        let opening = 0,\n          closing = 0;\n\n        /** Check to ensure that when a URL is enclosed within pair punctuations,\n         * we do not include the closing punctuation as part of the link.\n         * We only want to accept a closing punctuation at the end of the link,\n         * if there is a corresponding opening punctuation within the URL.\n         */\n\n        for (let i = 0; i < lastCharacterPosition; i++) {\n          if (url[i] === openingPair) {\n            opening++;\n          } else if (url[i] === closingPair) {\n            closing++;\n          }\n        }\n\n        if (opening >= closing) {\n          break;\n        }\n\n        lastCharacterPosition--;\n      } else {\n        break;\n      }\n    }\n\n    return lastCharacterPosition;\n  };\n\n  /** A trix helper that will apply func in range then restore base range when it's done */\n  updateInRange(editor, range, offset = 0, updateFunc) {\n    const baseRange = editor.getSelectedRange();\n    editor.setSelectedRange(range);\n    updateFunc();\n    editor.setSelectedRange([baseRange[0] + offset, baseRange[1] + offset]);\n  }\n\n  /** ---- Render ---- */\n\n  render() {\n    const {\n      defaultValue,\n      withStickyToolbar,\n      toolbarTop,\n      toolbarOffsetY,\n      toolbarBackgroundColor,\n      autoFocus,\n      placeholder,\n      editorMinHeight,\n      withBorders,\n      inputName,\n      disabled,\n      error,\n      fontSize,\n      value,\n      version,\n      showCount,\n      maxLength,\n      editorMaxHeight,\n    } = this.props;\n\n    return !this.state.id ? (\n      <LoadingPlaceholder\n        maxHeight={editorMaxHeight ? editorMaxHeight + 56 : undefined}\n        height={editorMinHeight ? editorMinHeight + 56 : 200}\n      />\n    ) : (\n      <TrixEditorContainer\n        withStickyToolbar={withStickyToolbar}\n        toolbarTop={toolbarTop}\n        toolbarOffsetY={toolbarOffsetY}\n        toolbarBackgroundColor={toolbarBackgroundColor}\n        editorMinHeight={editorMinHeight}\n        editorMaxHeight={editorMaxHeight}\n        withBorders={withBorders}\n        version={version}\n        isDisabled={disabled}\n        error={error}\n        data-cy={this.props['data-cy']}\n        ref={this.mainContainerRef}\n      >\n        {this.state.error && (\n          <MessageBox type=\"error\" mb=\"36px\" withIcon>\n            {this.state.error.toString()}\n          </MessageBox>\n        )}\n        <input id={this.state.id} value={value || defaultValue} type=\"hidden\" name={inputName} />\n        <HTMLContent fontSize={fontSize}>\n          {!showCount ? (\n            <trix-editor\n              ref={this.editorRef}\n              input={this.state.id}\n              autofocus={autoFocus ? true : undefined}\n              placeholder={placeholder}\n            />\n          ) : (\n            <Container position=\"relative\">\n              <trix-editor\n                ref={this.editorRef}\n                input={this.state.id}\n                autofocus={autoFocus ? true : undefined}\n                placeholder={placeholder}\n              />\n              <Container position=\"absolute\" bottom=\"1em\" right=\"1em\">\n                <StyledTag textTransform=\"uppercase\">\n                  <span>{stripHTML(value || defaultValue).length}</span>\n                  {maxLength && <span> / {maxLength}</span>}\n                </StyledTag>\n              </Container>\n            </Container>\n          )}\n        </HTMLContent>\n      </TrixEditorContainer>\n    );\n  }\n}\n"],"names":["React","css","styled","v4","uuid","isURL","uploadImageWithXHR","CustomScrollbarCSS","stripHTML","Container","HTMLContent","LoadingPlaceholder","MessageBox","StyledTag","TrixEditorContainer","div","props","withBorders","border","borderColor","error","borderRadius","padding","Boolean","editorMaxHeight","overflowY","outline","theme","colors","red","black","minHeight","editorMinHeight","maxHeight","toolbarBackgroundColor","blue","version","display","borderLeft","withStickyToolbar","position","top","toolbarTop","marginTop","toolbarOffsetY","p","isDisabled","pointerEvents","cursor","background","SUPPORTED_SERVICE_URLS","youTube","anchorFm","RichTextEditor","Trix","editorRef","current","addEventListener","handleChange","handleUpload","handleFileAccept","trixActionInvoke","event","videoEmbedEnabled","replaceEmbeddedIFrames","value","defaultValue","trixEmbed","mainContainerRef","linkInput","querySelector","e","key","handleLink","addLinkBtn","isReady","iframeRegex","RegExp","match","lastIndex","exec","getEditor","loadHTML","iframe","index","preText","substring","setSelectedRange","insertHTML","attachment","Attachment","content","insertAttachment","length","postText","videoEmbedButton","videoEmbedDialog","toolbarElement","target","attachFilesButton","insertAdjacentHTML","trixDialog","actionName","attachVideoDialog","attachVideoDialogInput","getAttribute","removeAttribute","setAttribute","embedLink","trim","embedIframe","service","id","videoLink","regexps","youtube","vimeo","matches","podcastName","episodeId","podcastUrl","parseServiceLink","constructVideoEmbedURL","sanitizedLink","replace","videoServices","attachmentData","includes","contentType","autolink","onChange","state","setState","test","file","type","alert","preventDefault","size","attachmentContent","isVideoAttachment","remove","setUploading","onProgress","progress","setUploadProgress","onSuccess","fileURL","setAttributes","url","href","onFailure","kind","urlInput","urlInputValue","require_protocol","lastCharacterPosition","lastCharacterIndex","closingPair","openingPair","opening","closing","i","createRef","require","config","blockAttributes","heading1","tagName","attachments","preview","caption","name","initialize","oldProps","reset","editor","removeEventListener","linkRegex","getDocument","toString","urlLength","autolinkDelimiter","range","hrefAtRange","getCommonAttributesAtRange","newURL","slice","updateInRange","canActivateAttribute","activateAttribute","offset","updateFunc","baseRange","getSelectedRange","autoFocus","placeholder","inputName","disabled","fontSize","showCount","maxLength","undefined","Component"],"sourceRoot":""}