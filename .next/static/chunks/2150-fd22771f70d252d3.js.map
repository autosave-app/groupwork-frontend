{"version":3,"file":"static/chunks/2150-fd22771f70d252d3.js","mappings":"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","sources":["webpack://_N_E/./components/contribute-cards/DraggableContributeCardWrapper.js","webpack://_N_E/./components/contribute-cards/AdminContributeCardsContainer.js","webpack://_N_E/./components/InputFieldPresets.js","webpack://_N_E/./components/edit-collective/tiers/ConfirmTierDeleteModal.js","webpack://_N_E/./components/edit-collective/tiers/EditTierModal.js"],"sourcesContent":["import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { Move as MoveIcon } from '@styled-icons/feather/Move';\nimport styled, { css } from 'styled-components';\n\nimport StyledRoundButton from '../StyledRoundButton';\n\nconst MainContainer = styled.div`\n  position: relative;\n  display: flex;\n  height: 100%;\n\n  ${props =>\n    props.isDragging &&\n    css`\n      outline: 1px solid #99c9ff;\n      background: #f0f8ff;\n      border-radius: 16px;\n      & > * {\n        opacity: 0;\n      }\n    `}\n\n  ${props =>\n    props.isDragOverlay &&\n    css`\n      box-shadow: 0px 4px 6px rgba(26, 27, 31, 0.16);\n      border-radius: 16px;\n    `}\n`;\n\nconst DragHandle = React.forwardRef((props, ref) => (\n  <StyledRoundButton size={32} {...props} ref={ref}>\n    <MoveIcon size={10} />\n  </StyledRoundButton>\n));\n\nDragHandle.displayName = 'DragHandle';\n\nconst StyledDragHandle = styled(DragHandle)`\n  position: absolute;\n  cursor: move;\n  top: 17px;\n  margin-left: 270px;\n  box-shadow: 0px 4px 6px rgba(26, 27, 31, 0.16);\n  &:hover {\n    color: ${props => props.theme.colors.primary[700]};\n  }\n\n  /** Hide on touchscreens */\n  @media (hover: none) {\n    display: none;\n  }\n`;\n\nexport const ContributeCardWithDragHandle = ({ Component, componentProps, dragHandleProps, isDragOverlay }) => {\n  return (\n    <MainContainer isDragOverlay={isDragOverlay}>\n      <Component {...componentProps} />\n      <StyledDragHandle {...dragHandleProps} />\n    </MainContainer>\n  );\n};\n\nContributeCardWithDragHandle.propTypes = {\n  Component: PropTypes.any.isRequired,\n  componentProps: PropTypes.object,\n  dragHandleProps: PropTypes.object,\n  isDragOverlay: PropTypes.bool,\n};\n\n// Memoized for improved performance when dragging\nconst MemoizedContributeCardWithDragHandle = memo(ContributeCardWithDragHandle);\n\n/**\n * A wrapper arround contribute cards that makes them draggable\n */\nexport default function DraggableContributeCardWrapper(props) {\n  const { attributes, listeners, isDragging, setNodeRef, transform, transition } = useSortable({ id: props.id });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  return (\n    <MainContainer ref={setNodeRef} style={style} isDragging={isDragging}>\n      <MemoizedContributeCardWithDragHandle dragHandleProps={{ ...attributes, ...listeners }} {...props} />\n    </MainContainer>\n  );\n}\n\nDraggableContributeCardWrapper.propTypes = {\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  Component: PropTypes.any.isRequired,\n  componentProps: PropTypes.object,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { closestCenter, DndContext, DragOverlay } from '@dnd-kit/core';\nimport { arrayMove, horizontalListSortingStrategy, SortableContext } from '@dnd-kit/sortable';\nimport { isEqual } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\n\nimport { CollectiveType } from '../../lib/constants/collectives';\n\nimport ContributeCardsContainer from '../collective-page/ContributeCardsContainer';\nimport EditTierModal from '../edit-collective/tiers/EditTierModal';\n\nimport ContributeCardContainer from './ContributeCardContainer';\nimport CreateNew from './CreateNew';\nimport DraggableContributeCardWrapper, { ContributeCardWithDragHandle } from './DraggableContributeCardWrapper';\n\n/**\n * Display a list of contribution cards wrapped in a DragAndDrop provider\n */\nconst AdminContributeCardsContainer = ({\n  collective,\n  cards,\n  onReorder,\n  draggingId,\n  setDraggingId,\n  onMount,\n  CardsContainer,\n  useTierModals,\n  enableReordering,\n  createNewType,\n  onTierUpdate,\n}) => {\n  const [items, setItems] = React.useState(cards || []);\n\n  // Reset items if the cards order have changed\n  React.useEffect(() => {\n    if (!isEqual(cards, items)) {\n      setItems(cards);\n    }\n  }, [JSON.stringify(cards)]);\n\n  // Save reorder to the backend if internal order has changed\n  React.useEffect(() => {\n    if (!isEqual(cards, items)) {\n      onReorder?.(items);\n    }\n  }, [items]);\n\n  function handleDragStart(event) {\n    setDraggingId(event.active.id);\n  }\n\n  function handleDragEnd(event) {\n    const { active, over } = event;\n\n    if (active.id !== over.id) {\n      setItems(items => {\n        const oldIndex = items.findIndex(item => item.key === active.id);\n        const newIndex = items.findIndex(item => item.key === over.id);\n        return arrayMove(items, oldIndex, newIndex);\n      });\n    }\n\n    setDraggingId(null);\n  }\n\n  const [showTierModal, setShowTierModal] = React.useState(false);\n  const isEvent = collective.type === CollectiveType.EVENT;\n  const createContributionTierRoute = isEvent\n    ? `/${collective.parentCollective?.slug || 'collective'}/events/${collective.slug}/admin/tiers`\n    : `/${collective.slug}/admin/tiers`;\n  const addNewMessage =\n    createNewType === 'TICKET' ? (\n      <FormattedMessage id=\"SectionTickets.CreateTicket\" defaultMessage=\"Create Ticket\" />\n    ) : (\n      <FormattedMessage id=\"Contribute.CreateTier\" defaultMessage=\"Create Contribution Tier\" />\n    );\n\n  React.useEffect(() => {\n    if (onMount) {\n      onMount();\n    }\n  }, [onMount]);\n\n  const draggingItem = items.find(i => i.key === draggingId);\n\n  return (\n    <DndContext collisionDetection={closestCenter} onDragEnd={handleDragEnd} onDragStart={handleDragStart}>\n      <SortableContext items={items.map(c => c.key)} strategy={horizontalListSortingStrategy}>\n        <CardsContainer>\n          {items.map(({ key, Component, componentProps }) => {\n            // Add onClickEdit to the component props if we're using tier modals\n            componentProps =\n              useTierModals && componentProps.tier\n                ? { ...componentProps, onClickEdit: () => setShowTierModal(componentProps.tier) }\n                : componentProps;\n\n            return (\n              <ContributeCardContainer key={key}>\n                {cards.length === 1 || !enableReordering ? (\n                  <Component {...componentProps} />\n                ) : (\n                  <DraggableContributeCardWrapper Component={Component} componentProps={componentProps} id={key} />\n                )}\n              </ContributeCardContainer>\n            );\n          })}\n          <ContributeCardContainer>\n            {useTierModals ? (\n              <CreateNew as=\"div\" data-cy=\"create-contribute-tier\" onClick={() => setShowTierModal('new')}>\n                {addNewMessage}\n              </CreateNew>\n            ) : (\n              <CreateNew data-cy=\"create-contribute-tier\" route={createContributionTierRoute}>\n                {addNewMessage}\n              </CreateNew>\n            )}\n          </ContributeCardContainer>\n          {showTierModal && (\n            <EditTierModal\n              tier={showTierModal === 'new' ? null : showTierModal}\n              collective={collective}\n              onClose={() => setShowTierModal(false)}\n              forcedType={createNewType}\n              onUpdate={onTierUpdate}\n            />\n          )}\n        </CardsContainer>\n        <DragOverlay>\n          {draggingItem ? (\n            <ContributeCardWithDragHandle\n              Component={draggingItem.Component}\n              componentProps={draggingItem.componentProps}\n              isDragOverlay\n            />\n          ) : null}\n        </DragOverlay>\n      </SortableContext>\n    </DndContext>\n  );\n};\n\nAdminContributeCardsContainer.propTypes = {\n  cards: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    }),\n  ).isRequired,\n  collective: PropTypes.shape({\n    slug: PropTypes.string,\n    type: PropTypes.string,\n    parentCollective: PropTypes.shape({\n      slug: PropTypes.string,\n    }),\n  }).isRequired,\n  /** Whether to use the new modals to edit/create tiers */ useTierModals: PropTypes.bool,\n  onReorder: PropTypes.func,\n  setDraggingId: PropTypes.func,\n  draggingId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  onMount: PropTypes.func,\n  CardsContainer: PropTypes.elementType,\n  createNewType: PropTypes.string,\n  enableReordering: PropTypes.bool,\n  onTierUpdate: PropTypes.func,\n};\n\nAdminContributeCardsContainer.defaultProps = {\n  CardsContainer: ContributeCardsContainer,\n  enableReordering: true,\n};\n\nexport default AdminContributeCardsContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport Container from './Container';\nimport InputField from './InputField';\n\nconst InputFieldPresetsContainer = styled.div`\n  .inputField {\n    max-width: 14rem;\n    margin: 0;\n  }\n  .form-group {\n    margin-bottom: 0;\n    margin-left: 0;\n    margin-right: 1rem;\n  }\n`;\n\nclass InputFieldPresets extends React.Component {\n  static propTypes = {\n    defaultValue: PropTypes.arrayOf(PropTypes.number),\n    pre: PropTypes.string,\n    options: PropTypes.object,\n    onChange: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    this.maxLength = 5;\n    const values = props.defaultValue ? [...props.defaultValue] : [1000];\n    this.state = { values };\n    this.onChange = this.onChange.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.renderSingleInput = this.renderSingleInput.bind(this);\n  }\n\n  handleChange(index, val) {\n    let { values } = this.state;\n    values[index] = val;\n    values = values.filter(v => v !== null);\n    this.setState({ values }, () => this.onChange());\n  }\n\n  onChange() {\n    this.props.onChange(this.state.values);\n  }\n\n  renderSingleInput(defaultValue, index) {\n    return (\n      <InputField\n        key={`currency${index}`}\n        name={`currency${index}`}\n        type=\"currency\"\n        defaultValue={defaultValue}\n        value={this.state.values[index]}\n        options={this.props.options}\n        pre={this.props.pre}\n        onChange={val => this.handleChange(index, val)}\n      />\n    );\n  }\n\n  render() {\n    const values = [...this.state.values];\n    if (values.length < this.maxLength) {\n      values.push(null);\n    }\n    return (\n      <InputFieldPresetsContainer>\n        <Container flexWrap=\"wrap\" display=\"flex\">\n          {values.map(this.renderSingleInput)}\n        </Container>\n      </InputFieldPresetsContainer>\n    );\n  }\n}\n\nexport default InputFieldPresets;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Trash } from '@styled-icons/boxicons-regular/Trash';\nimport { FormattedMessage } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { Flex } from '../../Grid';\nimport InputSwitch from '../../InputSwitch';\nimport StyledButton from '../../StyledButton';\nimport StyledHr from '../../StyledHr';\nimport StyledModal, { ModalFooter, ModalHeader } from '../../StyledModal';\nimport { P } from '../../Text';\n\nconst CancelDeleteModalButton = styled(StyledButton)`\n  @media (max-width: 700px) {\n    order: 1;\n  }\n`;\n\nconst ConfirmDeleteModalButton = styled(StyledButton)`\n  @media (max-width: 700px) {\n    order: 0;\n  }\n`;\n\nconst DeleteModalActionsContainer = styled(Flex)`\n  justify-content: space-between;\n  flex-wrap: wrap;\n  @media (max-width: 700px) {\n    gap: 1em;\n  }\n`;\n\nexport default function ConfirmTierDeleteModal({ isDeleting, onClose, onConfirmDelete, tier }) {\n  const [keepRecurringContributions, setKeepRecurringContributions] = React.useState(true);\n  const action = (\n    <FormattedMessage\n      defaultMessage=\"Delete {type, select, TICKET {Ticket} other {Tier}}\"\n      values={{ type: tier.type }}\n    />\n  );\n\n  return (\n    <StyledModal>\n      <ModalHeader hideCloseIcon>{action}</ModalHeader>\n      <P mt=\"1.2em\">\n        <FormattedMessage defaultMessage=\"The tier will be deleted forever and can't be retrieved.\" />\n      </P>\n      <StyledHr my=\"1.2em\" />\n      <Flex gap=\"2em\" mb=\"1.2em\" alignItems=\"center\" justifyContent=\"space-between\">\n        <Flex flexDirection=\"column\">\n          <P fontWeight=\"bold\">\n            <FormattedMessage defaultMessage=\"Do you want to continue recurring contributions?\" />\n          </P>\n          <P mt={1} color=\"black.500\">\n            <FormattedMessage defaultMessage=\"If yes, you will still receive existing recurring contributions for this deleted tier.\" />\n          </P>\n        </Flex>\n        <InputSwitch\n          checked={keepRecurringContributions}\n          onChange={event => setKeepRecurringContributions(event.target.checked)}\n        />\n      </Flex>\n      <ModalFooter isFullWidth dividerMargin=\"1.2em 0\">\n        <DeleteModalActionsContainer>\n          <CancelDeleteModalButton\n            flexGrow={1}\n            type=\"button\"\n            data-cy=\"cancel-delete-btn\"\n            disabled={isDeleting}\n            buttonStyle=\"secondary\"\n            mx={2}\n            minWidth={100}\n            onClick={onClose}\n          >\n            <FormattedMessage defaultMessage=\"Don't Delete\" />\n          </CancelDeleteModalButton>\n          <ConfirmDeleteModalButton\n            flexGrow={1}\n            type=\"button\"\n            data-cy=\"confirm-delete-btn\"\n            disabled={isDeleting}\n            mx={2}\n            buttonStyle=\"danger\"\n            minWidth={100}\n            onClick={() => onConfirmDelete(keepRecurringContributions)}\n          >\n            <Flex alignItems=\"center\" justifyContent=\"center\">\n              <Flex alignItems=\"center\" mr={1}>\n                <Trash size=\"1em\" />\n              </Flex>\n              {action}\n            </Flex>\n          </ConfirmDeleteModalButton>\n        </DeleteModalActionsContainer>\n      </ModalFooter>\n    </StyledModal>\n  );\n}\n\nConfirmTierDeleteModal.propTypes = {\n  isDeleting: PropTypes.bool,\n  onClose: PropTypes.func,\n  onConfirmDelete: PropTypes.func,\n  tier: PropTypes.shape({\n    type: PropTypes.string,\n  }),\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gql, useMutation } from '@apollo/client';\nimport { getApplicableTaxes } from '@opencollective/taxes';\nimport { Form, Formik, useFormikContext } from 'formik';\nimport { isNil, omit } from 'lodash';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { getLegacyIdForCollective } from '../../../lib/collective.lib';\nimport { CollectiveType } from '../../../lib/constants/collectives';\nimport INTERVALS, { getGQLV2FrequencyFromInterval } from '../../../lib/constants/intervals';\nimport { AmountTypes, TierTypes } from '../../../lib/constants/tiers-types';\nimport { getIntervalFromContributionFrequency } from '../../../lib/date-utils';\nimport { i18nGraphqlException } from '../../../lib/errors';\nimport { requireFields } from '../../../lib/form-utils';\nimport { API_V2_CONTEXT } from '../../../lib/graphql/helpers';\nimport { i18nTaxDescription, i18nTaxType } from '../../../lib/i18n/taxes';\nimport { getCollectivePageRoute } from '../../../lib/url-helpers';\n\nimport ContributeTier from '../../contribute-cards/ContributeTier';\nimport { Box, Flex } from '../../Grid';\nimport InputFieldPresets from '../../InputFieldPresets';\nimport InputSwitch from '../../InputSwitch';\nimport Link from '../../Link';\nimport MessageBox from '../../MessageBox';\nimport StyledButton from '../../StyledButton';\nimport StyledInput from '../../StyledInput';\nimport StyledInputAmount from '../../StyledInputAmount';\nimport StyledInputFormikField from '../../StyledInputFormikField';\nimport StyledLink from '../../StyledLink';\nimport StyledModal, { ModalBody, ModalFooter, ModalHeader } from '../../StyledModal';\nimport StyledSelect from '../../StyledSelect';\nimport StyledTextarea from '../../StyledTextarea';\nimport { Span } from '../../Text';\nimport { TOAST_TYPE, useToasts } from '../../ToastProvider';\n\nimport ConfirmTierDeleteModal from './ConfirmTierDeleteModal';\n\nconst { FUND, PROJECT } = CollectiveType;\nconst { TIER, TICKET, MEMBERSHIP, SERVICE, PRODUCT, DONATION } = TierTypes;\nconst { FIXED, FLEXIBLE } = AmountTypes;\n\nfunction getTierTypeOptions(intl, collectiveType) {\n  const simplifiedTierTypes = [\n    { value: TIER, label: intl.formatMessage({ id: 'tier.type.tier', defaultMessage: 'generic tier' }) },\n    {\n      value: SERVICE,\n      label: intl.formatMessage({ id: 'tier.type.service', defaultMessage: 'service (e.g., support)' }),\n    },\n    {\n      value: PRODUCT,\n      label: intl.formatMessage({ id: 'tier.type.product', defaultMessage: 'product (e.g., t-shirt)' }),\n    },\n    { value: DONATION, label: intl.formatMessage({ id: 'tier.type.donation', defaultMessage: 'donation (gift)' }) },\n  ];\n\n  const membershipTierType = {\n    value: MEMBERSHIP,\n    label: intl.formatMessage({ id: 'tier.type.membership', defaultMessage: 'membership (recurring)' }),\n  };\n\n  if (collectiveType === PROJECT) {\n    return simplifiedTierTypes;\n  }\n\n  return [...simplifiedTierTypes, membershipTierType];\n}\n\nfunction getReceiptTemplates(host) {\n  const receiptTemplates = host?.settings?.invoice?.templates;\n\n  const receiptTemplateTitles = [];\n  if (receiptTemplates?.default) {\n    receiptTemplateTitles.push({\n      value: 'default',\n      label: receiptTemplates.default.title,\n    });\n  }\n  if (receiptTemplates?.alternative) {\n    receiptTemplateTitles.push({ value: 'alternative', label: receiptTemplates.alternative.title });\n  }\n  return receiptTemplateTitles;\n}\n\nfunction FormFields({ collective, values, hideTypeSelect }) {\n  const intl = useIntl();\n\n  const tierTypeOptions = getTierTypeOptions(intl, collective.type);\n  const intervalOptions = [\n    { value: 'flexible', label: intl.formatMessage({ id: 'tier.interval.flexible', defaultMessage: 'Flexible' }) },\n    { value: null, label: intl.formatMessage({ id: 'Frequency.OneTime', defaultMessage: 'One time' }) },\n    { value: 'month', label: intl.formatMessage({ id: 'Frequency.Monthly', defaultMessage: 'Monthly' }) },\n    { value: 'year', label: intl.formatMessage({ id: 'Frequency.Yearly', defaultMessage: 'Yearly' }) },\n  ];\n\n  const amountTypeOptions = [\n    { value: FIXED, label: intl.formatMessage({ id: 'tier.amountType.fixed', defaultMessage: 'Fixed amount' }) },\n    {\n      value: FLEXIBLE,\n      label: intl.formatMessage({ id: 'tier.amountType.flexible', defaultMessage: 'Flexible amount' }),\n    },\n  ];\n\n  const receiptTemplateOptions = getReceiptTemplates(collective.host);\n\n  const taxes = getApplicableTaxes(collective, collective.host, values.type);\n\n  const formik = useFormikContext();\n\n  // Enforce certain rules when updating\n  React.useEffect(() => {\n    // Flexible amount implies flexible interval, and vice versa\n    if (values.interval === 'flexible' && values.amountType !== FLEXIBLE) {\n      formik.setFieldValue('amountType', FLEXIBLE);\n    } else if (values.amountType === FIXED && values.interval === 'flexible') {\n      formik.setFieldValue('interval', 'onetime');\n    }\n\n    // No interval for products and tickets\n    if ([PRODUCT, TICKET].includes(values.type)) {\n      formik.setFieldValue('interval', null);\n    }\n  }, [values.interval, values.type]);\n\n  React.useEffect(() => {}, [values.type]);\n\n  return (\n    <React.Fragment>\n      {collective.type !== FUND && !hideTypeSelect && (\n        <React.Fragment>\n          <StyledInputFormikField\n            name=\"type\"\n            label={intl.formatMessage({ id: 'tier.type.label', defaultMessage: 'Type' })}\n            labelFontWeight=\"bold\"\n            mt=\"3\"\n          >\n            {({ field, form, loading }) => (\n              <StyledSelect\n                inputId={field.name}\n                data-cy={`select-${field.name}`}\n                error={field.error}\n                onBlur={() => form.setFieldTouched(field.name, true)}\n                onChange={({ value }) => form.setFieldValue(field.name, value)}\n                isLoading={loading}\n                options={tierTypeOptions}\n                value={tierTypeOptions.find(option => option.value === field.value)}\n              />\n            )}\n          </StyledInputFormikField>\n          {taxes.map(({ type, percentage }) => (\n            <Flex key={`${type}-${percentage}`} mt={3}>\n              <MessageBox type=\"info\" withIcon css={{ flexGrow: 1 }} fontSize=\"12px\">\n                <Span fontWeight=\"bold\">\n                  <FormattedMessage\n                    id=\"withColon\"\n                    defaultMessage=\"{item}:\"\n                    values={{ item: i18nTaxType(intl, type) }}\n                  />{' '}\n                  {percentage}%\n                </Span>\n                <Box mt={2}>{i18nTaxDescription(intl, type)}</Box>\n              </MessageBox>\n            </Flex>\n          ))}\n        </React.Fragment>\n      )}\n      <StyledInputFormikField\n        name=\"name\"\n        label={intl.formatMessage({ id: 'Fields.name', defaultMessage: 'Name' })}\n        labelFontWeight=\"bold\"\n        mt=\"3\"\n        required\n      >\n        {({ field }) => <StyledInput data-cy={field.name} placeholder=\"E.g. Donation\" {...field} />}\n      </StyledInputFormikField>\n      <StyledInputFormikField\n        name=\"description\"\n        label={intl.formatMessage({\n          id: 'Fields.description',\n          defaultMessage: 'Description',\n        })}\n        labelFontWeight=\"bold\"\n        mt=\"3\"\n        required={false}\n      >\n        {({ field }) => <StyledTextarea data-cy={field.name} maxLength={510} width=\"100%\" showCount {...field} />}\n      </StyledInputFormikField>\n      {[DONATION, MEMBERSHIP, TIER, SERVICE].includes(values.type) && (\n        <StyledInputFormikField\n          name=\"interval\"\n          label={intl.formatMessage({ id: 'tier.interval.label', defaultMessage: 'Interval' })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n          required\n        >\n          {({ field, form, loading }) => (\n            <StyledSelect\n              inputId={field.name}\n              data-cy={`select-${field.name}`}\n              error={field.error}\n              onBlur={() => form.setFieldTouched(field.name, true)}\n              onChange={({ value }) => form.setFieldValue(field.name, value)}\n              isLoading={loading}\n              options={intervalOptions}\n              value={intervalOptions.find(option => option.value === field.value)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {values.interval !== 'flexible' && (\n        <StyledInputFormikField\n          name=\"amountType\"\n          label={intl.formatMessage({\n            id: 'tier.amountType.label',\n            defaultMessage: 'Amount type',\n          })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n        >\n          {({ field, form, loading }) => (\n            <StyledSelect\n              inputId={field.name}\n              data-cy={field.name}\n              error={field.error}\n              onBlur={() => form.setFieldTouched(field.name, true)}\n              onChange={({ value }) => form.setFieldValue(field.name, value)}\n              isLoading={loading}\n              options={amountTypeOptions}\n              value={amountTypeOptions.find(option => option.value === field.value)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {values.amountType === FIXED && (\n        <StyledInputFormikField\n          name=\"amount\"\n          label={intl.formatMessage({ id: 'Fields.amount', defaultMessage: 'Amount' })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n        >\n          {({ field, form }) => (\n            <StyledInputAmount\n              id={field.id}\n              data-cy={field.name}\n              currency={field.value?.currency ?? collective.currency}\n              currencyDisplay=\"CODE\"\n              placeholder=\"0.00\"\n              error={field.error}\n              value={field.value?.valueInCents}\n              maxWidth=\"100%\"\n              onChange={value =>\n                form.setFieldValue(\n                  field.name,\n                  !isNil(value) && !isNaN(value)\n                    ? { currency: field.value?.currency ?? collective.currency, valueInCents: value }\n                    : null,\n                )\n              }\n              onBlur={() => form.setFieldTouched(field.name, true)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {values.amountType === FLEXIBLE && (\n        <StyledInputFormikField\n          name=\"presets\"\n          label={intl.formatMessage({\n            id: 'tier.presets.label',\n            defaultMessage: 'Suggested amounts',\n          })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n        >\n          {({ field, form }) => (\n            <InputFieldPresets\n              {...field}\n              defaultValue={field.value}\n              onChange={value => form.setFieldValue(field.name, value)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {values.amountType === FLEXIBLE && (\n        <StyledInputFormikField\n          name=\"amount\"\n          label={intl.formatMessage({ id: 'tier.defaultAmount.label', defaultMessage: 'Default amount' })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n        >\n          {({ field, form }) => (\n            <StyledInputAmount\n              id={field.id}\n              data-cy={field.name}\n              currency={field.value?.currency ?? collective.currency}\n              currencyDisplay=\"CODE\"\n              placeholder=\"0.00\"\n              error={field.error}\n              value={field.value?.valueInCents}\n              maxWidth=\"100%\"\n              onChange={value =>\n                form.setFieldValue(\n                  field.name,\n                  !isNil(value) && !isNaN(value)\n                    ? { currency: field.value?.currency ?? collective.currency, valueInCents: value }\n                    : null,\n                )\n              }\n              onBlur={() => form.setFieldTouched(field.name, true)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {values.amountType === FLEXIBLE && (\n        <StyledInputFormikField\n          name=\"minimumAmount\"\n          label={intl.formatMessage({ id: 'tier.minimumAmount.label', defaultMessage: 'Minimum amount' })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n          required\n        >\n          {({ field, form }) => (\n            <StyledInputAmount\n              id={field.id}\n              data-cy={field.name}\n              currency={field.value?.currency ?? collective.currency}\n              currencyDisplay=\"CODE\"\n              placeholder=\"0.00\"\n              error={field.error}\n              value={field.value?.valueInCents}\n              maxWidth=\"100%\"\n              onChange={value =>\n                form.setFieldValue(\n                  field.name,\n                  !isNil(value) && !isNaN(value)\n                    ? { currency: field.value?.currency ?? collective.currency, valueInCents: value }\n                    : null,\n                )\n              }\n              onBlur={() => form.setFieldTouched(field.name, true)}\n            />\n          )}\n        </StyledInputFormikField>\n      )}\n      {([TICKET, PRODUCT, MEMBERSHIP].includes(values.type) ||\n        (values.type === TIER && ![FUND, PROJECT].includes(collective.type))) && (\n        <React.Fragment>\n          <StyledInputFormikField\n            name=\"maxQuantity\"\n            label={intl.formatMessage({\n              id: 'tier.maxQuantity.label',\n              defaultMessage: 'Available quantity',\n            })}\n            labelFontWeight=\"bold\"\n            mt=\"3\"\n            required={false}\n          >\n            {({ field }) => <StyledInput data-cy={field.name} {...field} />}\n          </StyledInputFormikField>\n          <FieldDescription>\n            {intl.formatMessage({\n              id: 'tier.maxQuantity.description',\n              defaultMessage: 'Leave empty for unlimited',\n            })}\n          </FieldDescription>\n        </React.Fragment>\n      )}\n      {![FUND].includes(collective.type) && (\n        <StyledInputFormikField\n          name=\"button\"\n          label={intl.formatMessage({\n            id: 'tier.button.label',\n            defaultMessage: 'Button text',\n          })}\n          labelFontWeight=\"bold\"\n          mt=\"3\"\n          required={false}\n        >\n          {({ field }) => <StyledInput data-cy={field.name} {...field} />}\n        </StyledInputFormikField>\n      )}\n      <StyledInputFormikField\n        name=\"goal\"\n        label={intl.formatMessage({\n          id: 'ContributionType.Goal',\n          defaultMessage: 'Goal',\n        })}\n        labelFontWeight=\"bold\"\n        mt=\"3\"\n        required={false}\n      >\n        {({ field, form }) => (\n          <StyledInputAmount\n            id={field.id}\n            data-cy={field.name}\n            currency={field.value?.currency ?? collective.currency}\n            currencyDisplay=\"CODE\"\n            placeholder=\"0.00\"\n            error={field.error}\n            value={field.value?.valueInCents}\n            maxWidth=\"100%\"\n            onChange={value =>\n              form.setFieldValue(\n                field.name,\n                !isNil(value) && !isNaN(value)\n                  ? { currency: field.value?.currency ?? collective.currency, valueInCents: value }\n                  : null,\n              )\n            }\n            onBlur={() => form.setFieldTouched(field.name, true)}\n          />\n        )}\n      </StyledInputFormikField>\n      <FieldDescription>\n        {intl.formatMessage({\n          id: 'tier.goal.description',\n          defaultMessage: 'Amount you aim to raise',\n        })}\n      </FieldDescription>\n      {values.type === TICKET && (\n        <React.Fragment>\n          <StyledInputFormikField\n            name=\"singleTicket\"\n            label={<FormattedMessage defaultMessage=\"Single Ticket\" />}\n            labelFontWeight=\"bold\"\n            mt=\"3\"\n            flexDirection={'row'}\n            justifyContent={'space-between'}\n            alignItems={'center'}\n          >\n            {({ field, form }) => (\n              <InputSwitch\n                name={field.name}\n                checked={field.value}\n                onChange={event => form.setFieldValue(field.name, event.target.checked)}\n              />\n            )}\n          </StyledInputFormikField>\n          <FieldDescription>\n            <FormattedMessage\n              id=\"tier.singleTicketDescription\"\n              defaultMessage=\"Only allow people to buy a single ticket per order\"\n            />\n          </FieldDescription>\n        </React.Fragment>\n      )}\n      {![FUND, PROJECT].includes(collective.type) && (\n        <React.Fragment>\n          <StyledInputFormikField\n            name=\"useStandalonePage\"\n            label={intl.formatMessage({\n              id: 'tier.standalonePage',\n              defaultMessage: 'Standalone page',\n            })}\n            labelFontWeight=\"bold\"\n            mt=\"3\"\n            flexDirection={'row'}\n            justifyContent={'space-between'}\n            alignItems={'center'}\n          >\n            {({ field, form }) => (\n              <InputSwitch\n                name={field.name}\n                checked={field.value}\n                onChange={event => form.setFieldValue(field.name, event.target.checked)}\n              />\n            )}\n          </StyledInputFormikField>\n          <FieldDescription>\n            {intl.formatMessage(\n              {\n                id: 'tier.standalonePageDescription',\n                defaultMessage:\n                  \"Create a <link>standalone</link> page for this tier? It's like a mini-crowdfunding campaign page that you can add a detailed description and video to, and link to directly\",\n              },\n              {\n                link: function StandaloneTierPageLink(...msg) {\n                  if (!values.id) {\n                    return <span>{msg}</span>;\n                  } else {\n                    return (\n                      <StyledLink\n                        as={Link}\n                        openInNewTab\n                        href={{\n                          pathname: `${getCollectivePageRoute(collective)}/contribute/${values.slug}-${values.id}`,\n                        }}\n                      >\n                        <span>{msg}</span>\n                      </StyledLink>\n                    );\n                  }\n                },\n              },\n            )}\n          </FieldDescription>\n        </React.Fragment>\n      )}\n      {receiptTemplateOptions.length > 1 && (\n        <React.Fragment>\n          <StyledInputFormikField\n            name=\"invoiceTemplate\"\n            label={intl.formatMessage({\n              defaultMessage: 'Choose receipt',\n            })}\n            labelFontWeight=\"bold\"\n            mt=\"3\"\n            required={false}\n          >\n            {({ field, form, loading }) => (\n              <StyledSelect\n                inputId={field.name}\n                data-cy={field.name}\n                error={field.error}\n                onBlur={() => form.setFieldTouched(field.name, true)}\n                onChange={({ value }) => form.setFieldValue(field.name, value)}\n                isLoading={loading}\n                options={receiptTemplateOptions}\n                value={receiptTemplateOptions.find(option => option.value === field.value)}\n              />\n            )}\n          </StyledInputFormikField>\n          <FieldDescription>\n            {intl.formatMessage({\n              defaultMessage: 'Choose between the receipts templates available.',\n            })}\n          </FieldDescription>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nFormFields.propTypes = {\n  collective: PropTypes.shape({\n    host: PropTypes.object,\n    currency: PropTypes.string,\n    type: PropTypes.string,\n  }),\n  values: PropTypes.shape({\n    id: PropTypes.string,\n    slug: PropTypes.string,\n    type: PropTypes.string,\n    amountType: PropTypes.string,\n    interval: PropTypes.string,\n  }),\n  hideTypeSelect: PropTypes.bool,\n  tier: PropTypes.shape({\n    type: PropTypes.string,\n    singleTicket: PropTypes.bool,\n  }),\n};\n\nconst EditSectionContainer = styled(Flex)`\n  overflow-y: scroll;\n  flex-grow: 1;\n  flex-direction: column;\n  padding-right: 1rem;\n  min-width: 250px;\n\n  @media (min-width: 700px) {\n    max-height: 600px;\n  }\n`;\n\nconst PreviewSectionContainer = styled(Flex)`\n  overflow: hidden;\n  max-height: 600px;\n  flex-grow: 1;\n  min-width: 300px;\n  justify-content: center;\n  @media (max-width: 700px) {\n    margin: 0 -20px;\n  }\n`;\n\nconst ModalSectionContainer = styled(Flex)`\n  @media (max-width: 700px) {\n    flex-wrap: wrap;\n    gap: 2em;\n    align-items: center;\n  }\n`;\n\nconst EditModalActionsContainer = styled(Flex)`\n  justify-content: right;\n  flex-wrap: wrap;\n  gap: 1em;\n\n  @media (max-width: 700px) {\n    & > button {\n      width: 100%;\n    }\n    justify-content: center;\n    flex-wrap: wrap;\n    align-items: center;\n  }\n`;\n\nconst ConfirmModalButton = styled(StyledButton)`\n  @media (max-width: 700px) {\n    order: 1;\n  }\n`;\n\nconst DeleteModalButton = styled(StyledButton)`\n  @media (max-width: 700px) {\n    order: 2;\n  }\n`;\n\nconst CancelModalButton = styled(StyledButton)`\n  @media (max-width: 700px) {\n    order: 3;\n  }\n`;\n\nconst ModalContainer = styled(StyledModal)`\n  padding-bottom: 10px;\n`;\n\nconst FieldDescription = styled.div`\n  color: #737373;\n  font-size: 1.2rem;\n`;\n\nconst ContributeCardPreviewContainer = styled.div`\n  padding: 2rem;\n  @media (max-width: 700px) {\n    padding: 0;\n  }\n`;\n\nexport default function EditTierModal({ tier, collective, onClose, onUpdate, forcedType }) {\n  return (\n    <ModalContainer onClose={onClose} ignoreEscapeKey>\n      <EditTierForm tier={tier} collective={collective} onClose={onClose} forcedType={forcedType} onUpdate={onUpdate} />\n    </ModalContainer>\n  );\n}\n\nEditTierModal.propTypes = {\n  tier: PropTypes.object,\n  collective: PropTypes.object,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func,\n  forcedType: PropTypes.string,\n};\n\nexport function ContributeCardPreview({ tier, collective }) {\n  const intl = useIntl();\n\n  const previewTier = {\n    ...tier,\n    id: tier.legacyId,\n    slug: 'preview-slug',\n    stats: {},\n  };\n  if (tier.maxQuantity) {\n    previewTier.stats.availableQuantity = tier.maxQuantity;\n  }\n\n  return (\n    <ContributeCardPreviewContainer>\n      <ContributeTier isPreview intl={intl} tier={previewTier} collective={collective} hideContributors />\n    </ContributeCardPreviewContainer>\n  );\n}\n\nContributeCardPreview.propTypes = {\n  tier: PropTypes.shape({\n    legacyId: PropTypes.number,\n    maxQuantity: PropTypes.number,\n  }),\n  collective: PropTypes.object,\n};\n\nexport const editTiersFieldsFragment = gql`\n  fragment EditTiersFields on Tier {\n    id\n    legacyId\n    amount {\n      value\n      valueInCents\n      currency\n    }\n    amountType\n    availableQuantity\n    button\n    customFields\n    description\n    endsAt\n    frequency\n    goal {\n      value\n      valueInCents\n      currency\n    }\n    interval\n    invoiceTemplate\n    maxQuantity\n    minimumAmount {\n      value\n      valueInCents\n      currency\n    }\n    name\n    presets\n    slug\n    type\n    useStandalonePage\n    singleTicket\n    invoiceTemplate\n  }\n`;\n\nexport const listTierQuery = gql`\n  query AccountTiers($accountSlug: String!) {\n    account(slug: $accountSlug) {\n      id\n      ... on AccountWithContributions {\n        tiers {\n          nodes {\n            id\n            ...EditTiersFields\n          }\n        }\n      }\n      ... on Organization {\n        tiers {\n          nodes {\n            id\n            ...EditTiersFields\n          }\n        }\n      }\n    }\n  }\n  ${editTiersFieldsFragment}\n`;\n\nconst editTierMutation = gql`\n  mutation EditTier($tier: TierUpdateInput!) {\n    editTier(tier: $tier) {\n      id\n      ...EditTiersFields\n    }\n  }\n  ${editTiersFieldsFragment}\n`;\n\nconst createTierMutation = gql`\n  mutation CreateTier($tier: TierCreateInput!, $account: AccountReferenceInput!) {\n    createTier(tier: $tier, account: $account) {\n      id\n      ...EditTiersFields\n    }\n  }\n  ${editTiersFieldsFragment}\n`;\n\nconst deleteTierMutation = gql`\n  mutation DeleteTier($tier: TierReferenceInput!, $stopRecurringContributions: Boolean! = false) {\n    deleteTier(tier: $tier, stopRecurringContributions: $stopRecurringContributions) {\n      id\n    }\n  }\n`;\n\nconst getRequiredFields = values => {\n  const fields = ['name', 'type', 'amountType'];\n\n  // Depending on amount type\n  if (values.amountType === 'FIXED') {\n    fields.push('amount');\n  } else if (values.amountType === 'FLEXIBLE') {\n    fields.push('minimumAmount');\n  }\n\n  return fields;\n};\n\nexport function EditTierForm({ tier, collective, onClose, onUpdate, forcedType }) {\n  const intl = useIntl();\n  const isEditing = React.useMemo(() => !!tier?.id);\n  const initialValues = React.useMemo(() => {\n    if (isEditing) {\n      return {\n        ...omit(tier, ['__typename', 'endsAt', 'slug', 'legacyId', 'customFields', 'availableQuantity']),\n        amount: omit(tier.amount, '__typename'),\n        interval: getIntervalFromContributionFrequency(tier.frequency),\n        goal: omit(tier.goal, '__typename'),\n        minimumAmount: omit(tier.minimumAmount, '__typename'),\n        description: tier.description || '',\n        presets: tier.presets || [1000],\n        invoiceTemplate: tier.invoiceTemplate,\n      };\n    } else {\n      return {\n        name: '',\n        type: forcedType || TierTypes.TIER,\n        amountType: AmountTypes.FIXED,\n        amount: null,\n        minimumAmount: null,\n        interval: INTERVALS.month,\n        description: '',\n        presets: [1000],\n      };\n    }\n  }, [isEditing, tier]);\n\n  const formMutation = isEditing ? editTierMutation : createTierMutation;\n\n  const [submitFormMutation] = useMutation(formMutation, {\n    context: API_V2_CONTEXT,\n    update: cache => {\n      // Invalidate the cache for the collective page query to make sure we'll fetch the latest data next time we visit\n      const __typename = collective.type === CollectiveType.EVENT ? 'Event' : 'Collective';\n      const cachedCollective = cache.identify({ __typename, id: getLegacyIdForCollective(collective) });\n      if (cachedCollective) {\n        cache.modify({\n          id: cachedCollective,\n          fields: {\n            tiers: (_, { DELETE }) => DELETE,\n          },\n        });\n      }\n    },\n  });\n\n  const [deleteTier, { loading: isDeleting }] = useMutation(deleteTierMutation, { context: API_V2_CONTEXT });\n\n  const [isConfirmingDelete, setIsConfirmingDelete] = React.useState(false);\n  const { addToast } = useToasts();\n\n  const onDeleteTierClick = React.useCallback(async () => {\n    setIsConfirmingDelete(true);\n  }, []);\n\n  const onConfirmDelete = React.useCallback(\n    async keepRecurringContributions => {\n      try {\n        await deleteTier({\n          variables: {\n            tier: { id: tier.id },\n            stopRecurringContributions: !keepRecurringContributions,\n          },\n          update: cache => {\n            cache.evict({ id: cache.identify(tier) }); // Evict from GraphQL V1\n            cache.evict({ id: cache.identify({ __typename: 'Tier', id: tier.legacyId }) }); // Evict from GraphQL V2\n            cache.gc();\n          },\n        });\n        onClose();\n        addToast({\n          type: TOAST_TYPE.SUCCESS,\n          message: intl.formatMessage(\n            { defaultMessage: '{type, select, TICKET {Ticket} other {Tier}} deleted.' },\n            { type: tier.type },\n          ),\n        });\n      } catch (e) {\n        addToast({ type: TOAST_TYPE.ERROR, message: i18nGraphqlException(intl, e.message) });\n      } finally {\n        setIsConfirmingDelete(false);\n      }\n    },\n    [deleteTier],\n  );\n\n  return (\n    <React.Fragment>\n      <Formik\n        initialValues={initialValues}\n        validate={values => requireFields(values, getRequiredFields(values))}\n        onSubmit={async values => {\n          const tier = {\n            ...omit(values, ['interval']),\n            frequency: getGQLV2FrequencyFromInterval(values.interval),\n            maxQuantity: parseInt(values.maxQuantity),\n            goal: !isNil(values?.goal?.valueInCents) ? values.goal : null,\n            amount: !isNil(values?.amount?.valueInCents) ? values.amount : null,\n            minimumAmount: !isNil(values?.minimumAmount?.valueInCents) ? values.minimumAmount : null,\n            singleTicket: values?.singleTicket,\n          };\n\n          try {\n            const result = await submitFormMutation({ variables: { tier, account: { legacyId: collective.id } } });\n            onUpdate?.(result);\n            addToast({\n              type: TOAST_TYPE.SUCCESS,\n              message: isEditing\n                ? intl.formatMessage(\n                    { defaultMessage: '{type, select, TICKET {Ticket} other {Tier}} updated.' },\n                    { type: values.type },\n                  )\n                : intl.formatMessage(\n                    { defaultMessage: '{type, select, TICKET {Ticket} other {Tier}} created.' },\n                    { type: values.type },\n                  ),\n            });\n            onClose();\n          } catch (e) {\n            addToast({ type: TOAST_TYPE.ERROR, message: i18nGraphqlException(intl, e) });\n          }\n        }}\n      >\n        {({ values, isSubmitting }) => {\n          return (\n            <Form data-cy=\"edit-tier-modal-form\">\n              <ModalHeader onClose={onClose} hideCloseIcon>\n                {isEditing ? (\n                  <FormattedMessage\n                    defaultMessage=\"Edit {type, select, TICKET {Ticket} other {Tier}}\"\n                    values={{ type: tier.type }}\n                  />\n                ) : (\n                  <FormattedMessage\n                    defaultMessage=\"Create {type, select, TICKET {Ticket} other {Tier}}\"\n                    values={{ type: forcedType }}\n                  />\n                )}\n              </ModalHeader>\n              <ModalBody>\n                <ModalSectionContainer>\n                  <EditSectionContainer>\n                    <FormFields\n                      collective={collective}\n                      values={values}\n                      tier={tier}\n                      hideTypeSelect={Boolean(forcedType)}\n                    />\n                  </EditSectionContainer>\n                  <PreviewSectionContainer>\n                    <ContributeCardPreview collective={collective} tier={values} />\n                  </PreviewSectionContainer>\n                </ModalSectionContainer>\n              </ModalBody>\n              <ModalFooter isFullWidth dividerMargin=\"1rem 0\">\n                <EditModalActionsContainer>\n                  {isEditing && (\n                    <DeleteModalButton\n                      type=\"button\"\n                      data-cy=\"delete-btn\"\n                      buttonStyle=\"dangerSecondary\"\n                      minWidth={120}\n                      onClick={onDeleteTierClick}\n                      loading={isDeleting}\n                      disabled={isSubmitting || isConfirmingDelete}\n                      marginRight=\"auto\"\n                    >\n                      <FormattedMessage id=\"actions.delete\" defaultMessage=\"Delete\" />\n                    </DeleteModalButton>\n                  )}\n                  <ConfirmModalButton\n                    type=\"submit\"\n                    data-cy=\"confirm-btn\"\n                    buttonStyle=\"primary\"\n                    minWidth={120}\n                    disabled={isDeleting || isConfirmingDelete}\n                    loading={isSubmitting}\n                  >\n                    {isEditing ? (\n                      <FormattedMessage id=\"save\" defaultMessage=\"Save\" />\n                    ) : (\n                      <FormattedMessage id=\"create\" defaultMessage=\"Create\" />\n                    )}\n                  </ConfirmModalButton>\n                  <CancelModalButton\n                    type=\"button\"\n                    data-cy=\"cancel-btn\"\n                    disabled={isSubmitting || isDeleting || isConfirmingDelete}\n                    minWidth={100}\n                    onClick={onClose}\n                  >\n                    <FormattedMessage id=\"actions.cancel\" defaultMessage=\"Cancel\" />\n                  </CancelModalButton>\n                </EditModalActionsContainer>\n              </ModalFooter>\n            </Form>\n          );\n        }}\n      </Formik>\n      {isConfirmingDelete && (\n        <ConfirmTierDeleteModal\n          tier={tier}\n          isDeleting={isDeleting}\n          onClose={() => setIsConfirmingDelete(false)}\n          onConfirmDelete={onConfirmDelete}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n\nEditTierForm.propTypes = {\n  collective: PropTypes.object,\n  tier: PropTypes.object,\n  onClose: PropTypes.func,\n  onUpdate: PropTypes.func,\n  forcedType: PropTypes.string,\n};\n"],"names":["React","memo","useSortable","CSS","Move","MoveIcon","styled","css","StyledRoundButton","MainContainer","div","props","isDragging","isDragOverlay","DragHandle","forwardRef","ref","displayName","StyledDragHandle","theme","colors","primary","ContributeCardWithDragHandle","Component","componentProps","dragHandleProps","MemoizedContributeCardWithDragHandle","DraggableContributeCardWrapper","id","attributes","listeners","setNodeRef","transform","transition","style","Transform","toString","closestCenter","DndContext","DragOverlay","arrayMove","horizontalListSortingStrategy","SortableContext","FormattedMessage","CollectiveType","ContributeCardsContainer","EditTierModal","ContributeCardContainer","CreateNew","AdminContributeCardsContainer","collective","cards","onReorder","draggingId","setDraggingId","onMount","CardsContainer","useTierModals","enableReordering","createNewType","onTierUpdate","useState","items","setItems","useEffect","JSON","stringify","handleDragStart","event","active","handleDragEnd","over","oldIndex","findIndex","item","key","newIndex","showTierModal","setShowTierModal","isEvent","type","EVENT","createContributionTierRoute","parentCollective","slug","addNewMessage","draggingItem","find","i","map","c","tier","onClickEdit","length","defaultProps","Container","InputField","InputFieldPresetsContainer","InputFieldPresets","maxLength","values","defaultValue","state","onChange","bind","handleChange","renderSingleInput","index","val","filter","v","setState","options","pre","push","Trash","Flex","InputSwitch","StyledButton","StyledHr","StyledModal","ModalFooter","ModalHeader","P","CancelDeleteModalButton","ConfirmDeleteModalButton","DeleteModalActionsContainer","ConfirmTierDeleteModal","isDeleting","onClose","onConfirmDelete","keepRecurringContributions","setKeepRecurringContributions","action","target","checked","gql","useMutation","getApplicableTaxes","Form","Formik","useFormikContext","useIntl","getLegacyIdForCollective","INTERVALS","getGQLV2FrequencyFromInterval","AmountTypes","TierTypes","getIntervalFromContributionFrequency","i18nGraphqlException","requireFields","API_V2_CONTEXT","i18nTaxDescription","i18nTaxType","getCollectivePageRoute","ContributeTier","Box","Link","MessageBox","StyledInput","StyledInputAmount","StyledInputFormikField","StyledLink","ModalBody","StyledSelect","StyledTextarea","Span","TOAST_TYPE","useToasts","FUND","PROJECT","TIER","TICKET","MEMBERSHIP","SERVICE","PRODUCT","DONATION","FIXED","FLEXIBLE","getTierTypeOptions","intl","collectiveType","simplifiedTierTypes","value","label","formatMessage","defaultMessage","membershipTierType","getReceiptTemplates","host","receiptTemplates","settings","invoice","templates","receiptTemplateTitles","title","alternative","FormFields","hideTypeSelect","tierTypeOptions","intervalOptions","amountTypeOptions","receiptTemplateOptions","taxes","formik","interval","amountType","setFieldValue","includes","field","form","loading","name","error","setFieldTouched","option","percentage","currency","valueInCents","isNaN","link","StandaloneTierPageLink","msg","pathname","EditSectionContainer","PreviewSectionContainer","ModalSectionContainer","EditModalActionsContainer","ConfirmModalButton","DeleteModalButton","CancelModalButton","ModalContainer","FieldDescription","ContributeCardPreviewContainer","onUpdate","forcedType","ContributeCardPreview","previewTier","legacyId","stats","maxQuantity","availableQuantity","editTiersFieldsFragment","listTierQuery","editTierMutation","createTierMutation","deleteTierMutation","getRequiredFields","fields","EditTierForm","isEditing","useMemo","initialValues","amount","frequency","goal","minimumAmount","description","presets","invoiceTemplate","month","formMutation","context","update","cache","__typename","cachedCollective","identify","modify","tiers","_","DELETE","submitFormMutation","deleteTier","isConfirmingDelete","setIsConfirmingDelete","addToast","onDeleteTierClick","useCallback","variables","stopRecurringContributions","evict","gc","SUCCESS","message","ERROR","parseInt","singleTicket","account","result","isSubmitting","Boolean","flexGrow"],"sourceRoot":""}