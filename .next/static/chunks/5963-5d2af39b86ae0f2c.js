"use strict";
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([[5963],{

/***/ 52903:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

/* unused harmony export searchTagsQuery */
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(23279);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(67294);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(15020);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(46829);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(60887);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(45587);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(24285);
/* harmony import */ var react_animate_height__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29244);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(86896);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(44012);
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(73254);
/* harmony import */ var react_select_creatable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(83739);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82525);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(32651);
/* harmony import */ var _lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(38268);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(16159);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(36422);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(85893);






var _excluded = ["innerProps"],
    _excluded2 = ["innerProps"];

var _templateObject;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















var searchTagsQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .ZP)(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_4___default()(["\n  query SearchTags($term: String) {\n    tagStats(tagSearchTerm: $term) {\n      nodes {\n        id\n        tag\n      }\n    }\n  }\n"])));

var MultiValue = function MultiValue(props) {
  // This prevents the menu from being opened/closed when the user clicks
  // on a value to begin dragging it
  var onMouseDown = function onMouseDown(e) {
    e.preventDefault();
    e.stopPropagation();
  };

  var _useSortable = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_8__/* .useSortable */ .nB)({
    id: props.data.value
  }),
      attributes = _useSortable.attributes,
      isDragging = _useSortable.isDragging,
      listeners = _useSortable.listeners,
      setNodeRef = _useSortable.setNodeRef,
      transform = _useSortable.transform,
      transition = _useSortable.transition;

  var style = {
    transform: _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_9__/* .CSS.Translate.toString */ .ux.Translate.toString(transform),
    transition: transition,
    opacity: isDragging ? '0.4' : undefined
  };
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div", _objectSpread(_objectSpread(_objectSpread({
    style: style,
    ref: setNodeRef
  }, attributes), listeners), {}, {
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_StyledTag__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
      m: "4px",
      variant: "rounded-right",
      maxHeight: "none",
      style: {
        cursor: 'grab'
      },
      onMouseDown: onMouseDown,
      closeButtonProps: _objectSpread(_objectSpread({}, props.removeProps), {}, {
        isFocused: props.isFocused,
        onPointerDown: function onPointerDown(e) {
          return e.stopPropagation();
        }
      }),
      children: props.children
    })
  }));
};

var Input = function Input(props) {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_select__WEBPACK_IMPORTED_MODULE_20__.c.Input, _objectSpread(_objectSpread({}, props), {}, {
    "data-cy": 'tags-select-input'
  }));
};

var Option = function Option(_ref) {
  var innerProps = _ref.innerProps,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default()(_ref, _excluded);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_select__WEBPACK_IMPORTED_MODULE_20__.c.Option, _objectSpread(_objectSpread({}, props), {}, {
    innerProps: _objectSpread(_objectSpread({}, innerProps), {}, {
      'data-cy': "tags-select-option-".concat(props.data['value'])
    })
  }));
};

var SelectContainer = function SelectContainer(_ref2) {
  var innerProps = _ref2.innerProps,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default()(_ref2, _excluded2);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_select__WEBPACK_IMPORTED_MODULE_20__.c.SelectContainer, _objectSpread(_objectSpread({}, props), {}, {
    innerProps: _objectSpread(_objectSpread({}, innerProps), {}, {
      'data-cy': 'tags-select'
    })
  }));
};

var debouncedSearch = lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()(function (searchFunc, variables) {
  return searchFunc({
    variables: variables
  });
}, 500);

function CollectiveTagsInput(_ref3) {
  var _ref3$defaultValue = _ref3.defaultValue,
      defaultValue = _ref3$defaultValue === void 0 ? [] : _ref3$defaultValue,
      onChange = _ref3.onChange,
      _ref3$suggestedTags = _ref3.suggestedTags,
      suggestedTags = _ref3$suggestedTags === void 0 ? [] : _ref3$suggestedTags;
  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)();

  var _useLazyQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_22__.useLazyQuery)(searchTagsQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T
  }),
      _useLazyQuery2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default()(_useLazyQuery, 2),
      searchTags = _useLazyQuery2[0],
      _useLazyQuery2$ = _useLazyQuery2[1],
      fetching = _useLazyQuery2$.loading,
      data = _useLazyQuery2$.data;

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(false),
      debouncing = _useState[0],
      setDebouncing = _useState[1];

  var loading = fetching || debouncing;

  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(''),
      input = _useState2[0],
      setInput = _useState2[1];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),
      options = _useState3[0],
      setOptions = _useState3[1];

  var _useState4 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)((defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.map(function (tag) {
    return {
      label: tag,
      value: tag
    };
  })) || []),
      selected = _useState4[0],
      setSelected = _useState4[1];

  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(null),
      draggingTag = _useState5[0],
      setDraggingTag = _useState5[1];

  (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function () {
    onChange(selected);
  }, [selected]);
  (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function () {
    if (input !== null && input !== void 0 && input.length) {
      setDebouncing(true);
      debouncedSearch(searchTags, {
        term: input
      });
    } else {
      // Skip debouncing when input is empty (on initial load for instance)
      searchTags();
    }
  }, [input]);
  (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function () {
    if (!fetching) {
      var _data$tagStats;

      setOptions((data === null || data === void 0 ? void 0 : (_data$tagStats = data.tagStats) === null || _data$tagStats === void 0 ? void 0 : _data$tagStats.nodes.filter(function (_ref4) {
        var tag = _ref4.tag;
        return !_lib_constants_collectives__WEBPACK_IMPORTED_MODULE_12__/* .IGNORED_TAGS.includes */ .bR.includes(tag);
      }).map(function (_ref5) {
        var tag = _ref5.tag;
        return {
          label: tag,
          value: tag
        };
      })) || []);
      setDebouncing(false);
    }
  }, [fetching, data]);

  function handleDragOver(event) {
    var active = event.active,
        over = event.over;

    if (over && active.id !== over.id) {
      setSelected(function (selected) {
        var oldIndex = selected.findIndex(function (item) {
          return item.value === active.id;
        });
        var newIndex = selected.findIndex(function (item) {
          return item.value === over.id;
        });
        return (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_8__/* .arrayMove */ .Rp)(selected, oldIndex, newIndex);
      });
    }
  } // Fix to avoid infinite loop caused by dragging over two items with variable sizes: https://github.com/clauderic/dnd-kit/issues/44#issuecomment-1018686592


  var debouncedDragOver = (0,react__WEBPACK_IMPORTED_MODULE_6__.useCallback)(lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()(handleDragOver, 40, {
    trailing: false,
    leading: true
  }), []);

  function handleDragStart(event) {
    setDraggingTag(event.active.id);
  }

  function handleDragEnd() {
    setDraggingTag(null);
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(react__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_7__/* .DndContext */ .LB, {
      onDragStart: handleDragStart,
      onDragOver: debouncedDragOver,
      onDragEnd: handleDragEnd,
      onDragCancel: handleDragEnd,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_8__/* .SortableContext */ .Fo, {
        items: selected.map(function (o) {
          return o.value;
        }),
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_select_creatable__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
          openMenuOnFocus: true,
          placeholder: intl.formatMessage({
            id: "collective.tags.input.placeholder",
            defaultMessage: [{
              "type": 0,
              "value": "+ Add tags"
            }]
          }),
          isMulti: true,
          value: selected,
          menuPortalTarget: document.body,
          components: {
            MultiValue: MultiValue,
            SelectContainer: SelectContainer,
            Input: Input,
            Option: Option
          },
          onKeyDown: function onKeyDown(e) {
            // Stop enter key from closing the menu and submitting the form when it's loading and there are no options
            if (e.key === 'Enter' && loading && options.length === 0) {
              e.preventDefault();
            }
          },
          onInputChange: function onInputChange(value) {
            return setInput(value);
          },
          options: options,
          isLoading: loading,
          onChange: function onChange(selectedOptions) {
            return setSelected(selectedOptions);
          },
          styles: {
            menuPortal: function menuPortal(styles) {
              return _objectSpread(_objectSpread({}, styles), {}, {
                zIndex: 9999
              });
            },
            control: function control(baseStyles, state) {
              return _objectSpread(_objectSpread({}, baseStyles), {}, {
                boxShadow: "inset 0px 2px 2px ".concat(_lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__/* ["default"].primary[50] */ .Z.primary[50]),
                borderColor: state.isFocused ? _lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__/* ["default"].primary[500] */ .Z.primary[500] : _lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__/* ["default"].black[300] */ .Z.black[300],
                '&:hover': {
                  borderColor: state.isFocused ? _lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__/* ["default"].primary[500] */ .Z.primary[500] : _lib_theme_colors__WEBPACK_IMPORTED_MODULE_14__/* ["default"].primary[300] */ .Z.primary[300]
                }
              });
            }
          }
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_7__/* .DragOverlay */ .y9, {
        children: draggingTag ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_StyledTag__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          m: "4px",
          variant: "rounded-right",
          style: {
            cursor: 'grabbing',
            color: 'black'
          },
          maxHeight: "none",
          backgroundColor: "black.200",
          closeButtonProps: true,
          children: draggingTag
        }) : null
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_animate_height__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      height: (suggestedTags === null || suggestedTags === void 0 ? void 0 : suggestedTags.length) > 0 ? 'auto' : 0,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_15__/* .Flex */ .kC, {
        mt: 2,
        gap: '6px',
        flexWrap: "wrap",
        alignItems: 'center',
        children: [suggestedTags && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_17__/* .Span */ .Dr, {
          color: "black.600",
          mr: 1,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z, {
            id: "W4zXqr",
            defaultMessage: [{
              "type": 0,
              "value": "Popular tags:"
            }]
          })
        }), suggestedTags === null || suggestedTags === void 0 ? void 0 : suggestedTags.map(function (tag) {
          var isSelected = selected.some(function (_ref6) {
            var value = _ref6.value;
            return value === tag;
          });
          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_StyledTag__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            variant: "rounded-right",
            type: "button",
            tabIndex: -1,
            closeButtonProps: false,
            style: {
              opacity: isSelected ? 0.5 : 1,
              cursor: 'pointer'
            },
            onClick: function onClick() {
              return isSelected ? setSelected(selected.filter(function (_ref7) {
                var value = _ref7.value;
                return value !== tag;
              })) : setSelected([].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(selected), [{
                value: tag,
                label: tag
              }]));
            },
            children: tag
          }, tag);
        })]
      })
    })]
  });
}

CollectiveTagsInput.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveTagsInput",
  "props": {
    "defaultValue": {
      "defaultValue": {
        "value": "[]",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "suggestedTags": {
      "defaultValue": {
        "value": "[]",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "preload": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (CollectiveTagsInput);

/***/ }),

/***/ 87819:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": function() { return /* binding */ components_Location; }
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/classCallCheck.js
var classCallCheck = __webpack_require__(33227);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/createClass.js
var createClass = __webpack_require__(88361);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/inherits.js
var inherits = __webpack_require__(85971);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/possibleConstructorReturn.js
var possibleConstructorReturn = __webpack_require__(52715);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(91193);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__(930);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js
var message = __webpack_require__(44012);
// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js + 3 modules
var styled_components_browser_esm = __webpack_require__(52015);
// EXTERNAL MODULE: ./node_modules/validator/index.js
var validator = __webpack_require__(48966);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/StyledLink.tsx
var StyledLink = __webpack_require__(51082);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./components/Map.js






var tile2Long = function tile2Long(tile, zoom) {
  // see https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#ECMAScript_.28JavaScript.2FActionScript.2C_etc..29
  return tile / Math.pow(2, zoom) * 360 - 180;
};

var tile2Lat = function tile2Lat(tile, zoom) {
  var n = Math.PI - 2 * Math.PI * tile / Math.pow(2, zoom);
  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));
};

var long2tile = function long2tile(_long, zoom) {
  return Math.floor((_long + 180) / 360 * Math.pow(2, zoom));
};

var lat2tile = function lat2tile(lat, zoom) {
  return Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom));
};

var makeBbox = function makeBbox(_ref) {
  var x = _ref.x,
      y = _ref.y,
      zoom = _ref.zoom;
  // https://wiki.openstreetmap.org/wiki/Slippy_Map
  var south = tile2Lat(y + 1, zoom);
  var north = tile2Lat(y, zoom);
  var west = tile2Long(x, zoom);
  var east = tile2Long(x + 1, zoom);
  return "".concat(west, "%2C").concat(south, "%2C").concat(east, "%2C").concat(north);
};

var Map = function Map(_ref2) {
  var lat = _ref2.lat,
      _long2 = _ref2["long"];

  var _useState = (0,react.useState)(null),
      src = _useState[0],
      prepareMap = _useState[1];

  (0,react.useEffect)(function () {
    var zoom = 16;
    var x = long2tile(_long2, zoom);
    var y = lat2tile(lat, zoom);
    var bbox = makeBbox({
      x: x,
      y: y,
      zoom: zoom
    }); // Set iframe url after component has mounted to prevent https://github.com/opencollective/opencollective/issues/2845

    var src = "https://www.openstreetmap.org/export/embed.html?bbox=".concat(bbox, "&marker=").concat(lat, "%2C").concat(_long2, "&layers=ND");
    prepareMap(src);
  }, [lat, _long2]);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      width: '100%',
      height: '100%'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("iframe", {
      title: "Open Street Map",
      width: "100%",
      height: "100%",
      frameBorder: "0",
      scrolling: "no",
      src: src
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledLink/* default */.Z, {
      openInNewTab: true,
      href: "https://www.openstreetmap.org/?mlat=".concat(lat, "&amp;mlon=").concat(_long2, "#map=16/").concat(lat, "/").concat(_long2),
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
        id: "map.viewLarger",
        defaultMessage: [{
          "type": 0,
          "value": "View Larger Map"
        }]
      })
    })]
  });
};

Map.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Map",
  "props": {
    "lat": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "long": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "address": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_Map = (Map);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
;// CONCATENATED MODULE: ./components/Location.js







function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }












var LocationSection = styled_components_browser_esm/* default.section.withConfig */.ZP.section.withConfig({
  displayName: "Location__LocationSection",
  componentId: "sc-f2g6cd-0"
})(["text-align:center;"]);

var Location = /*#__PURE__*/function (_React$Component) {
  inherits_default()(Location, _React$Component);

  var _super = _createSuper(Location);

  function Location() {
    classCallCheck_default()(this, Location);

    return _super.apply(this, arguments);
  }

  createClass_default()(Location, [{
    key: "render",
    value: function render() {
      if (!this.props.location) {
        return null;
      }

      var _this$props$location = this.props.location,
          name = _this$props$location.name,
          address = _this$props$location.address,
          lat = _this$props$location.lat,
          _long = _this$props$location["long"],
          country = _this$props$location.country;

      if (name === 'Online') {
        if (address && (0,validator.isURL)(address)) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            flexDirection: "Column",
            alignItems: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              textAlign: "center",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledLink/* default */.Z, {
                openInNewTabNoFollow: true,
                href: address,
                children: address
              })
            })
          });
        } else {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            textAlign: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "Location.online",
              defaultMessage: [{
                "type": 0,
                "value": "Online"
              }]
            })
          });
        }
      } else if (!name && !address && !lat && !_long && !country) {
        return null;
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(LocationSection, {
        id: "location",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          margin: "30px 10px",
          children: [this.props.showTitle && /*#__PURE__*/(0,jsx_runtime.jsx)("h1", {
            children: "Location"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            "font-size": "1.7rem",
            margin: "5px 0px",
            children: name
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            className: "address",
            color: "black.600",
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledLink/* default */.Z, {
              href: "https://www.openstreetmap.org/?mlat=".concat(lat, "&amp;mlon=").concat(_long, "#map=16/").concat(lat, "/").concat(_long),
              openInNewTab: true,
              children: [address, country ? ", ".concat(country) : '']
            })
          })]
        }), lat && _long && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          className: "map",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_Map, {
            lat: lat,
            "long": _long
          })
        })]
      });
    }
  }]);

  return Location;
}(react.Component);

defineProperty_default()(Location, "defaultProps", {
  showTitle: true
});

Location.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Location",
  "props": {
    "showTitle": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "location": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_Location = (Location);

/***/ })

}]);
//# sourceMappingURL=5963-5d2af39b86ae0f2c.js.map