{"version":3,"file":"static/chunks/pages/expense-4706d56b33e07978.js","mappings":";;;;;;;;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;;AAE/B;AACA;;AAEA;AACA;AACA;AACA,CAAC,oDAAoD;;AAErD;AACA;AACA;AACA;;AAEsE;;;AC5BlB;;AAEpD,wBAAwB,IAAI;AAC5B;AACA,IAAI,UAAU,GAAG,mBAAmB;AACpC,IAAI,SAAS,GAAG,kBAAkB;AAClC,IAAI,QAAQ,GAAG,iBAAiB;AAChC,IAAI,KAAK,GAAG,cAAc;AAC1B,IAAI,IAAI,GAAG,oBAAoB;AAC/B,IAAI,SAAS,GAAG,cAAc;AAC9B,IAAI,SAAS,GAAG,kBAAkB;AAClC,IAAI,SAAS,GAAG,kBAAkB;AAClC,IAAI,MAAM,GAAG,eAAe;AAC5B,IAAI,QAAQ,GAAG,iBAAiB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,iBAAiB;;AAEtD;AACA;AACA;;AAEA;AACA,WAAW,iBAAiB;AAC5B,8BAA8B,EAAE,iBAAiB,EAAE;AACnD;;AAEA,WAAW,cAAc;AACzB,8BAA8B,EAAE,cAAc,EAAE;AAChD;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAE4D;;;AChEuB;;AAEnF;AACA,8BAA8B,WAAW,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,UAAU,IAAI,EAAE,MAAM;AAC1H,8BAA8B,WAAW,UAAU,EAAE,QAAQ,EAAE,WAAW,SAAS,EAAE,OAAO,WAAW,IAAI,EAAE,QAAQ,EAAE,MAAM;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0DAA0D,kBAAkB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,YAAY;;AAElD;AACA;AACA;;AAEA,+BAA+B,cAAc;AAC7C,GAAG;AACH;;AAE6C;;;ACjD7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE8B;;;ACvE4D;AACnD;;AAEvC;AACA,+BAA+B,gBAAgB;AAC/C;AACA,aAAa,OAAO;AACpB;AACA,WAAW;AACX,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA,+BAA+B,gBAAgB;AAC/C;AACA,aAAa,OAAO;AACpB;AACA,WAAW;AACX,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA;AACA,2EAA2E;AAC3E;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAE0D;;;ACjEO;AACP;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;;AAEA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,kBAAkB;AAC7B;;AAEA;AACA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","sources":["webpack://_N_E/./node_modules/@shopify/address-consts/build/esm/index.mjs","webpack://_N_E/./node_modules/@shopify/address/build/esm/utilities.mjs","webpack://_N_E/./node_modules/@shopify/address/build/esm/format.mjs","webpack://_N_E/./node_modules/@shopify/address/build/esm/graphqlQuery.mjs","webpack://_N_E/./node_modules/@shopify/address/build/esm/loader.mjs","webpack://_N_E/./node_modules/@shopify/address/build/esm/AddressFormatter.mjs","webpack://_N_E/./node_modules/@styled-icons/fa-solid/Undo/Undo.esm.js","webpack://_N_E/./node_modules/@styled-icons/feather/Check/Check.esm.js","webpack://_N_E/./node_modules/@styled-icons/feather/Flag/Flag.esm.js","webpack://_N_E/./node_modules/@styled-icons/feather/Link/Link.esm.js","webpack://_N_E/./public/static/images/pidgeon.png","webpack://_N_E/./node_modules/lodash/_escapeHtmlChar.js","webpack://_N_E/./node_modules/lodash/_unescapeHtmlChar.js","webpack://_N_E/./node_modules/lodash/escape.js","webpack://_N_E/./node_modules/lodash/kebabCase.js","webpack://_N_E/./node_modules/lodash/unescape.js","webpack://_N_E/./components/expenses/ExpenseInviteNotificationBanner.js","webpack://_N_E/./components/expenses/ExpenseMissingReceiptNotificationBanner.js","webpack://_N_E/./components/icons/PrivateLockIcon.png","webpack://_N_E/./components/expenses/PrivateCommentsMessage.js","webpack://_N_E/./pages/expense.js","webpack://_N_E/?4a91"],"sourcesContent":["let FieldName;\n\n(function (FieldName) {\n  FieldName[\"FirstName\"] = \"firstName\";\n  FieldName[\"LastName\"] = \"lastName\";\n  FieldName[\"Country\"] = \"country\";\n  FieldName[\"City\"] = \"city\";\n  FieldName[\"PostalCode\"] = \"zip\";\n  FieldName[\"Zone\"] = \"province\";\n  FieldName[\"Address1\"] = \"address1\";\n  FieldName[\"Address2\"] = \"address2\";\n  FieldName[\"Phone\"] = \"phone\";\n  FieldName[\"Company\"] = \"company\";\n})(FieldName || (FieldName = {}));\n\nconst GRAPHQL_ENDPOINT = 'https://atlas.shopifysvc.com/graphql';\nlet GraphqlOperationName;\n\n(function (GraphqlOperationName) {\n  GraphqlOperationName[\"Countries\"] = \"countries\";\n  GraphqlOperationName[\"Country\"] = \"country\";\n})(GraphqlOperationName || (GraphqlOperationName = {}));\n\nconst HEADERS = {\n  'Content-Type': 'application/json',\n  'Access-Control-Allow-Origin': '*'\n};\n\nexport { FieldName, GRAPHQL_ENDPOINT, GraphqlOperationName, HEADERS };\n","import { FieldName } from '@shopify/address-consts';\n\nconst FIELD_REGEXP = /({\\w+})/g;\nconst FIELDS_MAPPING = {\n  '{firstName}': FieldName.FirstName,\n  '{lastName}': FieldName.LastName,\n  '{country}': FieldName.Country,\n  '{city}': FieldName.City,\n  '{zip}': FieldName.PostalCode,\n  '{province}': FieldName.Zone,\n  '{address1}': FieldName.Address1,\n  '{address2}': FieldName.Address2,\n  '{phone}': FieldName.Phone,\n  '{company}': FieldName.Company\n};\n/*\n * Returns empty string if all replacement fields are empty.\n */\n\nfunction renderLineTemplate(country, template, address) {\n  const result = template.match(FIELD_REGEXP);\n  let line = template;\n\n  if (!result) {\n    return '';\n  }\n\n  let lineIsEmpty = true;\n  result.forEach(key => {\n    const addressKey = key.replace('{', '').replace('}', '');\n\n    if (address[addressKey]) {\n      lineIsEmpty = false;\n    }\n\n    switch (addressKey) {\n      case FieldName.Country:\n        line = line.replace(`{${FieldName.Country}}`, country.name);\n        break;\n\n      case FieldName.Zone:\n        line = line.replace(`{${FieldName.Zone}}`, address.province ? getZone(country.zones, address.province).name : '');\n        break;\n\n      default:\n        line = line.replace(key, address[addressKey] || '');\n        break;\n    }\n  });\n\n  if (lineIsEmpty) {\n    return '';\n  } else {\n    return line.trim().replace('  ', ' ');\n  }\n}\n\nfunction getZone(zones, zoneCode) {\n  return zones.find(zone => zone.code === zoneCode) || {\n    name: '',\n    code: ''\n  };\n}\n\nexport { FIELDS_MAPPING, FIELD_REGEXP, renderLineTemplate };\n","import { renderLineTemplate, FIELD_REGEXP, FIELDS_MAPPING } from './utilities.mjs';\n\nconst LINE_DELIMITER = '_';\nconst DEFAULT_FORM_LAYOUT = '{firstName}{lastName}_{company}_{address1}_{address2}_{city}_{country}{province}{zip}_{phone}';\nconst DEFAULT_SHOW_LAYOUT = '{lastName} {firstName}_{company}_{address1} {address2}_{city} {province} {zip}_{country}_{phone}';\n/**\n * When it's time to render any address, use this function so that it's properly\n * formatted for the country's locale.\n *\n * ```typescript\n * ['Shopify', 'Lindenstraße 9-14', '10969 Berlin', 'Germany'];\n * ```\n * @returns all lines of a formatted address as an array of strings.\n */\n\nfunction formatAddress(address, country) {\n  const layout = country.formatting.show || DEFAULT_SHOW_LAYOUT;\n  return layout.split(LINE_DELIMITER).map(lineTemplate => renderLineTemplate(country, lineTemplate, address).trim());\n}\n/**\n * In an edit form, this function can be used to properly order all the input\n * fields.\n *\n * ```typescript\n * [\n *   ['firstName', 'lastName'],\n *   ['company'],\n *   ['address1'],\n *   ['address2'],\n *   ['city'],\n *   ['country', 'province', 'zip'],\n *   ['phone'],\n * ];\n * ```\n */\n\nfunction buildOrderedFields(country) {\n  const format = country ? country.formatting.edit : DEFAULT_FORM_LAYOUT;\n  return format.split(LINE_DELIMITER).map(lineTemplate => {\n    const result = lineTemplate.match(FIELD_REGEXP);\n\n    if (!result) {\n      return [];\n    }\n\n    return result.map(field => FIELDS_MAPPING[field]);\n  });\n}\n\nexport { buildOrderedFields, formatAddress };\n","const query = `\nquery countries($locale: SupportedLocale!) {\n  countries(locale: $locale) {\n    name\n    code\n    continent\n    phoneNumberPrefix\n    autocompletionField\n    provinceKey\n    labels {\n      address1\n      address2\n      city\n      company\n      country\n      firstName\n      lastName\n      phone\n      postalCode\n      zone\n    }\n    optionalLabels {\n      address2\n    }\n    formatting {\n      edit\n      show\n    }\n    zones {\n      name\n      code\n    }\n  }\n}\n\nquery country($countryCode: SupportedCountry!, $locale: SupportedLocale!) {\n  country(countryCode: $countryCode, locale: $locale) {\n    name\n    code\n    continent\n    phoneNumberPrefix\n    autocompletionField\n    provinceKey\n    labels {\n      address1\n      address2\n      city\n      company\n      country\n      firstName\n      lastName\n      phone\n      postalCode\n      zone\n    }\n    optionalLabels {\n      address2\n    }\n    formatting {\n      edit\n      show\n    }\n    zones {\n      name\n      code\n    }\n  }\n}\n`;\nvar query$1 = query;\n\nexport { query$1 as default };\n","import { GRAPHQL_ENDPOINT, HEADERS, GraphqlOperationName } from '@shopify/address-consts';\nimport query from './graphqlQuery.mjs';\n\nconst loadCountries = memoizeAsync(async locale => {\n  const response = await fetch(GRAPHQL_ENDPOINT, {\n    method: 'POST',\n    headers: HEADERS,\n    body: JSON.stringify({\n      query,\n      operationName: GraphqlOperationName.Countries,\n      variables: {\n        locale: locale.replace(/-/, '_').toUpperCase()\n      }\n    })\n  });\n  const countries = await response.json();\n\n  if (!('data' in countries) && 'errors' in countries) {\n    throw new CountryLoaderError(countries);\n  }\n\n  return countries.data.countries;\n});\nconst loadCountry = memoizeAsync(async (locale, countryCode) => {\n  const response = await fetch(GRAPHQL_ENDPOINT, {\n    method: 'POST',\n    headers: HEADERS,\n    body: JSON.stringify({\n      query,\n      operationName: GraphqlOperationName.Country,\n      variables: {\n        countryCode,\n        locale: locale.replace(/-/, '_').toUpperCase()\n      }\n    })\n  });\n  const country = await response.json();\n\n  if (!('data' in country) && 'errors' in country) {\n    throw new CountryLoaderError(country);\n  }\n\n  return country.data.country;\n});\nclass CountryLoaderError extends Error {\n  constructor(errors) {\n    const errorMessage = errors.errors.map(error => error.message).join('; ');\n    super(errorMessage);\n  }\n\n}\n\nfunction memoizeAsync(asyncFunction) {\n  const cache = {};\n  return (...args) => {\n    const stringifiedArgs = JSON.stringify(args);\n\n    if (!cache[stringifiedArgs]) {\n      cache[stringifiedArgs] = asyncFunction.apply(this, args);\n    }\n\n    return cache[stringifiedArgs];\n  };\n}\n\nexport { CountryLoaderError, loadCountries, loadCountry };\n","import { formatAddress, buildOrderedFields } from './format.mjs';\nimport { loadCountry, loadCountries } from './loader.mjs';\n\nconst ORDERED_COUNTRIES_CACHE = new Map();\nclass AddressFormatter {\n  /**\n   * Useful in tests or any situation where the cache has undesirable\n   * side-effects.\n   */\n  static resetCache() {\n    ORDERED_COUNTRIES_CACHE.clear();\n  }\n\n  constructor(locale) {\n    this.locale = locale;\n    this.locale = locale;\n  }\n\n  updateLocale(locale) {\n    this.locale = locale;\n  }\n\n  async getCountry(countryCode) {\n    const country = this.loadCountryFromCache(countryCode);\n    if (country) return country;\n    return loadCountry(this.locale, countryCode);\n  }\n\n  async getCountries() {\n    const cachedCountries = ORDERED_COUNTRIES_CACHE.get(this.locale);\n    if (cachedCountries) return cachedCountries;\n    const countries = await loadCountries(this.locale);\n    ORDERED_COUNTRIES_CACHE.set(this.locale, countries);\n    return countries;\n  }\n  /* Returns the address ordered in an array based based on the country code\n   * Eg.:\n   *   [\n   *     'Shopify',\n   *     'First Name Last Name',\n   *     'Address 1',\n   *     'address2',\n   *     'Montréal',\n   *     'Canada Quebec H2J 4B7',\n   *     '514 444 3333'\n   *   ]\n   */\n\n\n  async format(address) {\n    const country = await this.getCountry(address.country);\n    return formatAddress(address, country);\n  }\n  /* Returns an array that shows how to order fields based on the country code\n   * Eg.:\n   *   [\n   *     ['company'],\n   *     ['firstName', 'lastName'],\n   *     ['address1'],\n   *     ['address2'],\n   *     ['city'],\n   *     ['country', 'province', 'zip'],\n   *     ['phone']\n   *   ]\n   */\n\n\n  async getOrderedFields(countryCode) {\n    const country = await this.getCountry(countryCode);\n    return buildOrderedFields(country);\n  }\n\n  loadCountryFromCache(countryCode) {\n    const cachedCountries = ORDERED_COUNTRIES_CACHE.get(this.locale);\n    if (!cachedCountries) return null;\n    return cachedCountries.find(({\n      code\n    }) => code === countryCode);\n  }\n\n}\n\nexport { AddressFormatter as default };\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Undo = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 512 512\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2l17.6-17.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3-163.8-62.5-226.3 0L125.7 160z\"\n  }));\n});\nUndo.displayName = 'Undo';\nexport var UndoDimensions = {\n  height: 512,\n  width: 512\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Check = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"none\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"stroke\": \"currentColor\",\n    \"strokeLinecap\": \"round\",\n    \"strokeLinejoin\": \"round\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"20 6 9 17 4 12\"\n  }));\n});\nCheck.displayName = 'Check';\nexport var CheckDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Flag = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"none\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"stroke\": \"currentColor\",\n    \"strokeLinecap\": \"round\",\n    \"strokeLinejoin\": \"round\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: 4,\n    x2: 4,\n    y1: 22,\n    y2: 15\n  }));\n});\nFlag.displayName = 'Flag';\nexport var FlagDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Link = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"none\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"stroke\": \"currentColor\",\n    \"strokeLinecap\": \"round\",\n    \"strokeLinejoin\": \"round\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"\n  }));\n});\nLink.displayName = 'Link';\nexport var LinkDimensions = {\n  height: 24,\n  width: 24\n};","module.exports = \"/_next/static/images/pidgeon-0ed27f24287e8bd6972c57353f79abd7.png\";","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\nmodule.exports = escapeHtmlChar;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map HTML entities to characters. */\nvar htmlUnescapes = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n};\n\n/**\n * Used by `_.unescape` to convert HTML entities to characters.\n *\n * @private\n * @param {string} chr The matched character to unescape.\n * @returns {string} Returns the unescaped character.\n */\nvar unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\nmodule.exports = unescapeHtmlChar;\n","var escapeHtmlChar = require('./_escapeHtmlChar'),\n    toString = require('./toString');\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nmodule.exports = escape;\n","var createCompounder = require('./_createCompounder');\n\n/**\n * Converts `string` to\n * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the kebab cased string.\n * @example\n *\n * _.kebabCase('Foo Bar');\n * // => 'foo-bar'\n *\n * _.kebabCase('fooBar');\n * // => 'foo-bar'\n *\n * _.kebabCase('__FOO_BAR__');\n * // => 'foo-bar'\n */\nvar kebabCase = createCompounder(function(result, word, index) {\n  return result + (index ? '-' : '') + word.toLowerCase();\n});\n\nmodule.exports = kebabCase;\n","var toString = require('./toString'),\n    unescapeHtmlChar = require('./_unescapeHtmlChar');\n\n/** Used to match HTML entities and HTML characters. */\nvar reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n    reHasEscapedHtml = RegExp(reEscapedHtml.source);\n\n/**\n * The inverse of `_.escape`; this method converts the HTML entities\n * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n * their corresponding characters.\n *\n * **Note:** No other HTML entities are unescaped. To unescape additional\n * HTML entities use a third-party library like [_he_](https://mths.be/he).\n *\n * @static\n * @memberOf _\n * @since 0.6.0\n * @category String\n * @param {string} [string=''] The string to unescape.\n * @returns {string} Returns the unescaped string.\n * @example\n *\n * _.unescape('fred, barney, &amp; pebbles');\n * // => 'fred, barney, & pebbles'\n */\nfunction unescape(string) {\n  string = toString(string);\n  return (string && reHasEscapedHtml.test(string))\n    ? string.replace(reEscapedHtml, unescapeHtmlChar)\n    : string;\n}\n\nmodule.exports = unescape;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gql, useMutation } from '@apollo/client';\nimport { pick } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { checkUserExistence, signin } from '../../lib/api';\nimport { API_V2_CONTEXT } from '../../lib/graphql/helpers';\nimport { useAsyncCall } from '../../lib/hooks/useAsyncCall';\nimport { getWebsiteUrl } from '../../lib/utils';\n\nimport { Box, Flex } from '../../components/Grid';\nimport StyledButton from '../../components/StyledButton';\nimport StyledCard from '../../components/StyledCard';\nimport StyledLink from '../../components/StyledLink';\nimport { H4, P } from '../../components/Text';\n\nimport pidgeon from '../../public/static/images/pidgeon.png';\n\nconst resendDraftExpenseInviteMutation = gql`\n  mutation ResendDraftExpenseInvite($expense: ExpenseReferenceInput!) {\n    resendDraftExpenseInvite(expense: $expense) {\n      id\n    }\n  }\n`;\n\nconst PidgeonIllustration = styled.img.attrs({ src: pidgeon })`\n  width: 132px;\n  height: 132px;\n`;\n\nconst ResendDraftInviteButton = ({ expense }) => {\n  const [resendDraftInvite, { loading, error, data }] = useMutation(resendDraftExpenseInviteMutation, {\n    context: API_V2_CONTEXT,\n  });\n  const success = !error && data?.resendDraftExpenseInvite?.id;\n\n  return (\n    <StyledButton\n      buttonStyle={success ? 'successSecondary' : 'primary'}\n      buttonSize=\"tiny\"\n      mr={1}\n      loading={loading}\n      disabled={success}\n      onClick={() => resendDraftInvite({ variables: { expense: pick(expense, ['id', 'legacyId']) } })}\n    >\n      {success ? (\n        <FormattedMessage id=\"ResendInviteSuccessful\" defaultMessage=\"Invite sent\" />\n      ) : (\n        <FormattedMessage id=\"ResendInvite\" defaultMessage=\"Resend invite\" />\n      )}\n    </StyledButton>\n  );\n};\n\nResendDraftInviteButton.propTypes = {\n  expense: PropTypes.object.isRequired,\n};\n\nconst ResendSignInEmailButton = ({ createdUser }) => {\n  const { loading, call, error, data } = useAsyncCall(async () => {\n    const userExists = await checkUserExistence(createdUser.email);\n    if (userExists) {\n      const redirect = window.location.pathname + window.location.search;\n      return await signin({\n        user: { email: createdUser.email },\n        redirect,\n        websiteUrl: getWebsiteUrl(),\n      });\n    } else {\n      throw Error('User does not exist.');\n    }\n  });\n  const success = !error && data?.success;\n  return (\n    <StyledButton\n      buttonStyle={success ? 'successSecondary' : 'primary'}\n      buttonSize=\"tiny\"\n      mr={1}\n      loading={loading}\n      disabled={success}\n      onClick={call}\n    >\n      {success ? (\n        <FormattedMessage id=\"ResendEmailSuccessful\" defaultMessage=\"Check your inbox!\" />\n      ) : (\n        <FormattedMessage id=\"ResendEmail\" defaultMessage=\"Resend email\" />\n      )}\n    </StyledButton>\n  );\n};\n\nResendSignInEmailButton.propTypes = {\n  createdUser: PropTypes.object.isRequired,\n};\n\nconst ExpenseInviteNotificationBanner = props => {\n  return (\n    <StyledCard py={3} px=\"26px\" mb={4} borderStyle={'solid'} data-cy=\"expense-draft-banner\">\n      <Flex>\n        <PidgeonIllustration alt=\"\" />\n        <Flex ml={[0, 2]} maxWidth=\"448px\" flexDirection=\"column\">\n          <H4 mb=\"10px\" fontWeight=\"500\">\n            {props.createdUser ? (\n              <FormattedMessage id=\"VerifyEmailAddress\" defaultMessage=\"Verify your email address\" />\n            ) : (\n              <FormattedMessage id=\"InviteOnItsWay\" defaultMessage=\"Your invite is on its way\" />\n            )}\n          </H4>\n          <P lineHeight=\"20px\">\n            {props.createdUser ? (\n              <FormattedMessage\n                id=\"VerifyEmailInstructions\"\n                defaultMessage=\"A verification email has been sent to {email}. Click the link to complete submitting this expense. If you have not received the email, please check your spam.\"\n                values={{\n                  email: props.createdUser?.email || props.expense.draft?.payee?.name,\n                }}\n              />\n            ) : (\n              <FormattedMessage\n                id=\"Expense.InviteIsOnItsWay.Description\"\n                defaultMessage=\"An invitation to submit this expense has been sent to {email}. Once they confirm and finish the process, it will appear on the expenses list.\"\n                values={{\n                  email: props.expense.draft?.payee?.email || props.expense.draft?.payee?.name,\n                }}\n              />\n            )}\n          </P>\n          <Box mt=\"10px\">\n            {props.createdUser ? (\n              <ResendSignInEmailButton createdUser={props.createdUser} />\n            ) : (\n              <ResendDraftInviteButton expense={props.expense} />\n            )}\n            <StyledLink href=\"/help\" buttonStyle=\"standard\" buttonSize=\"tiny\">\n              <FormattedMessage id=\"error.contactSupport\" defaultMessage=\"Contact support\" />\n            </StyledLink>\n          </Box>\n        </Flex>\n      </Flex>\n    </StyledCard>\n  );\n};\n\nExpenseInviteNotificationBanner.propTypes = {\n  createdUser: PropTypes.object,\n  expense: PropTypes.object.isRequired,\n};\n\nexport default ExpenseInviteNotificationBanner;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Box, Flex } from '../../components/Grid';\nimport MessageBox from '../../components/MessageBox';\nimport StyledButton from '../../components/StyledButton';\nimport { H4, P } from '../../components/Text';\n\nconst ExpenseMissingReceiptNotificationBanner = props => {\n  return (\n    <MessageBox py={3} px=\"26px\" mb={4} type=\"warning\">\n      <Flex>\n        <Flex ml={[0, 2]} flexDirection=\"column\">\n          <H4 mb=\"10px\" fontWeight=\"500\">\n            <FormattedMessage id=\"AttachReceipt\" defaultMessage=\"Submit receipt\" />\n          </H4>\n          <P lineHeight=\"20px\">\n            <FormattedMessage\n              id=\"AttachReceiptInstructions\"\n              defaultMessage=\"This expense was automatically created by charging a linked credit card. To complete the process, add a description and upload the receipt. All charges must have receipts.\"\n            />\n          </P>\n          {props.onEdit && (\n            <Box mt=\"10px\">\n              <StyledButton buttonSize=\"tiny\" mr={1} onClick={props.onEdit}>\n                <FormattedMessage id=\"Expense.edit\" defaultMessage=\"Edit expense\" />\n              </StyledButton>\n            </Box>\n          )}\n        </Flex>\n      </Flex>\n    </MessageBox>\n  );\n};\n\nExpenseMissingReceiptNotificationBanner.propTypes = {\n  onEdit: PropTypes.func,\n};\n\nexport default ExpenseMissingReceiptNotificationBanner;\n","export default \"data:image/png;base64,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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { Box, Flex } from '../Grid';\nimport LoadingPlaceholder from '../LoadingPlaceholder';\nimport MessageBox from '../MessageBox';\nimport { P } from '../Text';\n\nimport privateLockIconUrl from '../icons/PrivateLockIcon.png';\n\nconst PrivateLockIcon = styled.img.attrs({ src: privateLockIconUrl })`\n  width: 32px;\n  height: 32px;\n  margin-left: 8px;\n`;\n\nconst PrivateCommentsMessage = ({ isAllowed, isLoading, ...props }) => {\n  if (isLoading) {\n    return <LoadingPlaceholder height={76} borderRadius={8} />;\n  }\n\n  return (\n    <MessageBox type=\"info\" {...props}>\n      <Flex alignItems=\"center\" my={1}>\n        <PrivateLockIcon alt=\"\" />\n        <Box ml={3}>\n          <P fontWeight=\"bold\" fontSize=\"12px\" lineHeight=\"20px\">\n            {isAllowed ? (\n              <FormattedMessage id=\"PrivateCommentsMessage.Allowed\" defaultMessage=\"Your comments are private.\" />\n            ) : (\n              <FormattedMessage id=\"PrivateCommentsMessage.NotAllowed\" defaultMessage=\"Comments are private.\" />\n            )}\n          </P>\n          <P fontSize=\"12px\" lineHeight=\"18px\">\n            {isAllowed ? (\n              <FormattedMessage\n                id=\"PrivateCommentsMessage.AllowedDetails\"\n                defaultMessage=\"Expenses comments are private, because they sometimes contain confidential information such as payment details. Only the expense submitter and the admins can see them.\"\n              />\n            ) : (\n              <FormattedMessage\n                id=\"PrivateCommentsMessage.NotAllowedDetails\"\n                defaultMessage=\"You must be signed in as an admin or the expense submitter to read comments on an expense.\"\n              />\n            )}\n          </P>\n        </Box>\n      </Flex>\n    </MessageBox>\n  );\n};\n\nPrivateCommentsMessage.propTypes = {\n  isLoading: PropTypes.bool,\n  isAllowed: PropTypes.bool,\n};\n\nexport default PrivateCommentsMessage;\n","/* eslint-disable graphql/template-strings */\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gql } from '@apollo/client';\nimport { graphql, withApollo } from '@apollo/client/react/hoc';\nimport dayjs from 'dayjs';\nimport { cloneDeep, debounce, get, includes, sortBy, uniqBy, update } from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport { withRouter } from 'next/router';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport { getCollectivePageMetadata, getCollectiveTypeForUrl, getSuggestedTags } from '../lib/collective.lib';\nimport expenseStatus from '../lib/constants/expense-status';\nimport expenseTypes from '../lib/constants/expenseTypes';\nimport { formatErrorMessage, generateNotFoundError, getErrorFromGraphqlException } from '../lib/errors';\nimport { getPayoutProfiles } from '../lib/expenses';\nimport { API_V2_CONTEXT } from '../lib/graphql/helpers';\nimport { addParentToURLIfMissing, getCollectivePageCanonicalURL } from '../lib/url-helpers';\n\nimport CollectiveNavbar from '../components/collective-navbar';\nimport { NAVBAR_CATEGORIES } from '../components/collective-navbar/constants';\nimport Container from '../components/Container';\nimport CommentForm from '../components/conversations/CommentForm';\nimport { commentFieldsFragment } from '../components/conversations/graphql';\nimport Thread from '../components/conversations/Thread';\nimport ErrorPage from '../components/ErrorPage';\nimport ExpenseAttachedFiles from '../components/expenses/ExpenseAttachedFiles';\nimport ExpenseForm, { prepareExpenseForSubmit } from '../components/expenses/ExpenseForm';\nimport ExpenseInfoSidebar from '../components/expenses/ExpenseInfoSidebar';\nimport ExpenseInviteNotificationBanner from '../components/expenses/ExpenseInviteNotificationBanner';\nimport ExpenseMissingReceiptNotificationBanner from '../components/expenses/ExpenseMissingReceiptNotificationBanner';\nimport ExpenseNotesForm from '../components/expenses/ExpenseNotesForm';\nimport ExpenseRecurringBanner from '../components/expenses/ExpenseRecurringBanner';\nimport ExpenseSummary, { SummaryHeader } from '../components/expenses/ExpenseSummary';\nimport {\n  expensePageExpenseFieldsFragment,\n  loggedInAccountExpensePayoutFieldsFragment,\n} from '../components/expenses/graphql/fragments';\nimport MobileCollectiveInfoStickyBar from '../components/expenses/MobileCollectiveInfoStickyBar';\nimport PrivateCommentsMessage from '../components/expenses/PrivateCommentsMessage';\nimport { Box, Flex } from '../components/Grid';\nimport HTMLContent from '../components/HTMLContent';\nimport { getI18nLink, I18nSupportLink } from '../components/I18nFormatters';\nimport CommentIcon from '../components/icons/CommentIcon';\nimport PrivateInfoIcon from '../components/icons/PrivateInfoIcon';\nimport LinkCollective from '../components/LinkCollective';\nimport LoadingPlaceholder from '../components/LoadingPlaceholder';\nimport MessageBox from '../components/MessageBox';\nimport Page from '../components/Page';\nimport StyledButton from '../components/StyledButton';\nimport StyledCard from '../components/StyledCard';\nimport StyledCheckbox from '../components/StyledCheckbox';\nimport StyledLink from '../components/StyledLink';\nimport { H5, Span } from '../components/Text';\nimport { TOAST_TYPE, withToasts } from '../components/ToastProvider';\nimport { withUser } from '../components/UserProvider';\n\nconst getVariableFromProps = props => {\n  const firstOfCurrentYear = dayjs(new Date(new Date().getFullYear(), 0, 1)).utc(true).toISOString();\n  return {\n    legacyExpenseId: props.legacyExpenseId,\n    draftKey: props.draftKey,\n    totalPaidExpensesDateFrom: firstOfCurrentYear,\n  };\n};\n\nconst messages = defineMessages({\n  title: {\n    id: 'ExpensePage.title',\n    defaultMessage: '{title} · Expense #{id}',\n  },\n});\n\nconst expensePageQuery = gql`\n  query ExpensePage($legacyExpenseId: Int!, $draftKey: String, $offset: Int, $totalPaidExpensesDateFrom: DateTime) {\n    expense(expense: { legacyId: $legacyExpenseId }, draftKey: $draftKey) {\n      id\n      ...ExpensePageExpenseFields\n      comments(limit: 100, offset: $offset) {\n        totalCount\n        nodes {\n          id\n          ...CommentFields\n        }\n      }\n    }\n\n    # As it uses a dedicated variable this needs to be separated from the ExpensePageExpenseFields fragment\n    expensePayeeStats: expense(expense: { legacyId: $legacyExpenseId }) {\n      id\n      payee {\n        id\n        stats {\n          id\n          totalPaidInvoices: totalPaidExpenses(expenseType: [INVOICE], dateFrom: $totalPaidExpensesDateFrom) {\n            valueInCents\n            currency\n          }\n          totalPaidReceipts: totalPaidExpenses(expenseType: [RECEIPT], dateFrom: $totalPaidExpensesDateFrom) {\n            valueInCents\n            currency\n          }\n          totalPaidGrants: totalPaidExpenses(expenseType: [GRANT], dateFrom: $totalPaidExpensesDateFrom) {\n            valueInCents\n            currency\n          }\n        }\n      }\n    }\n\n    loggedInAccount {\n      id\n      ...LoggedInAccountExpensePayoutFields\n    }\n  }\n\n  ${loggedInAccountExpensePayoutFieldsFragment}\n  ${expensePageExpenseFieldsFragment}\n  ${commentFieldsFragment}\n`;\n\nconst editExpenseMutation = gql`\n  mutation EditExpense($expense: ExpenseUpdateInput!, $draftKey: String) {\n    editExpense(expense: $expense, draftKey: $draftKey) {\n      id\n      ...ExpensePageExpenseFields\n    }\n  }\n\n  ${expensePageExpenseFieldsFragment}\n`;\n\nconst verifyExpenseMutation = gql`\n  mutation VerifyExpense($expense: ExpenseReferenceInput!, $draftKey: String) {\n    verifyExpense(expense: $expense, draftKey: $draftKey) {\n      id\n      ...ExpensePageExpenseFields\n    }\n  }\n\n  ${expensePageExpenseFieldsFragment}\n`;\n\nconst PrivateNoteLabel = () => {\n  return (\n    <Span fontSize=\"12px\" color=\"black.700\" fontWeight=\"bold\">\n      <FormattedMessage id=\"Expense.PrivateNote\" defaultMessage=\"Private note\" />\n      &nbsp;&nbsp;\n      <PrivateInfoIcon color=\"#969BA3\" />\n    </Span>\n  );\n};\n\nconst PAGE_STATUS = { VIEW: 1, EDIT: 2, EDIT_SUMMARY: 3 };\nconst SIDE_MARGIN_WIDTH = 'calc((100% - 1200px) / 2)';\n\nclass ExpensePage extends React.Component {\n  static getInitialProps({ query: { parentCollectiveSlug, collectiveSlug, ExpenseId, key, edit } }) {\n    return {\n      parentCollectiveSlug,\n      collectiveSlug,\n      edit,\n      draftKey: key,\n      legacyExpenseId: parseInt(ExpenseId),\n    };\n  }\n\n  static propTypes = {\n    collectiveSlug: PropTypes.string,\n    parentCollectiveSlug: PropTypes.string,\n    legacyExpenseId: PropTypes.number,\n    draftKey: PropTypes.string,\n    edit: PropTypes.string,\n    LoggedInUser: PropTypes.object,\n    loadingLoggedInUser: PropTypes.bool,\n    /** @ignore from withApollo */\n    client: PropTypes.object.isRequired,\n    /** from withData */\n    data: PropTypes.object.isRequired,\n    /** from addEditExpenseMutation */\n    editExpense: PropTypes.func.isRequired,\n    verifyExpense: PropTypes.func.isRequired,\n    addToast: PropTypes.func.isRequired,\n    /** from injectIntl */\n    intl: PropTypes.object,\n    expensesTags: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string,\n        tag: PropTypes.string,\n      }),\n    ),\n    router: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n    this.expenseTopRef = React.createRef();\n    this.state = {\n      hasRefetchedDataForUser: Boolean(props.LoggedInUser), // If the page is loaded directly with a logged in user, we can consider the query was already authenticated\n      error: null,\n      status:\n        this.props.draftKey && this.props.data.expense?.status === expenseStatus.DRAFT\n          ? PAGE_STATUS.EDIT\n          : PAGE_STATUS.VIEW,\n      editedExpense: null,\n      isSubmitting: false,\n      isPoolingEnabled: true,\n      tos: false,\n      newsletterOptIn: false,\n      createdUser: null,\n    };\n\n    this.pollingInterval = 60;\n    this.pollingTimeout = null;\n    this.pollingStarted = false;\n    this.pollingPaused = false;\n    this.handlePolling = debounce(this.handlePolling.bind(this), 100);\n  }\n\n  componentDidMount() {\n    const { router, data, legacyExpenseId } = this.props;\n    const account = data?.account;\n    addParentToURLIfMissing(router, account, `/expenses/${legacyExpenseId}`);\n\n    const shouldEditDraft = this.props.data.expense?.status === expenseStatus.DRAFT && this.props.draftKey;\n    if (shouldEditDraft) {\n      this.setState(() => ({\n        status: PAGE_STATUS.EDIT,\n        editedExpense: this.props.data.expense,\n        isPoolingEnabled: false,\n      }));\n    }\n\n    const expense = data?.expense;\n    if (\n      expense?.status === expenseStatus.UNVERIFIED &&\n      expense?.permissions?.canEdit &&\n      this.props.LoggedInUser &&\n      expense?.createdByAccount?.slug === this.props.LoggedInUser?.collective?.slug\n    ) {\n      this.handleExpenseVerification();\n    }\n\n    this.handlePolling();\n    document.addEventListener('mousemove', this.handlePolling);\n  }\n\n  componentDidUpdate(oldProps, oldState) {\n    // Refetch data when users are logged in to make sure they can see the private info\n    if (!oldProps.LoggedInUser && this.props.LoggedInUser) {\n      this.refetchDataForUser();\n    }\n\n    // Automatically edit expense if missing receipt\n    const expense = this.props.data?.expense;\n    const isMissingReceipt =\n      expense?.status === expenseStatus.PAID &&\n      expense?.type === expenseTypes.CHARGE &&\n      expense?.permissions?.canEdit &&\n      expense?.items?.every(item => !item.url);\n    if (this.props.edit && isMissingReceipt && this.state.status !== PAGE_STATUS.EDIT) {\n      this.onEditBtnClick();\n      this.props.router.replace(document.location.pathname);\n    }\n\n    // Scroll to expense's top when changing status\n    if (oldState.status !== this.state.status) {\n      this.scrollToExpenseTop();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.data?.stopPolling) {\n      this.props.data.stopPolling();\n    }\n\n    document.removeEventListener('mousemove', this.handlePolling);\n  }\n\n  handlePolling() {\n    if (this.state.isPoolingEnabled) {\n      if (!this.pollingStarted) {\n        if (this.pollingPaused) {\n          // The polling was paused, so we immediately refetch\n          if (this.props.data?.refetch) {\n            this.props.data.refetch();\n          }\n          this.pollingPaused = false;\n        }\n        if (this.props.data?.startPolling(this.pollingInterval * 1000)) {\n          this.props.data.stopPolling();\n        }\n        this.pollingStarted = true;\n      }\n\n      clearTimeout(this.pollingTimeout);\n      this.pollingTimeout = setTimeout(() => {\n        // No mouse movement was detected since 60sec, we stop polling\n        if (this.props.data?.stopPolling) {\n          this.props.data.stopPolling();\n        }\n        this.pollingStarted = false;\n        this.pollingPaused = true;\n      }, this.pollingInterval * 1000);\n    }\n  }\n\n  async refetchDataForUser() {\n    try {\n      this.setState({ hasRefetchedDataForUser: false });\n      await this.props.data.refetch();\n    } finally {\n      this.setState({ hasRefetchedDataForUser: true });\n    }\n  }\n\n  async handleExpenseVerification() {\n    const expense = this.props.data?.expense;\n    await this.props.verifyExpense({\n      variables: { expense: { id: expense.id } },\n    });\n\n    const { parentCollectiveSlug, collectiveSlug, legacyExpenseId, data } = this.props;\n    const parentCollectiveSlugRoute = parentCollectiveSlug ? `${parentCollectiveSlug}/` : '';\n    const collectiveType = parentCollectiveSlug ? getCollectiveTypeForUrl(data?.account) : undefined;\n    const collectiveTypeRoute = collectiveType ? `${collectiveType}/` : '';\n    await this.props.router.push(\n      `${parentCollectiveSlugRoute}${collectiveTypeRoute}${collectiveSlug}/expenses/${legacyExpenseId}`,\n    );\n    this.props.data.refetch();\n    this.props.addToast({\n      type: TOAST_TYPE.SUCCESS,\n      title: <FormattedMessage id=\"Expense.Submitted\" defaultMessage=\"Expense submitted\" />,\n      message: (\n        <FormattedMessage id=\"Expense.SuccessPage\" defaultMessage=\"You can edit or review updates on this page.\" />\n      ),\n    });\n    window.scrollTo(0, 0);\n  }\n\n  onSummarySubmit = async () => {\n    try {\n      this.setState({ isSubmitting: true, error: null });\n      const { editedExpense } = this.state;\n      if (!editedExpense.payee.id && this.state.newsletterOptIn) {\n        editedExpense.payee.newsletterOptIn = this.state.newsletterOptIn;\n      }\n      await this.props.editExpense({\n        variables: {\n          expense: prepareExpenseForSubmit(editedExpense),\n          draftKey: this.props.data.expense?.status === expenseStatus.DRAFT ? this.props.draftKey : null,\n        },\n      });\n      if (this.props.data.expense?.type === expenseTypes.CHARGE) {\n        await this.props.data.refetch();\n      }\n      const createdUser = editedExpense?.payee;\n      this.setState({\n        status: PAGE_STATUS.VIEW,\n        isSubmitting: false,\n        editedExpense: undefined,\n        error: null,\n        createdUser,\n      });\n    } catch (e) {\n      this.setState({ error: getErrorFromGraphqlException(e), isSubmitting: false });\n      this.scrollToExpenseTop();\n    }\n  };\n\n  onNotesChanges = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState(state => ({ editedExpense: { ...state.editedExpense, [name]: value } }));\n  };\n\n  scrollToExpenseTop() {\n    if (this.expenseTopRef.current) {\n      this.expenseTopRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n\n  getPageMetaData(expense) {\n    const { intl, legacyExpenseId } = this.props;\n    const baseMetadata = getCollectivePageMetadata(expense?.account);\n    if (expense?.description) {\n      return {\n        ...baseMetadata,\n        title: intl.formatMessage(messages.title, { id: legacyExpenseId, title: expense.description }),\n      };\n    } else {\n      return baseMetadata;\n    }\n  }\n\n  clonePageQueryCacheData() {\n    const { client } = this.props;\n    const query = expensePageQuery;\n    const variables = getVariableFromProps(this.props);\n    const data = cloneDeep(client.readQuery({ query, variables }));\n    return [data, query, variables];\n  }\n\n  getSuggestedTags = memoizeOne(getSuggestedTags);\n\n  onCommentAdded = comment => {\n    // Add comment to cache if not already fetched\n    const [data, query, variables] = this.clonePageQueryCacheData();\n    update(data, 'expense.comments.nodes', comments => uniqBy([...comments, comment], 'id'));\n    update(data, 'expense.comments.totalCount', totalCount => totalCount + 1);\n    this.props.client.writeQuery({ query, variables, data });\n  };\n\n  onCommentDeleted = comment => {\n    const [data, query, variables] = this.clonePageQueryCacheData();\n    update(data, 'expense.comments.nodes', comments => comments.filter(c => c.id !== comment.id));\n    update(data, 'expense.comments.totalCount', totalCount => totalCount - 1);\n    this.props.client.writeQuery({ query, variables, data });\n  };\n\n  fetchMore = async () => {\n    const { legacyExpenseId, draftKey, data } = this.props;\n\n    // refetch before fetching more as comments added to the cache can change the offset\n    await data.refetch();\n    await data.fetchMore({\n      variables: { legacyExpenseId, draftKey, offset: get(data, 'expense.comments.nodes', []).length },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) {\n          return prev;\n        }\n\n        const newValues = {};\n\n        newValues.expense = {\n          ...prev.expense,\n          comments: {\n            ...fetchMoreResult.expense.comments,\n            nodes: [...prev.expense.comments.nodes, ...fetchMoreResult.expense.comments.nodes],\n          },\n        };\n\n        return Object.assign({}, prev, newValues);\n      },\n    });\n  };\n\n  getThreadItems = memoizeOne((comments, activities) => {\n    return sortBy([...(comments || []), ...activities], 'createdAt');\n  });\n\n  onEditBtnClick = async () => {\n    return this.setState(() => ({ status: PAGE_STATUS.EDIT, editedExpense: this.props.data.expense }));\n  };\n\n  onDelete = async expense => {\n    const collective = expense.account;\n    const parentCollectiveSlugRoute = collective.parent?.slug ? `${collective.parent?.slug}/` : '';\n    const collectiveType = collective.parent ? getCollectiveTypeForUrl(collective) : undefined;\n    const collectiveTypeRoute = collectiveType ? `${collectiveType}/` : '';\n    return this.props.router.replace(`${parentCollectiveSlugRoute}${collectiveTypeRoute}${collective.slug}/expenses`);\n  };\n\n  render() {\n    const { collectiveSlug, data, LoggedInUser, loadingLoggedInUser, intl } = this.props;\n    const { hasRefetchedDataForUser, error, status, editedExpense } = this.state;\n    const isRefetchingDataForUser = LoggedInUser && !hasRefetchedDataForUser;\n\n    if (!data.loading && !isRefetchingDataForUser) {\n      if (!data || data.error) {\n        return <ErrorPage data={data} />;\n      } else if (!data.expense) {\n        return <ErrorPage error={generateNotFoundError(null)} log={false} />;\n      } else if (!data.expense.account || this.props.collectiveSlug !== data.expense.account.slug) {\n        return <ErrorPage error={generateNotFoundError(collectiveSlug)} log={false} />;\n      }\n    }\n\n    const expense = cloneDeep(data.expense);\n    if (expense && data.expensePayeeStats?.payee?.stats) {\n      expense.payee.stats = data.expensePayeeStats?.payee?.stats;\n    }\n    const loggedInAccount = data.loggedInAccount;\n    const collective = expense?.account;\n    const host = collective?.host;\n    const canSeeInvoiceInfo = expense?.permissions.canSeeInvoiceInfo;\n    const isInvoiceOrSettlement = [expenseTypes.INVOICE, expenseTypes.SETTLEMENT].includes(expense?.type);\n    const isDraft = expense?.status === expenseStatus.DRAFT;\n    const hasAttachedFiles = (isInvoiceOrSettlement && canSeeInvoiceInfo) || expense?.attachedFiles?.length > 0;\n    const showTaxFormMsg = includes(expense?.requiredLegalDocuments, 'US_TAX_FORM');\n    const isMissingReceipt =\n      expense?.status === expenseStatus.PAID &&\n      expense?.type === expenseTypes.CHARGE &&\n      expense?.permissions?.canEdit &&\n      expense?.items?.every(item => !item.url);\n    const isRecurring = expense?.recurringExpense;\n    const skipSummary = isMissingReceipt && status === PAGE_STATUS.EDIT;\n\n    const payoutProfiles = getPayoutProfiles(loggedInAccount);\n\n    let threadItems;\n\n    if (expense) {\n      threadItems = this.getThreadItems(expense.comments?.nodes, expense.activities);\n    }\n\n    return (\n      <Page\n        collective={collective}\n        canonicalURL={`${getCollectivePageCanonicalURL(collective)}/expense`}\n        {...this.getPageMetaData(expense)}\n      >\n        <CollectiveNavbar\n          collective={collective}\n          isLoading={!collective}\n          selectedCategory={NAVBAR_CATEGORIES.BUDGET}\n          callsToAction={{ hasSubmitExpense: status === PAGE_STATUS.VIEW }}\n        />\n        <Flex flexDirection={['column', 'row']} px={[2, 3, 4]} py={[0, 5]} mt={3} data-cy=\"expense-page-content\">\n          <Box width={SIDE_MARGIN_WIDTH}></Box>\n          <Box\n            flex=\"1 1 650px\"\n            minWidth={300}\n            maxWidth={[null, null, null, 792]}\n            mr={[null, 2, 3, 4]}\n            px={2}\n            ref={this.expenseTopRef}\n          >\n            <SummaryHeader fontSize=\"24px\" lineHeight=\"32px\" mb={24} py={2}>\n              <FormattedMessage\n                id=\"ExpenseSummaryTitle\"\n                defaultMessage=\"{type, select, CHARGE {Charge} INVOICE {Invoice} RECEIPT {Receipt} GRANT {Grant} SETTLEMENT {Settlement} other {Expense}} Summary to <LinkCollective>{collectiveName}</LinkCollective>\"\n                values={{\n                  type: (editedExpense || expense)?.type,\n                  collectiveName: collective?.name,\n                  LinkCollective: text => <LinkCollective collective={collective}>{text}</LinkCollective>,\n                }}\n              />\n            </SummaryHeader>\n            {error && (\n              <MessageBox type=\"error\" withIcon mb={4}>\n                {formatErrorMessage(intl, error)}\n              </MessageBox>\n            )}\n            {showTaxFormMsg && (\n              <MessageBox type=\"warning\" withIcon={true} mb={4}>\n                <FormattedMessage\n                  id=\"expenseNeedsTaxFormMessage.msg\"\n                  defaultMessage=\"We need your tax information before we can pay you. You will receive an email with a link to fill out a form. If you have not received the email within 24 hours, check your spam, then contact <I18nSupportLink>support</I18nSupportLink>. Questions? See <Link>help docs about taxes</Link>.\"\n                  values={{\n                    I18nSupportLink,\n                    Link: getI18nLink({\n                      href: 'https://docs.opencollective.com/help/expenses-and-getting-paid/tax-information',\n                      openInNewTab: true,\n                    }),\n                  }}\n                />\n              </MessageBox>\n            )}\n            {status === PAGE_STATUS.VIEW &&\n              ((expense?.status === expenseStatus.UNVERIFIED && this.state.createdUser) ||\n                (isDraft && !isRecurring)) && (\n                <ExpenseInviteNotificationBanner expense={expense} createdUser={this.state.createdUser} />\n              )}\n            {isMissingReceipt && (\n              <ExpenseMissingReceiptNotificationBanner onEdit={status !== PAGE_STATUS.EDIT && this.onEditBtnClick} />\n            )}\n            {status !== PAGE_STATUS.EDIT && (\n              <Box mb={3}>\n                <ExpenseSummary\n                  expense={status === PAGE_STATUS.EDIT_SUMMARY ? editedExpense : expense}\n                  host={host}\n                  isLoading={!expense}\n                  isEditing={status === PAGE_STATUS.EDIT_SUMMARY}\n                  isLoadingLoggedInUser={loadingLoggedInUser || isRefetchingDataForUser}\n                  collective={collective}\n                  onEdit={this.onEditBtnClick}\n                  onDelete={this.onDelete}\n                  suggestedTags={this.getSuggestedTags(collective)}\n                  canEditTags={get(expense, 'permissions.canEditTags', false)}\n                  showProcessButtons\n                />\n                {status !== PAGE_STATUS.EDIT_SUMMARY && (\n                  <React.Fragment>\n                    {hasAttachedFiles && (\n                      <StyledCard mt=\"32px\" p=\"32px\">\n                        <H5 fontSize=\"16px\" fontWeight=\"700\" mb={3}>\n                          <FormattedMessage id=\"Downloads\" defaultMessage=\"Downloads\" />\n                        </H5>\n                        <ExpenseAttachedFiles\n                          files={expense.attachedFiles}\n                          collective={collective}\n                          expense={expense}\n                          showInvoice={canSeeInvoiceInfo}\n                        />\n                      </StyledCard>\n                    )}\n                    {expense?.privateMessage && (\n                      <Container mt={4} pb={4} borderBottom=\"1px solid #DCDEE0\">\n                        <H5 fontSize=\"16px\" mb={3}>\n                          <FormattedMessage id=\"expense.notes\" defaultMessage=\"Notes\" />\n                        </H5>\n                        <PrivateNoteLabel mb={2} />\n                        <HTMLContent color=\"black.700\" mt={1} fontSize=\"13px\" content={expense.privateMessage} />\n                      </Container>\n                    )}\n                  </React.Fragment>\n                )}\n                {status === PAGE_STATUS.EDIT_SUMMARY && (\n                  <Box mt={24}>\n                    {isDraft && !loggedInAccount && (\n                      <Fragment>\n                        <MessageBox type=\"info\" fontSize=\"12px\">\n                          <FormattedMessage\n                            id=\"Expense.SignUpInfoBox\"\n                            defaultMessage=\"You need to create an account to receive a payment from {collectiveName}, by clicking 'Join and Submit' you agree to create an account on Open Collective.\"\n                            values={{ collectiveName: collective.name }}\n                          />\n                        </MessageBox>\n                        <Box mt={3}>\n                          <StyledCheckbox\n                            name=\"tos\"\n                            label={\n                              <FormattedMessage\n                                id=\"TOSAndPrivacyPolicyAgreement\"\n                                defaultMessage=\"I agree with the {toslink} and {privacylink} of Open Collective.\"\n                                values={{\n                                  toslink: (\n                                    <StyledLink href=\"/tos\" openInNewTab>\n                                      <FormattedMessage id=\"tos\" defaultMessage=\"terms of service\" />\n                                    </StyledLink>\n                                  ),\n                                  privacylink: (\n                                    <StyledLink href=\"/privacypolicy\" openInNewTab>\n                                      <FormattedMessage id=\"privacypolicy\" defaultMessage=\"privacy policy\" />\n                                    </StyledLink>\n                                  ),\n                                }}\n                              />\n                            }\n                            required\n                            onChange={({ checked }) => {\n                              this.setState({ tos: checked });\n                            }}\n                          />\n                        </Box>\n                        <Box mt={3}>\n                          <StyledCheckbox\n                            name=\"newsletterOptIn\"\n                            label={\n                              <span>\n                                <FormattedMessage defaultMessage=\"Subscribe to our monthly newsletter\" />.\n                              </span>\n                            }\n                            required\n                            onChange={({ checked }) => {\n                              this.setState({ newsletterOptIn: checked });\n                            }}\n                          />\n                        </Box>\n                      </Fragment>\n                    )}\n                    {!isDraft && (\n                      <ExpenseNotesForm onChange={this.onNotesChanges} defaultValue={expense.privateMessage} />\n                    )}\n                    {isRecurring && <ExpenseRecurringBanner expense={expense} />}\n                    <Flex flexWrap=\"wrap\" mt={4}>\n                      <StyledButton\n                        mt={2}\n                        minWidth={175}\n                        width={['100%', 'auto']}\n                        mx={[2, 0]}\n                        mr={[null, 3]}\n                        whiteSpace=\"nowrap\"\n                        data-cy=\"edit-expense-btn\"\n                        onClick={() => this.setState({ status: PAGE_STATUS.EDIT })}\n                        disabled={this.state.isSubmitting}\n                      >\n                        ← <FormattedMessage id=\"Expense.edit\" defaultMessage=\"Edit expense\" />\n                      </StyledButton>\n                      <StyledButton\n                        buttonStyle=\"primary\"\n                        mt={2}\n                        minWidth={175}\n                        width={['100%', 'auto']}\n                        mx={[2, 0]}\n                        mr={[null, 3]}\n                        whiteSpace=\"nowrap\"\n                        data-cy=\"save-expense-btn\"\n                        onClick={this.onSummarySubmit}\n                        loading={this.state.isSubmitting}\n                        disabled={isDraft ? !loggedInAccount && !this.state.tos : false}\n                      >\n                        {isDraft && !loggedInAccount ? (\n                          <FormattedMessage id=\"Expense.JoinAndSubmit\" defaultMessage=\"Join and Submit\" />\n                        ) : (\n                          <FormattedMessage id=\"SaveChanges\" defaultMessage=\"Save changes\" />\n                        )}\n                      </StyledButton>\n                    </Flex>\n                  </Box>\n                )}\n              </Box>\n            )}\n            {status === PAGE_STATUS.EDIT && (\n              <Box mb={3}>\n                {data.loading || loadingLoggedInUser ? (\n                  <LoadingPlaceholder width=\"100%\" height={400} />\n                ) : (\n                  <ExpenseForm\n                    collective={collective}\n                    loading={data.loading || loadingLoggedInUser || isRefetchingDataForUser}\n                    expense={editedExpense || expense}\n                    originalExpense={expense}\n                    expensesTags={this.getSuggestedTags(collective)}\n                    payoutProfiles={payoutProfiles}\n                    loggedInAccount={loggedInAccount}\n                    onCancel={() => this.setState({ status: PAGE_STATUS.VIEW, editedExpense: null })}\n                    onSubmit={editedExpense => {\n                      if (skipSummary) {\n                        this.setState({\n                          editedExpense,\n                        });\n                        return this.onSummarySubmit();\n                      } else {\n                        this.setState({\n                          editedExpense,\n                          status: PAGE_STATUS.EDIT_SUMMARY,\n                        });\n                      }\n                    }}\n                    validateOnChange\n                    disableSubmitIfUntouched\n                  />\n                )}\n              </Box>\n            )}\n            <Box my={4}>\n              <PrivateCommentsMessage\n                isAllowed={expense?.permissions.canComment}\n                isLoading={loadingLoggedInUser || isRefetchingDataForUser}\n              />\n            </Box>\n            {expense && (\n              <Box mb={3} pt={3}>\n                <Thread\n                  collective={collective}\n                  hasMore={expense.comments?.totalCount > threadItems.length}\n                  items={threadItems}\n                  fetchMore={this.fetchMore}\n                  onCommentDeleted={this.onCommentDeleted}\n                />\n              </Box>\n            )}\n            {expense?.permissions.canComment && (\n              <Flex mt=\"40px\">\n                <Box display={['none', null, 'block']} flex=\"0 0\" p={3}>\n                  <CommentIcon size={24} color=\"lightgrey\" />\n                </Box>\n                <Box flex=\"1 1\" maxWidth={[null, null, 'calc(100% - 56px)']}>\n                  <CommentForm\n                    id=\"new-comment-on-expense\"\n                    ExpenseId={expense && expense.id}\n                    disabled={!expense}\n                    onSuccess={this.onCommentAdded}\n                  />\n                </Box>\n              </Flex>\n            )}\n          </Box>\n          <Flex flex=\"1 1\" justifyContent={['center', null, 'flex-start', 'flex-end']} pt={80}>\n            <Box minWidth={270} width={['100%', null, null, 275]} px={2}>\n              <ExpenseInfoSidebar\n                isLoading={data.loading || loadingLoggedInUser || isRefetchingDataForUser}\n                collective={collective}\n                host={host}\n              />\n            </Box>\n          </Flex>\n          <Box width={SIDE_MARGIN_WIDTH} />\n        </Flex>\n        <MobileCollectiveInfoStickyBar\n          isLoading={data.loading || loadingLoggedInUser || isRefetchingDataForUser}\n          collective={collective}\n          host={host}\n        />\n      </Page>\n    );\n  }\n}\n\nconst addExpensePageData = graphql(expensePageQuery, {\n  options(props) {\n    return {\n      variables: getVariableFromProps(props),\n      context: API_V2_CONTEXT,\n    };\n  },\n});\n\nconst addEditExpenseMutation = graphql(editExpenseMutation, {\n  name: 'editExpense',\n  options: { context: API_V2_CONTEXT },\n});\n\nconst addVerifyExpenseMutation = graphql(verifyExpenseMutation, {\n  name: 'verifyExpense',\n  options: { context: API_V2_CONTEXT },\n});\n\nexport default injectIntl(\n  withToasts(\n    addVerifyExpenseMutation(addExpensePageData(withApollo(withUser(withRouter(addEditExpenseMutation(ExpensePage)))))),\n  ),\n);\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/expense\",\n      function () {\n        return require(\"private-next-pages/expense.js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/expense\"])\n      });\n    }\n  "],"names":["React","gql","useMutation","FormattedMessage","styled","checkUserExistence","signin","API_V2_CONTEXT","useAsyncCall","getWebsiteUrl","Box","Flex","StyledButton","StyledCard","StyledLink","H4","P","pidgeon","resendDraftExpenseInviteMutation","PidgeonIllustration","img","attrs","src","ResendDraftInviteButton","expense","context","resendDraftInvite","loading","error","data","success","resendDraftExpenseInvite","id","variables","ResendSignInEmailButton","createdUser","email","userExists","redirect","window","location","pathname","search","user","websiteUrl","Error","call","ExpenseInviteNotificationBanner","props","draft","payee","name","MessageBox","ExpenseMissingReceiptNotificationBanner","onEdit","LoadingPlaceholder","privateLockIconUrl","PrivateLockIcon","PrivateCommentsMessage","isAllowed","isLoading","Fragment","graphql","withApollo","dayjs","memoizeOne","withRouter","defineMessages","injectIntl","getCollectivePageMetadata","getCollectiveTypeForUrl","getSuggestedTags","expenseStatus","expenseTypes","formatErrorMessage","generateNotFoundError","getErrorFromGraphqlException","getPayoutProfiles","addParentToURLIfMissing","getCollectivePageCanonicalURL","CollectiveNavbar","NAVBAR_CATEGORIES","Container","CommentForm","commentFieldsFragment","Thread","ErrorPage","ExpenseAttachedFiles","ExpenseForm","prepareExpenseForSubmit","ExpenseInfoSidebar","ExpenseNotesForm","ExpenseRecurringBanner","ExpenseSummary","SummaryHeader","expensePageExpenseFieldsFragment","loggedInAccountExpensePayoutFieldsFragment","MobileCollectiveInfoStickyBar","HTMLContent","getI18nLink","I18nSupportLink","CommentIcon","PrivateInfoIcon","LinkCollective","Page","StyledCheckbox","H5","Span","TOAST_TYPE","withToasts","withUser","getVariableFromProps","firstOfCurrentYear","Date","getFullYear","utc","toISOString","legacyExpenseId","draftKey","totalPaidExpensesDateFrom","messages","title","defaultMessage","expensePageQuery","editExpenseMutation","verifyExpenseMutation","PrivateNoteLabel","PAGE_STATUS","VIEW","EDIT","EDIT_SUMMARY","SIDE_MARGIN_WIDTH","ExpensePage","setState","isSubmitting","editedExpense","state","newsletterOptIn","editExpense","status","DRAFT","type","CHARGE","refetch","undefined","scrollToExpenseTop","e","target","value","comment","clonePageQueryCacheData","query","comments","totalCount","client","writeQuery","filter","c","fetchMore","offset","length","updateQuery","prev","fetchMoreResult","newValues","nodes","Object","assign","activities","collective","account","parentCollectiveSlugRoute","parent","slug","collectiveType","collectiveTypeRoute","router","replace","expenseTopRef","createRef","hasRefetchedDataForUser","Boolean","LoggedInUser","isPoolingEnabled","tos","pollingInterval","pollingTimeout","pollingStarted","pollingPaused","handlePolling","bind","shouldEditDraft","UNVERIFIED","permissions","canEdit","createdByAccount","handleExpenseVerification","document","addEventListener","oldProps","oldState","refetchDataForUser","isMissingReceipt","PAID","items","every","item","url","edit","onEditBtnClick","stopPolling","removeEventListener","startPolling","clearTimeout","setTimeout","verifyExpense","parentCollectiveSlug","collectiveSlug","push","addToast","SUCCESS","message","scrollTo","current","scrollIntoView","behavior","intl","baseMetadata","description","formatMessage","readQuery","loadingLoggedInUser","isRefetchingDataForUser","expensePayeeStats","stats","loggedInAccount","host","canSeeInvoiceInfo","isInvoiceOrSettlement","INVOICE","SETTLEMENT","includes","isDraft","hasAttachedFiles","attachedFiles","showTaxFormMsg","requiredLegalDocuments","isRecurring","recurringExpense","skipSummary","payoutProfiles","threadItems","getThreadItems","getPageMetaData","BUDGET","hasSubmitExpense","collectiveName","text","Link","href","openInNewTab","onDelete","privateMessage","toslink","privacylink","checked","onNotesChanges","onSummarySubmit","canComment","onCommentDeleted","onCommentAdded","ExpenseId","key","parseInt","Component","addExpensePageData","options","addEditExpenseMutation","addVerifyExpenseMutation"],"sourceRoot":""}