{"version":3,"file":"static/chunks/pages/confirmOrder-f954ff9d0df0e713.js","mappings":";;;;;;;;;;;;;AAAsD;AACvB;AAC4B;AACpD,2BAA2B,6CAAgB;AAClD;AACA;AACA;AACA;AACA,sBAAsB,gDAAmB,CAAC,qEAAc,EAAE,mFAAQ;AAClE;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG,gBAAgB,gDAAmB;AACtC;AACA,GAAG;AACH,CAAC;AACD;AACO;AACP;AACA;AACA;;;;;;;;;;;;;;;ACtBsD;AACvB;AAC4B;AACpD,wBAAwB,6CAAgB;AAC/C;AACA;AACA;AACA;AACA,sBAAsB,gDAAmB,CAAC,qEAAc,EAAE,mFAAQ;AAClE;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG,gBAAgB,gDAAmB;AACtC;AACA;AACA,GAAG;AACH,CAAC;AACD;AACO;AACP;AACA;AACA;;;;;;;ACvBA,eAAe,mBAAO,CAAC,KAAa;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC9BA,iBAAiB,mBAAO,CAAC,KAAe;AACxC,WAAW,mBAAO,CAAC,IAAQ;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","sources":["webpack://_N_E/./node_modules/@styled-icons/boxicons-regular/Support/Support.esm.js","webpack://_N_E/./node_modules/@styled-icons/fa-solid/Redo/Redo.esm.js","webpack://_N_E/./node_modules/lodash/_baseValues.js","webpack://_N_E/./node_modules/lodash/compact.js","webpack://_N_E/./node_modules/lodash/values.js","webpack://_N_E/./components/AuthenticatedPage.js","webpack://_N_E/./pages/confirmOrder.js","webpack://_N_E/?e849"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Support = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12v4.143C2 17.167 2.897 18 4 18h1a1 1 0 0 0 1-1v-5.143a1 1 0 0 0-1-1h-.908C4.648 6.987 7.978 4 12 4s7.352 2.987 7.908 6.857H19a1 1 0 0 0-1 1V18c0 1.103-.897 2-2 2h-2v-1h-4v3h6c2.206 0 4-1.794 4-4 1.103 0 2-.833 2-1.857V12c0-5.514-4.486-10-10-10z\"\n  }));\n});\nSupport.displayName = 'Support';\nexport var SupportDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Redo = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 512 512\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32h128c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2l-17.6-17.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8 229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3 163.8-62.5 226.3 0l17.2 17.2z\"\n  }));\n});\nRedo.displayName = 'Redo';\nexport var RedoDimensions = {\n  height: 512,\n  width: 512\n};","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Container from './Container';\nimport { Flex } from './Grid';\nimport Loading from './Loading';\nimport MessageBox from './MessageBox';\nimport Page from './Page';\nimport SignInOrJoinFree from './SignInOrJoinFree';\nimport { withUser } from './UserProvider';\n\n/**\n * A wrapper around `Page` that will display a spinner while user is loading.\n * If authentication fails, users will be prompted with a form to login that will\n * redirect them to the correct page once they do.\n *\n * Unless a `noRobots={true}` is provided, pages wrapped with this helper will not be indexed\n * by default.\n *\n * ## Usage\n *\n * ```jsx\n * <AuthenticatedPage>\n *   {(LoggedInUser) => (\n *     <div>\n *       Hello {LoggedInUser.collective.name}!\n *     </div>\n *   )}\n * </AuthenticatedPage>\n * ```\n */\nclass AuthenticatedPage extends React.Component {\n  static propTypes = {\n    /** A child renderer to call when user is properly authenticated */\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n    /** Whether user can signup on this page */\n    disableSignup: PropTypes.bool,\n    /** Whether this page is limited to root users */\n    rootOnly: PropTypes.bool,\n    /** @ignore from withUser */\n    loadingLoggedInUser: PropTypes.bool,\n    /** @ignore from withUser */\n    LoggedInUser: PropTypes.object,\n  };\n\n  renderContent(loadingLoggedInUser, LoggedInUser) {\n    if (!LoggedInUser) {\n      return (\n        <Container display=\"flex\" justifyContent=\"center\" py={[5, null, 6]} px={2}>\n          {loadingLoggedInUser ? (\n            <Loading />\n          ) : (\n            <Flex flexDirection=\"column\" alignItems=\"center\">\n              <MessageBox type=\"warning\" mb={4} maxWidth={400} withIcon>\n                <FormattedMessage\n                  id=\"authorization.loginRequired\"\n                  defaultMessage=\"You need to be logged in to continue.\"\n                />\n              </MessageBox>\n              <SignInOrJoinFree defaultForm=\"signin\" disableSignup={this.props.disableSignup} />\n            </Flex>\n          )}\n        </Container>\n      );\n    } else if (this.props.rootOnly && !LoggedInUser.isRoot) {\n      return (\n        <Flex flexDirection=\"column\" alignItems=\"center\">\n          <MessageBox type=\"warning\" my={[5, 6, 7]} maxWidth={400} withIcon>\n            <FormattedMessage\n              id=\"AuthenticatedPage.RootOnly\"\n              defaultMessage=\"This page is limited to site administrators\"\n            />\n          </MessageBox>\n        </Flex>\n      );\n    } else if (typeof this.props.children === 'function') {\n      return this.props.children(LoggedInUser);\n    } else {\n      return this.props.children;\n    }\n  }\n\n  render() {\n    const { LoggedInUser, loadingLoggedInUser, ...pageProps } = this.props;\n\n    return (\n      <Page noRobots {...pageProps}>\n        {this.renderContent(loadingLoggedInUser, LoggedInUser)}\n      </Page>\n    );\n  }\n}\n\nexport default withUser(AuthenticatedPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gql } from '@apollo/client';\nimport { graphql } from '@apollo/client/react/hoc';\nimport { get } from 'lodash';\nimport { withRouter } from 'next/router';\nimport { FormattedMessage } from 'react-intl';\n\nimport { API_V2_CONTEXT } from '../lib/graphql/helpers';\nimport { getStripe } from '../lib/stripe';\n\nimport AuthenticatedPage from '../components/AuthenticatedPage';\nimport Container from '../components/Container';\nimport MessageBox from '../components/MessageBox';\nimport { withUser } from '../components/UserProvider';\n\nclass ConfirmOrderPage extends React.Component {\n  static getInitialProps({ query }) {\n    return { id: parseInt(query.id) };\n  }\n\n  static propTypes = {\n    /** OrderId */\n    id: PropTypes.number.isRequired,\n    /** @ignore from graphql */\n    confirmOrder: PropTypes.func.isRequired,\n    /** @ignore from withUser */\n    loadingLoggedInUser: PropTypes.bool.isRequired,\n    /** @ignore from withUser */\n    LoggedInUser: PropTypes.object,\n    /** @ignore from withRouter */\n    router: PropTypes.object,\n  };\n\n  state = {\n    status: ConfirmOrderPage.SUBMITTING,\n    isRequestSent: false,\n    error: null,\n  };\n\n  componentDidMount() {\n    if (!this.props.loadingLoggedInUser && this.props.LoggedInUser) {\n      return this.triggerRequest();\n    }\n  }\n\n  componentDidUpdate() {\n    if (!this.state.isRequestSent && !this.props.loadingLoggedInUser && this.props.LoggedInUser) {\n      return this.triggerRequest();\n    }\n  }\n\n  static SUBMITTING = 1;\n  static ERROR = 3;\n\n  async triggerRequest() {\n    try {\n      this.setState({ isRequestSent: true });\n      const res = await this.props.confirmOrder({ variables: { order: { legacyId: this.props.id } } });\n      const orderConfirmed = res.data.confirmOrder;\n      if (orderConfirmed.stripeError) {\n        this.handleStripeError(orderConfirmed);\n      } else {\n        this.props.router.replace(\n          `/${orderConfirmed.order.fromAccount.slug}/admin/payment-methods?successType=payment`,\n        );\n      }\n    } catch (e) {\n      const error = get(e, 'graphQLErrors.0') || e;\n      this.setState({ status: ConfirmOrderPage.ERROR, error: error.message });\n    }\n  }\n\n  handleStripeError = async ({ id, stripeError: { message, account, response } }) => {\n    if (!response) {\n      this.setState({ status: ConfirmOrderPage.ERROR, error: message });\n      return;\n    }\n    if (response.paymentIntent) {\n      const stripe = await getStripe(null, account);\n      const result = await stripe.handleCardAction(response.paymentIntent.client_secret);\n      if (result.error) {\n        this.setState({ status: ConfirmOrderPage.ERROR, error: result.error.message });\n      }\n      if (result.paymentIntent && result.paymentIntent.status === 'requires_confirmation') {\n        this.triggerRequest({ id });\n      }\n    }\n  };\n\n  render() {\n    const { status, error } = this.state;\n\n    return (\n      <AuthenticatedPage title=\"Order confirmation\">\n        <Container\n          display=\"flex\"\n          py={[5, 6]}\n          px={2}\n          flexDirection=\"column\"\n          alignItems=\"center\"\n          background=\"linear-gradient(180deg, #EBF4FF, #FFFFFF)\"\n        >\n          {status === ConfirmOrderPage.SUBMITTING && (\n            <MessageBox type=\"info\" isLoading>\n              <FormattedMessage id=\"Order.Confirm.Processing\" defaultMessage=\"Confirming your payment method…\" />\n            </MessageBox>\n          )}\n          {status === ConfirmOrderPage.ERROR && (\n            <MessageBox type=\"error\" withIcon>\n              {error}\n            </MessageBox>\n          )}\n        </Container>\n      </AuthenticatedPage>\n    );\n  }\n}\n\nexport const confirmOrderMutation = gql`\n  mutation ConfirmOrder($order: OrderReferenceInput!) {\n    confirmOrder(order: $order) {\n      order {\n        id\n        status\n        transactions {\n          id\n        }\n        fromAccount {\n          id\n          slug\n        }\n      }\n      stripeError {\n        message\n        account\n        response\n      }\n    }\n  }\n`;\n\nconst addConfirmOrderMutation = graphql(confirmOrderMutation, {\n  name: 'confirmOrder',\n  options: { context: API_V2_CONTEXT },\n});\n\nexport default withUser(addConfirmOrderMutation(withRouter(ConfirmOrderPage)));\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/confirmOrder\",\n      function () {\n        return require(\"private-next-pages/confirmOrder.js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/confirmOrder\"])\n      });\n    }\n  "],"names":["React","FormattedMessage","Container","Flex","Loading","MessageBox","Page","SignInOrJoinFree","withUser","AuthenticatedPage","loadingLoggedInUser","LoggedInUser","props","disableSignup","rootOnly","isRoot","children","pageProps","renderContent","Component","gql","graphql","withRouter","API_V2_CONTEXT","getStripe","ConfirmOrderPage","status","SUBMITTING","isRequestSent","error","id","stripeError","message","account","response","setState","ERROR","paymentIntent","stripe","handleCardAction","client_secret","result","triggerRequest","state","confirmOrder","variables","order","legacyId","res","orderConfirmed","data","handleStripeError","router","replace","fromAccount","slug","query","parseInt","confirmOrderMutation","addConfirmOrderMutation","name","options","context"],"sourceRoot":""}