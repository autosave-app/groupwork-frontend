(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([[653,9139,7897,4674],{

/***/ 68654:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(44012);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(74806);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(52015);
/* harmony import */ var styled_system__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16678);
/* harmony import */ var _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82525);
/* harmony import */ var _lib_image_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89314);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97079);
/* harmony import */ var _Avatar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(11194);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(69078);
/* harmony import */ var _Currency__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(93129);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(92129);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(85893);








function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }














var CardWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__CardWrapper",
  componentId: "sc-1fihsat-0"
})(["display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;vertical-align:top;position:relative;box-sizing:border-box;width:215px;min-height:380px;border-radius:15px;background-color:#ffffff;box-shadow:0 1px 3px 0 rgba(45,77,97,0.2);overflow:hidden;text-decoration:none !important;", ""], styled_system__WEBPACK_IMPORTED_MODULE_8__/* .width */ .bf);
var NameWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__NameWrapper",
  componentId: "sc-1fihsat-1"
})(["min-height:20px;font-size:14px;margin:5px;font-weight:700;text-align:center;color:#303233;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);
var MembershipWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__MembershipWrapper",
  componentId: "sc-1fihsat-2"
})(["border-top:1px solid #f2f2f2;padding:1rem;color:#303233;"]);
var StatsWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(MembershipWrapper).withConfig({
  displayName: "CollectiveCard__StatsWrapper",
  componentId: "sc-1fihsat-3"
})(["display:flex;width:100%;box-sizing:border-box;justify-content:space-around;"]);
var ValueWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__ValueWrapper",
  componentId: "sc-1fihsat-4"
})(["font-weight:normal;text-align:center;color:#303233;font-size:1.4rem;margin:3px 2px 0px;text-align:center;margin:auto;"]);
var LabelWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z).withConfig({
  displayName: "CollectiveCard__LabelWrapper",
  componentId: "sc-1fihsat-5"
})(["font-size:9px;text-align:center;font-weight:300;color:#a8afb3;text-transform:uppercase;text-align:center;margin:auto;"]);
var CommaList = styled_components__WEBPACK_IMPORTED_MODULE_17__/* ["default"].ul.withConfig */ .ZP.ul.withConfig({
  displayName: "CollectiveCard__CommaList",
  componentId: "sc-1fihsat-6"
})(["display:inline;list-style:none;padding:0px;li{display:inline;}li::after{content:', ';}li:last-child::after{content:'';}"]);

var CollectiveCard = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3___default()(CollectiveCard, _React$Component);

  var _super = _createSuper(CollectiveCard);

  function CollectiveCard(props) {
    var _this;

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1___default()(this, CollectiveCard);

    _this = _super.call(this, props);
    _this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_18__.defineMessages)({
      'membership.role.host': {
        id: "Member.Role.HOST",
        defaultMessage: [{
          "type": 0,
          "value": "Host"
        }]
      },
      'roles.admin.label': {
        id: "Member.Role.ADMIN",
        defaultMessage: [{
          "type": 0,
          "value": "Admin"
        }]
      },
      'roles.member.label': {
        id: "Member.Role.MEMBER",
        defaultMessage: [{
          "type": 0,
          "value": "Core Contributor"
        }]
      },
      'tier.name.sponsor': {
        id: "tier.name.sponsor",
        defaultMessage: [{
          "type": 0,
          "value": "sponsor"
        }]
      },
      'tier.name.backer': {
        id: "tier.name.backer",
        defaultMessage: [{
          "type": 0,
          "value": "backer"
        }]
      }
    });
    return _this;
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2___default()(CollectiveCard, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          intl = _this$props.intl,
          collective = _this$props.collective,
          membership = _this$props.membership;
      var memberships = this.props.memberships;
      memberships = memberships || (membership ? [membership] : []);

      var getTierName = function getTierName(membership) {
        var tierName = lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(membership, 'tier.name');

        var role = lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(membership, 'role');

        if (!tierName) {
          switch (role) {
            case 'HOST':
              return intl.formatMessage(_this2.messages['membership.role.host']);

            case 'ADMIN':
              return intl.formatMessage(_this2.messages['roles.admin.label']);

            case 'MEMBER':
              return intl.formatMessage(_this2.messages['roles.member.label']);

            default:
              if (collective.type === 'ORGANIZATION') {
                return intl.formatMessage(_this2.messages['tier.name.sponsor']);
              } else {
                return intl.formatMessage(_this2.messages['tier.name.backer']);
              }

          }
        }

        return tierName;
      };

      var membershipDates = memberships.map(function (m) {
        return m.createdAt;
      });
      membershipDates.sort(function (a, b) {
        return b - a;
      });
      var oldestMembershipDate = membershipDates.length ? membershipDates[0] : null;
      var roles = new Set(memberships.map(function (m) {
        return getTierName(m);
      }));
      var coverStyle = {};
      var backgroundImage = (0,_lib_image_utils__WEBPACK_IMPORTED_MODULE_10__/* .imagePreview */ .Z_)(collective.backgroundImage || lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(collective, 'parentCollective.backgroundImage'), _lib_constants_collectives__WEBPACK_IMPORTED_MODULE_9__/* .defaultBackgroundImage.COLLECTIVE */ .am.COLLECTIVE, {
        width: 400
      });

      if (!coverStyle.backgroundImage && backgroundImage) {
        coverStyle.backgroundImage = "url('".concat(backgroundImage, "')");
        coverStyle.backgroundSize = 'cover';
        coverStyle.backgroundPosition = 'center center';
      }

      var truncatedDescription = collective.description && (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .firstSentence */ .u5)(collective.description, 80);
      var description = collective.description;
      var route;

      if (collective.type === 'EVENT') {
        var _collective$parentCol;

        route = "/".concat(((_collective$parentCol = collective.parentCollective) === null || _collective$parentCol === void 0 ? void 0 : _collective$parentCol.slug) || 'collective', "/events/").concat(collective.slug);
      } else {
        route = "/".concat(collective.slug);
      }

      var backersCount = lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(collective, 'backers.totalCount');

      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Link__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        href: route,
        target: "_top",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(CardWrapper, _objectSpread(_objectSpread({
          className: "CollectiveCard ".concat(collective.type)
        }, this.props), {}, {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            position: "relative",
            overflow: "hidden",
            width: "100%",
            height: "14rem",
            borderBottom: "5px solid #46b0ed",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              position: "absolute",
              top: "0",
              left: "0",
              width: "100%",
              height: "100%",
              backgroundSize: "cover",
              backgroundPosition: "center",
              style: coverStyle
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              display: "flex",
              height: "100%",
              alignItems: "center",
              justifyContent: "center",
              position: "absolute",
              left: "0",
              right: "0",
              top: "0",
              bottom: "0",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Avatar__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .ZP, {
                collective: collective,
                radius: 65
              })
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            padding: "1rem",
            minHeight: "11rem",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(NameWrapper, {
              children: collective.name
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
              fontWeight: "normal",
              textAlign: "center",
              color: "#787d80",
              fontSize: "1.2rem",
              lineHeight: "1.3",
              margin: "0 5px",
              minHeight: "50px",
              title: description,
              children: truncatedDescription
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
            fontSize: "1.1rem",
            width: "100%",
            minHeight: "6rem",
            textAlign: "center",
            children: [collective.type === 'COLLECTIVE' && backersCount > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(StatsWrapper, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "backers",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: backersCount
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "collective.card.stats.backers",
                    defaultMessage: [{
                      "type": 6,
                      "value": "n",
                      "options": {
                        "one": {
                          "value": [{
                            "type": 0,
                            "value": "backer"
                          }]
                        },
                        "other": {
                          "value": [{
                            "type": 0,
                            "value": "backers"
                          }]
                        }
                      },
                      "offset": 0,
                      "pluralType": "cardinal"
                    }],
                    values: {
                      n: backersCount
                    }
                  })
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "yearlyBudget",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Currency__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
                    value: collective.stats.yearlyBudget.valueInCents,
                    currency: collective.stats.yearlyBudget.currency
                  })
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "collective.card.stats.yearlyBudget",
                    defaultMessage: [{
                      "type": 0,
                      "value": "yearly budget"
                    }]
                  })
                })]
              })]
            }), collective.memberOf && collective.memberOf.totalCount > 0 && collective.type === 'ORGANIZATION' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(StatsWrapper, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "backers",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: collective.memberOf.totalCount
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "collective.card.memberOf.count",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Contributor to "
                    }, {
                      "type": 6,
                      "value": "n",
                      "options": {
                        "one": {
                          "value": [{
                            "type": 0,
                            "value": "Collective"
                          }]
                        },
                        "other": {
                          "value": [{
                            "type": 0,
                            "value": "Collectives"
                          }]
                        }
                      },
                      "offset": 0,
                      "pluralType": "cardinal"
                    }],
                    values: {
                      n: collective.memberOf.totalCount
                    }
                  })
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "yearlyBudget",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Currency__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
                    value: collective.stats.totalAmountSpent.valueInCents,
                    currency: collective.stats.totalAmountSpent.currency
                  })
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "AmountContributed",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Contributed"
                    }]
                  })
                })]
              })]
            }), collective.stats && collective.stats.collectives && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(StatsWrapper, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "backers",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(collective, 'stats.collectives.hosted')
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "collective.card.collectives.count",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Hosted "
                    }, {
                      "type": 6,
                      "value": "n",
                      "options": {
                        "one": {
                          "value": [{
                            "type": 0,
                            "value": "Collective"
                          }]
                        },
                        "other": {
                          "value": [{
                            "type": 0,
                            "value": "Collectives"
                          }]
                        }
                      },
                      "offset": 0,
                      "pluralType": "cardinal"
                    }],
                    values: {
                      n: lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(collective, 'stats.collectives.hosted')
                    }
                  })
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
                className: "currency",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ValueWrapper, {
                  children: collective.currency
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(LabelWrapper, {
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                    id: "currency",
                    defaultMessage: [{
                      "type": 0,
                      "value": "currency"
                    }]
                  })
                })]
              })]
            }), roles && roles.size > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(MembershipWrapper, {
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                minHeight: "13px",
                fontWeight: "700",
                letterSpacing: "3px",
                color: "#75cc1f",
                textTransform: "uppercase",
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(CommaList, {
                  children: Array.from(roles).map(function (role) {
                    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("li", {
                      children: role
                    }, role);
                  })
                })
              }), oldestMembershipDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                minHeight: "18px",
                fontSize: "12px",
                fontWeight: "500",
                lineHeight: "1.5",
                textAlign: "center",
                color: "#aab0b3",
                textTransform: "capitalize",
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                  id: "membership.since",
                  defaultMessage: [{
                    "type": 0,
                    "value": "since "
                  }, {
                    "type": 1,
                    "value": "date"
                  }],
                  values: {
                    date: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_18__.FormattedDate, {
                      value: oldestMembershipDate,
                      month: "long",
                      year: "numeric"
                    })
                  }
                })
              })]
            }), memberships.map(function (membership) {
              return membership.role === 'BACKER' && lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(membership, 'stats.totalDonations') > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(MembershipWrapper, {
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
                  fontSize: "2rem",
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Currency__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
                    value: lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(membership, 'stats.totalDonations'),
                    currency: lodash_get__WEBPACK_IMPORTED_MODULE_6___default()(membership, 'collective.currency')
                  })
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
                  id: "membership.totalDonations.title",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Amount contributed"
                  }]
                })]
              }, membership.id);
            })]
          })]
        }))
      });
    }
  }]);

  return CollectiveCard;
}(react__WEBPACK_IMPORTED_MODULE_7__.Component);

CollectiveCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveCard",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "membership": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "memberships": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = ((0,react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .ZP)(CollectiveCard));

/***/ }),

/***/ 93129:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(86896);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17632);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85893);


var _excluded = ["formatWithSeparators", "currency", "precision", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





/**
 * Shows a money amount with the currency.
 *
 * ⚠️ Abbreviated mode is only for English at the moment. Abbreviated amount will not be internationalized.
 */




var Currency = function Currency(_ref) {
  var formatWithSeparators = _ref.formatWithSeparators,
      currency = _ref.currency,
      precision = _ref.precision,
      value = _ref.value,
      styles = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default()(_ref, _excluded);

  var _useIntl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(),
      locale = _useIntl.locale;

  if (precision === 'auto') {
    precision = value % 100 === 0 ? 0 : 2;
  } else if (precision < 2 && value < 100) {
    // Force precision if number is < $1 to never display $0 for small amounts
    precision = 2;
  }

  if (formatWithSeparators) {
    // TODO: This approach is not great because the position of the currency depends on the locale
    var floatAmount = value / 100;
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_4__/* .Span */ .Dr, _objectSpread(_objectSpread({}, styles), {}, {
      whiteSpace: "nowrap",
      children: [(0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_3__/* .getCurrencySymbol */ .jK)(currency), floatAmount.toLocaleString(locale)]
    }));
  } else {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_4__/* .Span */ .Dr, _objectSpread(_objectSpread({}, styles), {}, {
      whiteSpace: "nowrap",
      children: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_3__/* .formatCurrency */ .xG)(value, currency, {
        precision: precision,
        locale: locale
      })
    }));
  }
};

Currency.defaultProps = {
  formatWithSeparators: false,
  precision: 0
};
Currency.__docgenInfo = {
  "description": "Shows a money amount with the currency.\n\n\u26A0\uFE0F Abbreviated mode is only for English at the moment. Abbreviated amount will not be internationalized.",
  "methods": [],
  "displayName": "Currency",
  "props": {
    "formatWithSeparators": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "Format the currency value to display with separators such as 100,000 instead of 100000",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "precision": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "How many numbers should we display after the comma. When `auto` is given, decimals are only displayed if necessary.",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "enum",
          "value": [{
            "value": "'auto'",
            "computed": false
          }]
        }]
      },
      "required": false
    },
    "value": {
      "description": "The amount to display, in cents",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "currency": {
      "description": "The currency (eg. `USD`, `EUR`...etc)",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "style": {
      "description": "An optional set of props passed to the `Span`",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (Currency);

/***/ }),

/***/ 12665:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67294);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85893);




var ErrorComponent = function ErrorComponent(_ref) {
  var message = _ref.message;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div", {
    className: "Error",
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_1__.H1, {
      textAlign: "center",
      padding: "8rem",
      children: message || 'unknown error'
    })
  });
};

ErrorComponent.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ErrorComponent",
  "props": {
    "message": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (ErrorComponent);

/***/ }),

/***/ 27596:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": function() { return /* binding */ DEFAULT_AMOUNT_STYLES; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14293);
/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(44012);
/* harmony import */ var _lib_constants_currency_precision__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19377);
/* harmony import */ var _lib_constants_intervals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80642);
/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15078);
/* harmony import */ var _Currency__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(93129);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85893);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }








/** Default styles for the amount (not including currency) */


var DEFAULT_AMOUNT_STYLES = {
  letterSpacing: 0,
  fontWeight: 'bold',
  color: 'black.900'
};
var EMPTY_AMOUNT_PLACEHOLDER = '--.--';
/**
 * A practical component to format amounts and their intervals with proper
 * internationalization support.
 */

var FormattedMoneyAmount = function FormattedMoneyAmount(_ref) {
  var formatWithSeparators = _ref.formatWithSeparators,
      abbreviateInterval = _ref.abbreviateInterval,
      currency = _ref.currency,
      precision = _ref.precision,
      amount = _ref.amount,
      interval = _ref.interval,
      frequency = _ref.frequency,
      amountStyles = _ref.amountStyles,
      showCurrencyCode = _ref.showCurrencyCode,
      currencyCodeStyles = _ref.currencyCodeStyles,
      isCrypto = _ref.isCrypto;

  if (!currency) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, _objectSpread(_objectSpread({}, amountStyles), {}, {
      children: EMPTY_AMOUNT_PLACEHOLDER
    }));
  }

  var formattedAmount = isNaN(amount) || lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default()(amount) ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, _objectSpread(_objectSpread({}, amountStyles), {}, {
    children: EMPTY_AMOUNT_PLACEHOLDER
  })) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Currency__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, _objectSpread({
    value: amount,
    currency: currency,
    precision: precision,
    formatWithSeparators: formatWithSeparators
  }, amountStyles));

  if (frequency) {
    interval = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_5__/* .getIntervalFromContributionFrequency */ .Pw)(frequency);
  }

  var currencyCode = showCurrencyCode ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, _objectSpread(_objectSpread({}, currencyCodeStyles), {}, {
    children: currency
  })) : '';

  if (isCrypto) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, _objectSpread(_objectSpread({}, amountStyles), {}, {
      children: "".concat(amount, " ").concat(currency)
    }));
  } else if (!interval || interval === _lib_constants_intervals__WEBPACK_IMPORTED_MODULE_4__["default"].flexible || interval === _lib_constants_intervals__WEBPACK_IMPORTED_MODULE_4__["default"].oneTime) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      id: "Amount",
      defaultMessage: [{
        "type": 1,
        "value": "amount"
      }, {
        "type": 0,
        "value": " "
      }, {
        "type": 1,
        "value": "currencyCode"
      }],
      values: {
        amount: formattedAmount,
        currencyCode: currencyCode
      }
    });
  } else if (abbreviateInterval) {
    var _interval;

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      id: "AmountInterval",
      defaultMessage: [{
        "type": 1,
        "value": "amount"
      }, {
        "type": 0,
        "value": " "
      }, {
        "type": 1,
        "value": "currencyCode"
      }, {
        "type": 0,
        "value": " / "
      }, {
        "type": 5,
        "value": "interval",
        "options": {
          "month": {
            "value": [{
              "type": 0,
              "value": "mo."
            }]
          },
          "year": {
            "value": [{
              "type": 0,
              "value": "yr."
            }]
          },
          "other": {
            "value": []
          }
        }
      }],
      values: {
        amount: formattedAmount,
        interval: (_interval = interval) !== null && _interval !== void 0 ? _interval : '',
        currencyCode: currencyCode
      }
    });
  } else {
    var _interval2;

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      id: "AmountIntervalLong",
      defaultMessage: [{
        "type": 1,
        "value": "amount"
      }, {
        "type": 0,
        "value": " "
      }, {
        "type": 1,
        "value": "currencyCode"
      }, {
        "type": 0,
        "value": " / "
      }, {
        "type": 5,
        "value": "interval",
        "options": {
          "month": {
            "value": [{
              "type": 0,
              "value": "month"
            }]
          },
          "year": {
            "value": [{
              "type": 0,
              "value": "year"
            }]
          },
          "other": {
            "value": []
          }
        }
      }],
      values: {
        amount: formattedAmount,
        interval: (_interval2 = interval) !== null && _interval2 !== void 0 ? _interval2 : '',
        currencyCode: currencyCode
      }
    });
  }
};

FormattedMoneyAmount.defaultProps = {
  abbreviate: false,
  abbreviateInterval: false,
  precision: _lib_constants_currency_precision__WEBPACK_IMPORTED_MODULE_3__/* .CurrencyPrecision.DEFAULT */ .E.DEFAULT,
  amountStyles: DEFAULT_AMOUNT_STYLES,
  showCurrencyCode: true
};
FormattedMoneyAmount.__docgenInfo = {
  "description": "A practical component to format amounts and their intervals with proper\ninternationalization support.",
  "methods": [],
  "displayName": "FormattedMoneyAmount",
  "props": {
    "abbreviate": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "required": false
    },
    "abbreviateInterval": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "Abbreviate the interval (eg. year => yr.)",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "precision": {
      "defaultValue": {
        "value": "CurrencyPrecision.DEFAULT",
        "computed": true
      },
      "description": "How many numbers should we display after the comma",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "enum",
          "value": [{
            "value": "'auto'",
            "computed": false
          }]
        }]
      },
      "required": false
    },
    "amountStyles": {
      "defaultValue": {
        "value": "{ letterSpacing: 0, fontWeight: 'bold', color: 'black.900' }",
        "computed": false
      },
      "description": "Style for the amount (eg. `$10`). Doesn't apply on interval",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "showCurrencyCode": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "Whether to show the full currency code (ie. USD)",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "amount": {
      "description": "The amount to display, in cents",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "currency": {
      "description": "The currency (eg. `USD`, `EUR`...etc)",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "interval": {
      "description": "An interval that goes with the amount",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'month'",
          "computed": false
        }, {
          "value": "'year'",
          "computed": false
        }, {
          "value": "'oneTime'",
          "computed": false
        }]
      },
      "required": false
    },
    "frequency": {
      "description": "ContributionFrequency from GQLV2",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'MONTHLY'",
          "computed": false
        }, {
          "value": "'YEARLY'",
          "computed": false
        }, {
          "value": "'ONETIME'",
          "computed": false
        }]
      },
      "required": false
    },
    "currencyCodeStyles": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "formatWithSeparators": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isCrypto": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (FormattedMoneyAmount);

/***/ }),

/***/ 75593:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92191);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(39138);
/* harmony import */ var lodash_truncate__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_truncate__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89734);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(84753);
/* harmony import */ var lodash_maxBy__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_maxBy__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(23279);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(44012);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(74806);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(52015);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(57632);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(17632);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(69078);
/* harmony import */ var _StyledKeyframes__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(29925);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(85893);














function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_7___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var getProgressColor = function getProgressColor(theme) {
  return theme.colors.primary[600];
};

var getEmptyProgressColor = function getEmptyProgressColor() {
  return '#e2e2e2';
};

var MAX_TITLE_LENGTH = 32;
var GoalContainer = styled_components__WEBPACK_IMPORTED_MODULE_18__/* ["default"].div.withConfig */ .ZP.div.withConfig({
  displayName: "GoalsCover__GoalContainer",
  componentId: "sc-1y3145p-0"
})(["position:absolute;top:0;left:0;text-align:right;transition:width 3s;height:25px;color:", ";border-right:1px solid ", ";width:", ";z-index:", ";transition:", ";.caption{display:inline-block;padding:1rem 0.5rem 1rem 0.5rem;font-size:13px;line-height:15px;}.label{background:rgb(245,247,250);padding:0;line-height:1.5;font-size:13px;text-align:right;color:inherit;white-space:nowrap;}.amount{font-weight:500;}.interval{color:#aaaeb3;font-size:10px;font-weight:normal;}", " ", " ", " ", " ", " ", ""], function (props) {
  return props.theme.colors.black[700];
}, function (props) {
  return props.goal.isReached ? getProgressColor(props.theme) : getEmptyProgressColor(props.theme);
}, function (props) {
  return "".concat(props.goal.progress * 100, "%");
}, function (props) {
  return ['balance', 'yearlyBudget'].includes(props.goal.slug) ? 310 : (20 - props.index) * 10;
}, function (props) {
  return !props.goal.animateProgress ? 'opacity 0.3s, height 1s, padding-top 1s' : 'opacity 2s, height 1s, padding-top 1s, width 2s ease-in-out;';
}, function (props) {
  return props.goal.isReached && (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["color:", ";"], props.theme.colors.black[800]);
}, function (props) {
  return props.goal.isReached && props.goal.position === 'below' && (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["border-top:4px solid ", ";"], getProgressColor(props.theme));
}, function (props) {
  return props.goal.position === 'above' && (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["border-bottom:4px solid ", ";top:auto;bottom:76px;.caption{margin-top:-5.5rem;}"], getEmptyProgressColor(props.theme));
}, function (props) {
  if (props.goal.level === 1) {
    if (props.goal.position === 'below') {
      return (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["height:50px;padding-top:4rem;border-right-style:dotted;border-right-color:", ";"], props.theme.colors.primary[300]);
    } else {
      return (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["height:70px;"]);
    }
  }
}, function (props) {
  if (props.goal.isOverlapping) {
    return (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["opacity:0.2;"]);
  } else {
    return (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["animation:", " 0.3s;"], _StyledKeyframes__WEBPACK_IMPORTED_MODULE_16__/* .fadeIn */ .Ji);
  }
}, function (props) {
  return props.goal.hidden && (0,styled_components__WEBPACK_IMPORTED_MODULE_18__/* .css */ .iv)(["opacity:0;"]);
});
var BarContainer = styled_components__WEBPACK_IMPORTED_MODULE_18__/* ["default"].div.withConfig */ .ZP.div.withConfig({
  displayName: "GoalsCover__BarContainer",
  componentId: "sc-1y3145p-1"
})(["position:relative;width:100%;margin:6rem auto 1rem;min-height:80px;.withGoals{margin-top:10rem;}.max-level-above-1{margin-top:15rem;}@media (max-width:1400px){width:90%;}@media (max-width:420px){width:95%;}"]);

var GoalsCover = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_4___default()(GoalsCover, _React$Component);

  var _super = _createSuper(GoalsCover);

  function GoalsCover(props) {
    var _this;

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1___default()(this, GoalsCover);

    _this = _super.call(this, props);
    _this.renderGoal = _this.renderGoal.bind(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3___default()(_this));
    _this.updateGoals = lodash_debounce__WEBPACK_IMPORTED_MODULE_12___default()(_this.updateGoals.bind(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3___default()(_this)), 100, {
      maxWait: 200
    });
    _this.labelsRefs = {};
    _this.messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_19__.defineMessages)({
      'bar.balance': {
        id: "cover.bar.balance",
        defaultMessage: [{
          "type": 0,
          "value": "Today's Balance"
        }]
      },
      'bar.yearlyBudget': {
        id: "cover.bar.yearlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Estimated Annual Budget"
        }]
      },
      'bar.monthlyBudget': {
        id: "cover.bar.monthlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Estimated Monthly Budget"
        }]
      }
    });

    var maxGoal = lodash_maxBy__WEBPACK_IMPORTED_MODULE_10___default()(lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(props.collective, 'settings.goals', []), function (g) {
      return g.title ? g.amount : 0;
    });

    _this.currentProgress = maxGoal ? _this.getMaxCurrentAchievement() / maxGoal.amount : 1.0;
    _this.interpolation = props.interpolation || lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(props.collective, 'settings.goalsInterpolation', 'auto');
    _this.state = _objectSpread({}, _this.populateGoals(true, true));
    return _this;
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_2___default()(GoalsCover, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.setState(_objectSpread(_objectSpread({}, this.populateGoals(false, true)), {}, {
        firstMount: true
      }));
      window.addEventListener('resize', this.updateGoals);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(oldProps) {
      if (this.state.firstMount || this.props.collective !== oldProps.collective) {
        this.updateGoals();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      window.removeEventListener('resize', this.updateGoals);
    }
  }, {
    key: "updateGoals",
    value: function updateGoals() {
      var firstMount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      this.setState(_objectSpread(_objectSpread({}, this.populateGoals()), {}, {
        firstMount: firstMount
      }));
    }
    /** Returns a percentage (0.0-1.0) that represent X position */

  }, {
    key: "getTranslatedPercentage",
    value: function getTranslatedPercentage(x) {
      var interpolation = this.props.interpolation || this.interpolation;

      if (interpolation === 'logarithm' || interpolation === 'auto' && this.currentProgress <= 0.3) {
        // See https://www.desmos.com/calculator/30pua5xx7q
        return -1 * Math.pow(x - 1, 2) + 1;
      }

      return x;
    }
    /** Create goal object with correct defaults and store a ref for React */

  }, {
    key: "createGoal",
    value: function createGoal(slug, params) {
      this.labelsRefs[slug] = this.labelsRefs[slug] || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13__.createRef();
      return _objectSpread(_objectSpread({
        precision: 0,
        isReached: false,
        level: 0,
        position: 'above'
      }, params), {}, {
        slug: slug
      });
    }
    /** Returns the main goals current progress, either max balance or annual budget */

  }, {
    key: "getMaxCurrentAchievement",
    value: function getMaxCurrentAchievement() {
      var collective = this.props.collective;
      return Math.max(lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.balance'), lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.yearlyBudget', 0));
    }
    /**
     * Returns the base goals (balance, yearly budget...) without custom goals.
     * All goals returned here have a slug prefilled.
     */

  }, {
    key: "getInitialGoals",
    value: function getInitialGoals() {
      var _this$props = this.props,
          intl = _this$props.intl,
          collective = _this$props.collective;

      var settingGoals = lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(this.props.collective, 'settings.goals', []);

      var hasMonthlyGoal = settingGoals.some(function (goal) {
        return goal.type === 'monthlyBudget';
      }); // Always show current balance

      var goals = [this.createGoal('balance', {
        animateProgress: true,
        title: intl.formatMessage(this.messages['bar.balance']),
        amount: lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.balance'),
        precision: 2,
        position: 'below',
        isReached: true
      })]; // Add yearly and monthly budgets

      if (lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.yearlyBudget') > 0 && lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.yearlyBudget') !== lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.balance')) {
        if (hasMonthlyGoal) {
          goals.push(this.createGoal('monthlyBudget', {
            animateProgress: true,
            title: intl.formatMessage(this.messages['bar.monthlyBudget']),
            amount: lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.yearlyBudget') / 12,
            precision: 0,
            position: 'below',
            isReached: true
          }));
        } else {
          goals.push(this.createGoal('yearlyBudget', {
            animateProgress: true,
            title: intl.formatMessage(this.messages['bar.yearlyBudget']),
            amount: lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(collective, 'stats.yearlyBudget'),
            precision: 0,
            position: 'below',
            isReached: true
          }));
        }
      } // Animate only the most advanced one


      if (goals.length === 2) {
        if (goals[0].amount <= goals[1].amount) {
          goals[0].animateProgress = false;
        } else {
          goals[1].animateProgress = false;
        }
      }

      return goals;
    }
    /**
     * Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,
     * we make sure to always return the last one to have a complete progress bar.
     *
     * Also adds a unique slug to goals.
     */

  }, {
    key: "getCustomGoals",
    value: function getCustomGoals(maxCustomGoalsToShow) {
      var _this2 = this;

      var settingsGoals = lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(this.props.collective, 'settings.goals', []);

      var sortedGoals = lodash_sortBy__WEBPACK_IMPORTED_MODULE_9___default()(settingsGoals, 'amount');

      var goals = sortedGoals.map(function (goal, idx) {
        return _this2.createGoal("goal-".concat(idx, "-").concat(goal.key || (0,uuid__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z)()), goal);
      }); // No need to remove goals

      if (goals.length <= maxCustomGoalsToShow) {
        return goals;
      } // Filter goals, ensure we keep the last one


      var lastGoal = goals[goals.length - 1];

      if (!maxCustomGoalsToShow) {
        return [lastGoal];
      }

      return [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(goals.slice(0, maxCustomGoalsToShow - 1)), [lastGoal]);
    }
    /**
     * If a ref exists for this goal, get its real with. Otherwise estimate
     * it based on its title (for initial rendering and server-side rendering)
     */

  }, {
    key: "getGoalLabelWidthInPx",
    value: function getGoalLabelWidthInPx(goal) {
      var ref = this.labelsRefs[goal.slug];

      if (ref && ref.current) {
        return ref.current.offsetWidth + 15; // Add a bigger hit box
      } else if (goal.title) {
        return Math.min(MAX_TITLE_LENGTH, goal.title.length) * 8;
      } else {
        // When there's no title we just show a single word - "Goal".
        // 12 characters should be enough for most languages.
        return 12 * 8;
      }
    }
    /** Given a percent size, returns its value in pixels */

  }, {
    key: "percentageToPx",
    value: function percentageToPx(availWidth, percentage) {
      var progressBarPercentageWidth = availWidth > 420 ? 0.8 : 0.95;
      var progressBarWidthInPx = availWidth * progressBarPercentageWidth;
      return percentage * progressBarWidthInPx;
    }
    /** Given a pixels size, returns its value as a percentage of availWidth */

  }, {
    key: "pxToPercentage",
    value: function pxToPercentage(availWidth, widthInPx) {
      return widthInPx / availWidth;
    }
    /** Returns the overlap size if any, 0 otherwise */

  }, {
    key: "goalsOverlapInPx",
    value: function goalsOverlapInPx(availWidth, maxAmount, prevGoal, goal) {
      if (!prevGoal) {
        return 0;
      } // No overlap is possible if not at the same position or level


      if (goal.position !== prevGoal.position || goal.level !== prevGoal.level) {
        return 0;
      } // Get position and distance between the markers


      var prevX = this.percentageToPx(availWidth, this.getTranslatedPercentage(prevGoal.amount / maxAmount));
      var curX = this.percentageToPx(availWidth, this.getTranslatedPercentage(goal.amount / maxAmount));
      var prevWidth = this.getGoalLabelWidthInPx(prevGoal); // If goal is at the far left of the graphic, label will be moved to the right

      var xLabelOffset = prevX - prevWidth;
      var distance = xLabelOffset < 0 ? curX - prevX + xLabelOffset : curX - prevX; // Calculate overlap size

      var curWidth = this.getGoalLabelWidthInPx(goal);
      var offset = distance - curWidth;
      return offset < 0 ? -offset : 0;
    }
    /**
     * Test goals position against the first previous goal on the same position / level
     *
     * @returns {goal, overlap}
     */

  }, {
    key: "overlapWithPrev",
    value: function overlapWithPrev(availWidth, maxAmount, prevGoals, goal) {
      for (var i = prevGoals.length - 1; i >= 0; i--) {
        var prevGoal = prevGoals[i];

        if (goal.position === prevGoal.position && goal.level === prevGoal.level) {
          return {
            prevGoal: prevGoal,
            overlap: this.goalsOverlapInPx(availWidth, maxAmount, prevGoal, goal)
          };
        }
      }

      return {
        prevGoal: null,
        overlap: 0
      };
    }
    /** @returns {Object} {goals, hasCustomGoals, maxAmount, maxLevelAbove} */

  }, {
    key: "populateGoals",
    value: function populateGoals(isServerSide, isInitialRender) {
      var _this3 = this;

      // Show only one custom goal on mobile
      var maxLevelAbove = 0;
      var availWidth = 700;
      var maxCustomGoalsToShow = 10;

      if (isServerSide) {
        maxCustomGoalsToShow = 0;
      } else {
        availWidth = lodash_get__WEBPACK_IMPORTED_MODULE_11___default()(window, 'screen.availWidth') || 560;

        if (availWidth <= 560) {
          maxCustomGoalsToShow = 0;
        } else if (availWidth < 728) {
          maxCustomGoalsToShow = 1;
        } else if (availWidth < 896) {
          maxCustomGoalsToShow = 2;
        } else if (availWidth < 1120) {
          maxCustomGoalsToShow = 3;
        }
      } // Get all goals sorted by amount


      var initialGoals = this.getInitialGoals();
      var customGoals = this.getCustomGoals(maxCustomGoalsToShow);

      var goals = lodash_sortBy__WEBPACK_IMPORTED_MODULE_9___default()([].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(initialGoals), _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(customGoals)), 'amount');

      var maxAmount = lodash_maxBy__WEBPACK_IMPORTED_MODULE_10___default()(goals, function (g) {
        return g.amount;
      }).amount;

      var maxAchievedYet = this.getMaxCurrentAchievement(); // Set goals positions

      var _loop = function _loop(i) {
        var isLastGoal = i === goals.length - 1;
        var goal = goals[i];
        goal.progress = _this3.getTranslatedPercentage(goal.amount / maxAmount);
        goal.isReached = goal.isReached || maxAchievedYet > goal.amount;
        goal.hidden = false;
        var prevGoals = goals.slice(0, i);

        var overlapWithPrev = function overlapWithPrev(goal) {
          return _this3.overlapWithPrev(availWidth, maxAmount, prevGoals, goal);
        };

        var _overlapWithPrev = overlapWithPrev(goal),
            prevGoal = _overlapWithPrev.prevGoal,
            overlap = _overlapWithPrev.overlap; // -- Overlap 😱 --


        if (overlap > 0) {
          // 1st strategy: we change the level by 1
          var newLevel = Number(!prevGoal.level);

          if (overlapWithPrev(_objectSpread(_objectSpread({}, goal), {}, {
            level: newLevel
          })).overlap === 0) {
            goal.level = newLevel;

            if (goal.position === 'above') {
              maxLevelAbove = Math.max(maxLevelAbove, newLevel);
            }
          } else {
            // 2nd strategy: we shift by given offset, and we change opacity
            // - of the prev goal if this is last goal, of the current otherwise
            // Will not shift at less than 0% or more than 100%
            if (!isLastGoal) {
              goal.isOverlapping = true;

              var newProgress = goal.progress + _this3.pxToPercentage(availWidth, overlap);

              goal.progress = newProgress <= 1 ? newProgress : 1;
            } else {
              prevGoal.isOverlapping = true;

              var _newProgress = prevGoal.progress - _this3.pxToPercentage(availWidth, overlap);

              prevGoal.progress = _newProgress >= 0 ? _newProgress : 0;
            }
          }
        } // Change progress to animate goal. Never animate the last goal as it would
        // result in a partial progress bar for first rendering. Hide when rendered
        // on server side to avoid getting the marker stuck while waiting for
        // re-hydrating


        if (goal.animateProgress && !isLastGoal) {
          if (isServerSide) {
            goal.hidden = true;
          }

          if (isInitialRender) {
            goal.progress = 0;
          }
        }
      };

      for (var i = 0; i < goals.length; i++) {
        _loop(i);
      }

      return {
        goals: goals,
        maxAmount: maxAmount,
        maxLevelAbove: maxLevelAbove,
        hasCustomGoals: customGoals.length > 0
      };
    }
  }, {
    key: "getDivTitle",
    value: function getDivTitle(title, description) {
      if (title && description) {
        return "".concat(title, "\n\n").concat(description);
      } else {
        return title || description || '';
      }
    }
  }, {
    key: "renderGoal",
    value: function renderGoal(goal, index) {
      var _this$props2 = this.props,
          collective = _this$props2.collective,
          intl = _this$props2.intl;
      var slug = goal.slug;
      var amount = (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_14__/* .formatCurrency */ .xG)(goal.amount || 0, collective.currency, {
        precision: goal.precision || 0,
        locale: intl.locale
      });
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(GoalContainer, {
        className: "goal ".concat(goal.slug),
        goal: goal,
        index: index,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div", {
          className: "caption",
          title: this.getDivTitle(goal.title, goal.description),
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div", {
            className: "label",
            ref: this.labelsRefs[goal.slug],
            children: goal.title ? lodash_truncate__WEBPACK_IMPORTED_MODULE_8___default()(goal.title, {
              length: MAX_TITLE_LENGTH
            }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
              id: "ContributionType.Goal",
              defaultMessage: [{
                "type": 0,
                "value": "Goal"
              }]
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div", {
            className: "amount",
            children: [amount, (goal.type === 'yearlyBudget' || goal.type === 'monthlyBudget') && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div", {
              className: "interval",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z, {
                id: "tier.interval",
                defaultMessage: [{
                  "type": 0,
                  "value": "per "
                }, {
                  "type": 5,
                  "value": "interval",
                  "options": {
                    "month": {
                      "value": [{
                        "type": 0,
                        "value": "month"
                      }]
                    },
                    "year": {
                      "value": [{
                        "type": 0,
                        "value": "year"
                      }]
                    },
                    "other": {
                      "value": []
                    }
                  }
                }],
                values: {
                  interval: goal.type === 'yearlyBudget' ? 'year' : 'month'
                }
              })
            })]
          })]
        })
      }, slug);
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var collective = this.props.collective;

      if (!collective) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div", {});
      }

      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(BarContainer, {
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          className: "max-level-above-".concat(this.state.maxLevelAbove, " ").concat(this.state.hasCustomGoals ? 'withGoals' : ''),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
            children: this.state.goals && this.state.goals.map(function (goal, index) {
              return _this4.renderGoal(goal, index);
            })
          })
        })
      });
    }
  }]);

  return GoalsCover;
}(react__WEBPACK_IMPORTED_MODULE_13__.Component);

_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_7___default()(GoalsCover, "defaultProps", {
  interpolation: 'auto'
});

GoalsCover.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "updateGoals",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "firstMount",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getTranslatedPercentage",
    "docblock": "Returns a percentage (0.0-1.0) that represent X position",
    "modifiers": [],
    "params": [{
      "name": "x"
    }],
    "returns": null,
    "description": "Returns a percentage (0.0-1.0) that represent X position"
  }, {
    "name": "createGoal",
    "docblock": "Create goal object with correct defaults and store a ref for React",
    "modifiers": [],
    "params": [{
      "name": "slug"
    }, {
      "name": "params"
    }],
    "returns": null,
    "description": "Create goal object with correct defaults and store a ref for React"
  }, {
    "name": "getMaxCurrentAchievement",
    "docblock": "Returns the main goals current progress, either max balance or annual budget",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Returns the main goals current progress, either max balance or annual budget"
  }, {
    "name": "getInitialGoals",
    "docblock": "Returns the base goals (balance, yearly budget...) without custom goals.\nAll goals returned here have a slug prefilled.",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Returns the base goals (balance, yearly budget...) without custom goals.\nAll goals returned here have a slug prefilled."
  }, {
    "name": "getCustomGoals",
    "docblock": "Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,\nwe make sure to always return the last one to have a complete progress bar.\n\nAlso adds a unique slug to goals.",
    "modifiers": [],
    "params": [{
      "name": "maxCustomGoalsToShow"
    }],
    "returns": null,
    "description": "Get at most `maxCustomGoalsToShow` custom goals. If goals are filtered,\nwe make sure to always return the last one to have a complete progress bar.\n\nAlso adds a unique slug to goals."
  }, {
    "name": "getGoalLabelWidthInPx",
    "docblock": "If a ref exists for this goal, get its real with. Otherwise estimate\nit based on its title (for initial rendering and server-side rendering)",
    "modifiers": [],
    "params": [{
      "name": "goal"
    }],
    "returns": null,
    "description": "If a ref exists for this goal, get its real with. Otherwise estimate\nit based on its title (for initial rendering and server-side rendering)"
  }, {
    "name": "percentageToPx",
    "docblock": "Given a percent size, returns its value in pixels",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "percentage"
    }],
    "returns": null,
    "description": "Given a percent size, returns its value in pixels"
  }, {
    "name": "pxToPercentage",
    "docblock": "Given a pixels size, returns its value as a percentage of availWidth",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "widthInPx"
    }],
    "returns": null,
    "description": "Given a pixels size, returns its value as a percentage of availWidth"
  }, {
    "name": "goalsOverlapInPx",
    "docblock": "Returns the overlap size if any, 0 otherwise",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "maxAmount"
    }, {
      "name": "prevGoal"
    }, {
      "name": "goal"
    }],
    "returns": null,
    "description": "Returns the overlap size if any, 0 otherwise"
  }, {
    "name": "overlapWithPrev",
    "docblock": "Test goals position against the first previous goal on the same position / level\n\n@returns {goal, overlap}",
    "modifiers": [],
    "params": [{
      "name": "availWidth"
    }, {
      "name": "maxAmount"
    }, {
      "name": "prevGoals"
    }, {
      "name": "goal"
    }],
    "returns": null,
    "description": "Test goals position against the first previous goal on the same position / level"
  }, {
    "name": "populateGoals",
    "docblock": "@returns {Object} {goals, hasCustomGoals, maxAmount, maxLevelAbove}",
    "modifiers": [],
    "params": [{
      "name": "isServerSide"
    }, {
      "name": "isInitialRender"
    }],
    "returns": {
      "description": "{goals, hasCustomGoals, maxAmount, maxLevelAbove}",
      "type": {
        "name": "Object"
      }
    },
    "description": null
  }, {
    "name": "getDivTitle",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "title",
      "type": null
    }, {
      "name": "description",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "goal",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "GoalsCover",
  "props": {
    "interpolation": {
      "defaultValue": {
        "value": "'auto'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'linear'",
          "computed": false
        }, {
          "value": "'logarithm'",
          "computed": false
        }, {
          "value": "'auto'",
          "computed": false
        }]
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((0,react_intl__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .ZP)(GoalsCover));

/***/ }),

/***/ 41627:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(44012);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29242);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85893);




/**
 * Displays a location object
 */




var LocationAddress = function LocationAddress(_ref) {
  var location = _ref.location,
      isLoading = _ref.isLoading,
      showMessageIfEmpty = _ref.showMessageIfEmpty;

  if (isLoading) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div", {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
        height: "1em",
        mb: "0.5em"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
        height: "1em",
        mb: "0.5em"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, {
        height: "1em"
      })]
    });
  } else if (!location || !location.address && !location.country) {
    return !showMessageIfEmpty ? null : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__/* .Span */ .Dr, {
      fontStyle: "italic",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
        id: "LocationAddress.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No address configured yet"
        }]
      })
    });
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: [location.address, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("br", {}), location.country]
  });
};

LocationAddress.__docgenInfo = {
  "description": "Displays a location object",
  "methods": [],
  "displayName": "LocationAddress",
  "props": {
    "location": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "address": {
            "name": "string",
            "required": false
          },
          "country": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "showMessageIfEmpty": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (LocationAddress);

/***/ }),

/***/ 10878:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": function() { return /* binding */ hasRoleDescription; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45697);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86896);
/* harmony import */ var _lib_constants_roles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98216);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88705);


var _defineMessages;





var ROLES_DETAILS = (0,react_intl__WEBPACK_IMPORTED_MODULE_3__.defineMessages)((_defineMessages = {}, _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(_defineMessages, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ADMIN */ .Z.ADMIN, {
  id: "+Qi39W",
  defaultMessage: [{
    "type": 8,
    "value": "strong",
    "children": [{
      "type": 0,
      "value": "Admins"
    }]
  }, {
    "type": 0,
    "value": " can edit settings, approve expenses, and receive activity notifications (such as when a new expense is submitted). They are the active managers of a Collective."
  }]
}), _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(_defineMessages, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_1__/* ["default"].MEMBER */ .Z.MEMBER, {
  id: "O8duLC",
  defaultMessage: [{
    "type": 8,
    "value": "strong",
    "children": [{
      "type": 0,
      "value": "Core Contributors"
    }]
  }, {
    "type": 0,
    "value": " are shown as part of the team on your page but do not have admin access or get notifications. They do not play an active role on the platform."
  }]
}), _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(_defineMessages, _lib_constants_roles__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ACCOUNTANT */ .Z.ACCOUNTANT, {
  id: "OdjT4O",
  defaultMessage: [{
    "type": 8,
    "value": "strong",
    "children": [{
      "type": 0,
      "value": "Accountants"
    }]
  }, {
    "type": 0,
    "value": " have read-only access to non-public data, uploaded files, and reports for record-keeping purposes. They cannot make changes and are not shown on your page."
  }]
}), _defineMessages));
var hasRoleDescription = function hasRoleDescription(role) {
  return Boolean(ROLES_DETAILS[role]);
};

var MemberRoleDescription = function MemberRoleDescription(_ref) {
  var role = _ref.role;
  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)();
  return hasRoleDescription(role) ? intl.formatMessage(ROLES_DETAILS[role], _I18nFormatters__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .ZP) : null;
};

MemberRoleDescription.propTypes = {
  role: prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(Object.values(_lib_constants_roles__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z))
};
/* harmony default export */ __webpack_exports__["Z"] = (MemberRoleDescription);

/***/ }),

/***/ 79045:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(49376);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57557);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87794);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(67294);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11163);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(44012);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(69078);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16159);
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92129);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97274);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(85893);





function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












var Pagination = function Pagination(_ref) {
  var route = _ref.route,
      limit = _ref.limit,
      offset = _ref.offset,
      total = _ref.total,
      scrollToTopOnChange = _ref.scrollToTopOnChange,
      isDisabled = _ref.isDisabled,
      ignoredQueryParams = _ref.ignoredQueryParams;
  var router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();

  if (!router) {
    return null;
  }

  var totalPages = Math.ceil(total / limit);
  var currentPage = offset / limit + 1;
  var queryParams = ignoredQueryParams ? lodash_omit__WEBPACK_IMPORTED_MODULE_2___default()(router.query, ignoredQueryParams) : router.query;
  route = route || router.asPath.split('?')[0];
  isDisabled = isDisabled || totalPages <= 1;

  var changePage = /*#__PURE__*/function () {
    var _ref3 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(_ref2) {
      var target, key, value;
      return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              target = _ref2.target, key = _ref2.key;

              if (!(key && key !== 'Enter')) {
                _context.next = 3;
                break;
              }

              return _context.abrupt("return");

            case 3:
              value = target.value;

              if (!(!value || !parseInt(value) || parseInt(value) === currentPage)) {
                _context.next = 6;
                break;
              }

              return _context.abrupt("return");

            case 6:
              _context.next = 8;
              return router.push({
                pathname: route,
                query: _objectSpread(_objectSpread({}, queryParams), {}, {
                  offset: (value - 1) * limit
                })
              });

            case 8:
              if (scrollToTopOnChange) {
                window.scrollTo(0, 0);
              }

            case 9:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function changePage(_x) {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_7__/* .Flex */ .kC, {
    alignItems: "center",
    children: [currentPage > 1 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Link__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      href: {
        pathname: route,
        query: _objectSpread(_objectSpread({}, queryParams), {}, {
          offset: offset - limit
        })
      },
      scroll: scrollToTopOnChange,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        buttonSize: "small",
        disabled: isDisabled,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          id: "Pagination.Prev",
          defaultMessage: [{
            "type": 0,
            "value": "Previous"
          }]
        })
      })
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
      display: "inline-block",
      mx: 2,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
        id: "Pagination.Count",
        defaultMessage: [{
          "type": 0,
          "value": "Page "
        }, {
          "type": 1,
          "value": "current"
        }, {
          "type": 0,
          "value": " of "
        }, {
          "type": 1,
          "value": "total"
        }],
        values: {
          current: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_StyledInput__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .ZP, {
            defaultValue: currentPage,
            onBlur: changePage,
            onKeyPress: changePage,
            textAlign: "center",
            mx: 1,
            px: 1,
            py: 1,
            width: 30,
            disabled: isDisabled,
            type: "text",
            pattern: "[0-9]+",
            inputMode: "numeric",
            "data-cy": "pagination-current"
          }, offset),
          total: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span", {
            "data-cy": "pagination-total",
            children: totalPages || 1
          })
        }
      })
    }), currentPage < totalPages && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Link__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
      href: {
        pathname: route,
        query: _objectSpread(_objectSpread({}, queryParams), {}, {
          offset: offset + limit
        })
      },
      scroll: scrollToTopOnChange,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_StyledButton__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
        buttonSize: "small",
        disabled: isDisabled,
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
          id: "Pagination.Next",
          defaultMessage: [{
            "type": 0,
            "value": "Next"
          }]
        })
      })
    })]
  });
};

Pagination.defaultProps = {
  scrollToTopOnChange: true
};
Pagination.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Pagination",
  "props": {
    "scrollToTopOnChange": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "Use this to scroll back on top when pagination changes",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "limit": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "offset": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "total": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "isDisabled": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "route": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "ignoredQueryParams": {
      "description": "By default, all query params will be transferred in the paginated link. This prop is useful to filter query params that are part of the URL.",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (Pagination);

/***/ }),

/***/ 8634:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_": function() { return /* binding */ PasswordStrengthBar; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67294);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28860);
/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86896);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85893);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





var ReactPasswordStrengthBar = next_dynamic__WEBPACK_IMPORTED_MODULE_2___default()(function () {
  return __webpack_require__.e(/* import() */ 9440).then(__webpack_require__.bind(__webpack_require__, 24180));
}, {
  loadableGenerated: {
    webpack: function webpack() {
      return [/*require.resolve*/(24180)];
    }
  }
});
/**
 * A wrapper around react-password-strength-bar to plug our custom styles and logic.
 * Loads the library dynamically to avoid bloating the bundle size.
 */

var PasswordStrengthBar = function PasswordStrengthBar(props) {
  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)();
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ReactPasswordStrengthBar, _objectSpread(_objectSpread({}, props), {}, {
    style: {
      visibility: props.password ? 'visible' : 'hidden'
    },
    shortScoreWord: intl.formatMessage({
      id: "FormError.minLength",
      defaultMessage: [{
        "type": 0,
        "value": "The value is too short"
      }]
    }),
    scoreWords: [intl.formatMessage({
      id: "Password.weak",
      defaultMessage: [{
        "type": 0,
        "value": "Weak"
      }]
    }), intl.formatMessage({
      id: "Password.weak",
      defaultMessage: [{
        "type": 0,
        "value": "Weak"
      }]
    }), intl.formatMessage({
      id: "Password.fair",
      defaultMessage: [{
        "type": 0,
        "value": "Fair"
      }]
    }), intl.formatMessage({
      id: "Password.good",
      defaultMessage: [{
        "type": 0,
        "value": "Good"
      }]
    }), intl.formatMessage({
      id: "Password.strong",
      defaultMessage: [{
        "type": 0,
        "value": "Strong"
      }]
    })]
  }));
};
PasswordStrengthBar.__docgenInfo = {
  "description": "A wrapper around react-password-strength-bar to plug our custom styles and logic.\nLoads the library dynamically to avoid bloating the bundle size.",
  "methods": [],
  "displayName": "PasswordStrengthBar"
};

/***/ }),

/***/ 59139:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ RichTextEditor; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92191);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67294);
/* harmony import */ var _styled_system_css__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(37947);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(52015);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(57632);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(48966);
/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(65985);
/* harmony import */ var _lib_styled_components_shared_styles__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(72004);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97079);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(69078);
/* harmony import */ var _HTMLContent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(74770);
/* harmony import */ var _LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(29242);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(86702);
/* harmony import */ var _StyledTag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(36422);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(85893);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var TrixEditorContainer = styled_components__WEBPACK_IMPORTED_MODULE_18__/* ["default"].div.withConfig */ .ZP.div.withConfig({
  displayName: "RichTextEditor__TrixEditorContainer",
  componentId: "sc-2bze4a-0"
})(["", " trix-editor{border:none;padding:0;margin-top:8px;padding-top:8px;outline-offset:0.5em;", " &::-webkit-scrollbar{width:8px;}", " ", " &:empty:not(:focus)::before{color:", ";}figcaption{display:none;}", "}trix-toolbar{min-height:40px;background:", ";", " z-index:2;margin-bottom:8px;", " .trix-button-group{border-radius:6px;border-color:#c4c7cc;margin-bottom:0;background:white;}.trix-button{border-bottom:none;display:inline-block;height:auto;&:hover{background:", ";}&.trix-active{background:", ";}&::before,&.trix-active::before{margin:4px;}}", " @media (max-width:500px){.trix-button--icon-strike,.trix-button--icon-number-list,.trix-button--icon-decrease-nesting-level,.trix-button--icon-increase-nesting-level{display:none;}}", " .trix-button--icon-attach::before{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'/%3E%3Ccircle cx='8.5' cy='8.5' r='1.5'/%3E%3Cpolyline points='21 15 16 10 5 21'/%3E%3C/svg%3E\");}.trix-button--video-attach::before{top:8%;bottom:4%;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-video'%3E%3Cpolygon points='23 7 16 12 23 17 23 7'%3E%3C/polygon%3E%3Crect x='1' y='5' width='15' height='14' rx='2' ry='2'%3E%3C/rect%3E%3C/svg%3E\");}}", ""], function (props) {
  return props.withBorders && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    border: '1px solid',
    borderColor: !props.error ? 'black.300' : 'red.300',
    borderRadius: 10,
    padding: 3
  });
}, _lib_styled_components_shared_styles__WEBPACK_IMPORTED_MODULE_10__/* .CustomScrollbarCSS */ .T, function (props) {
  return Boolean(props.editorMaxHeight) && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    overflowY: 'scroll'
  });
}, function (props) {
  return !props.withBorders && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    outline: !props.error ? 'none' : "1px dashed ".concat(props.theme.colors.red[300]),
    '&:focus': {
      outline: "1px dashed ".concat(props.theme.colors.black[200])
    }
  });
}, function (props) {
  return props.theme.colors.black[400];
}, function (props) {
  return (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    minHeight: props.editorMinHeight,
    maxHeight: props.editorMaxHeight
  });
}, function (props) {
  return props.toolbarBackgroundColor;
}, function (props) {
  return !props.withBorders && "box-shadow: 0px 5px 3px -3px rgba(0, 0, 0, 0.1);";
}, function (props) {
  return props.withBorders && "min-height: 0px; margin-bottom: 0;";
}, function (props) {
  return props.theme.colors.blue[100];
}, function (props) {
  return props.theme.colors.blue[200];
}, function (props) {
  return props.version === 'simplified' && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    '.trix-button-group--file-tools': {
      display: 'none'
    },
    '.trix-button-group--block-tools .trix-button:not(.trix-button--icon-number-list):not(.trix-button--icon-bullet-list)': {
      display: 'none'
    },
    '.trix-button--icon-bullet-list': {
      borderLeft: 'none'
    }
  });
}, function (props) {
  return props.withStickyToolbar && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    position: 'sticky',
    top: props.toolbarTop || 0,
    marginTop: props.toolbarOffsetY,
    p: '10px'
  });
}, function (props) {
  return props.isDisabled && (0,_styled_system_css__WEBPACK_IMPORTED_MODULE_19__/* .css */ .iv)({
    pointerEvents: 'none',
    cursor: 'not-allowed',
    background: '#f3f3f3',
    'trix-toolbar,.trix-button-group': {
      background: '#f3f3f3 !important'
    }
  });
});
var SUPPORTED_SERVICE_URLS = {
  youTube: 'https://www.youtube-nocookie.com/embed/',
  anchorFm: 'https://anchor.fm/'
};
/**
 * A React wrapper around the Trix library to edit rich text.
 * Produces HTML and clear text.
 */

var RichTextEditor = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_3___default()(RichTextEditor, _React$Component);

  var _super = _createSuper(RichTextEditor);

  function RichTextEditor(props) {
    var _this;

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0___default()(this, RichTextEditor);

    _this = _super.call(this, props);

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "initialize", function () {
      if (_this.Trix && _this.editorRef.current) {
        // Listen for changes
        _this.editorRef.current.addEventListener('trix-change', _this.handleChange, false);

        _this.editorRef.current.addEventListener('trix-attachment-add', _this.handleUpload);

        _this.editorRef.current.addEventListener('trix-file-accept', _this.handleFileAccept);

        _this.editorRef.current.addEventListener('trix-action-invoke', _this.trixActionInvoke);

        _this.editorRef.current.addEventListener('trix-initialize', function (event) {
          if (_this.props.videoEmbedEnabled) {
            _this.replaceEmbeddedIFrames(_this.props.value || _this.props.defaultValue);

            _this.trixEmbed(event);
          } // Some special handling for links


          if (_this.mainContainerRef.current) {
            // We must listen when the user presses the 'Enter' key and when the user clicks the 'Link' button as well
            var linkInput = _this.mainContainerRef.current.querySelector("[data-trix-input][name='href']");

            linkInput === null || linkInput === void 0 ? void 0 : linkInput.addEventListener('keydown', function (e) {
              if (e.key === 'Enter') {
                _this.handleLink();
              }
            });

            var addLinkBtn = _this.mainContainerRef.current.querySelector("[data-trix-method='setAttribute']");

            addLinkBtn === null || addLinkBtn === void 0 ? void 0 : addLinkBtn.addEventListener('click', _this.handleLink);
          }
        }); // Component ready!


        _this.isReady = true;
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "replaceEmbeddedIFrames", function (value) {
      var iframeRegex = new RegExp("<iframe.+?iframe>", 'ig');
      var match;
      var lastIndex = 0;

      while (match = iframeRegex.exec(value)) {
        if (lastIndex === 0) {
          _this.getEditor().loadHTML('');
        }

        var iframe = match[0];
        var position = match.index;
        var preText = value.substring(lastIndex, position);

        _this.getEditor().setSelectedRange([lastIndex, position]);

        _this.getEditor().insertHTML(preText);

        var attachment = new _this.Trix.Attachment({
          content: iframe
        });

        _this.getEditor().insertAttachment(attachment);

        lastIndex = match.index + iframe.length;
        var postText = value.substring(lastIndex, value.length);

        _this.getEditor().insertHTML(postText);
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "trixEmbed", function (e) {
      var videoEmbedButton = "<button type=\"button\" tabindex=\"-1\" data-trix-action=\"x-video-dialog-open\" title=\"Attach Video\" class=\"trix-button trix-button--icon trix-button--video-attach\">Attach Video</button>";
      var videoEmbedDialog = "\n            <div class=\"trix-dialog\" data-trix-dialog=\"video-url\" data-trix-dialog-attribute=\"video\">\n              <div class=\"trix-dialog__link-fields\">\n                <input type=\"url\" name=\"video-url\" class=\"trix-input trix-input--dialog trix-input--dialog-embed\" placeholder=\"Enter Video URL\u2026\" aria-label=\"Video URL\" data-trix-input=\"\">\n                <div class=\"trix-button-group\">\n                  <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"Add Video\" data-trix-action=\"x-add-embed\">\n                </div>\n              </div>\n              <strong>Note: Only YouTube and Anchor.fm links are supported.</strong>\n            </div>";
      var toolbarElement = e.target.toolbarElement;
      var attachFilesButton = toolbarElement.querySelector('[data-trix-action=attachFiles]');
      attachFilesButton.insertAdjacentHTML('afterend', videoEmbedButton);
      var trixDialog = toolbarElement.querySelector('.trix-dialog--link');
      trixDialog.insertAdjacentHTML('afterend', videoEmbedDialog);
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "trixActionInvoke", function (e) {
      var toolbarElement = e.target.toolbarElement;

      if (e.actionName === 'x-video-dialog-open') {
        var attachVideoDialog = toolbarElement.querySelector('[data-trix-dialog=video-url]');
        var attachVideoDialogInput = toolbarElement.querySelector('.trix-input--dialog-embed');

        if (attachVideoDialog.getAttribute('data-trix-active') === '') {
          attachVideoDialog.removeAttribute('data-trix-active');
        } else {
          attachVideoDialog.setAttribute('data-trix-active', '');
          attachVideoDialogInput.removeAttribute('disabled');
        }
      } else if (e.actionName === 'x-add-embed') {
        var _toolbarElement$query;

        var embedLink = (_toolbarElement$query = toolbarElement.querySelector('.trix-input--dialog-embed').value) === null || _toolbarElement$query === void 0 ? void 0 : _toolbarElement$query.trim();

        if (embedLink) {
          _this.embedIframe(embedLink);
        }
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "constructVideoEmbedURL", function (service, id) {
      if (service === 'youtube') {
        return "".concat(SUPPORTED_SERVICE_URLS.youTube).concat(id);
      }
      /* else if (service === 'vimeo') {
      return `https://player.vimeo.com/video/${id}`;
      } */
      else if (service === 'anchorFm') {
        return "".concat(SUPPORTED_SERVICE_URLS.anchorFm).concat(id);
      } else {
        return null;
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "parseServiceLink", function (videoLink) {
      var regexps = {
        youtube: new RegExp('(?:https?://)?(?:www\\.)?youtu(?:\\.be/|be\\.com/\\S*(?:watch|embed)(?:(?:(?=/[^&\\s?]+(?!\\S))/)|(?:\\S*v=|v/)))([^&\\s?]+)', 'i'),
        vimeo: new RegExp('(http|https)?://(www\\.)?vimeo\\.com/(?:channels/(?:\\w+/)?|groups/([^/]*)/videos/|)(\\d+)(?:|/?)'),
        anchorFm: /^(http|https)?:\/\/(www\.)?anchor\.fm\/([^/]+)(\/embed)?(\/episodes\/)?([^/]+)?\/?$/
      };

      for (var service in regexps) {
        var matches = regexps[service].exec(videoLink);

        if (matches) {
          if (service === 'anchorFm') {
            var podcastName = matches[3];
            var episodeId = matches[6];
            var podcastUrl = "".concat(podcastName, "/embed");
            return {
              service: service,
              id: episodeId ? "".concat(podcastUrl, "/episodes/").concat(episodeId) : podcastUrl
            };
          } else {
            return {
              service: service,
              id: matches[matches.length - 1]
            };
          }
        }
      }

      return {};
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "embedIframe", function (videoLink) {
      var _this$parseServiceLin = _this.parseServiceLink(videoLink),
          id = _this$parseServiceLin.id,
          service = _this$parseServiceLin.service;

      var embedLink = _this.constructVideoEmbedURL(service, id);

      if (embedLink) {
        var sanitizedLink = embedLink.replace(/["\\]/g, ''); // Small security enhancement, prevents going out of `src`

        var videoServices = ['youtube', 'vimeo'];
        var attachmentData;

        if (videoServices.includes(service)) {
          attachmentData = {
            contentType: '--embed-iframe-video',
            content: "<iframe src=\"".concat(sanitizedLink, "/?showinfo=0\" width=\"100%\" height=\"394\" frameborder=\"0\" allowfullscreen/>")
          };
        } else {
          attachmentData = {
            contentType: "--embed-iframe-".concat(service),
            content: "<iframe src=\"".concat(sanitizedLink, "\" width=\"100%\" frameborder=\"0\"/>")
          };
        }

        _this.getEditor().insertAttachment(new _this.Trix.Attachment(attachmentData));
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleChange", function (e) {
      // Trigger content formatters
      _this.autolink(); // Notify parent function


      if (_this.props.onChange) {
        _this.props.onChange(e);
      } // Reset errors


      if (_this.state.error) {
        _this.setState({
          error: null
        });
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleFileAccept", function (e) {
      if (!/^image\//.test(e.file.type)) {
        alert('You can only upload images.');
        e.preventDefault();
      } else if (e.file.size > 4000000) {
        // Prevent attaching files > 4MB
        alert('This file is too big (max: 4mb).');
        e.preventDefault();
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleUpload", function (e) {
      var _this$props$setUpload, _this$props;

      var attachment = e.attachment;

      var attachmentContent = lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(attachment, 'attachment.attributes.values.content');

      var isVideoAttachment = (attachmentContent === null || attachmentContent === void 0 ? void 0 : attachmentContent.includes("<iframe src=\"".concat(SUPPORTED_SERVICE_URLS.youTube))) || (attachmentContent === null || attachmentContent === void 0 ? void 0 : attachmentContent.includes("<iframe src=\"".concat(SUPPORTED_SERVICE_URLS.anchorFm)));

      if (isVideoAttachment) {
        return;
      } else if (!attachment.file) {
        attachment.remove(); // Remove unknown stuff, for example when copy-pasting HTML

        return;
      }

      (_this$props$setUpload = (_this$props = _this.props).setUploading) === null || _this$props$setUpload === void 0 ? void 0 : _this$props$setUpload.call(_this$props, true);

      var onProgress = function onProgress(progress) {
        return attachment.setUploadProgress(progress);
      };

      var onSuccess = function onSuccess(fileURL) {
        var _this$props$setUpload2, _this$props2;

        (_this$props$setUpload2 = (_this$props2 = _this.props).setUploading) === null || _this$props$setUpload2 === void 0 ? void 0 : _this$props$setUpload2.call(_this$props2, false);
        attachment.setAttributes({
          url: fileURL,
          href: fileURL
        });
      };

      var onFailure = function onFailure() {
        var _this$props$setUpload3, _this$props3;

        (_this$props$setUpload3 = (_this$props3 = _this.props).setUploading) === null || _this$props$setUpload3 === void 0 ? void 0 : _this$props$setUpload3.call(_this$props3, false);

        _this.setState({
          error: 'File upload failed'
        });

        attachment.remove();
      };

      (0,_lib_api__WEBPACK_IMPORTED_MODULE_9__/* .uploadImageWithXHR */ .Z4)(attachment.file, _this.props.kind, {
        onProgress: onProgress,
        onSuccess: onSuccess,
        onFailure: onFailure
      });
      return e;
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleLink", function () {
      var _this$mainContainerRe, _urlInput$value;

      var urlInput = (_this$mainContainerRe = _this.mainContainerRef.current) === null || _this$mainContainerRe === void 0 ? void 0 : _this$mainContainerRe.querySelector("[data-trix-input][name='href']");
      var urlInputValue = urlInput === null || urlInput === void 0 ? void 0 : (_urlInput$value = urlInput.value) === null || _urlInput$value === void 0 ? void 0 : _urlInput$value.trim(); // Ignore missing input or empty values

      if (!urlInputValue) {
        return;
      } // Automatically add 'https://' to the url
      // eslint-disable-next-line camelcase


      if ((0,validator__WEBPACK_IMPORTED_MODULE_20__.isURL)(urlInputValue, {
        require_protocol: false
      }) && !(0,validator__WEBPACK_IMPORTED_MODULE_20__.isURL)(urlInputValue, {
        require_protocol: true
      })) {
        urlInput.value = "https://".concat(urlInputValue);
      }
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_2___default()(_this), "autolinkDelimiter", function (url) {
      var lastCharacterPosition = url.length;

      while (lastCharacterPosition > 0) {
        var lastCharacterIndex = lastCharacterPosition - 1;
        var closingPair = url[lastCharacterIndex];
        var openingPair = void 0;

        if (closingPair === ')') {
          openingPair = '(';
        } else if (closingPair === ']') {
          openingPair = '[';
        } else if (closingPair === '}') {
          openingPair = '{';
        } else if (closingPair === '"') {
          openingPair = '"';
        } else if (closingPair === "'") {
          openingPair = "'";
        } // Ensure single punctuations marks at the end of the URL are not included as part of link


        if ('?!.,:;*_~'.includes(url[lastCharacterIndex])) {
          lastCharacterPosition--;
        } else if (openingPair) {
          var opening = 0,
              closing = 0;
          /** Check to ensure that when a URL is enclosed within pair punctuations,
           * we do not include the closing punctuation as part of the link.
           * We only want to accept a closing punctuation at the end of the link,
           * if there is a corresponding opening punctuation within the URL.
           */

          for (var i = 0; i < lastCharacterPosition; i++) {
            if (url[i] === openingPair) {
              opening++;
            } else if (url[i] === closingPair) {
              closing++;
            }
          }

          if (opening >= closing) {
            break;
          }

          lastCharacterPosition--;
        } else {
          break;
        }
      }

      return lastCharacterPosition;
    });

    _this.editorRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createRef();
    _this.mainContainerRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createRef();
    _this.state = {
      id: props.id,
      error: null
    };
    _this.isReady = false;

    if (true) {
      _this.Trix = __webpack_require__(36250);
      _this.Trix.config.blockAttributes.heading1 = {
        tagName: 'h3'
      };
      _this.Trix.config.attachments.preview.caption = {
        name: false,
        size: false
      };
    }

    return _this;
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1___default()(RichTextEditor, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (!this.state.id) {
        this.setState({
          id: (0,uuid__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)()
        });
      } else if (!this.isReady) {
        this.initialize();
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(oldProps) {
      if (!this.isReady) {
        this.initialize();
      } else if (oldProps.reset !== this.props.reset) {
        this.editorRef.current.editor.loadHTML('');
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.isReady) {
        this.editorRef.current.removeEventListener('trix-change', this.handleChange);
        this.editorRef.current.removeEventListener('trix-attachment-add', this.handleUpload);
        this.editorRef.current.removeEventListener('trix-attachment-add', this.handleFileAccept);
        this.editorRef.current.removeEventListener('trix-action-invoke', this.trixActionInvoke);
      }
    }
  }, {
    key: "getEditor",
    value: function getEditor() {
      return this.editorRef.current.editor;
    }
  }, {
    key: "autolink",
    value:
    /** Automatically create anchors with hrefs for links */
    function autolink() {
      var _this2 = this;

      var linkRegex = new RegExp("(https?://\\S+\\.\\S+)\\s", 'ig');
      var editor = this.getEditor();
      var content = editor.getDocument().toString();
      var match;

      while (match = linkRegex.exec(content)) {
        var url = match[1];

        if ((0,validator__WEBPACK_IMPORTED_MODULE_20__.isURL)(url)) {
          (function () {
            var position = match.index;

            var urlLength = _this2.autolinkDelimiter(url);

            var range = [position, position + urlLength];
            var hrefAtRange = editor.getDocument().getCommonAttributesAtRange(range).href;
            var newURL = url.slice(0, urlLength);

            if (hrefAtRange !== newURL) {
              _this2.updateInRange(editor, range, 0, function () {
                if (editor.canActivateAttribute('href')) {
                  editor.activateAttribute('href', newURL);
                }
              });
            }
          })();
        }
      }
    }
    /** A helper used by autolink to find where the url actually ends
     * Credits:
     * https://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37
     * https://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58
     */

  }, {
    key: "updateInRange",
    value:
    /** A trix helper that will apply func in range then restore base range when it's done */
    function updateInRange(editor, range) {
      var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var updateFunc = arguments.length > 3 ? arguments[3] : undefined;
      var baseRange = editor.getSelectedRange();
      editor.setSelectedRange(range);
      updateFunc();
      editor.setSelectedRange([baseRange[0] + offset, baseRange[1] + offset]);
    }
    /** ---- Render ---- */

  }, {
    key: "render",
    value: function render() {
      var _this$props4 = this.props,
          defaultValue = _this$props4.defaultValue,
          withStickyToolbar = _this$props4.withStickyToolbar,
          toolbarTop = _this$props4.toolbarTop,
          toolbarOffsetY = _this$props4.toolbarOffsetY,
          toolbarBackgroundColor = _this$props4.toolbarBackgroundColor,
          autoFocus = _this$props4.autoFocus,
          placeholder = _this$props4.placeholder,
          editorMinHeight = _this$props4.editorMinHeight,
          withBorders = _this$props4.withBorders,
          inputName = _this$props4.inputName,
          disabled = _this$props4.disabled,
          error = _this$props4.error,
          fontSize = _this$props4.fontSize,
          value = _this$props4.value,
          version = _this$props4.version,
          showCount = _this$props4.showCount,
          maxLength = _this$props4.maxLength,
          editorMaxHeight = _this$props4.editorMaxHeight;
      return !this.state.id ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
        maxHeight: editorMaxHeight ? editorMaxHeight + 56 : undefined,
        height: editorMinHeight ? editorMinHeight + 56 : 200
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(TrixEditorContainer, {
        withStickyToolbar: withStickyToolbar,
        toolbarTop: toolbarTop,
        toolbarOffsetY: toolbarOffsetY,
        toolbarBackgroundColor: toolbarBackgroundColor,
        editorMinHeight: editorMinHeight,
        editorMaxHeight: editorMaxHeight,
        withBorders: withBorders,
        version: version,
        isDisabled: disabled,
        error: error,
        "data-cy": this.props['data-cy'],
        ref: this.mainContainerRef,
        children: [this.state.error && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_MessageBox__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
          type: "error",
          mb: "36px",
          withIcon: true,
          children: this.state.error.toString()
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("input", {
          id: this.state.id,
          value: value || defaultValue,
          type: "hidden",
          name: inputName
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_HTMLContent__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
          fontSize: fontSize,
          children: !showCount ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("trix-editor", {
            ref: this.editorRef,
            input: this.state.id,
            autofocus: autoFocus ? true : undefined,
            placeholder: placeholder
          }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            position: "relative",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("trix-editor", {
              ref: this.editorRef,
              input: this.state.id,
              autofocus: autoFocus ? true : undefined,
              placeholder: placeholder
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
              position: "absolute",
              bottom: "1em",
              right: "1em",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(_StyledTag__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                textTransform: "uppercase",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("span", {
                  children: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .stripHTML */ .Cb)(value || defaultValue).length
                }), maxLength && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("span", {
                  children: [" / ", maxLength]
                })]
              })
            })]
          })
        })]
      });
    }
  }]);

  return RichTextEditor;
}(react__WEBPACK_IMPORTED_MODULE_8__.Component);

_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_6___default()(RichTextEditor, "defaultProps", {
  withStickyToolbar: false,
  toolbarTop: 0,
  toolbarOffsetY: -62,
  // Default Trix toolbar height
  inputName: 'content',
  toolbarBackgroundColor: 'white',
  version: 'default',
  'data-cy': 'RichTextEditor',
  videoEmbedEnabled: false
});


RichTextEditor.__docgenInfo = {
  "description": "A React wrapper around the Trix library to edit rich text.\nProduces HTML and clear text.",
  "methods": [{
    "name": "getEditor",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "initialize",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "replaceEmbeddedIFrames",
    "docblock": "---- Trix handlers ----",
    "modifiers": [],
    "params": [{
      "name": "value"
    }],
    "returns": null,
    "description": "---- Trix handlers ----"
  }, {
    "name": "trixEmbed",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "trixActionInvoke",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "constructVideoEmbedURL",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }, {
      "name": "id",
      "type": null
    }],
    "returns": null
  }, {
    "name": "parseServiceLink",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "videoLink",
      "type": null
    }],
    "returns": null
  }, {
    "name": "embedIframe",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "videoLink",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleFileAccept",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleUpload",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleLink",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "autolink",
    "docblock": "Automatically create anchors with hrefs for links",
    "modifiers": [],
    "params": [],
    "returns": null,
    "description": "Automatically create anchors with hrefs for links"
  }, {
    "name": "autolinkDelimiter",
    "docblock": "A helper used by autolink to find where the url actually ends\nCredits:\nhttps://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37\nhttps://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58",
    "modifiers": [],
    "params": [{
      "name": "url"
    }],
    "returns": null,
    "description": "A helper used by autolink to find where the url actually ends\nCredits:\nhttps://github.com/github/cmark-gfm/blob/36c1553d2a1f04dc1628e76b18490edeff78b8d0/extensions/autolink.c#L37\nhttps://github.com/vmg/redcarpet/blob/92a7b3ae2241b862e9bf45e0af3cf53ebdfb0afb/ext/redcarpet/autolink.c#L58"
  }, {
    "name": "updateInRange",
    "docblock": "A trix helper that will apply func in range then restore base range when it's done",
    "modifiers": [],
    "params": [{
      "name": "editor"
    }, {
      "name": "range"
    }, {
      "name": "offset"
    }, {
      "name": "updateFunc"
    }],
    "returns": null,
    "description": "A trix helper that will apply func in range then restore base range when it's done"
  }],
  "displayName": "RichTextEditor",
  "props": {
    "withStickyToolbar": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "Whether the toolbar should stick to the top",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "toolbarTop": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "If position is sticky, this prop defines the `top` property. Support responsive arrays",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "toolbarOffsetY": {
      "defaultValue": {
        "value": "-62",
        "computed": false
      },
      "description": "Useful to compensate the height of the toolbar when editing inline",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "inputName": {
      "defaultValue": {
        "value": "'content'",
        "computed": false
      },
      "description": "A name for the input",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "toolbarBackgroundColor": {
      "defaultValue": {
        "value": "'white'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "version": {
      "defaultValue": {
        "value": "'default'",
        "computed": false
      },
      "description": "This component is borderless by default. Set this to `true` to change that.",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'default'",
          "computed": false
        }, {
          "value": "'simplified'",
          "computed": false
        }]
      },
      "required": false
    },
    "data-cy": {
      "defaultValue": {
        "value": "'RichTextEditor'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "videoEmbedEnabled": {
      "defaultValue": {
        "value": "false",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "id": {
      "description": "If not provided, an id will be automatically generated which will require a component update",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "defaultValue": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "placeholder": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "kind": {
      "description": "A unique identified for the category of uploaded files. Required if version is not \"simplified\"",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "fontSize": {
      "description": "Font size for the text",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "autoFocus": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onChange": {
      "description": "Called when text is changed with html content as first param and text content as second param",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "reset": {
      "description": "Change this prop to reset the value",
      "type": {
        "name": "any"
      },
      "required": false
    },
    "showCount": {
      "description": "If true, max text length will be displayed at the bottom right",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "maxLength": {
      "description": "max length which is allowed",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "withBorders": {
      "description": "This component is borderless by default. Set this to `true` to change that.",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "disabled": {
      "description": "Whether the field should be disabled",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "editorMinHeight": {
      "description": "Min height for the full component",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "editorMaxHeight": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }, {
          "name": "array"
        }]
      },
      "required": false
    },
    "error": {
      "description": "If truthy, will display a red outline",
      "type": {
        "name": "any"
      },
      "required": false
    },
    "setUploading": {
      "description": "Called when an image is being uploaded to set a boolean",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};

/***/ }),

/***/ 32606:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(86896);
/* harmony import */ var _SearchForm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72427);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85893);



var _excluded = ["onSubmit", "defaultValue", "placeholder"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





var messages = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__.defineMessages)({
  searchPlaceholder: {
    id: "search.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "Search..."
    }]
  }
});
/**
 * A wrapper around `SearchForm` that holds state and interacts with parent
 * through `onSubmit`, rather than `onChange`.
 */

var SearchBar = function SearchBar(_ref) {
  var _onSubmit = _ref.onSubmit,
      defaultValue = _ref.defaultValue,
      placeholder = _ref.placeholder,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default()(_ref, _excluded);

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_3__.useState(defaultValue || ''),
      _React$useState2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default()(_React$useState, 2),
      value = _React$useState2[0],
      setValue = _React$useState2[1];

  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(); // Reset value when `defaultValue` change, to handle reset filters

  react__WEBPACK_IMPORTED_MODULE_3__.useEffect(function () {
    setValue(defaultValue || '');
  }, [defaultValue]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SearchForm__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, _objectSpread({
    placeholder: placeholder || intl.formatMessage(messages.searchPlaceholder),
    value: value,
    onChange: setValue,
    onSubmit: function onSubmit(event) {
      event.preventDefault();
      var searchInput = event.target.elements.q;

      _onSubmit(searchInput.value || null);
    }
  }, props));
};

SearchBar.__docgenInfo = {
  "description": "A wrapper around `SearchForm` that holds state and interacts with parent\nthrough `onSubmit`, rather than `onChange`.",
  "methods": [],
  "displayName": "SearchBar",
  "props": {
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "defaultValue": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "placeholder": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (SearchBar);

/***/ }),

/***/ 32631:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67294);
/* harmony import */ var _styled_system_theme_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50056);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(52015);
/* harmony import */ var _Container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69078);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97274);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85893);



var _excluded = ["append", "prepend", "disabled", "success", "error", "maxWidth", "containerProps", "prependProps", "appendProps", "innerRef", "autoFocus", "overflow"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var InputContainer = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .ZP)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z).withConfig({
  displayName: "StyledInputGroup__InputContainer",
  componentId: "sc-1jf4f2r-0"
})(["&:hover{border-color:", ";}&:focus-within{border-color:", ";}input{border:none;outline:none;box-shadow:none;}input:focus ~ div svg{color:", ";}"], (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_4__/* .themeGet */ .R)('colors.primary.300'), (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_4__/* .themeGet */ .R)('colors.primary.500'), (0,_styled_system_theme_get__WEBPACK_IMPORTED_MODULE_4__/* .themeGet */ .R)('colors.primary.300'));

var getColor = function getColor(_ref) {
  var error = _ref.error,
      success = _ref.success;

  if (error) {
    return 'red.300';
  }

  if (success) {
    return 'green.300';
  }

  return 'black.800';
};

var getBgColor = function getBgColor(_ref2) {
  var error = _ref2.error,
      focused = _ref2.focused,
      success = _ref2.success;

  if (focused) {
    return 'primary.100';
  }

  if (error) {
    return 'red.100';
  }

  if (success) {
    return 'green.100';
  }

  return 'black.50';
};

var getBorderColor = function getBorderColor(_ref3) {
  var error = _ref3.error,
      focused = _ref3.focused,
      success = _ref3.success;

  if (focused) {
    return 'primary.300';
  }

  if (error) {
    return 'red.500';
  }

  if (success) {
    return 'green.300';
  }

  return 'black.300';
};
/**
 * A styled input with a prepended or appended field element.
 * @see See [StyledInput](/#!/StyledInput) for details about props passed to it
 */


var StyledInputGroup = function StyledInputGroup(_ref4) {
  var append = _ref4.append,
      prepend = _ref4.prepend,
      disabled = _ref4.disabled,
      success = _ref4.success,
      error = _ref4.error,
      maxWidth = _ref4.maxWidth,
      containerProps = _ref4.containerProps,
      prependProps = _ref4.prependProps,
      appendProps = _ref4.appendProps,
      innerRef = _ref4.innerRef,
      autoFocus = _ref4.autoFocus,
      overflow = _ref4.overflow,
      inputProps = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default()(_ref4, _excluded);

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false),
      focused = _useState[0],
      setFocus = _useState[1];

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(InputContainer, _objectSpread(_objectSpread({
      bg: disabled ? 'black.50' : 'white.full',
      maxWidth: maxWidth,
      border: "1px solid",
      borderColor: getBorderColor({
        error: error,
        focused: focused,
        success: success
      }),
      borderRadius: "4px",
      display: "flex",
      alignItems: "center",
      lineHeight: "1.5"
    }, containerProps), {}, {
      children: [prepend && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, _objectSpread(_objectSpread({
        fontSize: "14px",
        borderRadius: "4px 0 0 4px",
        p: 2,
        color: getColor({
          error: error,
          success: success
        }),
        maxHeight: "100%",
        whiteSpace: "nowrap"
      }, prependProps), {}, {
        bg: disabled && 'black.50' || lodash_get__WEBPACK_IMPORTED_MODULE_2___default()(prependProps, 'bg') || getBgColor({
          error: error,
          focused: focused,
          success: success
        }),
        children: prepend
      })), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_StyledInput__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, _objectSpread(_objectSpread({
        bare: true,
        autoFocus: autoFocus,
        color: getColor({
          error: error,
          success: success
        }),
        type: "text",
        overflow: overflow || 'scroll',
        fontSize: "14px",
        flex: "1 1 auto",
        disabled: disabled,
        py: "0",
        px: 2,
        maxHeight: "100%",
        error: error,
        minWidth: "0",
        width: "100%",
        ref: innerRef
      }, inputProps), {}, {
        onFocus: function onFocus(e) {
          setFocus(true);

          if (inputProps && inputProps.onFocus) {
            inputProps.onFocus(e);
          }
        },
        onBlur: function onBlur(e) {
          setFocus(false);

          if (inputProps && inputProps.onBlur) {
            inputProps.onBlur(e);
          }
        }
      })), append && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Container__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, _objectSpread(_objectSpread({
        borderRadius: "4px 0 0 4px",
        p: 2,
        color: getColor({
          error: error,
          success: success
        }),
        fontSize: "14px"
      }, appendProps), {}, {
        bg: getBgColor({
          error: error,
          focused: focused,
          success: success
        }),
        children: append
      }))]
    })), Boolean(error) && typeof error !== 'boolean' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__/* .Span */ .Dr, {
      display: "block",
      color: "red.500",
      pt: 2,
      fontSize: "10px",
      children: error
    })]
  });
};

StyledInputGroup.__docgenInfo = {
  "description": "A styled input with a prepended or appended field element.\n@see See [StyledInput](/#!/StyledInput) for details about props passed to it",
  "methods": [],
  "displayName": "StyledInputGroup",
  "props": {
    "append": {
      "description": "Text shown after input",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }, {
          "name": "element"
        }]
      },
      "required": false
    },
    "prepend": {
      "description": "Text shown before input",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }, {
          "name": "element"
        }]
      },
      "required": false
    },
    "disabled": {
      "description": "Show disabled state for field",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "error": {
      "description": "Show error state for field, and a message error if given a string",
      "type": {
        "name": "union",
        "value": [{
          "name": "bool"
        }, {
          "name": "string"
        }]
      },
      "required": false
    },
    "success": {
      "description": "Show success state for field",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "type": {
      "description": "Passed to internal StyledInput",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "containerProps": {
      "description": "Props passed to the `InputContainer`",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "prependProps": {
      "description": "Props passed to the prepend `Container`",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "appendProps": {
      "description": "Props passed to the append `Container`",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "maxWidth": {
      "description": "Max Width",
      "type": {
        "name": "union",
        "value": [{
          "name": "number"
        }, {
          "name": "string"
        }]
      },
      "required": false
    },
    "autoFocus": {
      "description": "Whether to auto focus this element *",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "overflow": {
      "description": "Specifies what should happen if content overflows an element's box *",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "innerRef": {
      "description": "",
      "type": {
        "name": "any"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (StyledInputGroup);

/***/ }),

/***/ 93765:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "t": function() { return /* binding */ parseAmountRange; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(86896);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(17632);
/* harmony import */ var _StyledSelectFilter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52847);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(85893);




var _excluded = ["currency", "onChange", "value", "steps"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }






var OPTION_LABELS = (0,react_intl__WEBPACK_IMPORTED_MODULE_8__.defineMessages)({
  ALL: {
    id: "Amount.AllShort",
    defaultMessage: [{
      "type": 0,
      "value": "All"
    }]
  },
  rangeFrom: {
    id: "Amount.RangeFrom",
    defaultMessage: [{
      "type": 1,
      "value": "minAmount"
    }, {
      "type": 0,
      "value": " and above"
    }]
  },
  rangeFromTo: {
    id: "Amount.RangeFromTo",
    defaultMessage: [{
      "type": 1,
      "value": "minAmount"
    }, {
      "type": 0,
      "value": " to "
    }, {
      "type": 1,
      "value": "maxAmount"
    }]
  }
});
var parseAmountRange = function parseAmountRange(strValue) {
  if (!strValue) {
    return [];
  } else if (strValue.endsWith('+')) {
    return [parseInt(strValue.slice(0, -1))];
  } else {
    var _strValue$split = strValue.split('-'),
        _strValue$split2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default()(_strValue$split, 2),
        minStr = _strValue$split2[0],
        maxStr = _strValue$split2[1];

    return [parseInt(minStr), parseInt(maxStr)];
  }
};

var getOption = function getOption(intl, currency, minAmount, maxAmount) {
  var locale = intl.locale;
  return {
    value: maxAmount ? "".concat(minAmount, "-").concat(maxAmount) : "".concat(minAmount, "+"),
    label: intl.formatMessage(OPTION_LABELS[maxAmount ? 'rangeFromTo' : 'rangeFrom'], {
      minAmount: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_5__/* .formatCurrency */ .xG)(minAmount * 100, currency, {
        precision: 0,
        locale: locale
      }),
      maxAmount: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_5__/* .formatCurrency */ .xG)(maxAmount * 100, currency, {
        precision: 0,
        locale: locale
      })
    })
  };
};

var AmountFilter = function AmountFilter(_ref) {
  var currency = _ref.currency,
      _onChange = _ref.onChange,
      value = _ref.value,
      steps = _ref.steps,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default()(_ref, _excluded);

  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)();
  var allExpensesOption = {
    label: intl.formatMessage(OPTION_LABELS.ALL),
    value: 'ALL'
  };
  var options = react__WEBPACK_IMPORTED_MODULE_4__.useMemo(function () {
    return [allExpensesOption].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1___default()(steps.map(function (step, idx) {
      return getOption(intl, currency, step, steps[idx + 1]);
    })));
  }, [steps]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_StyledSelectFilter__WEBPACK_IMPORTED_MODULE_6__/* .StyledSelectFilter */ .V, _objectSpread({
    inputId: "expenses-amount-filter",
    "data-cy": "expenses-filter-amount",
    value: value ? getOption.apply(void 0, [intl, currency].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1___default()(parseAmountRange(value)))) : allExpensesOption,
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    options: options
  }, props));
};

AmountFilter.defaultProps = {
  steps: [0, 50, 500, 5000]
};
AmountFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AmountFilter",
  "props": {
    "steps": {
      "defaultValue": {
        "value": "[0, 50, 500, 5000]",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "number"
        }
      },
      "required": false
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (AmountFilter);

/***/ }),

/***/ 4496:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": function() { return /* binding */ SocialLinksFormField; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89734);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(67294);
/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(60887);
/* harmony import */ var _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(45587);
/* harmony import */ var _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(24285);
/* harmony import */ var _styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(33007);
/* harmony import */ var _styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(74684);
/* harmony import */ var _styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(93619);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(44012);
/* harmony import */ var _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97965);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97079);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16159);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(87268);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97274);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(66943);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(85893);





var _excluded = ["value", "onChange"];

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















function SocialLinksFormField(_ref) {
  var _ref$value = _ref.value,
      value = _ref$value === void 0 ? [] : _ref$value,
      touched = _ref.touched,
      onChange = _ref.onChange;

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_5__.useState(value.map(function (_ref2, i) {
    var url = _ref2.url,
        type = _ref2.type;
    return {
      url: url,
      type: type,
      sortId: i.toString()
    };
  })),
      _React$useState2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default()(_React$useState, 2),
      items = _React$useState2[0],
      setItems = _React$useState2[1];

  react__WEBPACK_IMPORTED_MODULE_5__.useEffect(function () {
    onChange(items.map(function (_ref3) {
      var url = _ref3.url,
          type = _ref3.type;
      return {
        url: url,
        type: type
      };
    }));
  }, [items]);
  var onItemChange = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function (socialLink, sortId) {
    var newItems = items.map(function (item) {
      if (item.sortId === sortId) {
        return _objectSpread(_objectSpread({}, item), socialLink);
      }

      return item;
    });
    setItems(newItems);
  }, [items, onChange]);
  var onRemoveItem = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function (sortId) {
    var newItems = items.filter(function (item) {
      return item.sortId !== sortId;
    });
    setItems(newItems);
  }, [items, onChange]);
  var addItem = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function () {
    var newItems = [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1___default()(items), [{
      url: '',
      type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE */ .Xu.WEBSITE
    }]).map(function (item, i) {
      return _objectSpread(_objectSpread({}, item), {}, {
        sortId: i.toString()
      });
    });
    setItems(newItems);
  }, [items, onChange]);

  function handleDragEnd(event) {
    var active = event.active,
        over = event.over;

    if (active.id !== over.id) {
      var oldIndex = items.findIndex(function (item) {
        return item.sortId === active.id;
      });
      var newIndex = items.findIndex(function (item) {
        return item.sortId === over.id;
      });
      var newItems = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_7__/* .arrayMove */ .Rp)(items, oldIndex, newIndex);
      setItems(newItems);
    }
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_dnd_kit_core__WEBPACK_IMPORTED_MODULE_6__/* .DndContext */ .LB, {
    collisionDetection: _dnd_kit_core__WEBPACK_IMPORTED_MODULE_6__/* .closestCenter */ .pE,
    onDragEnd: handleDragEnd,
    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      width: "100%",
      flexDirection: "column",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_7__/* .SortableContext */ .Fo, {
        items: items.map(function (item) {
          return item.sortId;
        }),
        strategy: _dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_7__/* .verticalListSortingStrategy */ .qw,
        children: [items.map(function (socialLink) {
          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(SocialLinkItem, {
            error: touched && !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_10__/* .isValidUrl */ .jv)(socialLink.url),
            value: socialLink,
            onChange: onItemChange,
            onRemoveItem: onRemoveItem
          }, socialLink.sortId);
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
          mt: 2,
          justifyContent: "center",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            disabled: value.length >= 10,
            type: "button",
            buttonSize: "tiny",
            buttonStyle: "standard",
            onClick: addItem,
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_styled_icons_fa_solid_Plus__WEBPACK_IMPORTED_MODULE_17__/* .Plus */ .v, {
              size: "10px"
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_15__/* .Span */ .Dr, {
              ml: 2,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {
                id: "FH4TgN",
                defaultMessage: [{
                  "type": 0,
                  "value": "Add social link"
                }]
              })
            })]
          })
        })]
      })
    })
  });
}

function SocialLinkTypePicker(_ref4) {
  var value = _ref4.value,
      _onChange = _ref4.onChange,
      pickerProps = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_0___default()(_ref4, _excluded);

  var options = [{
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE.toString */ .Xu.WEBSITE.toString(),
    label: 'Website'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCORD.toString */ .Xu.DISCORD.toString(),
    label: 'Discord'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.FACEBOOK.toString */ .Xu.FACEBOOK.toString(),
    label: 'Facebook'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITHUB.toString */ .Xu.GITHUB.toString(),
    label: 'GitHub'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITLAB.toString */ .Xu.GITLAB.toString(),
    label: 'GitLab'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GIT.toString */ .Xu.GIT.toString(),
    label: 'Git Repository'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.INSTAGRAM.toString */ .Xu.INSTAGRAM.toString(),
    label: 'Instagram'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MASTODON.toString */ .Xu.MASTODON.toString(),
    label: 'Mastodon'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MATTERMOST.toString */ .Xu.MATTERMOST.toString(),
    label: 'Mattermost'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TUMBLR.toString */ .Xu.TUMBLR.toString(),
    label: 'Tumblr'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TWITTER.toString */ .Xu.TWITTER.toString(),
    label: 'Twitter'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.YOUTUBE.toString */ .Xu.YOUTUBE.toString(),
    label: 'YouTube'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MEETUP.toString */ .Xu.MEETUP.toString(),
    label: 'Meetup'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.LINKEDIN.toString */ .Xu.LINKEDIN.toString(),
    label: 'LinkedIn'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.SLACK.toString */ .Xu.SLACK.toString(),
    label: 'Slack'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCOURSE.toString */ .Xu.DISCOURSE.toString(),
    label: 'Discourse'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.PIXELFED.toString */ .Xu.PIXELFED.toString(),
    label: 'Pixelfed'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GHOST.toString */ .Xu.GHOST.toString(),
    label: 'Ghost'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.PEERTUBE.toString */ .Xu.PEERTUBE.toString(),
    label: 'PeerTube'
  }, {
    value: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TIKTOK.toString */ .Xu.TIKTOK.toString(),
    label: 'TikTok'
  }];
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_StyledSelect__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, pickerProps), {}, {
    "data-cy": "social-link-type-picker",
    value: options.find(function (o) {
      return o.value === (value === null || value === void 0 ? void 0 : value.toString());
    }),
    defaultValue: options.find(function (o) {
      return o.value === _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.WEBSITE.toString */ .Xu.WEBSITE.toString();
    }),
    onChange: function onChange(_ref5) {
      var value = _ref5.value;
      return _onChange(value);
    },
    options: lodash_sortBy__WEBPACK_IMPORTED_MODULE_4___default()(options, 'label')
  }));
}

function SocialLinkItem(_ref6) {
  var value = _ref6.value,
      error = _ref6.error,
      onChange = _ref6.onChange,
      onRemoveItem = _ref6.onRemoveItem;

  var _useSortable = (0,_dnd_kit_sortable__WEBPACK_IMPORTED_MODULE_7__/* .useSortable */ .nB)({
    id: value.sortId
  }),
      attributes = _useSortable.attributes,
      listeners = _useSortable.listeners,
      setNodeRef = _useSortable.setNodeRef,
      transform = _useSortable.transform,
      transition = _useSortable.transition;

  var style = {
    transform: _dnd_kit_utilities__WEBPACK_IMPORTED_MODULE_8__/* .CSS.Transform.toString */ .ux.Transform.toString(transform),
    transition: transition
  };
  var onFieldChange = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function (field, fieldValue) {
    onChange(_objectSpread(_objectSpread({}, value), {}, _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2___default()({}, field, fieldValue)), value.sortId);
  }, [onChange, value]);
  var onUrlChange = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function (e) {
    var _typeFromUrl;

    var newUrl = e.target.value;
    onChange({
      type: (_typeFromUrl = typeFromUrl(newUrl)) !== null && _typeFromUrl !== void 0 ? _typeFromUrl : value.type,
      url: newUrl
    }, value.sortId);
  }, [onChange, value]);
  var onUrlBlur = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function () {
    var hasSchemaRegexp = /^[^:]+:\/\//;

    if (value.url.trim() === '') {
      return;
    }

    if (!value.url.match(hasSchemaRegexp)) {
      onChange(_objectSpread(_objectSpread({}, value), {}, {
        url: "https://".concat(value.url)
      }), value.sortId);
    }
  }, [onChange, value]);
  var onRemove = react__WEBPACK_IMPORTED_MODULE_5__.useCallback(function () {
    onRemoveItem(value.sortId);
  }, [onRemoveItem, value.sortId]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
    ref: setNodeRef,
    style: style,
    alignItems: "center",
    my: 1,
    gap: "5px",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div", _objectSpread(_objectSpread(_objectSpread({}, listeners), attributes), {}, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_styled_icons_material_DragIndicator__WEBPACK_IMPORTED_MODULE_19__/* .DragIndicator */ .N, {
        size: "15px",
        style: {
          cursor: 'grab'
        }
      })
    })), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Flex */ .kC, {
      flexGrow: 1,
      flexWrap: "wrap",
      gap: "5px",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_11__/* .Box */ .xu, {
        width: ['100%', '120px'],
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(SocialLinkTypePicker, {
          value: value.type,
          onChange: function onChange(type) {
            return onFieldChange('type', type);
          }
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_StyledInput__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .ZP, {
        autoFocus: value.url === '',
        error: error,
        flexGrow: 1,
        value: value.url,
        onBlur: onUrlBlur,
        onChange: onUrlChange,
        placeholder: "https://opencollective.com/"
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_StyledButton__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
      tabIndex: -1,
      padding: 0,
      width: "20px",
      height: "20px",
      type: "button",
      buttonStyle: "borderless",
      onClick: onRemove,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_styled_icons_fa_solid_Times__WEBPACK_IMPORTED_MODULE_20__/* .Times */ .u, {
        size: "10px"
      })
    })]
  });
}

var knownSocialLinkDomains = [{
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.DISCORD */ .Xu.DISCORD,
  regexp: /^(https:\/\/)?discord.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.FACEBOOK */ .Xu.FACEBOOK,
  regexp: /^(https:\/\/)?(www\.)?facebook.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITHUB */ .Xu.GITHUB,
  regexp: /^(https:\/\/)?github.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.GITLAB */ .Xu.GITLAB,
  regexp: /^(https:\/\/)?gitlab.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.INSTAGRAM */ .Xu.INSTAGRAM,
  regexp: /^(https:\/\/)?(www\.)?instagram.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.LINKEDIN */ .Xu.LINKEDIN,
  regexp: /^(https:\/\/)?(www\.)?linkedin.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.MEETUP */ .Xu.MEETUP,
  regexp: /^(https:\/\/)?meetup.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.SLACK */ .Xu.SLACK,
  regexp: /^(https:\/\/)?[^.]+.?slack.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TIKTOK */ .Xu.TIKTOK,
  regexp: /^(https:\/\/)?(www\.)?tiktok.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TUMBLR */ .Xu.TUMBLR,
  regexp: /^(https:\/\/)?[^.]+\.?tumblr.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.TWITTER */ .Xu.TWITTER,
  regexp: /^(https:\/\/)?twitter.com/
}, {
  type: _lib_graphql_types_v2_graphql__WEBPACK_IMPORTED_MODULE_9__/* .SocialLinkType.YOUTUBE */ .Xu.YOUTUBE,
  regexp: /^(https:\/\/)?(www\.)?youtube.com/
}];

function typeFromUrl(url) {
  var _iterator = _createForOfIteratorHelper(knownSocialLinkDomains),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var knownDomain = _step.value;

      if (url.match(knownDomain.regexp)) {
        return knownDomain.type;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return null;
}

SocialLinksFormField.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SocialLinksFormField",
  "props": {
    "value": {
      "defaultValue": {
        "value": "[]",
        "computed": false
      },
      "required": false,
      "tsType": {
        "name": "Array",
        "elements": [{
          "name": "SocialLink"
        }],
        "raw": "SocialLink[]"
      },
      "description": ""
    },
    "touched": {
      "required": false,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "onChange": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(value: SocialLinkInput[]) => void",
        "signature": {
          "arguments": [{
            "name": "value",
            "type": {
              "name": "Array",
              "elements": [{
                "name": "SocialLinkInput"
              }],
              "raw": "SocialLinkInput[]"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    }
  }
};

/***/ }),

/***/ 46217:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "H": function() { return /* binding */ formatAccountDetails; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_toUpper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3945);
/* harmony import */ var lodash_toUpper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_toUpper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18029);
/* harmony import */ var lodash_startCase__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_startCase__WEBPACK_IMPORTED_MODULE_3__);




var formatAccountDetails = function formatAccountDetails(payoutMethodData) {
  var ignoredKeys = ['type', 'isManualBankTransfer', 'currency'];
  var labels = {
    abartn: 'Routing Number: ',
    firstLine: ''
  };

  var formatKey = function formatKey(s) {
    if (labels[s] !== undefined) {
      return labels[s];
    }

    if (lodash_toUpper__WEBPACK_IMPORTED_MODULE_2___default()(s) === s) {
      return "".concat(s, ": ");
    }

    return "".concat(lodash_startCase__WEBPACK_IMPORTED_MODULE_3___default()(s), ": ");
  };

  var renderObject = function renderObject(object) {
    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    return Object.entries(object).sort(function (a) {
      return typeof a[1] === 'object' ? 1 : -1;
    }).reduce(function (acc, _ref) {
      var _ref2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default()(_ref, 2),
          key = _ref2[0],
          value = _ref2[1];

      if (ignoredKeys.includes(key)) {
        return acc;
      }

      if (typeof value === 'object') {
        if (key === 'details') {
          return [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(acc), _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(renderObject(value, '')));
        }

        return [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(acc), [formatKey(key)], _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(renderObject(value, '  ')));
      }

      return [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(acc), ["".concat(prefix).concat(formatKey(key)).concat(value)]);
    }, []);
  };

  var lines = renderObject(payoutMethodData);
  return lines.join('\n');
};

/***/ }),

/***/ 47318:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": function() { return /* binding */ expenses_ExpensesFilters; }
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__(930);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js
var message = __webpack_require__(44012);
// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js + 3 modules
var styled_components_browser_esm = __webpack_require__(52015);
// EXTERNAL MODULE: ./lib/constants/expense-status.ts
var expense_status = __webpack_require__(38083);
// EXTERNAL MODULE: ./lib/date-utils.js
var date_utils = __webpack_require__(15078);
// EXTERNAL MODULE: ./components/budget/filters/AmountFilter.js
var AmountFilter = __webpack_require__(93765);
// EXTERNAL MODULE: ./components/filters/PeriodFilter.tsx + 1 modules
var PeriodFilter = __webpack_require__(4062);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/expenses/filters/ExpensesOrder.js
var ExpensesOrder = __webpack_require__(78877);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/toConsumableArray.js
var toConsumableArray = __webpack_require__(7980);
var toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(3323);
var objectWithoutProperties_default = /*#__PURE__*/__webpack_require__.n(objectWithoutProperties);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/useIntl.js
var useIntl = __webpack_require__(86896);
// EXTERNAL MODULE: ./lib/constants/payout-method.js
var payout_method = __webpack_require__(56508);
// EXTERNAL MODULE: ./lib/i18n/payout-method-type.js
var payout_method_type = __webpack_require__(17133);
// EXTERNAL MODULE: ./lib/utils.js
var utils = __webpack_require__(97079);
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./components/expenses/filters/ExpensesPayoutTypeFilter.js



var _excluded = ["onChange", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var ExpensesPayoutTypeFilter = function ExpensesPayoutTypeFilter(_ref) {
  var _onChange = _ref.onChange,
      value = _ref.value,
      props = objectWithoutProperties_default()(_ref, _excluded);

  var intl = (0,useIntl/* default */.Z)();

  var getOption = function getOption(value) {
    return {
      label: (0,payout_method_type/* default */.Z)(intl, value),
      value: value
    };
  };

  var options = [getOption('ALL')].concat(toConsumableArray_default()(Object.values(payout_method/* PayoutMethodType */.Nk).map(getOption)));
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, _objectSpread({
    inputId: "expenses-payout-type-filter",
    options: options.sort(utils/* sortSelectOptions */.V_),
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    value: getOption(value || 'ALL')
  }, props));
};

ExpensesPayoutTypeFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpensesPayoutTypeFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "enum",
        "computed": true,
        "value": "Object.values(PayoutMethodType)"
      },
      "required": false
    }
  }
};
/* harmony default export */ var filters_ExpensesPayoutTypeFilter = (ExpensesPayoutTypeFilter);
// EXTERNAL MODULE: ./lib/i18n/expense.js
var expense = __webpack_require__(8480);
;// CONCATENATED MODULE: ./components/expenses/filters/ExpensesStatusFilter.js



var ExpensesStatusFilter_excluded = ["value", "onChange", "ignoredExpenseStatus"];

function ExpensesStatusFilter_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function ExpensesStatusFilter_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ExpensesStatusFilter_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ExpensesStatusFilter_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }








var IGNORED_EXPENSE_STATUS = [expense_status/* default.DRAFT */.Z.DRAFT, expense_status/* default.UNVERIFIED */.Z.UNVERIFIED];

var getOption = function getOption(intl, value) {
  return {
    label: (0,expense/* i18nExpenseStatus */.zr)(intl, value),
    value: value
  };
};

var getOptions = function getOptions(intl, ignoredExpenseStatus) {
  var filteredStatuses = ignoredExpenseStatus ? Object.values(expense_status/* default */.Z).filter(function (s) {
    return !ignoredExpenseStatus.includes(s);
  }) : Object.values(expense_status/* default */.Z);
  return ['ALL'].concat(toConsumableArray_default()(filteredStatuses), ['READY_TO_PAY']).map(function (status) {
    return getOption(intl, status);
  });
};

var ExpenseStatusFilter = function ExpenseStatusFilter(_ref) {
  var value = _ref.value,
      _onChange = _ref.onChange,
      _ref$ignoredExpenseSt = _ref.ignoredExpenseStatus,
      ignoredExpenseStatus = _ref$ignoredExpenseSt === void 0 ? IGNORED_EXPENSE_STATUS : _ref$ignoredExpenseSt,
      props = objectWithoutProperties_default()(_ref, ExpensesStatusFilter_excluded);

  var intl = (0,useIntl/* default */.Z)();
  var sortedOptions = react.useMemo(function () {
    return getOptions(intl, ignoredExpenseStatus).sort(utils/* sortSelectOptions */.V_);
  }, [ignoredExpenseStatus]);
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, ExpensesStatusFilter_objectSpread({
    inputId: "expenses-status-filter",
    "data-cy": "expenses-filter-status",
    options: sortedOptions,
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    value: getOption(intl, value || 'ALL')
  }, props));
};

ExpenseStatusFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpenseStatusFilter",
  "props": {
    "ignoredExpenseStatus": {
      "defaultValue": {
        "value": "[expenseStatus.DRAFT, expenseStatus.UNVERIFIED]",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "enum",
          "computed": true,
          "value": "Object.values(expenseStatus)"
        }
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "...Object.values(expenseStatus)",
          "computed": true
        }, {
          "value": "'READY_TO_PAY'",
          "computed": false
        }]
      },
      "required": false
    }
  }
};
/* harmony default export */ var ExpensesStatusFilter = (ExpenseStatusFilter);
// EXTERNAL MODULE: ./lib/constants/expenseTypes.ts
var expenseTypes = __webpack_require__(19878);
;// CONCATENATED MODULE: ./components/expenses/filters/ExpensesTypeFilter.js


var ExpensesTypeFilter_excluded = ["onChange", "value"];

function ExpensesTypeFilter_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function ExpensesTypeFilter_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ExpensesTypeFilter_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ExpensesTypeFilter_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var ExpenseTypeFilter = function ExpenseTypeFilter(_ref) {
  var _onChange = _ref.onChange,
      value = _ref.value,
      props = objectWithoutProperties_default()(_ref, ExpensesTypeFilter_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var getOption = function getOption(value) {
    return {
      label: (0,expense/* i18nExpenseType */.kD)(intl, value),
      value: value
    };
  };

  var expenseTypeKeys = Object.keys(expenseTypes/* default */.Z);
  expenseTypeKeys.unshift('ALL');
  var options = expenseTypeKeys.map(getOption);
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, ExpensesTypeFilter_objectSpread({
    inputId: "expenses-type-filter",
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    value: getOption(value || 'ALL'),
    options: options.sort(utils/* sortSelectOptions */.V_)
  }, props));
};

ExpenseTypeFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpenseTypeFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var ExpensesTypeFilter = (ExpenseTypeFilter);
;// CONCATENATED MODULE: ./components/expenses/ExpensesFilters.js


function ExpensesFilters_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function ExpensesFilters_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ExpensesFilters_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ExpensesFilters_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }















var FilterContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ExpensesFilters__FilterContainer",
  componentId: "sc-upgccp-0"
})(["margin-bottom:8px;flex:1 1 120px;"]);
var FilterLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "ExpensesFilters__FilterLabel",
  componentId: "sc-upgccp-1"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);

var ExpensesFilters = function ExpensesFilters(_ref) {
  var collective = _ref.collective,
      filters = _ref.filters,
      _onChange = _ref.onChange,
      ignoredExpenseStatus = _ref.ignoredExpenseStatus,
      _ref$showOrderFilter = _ref.showOrderFilter,
      showOrderFilter = _ref$showOrderFilter === void 0 ? true : _ref$showOrderFilter,
      _ref$wrap = _ref.wrap,
      wrap = _ref$wrap === void 0 ? true : _ref$wrap;

  var getFilterProps = function getFilterProps(name, valueModifier) {
    return {
      inputId: "expenses-filter-".concat(name),
      value: filters === null || filters === void 0 ? void 0 : filters[name],
      onChange: function onChange(value) {
        var preparedValue = valueModifier ? valueModifier(value) : value;

        _onChange(ExpensesFilters_objectSpread(ExpensesFilters_objectSpread({}, filters), {}, defineProperty_default()({}, name, value === 'ALL' ? null : preparedValue)));
      }
    };
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexWrap: ['wrap', null, wrap ? 'wrap' : 'nowrap'],
    gap: "18px",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-filter-type",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "expense.type",
          defaultMessage: [{
            "type": 0,
            "value": "Type"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(ExpensesTypeFilter, ExpensesFilters_objectSpread({}, getFilterProps('type')))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-filter-payout",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "Payout",
          defaultMessage: [{
            "type": 0,
            "value": "Payout"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(filters_ExpensesPayoutTypeFilter, ExpensesFilters_objectSpread({}, getFilterProps('payout')))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-filter-period",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "Period",
          defaultMessage: [{
            "type": 0,
            "value": "Period"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(PeriodFilter/* default */.Z, ExpensesFilters_objectSpread(ExpensesFilters_objectSpread({}, getFilterProps('period', date_utils/* encodeDateInterval */.EB)), {}, {
        minDate: collective.createdAt
      }))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-filter-amount",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "Fields.amount",
          defaultMessage: [{
            "type": 0,
            "value": "Amount"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(AmountFilter/* default */.Z, ExpensesFilters_objectSpread({
        currency: collective.currency
      }, getFilterProps('amount')))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-filter-status",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "expense.status",
          defaultMessage: [{
            "type": 0,
            "value": "Status"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(ExpensesStatusFilter, ExpensesFilters_objectSpread(ExpensesFilters_objectSpread({}, getFilterProps('status')), {}, {
        ignoredExpenseStatus: ignoredExpenseStatus
      }))]
    }), showOrderFilter && /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "expenses-order",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "expense.order",
          defaultMessage: [{
            "type": 0,
            "value": "Order"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(ExpensesOrder/* default */.Z, ExpensesFilters_objectSpread({}, getFilterProps('orderBy')))]
    })]
  });
};

ExpensesFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpensesFilters",
  "props": {
    "showOrderFilter": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "wrap": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filters": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "currency": {
            "name": "string",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "ignoredExpenseStatus": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "enum",
          "computed": true,
          "value": "Object.values(expenseStatus)"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var expenses_ExpensesFilters = (/*#__PURE__*/react.memo(ExpensesFilters));

/***/ }),

/***/ 11221:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67294);
/* harmony import */ var react_flip_move__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(10438);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(44012);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(52015);
/* harmony import */ var _lib_animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10066);
/* harmony import */ var _budget_ExpenseBudgetItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13467);
/* harmony import */ var _FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27596);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16159);
/* harmony import */ var _StyledCard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19156);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85893);


function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }













var ExpenseContainer = styled_components__WEBPACK_IMPORTED_MODULE_9__/* ["default"].div.withConfig */ .ZP.div.withConfig({
  displayName: "ExpensesList__ExpenseContainer",
  componentId: "sc-1tn2ydt-0"
})(["", ""], function (props) {
  return !props.isFirst && (0,styled_components__WEBPACK_IMPORTED_MODULE_9__/* .css */ .iv)(["border-top:1px solid #e6e8eb;"]);
});
var FooterContainer = styled_components__WEBPACK_IMPORTED_MODULE_9__/* ["default"].div.withConfig */ .ZP.div.withConfig({
  displayName: "ExpensesList__FooterContainer",
  componentId: "sc-1tn2ydt-1"
})(["padding:16px 27px;border-top:1px solid #e6e8eb;"]);
var FooterLabel = styled_components__WEBPACK_IMPORTED_MODULE_9__/* ["default"].span.withConfig */ .ZP.span.withConfig({
  displayName: "ExpensesList__FooterLabel",
  componentId: "sc-1tn2ydt-2"
})(["font-size:15px;margin-right:5px;text-transform:uppercase;"]);

var ExpensesTotal = function ExpensesTotal(_ref) {
  var collective = _ref.collective,
      host = _ref.host,
      expenses = _ref.expenses,
      expenseFieldForTotalAmount = _ref.expenseFieldForTotalAmount;

  var _React$useMemo = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(function () {
    var isApproximate = false;
    var total = 0;

    var _iterator = _createForOfIteratorHelper(expenses),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _expense$expenseField, _expense$expenseField2, _expense$expenseField3;

        var expense = _step.value;
        total += ((_expense$expenseField = expense[expenseFieldForTotalAmount]) === null || _expense$expenseField === void 0 ? void 0 : _expense$expenseField.valueInCents) || expense.amount;

        if ((_expense$expenseField2 = expense[expenseFieldForTotalAmount]) !== null && _expense$expenseField2 !== void 0 && (_expense$expenseField3 = _expense$expenseField2.exchangeRate) !== null && _expense$expenseField3 !== void 0 && _expense$expenseField3.isApproximate) {
          isApproximate = true;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return {
      total: total,
      isApproximate: isApproximate
    };
  }, [expenses]),
      total = _React$useMemo.total,
      isApproximate = _React$useMemo.isApproximate;

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
    children: [isApproximate && "~ ", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_FormattedMoneyAmount__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
      amount: total,
      currency: (collective === null || collective === void 0 ? void 0 : collective.currency) || (host === null || host === void 0 ? void 0 : host.currency),
      precision: 2
    })]
  });
};

var ExpensesList = function ExpensesList(_ref2) {
  var collective = _ref2.collective,
      host = _ref2.host,
      expenses = _ref2.expenses,
      isLoading = _ref2.isLoading,
      nbPlaceholders = _ref2.nbPlaceholders,
      isInverted = _ref2.isInverted,
      suggestedTags = _ref2.suggestedTags,
      view = _ref2.view,
      onDelete = _ref2.onDelete,
      onProcess = _ref2.onProcess,
      expenseFieldForTotalAmount = _ref2.expenseFieldForTotalAmount;

  if (!(expenses !== null && expenses !== void 0 && expenses.length) && !isLoading) {
    return null;
  }

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_StyledCard__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
    children: [isLoading ? _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(new Array(nbPlaceholders)).map(function (_, idx) {
      return (
        /*#__PURE__*/
        // eslint-disable-next-line react/no-array-index-key
        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(ExpenseContainer, {
          isFirst: !idx,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_budget_ExpenseBudgetItem__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
            isLoading: true
          })
        }, idx)
      );
    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_flip_move__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
      enterAnimation: "fade",
      leaveAnimation: "fade",
      disableAllAnimations: _lib_animations__WEBPACK_IMPORTED_MODULE_2__/* .DISABLE_ANIMATIONS */ .t,
      children: expenses.map(function (expense, idx) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(ExpenseContainer, {
          isFirst: !idx,
          "data-cy": "expense-".concat(expense.status),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_budget_ExpenseBudgetItem__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
            isInverted: isInverted,
            expense: expense,
            host: host,
            showProcessActions: true,
            view: view,
            onDelete: onDelete,
            onProcess: onProcess,
            suggestedTags: suggestedTags
          })
        }, expense.id);
      })
    }), !isLoading && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(FooterContainer, {
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
        flexDirection: ['row', 'column'],
        mt: [3, 0],
        flexWrap: "wrap",
        alignItems: ['center', 'flex-end'],
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Flex */ .kC, {
          my: 2,
          mr: [3, 0],
          minWidth: 100,
          justifyContent: "flex-end",
          "data-cy": "transaction-amount",
          flexDirection: "column",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_5__/* .Box */ .xu, {
            alignSelf: "flex-end",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(FooterLabel, {
              color: "black.500",
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
                id: "expense.page.total",
                defaultMessage: [{
                  "type": 0,
                  "value": "Page Total"
                }]
              }), ":"]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(FooterLabel, {
              color: "black.500",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(ExpensesTotal, {
                expenses: expenses,
                collective: collective,
                host: host,
                expenseFieldForTotalAmount: expenseFieldForTotalAmount
              })
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_7__.P, {
            fontSize: "12px",
            color: "black.600",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
              id: "expense.page.description",
              defaultMessage: [{
                "type": 0,
                "value": "Payment processor fees may apply."
              }]
            })
          })]
        })
      })
    })]
  });
};

ExpensesList.defaultProps = {
  nbPlaceholders: 10,
  view: 'public',
  expenseFieldForTotalAmount: 'amountInAccountCurrency'
};
ExpensesList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpensesList",
  "props": {
    "nbPlaceholders": {
      "defaultValue": {
        "value": "10",
        "computed": false
      },
      "description": "When `isLoading` is true, this sets the number of \"loadin\" items displayed",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "view": {
      "defaultValue": {
        "value": "'public'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'public'",
          "computed": false
        }, {
          "value": "'admin'",
          "computed": false
        }, {
          "value": "'submitter'",
          "computed": false
        }]
      },
      "required": false
    },
    "expenseFieldForTotalAmount": {
      "defaultValue": {
        "value": "'amountInAccountCurrency'",
        "computed": false
      },
      "description": "Defines the field in `expense` that holds the amount. Useful to display the right one based on the context for multi-currency expenses.",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isInverted": {
      "description": "Set this to true to invert who's displayed (payee or collective)",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "suggestedTags": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onProcess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "parent": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": true
              }
            },
            "required": false
          },
          "currency": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "expenses": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "id": {
              "name": "string",
              "required": true
            },
            "legacyId": {
              "name": "number",
              "required": true
            }
          }
        }
      },
      "required": false
    },
    "totalAmount": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (ExpensesList);

/***/ }),

/***/ 38884:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export msg */
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(36968);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_partition__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(43174);
/* harmony import */ var lodash_partition__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_partition__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21804);
/* harmony import */ var lodash_kebabCase__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_kebabCase__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67294);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(15020);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(46829);
/* harmony import */ var _styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(85236);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82580);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(59448);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(44012);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(86896);
/* harmony import */ var _lib_currency_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(17632);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(32651);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(88705);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(86702);
/* harmony import */ var _StyledInput__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97274);
/* harmony import */ var _StyledInputField__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(87262);
/* harmony import */ var _StyledSelect__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(66943);
/* harmony import */ var _StyledSpinner__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(771);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(88609);
/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(90998);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(85893);








var _excluded = ["field"];

var _templateObject, _templateObject2;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }




















var formatStringOptions = function formatStringOptions(strings) {
  return strings.map(function (s) {
    return {
      label: s,
      value: s
    };
  });
};

var formatTransferWiseSelectOptions = function formatTransferWiseSelectOptions(values) {
  return values.map(function (_ref) {
    var key = _ref.key,
        name = _ref.name;
    return {
      label: name,
      value: key
    };
  });
};

var TW_API_COLLECTIVE_SLUG = "opencollective-host";
var msg = (0,react_intl__WEBPACK_IMPORTED_MODULE_22__.defineMessages)({
  currency: {
    id: "Currency",
    defaultMessage: [{
      "type": 0,
      "value": "Currency"
    }]
  }
});
var requiredFieldsQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP)(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3___default()(["\n  query PayoutBankInformationRequiredFields($slug: String, $currency: String!, $accountDetails: JSON) {\n    host(slug: $slug) {\n      id\n      transferwise {\n        id\n        requiredFields(currency: $currency, accountDetails: $accountDetails) {\n          type\n          title\n          fields {\n            name\n            group {\n              key\n              name\n              type\n              required\n              example\n              validationRegexp\n              refreshRequirementsOnChange\n              valuesAllowed {\n                key\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));
var CUSTOM_METHOD_LABEL_BY_CURRENCY = {
  // Here I'm using the same wording Wise uses on their documentation
  USD: {
    requiredFields: {
      // No need to internationalize this, since the form is generated by Wise API and it is always in English
      label: "Where's your bank account located?",
      options: {
        aba: 'In the US',
        // eslint-disable-next-line camelcase
        swift_code: 'Outside the US'
      }
    }
  }
};

var Input = function Input(_ref2) {
  var input = _ref2.input,
      getFieldName = _ref2.getFieldName,
      disabled = _ref2.disabled,
      currency = _ref2.currency,
      loading = _ref2.loading,
      refetch = _ref2.refetch,
      formik = _ref2.formik,
      host = _ref2.host;
  var isAccountHolderName = input.key === 'accountHolderName';
  var fieldName = isAccountHolderName ? getFieldName("data.".concat(input.key)) : getFieldName("data.details.".concat(input.key));
  var required = disabled ? false : input.required;
  var validate = required ? function (value) {
    return value ? undefined : "".concat(input.name, " is required");
  } : undefined;

  if (input.type === 'text') {
    if (input.validationRegexp) {
      validate = function validate(value) {
        var matches = new RegExp(input.validationRegexp).test(value); // TODO(intl): This should be internationalized, ideally with `formatFormErrorMessage`

        if (!value && required) {
          return "".concat(input.name, " is required");
        } else if (!matches && value) {
          return input.validationError || "Invalid ".concat(input.name);
        }
      };
    }

    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(formik__WEBPACK_IMPORTED_MODULE_9__/* .Field */ .gN, {
        name: fieldName,
        validate: validate,
        children: function children(_ref3) {
          var field = _ref3.field,
              meta = _ref3.meta;
          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            label: input.name,
            labelFontSize: "13px",
            required: required,
            hideOptionalLabel: disabled,
            error: (meta.touched || disabled) && meta.error,
            hint: input.hint,
            children: function children() {
              var inputValue = lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, field.name);

              return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react__WEBPACK_IMPORTED_MODULE_8__.Fragment, {
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInput__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
                  placeholder: input.example,
                  error: (meta.touched || disabled) && meta.error,
                  disabled: disabled,
                  width: "100%",
                  value: inputValue || ''
                })), isAccountHolderName && inputValue && inputValue.match(/^[^\s]{1}\b/) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_MessageBox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
                  mt: 2,
                  fontSize: "12px",
                  type: "warning",
                  withIcon: true,
                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
                    id: "Warning.AccountHolderNameNotValid",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Full names for personal recipients. They must include more than one name, and both first and last name must have more than one character."
                    }]
                  })
                })]
              });
            }
          });
        }
      })
    }, input.key);
  } else if (input.type === 'date') {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(formik__WEBPACK_IMPORTED_MODULE_9__/* .Field */ .gN, {
        name: fieldName,
        validate: validate,
        children: function children(_ref4) {
          var field = _ref4.field,
              meta = _ref4.meta;
          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            label: input.name,
            labelFontSize: "13px",
            required: required,
            hideOptionalLabel: disabled,
            error: (meta.touched || disabled) && meta.error,
            hint: input.hint,
            children: function children() {
              return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInput__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .ZP, _objectSpread(_objectSpread({}, field), {}, {
                type: "date",
                error: (meta.touched || disabled) && meta.error,
                disabled: disabled,
                width: "100%",
                value: lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, field.name) || ''
              }));
            }
          });
        }
      })
    }, input.key);
  } else if (input.type === 'radio' || input.type === 'select') {
    var options = formatTransferWiseSelectOptions(input.valuesAllowed || []);
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
      mt: 2,
      flex: "1",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(formik__WEBPACK_IMPORTED_MODULE_9__/* .Field */ .gN, {
        name: fieldName,
        validate: validate,
        children: function children(_ref5) {
          var field = _ref5.field,
              meta = _ref5.meta;
          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
            label: input.name,
            labelFontSize: "13px",
            required: required,
            hideOptionalLabel: disabled,
            error: (meta.touched || disabled) && meta.error,
            children: function children() {
              return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledSelect__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP, {
                inputId: field.name,
                disabled: disabled,
                error: (meta.touched || disabled) && meta.error,
                isLoading: loading && !options.length,
                name: field.name,
                options: options,
                value: options.find(function (c) {
                  return c.value === lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, field.name);
                }) || null,
                onChange: function onChange(_ref6) {
                  var value = _ref6.value;
                  formik.setFieldValue(field.name, value);

                  if (input.refreshRequirementsOnChange) {
                    refetch({
                      slug: host ? host.slug : TW_API_COLLECTIVE_SLUG,
                      currency: currency,
                      accountDetails: lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(lodash_set__WEBPACK_IMPORTED_MODULE_4___default()(_objectSpread({}, formik.values), field.name, value), getFieldName('data'))
                    });
                  }
                }
              });
            }
          });
        }
      })
    });
  } else {
    return null;
  }
};

var FieldGroup = function FieldGroup(_ref7) {
  var field = _ref7.field,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1___default()(_ref7, _excluded);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
    flex: "1",
    children: field.group.map(function (input) {
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(Input, _objectSpread({
        input: input
      }, props), input.key);
    })
  });
};

var DetailsForm = function DetailsForm(_ref8) {
  var _data$host, _data$host$transferwi;

  var disabled = _ref8.disabled,
      getFieldName = _ref8.getFieldName,
      formik = _ref8.formik,
      host = _ref8.host,
      currency = _ref8.currency;

  var _useQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_25__.useQuery)(requiredFieldsQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_11__/* .API_V2_CONTEXT */ .T,
    // A) If `fixedCurrency` was passed in PayoutBankInformationForm (2) (3)
    //    then `host` is not set and we'll use the Platform Wise account
    // B) If `host` is set, we expect to be in 2 cases:
    //      * The Collective Host has Wise configured and we should be able to fetch `requiredFields` from it
    //      * The Collective Host doesn't have Wise configured and `host` is already switched to the Platform account
    variables: {
      slug: host ? host.slug : TW_API_COLLECTIVE_SLUG,
      currency: currency
    }
  }),
      loading = _useQuery.loading,
      error = _useQuery.error,
      data = _useQuery.data,
      refetch = _useQuery.refetch; // Make sure we load the form data on initial load. Otherwise certain form fields such
  // as the state field in the "Recipient's Address" section might not be visible on first load
  // and only be visible after the user reselect the country.


  (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(function () {
    refetch({
      accountDetails: lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, getFieldName('data'))
    });
  }, []);

  if (loading && !data) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledSpinner__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {});
  }

  if (error) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "error",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        id: "PayoutBankInformationForm.Error.RequiredFields",
        defaultMessage: [{
          "type": 0,
          "value": "There was an error fetching the required fields"
        }]
      }), error.message && ": ".concat(error.message)]
    });
  } // If at this point we don't have `requiredFields` available,
  // we can display an error message, Wise is likely not configured on the platform


  if (!(data !== null && data !== void 0 && (_data$host = data.host) !== null && _data$host !== void 0 && (_data$host$transferwi = _data$host.transferwise) !== null && _data$host$transferwi !== void 0 && _data$host$transferwi.requiredFields)) {
    if (false) {} else {
      // eslint-disable-next-line no-console
      console.warn('Could not fetch requiredFields through Wise.');
      return;
    }
  }

  var transactionTypeValues = data.host.transferwise.requiredFields.map(function (rf) {
    var _CUSTOM_METHOD_LABEL_, _CUSTOM_METHOD_LABEL_2, _CUSTOM_METHOD_LABEL_3;

    return {
      label: (CUSTOM_METHOD_LABEL_BY_CURRENCY === null || CUSTOM_METHOD_LABEL_BY_CURRENCY === void 0 ? void 0 : (_CUSTOM_METHOD_LABEL_ = CUSTOM_METHOD_LABEL_BY_CURRENCY[currency]) === null || _CUSTOM_METHOD_LABEL_ === void 0 ? void 0 : (_CUSTOM_METHOD_LABEL_2 = _CUSTOM_METHOD_LABEL_.requiredFields) === null || _CUSTOM_METHOD_LABEL_2 === void 0 ? void 0 : (_CUSTOM_METHOD_LABEL_3 = _CUSTOM_METHOD_LABEL_2.options) === null || _CUSTOM_METHOD_LABEL_3 === void 0 ? void 0 : _CUSTOM_METHOD_LABEL_3[rf.type]) || rf.title,
      value: rf.type
    };
  }); // Some currencies offer different methods for the transaction
  // e.g., USD allows ABA and SWIFT transactions.

  var availableMethods = data.host.transferwise.requiredFields.find(function (method) {
    return method.type === lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, getFieldName("data.type"));
  });

  var _partition2 = lodash_partition__WEBPACK_IMPORTED_MODULE_5___default()(availableMethods === null || availableMethods === void 0 ? void 0 : availableMethods.fields, function (field) {
    return field.group.every(function (g) {
      return g.key.includes('address.');
    });
  }),
      _partition3 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0___default()(_partition2, 2),
      addressFields = _partition3[0],
      otherFields = _partition3[1];

  var transactionMethodFieldName = getFieldName('data.type');

  var transactionMethod = lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, transactionMethodFieldName);

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Flex */ .kC, {
    flexDirection: "column",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(formik__WEBPACK_IMPORTED_MODULE_9__/* .Field */ .gN, {
      name: getFieldName('data.type'),
      children: function children(_ref9) {
        var _CUSTOM_METHOD_LABEL_4, _CUSTOM_METHOD_LABEL_5;

        var field = _ref9.field;
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          name: field.name,
          label: (CUSTOM_METHOD_LABEL_BY_CURRENCY === null || CUSTOM_METHOD_LABEL_BY_CURRENCY === void 0 ? void 0 : (_CUSTOM_METHOD_LABEL_4 = CUSTOM_METHOD_LABEL_BY_CURRENCY[currency]) === null || _CUSTOM_METHOD_LABEL_4 === void 0 ? void 0 : (_CUSTOM_METHOD_LABEL_5 = _CUSTOM_METHOD_LABEL_4.requiredFields) === null || _CUSTOM_METHOD_LABEL_5 === void 0 ? void 0 : _CUSTOM_METHOD_LABEL_5.label) || /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
            id: "PayoutBankInformationForm.TransactionMethod",
            defaultMessage: [{
              "type": 0,
              "value": "Transaction Method"
            }]
          }),
          labelFontSize: "13px",
          mt: 3,
          mb: 2,
          children: function children(_ref10) {
            var id = _ref10.id;
            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledSelect__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP, {
              inputId: id,
              name: field.name,
              onChange: function onChange(_ref11) {
                var value = _ref11.value;

                var _get2 = lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, getFieldName("data")),
                    type = _get2.type,
                    currency = _get2.currency;

                formik.setFieldValue(getFieldName('data'), {
                  type: type,
                  currency: currency
                });
                formik.setFieldValue(field.name, value);
              },
              options: transactionTypeValues,
              value: transactionTypeValues.find(function (method) {
                return method.value === (availableMethods === null || availableMethods === void 0 ? void 0 : availableMethods.type);
              }) || null,
              disabled: disabled
            });
          }
        });
      }
    }), transactionMethod && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Text__WEBPACK_IMPORTED_MODULE_20__/* .Span */ .Dr, {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
        mt: 3,
        flex: "1",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_20__.P, {
          fontSize: "14px",
          fontWeight: "bold",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
            id: "PayoutBankInformationForm.AccountInfo",
            defaultMessage: [{
              "type": 0,
              "value": "Account Information"
            }]
          })
        })
      }), otherFields.map(function (field) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(FieldGroup, {
          currency: currency,
          disabled: disabled,
          field: field,
          formik: formik,
          getFieldName: getFieldName,
          host: host,
          loading: loading,
          refetch: refetch
        }, lodash_kebabCase__WEBPACK_IMPORTED_MODULE_6___default()(field.name));
      })]
    }), Boolean(addressFields.length) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react__WEBPACK_IMPORTED_MODULE_8__.Fragment, {
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_12__/* .Box */ .xu, {
        mt: 3,
        flex: "1",
        fontSize: "14px",
        fontWeight: "bold",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_20__/* .Span */ .Dr, {
          mr: 2,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
            id: "PayoutBankInformationForm.RecipientAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Recipient's Address"
            }]
          })
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledTooltip__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z, {
          content: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
            id: "PayoutBankInformationForm.HolderAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Bank account holder address (not the bank address)"
            }]
          }),
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_styled_icons_feather_Info__WEBPACK_IMPORTED_MODULE_26__/* .Info */ .k, {
            size: 16
          })
        })]
      }), addressFields.map(function (field) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(FieldGroup, {
          currency: currency,
          disabled: disabled,
          field: field,
          formik: formik,
          getFieldName: getFieldName,
          host: host,
          loading: loading,
          refetch: refetch
        }, lodash_kebabCase__WEBPACK_IMPORTED_MODULE_6___default()(field.name));
      })]
    })]
  });
};

var availableCurrenciesQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .ZP)(_templateObject2 || (_templateObject2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3___default()(["\n  query PayoutBankInformationAvailableCurrencies($slug: String, $ignoreBlockedCurrencies: Boolean) {\n    host(slug: $slug) {\n      id\n      slug\n      currency\n      transferwise {\n        id\n        availableCurrencies(ignoreBlockedCurrencies: $ignoreBlockedCurrencies)\n      }\n    }\n  }\n"])));
/**
 * Form for payout bank information. Must be used with Formik.
 *
 * The main goal is to use this component in the Expense Flow (1) but it's also reused in:
 *
 * - Collective onboarding, AcceptContributionsOurselvesOrOrg.js (2)
 * - In Collective/Host settings -> Receiving Money, BankTransfer.js (3)
 *
 * In (1) we pass the host where the expense is submitted and fixedCurrency is never set.
 *   * If Wise is configured on that host, `availableCurrencies` should normally be available.
 *   * If it's not, we'll have to fetch `availableCurrencies` from the Platform Wise account
 *
 * In (2) and (3), we never pass an `host` and `fixedCurrency` is sometimes set.
 *   * If `fixedCurrency` is set, we don't need `availableCurrencies`
 *   * If `fixedCurrency` is not set, we'll fetch `availableCurrencies` from the Platform Wise account
 */

var PayoutBankInformationForm = function PayoutBankInformationForm(_ref12) {
  var _host$transferwise, _wiseHost$transferwis, _currencies;

  var isNew = _ref12.isNew,
      getFieldName = _ref12.getFieldName,
      host = _ref12.host,
      fixedCurrency = _ref12.fixedCurrency,
      ignoreBlockedCurrencies = _ref12.ignoreBlockedCurrencies,
      optional = _ref12.optional;

  var _useQuery2 = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_25__.useQuery)(availableCurrenciesQuery, {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_11__/* .API_V2_CONTEXT */ .T,
    variables: {
      slug: TW_API_COLLECTIVE_SLUG,
      ignoreBlockedCurrencies: ignoreBlockedCurrencies
    },
    // Skip fetching/loading if the currency is fixed (2) (3)
    // Or if availableCurrencies is already available. Expense Flow + Host with Wise configured (1)
    skip: Boolean(fixedCurrency || (host === null || host === void 0 ? void 0 : (_host$transferwise = host.transferwise) === null || _host$transferwise === void 0 ? void 0 : _host$transferwise.availableCurrencies))
  }),
      data = _useQuery2.data,
      loading = _useQuery2.loading;

  var formik = (0,formik__WEBPACK_IMPORTED_MODULE_9__/* .useFormikContext */ .u6)();

  var _useIntl = (0,react_intl__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z)(),
      formatMessage = _useIntl.formatMessage; // Display spinner if loading


  if (loading) {
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledSpinner__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z, {});
  } // Fiscal Host with Wise configured (1) OR Platform account as fallback (1) or default (2) (3)
  // NOTE: If `fixedCurrency is set`, `wiseHost` will be null (at least today)


  var wiseHost = (data === null || data === void 0 ? void 0 : data.host) || host;
  var availableCurrencies = wiseHost === null || wiseHost === void 0 ? void 0 : (_wiseHost$transferwis = wiseHost.transferwise) === null || _wiseHost$transferwis === void 0 ? void 0 : _wiseHost$transferwis.availableCurrencies;
  var currencies;

  if (fixedCurrency) {
    currencies = formatStringOptions([fixedCurrency]);
  } else if (availableCurrencies) {
    currencies = formatStringOptions(availableCurrencies.map(function (c) {
      return c.code;
    }));
  } else {
    // If at this point we don't have `fixedCurrency` or `availableCurrencies`,
    // we can display an error message, Wise is likely not configured on the platform
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_MessageBox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "warning",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        id: "v2j/7L",
        defaultMessage: [{
          "type": 0,
          "value": "An error ocurred while preparing the form for bank accounts. Please contact "
        }, {
          "type": 8,
          "value": "I18nSupportLink",
          "children": [{
            "type": 0,
            "value": "support"
          }]
        }],
        values: {
          I18nSupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_13__/* .I18nSupportLink */ .wl
        }
      })
    });
  }

  if (optional) {
    currencies.unshift({
      label: 'No selection',
      value: null
    });
  }

  var currencyFieldName = getFieldName('data.currency');

  var selectedCurrency = lodash_get__WEBPACK_IMPORTED_MODULE_7___default()(formik.values, currencyFieldName);

  var validateCurrencyMinimumAmount = function validateCurrencyMinimumAmount() {
    var _formik$values, _formik$values$items;

    // Skip if currency is fixed (2) (3)
    // or if `availableCurrencies` is not set (but we're not supposed to be there anyway)
    if (fixedCurrency || !availableCurrencies) {
      return;
    } // Only validate minimum amount if the form has items


    if ((formik === null || formik === void 0 ? void 0 : (_formik$values = formik.values) === null || _formik$values === void 0 ? void 0 : (_formik$values$items = _formik$values.items) === null || _formik$values$items === void 0 ? void 0 : _formik$values$items.length) > 0) {
      var _availableCurrencies$;

      var invoiceTotalAmount = formik.values.items.reduce(function (amount, attachment) {
        return amount + (attachment.amount || 0);
      }, 0);
      var minAmountForSelectedCurrency = ((_availableCurrencies$ = availableCurrencies.find(function (c) {
        return c.code === selectedCurrency;
      })) === null || _availableCurrencies$ === void 0 ? void 0 : _availableCurrencies$.minInvoiceAmount) * 100;

      if (invoiceTotalAmount < minAmountForSelectedCurrency) {
        return formatMessage({
          id: "AzGwgz",
          defaultMessage: [{
            "type": 0,
            "value": "The minimum amount for transferring to "
          }, {
            "type": 1,
            "value": "selectedCurrency"
          }, {
            "type": 0,
            "value": " is "
          }, {
            "type": 1,
            "value": "minAmountForSelectedCurrency"
          }]
        }, {
          selectedCurrency: selectedCurrency,
          minAmountForSelectedCurrency: (0,_lib_currency_utils__WEBPACK_IMPORTED_MODULE_10__/* .formatCurrency */ .xG)(minAmountForSelectedCurrency, wiseHost.currency)
        });
      }
    }
  };

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react__WEBPACK_IMPORTED_MODULE_8__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(formik__WEBPACK_IMPORTED_MODULE_9__/* .Field */ .gN, {
      name: currencyFieldName,
      validate: validateCurrencyMinimumAmount,
      children: function children(_ref13) {
        var field = _ref13.field;
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledInputField__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          name: field.name,
          label: formatMessage(msg.currency),
          labelFontSize: "13px",
          mt: 3,
          mb: 2,
          children: function children(_ref14) {
            var id = _ref14.id;
            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_StyledSelect__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP, {
              inputId: id,
              name: field.name,
              onChange: function onChange(_ref15) {
                var value = _ref15.value;
                formik.setFieldValue(getFieldName('data'), {});
                formik.setFieldValue(field.name, value);
              },
              options: currencies,
              value: currencies.find(function (c) {
                return c.label === selectedCurrency;
              }) || null,
              disabled: Boolean(fixedCurrency && !optional) || !isNew
            });
          }
        });
      }
    }), selectedCurrency && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(DetailsForm, {
      currency: selectedCurrency,
      disabled: !isNew,
      formik: formik,
      getFieldName: getFieldName,
      host: wiseHost
    }), !selectedCurrency && !((_currencies = currencies) !== null && _currencies !== void 0 && _currencies.length) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(_MessageBox__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
      fontSize: "12px",
      type: "error",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z, {
        id: "PayoutBankInformationForm.Error.AvailableCurrencies",
        defaultMessage: [{
          "type": 0,
          "value": "There was an error loading available currencies for this host"
        }]
      }), "."]
    })]
  });
};

PayoutBankInformationForm.__docgenInfo = {
  "description": "Form for payout bank information. Must be used with Formik.\n\nThe main goal is to use this component in the Expense Flow (1) but it's also reused in:\n\n- Collective onboarding, AcceptContributionsOurselvesOrOrg.js (2)\n- In Collective/Host settings -> Receiving Money, BankTransfer.js (3)\n\nIn (1) we pass the host where the expense is submitted and fixedCurrency is never set.\n  * If Wise is configured on that host, `availableCurrencies` should normally be available.\n  * If it's not, we'll have to fetch `availableCurrencies` from the Platform Wise account\n\nIn (2) and (3), we never pass an `host` and `fixedCurrency` is sometimes set.\n  * If `fixedCurrency` is set, we don't need `availableCurrencies`\n  * If `fixedCurrency` is not set, we'll fetch `availableCurrencies` from the Platform Wise account",
  "methods": [],
  "displayName": "PayoutBankInformationForm",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "transferwise": {
            "name": "shape",
            "value": {
              "availableCurrencies": {
                "name": "arrayOf",
                "value": {
                  "name": "object"
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "isNew": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "optional": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "ignoreBlockedCurrencies": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "getFieldName": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "fixedCurrency": {
      "description": "Enforces a fixedCurrency",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "errors": {
      "description": "A map of errors for this object",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "formik": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (PayoutBankInformationForm);

/***/ }),

/***/ 78877:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "P": function() { return /* binding */ parseChronologicalOrderInput; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3323);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(86896);
/* harmony import */ var _StyledSelectFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52847);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85893);



var _excluded = ["onChange", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }






var ExpensesOrder = function ExpensesOrder(_ref) {
  var _onChange = _ref.onChange,
      value = _ref.value,
      props = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2___default()(_ref, _excluded);

  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)();
  var options = [{
    label: intl.formatMessage({
      id: "ExpensesOrder.NewestFirst",
      defaultMessage: [{
        "type": 0,
        "value": "Newest First"
      }]
    }),
    value: 'CREATED_AT,DESC'
  }, {
    label: intl.formatMessage({
      id: "ExpensesOrder.OldestFirst",
      defaultMessage: [{
        "type": 0,
        "value": "Oldest First"
      }]
    }),
    value: 'CREATED_AT,ASC'
  }];
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_StyledSelectFilter__WEBPACK_IMPORTED_MODULE_4__/* .StyledSelectFilter */ .V, _objectSpread({
    inputId: "expenses-order",
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    value: options.find(function (o) {
      return o.value === value;
    }),
    options: options,
    defaultValue: options[0]
  }, props));
};

var parseChronologicalOrderInput = function parseChronologicalOrderInput(str) {
  var _str$split = str.split(','),
      _str$split2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0___default()(_str$split, 2),
      field = _str$split2[0],
      direction = _str$split2[1];

  return {
    field: field,
    direction: direction
  };
};
ExpensesOrder.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExpensesOrder",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (ExpensesOrder);

/***/ }),

/***/ 4062:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": function() { return /* binding */ filters_PeriodFilter; }
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/slicedToArray.js
var slicedToArray = __webpack_require__(85696);
var slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(3323);
var objectWithoutProperties_default = /*#__PURE__*/__webpack_require__.n(objectWithoutProperties);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__(930);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);
// EXTERNAL MODULE: ./node_modules/lodash/has.js
var has = __webpack_require__(18721);
var has_default = /*#__PURE__*/__webpack_require__.n(has);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/ChevronDown/ChevronDown.esm.js
var ChevronDown_esm = __webpack_require__(26955);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/InfoCircle/InfoCircle.esm.js
var InfoCircle_esm = __webpack_require__(95612);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/index.js + 3 modules
var lib = __webpack_require__(59448);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/useIntl.js
var useIntl = __webpack_require__(86896);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js
var message = __webpack_require__(44012);
// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js + 3 modules
var styled_components_browser_esm = __webpack_require__(52015);
// EXTERNAL MODULE: ./lib/date-utils.js
var date_utils = __webpack_require__(15078);
// EXTERNAL MODULE: ./lib/dayjs.js
var dayjs = __webpack_require__(82114);
// EXTERNAL MODULE: ./components/DateTime.js
var DateTime = __webpack_require__(95370);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./components/DateRange.js







var OneLineDate = (0,styled_components_browser_esm/* default */.ZP)(DateTime/* default */.Z).withConfig({
  displayName: "DateRange__OneLineDate",
  componentId: "sc-loqk0f-0"
})(["white-space:nowrap;display:inline-block;"]);

var getMessage = function getMessage(from, to) {
  if (!from && !to) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
      id: "DateRange.All",
      defaultMessage: [{
        "type": 0,
        "value": "All"
      }]
    });
  } else if (from && to) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
        id: "76YT3Y",
        defaultMessage: [{
          "type": 1,
          "value": "dateFrom"
        }, {
          "type": 0,
          "value": " to "
        }, {
          "type": 1,
          "value": "dateTo"
        }],
        values: {
          dateFrom: /*#__PURE__*/(0,jsx_runtime.jsx)(OneLineDate, {
            value: from,
            dateStyle: "medium"
          }),
          dateTo: /*#__PURE__*/(0,jsx_runtime.jsx)(OneLineDate, {
            value: to,
            dateStyle: "medium"
          })
        }
      })
    });
  } else if (from) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
      id: "x9TypM",
      defaultMessage: [{
        "type": 0,
        "value": "Since "
      }, {
        "type": 1,
        "value": "date"
      }],
      values: {
        date: /*#__PURE__*/(0,jsx_runtime.jsx)(OneLineDate, {
          value: from,
          dateStyle: "medium"
        })
      }
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
      id: "U5sjCv",
      defaultMessage: [{
        "type": 0,
        "value": "Before "
      }, {
        "type": 1,
        "value": "date"
      }],
      values: {
        date: /*#__PURE__*/(0,jsx_runtime.jsx)(OneLineDate, {
          value: to,
          dateStyle: "medium"
        })
      }
    });
  }
};
/**
 * Small helper to display an internationalized date range. Both values are optional.
 * The results can be something like:
 * - All
 * - 01/01/21 to 05/05/22
 * - Since 01/01/21
 * - Before 05/05/22
 *
 * If isUTC is true, we also add a `(UTC)` to the end of the date.
 */


var DateRange = function DateRange(_ref) {
  var from = _ref.from,
      to = _ref.to,
      isUTC = _ref.isUTC;
  var message = getMessage(from, to);

  if (!isUTC || !from && !to) {
    return message;
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [message, " (UTC)"]
    });
  }
};
DateRange.__docgenInfo = {
  "description": "Small helper to display an internationalized date range. Both values are optional.\nThe results can be something like:\n- All\n- 01/01/21 to 05/05/22\n- Since 01/01/21\n- Before 05/05/22\n\nIf isUTC is true, we also add a `(UTC)` to the end of the date.",
  "methods": [],
  "displayName": "DateRange",
  "props": {
    "from": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "instanceOf",
          "value": "Date"
        }, {
          "name": "instanceOf",
          "value": "dayjs"
        }]
      },
      "required": false
    },
    "to": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "instanceOf",
          "value": "Date"
        }, {
          "name": "instanceOf",
          "value": "dayjs"
        }]
      },
      "required": false
    },
    "isUTC": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/PeriodFilterPresetsSelect.js
var PeriodFilterPresetsSelect = __webpack_require__(60732);
// EXTERNAL MODULE: ./components/PopupMenu.js
var PopupMenu = __webpack_require__(66152);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./components/StyledButtonSet.js
var StyledButtonSet = __webpack_require__(16738);
// EXTERNAL MODULE: ./components/StyledInput.tsx
var StyledInput = __webpack_require__(97274);
// EXTERNAL MODULE: ./components/StyledInputField.js
var StyledInputField = __webpack_require__(87262);
// EXTERNAL MODULE: ./components/StyledTooltip.js
var StyledTooltip = __webpack_require__(88609);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
;// CONCATENATED MODULE: ./components/filters/PeriodFilter.tsx




var _excluded = ["onChange", "value", "inputId", "minDate"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }




















var DEFAULT_INTERVAL = {
  from: '',
  to: '',
  timezoneType: 'local'
};
/**
 * Get a date range as stored internally from a `value` prop, that can be either an object
 * like { from, to } or a stringified value (see `encodeDateInterval`).
 */

var getIntervalFromValue = function getIntervalFromValue(value) {
  var isIntervalObject = function isIntervalObject(value) {
    return typeof value === 'object' && has_default()(value, 'from') && has_default()(value, 'to');
  };

  var intervalFromValue = isIntervalObject(value) ? _objectSpread({}, value) : (0,date_utils/* parseDateInterval */.dr)(value);

  if (intervalFromValue.timezoneType === 'UTC') {
    var toUTC = function toUTC(date) {
      return date ? dayjs/* default.utc */.Z.utc(date) : null;
    };

    intervalFromValue.from = toUTC(intervalFromValue.from);
    intervalFromValue.to = toUTC(intervalFromValue.to);
  }

  return {
    from: (0,date_utils/* stripTime */.xR)(intervalFromValue.from),
    to: (0,date_utils/* stripTime */.xR)(intervalFromValue.to),
    timezoneType: intervalFromValue.timezoneType || 'local'
  };
};
/**
 * Update `interval` with a new value for `from` or `to` and return the updated interval
 * as a new object.
 */


var getNewInterval = function getNewInterval(interval, changeField, newValue) {
  var newInterval = _objectSpread({}, interval);

  newInterval[changeField] = newValue;
  return newInterval;
};
/**
 * Date is locally stored as '2020-01-01'. We need to force the time to make sure it's not modified
 * by timezones when parsed.
 */


var parseDateForDateRange = function parseDateForDateRange(dateStr, isEndOfDay) {
  if (!dateStr) {
    return null;
  } else if (!isEndOfDay) {
    return new Date("".concat(dateStr, "T00:00:00"));
  } else {
    return new Date("".concat(dateStr, "T23:59:59"));
  }
};

var UTC_LABEL = (0,lib.defineMessage)({
  id: "94IjMb",
  defaultMessage: [{
    "type": 0,
    "value": "Coordinated Universal Time"
  }]
});

var getTimeZoneTypeName = function getTimeZoneTypeName(intl, timezone) {
  if (timezone === 'local') {
    try {
      return intl.timeZone || dayjs/* default.tz.guess */.Z.tz.guess();
    } catch (_unused) {
      return '';
    }
  } else if (timezone === 'UTC') {
    return intl.formatMessage(UTC_LABEL);
  } else {
    return '';
  }
};

var TriggerContainer = (0,styled_components_browser_esm/* default */.ZP)(StyledButton/* default */.Z).withConfig({
  displayName: "PeriodFilter__TriggerContainer",
  componentId: "sc-cv8c8z-0"
})(["min-height:38px;outline:0;background:#f7f8fa;padding:0 16px;width:100%;text-align:left;font-size:12px;font-weight:500;color:hsl(0,0%,20%);svg{transition:color 0.2s;}&:hover{border-color:#c4c7cc;svg{color:#999999;}}&:active,&:focus{background:white;color:hsl(0,0%,20%);box-shadow:0 0 0 2px black;}"]);

var PeriodFilter = function PeriodFilter(_ref) {
  var onChange = _ref.onChange,
      value = _ref.value,
      inputId = _ref.inputId,
      minDate = _ref.minDate,
      props = objectWithoutProperties_default()(_ref, _excluded);

  var intl = (0,useIntl/* default */.Z)();
  var intervalFromValue = react.useMemo(function () {
    return getIntervalFromValue(value);
  }, [value]);

  var _React$useState = react.useState(intervalFromValue),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      tmpDateInterval = _React$useState2[0],
      setTmpDateInterval = _React$useState2[1];

  var _React$useState3 = react.useState(true),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      isValidDateInterval = _React$useState4[0],
      setIsValidDateInterval = _React$useState4[1];

  var formattedMin = (0,date_utils/* stripTime */.xR)(minDate);

  var setDate = function setDate(changeField, date) {
    var newInterval = getNewInterval(tmpDateInterval, changeField, date);
    setTmpDateInterval(newInterval); // Add warning in case fromDate is after toDate

    if ((0,date_utils/* isValidDate */.qb)(newInterval.from) && (0,date_utils/* isValidDate */.qb)(newInterval.to) && newInterval.from > newInterval.to) {
      setIsValidDateInterval(false);
    } else if ((0,date_utils/* isValidDate */.qb)(newInterval.from) && (0,date_utils/* isValidDate */.qb)(newInterval.to) && newInterval.from < newInterval.to) {
      setIsValidDateInterval(true);
    }
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(PopupMenu/* default */.Z, {
    placement: "bottom-start",
    onClose: function onClose() {
      return setTmpDateInterval(intervalFromValue);
    },
    Button: function Button(_ref2) {
      var onClick = _ref2.onClick;
      return /*#__PURE__*/(0,jsx_runtime.jsx)(TriggerContainer, _objectSpread(_objectSpread({
        onClick: onClick,
        id: inputId,
        "data-cy": "period-filter"
      }, props), {}, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          justifyContent: "space-between",
          alignItems: "center",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DateRange, {
            from: parseDateForDateRange(intervalFromValue.from, false),
            to: parseDateForDateRange(intervalFromValue.to, true),
            isUTC: intervalFromValue.timezoneType === 'UTC'
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronDown_esm/* ChevronDown */._, {
            size: 25,
            color: "#cccccc"
          })]
        })
      }));
    },
    children: function children(_ref3) {
      var setOpen = _ref3.setOpen;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        mx: "8px",
        my: "8px",
        width: "190px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(PeriodFilterPresetsSelect/* default */.Z, {
            inputId: "".concat(inputId, "-presets-select"),
            onChange: setTmpDateInterval,
            interval: tmpDateInterval
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          name: "timezoneType",
          mt: "12px",
          labelFontSize: "16px",
          labelFontWeight: "700",
          label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              mr: 1,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                id: "7nUCu9",
                defaultMessage: [{
                  "type": 0,
                  "value": "Timezone"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
              content: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                id: "9sbPks",
                defaultMessage: [{
                  "type": 0,
                  "value": "By default, all dates are filtered and displayed using your local timezone. You can switch to UTC to indicate that the dates provided above use the Coordinated Universal Time format, which matches how email reports are generated"
                }]
              }),
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(InfoCircle_esm/* InfoCircle */.Z, {
                size: 16
              })
            })]
          }),
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButtonSet/* default */.Z, _objectSpread(_objectSpread({}, inputProps), {}, {
              size: "tiny",
              items: ['local', 'UTC'],
              buttonProps: {
                p: 1,
                fontSize: '13px',
                fontWeight: 400
              },
              selected: tmpDateInterval.timezoneType,
              buttonPropsBuilder: function buttonPropsBuilder(_ref4) {
                var item = _ref4.item;
                return {
                  title: getTimeZoneTypeName(intl, item)
                };
              },
              onChange: function onChange(timezoneType) {
                setTmpDateInterval(_objectSpread(_objectSpread({}, tmpDateInterval), {}, {
                  timezoneType: timezoneType
                }));
              },
              children: function children(_ref5) {
                var item = _ref5.item;

                switch (item) {
                  case 'local':
                    return /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                      id: "W4SaxY",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Local"
                      }]
                    });

                  case 'UTC':
                    return /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                      id: "pbQZea",
                      defaultMessage: [{
                        "type": 0,
                        "value": "UTC"
                      }]
                    });
                }
              }
            }));
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
            id: "n5QvJy",
            defaultMessage: [{
              "type": 0,
              "value": "Start date"
            }]
          }),
          labelFontWeight: "700",
          labelProps: {
            fontWeight: 'bold',
            fontSize: '16px'
          },
          name: "dateFrom",
          mt: "12px",
          labelFontSize: "16px",
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, _objectSpread(_objectSpread({}, inputProps), {}, {
              type: "date",
              width: "100%",
              closeOnSelect: true,
              lineHeight: 1,
              fontSize: "13px",
              value: tmpDateInterval.from,
              min: formattedMin,
              onChange: function onChange(e) {
                return setDate('from', e.target.value);
              }
            }));
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
            id: "Humfno",
            defaultMessage: [{
              "type": 0,
              "value": "End date"
            }]
          }),
          labelFontWeight: "700",
          labelProps: {
            fontWeight: 'bold',
            fontSize: '16px'
          },
          name: "dateTo",
          mt: "12px",
          labelFontSize: "16px",
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, _objectSpread(_objectSpread({}, inputProps), {}, {
              type: "date",
              width: "100%",
              closeOnSelect: true,
              lineHeight: 1,
              fontSize: "13px",
              value: tmpDateInterval.to,
              min: formattedMin,
              max: (0,date_utils/* stripTime */.xR)(new Date()),
              onChange: function onChange(e) {
                return setDate('to', e.target.value);
              }
            }));
          }
        }), !isValidDateInterval && /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          display: "block",
          color: "red.500",
          pt: 2,
          fontSize: "10px",
          lineHeight: "14px",
          "aria-live": "assertive",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
            id: "P6fesn",
            defaultMessage: [{
              "type": 0,
              "value": "Start Date should be before the End Date"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          mt: 2,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonSize: "medium",
            mr: 2,
            mt: "12px",
            flex: "1",
            onClick: function onClick() {
              setTmpDateInterval(DEFAULT_INTERVAL);
              setIsValidDateInterval(true);
              setOpen(false);
              onChange(null);
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "Reset",
              defaultMessage: [{
                "type": 0,
                "value": "Reset"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonSize: "medium",
            buttonStyle: "primary",
            mt: "12px",
            "data-cy": "btn-apply-period-filter",
            flex: "1",
            onClick: function onClick() {
              onChange(tmpDateInterval);
              setOpen(false);
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "Apply",
              defaultMessage: [{
                "type": 0,
                "value": "Apply"
              }]
            })
          })]
        })]
      });
    }
  });
};

PeriodFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PeriodFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "The value, either as a string with the `dateFrom\u2192dateTo` format or an object like { from, to }",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "shape",
          "value": {
            "from": {
              "name": "string",
              "required": false
            },
            "to": {
              "name": "string",
              "required": false
            },
            "timezoneType": {
              "name": "string",
              "required": false
            }
          }
        }]
      },
      "required": false
    },
    "inputId": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "minDate": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var filters_PeriodFilter = (PeriodFilter);

/***/ }),

/***/ 68953:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(49376);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87794);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(67294);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(15020);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(46829);
/* harmony import */ var _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(83262);
/* harmony import */ var _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(86896);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(44012);
/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65985);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32651);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97079);
/* harmony import */ var _ConfirmationModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(47988);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16159);
/* harmony import */ var _I18nFormatters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(88705);
/* harmony import */ var _icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(12173);
/* harmony import */ var _MessageBox__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(86702);
/* harmony import */ var _StyledButton__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(87268);
/* harmony import */ var _ToastProvider__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(31330);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(85893);




var _templateObject;


















var scheduledExpensesQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .ZP)(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_2___default()(["\n  query ScheduledExpensesBanner(\n    $hostId: String!\n    $limit: Int!\n    $status: ExpenseStatusFilter\n    $payoutMethodType: PayoutMethodType\n  ) {\n    expenses(host: { id: $hostId }, limit: $limit, status: $status, payoutMethodType: $payoutMethodType) {\n      totalCount\n      offset\n      limit\n      nodes {\n        id\n      }\n    }\n  }\n"])));

var ScheduledExpensesBanner = function ScheduledExpensesBanner(_ref) {
  var _scheduledExpenses$da, _scheduledExpenses$da2;

  var host = _ref.host,
      onSubmit = _ref.onSubmit,
      secondButton = _ref.secondButton,
      expenses = _ref.expenses;
  var scheduledExpenses = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_18__.useQuery)(scheduledExpensesQuery, {
    variables: {
      hostId: host.id,
      limit: 100,
      status: 'SCHEDULED_FOR_PAYMENT',
      payoutMethodType: 'BANK_ACCOUNT'
    },
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_7__/* .API_V2_CONTEXT */ .T
  });
  react__WEBPACK_IMPORTED_MODULE_4__.useEffect(function () {
    scheduledExpenses.refetch();
  }, [expenses]);

  var _useToasts = (0,_ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .useToasts */ .e1)(),
      addToast = _useToasts.addToast;

  var intl = (0,react_intl__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)();

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_4__.useState(false),
      _React$useState2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1___default()(_React$useState, 2),
      showConfirmationModal = _React$useState2[0],
      setConfirmationModalDisplay = _React$useState2[1];

  var hasScheduledExpenses = ((_scheduledExpenses$da = scheduledExpenses.data) === null || _scheduledExpenses$da === void 0 ? void 0 : (_scheduledExpenses$da2 = _scheduledExpenses$da.expenses) === null || _scheduledExpenses$da2 === void 0 ? void 0 : _scheduledExpenses$da2.totalCount) > 0;

  if (!hasScheduledExpenses) {
    return null;
  }

  var request = (0,_transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_5__.create)({
    mode:  false ? 0 : _transferwise_approve_api_action_helpers__WEBPACK_IMPORTED_MODULE_5__.Mode.SANDBOX
  });

  var handlePayBatch = /*#__PURE__*/function () {
    var _ref2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee() {
      var expenseIds, message;
      return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              expenseIds = scheduledExpenses.data.expenses.nodes.map(function (e) {
                return e.id;
              });
              _context.prev = 1;
              _context.next = 4;
              return request("".concat((0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__/* .getWebsiteUrl */ .ls)(), "/api/services/transferwise/pay-batch"), {
                method: 'POST',
                body: JSON.stringify({
                  expenseIds: expenseIds,
                  hostId: host.id
                }),
                headers: (0,_lib_api__WEBPACK_IMPORTED_MODULE_6__/* .addAuthTokenToHeader */ .Pj)()
              });

            case 4:
              setConfirmationModalDisplay(false);
              addToast({
                type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.SUCCESS */ ["do"].SUCCESS,
                message: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
                  id: "expenses.scheduled.paybatch.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Expenses paid! They're now being processed by Wise."
                  }]
                })
              });
              onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit();
              _context.next = 20;
              break;

            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](1);

              if (!(_context.t0 !== null && _context.t0 !== void 0 && _context.t0.response)) {
                _context.next = 17;
                break;
              }

              _context.next = 14;
              return _context.t0.response.text();

            case 14:
              _context.t1 = _context.sent;
              _context.next = 18;
              break;

            case 17:
              _context.t1 = intl.formatMessage({
                id: "MEB9ET",
                defaultMessage: [{
                  "type": 0,
                  "value": "There was an error trying to process this batch, please "
                }, {
                  "type": 8,
                  "value": "SupportLink",
                  "children": [{
                    "type": 0,
                    "value": "contact support"
                  }]
                }]
              }, {
                SupportLink: _I18nFormatters__WEBPACK_IMPORTED_MODULE_11__/* .I18nSupportLink */ .wl
              });

            case 18:
              message = _context.t1;
              addToast({
                type: _ToastProvider__WEBPACK_IMPORTED_MODULE_15__/* .TOAST_TYPE.ERROR */ ["do"].ERROR,
                title: intl.formatMessage({
                  id: "HYFu3j",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Batch payment failed"
                  }]
                }),
                message: message
              });

            case 20:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[1, 9]]);
    }));

    return function handlePayBatch() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react__WEBPACK_IMPORTED_MODULE_4__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_MessageBox__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z, {
      type: "success",
      mb: 4,
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Flex */ .kC, {
        alignItems: "center",
        justifyContent: "space-between",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_icons_TransferwiseIcon__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
            size: "1em",
            color: "#25B869",
            mr: 2
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
            id: "expenses.scheduled.notification",
            defaultMessage: [{
              "type": 0,
              "value": "You have "
            }, {
              "type": 6,
              "value": "count",
              "options": {
                "one": {
                  "value": [{
                    "type": 7
                  }, {
                    "type": 0,
                    "value": " expense"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 7
                  }, {
                    "type": 0,
                    "value": " expenses"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }, {
              "type": 0,
              "value": " scheduled for payment."
            }],
            values: {
              count: scheduledExpenses.data.expenses.totalCount
            }
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_10__/* .Box */ .xu, {
          children: [secondButton, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_StyledButton__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
            buttonSize: "tiny",
            buttonStyle: "successSecondary",
            onClick: function onClick() {
              return setConfirmationModalDisplay(true);
            },
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
              id: "expenses.scheduled.paybatch",
              defaultMessage: [{
                "type": 0,
                "value": "Pay Batch"
              }]
            })
          })]
        })]
      })
    }), showConfirmationModal && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ConfirmationModal__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
      zindex: 1000,
      header: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        id: "expenses.scheduled.confirmation.title",
        defaultMessage: [{
          "type": 0,
          "value": "Pay Expenses Batch"
        }]
      }),
      body: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        id: "expenses.scheduled.confirmation.body",
        defaultMessage: [{
          "type": 0,
          "value": "Are you sure you want to batch and pay "
        }, {
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expense"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expenses"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }, {
          "type": 0,
          "value": " scheduled for payment?"
        }],
        values: {
          count: scheduledExpenses.data.expenses.totalCount
        }
      }),
      onClose: function onClose() {
        return setConfirmationModalDisplay(false);
      },
      continueLabel: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
        id: "expense.pay.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Pay with "
        }, {
          "type": 1,
          "value": "paymentMethod"
        }],
        values: {
          paymentMethod: 'Wise'
        }
      }),
      continueHandler: handlePayBatch
    })]
  });
};

ScheduledExpensesBanner.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ScheduledExpensesBanner",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "expenses": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "secondButton": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (ScheduledExpensesBanner);

/***/ }),

/***/ 14574:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(67294);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(44012);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(52015);
/* harmony import */ var _components_Avatar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11194);
/* harmony import */ var _components_StyledTag__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(36422);
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16159);
/* harmony import */ var _StyledTooltip__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(88609);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(85893);






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_4___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_4___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_3___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var Admin = (0,styled_components__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP)(_components_StyledTag__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z).attrs({
  variant: 'rounded-right'
}).withConfig({
  displayName: "OnboardingProfileCard__Admin",
  componentId: "sc-shs4i4-0"
})([""]);

var OnboardingProfileCard = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_2___default()(OnboardingProfileCard, _React$Component);

  var _super = _createSuper(OnboardingProfileCard);

  function OnboardingProfileCard() {
    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0___default()(this, OnboardingProfileCard);

    return _super.apply(this, arguments);
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_1___default()(OnboardingProfileCard, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          collective = _this$props.collective,
          removeAdmin = _this$props.removeAdmin,
          isPending = _this$props.isPending;
      var name = collective.name;

      var content = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Admin, {
        closeButtonProps: removeAdmin ? {
          onClick: function onClick() {
            removeAdmin(collective);
          }
        } : null,
        "data-cy": "remove-user",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Flex */ .kC, {
          alignItems: "center",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_components_Avatar__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
            radius: 16,
            collective: collective
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Box */ .xu, {
            fontSize: "12px",
            ml: 2,
            "data-cy": "name-of-admins",
            children: name
          })]
        })
      });

      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Grid__WEBPACK_IMPORTED_MODULE_8__/* .Flex */ .kC, {
        my: 1,
        mr: 2,
        children: isPending ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_StyledTooltip__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
          content: function content() {
            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
              id: "onboarding.admins.pending",
              defaultMessage: [{
                "type": 0,
                "value": "Pending approval"
              }]
            });
          },
          children: content
        }) : content
      });
    }
  }]);

  return OnboardingProfileCard;
}(react__WEBPACK_IMPORTED_MODULE_5__.Component);

OnboardingProfileCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OnboardingProfileCard",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "adminCollective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "removeAdmin": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "isPending": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["Z"] = (OnboardingProfileCard);

/***/ }),

/***/ 12328:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": function() { return /* binding */ orders_OrdersWithData; }
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__(930);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/slicedToArray.js
var slicedToArray = __webpack_require__(85696);
var slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/taggedTemplateLiteral.js
var taggedTemplateLiteral = __webpack_require__(92358);
var taggedTemplateLiteral_default = /*#__PURE__*/__webpack_require__.n(taggedTemplateLiteral);
// EXTERNAL MODULE: ./node_modules/lodash/omitBy.js
var omitBy = __webpack_require__(14176);
var omitBy_default = /*#__PURE__*/__webpack_require__.n(omitBy);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/graphql-tag/lib/index.js + 13 modules
var lib = __webpack_require__(15020);
// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js
var client = __webpack_require__(46829);
// EXTERNAL MODULE: ./node_modules/next/router.js
var next_router = __webpack_require__(11163);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/index.js + 3 modules
var react_intl_lib = __webpack_require__(59448);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/useIntl.js
var useIntl = __webpack_require__(86896);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js
var message = __webpack_require__(44012);
// EXTERNAL MODULE: ./lib/constants/order-status.js
var order_status = __webpack_require__(24317);
// EXTERNAL MODULE: ./lib/date-utils.js
var date_utils = __webpack_require__(15078);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
// EXTERNAL MODULE: ./lib/hooks/useLoggedInUser.ts
var useLoggedInUser = __webpack_require__(62131);
// EXTERNAL MODULE: ./lib/hooks/usePrevious.js
var usePrevious = __webpack_require__(19123);
// EXTERNAL MODULE: ./components/budget/filters/AmountFilter.js
var AmountFilter = __webpack_require__(93765);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./components/host-dashboard/CreatePendingOrderModal.tsx
var CreatePendingOrderModal = __webpack_require__(54646);
// EXTERNAL MODULE: ./components/Link.js
var Link = __webpack_require__(92129);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/MessageBox.tsx + 2 modules
var MessageBox = __webpack_require__(86702);
// EXTERNAL MODULE: ./components/MessageBoxGraphqlError.js
var MessageBoxGraphqlError = __webpack_require__(68185);
// EXTERNAL MODULE: ./components/Pagination.js
var Pagination = __webpack_require__(79045);
// EXTERNAL MODULE: ./components/SearchBar.js
var SearchBar = __webpack_require__(32606);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./components/StyledHr.tsx
var StyledHr = __webpack_require__(173);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js + 3 modules
var styled_components_browser_esm = __webpack_require__(52015);
// EXTERNAL MODULE: ./components/filters/PeriodFilter.tsx + 1 modules
var PeriodFilter = __webpack_require__(4062);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/toConsumableArray.js
var toConsumableArray = __webpack_require__(7980);
var toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(3323);
var objectWithoutProperties_default = /*#__PURE__*/__webpack_require__.n(objectWithoutProperties);
// EXTERNAL MODULE: ./lib/i18n/order-status.js
var i18n_order_status = __webpack_require__(732);
// EXTERNAL MODULE: ./lib/utils.js
var utils = __webpack_require__(97079);
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./components/orders/OrderStatusFilter.js



var _excluded = ["onChange", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var OrderStatusFilter = function OrderStatusFilter(_ref) {
  var _onChange = _ref.onChange,
      value = _ref.value,
      props = objectWithoutProperties_default()(_ref, _excluded);

  var intl = (0,useIntl/* default */.Z)();

  var getOption = function getOption(value) {
    return {
      label: (0,i18n_order_status/* default */.Z)(intl, value),
      value: value
    };
  };

  var options = [getOption('ALL')].concat(toConsumableArray_default()(Object.values(order_status/* ORDER_STATUS */.D).map(getOption)));
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, _objectSpread({
    inputId: "order-status-filter",
    isSearchable: false,
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    value: getOption(value || 'ALL'),
    options: options.sort(utils/* sortSelectOptions */.V_)
  }, props));
};

OrderStatusFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrderStatusFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var orders_OrderStatusFilter = (OrderStatusFilter);
;// CONCATENATED MODULE: ./components/orders/OrdersFilters.js


function OrdersFilters_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function OrdersFilters_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? OrdersFilters_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : OrdersFilters_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }











var FilterContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "OrdersFilters__FilterContainer",
  componentId: "sc-zmw1a3-0"
})(["margin-bottom:8px;flex:1 1 120px;&:not(:last-child){margin-right:18px;}"]);
var FilterLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "OrdersFilters__FilterLabel",
  componentId: "sc-zmw1a3-1"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);

var OrdersFilters = function OrdersFilters(_ref) {
  var currency = _ref.currency,
      filters = _ref.filters,
      hasStatus = _ref.hasStatus,
      _onChange = _ref.onChange;

  var getFilterProps = function getFilterProps(name, valueModifier) {
    return {
      inputId: "orders-filter-".concat(name),
      value: filters === null || filters === void 0 ? void 0 : filters[name],
      onChange: function onChange(value) {
        var preparedValue = valueModifier ? valueModifier(value) : value;

        _onChange(OrdersFilters_objectSpread(OrdersFilters_objectSpread({}, filters), {}, defineProperty_default()({}, name, value === 'ALL' ? null : preparedValue)));
      }
    };
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexWrap: "wrap",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "orders-filter-period",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "Period",
          defaultMessage: [{
            "type": 0,
            "value": "Period"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(PeriodFilter/* default */.Z, OrdersFilters_objectSpread({}, getFilterProps('period', date_utils/* encodeDateInterval */.EB)))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "orders-filter-amount",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "Fields.amount",
          defaultMessage: [{
            "type": 0,
            "value": "Amount"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(AmountFilter/* default */.Z, OrdersFilters_objectSpread({
        currency: currency
      }, getFilterProps('amount')))]
    }), hasStatus && /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "orders-filter-status",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "order.status",
          defaultMessage: [{
            "type": 0,
            "value": "Status"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(orders_OrderStatusFilter, OrdersFilters_objectSpread({}, getFilterProps('status')))]
    })]
  });
};

OrdersFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersFilters",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filters": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "hasStatus": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var orders_OrdersFilters = (/*#__PURE__*/react.memo(OrdersFilters));
// EXTERNAL MODULE: ./lib/constants/payment-methods.js
var payment_methods = __webpack_require__(1808);
// EXTERNAL MODULE: ./lib/i18n/payment-method-provider-type.js
var payment_method_provider_type = __webpack_require__(1059);
// EXTERNAL MODULE: ./lib/i18n/payment-method-type.js
var payment_method_type = __webpack_require__(72832);
// EXTERNAL MODULE: ./lib/theme/helpers.ts
var theme_helpers = __webpack_require__(13875);
// EXTERNAL MODULE: ./lib/url-helpers.js
var url_helpers = __webpack_require__(25896);
// EXTERNAL MODULE: ./components/AutosizeText.js
var AutosizeText = __webpack_require__(81966);
// EXTERNAL MODULE: ./components/Avatar.tsx
var Avatar = __webpack_require__(11194);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/DateTime.js
var DateTime = __webpack_require__(95370);
// EXTERNAL MODULE: ./components/FormattedMoneyAmount.js
var FormattedMoneyAmount = __webpack_require__(27596);
// EXTERNAL MODULE: ./components/LinkCollective.js
var LinkCollective = __webpack_require__(97619);
// EXTERNAL MODULE: ./components/orders/OrderStatusTag.js
var OrderStatusTag = __webpack_require__(5455);
// EXTERNAL MODULE: ./components/orders/ProcessOrderButtons.js + 1 modules
var ProcessOrderButtons = __webpack_require__(16120);
// EXTERNAL MODULE: ./components/StyledLink.tsx
var StyledLink = __webpack_require__(51082);
// EXTERNAL MODULE: ./components/StyledTag.js
var StyledTag = __webpack_require__(36422);
// EXTERNAL MODULE: ./components/StyledTooltip.js
var StyledTooltip = __webpack_require__(88609);
// EXTERNAL MODULE: ./components/TransactionSign.js
var TransactionSign = __webpack_require__(47924);
;// CONCATENATED MODULE: ./components/budget/OrderBudgetItem.js



























var DetailColumnHeader = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "OrderBudgetItem__DetailColumnHeader",
  componentId: "sc-1kxgdhv-0"
})(["font-style:normal;font-weight:bold;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#c4c7cc;margin-bottom:2px;"]);
var ButtonsContainer = styled_components_browser_esm/* default.div.attrs */.ZP.div.attrs({
  'data-cy': 'order-actions'
}).withConfig({
  displayName: "OrderBudgetItem__ButtonsContainer",
  componentId: "sc-1kxgdhv-1"
})(["display:flex;flex-wrap:wrap;margin-top:8px;flex-grow:1;transition:opacity 0.05s;justify-content:flex-end;@media (max-width:40em){justify-content:center;}& > *:last-child{margin-right:0;}"]);
var OrderContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "OrderBudgetItem__OrderContainer",
  componentId: "sc-1kxgdhv-2"
})(["padding:16px 27px;@media (hover:hover){&:not(:hover):not(:focus-within) ", "{opacity:0.24;}}"], ButtonsContainer);

var OrderBudgetItem = function OrderBudgetItem(_ref) {
  var _order$platformTipAmo, _order$platformTipAmo2, _order$paymentMethod, _order$paymentMethod2, _order$pendingContrib;

  var isLoading = _ref.isLoading,
      order = _ref.order,
      showPlatformTip = _ref.showPlatformTip,
      showAmountSign = _ref.showAmountSign;
  var intl = (0,useIntl/* default */.Z)();
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(OrderContainer, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      justifyContent: "space-between",
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flex: "1",
        minWidth: "max(60%, 300px)",
        maxWidth: [null, '70%'],
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mr: 3,
          children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            width: 40,
            height: 40
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(LinkCollective/* default */.Z, {
            collective: order.fromAccount,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
              collective: order.fromAccount,
              radius: 40
            })
          })
        }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 60
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledLink/* default */.Z, {
            as: Link/* default */.Z,
            href: "".concat((0,url_helpers/* getCollectivePageRoute */.x0)(order.toAccount), "/orders/").concat(order.legacyId),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(AutosizeText/* default */.Z, {
              value: order.description,
              maxLength: 255,
              minFontSizeInPx: 12,
              maxFontSizeInPx: 16,
              lengthThreshold: 72,
              mobileRatio: 0.875,
              valueFormatter: theme_helpers/* toPx */.aR,
              children: function children(_ref2) {
                var value = _ref2.value,
                    fontSize = _ref2.fontSize;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
                  fontWeight: "500",
                  lineHeight: "1.5em",
                  textDecoration: "none",
                  color: "black.900",
                  fontSize: fontSize,
                  "data-cy": "expense-title",
                  children: value
                });
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            mt: "5px",
            fontSize: "12px",
            color: "black.600",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "Order.fromTo",
              defaultMessage: [{
                "type": 0,
                "value": "for "
              }, {
                "type": 1,
                "value": "account"
              }, {
                "type": 0,
                "value": " from "
              }, {
                "type": 1,
                "value": "contributor"
              }],
              values: {
                contributor: /*#__PURE__*/(0,jsx_runtime.jsx)(LinkCollective/* default */.Z, {
                  collective: order.fromAccount
                }),
                account: /*#__PURE__*/(0,jsx_runtime.jsx)(LinkCollective/* default */.Z, {
                  collective: order.toAccount
                })
              }
            }), ' • ', /*#__PURE__*/(0,jsx_runtime.jsx)(DateTime/* default */.Z, {
              value: order.createdAt
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: ['row', 'column'],
        mt: [3, 0],
        flexWrap: "wrap",
        alignItems: ['center', 'flex-end'],
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          my: 2,
          mr: [3, 0],
          minWidth: 100,
          justifyContent: "flex-end",
          "data-cy": "order-amount",
          children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: 19,
            width: 120
          }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            alignItems: ['flex-start', 'flex-end'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              alignItems: "center",
              children: [showAmountSign && /*#__PURE__*/(0,jsx_runtime.jsx)(TransactionSign/* default */.Z, {
                isCredit: true
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
                color: "black.500",
                fontSize: "16px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
                  currency: order.amount.currency,
                  precision: 2,
                  amount: showPlatformTip && (_order$platformTipAmo = order.platformTipAmount) !== null && _order$platformTipAmo !== void 0 && _order$platformTipAmo.valueInCents ? order.amount.valueInCents + order.platformTipAmount.valueInCents : order.amount.valueInCents
                })
              })]
            }), Boolean(showPlatformTip && ((_order$platformTipAmo2 = order.platformTipAmount) === null || _order$platformTipAmo2 === void 0 ? void 0 : _order$platformTipAmo2.valueInCents)) && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
              fontSize: "10px",
              color: "black.500",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                id: "OrderBudgetItem.Tip",
                defaultMessage: [{
                  "type": 0,
                  "value": "(includes "
                }, {
                  "type": 1,
                  "value": "amount"
                }, {
                  "type": 0,
                  "value": " platform tip)"
                }],
                values: {
                  amount: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
                    amount: order.platformTipAmount.valueInCents,
                    currency: order.platformTipAmount.currency,
                    precision: 2,
                    amountStyles: null
                  })
                }
              })
            })]
          })
        }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 20,
          width: 140,
          mt: 2
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledTag/* default */.Z, {
            variant: "rounded-left",
            fontSize: "10px",
            fontWeight: "500",
            mr: 1,
            textTransform: "uppercase",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "Order",
              defaultMessage: [{
                "type": 0,
                "value": "Order"
              }]
            }), " #", order.legacyId]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(OrderStatusTag/* default */.Z, {
            status: order.status
          })]
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      justifyContent: "space-between",
      alignItems: "center",
      mt: 2,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexWrap: "wrap",
        alignItems: "center",
        justifyContent: ['space-between', null, 'flex-start'],
        flexGrow: 1,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          justifyContent: "flex-end",
          mr: [3, 4],
          minHeight: 50,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
              id: "paymentmethod.label",
              defaultMessage: [{
                "type": 0,
                "value": "Payment Method"
              }]
            })
          }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: 16
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            fontSize: "11px",
            lineHeight: "16px",
            color: "black.700",
            children: (_order$paymentMethod = order.paymentMethod) !== null && _order$paymentMethod !== void 0 && _order$paymentMethod.type ? (0,payment_method_type/* i18nPaymentMethodType */.i)(intl, order.paymentMethod.type) : (0,payment_method_provider_type/* i18nPaymentMethodProviderType */.z)(intl, // TODO(paymentMethodType): migrate to service+type
            ((_order$paymentMethod2 = order.paymentMethod) === null || _order$paymentMethod2 === void 0 ? void 0 : _order$paymentMethod2.providerType) || ((_order$pendingContrib = order.pendingContributionData) === null || _order$pendingContrib === void 0 ? void 0 : _order$pendingContrib.paymentMethod) || payment_methods/* GQLV2_PAYMENT_METHOD_LEGACY_TYPES.BANK_TRANSFER */.oy.BANK_TRANSFER)
          })]
        }), (order === null || order === void 0 ? void 0 : order.status) === 'PENDING' && (order === null || order === void 0 ? void 0 : order.pendingContributionData) && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [order.pendingContributionData.ponumber && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            justifyContent: "flex-end",
            mr: [3, 4],
            minHeight: 50,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailColumnHeader, {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
                content: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                  id: "3Il70r",
                  defaultMessage: [{
                    "type": 0,
                    "value": "External reference code for this order. This is usually a reference number from the contributor accounting system."
                  }]
                }),
                containerCursor: "default",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                  id: "Fields.PONumber",
                  defaultMessage: [{
                    "type": 0,
                    "value": "PO Number"
                  }]
                })
              })
            }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
              height: 16
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              fontSize: "11px",
              lineHeight: "16px",
              color: "black.700",
              children: "#".concat(order.pendingContributionData.ponumber)
            })]
          }), order.pendingContributionData.expectedAt && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            justifyContent: "flex-end",
            mr: [3, 4],
            minHeight: 50,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailColumnHeader, {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
                id: "6srLb2",
                defaultMessage: [{
                  "type": 0,
                  "value": "Expected"
                }]
              })
            }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
              height: 16
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              fontSize: "11px",
              lineHeight: "16px",
              color: "black.700",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(DateTime/* default */.Z, {
                value: order.pendingContributionData.expectedAt,
                dateStyle: 'medium',
                timeStyle: undefined
              })
            })]
          })]
        })]
      }), (order === null || order === void 0 ? void 0 : order.permissions) && /*#__PURE__*/(0,jsx_runtime.jsx)(ButtonsContainer, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(ProcessOrderButtons/* default */.Z, {
          order: order,
          permissions: order.permissions
        })
      })]
    })]
  });
};

OrderBudgetItem.defaultProps = {
  showAmountSign: true
};
OrderBudgetItem.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrderBudgetItem",
  "props": {
    "showAmountSign": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onProcess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "showProcessActions": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "view": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'public'",
          "computed": false
        }, {
          "value": "'admin'",
          "computed": false
        }]
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          },
          "parent": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": true
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "order": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "legacyId": {
            "name": "number",
            "required": false
          },
          "description": {
            "name": "string",
            "required": true
          },
          "status": {
            "name": "enum",
            "computed": true,
            "value": "Object.values(ORDER_STATUS)",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          },
          "amount": {
            "name": "object",
            "required": true
          },
          "platformTipAmount": {
            "name": "object",
            "required": true
          },
          "permissions": {
            "name": "shape",
            "value": {
              "canReject": {
                "name": "bool",
                "required": false
              },
              "canMarkAsPaid": {
                "name": "bool",
                "required": false
              }
            },
            "required": false
          },
          "pendingContributionData": {
            "name": "shape",
            "value": {
              "ponumber": {
                "name": "number",
                "required": false
              },
              "expectedAt": {
                "name": "string",
                "required": false
              },
              "paymentMethod": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "paymentMethod": {
            "name": "shape",
            "value": {
              "providerType": {
                "name": "string",
                "required": false
              },
              "type": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "toAccount": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "description": "If available, this `account` will be used in place of the `collective`",
            "required": false
          },
          "fromAccount": {
            "name": "shape",
            "value": {
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var budget_OrderBudgetItem = (OrderBudgetItem);
// EXTERNAL MODULE: ./components/StyledCard.tsx
var StyledCard = __webpack_require__(19156);
;// CONCATENATED MODULE: ./components/orders/OrdersList.js






var OrdersList_OrderContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "OrdersList__OrderContainer",
  componentId: "sc-6wv824-0"
})(["", ""], function (props) {
  return !props.isFirst && (0,styled_components_browser_esm/* css */.iv)(["border-top:1px solid #e6e8eb;"]);
});

var OrdersList = function OrdersList(_ref) {
  var _orders;

  var orders = _ref.orders,
      isLoading = _ref.isLoading,
      nbPlaceholders = _ref.nbPlaceholders,
      showPlatformTip = _ref.showPlatformTip,
      showAmountSign = _ref.showAmountSign;
  orders = !isLoading ? orders : toConsumableArray_default()(new Array(nbPlaceholders));

  if (!((_orders = orders) !== null && _orders !== void 0 && _orders.length)) {
    return null;
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCard/* default */.Z, {
    children: orders.map(function (order, idx) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(OrdersList_OrderContainer, {
        isFirst: !idx,
        "data-cy": "order-".concat(order === null || order === void 0 ? void 0 : order.status),
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(budget_OrderBudgetItem, {
          isLoading: isLoading,
          order: order,
          showPlatformTip: showPlatformTip,
          showAmountSign: showAmountSign
        })
      }, (order === null || order === void 0 ? void 0 : order.id) || idx);
    })
  });
};

OrdersList.defaultProps = {
  nbPlaceholders: 10
};
OrdersList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersList",
  "props": {
    "nbPlaceholders": {
      "defaultValue": {
        "value": "10",
        "computed": false
      },
      "description": "When `isLoading` is true, this sets the number of \"loading\" items displayed",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "orders": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "id": {
              "name": "string",
              "required": true
            },
            "legacyId": {
              "name": "number",
              "required": true
            }
          }
        }
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "showAmountSign": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var orders_OrdersList = (OrdersList);
;// CONCATENATED MODULE: ./components/orders/OrdersWithData.js





var _templateObject;

function OrdersWithData_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function OrdersWithData_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? OrdersWithData_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : OrdersWithData_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


























var accountOrdersQuery = (0,lib/* default */.ZP)(_templateObject || (_templateObject = taggedTemplateLiteral_default()(["\n  query Orders(\n    $accountSlug: String\n    $limit: Int!\n    $offset: Int!\n    $status: [OrderStatus]\n    $minAmount: Int\n    $maxAmount: Int\n    $dateFrom: DateTime\n    $dateTo: DateTime\n    $searchTerm: String\n  ) {\n    account(slug: $accountSlug) {\n      id\n      slug\n      currency\n      legacyId\n      name\n    }\n    orders(\n      account: { slug: $accountSlug }\n      includeHostedAccounts: true\n      filter: INCOMING\n      status: $status\n      searchTerm: $searchTerm\n      limit: $limit\n      offset: $offset\n      dateFrom: $dateFrom\n      dateTo: $dateTo\n      minAmount: $minAmount\n      maxAmount: $maxAmount\n    ) {\n      totalCount\n      nodes {\n        id\n        legacyId\n        description\n        createdAt\n        status\n        amount {\n          valueInCents\n          currency\n        }\n        platformTipAmount {\n          valueInCents\n          currency\n        }\n        paymentMethod {\n          id\n          providerType\n        }\n        fromAccount {\n          id\n          slug\n          name\n          imageUrl\n        }\n        pendingContributionData {\n          expectedAt\n          paymentMethod\n          ponumber\n          memo\n          fromAccountInfo {\n            name\n            email\n          }\n        }\n        toAccount {\n          id\n          slug\n          name\n          imageUrl\n          isHost\n          ... on AccountWithHost {\n            bankTransfersHostFeePercent: hostFeePercent(paymentMethodType: MANUAL)\n          }\n        }\n        permissions {\n          id\n          canMarkAsExpired\n          canMarkAsPaid\n        }\n      }\n    }\n  }\n"])));
var ORDERS_PER_PAGE = 15;

var isValidStatus = function isValidStatus(status) {
  return Boolean(order_status/* ORDER_STATUS */.D[status]);
};

var getVariablesFromQuery = function getVariablesFromQuery(query, forcedStatus) {
  var amountRange = (0,AmountFilter/* parseAmountRange */.t)(query.amount);

  var _parseDateInterval = (0,date_utils/* parseDateInterval */.dr)(query.period),
      dateFrom = _parseDateInterval.from,
      dateTo = _parseDateInterval.to;

  var searchTerm = query.searchTerm || null;
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || ORDERS_PER_PAGE,
    status: searchTerm ? null : forcedStatus ? forcedStatus : isValidStatus(query.status) ? query.status : null,
    minAmount: amountRange[0] && amountRange[0] * 100,
    maxAmount: amountRange[1] && amountRange[1] * 100,
    dateFrom: dateFrom,
    dateTo: dateTo,
    searchTerm: searchTerm
  };
};

var messages = (0,react_intl_lib.defineMessages)({
  searchPlaceholder: {
    id: "Orders.Search.Placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "Search all contributions..."
    }]
  }
});

var hasParams = function hasParams(query) {
  return Object.entries(query).some(function (_ref) {
    var _ref2 = slicedToArray_default()(_ref, 2),
        key = _ref2[0],
        value = _ref2[1];

    return !['collectiveSlug', 'hostCollectiveSlug', 'limit', 'offset', 'paypalApprovalError', 'section', 'slug', 'view'].includes(key) && value;
  });
};

var ROUTE_PARAMS = ['hostCollectiveSlug', 'collectiveSlug', 'view', 'slug', 'section'];

var updateQuery = function updateQuery(router, newParams) {
  var query = omitBy_default()(OrdersWithData_objectSpread(OrdersWithData_objectSpread({}, router.query), newParams), function (value, key) {
    return !value || ROUTE_PARAMS.includes(key);
  });

  var pathname = router.asPath.split('?')[0];
  return router.push({
    pathname: pathname,
    query: query
  });
};

var OrdersWithData = function OrdersWithData(_ref3) {
  var _data$orders, _data$orders2, _data$orders3;

  var accountSlug = _ref3.accountSlug,
      title = _ref3.title,
      status = _ref3.status,
      showPlatformTip = _ref3.showPlatformTip,
      canCreatePendingOrder = _ref3.canCreatePendingOrder;
  var router = (0,next_router.useRouter)() || {
    query: {}
  };
  var intl = (0,useIntl/* default */.Z)();
  var hasFilters = react.useMemo(function () {
    return hasParams(router.query);
  }, [router.query]);

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showCreatePendingOrderModal = _React$useState2[0],
      setShowCreatePendingOrderModal = _React$useState2[1];

  var queryVariables = OrdersWithData_objectSpread({
    accountSlug: accountSlug
  }, getVariablesFromQuery(router.query, status));

  var queryParams = {
    variables: queryVariables,
    context: helpers/* API_V2_CONTEXT */.T
  };

  var _useQuery = (0,client.useQuery)(accountOrdersQuery, queryParams),
      data = _useQuery.data,
      error = _useQuery.error,
      loading = _useQuery.loading,
      variables = _useQuery.variables,
      refetch = _useQuery.refetch;

  var _useLoggedInUser = (0,useLoggedInUser/* default */.Z)(),
      LoggedInUser = _useLoggedInUser.LoggedInUser;

  var prevLoggedInUser = (0,usePrevious/* usePrevious */.D)(LoggedInUser);
  var isHostAdmin = LoggedInUser === null || LoggedInUser === void 0 ? void 0 : LoggedInUser.isAdminOfCollective(data === null || data === void 0 ? void 0 : data.account); // Refetch data when user logs in

  react.useEffect(function () {
    if (!prevLoggedInUser && LoggedInUser) {
      refetch();
    }
  }, [LoggedInUser]);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    maxWidth: 1000,
    width: "100%",
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      mb: 24,
      alignItems: "center",
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: title || /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
          id: "FinancialContributions",
          defaultMessage: [{
            "type": 0,
            "value": "Financial Contributions"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mx: "auto"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        p: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(SearchBar/* default */.Z, {
          defaultValue: router.query.searchTerm,
          onSubmit: function onSubmit(searchTerm) {
            return updateQuery(router, {
              searchTerm: searchTerm,
              offset: null
            });
          },
          placeholder: intl.formatMessage(messages.searchPlaceholder)
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      mb: 26,
      borderWidth: "0.5px",
      borderColor: "black.300"
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      mb: 34,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        flexGrow: "1",
        mr: "18px",
        children: data !== null && data !== void 0 && data.account ? /*#__PURE__*/(0,jsx_runtime.jsx)(orders_OrdersFilters, {
          currency: data.account.currency,
          filters: router.query,
          onChange: function onChange(queryParams) {
            return updateQuery(router, OrdersWithData_objectSpread(OrdersWithData_objectSpread({}, queryParams), {}, {
              offset: null
            }));
          },
          hasStatus: !status
        }) : loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 70
        }) : null
      }), isHostAdmin && canCreatePendingOrder && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          onClick: function onClick() {
            return setShowCreatePendingOrderModal(true);
          },
          buttonSize: "small",
          buttonStyle: "primary",
          height: "38px",
          lineHeight: "12px",
          mt: "17px",
          "data-cy": "create-pending-contribution",
          children: "Create +"
        }), showCreatePendingOrderModal && /*#__PURE__*/(0,jsx_runtime.jsx)(CreatePendingOrderModal/* default */.Z, {
          host: data.account,
          onClose: function onClose() {
            return setShowCreatePendingOrderModal(false);
          },
          onSuccess: function onSuccess() {
            return refetch();
          }
        })]
      })]
    }), error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    }) : !loading && !((_data$orders = data.orders) !== null && _data$orders !== void 0 && _data$orders.nodes.length) ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-order-message",
      children: hasFilters ? /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
        id: "OrdersList.Empty",
        defaultMessage: [{
          "type": 0,
          "value": "No contributions match the given filters. "
        }, {
          "type": 8,
          "value": "ResetLink",
          "children": [{
            "type": 0,
            "value": "Reset"
          }]
        }, {
          "type": 0,
          "value": " to see all."
        }],
        values: {
          ResetLink: function ResetLink(text) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
              "data-cy": "reset-orders-filters",
              href: {
                pathname: router.asPath.split('?')[0],
                query: {}
              },
              children: text
            });
          }
        }
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.Z, {
        id: "orders.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No orders"
        }]
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(orders_OrdersList, {
        isLoading: loading,
        orders: data === null || data === void 0 ? void 0 : (_data$orders2 = data.orders) === null || _data$orders2 === void 0 ? void 0 : _data$orders2.nodes,
        nbPlaceholders: variables.limit,
        showPlatformTip: showPlatformTip
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
          total: data === null || data === void 0 ? void 0 : (_data$orders3 = data.orders) === null || _data$orders3 === void 0 ? void 0 : _data$orders3.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

OrdersWithData.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OrdersWithData",
  "props": {
    "accountSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "status": {
      "description": "If provided, only orders matching this status will be fetched",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "title": {
      "description": "An optional title to be used instead of \"Financial contributions\"",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "showPlatformTip": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canCreatePendingOrder": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var orders_OrdersWithData = (OrdersWithData);

/***/ }),

/***/ 15084:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q": function() { return /* binding */ MODERATION_CATEGORIES; },
/* harmony export */   "l": function() { return /* binding */ MODERATION_CATEGORIES_ALIASES; }
/* harmony export */ });
var MODERATION_CATEGORIES = {
  ADULT: 'Adult websites',
  AFFILIATE_REVIEW: 'Affiliate and review websites',
  // creating “review” pages for the sake of linking to Amazon
  CASINO_GAMBLING: 'Casinos and gambling',
  FINANCE_INSURANCE: 'Insurance & financial products (credit)',
  PHARMACY: 'Pharmacy products (weight loss, anti-aging)',
  SEO_AUDIENCE: 'SEO services & social media buying',
  // black-hat SEO services
  VPN_PROXY: 'VPN and proxy services',
  WRITER: 'Essay writing services'
};
var MODERATION_CATEGORIES_ALIASES = {
  ADULT: ['adult'],
  AFFILIATE_REVIEW: ['affiliate', 'review'],
  CASINO_GAMBLING: ['casino', 'gambling'],
  FINANCE_INSURANCE: ['finance', 'insurance', 'credit'],
  PHARMACY: ['pharmacy', 'pills', 'weightloss'],
  SEO_AUDIENCE: ['seo', 'audience'],
  VPN_PROXY: ['vpn', 'proxy'],
  WRITER: ['writer']
};

/***/ }),

/***/ 79618:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "S": function() { return /* binding */ editCollectiveMutation; },
/* harmony export */   "Z": function() { return /* binding */ addCreateCollectiveMutation; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(49376);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(78718);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87794);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16608);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32651);
/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(51719);




var _templateObject, _templateObject2;





var createCollectiveMutation = (0,_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N)
/* GraphQL */
(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_1___default()(["\n  mutation CreateCollective($collective: CollectiveInputType!) {\n    createCollective(collective: $collective) {\n      id\n      name\n      slug\n      type\n      website\n      twitterHandle\n      isIncognito\n    }\n  }\n"])));
var editCollectiveMutation = (0,_helpers__WEBPACK_IMPORTED_MODULE_4__/* .gqlV1 */ .N)
/* GraphQL */
(_templateObject2 || (_templateObject2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_1___default()(["\n  mutation EditCollective($collective: CollectiveInputType!) {\n    editCollective(collective: $collective) {\n      id\n      ...EditCollectivePageFields\n    }\n  }\n\n  ", "\n"])), _queries__WEBPACK_IMPORTED_MODULE_5__/* .editCollectivePageFieldsFragment */ .s9);
var addCreateCollectiveMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_6__/* .graphql */ .B)(createCollectiveMutation, {
  props: function props(_ref) {
    var mutate = _ref.mutate;
    return {
      createCollective: function () {
        var _createCollective = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(collective) {
          var CollectiveInputType;
          return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  CollectiveInputType = lodash_pick__WEBPACK_IMPORTED_MODULE_2___default()(collective, ['slug', 'type', 'name', 'image', 'description', 'longDescription', 'location', 'privateInstructions', 'twitterHandle', 'githubHandle', 'website', 'tags', 'startsAt', 'endsAt', 'timezone', 'currency', 'quantity', 'HostCollectiveId', 'ParentCollectiveId', 'isIncognito', 'settings']);
                  CollectiveInputType.tiers = (collective.tiers || []).map(function (tier) {
                    return lodash_pick__WEBPACK_IMPORTED_MODULE_2___default()(tier, ['type', 'name', 'description', 'amount', 'maxQuantity']);
                  });
                  CollectiveInputType.location = lodash_pick__WEBPACK_IMPORTED_MODULE_2___default()(collective.location, ['name', 'address', 'lat', 'long', 'country']);
                  _context.next = 5;
                  return mutate({
                    variables: {
                      collective: CollectiveInputType
                    }
                  });

                case 5:
                  return _context.abrupt("return", _context.sent);

                case 6:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee);
        }));

        function createCollective(_x) {
          return _createCollective.apply(this, arguments);
        }

        return createCollective;
      }()
    };
  }
});

/***/ }),

/***/ 19123:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D": function() { return /* binding */ usePrevious; }
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67294);

/**
 * Holds the previous value. Useful to reproduce a `componentDidUpdate(prevProps)` behavior
 * in a hook component.
 */

var usePrevious = function usePrevious(value) {
  var ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {
    ref.current = value;
  });
  return ref.current;
};

/***/ }),

/***/ 5879:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ admin_panel; }
});

// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__(930);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js
var client = __webpack_require__(46829);
// EXTERNAL MODULE: ./node_modules/next/router.js
var next_router = __webpack_require__(11163);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/index.js + 3 modules
var lib = __webpack_require__(59448);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js
var components_message = __webpack_require__(44012);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/useIntl.js
var useIntl = __webpack_require__(86896);
// EXTERNAL MODULE: ./lib/collective.lib.js
var collective_lib = __webpack_require__(5700);
// EXTERNAL MODULE: ./lib/constants/roles.js
var roles = __webpack_require__(98216);
// EXTERNAL MODULE: ./lib/graphql/helpers.js
var helpers = __webpack_require__(32651);
// EXTERNAL MODULE: ./lib/hooks/useLoggedInUser.ts
var useLoggedInUser = __webpack_require__(62131);
// EXTERNAL MODULE: ./lib/policies.ts
var policies = __webpack_require__(43176);
// EXTERNAL MODULE: ./lib/constants/collectives.js
var constants_collectives = __webpack_require__(82525);
;// CONCATENATED MODULE: ./components/admin-panel/constants.js


var _defineMessages, _defineMessages2;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



var USER = constants_collectives/* CollectiveType.USER */.eV.USER,
    ORGANIZATION = constants_collectives/* CollectiveType.ORGANIZATION */.eV.ORGANIZATION,
    COLLECTIVE = constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE,
    FUND = constants_collectives/* CollectiveType.FUND */.eV.FUND,
    EVENT = constants_collectives/* CollectiveType.EVENT */.eV.EVENT,
    PROJECT = constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT;
var HOST_DASHBOARD_SECTIONS = {
  // New Host Dashboard
  BUDGET_MANAGEMENT: 'budget',
  COLLECTIVES: 'collectives',
  OVERVIEW: 'info',
  REPORTS: 'reports',
  // Existing Host Dashboard Sections
  EXPENSES: 'expenses',
  FINANCIAL_CONTRIBUTIONS: 'orders',
  PENDING_CONTRIBUTIONS: 'pending-contributions',
  HOSTED_COLLECTIVES: 'hosted-collectives',
  HOST_VIRTUAL_CARDS: 'host-virtual-cards',
  PENDING_APPLICATIONS: 'pending-applications'
};
var ABOUT_ORG_SECTIONS = {
  COLLECTIVE_PAGE: 'collective-page',
  CONNECTED_ACCOUNTS: 'connected-accounts',
  INFO: 'info',
  TEAM: 'team'
};
var ORG_BUDGET_SECTIONS = {
  GIFT_CARDS: 'gift-cards',
  CREATE_GIFT_CARDS: 'gift-cards-create',
  PAYMENT_METHODS: 'payment-methods',
  PAYMENT_RECEIPTS: 'payment-receipts',
  FINANCIAL_CONTRIBUTIONS: 'orders',
  TIERS: 'tiers' // Manage Contributions

};
var FISCAL_HOST_SECTIONS = {
  FISCAL_HOSTING: 'fiscal-hosting',
  SECURITY: 'security',
  HOST_VIRTUAL_CARDS: 'host-virtual-cards',
  HOST_VIRTUAL_CARDS_SETTINGS: 'host-virtual-cards-settings',
  INVOICES_RECEIPTS: 'invoices-receipts',
  POLICIES: 'policies',
  RECEIVING_MONEY: 'receiving-money',
  SENDING_MONEY: 'sending-money'
};
var COLLECTIVE_SECTIONS = {
  ADVANCED: 'advanced',
  AUTHORIZED_APPS: 'authorized-apps',
  COLLECTIVE_GOALS: 'goals',
  COLLECTIVE_PAGE: 'collective-page',
  CONNECTED_ACCOUNTS: 'connected-accounts',
  EXPORT: 'export',
  FOR_DEVELOPERS: 'for-developers',
  HOST: 'host',
  INFO: 'info',
  PAYMENT_METHODS: 'payment-methods',
  PAYMENT_RECEIPTS: 'payment-receipts',
  NOTIFICATIONS: 'notifications',
  POLICIES: 'policies',
  CUSTOM_EMAIL: 'custom-email',
  TEAM: 'team',
  TICKETS: 'tickets',
  TIERS: 'tiers',
  USER_SECURITY: 'user-security',
  VIRTUAL_CARDS: 'virtual-cards',
  WEBHOOKS: 'webhooks',
  ACTIVITY_LOG: 'activity-log'
};
var LEGACY_COLLECTIVE_SETTINGS_SECTIONS = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, COLLECTIVE_SECTIONS), ABOUT_ORG_SECTIONS), ORG_BUDGET_SECTIONS), FISCAL_HOST_SECTIONS);
var ALL_SECTIONS = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, COLLECTIVE_SECTIONS), ABOUT_ORG_SECTIONS), ORG_BUDGET_SECTIONS), FISCAL_HOST_SECTIONS), HOST_DASHBOARD_SECTIONS);
var SECTIONS_ACCESSIBLE_TO_ACCOUNTANTS = [ALL_SECTIONS.REPORTS, ALL_SECTIONS.PAYMENT_RECEIPTS];
var PAGE_TITLES = (0,lib.defineMessages)((_defineMessages = {}, defineProperty_default()(_defineMessages, USER, {
  id: "AdminPanel.UserSettings",
  defaultMessage: [{
    "type": 0,
    "value": "User Settings"
  }]
}), defineProperty_default()(_defineMessages, ORGANIZATION, {
  id: "AdminPanel.OrganizationSettings",
  defaultMessage: [{
    "type": 0,
    "value": "Organization Settings"
  }]
}), defineProperty_default()(_defineMessages, COLLECTIVE, {
  id: "AdminPanel.CollectiveSettings",
  defaultMessage: [{
    "type": 0,
    "value": "Collective Settings"
  }]
}), defineProperty_default()(_defineMessages, FUND, {
  id: "AdminPanel.FundSettings",
  defaultMessage: [{
    "type": 0,
    "value": "Fund Settings"
  }]
}), defineProperty_default()(_defineMessages, EVENT, {
  id: "AdminPanel.EventSettings",
  defaultMessage: [{
    "type": 0,
    "value": "Event Settings"
  }]
}), defineProperty_default()(_defineMessages, PROJECT, {
  id: "AdminPanel.ProjectSettings",
  defaultMessage: [{
    "type": 0,
    "value": "Project Settings"
  }]
}), _defineMessages));
var SECTION_LABELS = (0,lib.defineMessages)((_defineMessages2 = {}, defineProperty_default()(_defineMessages2, ALL_SECTIONS.ACTIVITY_LOG, {
  id: "t0lUqz",
  defaultMessage: [{
    "type": 0,
    "value": "Activity log"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.EXPENSES, {
  id: "Expenses",
  defaultMessage: [{
    "type": 0,
    "value": "Expenses"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.FINANCIAL_CONTRIBUTIONS, {
  id: "FinancialContributions",
  defaultMessage: [{
    "type": 0,
    "value": "Financial Contributions"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.PENDING_CONTRIBUTIONS, {
  id: "PendingContributions",
  defaultMessage: [{
    "type": 0,
    "value": "Pending Contributions"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.PENDING_APPLICATIONS, {
  id: "AdminPanel.Menu.PendingApplications",
  defaultMessage: [{
    "type": 0,
    "value": "Pending Applications"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.OVERVIEW, {
  id: "AdminPanel.Menu.Overview",
  defaultMessage: [{
    "type": 0,
    "value": "Overview"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.BUDGET_MANAGEMENT, {
  id: "AdminPanel.Menu.Overview",
  defaultMessage: [{
    "type": 0,
    "value": "Overview"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.COLLECTIVES, {
  id: "Collectives",
  defaultMessage: [{
    "type": 0,
    "value": "Collectives"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.REPORTS, {
  id: "Reports",
  defaultMessage: [{
    "type": 0,
    "value": "Reports"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.ADVANCED, {
  id: "editCollective.menu.advanced",
  defaultMessage: [{
    "type": 0,
    "value": "Advanced"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.COLLECTIVE_GOALS, {
  id: "Goals",
  defaultMessage: [{
    "type": 0,
    "value": "Goals"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.COLLECTIVE_PAGE, {
  id: "editCollective.menu.collectivePage",
  defaultMessage: [{
    "type": 0,
    "value": "Profile Page"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.CONNECTED_ACCOUNTS, {
  id: "editCollective.menu.connectedAccounts",
  defaultMessage: [{
    "type": 0,
    "value": "Connected Accounts"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.UPDATES, {
  id: "updates",
  defaultMessage: [{
    "type": 0,
    "value": "Updates"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.CONVERSATIONS, {
  id: "conversations",
  defaultMessage: [{
    "type": 0,
    "value": "Conversations"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.EXPORT, {
  id: "editCollective.menu.export",
  defaultMessage: [{
    "type": 0,
    "value": "Export"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.POLICIES, {
  id: "editCollective.menu.policies",
  defaultMessage: [{
    "type": 0,
    "value": "Policies"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.CUSTOM_EMAIL, {
  id: "aw01NT",
  defaultMessage: [{
    "type": 0,
    "value": "Custom Email"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.HOST, {
  id: "Fiscalhost",
  defaultMessage: [{
    "type": 0,
    "value": "Fiscal Host"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.INFO, {
  id: "editCollective.menu.info",
  defaultMessage: [{
    "type": 0,
    "value": "Info"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.INVOICES_RECEIPTS, {
  id: "becomeASponsor.invoiceReceipts",
  defaultMessage: [{
    "type": 0,
    "value": "Invoices & Receipts"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.RECEIVING_MONEY, {
  id: "editCollective.receivingMoney",
  defaultMessage: [{
    "type": 0,
    "value": "Receiving Money"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.SENDING_MONEY, {
  id: "editCollective.sendingMoney",
  defaultMessage: [{
    "type": 0,
    "value": "Sending Money"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.FISCAL_HOSTING, {
  id: "editCollective.fiscalHosting",
  defaultMessage: [{
    "type": 0,
    "value": "Fiscal Hosting"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.TEAM, {
  id: "ContributorsFilter.Core",
  defaultMessage: [{
    "type": 0,
    "value": "Team"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.PAYMENT_METHODS, {
  id: "editCollective.menu.paymentMethods",
  defaultMessage: [{
    "type": 0,
    "value": "Payment Methods"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.TIERS, {
  id: "Tiers",
  defaultMessage: [{
    "type": 0,
    "value": "Tiers"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.GIFT_CARDS, {
  id: "editCollective.menu.giftCards",
  defaultMessage: [{
    "type": 0,
    "value": "Gift Cards"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.WEBHOOKS, {
  id: "editCollective.menu.webhooks",
  defaultMessage: [{
    "type": 0,
    "value": "Webhooks"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.AUTHORIZED_APPS, {
  id: "+o/Xal",
  defaultMessage: [{
    "type": 0,
    "value": "Authorized Apps"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.FOR_DEVELOPERS, {
  id: "o0kPeK",
  defaultMessage: [{
    "type": 0,
    "value": "For developers"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.TICKETS, {
  id: "section.tickets.title",
  defaultMessage: [{
    "type": 0,
    "value": "Tickets"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.USER_SECURITY, {
  id: "Security",
  defaultMessage: [{
    "type": 0,
    "value": "Security"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.PAYMENT_RECEIPTS, {
  id: "editCollective.menu.paymentReceipts",
  defaultMessage: [{
    "type": 0,
    "value": "Payment Receipts"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.SECURITY, {
  id: "Security",
  defaultMessage: [{
    "type": 0,
    "value": "Security"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.HOST_VIRTUAL_CARDS, {
  id: "VirtualCards.Title",
  defaultMessage: [{
    "type": 0,
    "value": "Virtual Cards"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS, {
  id: "VirtualCardsSettings.Title",
  defaultMessage: [{
    "type": 0,
    "value": "Virtual Cards Settings"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.VIRTUAL_CARDS, {
  id: "VirtualCards.Title",
  defaultMessage: [{
    "type": 0,
    "value": "Virtual Cards"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.HOSTED_COLLECTIVES, {
  id: "HostedCollectives",
  defaultMessage: [{
    "type": 0,
    "value": "Hosted Collectives"
  }]
}), defineProperty_default()(_defineMessages2, ALL_SECTIONS.NOTIFICATIONS, {
  id: "NotificationsSettings.Title",
  defaultMessage: [{
    "type": 0,
    "value": "Notification Settings"
  }]
}), _defineMessages2));
;// CONCATENATED MODULE: ./components/admin-panel/AdminPanelContext.js


var AdminPanelContext = /*#__PURE__*/react.createContext({
  selectedSection: ALL_SECTIONS.INFO
});
// EXTERNAL MODULE: ./node_modules/lodash/values.js
var values = __webpack_require__(52628);
var values_default = /*#__PURE__*/__webpack_require__.n(values);
// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js + 3 modules
var styled_components_browser_esm = __webpack_require__(52015);
// EXTERNAL MODULE: ./components/Container.tsx
var Container = __webpack_require__(69078);
// EXTERNAL MODULE: ./components/Grid.ts
var Grid = __webpack_require__(16159);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/slicedToArray.js
var slicedToArray = __webpack_require__(85696);
var slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/taggedTemplateLiteral.js
var taggedTemplateLiteral = __webpack_require__(92358);
var taggedTemplateLiteral_default = /*#__PURE__*/__webpack_require__.n(taggedTemplateLiteral);
// EXTERNAL MODULE: ./node_modules/lodash/omitBy.js
var omitBy = __webpack_require__(14176);
var omitBy_default = /*#__PURE__*/__webpack_require__.n(omitBy);
// EXTERNAL MODULE: ./node_modules/graphql-tag/lib/index.js + 13 modules
var graphql_tag_lib = __webpack_require__(15020);
// EXTERNAL MODULE: ./components/LoadingPlaceholder.tsx
var LoadingPlaceholder = __webpack_require__(29242);
// EXTERNAL MODULE: ./components/MessageBox.tsx + 2 modules
var MessageBox = __webpack_require__(86702);
// EXTERNAL MODULE: ./components/MessageBoxGraphqlError.js
var MessageBoxGraphqlError = __webpack_require__(68185);
// EXTERNAL MODULE: ./components/Pagination.js
var Pagination = __webpack_require__(79045);
// EXTERNAL MODULE: ./components/SearchBar.js
var SearchBar = __webpack_require__(32606);
// EXTERNAL MODULE: ./components/StyledHr.tsx
var StyledHr = __webpack_require__(173);
// EXTERNAL MODULE: ./components/Text.ts
var Text = __webpack_require__(90998);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(3323);
var objectWithoutProperties_default = /*#__PURE__*/__webpack_require__.n(objectWithoutProperties);
;// CONCATENATED MODULE: ./lib/constants/host-fee-structure.js
var HOST_FEE_STRUCTURE = {
  DEFAULT: 'DEFAULT',
  MONTHLY_RETAINER: 'MONTHLY_RETAINER',
  CUSTOM_FEE: 'CUSTOM_FEE'
};
;// CONCATENATED MODULE: ./lib/i18n/host-fee-structure.js


var host_fee_structure_defineMessages;



var TypesI18n = (0,lib.defineMessages)((host_fee_structure_defineMessages = {
  ALL: {
    id: "HostFee.AllTypes",
    defaultMessage: [{
      "type": 0,
      "value": "All"
    }]
  }
}, defineProperty_default()(host_fee_structure_defineMessages, HOST_FEE_STRUCTURE.DEFAULT, {
  id: "HostFee.Global",
  defaultMessage: [{
    "type": 0,
    "value": "Global host fees"
  }]
}), defineProperty_default()(host_fee_structure_defineMessages, HOST_FEE_STRUCTURE.CUSTOM_FEE, {
  id: "HostFee.Custom",
  defaultMessage: [{
    "type": 0,
    "value": "Custom fee"
  }]
}), defineProperty_default()(host_fee_structure_defineMessages, HOST_FEE_STRUCTURE.MONTHLY_RETAINER, {
  id: "HostFee.MonthlyRetainer",
  defaultMessage: [{
    "type": 0,
    "value": "Monthly retainer"
  }]
}), host_fee_structure_defineMessages));
/**
 * Translate a member role
 *
 * @param {object} `intl` - see `injectIntl`
 * @param {string} `type`
 */

var formatHostFeeStructure = function formatHostFeeStructure(intl, type) {
  var i18nMsg = TypesI18n[type];
  return i18nMsg ? intl.formatMessage(i18nMsg) : type;
};
// EXTERNAL MODULE: ./components/StyledSelectFilter.js
var StyledSelectFilter = __webpack_require__(52847);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./components/host-dashboard/admin-collective-filters/CollectiveHostFeeStructureFilter.js


var _excluded = ["value", "onChange"];

function CollectiveHostFeeStructureFilter_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveHostFeeStructureFilter_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveHostFeeStructureFilter_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveHostFeeStructureFilter_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }








var CollectiveHostFeeStructureFilter = function CollectiveHostFeeStructureFilter(_ref) {
  var value = _ref.value,
      _onChange = _ref.onChange,
      props = objectWithoutProperties_default()(_ref, _excluded);

  var intl = (0,useIntl/* default */.Z)();

  var getOption = function getOption(value) {
    return {
      label: formatHostFeeStructure(intl, value),
      value: value
    };
  };

  var optionAll = getOption('ALL');
  var options = [optionAll, getOption(HOST_FEE_STRUCTURE.DEFAULT), getOption(HOST_FEE_STRUCTURE.CUSTOM_FEE)];
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, CollectiveHostFeeStructureFilter_objectSpread({
    inputId: "fee-structure-filter",
    value: value ? getOption(value) : optionAll,
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    options: options
  }, props));
};

CollectiveHostFeeStructureFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveHostFeeStructureFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var admin_collective_filters_CollectiveHostFeeStructureFilter = (CollectiveHostFeeStructureFilter);
;// CONCATENATED MODULE: ./components/host-dashboard/admin-collective-filters/CollectiveSortByFilter.js


var CollectiveSortByFilter_excluded = ["value", "onChange"];

function CollectiveSortByFilter_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveSortByFilter_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveSortByFilter_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveSortByFilter_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





var labels = (0,lib.defineMessages)({
  'most-recent': {
    id: "Collectives.MostRecent",
    defaultMessage: [{
      "type": 0,
      "value": "Most recent"
    }]
  },
  oldest: {
    id: "Collectives.Oldest",
    defaultMessage: [{
      "type": 0,
      "value": "Oldest"
    }]
  }
});

var CollectiveSortByFilter = function CollectiveSortByFilter(_ref) {
  var value = _ref.value,
      _onChange = _ref.onChange,
      props = objectWithoutProperties_default()(_ref, CollectiveSortByFilter_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var getOption = function getOption(value) {
    return {
      label: intl.formatMessage(labels[value]),
      value: value
    };
  };

  var options = [getOption('most-recent'), getOption('oldest')];
  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, CollectiveSortByFilter_objectSpread({
    inputId: "collective-sort-filter",
    value: labels[value] ? getOption(value) : options[0],
    onChange: function onChange(_ref2) {
      var value = _ref2.value;
      return _onChange(value);
    },
    options: options
  }, props));
};

CollectiveSortByFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSortByFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var admin_collective_filters_CollectiveSortByFilter = (CollectiveSortByFilter);
;// CONCATENATED MODULE: ./components/host-dashboard/HostAdminCollectiveFilters.js


function HostAdminCollectiveFilters_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostAdminCollectiveFilters_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostAdminCollectiveFilters_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostAdminCollectiveFilters_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var FilterLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "HostAdminCollectiveFilters__FilterLabel",
  componentId: "sc-1q9gbkr-0"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);
var COLLECTIVE_FILTER = {
  SORT_BY: 'sort-by',
  FEE_STRUCTURE: 'fees-structure'
};

var HostAdminCollectiveFilters = function HostAdminCollectiveFilters(_ref) {
  var filters = _ref.filters,
      values = _ref.values,
      _onChange = _ref.onChange;

  var getFilterProps = function getFilterProps(name) {
    return {
      inputId: "collectives-filter-".concat(name),
      value: values === null || values === void 0 ? void 0 : values[name],
      onChange: function onChange(value) {
        _onChange(HostAdminCollectiveFilters_objectSpread(HostAdminCollectiveFilters_objectSpread({}, values), {}, defineProperty_default()({}, name, value === 'ALL' ? null : value)));
      }
    };
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
    gridGap: 18,
    gridTemplateColumns: ['1fr', '1fr 1fr'],
    maxWidth: 400,
    children: [filters.includes(COLLECTIVE_FILTER.SORT_BY) && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "collectives-filter-sort-by",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "SortBy",
          defaultMessage: [{
            "type": 0,
            "value": "Sort by"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(admin_collective_filters_CollectiveSortByFilter, HostAdminCollectiveFilters_objectSpread({}, getFilterProps(COLLECTIVE_FILTER.SORT_BY)))]
    }), filters.includes(COLLECTIVE_FILTER.FEE_STRUCTURE) && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FilterLabel, {
        htmlFor: "collectives-filter-fees-structure",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FeeStructure",
          defaultMessage: [{
            "type": 0,
            "value": "Fee structure"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(admin_collective_filters_CollectiveHostFeeStructureFilter, HostAdminCollectiveFilters_objectSpread({}, getFilterProps(COLLECTIVE_FILTER.FEE_STRUCTURE)))]
    })]
  });
};

HostAdminCollectiveFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveFilters",
  "props": {
    "filters": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "enum",
          "value": [{
            "value": "\"fees-structure\"",
            "computed": false
          }, {
            "value": "\"sort-by\"",
            "computed": false
          }]
        }
      },
      "required": true
    },
    "values": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_HostAdminCollectiveFilters = (HostAdminCollectiveFilters);
// EXTERNAL MODULE: ./components/host-dashboard/applications/PendingApplication.js + 3 modules
var PendingApplication = __webpack_require__(25706);
;// CONCATENATED MODULE: ./components/host-dashboard/applications/PendingApplications.js





var _templateObject;

function PendingApplications_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function PendingApplications_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? PendingApplications_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : PendingApplications_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















var COLLECTIVES_PER_PAGE = 20;
var pendingApplicationsQuery = (0,graphql_tag_lib/* default */.ZP)(_templateObject || (_templateObject = taggedTemplateLiteral_default()(["\n  query HostDashboardPendingApplications(\n    $hostSlug: String!\n    $limit: Int!\n    $offset: Int!\n    $orderBy: ChronologicalOrderInput!\n    $searchTerm: String\n  ) {\n    host(slug: $hostSlug) {\n      id\n      slug\n      name\n      type\n      settings\n      policies {\n        COLLECTIVE_MINIMUM_ADMINS {\n          numberOfAdmins\n        }\n      }\n      pendingApplications(limit: $limit, offset: $offset, orderBy: $orderBy, searchTerm: $searchTerm) {\n        offset\n        limit\n        totalCount\n        nodes {\n          id\n          message\n          customData\n          account {\n            id\n            legacyId\n            name\n            slug\n            website\n            description\n            type\n            imageUrl(height: 96)\n            createdAt\n            ... on AccountWithHost {\n              ...ProcessHostApplicationFields\n            }\n            memberInvitations(role: [ADMIN]) {\n              id\n              role\n            }\n            admins: members(role: ADMIN) {\n              totalCount\n              nodes {\n                id\n                account {\n                  id\n                  type\n                  slug\n                  name\n                  imageUrl(height: 48)\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ", "\n"])), PendingApplication/* processApplicationAccountFields */.qM);

var checkIfQueryHasFilters = function checkIfQueryHasFilters(query) {
  return Object.entries(query).some(function (_ref) {
    var _ref2 = slicedToArray_default()(_ref, 2),
        key = _ref2[0],
        value = _ref2[1];

    return !['view', 'offset', 'limit', 'hostCollectiveSlug', 'sort-by'].includes(key) && value;
  });
};

var getVariablesFromQuery = function getVariablesFromQuery(query) {
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || COLLECTIVES_PER_PAGE,
    searchTerm: query.searchTerm,
    hostFeesStructure: query['fees-structure'],
    orderBy: {
      field: 'CREATED_AT',
      direction: query['sort-by'] === 'oldest' ? 'ASC' : 'DESC'
    }
  };
};

var ROUTE_PARAMS = ['hostCollectiveSlug', 'slug', 'section', 'view'];

var updateQuery = function updateQuery(router, newParams) {
  var query = omitBy_default()(PendingApplications_objectSpread(PendingApplications_objectSpread({}, router.query), newParams), function (value, key) {
    return !value || ROUTE_PARAMS.includes(key);
  });

  var pathname = router.asPath.split('?')[0];
  return router.push({
    pathname: pathname,
    query: query
  });
};

var PendingApplications = function PendingApplications(_ref3) {
  var _data$host;

  var hostSlug = _ref3.hostSlug;
  var router = (0,next_router.useRouter)() || {};
  var query = router.query;
  var hasFilters = react.useMemo(function () {
    return checkIfQueryHasFilters(query);
  }, [query]);

  var _useQuery = (0,client.useQuery)(pendingApplicationsQuery, {
    variables: PendingApplications_objectSpread({
      hostSlug: hostSlug
    }, getVariablesFromQuery(query)),
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      error = _useQuery.error,
      loading = _useQuery.loading,
      variables = _useQuery.variables;

  var hostApplications = data === null || data === void 0 ? void 0 : (_data$host = data.host) === null || _data$host === void 0 ? void 0 : _data$host.pendingApplications;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "host.dashboard.tab.pendingApplications",
          defaultMessage: [{
            "type": 0,
            "value": "Pending applications"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mx: "auto"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        p: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(SearchBar/* default */.Z, {
          defaultValue: query.searchTerm,
          onSubmit: function onSubmit(searchTerm) {
            return updateQuery(router, {
              searchTerm: searchTerm,
              offset: null
            });
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      mb: 26,
      borderWidth: "0.5px"
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mb: 34,
      children: data !== null && data !== void 0 && data.host ? /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_HostAdminCollectiveFilters, {
        filters: [COLLECTIVE_FILTER.SORT_BY],
        values: query,
        onChange: function onChange(queryParams) {
          return updateQuery(router, PendingApplications_objectSpread(PendingApplications_objectSpread({}, queryParams), {}, {
            offset: null
          }));
        }
      }) : loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 70
      }) : null
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error,
      mb: 2
    }), !error && !loading && !(hostApplications !== null && hostApplications !== void 0 && hostApplications.nodes.length) ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-collective-message",
      children: hasFilters ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "discover.searchNoResult",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives match the current search."
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "menu.collective.none",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives yet"
        }]
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [loading ? Array.from(new Array(COLLECTIVES_PER_PAGE)).map(function (_, index) {
        return (
          /*#__PURE__*/
          // eslint-disable-next-line react/no-array-index-key
          (0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 24,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
              height: 362,
              borderRadius: "8px"
            })
          }, index)
        );
      }) : hostApplications === null || hostApplications === void 0 ? void 0 : hostApplications.nodes.map(function (application) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 24,
          "data-cy": "host-application",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(PendingApplication/* default */.ZP, {
            host: data.host,
            application: application
          })
        }, application.id);
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
          total: hostApplications === null || hostApplications === void 0 ? void 0 : hostApplications.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: ROUTE_PARAMS
        })
      })]
    })]
  });
};

PendingApplications.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PendingApplications",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var applications_PendingApplications = (PendingApplications);
// EXTERNAL MODULE: ./node_modules/lodash/omit.js
var omit = __webpack_require__(57557);
var omit_default = /*#__PURE__*/__webpack_require__.n(omit);
// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(41609);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);
// EXTERNAL MODULE: ./lib/constants/expense-status.ts
var expense_status = __webpack_require__(38083);
// EXTERNAL MODULE: ./lib/date-utils.js
var date_utils = __webpack_require__(15078);
;// CONCATENATED MODULE: ./lib/hooks/useLazyGraphQLPaginatedResults.js


function useLazyGraphQLPaginatedResults_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function useLazyGraphQLPaginatedResults_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? useLazyGraphQLPaginatedResults_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : useLazyGraphQLPaginatedResults_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


var DEFAULT_OPTIONS = {
  /** Defines the percentage of items actually displayed */
  percentageDisplayed: 0.5
};
/**
 * An helper to work with dynamic paginated lists coming from GraphQL, intended to reduce
 * the load on server by loading a bigger batches at the start and updating the list in cache manually.
 */

var useLazyGraphQLPaginatedResults = function useLazyGraphQLPaginatedResults(query, key) {
  var _query$variables, _query$data, _results$nodes;

  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_OPTIONS;

  var allOptions = useLazyGraphQLPaginatedResults_objectSpread(useLazyGraphQLPaginatedResults_objectSpread({}, DEFAULT_OPTIONS), options);

  var limit = (query === null || query === void 0 ? void 0 : (_query$variables = query.variables) === null || _query$variables === void 0 ? void 0 : _query$variables.limit) || 0;
  var results = query === null || query === void 0 ? void 0 : (_query$data = query.data) === null || _query$data === void 0 ? void 0 : _query$data[key];
  var nbItemsDisplayed = limit * allOptions.percentageDisplayed;
  var resultsCount = (results === null || results === void 0 ? void 0 : (_results$nodes = results.nodes) === null || _results$nodes === void 0 ? void 0 : _results$nodes.length) || 0;
  var nodes = react.useMemo(function () {
    var _results$nodes2;

    return (results === null || results === void 0 ? void 0 : (_results$nodes2 = results.nodes) === null || _results$nodes2 === void 0 ? void 0 : _results$nodes2.slice(0, nbItemsDisplayed)) || [];
  }, [results, nbItemsDisplayed]); // Refetch when the number of items go below the threshold

  react.useEffect(function () {
    if (results && !query.loading && resultsCount <= nbItemsDisplayed && resultsCount < results.totalCount) {
      query.refetch();
    }
  }, [query === null || query === void 0 ? void 0 : query.loading, resultsCount, nbItemsDisplayed]);

  if (!results) {
    return {
      nodes: nodes,
      totalCount: 0,
      offset: 0,
      limit: nbItemsDisplayed
    };
  }

  return {
    offset: query.variables.offset,
    limit: nbItemsDisplayed,
    totalCount: results.totalCount,
    nodes: nodes
  };
};
// EXTERNAL MODULE: ./components/budget/filters/AmountFilter.js
var AmountFilter = __webpack_require__(93765);
// EXTERNAL MODULE: ./components/DismissibleMessage.js
var DismissibleMessage = __webpack_require__(94858);
// EXTERNAL MODULE: ./components/expenses/ExpensesFilters.js + 3 modules
var ExpensesFilters = __webpack_require__(47318);
// EXTERNAL MODULE: ./components/expenses/ExpensesList.js
var ExpensesList = __webpack_require__(11221);
// EXTERNAL MODULE: ./components/expenses/filters/ExpensesOrder.js
var ExpensesOrder = __webpack_require__(78877);
// EXTERNAL MODULE: ./components/expenses/graphql/fragments.ts
var fragments = __webpack_require__(17738);
// EXTERNAL MODULE: ./components/Link.js
var Link = __webpack_require__(92129);
// EXTERNAL MODULE: ./components/StyledButton.tsx
var StyledButton = __webpack_require__(87268);
// EXTERNAL MODULE: ./lib/payment-method-utils.js
var payment_method_utils = __webpack_require__(91337);
// EXTERNAL MODULE: ./components/FormattedMoneyAmount.js
var FormattedMoneyAmount = __webpack_require__(27596);
// EXTERNAL MODULE: ./components/icons/PayPal.js
var PayPal = __webpack_require__(43385);
// EXTERNAL MODULE: ./components/icons/TransferwiseIcon.js
var TransferwiseIcon = __webpack_require__(12173);
// EXTERNAL MODULE: ./components/LocationAddress.js
var LocationAddress = __webpack_require__(41627);
// EXTERNAL MODULE: ./components/StyledCard.tsx
var StyledCard = __webpack_require__(19156);
// EXTERNAL MODULE: ./components/StyledLink.tsx
var components_StyledLink = __webpack_require__(51082);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(49376);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(87794);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: ./lib/api.js
var api = __webpack_require__(65985);
// EXTERNAL MODULE: ./lib/hooks/useAsyncCall.js
var useAsyncCall = __webpack_require__(46233);
;// CONCATENATED MODULE: ./components/host-dashboard/ConnectPaypalButton.js








/**
 * A button for hosts to either connect or refill the balance for their PayPal account.
 */




var ConnectPaypalButton = function ConnectPaypalButton(_ref) {
  var host = _ref.host,
      paymentMethod = _ref.paymentMethod;

  var _useAsyncCall = (0,useAsyncCall/* useAsyncCall */.N)( /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
    var urlParams, json;
    return regenerator_default().wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            urlParams = {
              redirect: window.location.href,
              useNewFlow: true
            };
            _context.next = 3;
            return (0,api/* connectAccount */.Yn)(host.legacyId || host.id, 'paypal', urlParams);

          case 3:
            json = _context.sent;
            window.location.replace(json.redirectUrl); // Give some time (60s) for redirect

            return _context.abrupt("return", new Promise(function (resolve) {
              return setTimeout(resolve, 60000);
            }));

          case 6:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }))),
      loading = _useAsyncCall.loading,
      error = _useAsyncCall.error,
      call = _useAsyncCall.call;

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      withIcon: true,
      type: "error",
      fontSize: "10px",
      mb: 2,
      children: error.message || 'Oops, something went wrong. Please try again.'
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      buttonStyle: "secondary",
      isBorderless: true,
      buttonSize: "tiny",
      fontSize: "10px",
      fontWeight: "normal",
      loading: loading,
      onClick: call,
      minWidth: 85,
      children: paymentMethod ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "ConnectPaypal.refill",
        defaultMessage: [{
          "type": 0,
          "value": "Refill balance"
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "C9HmCs",
        defaultMessage: [{
          "type": 0,
          "value": "Connect "
        }, {
          "type": 1,
          "value": "service"
        }],
        values: {
          service: 'PayPal'
        }
      })
    })]
  });
};

ConnectPaypalButton.__docgenInfo = {
  "description": "A button for hosts to either connect or refill the balance for their PayPal account.",
  "methods": [],
  "displayName": "ConnectPaypalButton",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "union",
            "value": [{
              "name": "string"
            }, {
              "name": "number"
            }],
            "required": false
          },
          "legacyId": {
            "name": "number",
            "required": false
          }
        }
      },
      "required": true
    },
    "paymentMethod": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {}
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_ConnectPaypalButton = (ConnectPaypalButton);
;// CONCATENATED MODULE: ./components/host-dashboard/ConnectTransferwiseButton.js




/**
 * A button for hosts to either connect or refill the balance for their PayPal account.
 */



var ConnectTransferwiseButton = function ConnectTransferwiseButton(_ref) {
  var isConnected = _ref.isConnected;
  return /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
    openInNewTab: true,
    href: isConnected ? 'https://wise.com/user/account' : 'https://docs.opencollective.com/help/fiscal-hosts/payouts/payouts-with-transferwise#connecting-transferwise',
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      buttonStyle: "secondary",
      isBorderless: true,
      buttonSize: "tiny",
      fontSize: "10px",
      fontWeight: "normal",
      children: isConnected ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "ConnectPaypal.refill",
        defaultMessage: [{
          "type": 0,
          "value": "Refill balance"
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "C9HmCs",
        defaultMessage: [{
          "type": 0,
          "value": "Connect "
        }, {
          "type": 1,
          "value": "service"
        }],
        values: {
          service: 'Wise'
        }
      })
    })
  });
};

ConnectTransferwiseButton.__docgenInfo = {
  "description": "A button for hosts to either connect or refill the balance for their PayPal account.",
  "methods": [],
  "displayName": "ConnectTransferwiseButton",
  "props": {
    "isConnected": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_ConnectTransferwiseButton = (ConnectTransferwiseButton);
// EXTERNAL MODULE: ./node_modules/@styled-icons/fa-solid/ExclamationTriangle/ExclamationTriangle.esm.js
var ExclamationTriangle_esm = __webpack_require__(22046);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Info/Info.esm.js
var Info_esm = __webpack_require__(85236);
// EXTERNAL MODULE: ./components/StyledTooltip.js
var StyledTooltip = __webpack_require__(88609);
;// CONCATENATED MODULE: ./components/host-dashboard/PaypalPreApprovalDetailsIcon.js







var getPaypalExpiryInfo = function getPaypalExpiryInfo(paymentMethod) {
  var timeBeforeExpiry = new Date(paymentMethod.expiryDate) - new Date();
  var twoWeeks = 1000 * 60 * 60 * 24 * 14;

  if (timeBeforeExpiry <= 0) {
    return {
      icon: /*#__PURE__*/(0,jsx_runtime.jsx)(ExclamationTriangle_esm/* ExclamationTriangle */.S, {
        size: 16,
        color: "#E03F6A"
      }),
      message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "PaypalPreApproval.expired",
        defaultMessage: [{
          "type": 0,
          "value": "Your PayPal pre-approval has expired. To reconnect your account, click "
        }, {
          "type": 1,
          "value": "refillBalance"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          refillBalance: /*#__PURE__*/(0,jsx_runtime.jsx)("q", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "ConnectPaypal.refill",
              defaultMessage: [{
                "type": 0,
                "value": "Refill balance"
              }]
            })
          })
        }
      })
    };
  } else if (timeBeforeExpiry < twoWeeks) {
    return {
      icon: /*#__PURE__*/(0,jsx_runtime.jsx)(ExclamationTriangle_esm/* ExclamationTriangle */.S, {
        size: 16,
        color: "#E0E01B"
      }),
      message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "PaypalPreApproval.expireSoon",
        defaultMessage: [{
          "type": 0,
          "value": "Your PayPal pre-approval will expire on "
        }, {
          "type": 3,
          "value": "expiryDate",
          "style": "long"
        }, {
          "type": 0,
          "value": ". Renew it by clicking on "
        }, {
          "type": 1,
          "value": "refillBalance"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          expiryDate: new Date(paymentMethod.expiryDate),
          refillBalance: /*#__PURE__*/(0,jsx_runtime.jsx)("q", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "ConnectPaypal.refill",
              defaultMessage: [{
                "type": 0,
                "value": "Refill balance"
              }]
            })
          })
        }
      })
    };
  } else {
    return {
      icon: /*#__PURE__*/(0,jsx_runtime.jsx)(Info_esm/* Info */.k, {
        size: 18,
        color: "#76777A"
      }),
      message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "PaypalPreApproval.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Paypal account "
        }, {
          "type": 1,
          "value": "paypalEmail"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "createdAt",
          "style": "long"
        }, {
          "type": 0,
          "value": ". The token will expire on "
        }, {
          "type": 3,
          "value": "expiryDate",
          "style": "long"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          createdAt: new Date(paymentMethod.createdAt),
          expiryDate: new Date(paymentMethod.expiryDate),
          paypalEmail: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
            children: paymentMethod.name
          })
        }
      })
    };
  }
};

var PaypalPreApprovalDetailsIcon = function PaypalPreApprovalDetailsIcon(_ref) {
  var paymentMethod = _ref.paymentMethod;

  if (!paymentMethod) {
    return null;
  }

  var _getPaypalExpiryInfo = getPaypalExpiryInfo(paymentMethod),
      message = _getPaypalExpiryInfo.message,
      icon = _getPaypalExpiryInfo.icon;

  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
    content: message,
    children: icon
  });
};

PaypalPreApprovalDetailsIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PaypalPreApprovalDetailsIcon",
  "props": {
    "paymentMethod": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "name": {
            "name": "string",
            "required": false
          },
          "expiryDate": {
            "name": "string",
            "required": false
          },
          "balance": {
            "name": "shape",
            "value": {
              "valueInCents": {
                "name": "number",
                "required": false
              },
              "currency": {
                "name": "string",
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_PaypalPreApprovalDetailsIcon = (PaypalPreApprovalDetailsIcon);
;// CONCATENATED MODULE: ./components/host-dashboard/TransferwiseDetailsIcon.js







var BalancesBreakdown = function BalancesBreakdown(_ref) {
  var balances = _ref.balances;
  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    children: balances.map(function (_ref2) {
      var valueInCents = _ref2.valueInCents,
          currency = _ref2.currency;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [currency, ":\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
          amount: valueInCents,
          currency: currency,
          amountStyles: {
            color: '#FFFFFF',
            fontWeight: 'bold'
          },
          showCurrencyCode: false
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("br", {})]
      }, currency);
    })
  });
};

var TransferwiseDetailsIcon = function TransferwiseDetailsIcon(_ref3) {
  var size = _ref3.size,
      balances = _ref3.balances;

  if (!balances || balances.length < 2) {
    return null;
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
      content: function content() {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(BalancesBreakdown, {
          balances: balances
        });
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Info_esm/* Info */.k, {
        size: size,
        color: "#76777A"
      })
    });
  }
};

TransferwiseDetailsIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TransferwiseDetailsIcon",
  "props": {
    "size": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "balances": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_TransferwiseDetailsIcon = (TransferwiseDetailsIcon);
;// CONCATENATED MODULE: ./components/host-dashboard/HostInfoCard.js


var HostInfoCard_templateObject;























var hostInfoCardFields = (0,graphql_tag_lib/* default */.ZP)(HostInfoCard_templateObject || (HostInfoCard_templateObject = taggedTemplateLiteral_default()(["\n  fragment HostInfoCardFields on Host {\n    id\n    legacyId\n    slug\n    currency\n    location {\n      id\n      address\n      country\n    }\n    paypalPreApproval {\n      id\n      name\n      expiryDate\n      createdAt\n      balance {\n        currency\n        valueInCents\n      }\n    }\n    transferwiseBalances {\n      valueInCents\n      currency\n    }\n    stats {\n      id\n      balance {\n        valueInCents\n      }\n    }\n  }\n"])));
var ColumnTitle = styled_components_browser_esm/* default.span.withConfig */.ZP.span.withConfig({
  displayName: "HostInfoCard__ColumnTitle",
  componentId: "sc-19rwlgd-0"
})({
  textTransform: 'uppercase',
  color: 'black.600',
  fontSize: '9px',
  lineHeight: '14px',
  letterSpacing: '0.6px',
  fontWeight: '600',
  flex: '1 1',
  paddingTop: '3px'
});

var Separator = function Separator() {
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
    alignItems: "center",
    mx: [null, null, 24],
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      width: ['100%', null, '1px'],
      borderTop: [null, null, 'none'],
      height: ['1px', null, '60%'],
      my: [3, null, 0],
      borderLeft: "1px solid",
      borderColor: "black.200"
    })
  });
};

var getMainTransferwiseBalance = function getMainTransferwiseBalance(balances, hostCurrency) {
  if (!balances) {
    return null;
  } else {
    return balances.find(function (_ref) {
      var currency = _ref.currency;
      return currency === hostCurrency;
    }) || balances[0];
  }
};
/**
 * A box to display some info about the host, with links to refill the
 * PayPal & Transferwise balances.
 */


var HostInfoCard = function HostInfoCard(_ref2) {
  var _host$paypalPreApprov;

  var host = _ref2.host;
  var mainTransferwiseBalance = getMainTransferwiseBalance(host.transferwiseBalances, host.currency);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
    display: ['block', null, 'flex'],
    justifyContent: "space-evenly",
    px: 4,
    py: 22,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        alignItems: "center",
        width: "100%",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mr: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(PayPal/* default */.Z, {
            size: 14,
            style: {
              color: '#9D9FA3'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(ColumnTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ServiceBalance",
            defaultMessage: [{
              "type": 1,
              "value": "service"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              service: 'Paypal'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_PaypalPreApprovalDetailsIcon, {
          paymentMethod: host.paypalPreApproval
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        justifyContent: "space-between",
        py: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          color: "black.400",
          fontSize: "15px",
          children: host.currency
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          fontSize: "15px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
            showCurrencyCode: false,
            currency: ((_host$paypalPreApprov = host.paypalPreApproval) === null || _host$paypalPreApprov === void 0 ? void 0 : _host$paypalPreApprov.balance.currency) || host.currency,
            amount: !host.paypalPreApproval || (0,payment_method_utils/* hasPaypalPreApprovalExpired */.qi)(host.paypalPreApproval) ? null : host.paypalPreApproval.balance.valueInCents
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: "inline-block",
        ml: "-16px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_ConnectPaypalButton, {
          host: host,
          paymentMethod: host.paypalPreApproval
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Separator, {}), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        alignItems: "center",
        width: "100%",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mr: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(TransferwiseIcon/* default */.Z, {
            size: 14,
            color: "#9D9FA3"
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(ColumnTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ServiceBalance",
            defaultMessage: [{
              "type": 1,
              "value": "service"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              service: 'Wise'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_TransferwiseDetailsIcon, {
          size: 18,
          balances: host.transferwiseBalances
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        justifyContent: "space-between",
        py: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          color: "black.400",
          fontSize: "15px",
          children: (mainTransferwiseBalance === null || mainTransferwiseBalance === void 0 ? void 0 : mainTransferwiseBalance.currency) || host.currency
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          fontSize: "15px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
            showCurrencyCode: false,
            amount: mainTransferwiseBalance === null || mainTransferwiseBalance === void 0 ? void 0 : mainTransferwiseBalance.valueInCents,
            currency: (mainTransferwiseBalance === null || mainTransferwiseBalance === void 0 ? void 0 : mainTransferwiseBalance.currency) || host.currency
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: "inline-block",
        ml: "-16px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_ConnectTransferwiseButton, {
          isConnected: Boolean(host.transferwiseBalances)
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Separator, {}), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      justifyContent: "space-between",
      flex: "1 1 33%",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(ColumnTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "BillingAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Billing address"
            }]
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        fontSize: "10px",
        lineHeight: "15px",
        color: "black.500",
        my: 2,
        minHeight: 35,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(LocationAddress/* default */.Z, {
          location: host.location,
          showMessageIfEmpty: true
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
        as: Link/* default */.Z,
        href: "/".concat(host.slug, "/admin"),
        fontSize: "10px",
        lineHeight: "15px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Edit",
          defaultMessage: [{
            "type": 0,
            "value": "Edit"
          }]
        })
      })]
    })]
  });
};

HostInfoCard.__docgenInfo = {
  "description": "A box to display some info about the host, with links to refill the\nPayPal & Transferwise balances.",
  "methods": [],
  "displayName": "HostInfoCard",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "location": {
            "name": "object",
            "required": false
          },
          "paypalPreApproval": {
            "name": "shape",
            "value": {
              "expiryDate": {
                "name": "string",
                "required": false
              },
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  },
                  "currency": {
                    "name": "string",
                    "required": true
                  }
                },
                "required": true
              }
            },
            "required": false
          },
          "transferwiseBalances": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "valueInCents": {
                  "name": "number",
                  "required": false
                },
                "currency": {
                  "name": "string",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_HostInfoCard = (HostInfoCard);
// EXTERNAL MODULE: ./components/host-dashboard/ScheduledExpensesBanner.js
var ScheduledExpensesBanner = __webpack_require__(68953);
;// CONCATENATED MODULE: ./components/host-dashboard/HostDashboardExpenses.js







var HostDashboardExpenses_templateObject;

function HostDashboardExpenses_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostDashboardExpenses_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostDashboardExpenses_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostDashboardExpenses_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





























var hostDashboardExpensesQuery = (0,graphql_tag_lib/* default */.ZP)(HostDashboardExpenses_templateObject || (HostDashboardExpenses_templateObject = taggedTemplateLiteral_default()(["\n  query HostDashboardExpenses(\n    $hostSlug: String!\n    $limit: Int!\n    $offset: Int!\n    $type: ExpenseType\n    $tags: [String]\n    $status: ExpenseStatusFilter\n    $minAmount: Int\n    $maxAmount: Int\n    $payoutMethodType: PayoutMethodType\n    $dateFrom: DateTime\n    $dateTo: DateTime\n    $searchTerm: String\n    $orderBy: ChronologicalOrderInput\n  ) {\n    host(slug: $hostSlug) {\n      id\n      ...ExpenseHostFields\n      ...HostInfoCardFields\n      transferwise {\n        id\n        availableCurrencies\n      }\n    }\n    expenses(\n      host: { slug: $hostSlug }\n      limit: $limit\n      offset: $offset\n      type: $type\n      tag: $tags\n      status: $status\n      minAmount: $minAmount\n      maxAmount: $maxAmount\n      payoutMethodType: $payoutMethodType\n      dateFrom: $dateFrom\n      dateTo: $dateTo\n      searchTerm: $searchTerm\n      orderBy: $orderBy\n    ) {\n      totalCount\n      offset\n      limit\n      nodes {\n        id\n        ...ExpensesListFieldsFragment\n        ...ExpensesListAdminFieldsFragment\n      }\n    }\n  }\n\n  ", "\n  ", "\n  ", "\n  ", "\n"])), fragments/* expensesListFieldsFragment */.xe, fragments/* expensesListAdminFieldsFragment */.H2, fragments/* expenseHostFields */.RR, hostInfoCardFields);

var onExpenseUpdate = function onExpenseUpdate(updatedExpense, cache, filteredStatus) {
  if (updatedExpense.status !== filteredStatus) {
    cache.modify({
      fields: {
        expenses: function expenses(existingExpenses, _ref) {
          var readField = _ref.readField;

          if (!(existingExpenses !== null && existingExpenses !== void 0 && existingExpenses.nodes)) {
            return existingExpenses;
          } else {
            return HostDashboardExpenses_objectSpread(HostDashboardExpenses_objectSpread({}, existingExpenses), {}, {
              totalCount: existingExpenses.totalCount - 1,
              nodes: existingExpenses.nodes.filter(function (expense) {
                return updatedExpense.id !== readField('id', expense);
              })
            });
          }
        }
      }
    });
  }
};

var NB_EXPENSES_DISPLAYED = 10;

var isValidStatus = function isValidStatus(status) {
  return Boolean(status === 'READY_TO_PAY' || expense_status/* default */.Z[status]);
};

var HostDashboardExpenses_getVariablesFromQuery = function getVariablesFromQuery(query) {
  var amountRange = (0,AmountFilter/* parseAmountRange */.t)(query.amount);

  var _parseDateInterval = (0,date_utils/* parseDateInterval */.dr)(query.period),
      dateFrom = _parseDateInterval.from,
      dateTo = _parseDateInterval.to;

  var orderBy = query.orderBy && (0,ExpensesOrder/* parseChronologicalOrderInput */.P)(query.orderBy);
  return {
    offset: parseInt(query.offset) || 0,
    limit: (parseInt(query.limit) || NB_EXPENSES_DISPLAYED) * 2,
    status: isValidStatus(query.status) ? query.status : null,
    type: query.type,
    tags: query.tag ? [query.tag] : undefined,
    minAmount: amountRange[0] && amountRange[0] * 100,
    maxAmount: amountRange[1] && amountRange[1] * 100,
    payoutMethodType: query.payout,
    dateFrom: dateFrom,
    dateTo: dateTo,
    orderBy: orderBy,
    searchTerm: query.searchTerm
  };
};

var HostDashboardExpenses_ROUTE_PARAMS = ['hostCollectiveSlug', 'view', 'slug', 'section'];

var hasParams = function hasParams(query) {
  return Object.entries(query).some(function (_ref2) {
    var _ref3 = slicedToArray_default()(_ref2, 2),
        key = _ref3[0],
        value = _ref3[1];

    return ![].concat(HostDashboardExpenses_ROUTE_PARAMS, ['offset', 'limit', 'paypalApprovalError', 'orderBy']).includes(key) && value;
  });
};

var HostDashboardExpenses = function HostDashboardExpenses(_ref4) {
  var _data$expenses;

  var hostSlug = _ref4.hostSlug,
      isNewAdmin = _ref4.isNewAdmin;
  var router = (0,next_router.useRouter)() || {};
  var query = router.query;

  var _React$useState = react.useState(null),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      paypalPreApprovalError = _React$useState2[0],
      setPaypalPreApprovalError = _React$useState2[1];

  var hasFilters = react.useMemo(function () {
    return hasParams(query);
  }, [query]);
  var pageRoute = isNewAdmin ? "/".concat(hostSlug, "/admin/expenses") : "/".concat(hostSlug, "/dashboard/expenses");
  var expenses = (0,client.useQuery)(hostDashboardExpensesQuery, {
    variables: HostDashboardExpenses_objectSpread({
      hostSlug: hostSlug
    }, HostDashboardExpenses_getVariablesFromQuery(omitBy_default()(query, (isEmpty_default())))),
    context: helpers/* API_V2_CONTEXT */.T
  });
  var paginatedExpenses = useLazyGraphQLPaginatedResults(expenses, 'expenses');
  react.useEffect(function () {
    if (query.paypalApprovalError && !paypalPreApprovalError) {
      setPaypalPreApprovalError(query.paypalApprovalError);
      router.replace(pageRoute, omit_default()(query, 'paypalApprovalError'), {
        shallow: true
      });
    }
  }, [query.paypalApprovalError]);
  var data = expenses.data,
      error = expenses.error,
      loading = expenses.loading;

  var _ref5 = (data === null || data === void 0 ? void 0 : data.host) || {},
      hasDisputedOrders = _ref5.hasDisputedOrders,
      hasInReviewOrders = _ref5.hasInReviewOrders;

  var getQueryParams = function getQueryParams(newParams) {
    return omitBy_default()(HostDashboardExpenses_objectSpread(HostDashboardExpenses_objectSpread({}, router.query), newParams), function (value, key) {
      return !value || HostDashboardExpenses_ROUTE_PARAMS.includes(key);
    });
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [!loading && (hasDisputedOrders || hasInReviewOrders) && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "warning",
      withIcon: true,
      mb: 3,
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: hasDisputedOrders && hasInReviewOrders ? 'column' : 'row',
        gridGap: '8px',
        flexWrap: 'wrap',
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontWeight: 700,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "host.fraudProtectionWarning",
            defaultMessage: [{
              "type": 0,
              "value": "Fraud Protection Warning"
            }]
          })
        }), hasDisputedOrders && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "host.disputes.warning",
            defaultMessage: [{
              "type": 0,
              "value": "There are disputed charges that need review."
            }]
          }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: "/".concat(hostSlug, "/admin/orders?status=DISPUTED"),
            children: "Disputed Orders"
          }), ' ']
        }), hasInReviewOrders && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "host.in_review.warning",
            defaultMessage: [{
              "type": 0,
              "value": "There are charges under review that need attention."
            }]
          }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: "/".concat(hostSlug, "/admin/orders?status=IN_REVIEW"),
            children: "In Review Orders"
          }), ' ']
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      mb: 24,
      alignItems: "center",
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Expenses",
          defaultMessage: [{
            "type": 0,
            "value": "Expenses"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mx: "auto"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        p: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(SearchBar/* default */.Z, {
          defaultValue: query.searchTerm,
          onSubmit: function onSubmit(searchTerm) {
            return router.push({
              pathname: pageRoute,
              query: getQueryParams({
                searchTerm: searchTerm,
                offset: null
              })
            });
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      mb: 26,
      borderWidth: "0.5px",
      borderColor: "black.300"
    }), paypalPreApprovalError && /*#__PURE__*/(0,jsx_runtime.jsx)(DismissibleMessage/* default */.Z, {
      children: function children(_ref6) {
        var dismiss = _ref6.dismiss;
        return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "warning",
          mb: 3,
          withIcon: true,
          onClose: dismiss,
          children: paypalPreApprovalError === 'PRE_APPROVAL_EMAIL_CHANGED' ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paypal.preApproval.emailWarning",
            defaultMessage: [{
              "type": 0,
              "value": "Warning: the associated PayPal email was changed from "
            }, {
              "type": 1,
              "value": "oldEmail"
            }, {
              "type": 0,
              "value": " to "
            }, {
              "type": 1,
              "value": "newEmail"
            }, {
              "type": 0,
              "value": ". If this was not intentional, click "
            }, {
              "type": 1,
              "value": "refillBalance"
            }, {
              "type": 0,
              "value": " and use the correct account."
            }],
            values: {
              oldEmail: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
                children: query.oldPaypalEmail
              }),
              newEmail: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
                children: query.newPaypalEmail
              }),
              refillBalance: /*#__PURE__*/(0,jsx_runtime.jsx)("q", {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "ConnectPaypal.refill",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Refill balance"
                  }]
                })
              })
            }
          }) : paypalPreApprovalError
        });
      }
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mb: 4,
      children: loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 150
      }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
        error: error
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_HostInfoCard, {
        host: data.host
      })
    }), !expenses.loading && (data === null || data === void 0 ? void 0 : data.host) && /*#__PURE__*/(0,jsx_runtime.jsx)(ScheduledExpensesBanner/* default */.Z, {
      host: data.host,
      expenses: paginatedExpenses.nodes,
      onSubmit: function onSubmit() {
        expenses.refetch();
      },
      secondButton: !(query.status === 'SCHEDULED_FOR_PAYMENT' && query.payout === 'BANK_ACCOUNT') ? /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        buttonSize: "tiny",
        buttonStyle: "successSecondary",
        mr: 1,
        onClick: function onClick() {
          router.push({
            pathname: pageRoute,
            query: getQueryParams({
              status: 'SCHEDULED_FOR_PAYMENT',
              payout: 'BANK_ACCOUNT',
              offset: null
            })
          });
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "expenses.list",
          defaultMessage: [{
            "type": 0,
            "value": "List Expenses"
          }]
        })
      }) : null
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mb: 34,
      children: data !== null && data !== void 0 && data.host ? /*#__PURE__*/(0,jsx_runtime.jsx)(ExpensesFilters/* default */.Z, {
        collective: data.host,
        filters: query,
        onChange: function onChange(queryParams) {
          return router.push({
            pathname: pageRoute,
            query: getQueryParams(HostDashboardExpenses_objectSpread(HostDashboardExpenses_objectSpread({}, queryParams), {}, {
              offset: null
            }))
          });
        }
      }) : loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 70
      }) : null
    }), error ? null : !loading && !((_data$expenses = data.expenses) !== null && _data$expenses !== void 0 && _data$expenses.nodes.length) ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-expense-message",
      children: hasFilters ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "ExpensesList.Empty",
        defaultMessage: [{
          "type": 0,
          "value": "No expense matches the given filters, "
        }, {
          "type": 8,
          "value": "ResetLink",
          "children": [{
            "type": 0,
            "value": "reset them"
          }]
        }, {
          "type": 0,
          "value": " to see all expenses."
        }],
        values: {
          ResetLink: function ResetLink(text) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
              "data-cy": "reset-expenses-filters",
              href: {
                pathname: pageRoute
              },
              children: text
            });
          }
        }
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "expenses.empty",
        defaultMessage: [{
          "type": 0,
          "value": "No expenses"
        }]
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(ExpensesList/* default */.Z, {
        isLoading: loading,
        host: data === null || data === void 0 ? void 0 : data.host,
        nbPlaceholders: paginatedExpenses.limit,
        expenses: paginatedExpenses.nodes,
        view: "admin",
        onProcess: function onProcess(expense, cache) {
          hasFilters && onExpenseUpdate(expense, cache, query.status);
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
          route: pageRoute,
          total: paginatedExpenses.totalCount,
          limit: paginatedExpenses.limit,
          offset: paginatedExpenses.offset,
          ignoredQueryParams: HostDashboardExpenses_ROUTE_PARAMS
        })
      })]
    })]
  });
};

HostDashboardExpenses.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardExpenses",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "isNewAdmin": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_HostDashboardExpenses = (HostDashboardExpenses);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/SliderAlt/SliderAlt.esm.js
var SliderAlt_esm = __webpack_require__(40809);
// EXTERNAL MODULE: ./lib/currency-utils.js
var currency_utils = __webpack_require__(17632);
// EXTERNAL MODULE: ./components/StyledCollectiveCard.js
var StyledCollectiveCard = __webpack_require__(41216);
// EXTERNAL MODULE: ./components/StyledRoundButton.js
var StyledRoundButton = __webpack_require__(90012);
// EXTERNAL MODULE: ./components/host-dashboard/AddFundsModal.js
var AddFundsModal = __webpack_require__(29301);
// EXTERNAL MODULE: ./node_modules/lodash/round.js
var round = __webpack_require__(59854);
var round_default = /*#__PURE__*/__webpack_require__.n(round);
// EXTERNAL MODULE: ./node_modules/lodash/isNil.js
var isNil = __webpack_require__(14293);
var isNil_default = /*#__PURE__*/__webpack_require__.n(isNil);
// EXTERNAL MODULE: ./node_modules/lodash/isBoolean.js
var isBoolean = __webpack_require__(51584);
var isBoolean_default = /*#__PURE__*/__webpack_require__.n(isBoolean);
// EXTERNAL MODULE: ./node_modules/lodash/clamp.js
var clamp = __webpack_require__(74691);
var clamp_default = /*#__PURE__*/__webpack_require__.n(clamp);
// EXTERNAL MODULE: ./lib/constants/expenseTypes.ts
var expenseTypes = __webpack_require__(19878);
// EXTERNAL MODULE: ./lib/errors/index.js + 1 modules
var errors = __webpack_require__(12136);
// EXTERNAL MODULE: ./lib/i18n/expense.js
var expense = __webpack_require__(8480);
// EXTERNAL MODULE: ./components/I18nFormatters.js
var I18nFormatters = __webpack_require__(88705);
// EXTERNAL MODULE: ./components/StyledInputGroup.js
var StyledInputGroup = __webpack_require__(32631);
// EXTERNAL MODULE: ./components/StyledModal.tsx
var StyledModal = __webpack_require__(71792);
// EXTERNAL MODULE: ./components/StyledRadioList.js
var StyledRadioList = __webpack_require__(36718);
// EXTERNAL MODULE: ./components/StyledSelect.tsx
var StyledSelect = __webpack_require__(66943);
// EXTERNAL MODULE: ./components/ToastProvider.tsx
var ToastProvider = __webpack_require__(31330);
;// CONCATENATED MODULE: ./components/host-dashboard/CollectiveSettingsModal.js









var CollectiveSettingsModal_excluded = ["host", "collective"];

var CollectiveSettingsModal_defineMessages, CollectiveSettingsModal_templateObject;



function CollectiveSettingsModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveSettingsModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveSettingsModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveSettingsModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }























var OPTION_LABELS = (0,lib.defineMessages)((CollectiveSettingsModal_defineMessages = {}, defineProperty_default()(CollectiveSettingsModal_defineMessages, HOST_FEE_STRUCTURE.DEFAULT, {
  id: "CollectiveFeesForm.Default",
  defaultMessage: [{
    "type": 0,
    "value": "Use global host fees"
  }]
}), defineProperty_default()(CollectiveSettingsModal_defineMessages, HOST_FEE_STRUCTURE.CUSTOM_FEE, {
  id: "CollectiveFeesForm.CustomFees",
  defaultMessage: [{
    "type": 0,
    "value": "Set a custom fee for this Collective."
  }]
}), CollectiveSettingsModal_defineMessages));

var getDefaultFee = function getDefaultFee(collective, host) {
  if (isNil_default()(collective.hostFeePercent) || collective.hostFeePercent === host.hostFeePercent) {
    return host.hostFeePercent;
  } else {
    return collective.hostFeePercent;
  }
};

var editAccountSettingsMutation = (0,graphql_tag_lib/* default */.ZP)(CollectiveSettingsModal_templateObject || (CollectiveSettingsModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditAccountSettings(\n    $account: AccountReferenceInput!\n    $hostFeePercent: Float!\n    $isCustomFee: Boolean!\n    $key: AccountSettingsKey!\n    $value: JSON!\n  ) {\n    editAccountFeeStructure(account: $account, hostFeePercent: $hostFeePercent, isCustomFee: $isCustomFee) {\n      id\n      ... on AccountWithHost {\n        hostFeesStructure\n        hostFeePercent\n      }\n      childrenAccounts {\n        nodes {\n          id\n          ... on AccountWithHost {\n            hostFeesStructure\n            hostFeePercent\n          }\n        }\n      }\n    }\n\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      settings\n    }\n  }\n"])));
var DISPLAYED_EXPENSE_TYPES = [expenseTypes/* default.INVOICE */.Z.INVOICE, expenseTypes/* default.RECEIPT */.Z.RECEIPT, expenseTypes/* default.GRANT */.Z.GRANT];
var EXPENSE_TYPE_OPTIONS = [{
  value: null,
  label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
    id: "tdQA1F",
    defaultMessage: [{
      "type": 0,
      "value": "Use global host settings"
    }]
  })
}, {
  value: true,
  label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
    id: "V52jNn",
    defaultMessage: [{
      "type": 0,
      "value": "Enabled"
    }]
  })
}, {
  value: false,
  label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
    id: "tthToS",
    defaultMessage: [{
      "type": 0,
      "value": "Disabled"
    }]
  })
}];
var EXPENSE_TYPE_SELECT_STYLES = {
  option: {
    fontSize: '12px'
  }
};

var CollectiveSettingsModal = function CollectiveSettingsModal(_ref) {
  var host = _ref.host,
      collective = _ref.collective,
      props = objectWithoutProperties_default()(_ref, CollectiveSettingsModal_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useState = (0,react.useState)(getDefaultFee(collective, host)),
      hostFeePercent = _useState[0],
      setHostFeePercent = _useState[1];

  var _useState2 = (0,react.useState)(hostFeePercent === host.hostFeePercent ? HOST_FEE_STRUCTURE.DEFAULT : HOST_FEE_STRUCTURE.CUSTOM_FEE),
      selectedOption = _useState2[0],
      setSelectedOption = _useState2[1];

  var _React$useState = react.useState(function () {
    var _collective$settings;

    return ((_collective$settings = collective.settings) === null || _collective$settings === void 0 ? void 0 : _collective$settings.expenseTypes) || {};
  }),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      expenseTypes = _React$useState2[0],
      setExpenseTypes = _React$useState2[1];

  var _useMutation = (0,client.useMutation)(editAccountSettingsMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      submitEditSettings = _useMutation2[0],
      loading = _useMutation2[1].loading;

  var hasParent = Boolean(collective.parent);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, CollectiveSettingsModal_objectSpread(CollectiveSettingsModal_objectSpread({
    maxWidth: 432,
    trapFocus: true
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* CollectiveModalHeader */.I4, {
      collective: collective,
      mb: 3
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "7oAuzt",
          defaultMessage: [{
            "type": 0,
            "value": "Expense types"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        children: DISPLAYED_EXPENSE_TYPES.map(function (expenseType) {
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            mb: 3,
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              mr: 2,
              flex: "0 1 70px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
                htmlFor: "select-expense-type-".concat(expenseType),
                fontWeight: "normal",
                children: (0,expense/* i18nExpenseType */.kD)(intl, expenseType)
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
              inputId: "select-expense-type-".concat(expenseType),
              fontSize: "12px",
              minWidth: 195,
              styles: EXPENSE_TYPE_SELECT_STYLES,
              options: EXPENSE_TYPE_OPTIONS,
              onChange: function onChange(_ref2) {
                var value = _ref2.value;
                return setExpenseTypes(CollectiveSettingsModal_objectSpread(CollectiveSettingsModal_objectSpread({}, expenseTypes), {}, defineProperty_default()({}, expenseType, value)));
              },
              value: isBoolean_default()(expenseTypes[expenseType]) ? EXPENSE_TYPE_OPTIONS.find(function (_ref3) {
                var value = _ref3.value;
                return value === expenseTypes[expenseType];
              }) : EXPENSE_TYPE_OPTIONS[0]
            })]
          }, expenseType);
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "CollectiveFeesForm.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Set fee structure"
          }]
        })
      }), hasParent ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        type: "info",
        withIcon: true,
        lineHeight: "18px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "UlTOwN",
          defaultMessage: [{
            "type": 0,
            "value": "Events and Projects inherit the host fees structure configuration of their parents."
          }]
        })
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "2RrtBD",
            defaultMessage: [{
              "type": 0,
              "value": "This change will also apply to all the projects and events created by this collective"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledRadioList/* default */.ZP, {
          id: "fees-structure-radio",
          name: "fees-structure-radio",
          options: [HOST_FEE_STRUCTURE.DEFAULT, HOST_FEE_STRUCTURE.CUSTOM_FEE],
          value: selectedOption,
          onChange: function onChange(_ref4) {
            var value = _ref4.value;
            return setSelectedOption(value);
          },
          children: function children(_ref5) {
            var key = _ref5.key,
                radio = _ref5.radio;
            return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              mt: 3,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                mr: 12,
                children: radio
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                  mb: 2,
                  fontWeight: "500",
                  children: intl.formatMessage(OPTION_LABELS[key])
                }), key === HOST_FEE_STRUCTURE.DEFAULT && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                  fontSize: "11px",
                  lineHeight: "16px",
                  color: "black.600",
                  fontWeight: "normal",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "CollectiveFeesForm.DefaultDescription",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Set the global (default) fee in your "
                    }, {
                      "type": 8,
                      "value": "Link",
                      "children": [{
                        "type": 0,
                        "value": "settings"
                      }]
                    }, {
                      "type": 0,
                      "value": "."
                    }],
                    values: {
                      Link: (0,I18nFormatters/* getI18nLink */.fw)({
                        as: Link/* default */.Z,
                        href: "/".concat(host.slug, "/admin/").concat(ALL_SECTIONS.FISCAL_HOSTING),
                        openInNewTab: true
                      })
                    }
                  })
                }), key === HOST_FEE_STRUCTURE.CUSTOM_FEE && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputGroup/* default */.Z, {
                  append: "%",
                  type: "number",
                  min: "0",
                  max: "100",
                  maxWidth: 90,
                  appendProps: {
                    color: 'black.600'
                  },
                  fontWeight: "normal",
                  value: isNaN(hostFeePercent) ? '' : hostFeePercent,
                  step: "0.01",
                  onClick: function onClick() {
                    return setSelectedOption(key);
                  },
                  onChange: function onChange(e) {
                    return setHostFeePercent(parseFloat(e.target.value));
                  },
                  onBlur: function onBlur(e) {
                    var newValue = clamp_default()(round_default()(parseFloat(e.target.value), 2), 0, 100);

                    setHostFeePercent(isNaN(newValue) ? host.hostFeePercent : newValue);
                  }
                })]
              })]
            }, key);
          }
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        justifyContent: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "primary",
          minWidth: 90,
          loading: loading,
          onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
            var isCustomFee;
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    isCustomFee = selectedOption === HOST_FEE_STRUCTURE.CUSTOM_FEE;
                    _context.prev = 1;
                    _context.next = 4;
                    return submitEditSettings({
                      variables: {
                        account: {
                          id: collective.id
                        },
                        hostFeePercent: isCustomFee ? hostFeePercent : host.hostFeePercent,
                        isCustomFee: isCustomFee,
                        key: 'expenseTypes',
                        value: expenseTypes
                      }
                    });

                  case 4:
                    props === null || props === void 0 ? void 0 : props.onClose();
                    _context.next = 10;
                    break;

                  case 7:
                    _context.prev = 7;
                    _context.t0 = _context["catch"](1);
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                      variant: 'light',
                      message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                    });

                  case 10:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, null, [[1, 7]]);
          })),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          ml: 3,
          minWidth: 90,
          onClick: props.onClose,
          disabled: loading,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "actions.cancel",
            defaultMessage: [{
              "type": 0,
              "value": "Cancel"
            }]
          })
        })]
      })
    })]
  }));
};

CollectiveSettingsModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSettingsModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_CollectiveSettingsModal = (CollectiveSettingsModal);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/DotsVerticalRounded/DotsVerticalRounded.esm.js
var DotsVerticalRounded_esm = __webpack_require__(25559);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/Unlink/Unlink.esm.js
var Unlink_esm = __webpack_require__(16451);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Pause/Pause.esm.js
var Pause_esm = __webpack_require__(19635);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Play/Play.esm.js
var Play_esm = __webpack_require__(24501);
// EXTERNAL MODULE: ./node_modules/react-popper/lib/esm/usePopper.js + 54 modules
var usePopper = __webpack_require__(46440);
// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 3 modules
var v4 = __webpack_require__(57632);
// EXTERNAL MODULE: ./lib/hooks/useGlobalBlur.js
var useGlobalBlur = __webpack_require__(55348);
// EXTERNAL MODULE: ./lib/hooks/useKeyboardKey.js
var useKeyboardKey = __webpack_require__(34487);
;// CONCATENATED MODULE: ./components/MenuPopover.js


function MenuPopover_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function MenuPopover_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? MenuPopover_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : MenuPopover_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }









var Arrow = (0,styled_components_browser_esm/* default */.ZP)('div').withConfig({
  displayName: "MenuPopover__Arrow",
  componentId: "sc-4sn3jz-0"
})(["position:absolute;font-size:8px;width:3em;height:3em;&::before{content:'';margin:auto;display:block;width:0;height:0;border-style:solid;}"]);
var StyledMenuPopoverContainer = (0,styled_components_browser_esm/* default */.ZP)("div").withConfig({
  displayName: "MenuPopover__StyledMenuPopoverContainer",
  componentId: "sc-4sn3jz-1"
})(["max-width:320px;z-index:1000000;opacity:0.96 !important;border-radius:4px;font-size:12px;text-transform:initial;white-space:normal;color:white;background:white;box-shadow:0px 4px 8px rgba(20,20,20,0.16);border:1px solid #e2e2e2;&[data-popper-placement*='bottom']{", "{top:0;left:0;margin-top:-1em;width:3em;height:1em;&::before{border-width:0 1.5em 1em 1.5em;border-color:transparent transparent white transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='top']{", "{bottom:0;left:0;margin-bottom:-0.9em;width:3em;height:1em;&::before{border-width:1em 1.5em 0 1.5em;border-color:white transparent transparent transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='right']{", "{left:0;margin-left:-0.9em;height:3em;width:1em;&::before{border-width:1.5em 1em 1.5em 0;border-color:transparent white transparent transparent;filter:drop-shadow(0 0 0 grey);}}}&[data-popper-placement*='left']{", "{right:0;margin-right:-0.9em;height:3em;width:1em;&::before{border-width:1.5em 0 1.5em 1em;border-color:transparent transparent transparent white;filter:drop-shadow(0 0 0 grey);}}}"], Arrow, Arrow, Arrow, Arrow);
var InnerMenuContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "MenuPopover__InnerMenuContainer",
  componentId: "sc-4sn3jz-2"
})(["outline:none;"]);

var TooltipContent = function TooltipContent(_ref) {
  var onClose = _ref.onClose,
      content = _ref.content,
      arrowProps = _ref.arrowProps,
      containerProps = _ref.containerProps;
  var innerRef = react.useRef(); // Close on click outside

  (0,useGlobalBlur/* default */.Z)(innerRef, function (isOutside) {
    if (isOutside) {
      onClose();
    }
  }); // Close when Escape is pressed

  (0,useKeyboardKey/* default */.ZP)({
    callback: onClose,
    keyMatch: useKeyboardKey/* ESCAPE_KEY */.O_
  }); // Focus menu when opening

  react.useEffect(function () {
    innerRef.current.focus();
  }, []);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledMenuPopoverContainer, MenuPopover_objectSpread(MenuPopover_objectSpread({}, containerProps), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(InnerMenuContainer, {
      ref: innerRef,
      tabIndex: "-1",
      children: content({
        onClose: onClose
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Arrow, MenuPopover_objectSpread({}, arrowProps))]
  }));
};

var MenuPopover = function MenuPopover(_ref2) {
  var children = _ref2.children,
      placement = _ref2.placement,
      content = _ref2.content;

  var _useState = (0,react.useState)(false),
      isMenuDisplayed = _useState[0],
      setIsMenuDisplayed = _useState[1];

  var _useState2 = (0,react.useState)(null),
      referenceElement = _useState2[0],
      setReferenceElement = _useState2[1];

  var _useState3 = (0,react.useState)(null),
      popperElement = _useState3[0],
      setPopperElement = _useState3[1];

  var _useState4 = (0,react.useState)(null),
      arrowElement = _useState4[0],
      setArrowElement = _useState4[1];

  var _useState5 = (0,react.useState)(null),
      id = _useState5[0],
      setId = _useState5[1];

  var _usePopper = (0,usePopper/* usePopper */.D)(referenceElement, popperElement, {
    placement: placement,
    strategy: 'fixed',
    modifiers: [{
      name: 'arrow',
      options: {
        element: arrowElement
      }
    }]
  }),
      styles = _usePopper.styles,
      attributes = _usePopper.attributes;

  react.useEffect(function () {
    setId("menu-popover-".concat((0,v4/* default */.Z)())); // We only set `id` on the client to avoid mismatches with SSR
  }, []);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [children({
      ref: setReferenceElement,
      onClick: function onClick() {
        return setIsMenuDisplayed(true);
      }
    }), id && isMenuDisplayed && /*#__PURE__*/(0,jsx_runtime.jsx)(TooltipContent, {
      placement: placement,
      content: content,
      onClose: function onClose() {
        return setIsMenuDisplayed(false);
      },
      arrowProps: MenuPopover_objectSpread({
        ref: setArrowElement,
        style: styles.arrow
      }, attributes.arrow),
      containerProps: MenuPopover_objectSpread({
        ref: setPopperElement,
        style: styles.popper
      }, attributes.popper)
    })]
  });
};

MenuPopover.defaultProps = {
  placement: 'top-start'
};
MenuPopover.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuPopover",
  "props": {
    "placement": {
      "defaultValue": {
        "value": "'top-start'",
        "computed": false
      },
      "description": "Tooltip place",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'auto'",
          "computed": false
        }, {
          "value": "'auto-start'",
          "computed": false
        }, {
          "value": "'auto-end'",
          "computed": false
        }, {
          "value": "'top'",
          "computed": false
        }, {
          "value": "'top-start'",
          "computed": false
        }, {
          "value": "'top-end'",
          "computed": false
        }, {
          "value": "'bottom'",
          "computed": false
        }, {
          "value": "'bottom-start'",
          "computed": false
        }, {
          "value": "'bottom-end'",
          "computed": false
        }, {
          "value": "'right'",
          "computed": false
        }, {
          "value": "'right-start'",
          "computed": false
        }, {
          "value": "'right-end'",
          "computed": false
        }, {
          "value": "'left'",
          "computed": false
        }, {
          "value": "'left-start'",
          "computed": false
        }, {
          "value": "'left-end'",
          "computed": false
        }]
      },
      "required": false
    },
    "content": {
      "description": "The popup content",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "children": {
      "description": "The trigger. Either:\n - A render func, that gets passed props to set on the trigger\n - A React node, rendered inside an div",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_MenuPopover = (MenuPopover);
// EXTERNAL MODULE: ./components/host-dashboard/FreezeAccountModal.js
var FreezeAccountModal = __webpack_require__(37670);
// EXTERNAL MODULE: ./components/StyledTextarea.js
var StyledTextarea = __webpack_require__(93150);
;// CONCATENATED MODULE: ./components/host-dashboard/UnhostAccountModal.js





var UnhostAccountModal_excluded = ["collective", "host"];

var UnhostAccountModal_templateObject;

function UnhostAccountModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function UnhostAccountModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? UnhostAccountModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : UnhostAccountModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















var unhostAccountMutation = (0,graphql_tag_lib/* default */.ZP)(UnhostAccountModal_templateObject || (UnhostAccountModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation UnhostAccount($account: AccountReferenceInput!, $message: String) {\n    removeHost(account: $account, message: $message) {\n      id\n      slug\n      name\n      ... on AccountWithHost {\n        host {\n          id\n        }\n      }\n    }\n  }\n"])));

var UnhostAccountModal = function UnhostAccountModal(_ref) {
  var collective = _ref.collective,
      host = _ref.host,
      props = objectWithoutProperties_default()(_ref, UnhostAccountModal_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useState = (0,react.useState)(''),
      message = _useState[0],
      setMessage = _useState[1];

  var _useMutation = (0,client.useMutation)(unhostAccountMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      account: {
        id: collective.id
      },
      message: message
    },
    refetchQueries: ['HostDashboardHostedCollectives'],
    awaitRefetchQueries: true
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      unhostAccount = _useMutation2[0],
      loading = _useMutation2[1].loading;

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, UnhostAccountModal_objectSpread(UnhostAccountModal_objectSpread({
    maxWidth: 432,
    trapFocus: true
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* CollectiveModalHeader */.I4, {
      collective: collective,
      mb: 3
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "16px",
          fontWeight: "700",
          lineHeight: "24px",
          color: "red.900",
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "JYMdjW",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to un-host "
            }, {
              "type": 1,
              "value": "collectiveName"
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              collectiveName: collective.name
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "14px",
          lineHeight: "20px",
          color: "black.700",
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "E0P87E",
            defaultMessage: [{
              "type": 1,
              "value": "fiscalHostName"
            }, {
              "type": 0,
              "value": " will no longer be the Fiscal Host for this Collective. Un-hosting this Collective means no longer holding funds for them, neither managing tax compliance and accounting."
            }],
            values: {
              fiscalHostName: host.name
            }
          })
        }), collective.stats.balance.valueInCents > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "warning",
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "J2/jVu",
            defaultMessage: [{
              "type": 0,
              "value": "The Collective's balance must be zero to un-host, including its Events or Projects. There is a remaining balance of "
            }, {
              "type": 1,
              "value": "collectiveBalanceAmount"
            }, {
              "type": 0,
              "value": ". You can pay out these funds by "
            }, {
              "type": 8,
              "value": "Link",
              "children": [{
                "type": 0,
                "value": "processing expenses."
              }]
            }],
            values: {
              collectiveBalanceAmount: (0,currency_utils/* formatCurrency */.xG)(collective.stats.balance.valueInCents, collective.stats.balance.currency, {
                locale: intl.locale
              }),
              Link: function Link(value) {
                return /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                  color: "black.800",
                  href: "https://docs.opencollective.com/help/expenses-and-getting-paid/submitting-expenses",
                  textDecoration: "underline",
                  openInNewTab: true,
                  children: value
                });
              }
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
          htmlFor: "unhost-account-message",
          fontSize: "16px",
          fontWeight: "700",
          lineHeight: "24px",
          color: "black.800.900",
          mb: "6px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "GLo1nw",
            defaultMessage: [{
              "type": 0,
              "value": "Include a message to the Collective admins (Optional)"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, {
          id: "unhost-account-message",
          width: "100%",
          minHeight: 126,
          maxHeight: 300,
          onChange: function onChange(e) {
            return setMessage(e.target.value);
          },
          value: message,
          fontSize: "13px"
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        justifyContent: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: 'danger',
          minWidth: 90,
          disabled: collective.stats.balance.valueInCents > 0,
          loading: loading,
          onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
            var successMsgArgs;
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _context.prev = 0;
                    _context.next = 3;
                    return unhostAccount();

                  case 3:
                    successMsgArgs = {
                      accountName: collective.name,
                      accountSlug: collective.slug
                    };
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                      message: intl.formatMessage({
                        id: "hOzNmK",
                        defaultMessage: [{
                          "type": 1,
                          "value": "accountName"
                        }, {
                          "type": 0,
                          "value": " (@"
                        }, {
                          "type": 1,
                          "value": "accountSlug"
                        }, {
                          "type": 0,
                          "value": ") has been un-hosted"
                        }]
                      }, successMsgArgs)
                    });
                    props === null || props === void 0 ? void 0 : props.onClose();
                    _context.next = 11;
                    break;

                  case 8:
                    _context.prev = 8;
                    _context.t0 = _context["catch"](0);
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                      variant: 'light',
                      message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                    });

                  case 11:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, null, [[0, 8]]);
          })),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "w5thcm",
            defaultMessage: [{
              "type": 0,
              "value": "Un-host Collective"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          ml: 3,
          minWidth: 120,
          onClick: props.onClose,
          disabled: loading,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "actions.cancel",
            defaultMessage: [{
              "type": 0,
              "value": "Cancel"
            }]
          })
        })]
      })
    })]
  }));
};

UnhostAccountModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "UnhostAccountModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "isFrozen": {
            "name": "bool",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  },
                  "currency": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_UnhostAccountModal = (UnhostAccountModal);
;// CONCATENATED MODULE: ./components/host-dashboard/HostAdminCollectiveCardMoreButton.js





function HostAdminCollectiveCardMoreButton_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostAdminCollectiveCardMoreButton_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostAdminCollectiveCardMoreButton_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostAdminCollectiveCardMoreButton_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

















var FreezeAccountButton = function FreezeAccountButton(_ref) {
  var collective = _ref.collective,
      onClick = _ref.onClick;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
    isBorderless: true,
    buttonStyle: collective.isFrozen ? 'standard' : 'dangerSecondary',
    onClick: onClick,
    borderRadius: 0,
    children: [collective.isFrozen ? /*#__PURE__*/(0,jsx_runtime.jsx)(Play_esm/* Play */.s, {
      size: 18,
      color: "#75777A"
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Pause_esm/* Pause */.d, {
      size: 16
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledSpan, {
      ml: 3,
      fontSize: "14px",
      lineHeight: "20px",
      children: collective.isFrozen ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "5SBeLS",
        defaultMessage: [{
          "type": 0,
          "value": "Unfreeze"
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "EgadwQ",
        defaultMessage: [{
          "type": 0,
          "value": "Freeze"
        }]
      })
    })]
  });
};

var UnhostAccountButton = function UnhostAccountButton(_ref2) {
  var onClick = _ref2.onClick;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
    isBorderless: true,
    buttonStyle: 'dangerSecondary',
    onClick: onClick,
    borderRadius: 0,
    width: "100%",
    display: "flex",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Unlink_esm/* Unlink */.h, {
      size: 18
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledSpan2, {
      ml: 3,
      fontSize: "14px",
      lineHeight: "20px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "kJ57me",
        defaultMessage: [{
          "type": 0,
          "value": "Un-host"
        }]
      })
    })]
  });
};

var HostAdminCollectiveCardMoreButton = function HostAdminCollectiveCardMoreButton(_ref3) {
  var collective = _ref3.collective,
      host = _ref3.host;
  var intl = (0,useIntl/* default */.Z)();

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      hasFreezeModal = _React$useState2[0],
      setHasFreezeModal = _React$useState2[1];

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      hasUnhostModal = _React$useState4[0],
      setHasUnhostModal = _React$useState4[1];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_MenuPopover, {
      content: function content(_ref4) {
        var onClose = _ref4.onClose;
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          alignItems: "start",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FreezeAccountButton, {
            collective: collective,
            onClick: function onClick() {
              setHasFreezeModal(true);
              onClose();
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(UnhostAccountButton, {
            onClick: function onClick() {
              setHasUnhostModal(true);
              onClose();
            }
          })]
        });
      },
      children: function children(btnProps) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledRoundButton/* default */.Z, HostAdminCollectiveCardMoreButton_objectSpread(HostAdminCollectiveCardMoreButton_objectSpread({
          size: 32,
          title: intl.formatMessage({
            id: "IzCVhG",
            defaultMessage: [{
              "type": 0,
              "value": "More options"
            }]
          })
        }, btnProps), {}, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(DotsVerticalRounded_esm/* DotsVerticalRounded */.n, {
            size: 18,
            color: "#75777A"
          })
        }));
      }
    }), hasFreezeModal && /*#__PURE__*/(0,jsx_runtime.jsx)(FreezeAccountModal/* default */.Z, {
      collective: collective,
      onClose: function onClose() {
        return setHasFreezeModal(false);
      }
    }), hasUnhostModal && /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_UnhostAccountModal, {
      collective: collective,
      host: host,
      onClose: function onClose() {
        return setHasUnhostModal(false);
      }
    })]
  });
};

HostAdminCollectiveCardMoreButton.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveCardMoreButton",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_HostAdminCollectiveCardMoreButton = (HostAdminCollectiveCardMoreButton);

var _StyledSpan = (0,styled_components_browser_esm/* default */.ZP)(Text/* Span */.Dr).withConfig({
  displayName: "HostAdminCollectiveCardMoreButton___StyledSpan",
  componentId: "sc-il7t2-0"
})({
  verticalAlign: 'middle'
});

var _StyledSpan2 = (0,styled_components_browser_esm/* default */.ZP)(Text/* Span */.Dr).withConfig({
  displayName: "HostAdminCollectiveCardMoreButton___StyledSpan2",
  componentId: "sc-il7t2-1"
})({
  verticalAlign: 'middle'
});
;// CONCATENATED MODULE: ./components/host-dashboard/HostAdminCollectiveCard.js



var HostAdminCollectiveCard_excluded = ["since", "collective", "host"];

function HostAdminCollectiveCard_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostAdminCollectiveCard_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostAdminCollectiveCard_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostAdminCollectiveCard_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }






















var SectionTitle = function SectionTitle(props) {
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    alignItems: "center",
    mb: 1,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, HostAdminCollectiveCard_objectSpread({
      textTransform: "uppercase",
      fontSize: "9px",
      lineHeight: "14px",
      fontWeight: "600",
      color: "black.500",
      letterSpacing: "0.6px"
    }, props)), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      borderColor: "black.300",
      flex: "1",
      ml: 3
    })]
  });
};

var PlusIcon = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "HostAdminCollectiveCard__PlusIcon",
  componentId: "sc-1edx9mq-0"
})(["position:absolute;background:white;border-radius:100%;width:12px;height:12px;font-size:14px;left:20px;top:-3px;color:", ";"], function (props) {
  return props.theme.colors.green[600];
});
var BoldMsg = function BoldMsg(msg) {
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
    color: "black.900",
    fontWeight: "bold",
    fontSize: "14px",
    children: msg
  });
};

var HostAdminCollectiveCard = function HostAdminCollectiveCard(_ref) {
  var since = _ref.since,
      collective = _ref.collective,
      host = _ref.host,
      props = objectWithoutProperties_default()(_ref, HostAdminCollectiveCard_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _React$useState = react.useState(null),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      currentModal = _React$useState2[0],
      setCurrentModal = _React$useState2[1];

  var balance = collective.stats.balance.valueInCents || 0;
  var nbFinancialContributors = collective.totalFinancialContributors || 0;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCollectiveCard/* default */.Z, HostAdminCollectiveCard_objectSpread(HostAdminCollectiveCard_objectSpread({
    collective: collective,
    bodyHeight: 320
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      px: 3,
      mb: 16,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mb: 22,
        lineHeight: "19px",
        color: "black.600",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: 2,
          fontSize: "12px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FinancialContributorsCountWithBold",
            defaultMessage: [{
              "type": 8,
              "value": "bold",
              "children": [{
                "type": 1,
                "value": "count"
              }]
            }, {
              "type": 0,
              "value": " "
            }, {
              "type": 6,
              "value": "count",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "financial contributor"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "financial contributors"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }],
            values: {
              count: nbFinancialContributors,
              bold: BoldMsg
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "12px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "AmountBalance",
            defaultMessage: [{
              "type": 1,
              "value": "amount"
            }, {
              "type": 0,
              "value": " balance"
            }],
            values: {
              amount: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
                fontSize: "14px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
                  amount: balance,
                  currency: collective.currency,
                  currencyCodeStyles: {
                    color: 'black.900',
                    fontWeight: 'bold'
                  }
                })
              })
            }
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(SectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FeeStructure",
          defaultMessage: [{
            "type": 0,
            "value": "Fee structure"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.800",
        mb: 3,
        children: [formatHostFeeStructure(intl, collective.hostFeesStructure), collective.hostFeesStructure === HOST_FEE_STRUCTURE.CUSTOM_FEE && " (".concat(collective.hostFeePercent, "%)")]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(SectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "HostingSince",
          defaultMessage: [{
            "type": 0,
            "value": "Hosting since"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.800",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(lib.FormattedDate, {
          value: since,
          day: "numeric",
          month: "long",
          year: "numeric"
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        position: "relative",
        mt: 20,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledRoundButton/* default */.Z, {
            "data-cy": "hosted-collective-add-funds-btn",
            buttonStyle: "successSecondary",
            size: 32,
            fontSize: "16px",
            onClick: function onClick() {
              return setCurrentModal('addFunds');
            },
            title: intl.formatMessage({
              id: "menu.addFunds",
              defaultMessage: [{
                "type": 0,
                "value": "Add Funds"
              }]
            }),
            children: [(0,currency_utils/* getCurrencySymbol */.jK)(collective.currency), /*#__PURE__*/(0,jsx_runtime.jsx)(PlusIcon, {
              children: "+"
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledRoundButton/* default */.Z, {
            ml: 2,
            size: 32,
            onClick: function onClick() {
              return setCurrentModal('accountSettings');
            },
            title: intl.formatMessage({
              id: "Af5zIY",
              defaultMessage: [{
                "type": 0,
                "value": "Account settings"
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(SliderAlt_esm/* SliderAlt */.p, {
              size: 14,
              color: "#9D9FA3"
            })
          })]
        }), [constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE, constants_collectives/* CollectiveType.FUND */.eV.FUND].includes(collective.type) && /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_HostAdminCollectiveCardMoreButton, {
          collective: collective,
          host: host
        })]
      })]
    }), currentModal === 'addFunds' && /*#__PURE__*/(0,jsx_runtime.jsx)(AddFundsModal/* default */.Z, {
      collective: collective,
      onClose: function onClose() {
        return setCurrentModal(null);
      }
    }), currentModal === 'accountSettings' && /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_CollectiveSettingsModal, {
      collective: collective,
      host: host,
      onClose: function onClose() {
        return setCurrentModal(null);
      }
    })]
  }));
};

HostAdminCollectiveCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostAdminCollectiveCard",
  "props": {
    "since": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "type": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "hostFeesStructure": {
            "name": "enum",
            "value": [{
              "value": "null",
              "computed": false
            }, {
              "value": "...Object.values(HOST_FEE_STRUCTURE)",
              "computed": true
            }],
            "required": false
          },
          "hostFeePercent": {
            "name": "number",
            "required": false
          },
          "totalFinancialContributors": {
            "name": "number",
            "required": false
          },
          "isFrozen": {
            "name": "bool",
            "required": false
          },
          "parent": {
            "name": "object",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_HostAdminCollectiveCard = (HostAdminCollectiveCard);
BoldMsg.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "BoldMsg"
};
;// CONCATENATED MODULE: ./components/host-dashboard/HostDashboardHostedCollectives.js






var HostDashboardHostedCollectives_templateObject;

function HostDashboardHostedCollectives_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostDashboardHostedCollectives_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostDashboardHostedCollectives_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostDashboardHostedCollectives_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















var HostDashboardHostedCollectives_COLLECTIVES_PER_PAGE = 20; // TODO: This query is using `legacyId` for host and member.account to interface with the
// legacy `AddFundsForm`. Once the new add funds form will be implemented, we can remove these fields.

var hostedCollectivesQuery = (0,graphql_tag_lib/* default */.ZP)(HostDashboardHostedCollectives_templateObject || (HostDashboardHostedCollectives_templateObject = taggedTemplateLiteral_default()(["\n  query HostDashboardHostedCollectives(\n    $hostSlug: String!\n    $limit: Int!\n    $offset: Int!\n    $orderBy: OrderByInput\n    $hostFeesStructure: HostFeeStructure\n    $searchTerm: String\n  ) {\n    host(slug: $hostSlug) {\n      id\n      legacyId\n      slug\n      name\n      currency\n      isHost\n      type\n      settings\n      hostFeePercent\n      plan {\n        id\n        hostFees\n        hostFeeSharePercent\n      }\n      memberOf(\n        role: HOST\n        limit: $limit\n        offset: $offset\n        orderBy: $orderBy\n        hostFeesStructure: $hostFeesStructure\n        searchTerm: $searchTerm\n        isApproved: true\n      ) {\n        offset\n        limit\n        totalCount\n        nodes {\n          id\n          createdAt\n          account {\n            id\n            legacyId\n            name\n            slug\n            website\n            type\n            currency\n            imageUrl(height: 96)\n            isFrozen\n            tags\n            settings\n            createdAt\n            stats {\n              id\n              balance {\n                valueInCents\n                currency\n              }\n            }\n            ... on AccountWithHost {\n              hostFeesStructure\n              hostFeePercent\n            }\n            ... on AccountWithContributions {\n              totalFinancialContributors\n            }\n            ... on AccountWithParent {\n              parent {\n                id\n                slug\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));

var HostDashboardHostedCollectives_checkIfQueryHasFilters = function checkIfQueryHasFilters(query) {
  return Object.entries(query).some(function (_ref) {
    var _ref2 = slicedToArray_default()(_ref, 2),
        key = _ref2[0],
        value = _ref2[1];

    return !['view', 'offset', 'limit', 'hostCollectiveSlug', 'sort-by'].includes(key) && value;
  });
};

var HostDashboardHostedCollectives_getVariablesFromQuery = function getVariablesFromQuery(query) {
  return {
    offset: parseInt(query.offset) || 0,
    limit: parseInt(query.limit) || HostDashboardHostedCollectives_COLLECTIVES_PER_PAGE,
    searchTerm: query.searchTerm,
    hostFeesStructure: query['fees-structure'],
    orderBy: {
      field: 'CREATED_AT',
      direction: query['sort-by'] === 'oldest' ? 'ASC' : 'DESC'
    }
  };
};

var HostDashboardHostedCollectives_ROUTE_PARAMS = ['hostCollectiveSlug', 'slug', 'section', 'view'];

var HostDashboardHostedCollectives_updateQuery = function updateQuery(router, newParams) {
  var query = omitBy_default()(HostDashboardHostedCollectives_objectSpread(HostDashboardHostedCollectives_objectSpread({}, router.query), newParams), function (value, key) {
    return !value || HostDashboardHostedCollectives_ROUTE_PARAMS.includes(key);
  });

  var pathname = router.asPath.split('?')[0];
  return router.push({
    pathname: pathname,
    query: query
  });
};

var HostDashboardHostedCollectives = function HostDashboardHostedCollectives(_ref3) {
  var _data$host;

  var hostSlug = _ref3.hostSlug;
  var router = (0,next_router.useRouter)() || {};
  var query = router.query;
  var hasFilters = react.useMemo(function () {
    return HostDashboardHostedCollectives_checkIfQueryHasFilters(query);
  }, [query]);

  var _useQuery = (0,client.useQuery)(hostedCollectivesQuery, {
    variables: HostDashboardHostedCollectives_objectSpread({
      hostSlug: hostSlug
    }, HostDashboardHostedCollectives_getVariablesFromQuery(omitBy_default()(query, (isEmpty_default())))),
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      error = _useQuery.error,
      loading = _useQuery.loading,
      variables = _useQuery.variables;

  var hostedMemberships = data === null || data === void 0 ? void 0 : (_data$host = data.host) === null || _data$host === void 0 ? void 0 : _data$host.memberOf;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    maxWidth: 1000,
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "HostedCollectives",
          defaultMessage: [{
            "type": 0,
            "value": "Hosted Collectives"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mx: "auto"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        p: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(SearchBar/* default */.Z, {
          defaultValue: query.searchTerm,
          onSubmit: function onSubmit(searchTerm) {
            return HostDashboardHostedCollectives_updateQuery(router, {
              searchTerm: searchTerm,
              offset: null
            });
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      mb: 26,
      borderWidth: "0.5px"
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mb: 34,
      children: data !== null && data !== void 0 && data.host ? /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_HostAdminCollectiveFilters, {
        values: query,
        filters: [COLLECTIVE_FILTER.SORT_BY, COLLECTIVE_FILTER.FEE_STRUCTURE],
        onChange: function onChange(queryParams) {
          return HostDashboardHostedCollectives_updateQuery(router, HostDashboardHostedCollectives_objectSpread(HostDashboardHostedCollectives_objectSpread({}, queryParams), {}, {
            offset: null
          }));
        }
      }) : loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 70
      }) : null
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error,
      mb: 2
    }), !error && !loading && !(hostedMemberships !== null && hostedMemberships !== void 0 && hostedMemberships.nodes.length) ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      withIcon: true,
      "data-cy": "zero-collective-message",
      children: hasFilters ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "discover.searchNoResult",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives match the current search."
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "menu.collective.none",
        defaultMessage: [{
          "type": 0,
          "value": "No Collectives yet"
        }]
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
        gridGap: 24,
        gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))",
        children: loading ? Array.from(new Array(HostDashboardHostedCollectives_COLLECTIVES_PER_PAGE)).map(function (_, index) {
          return (
            /*#__PURE__*/
            // eslint-disable-next-line react/no-array-index-key
            (0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
              height: 362,
              borderRadius: "8px"
            }, index)
          );
        }) : hostedMemberships === null || hostedMemberships === void 0 ? void 0 : hostedMemberships.nodes.map(function (member) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(host_dashboard_HostAdminCollectiveCard, {
            host: data.host,
            collective: member.account,
            since: member.createdAt
          }, member.id);
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 5,
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
          total: hostedMemberships === null || hostedMemberships === void 0 ? void 0 : hostedMemberships.totalCount,
          limit: variables.limit,
          offset: variables.offset,
          ignoredQueryParams: HostDashboardHostedCollectives_ROUTE_PARAMS
        })
      })]
    })]
  });
};

HostDashboardHostedCollectives.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardHostedCollectives",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var host_dashboard_HostDashboardHostedCollectives = (HostDashboardHostedCollectives);
// EXTERNAL MODULE: ./node_modules/@styled-icons/remix-line/Question/Question.esm.js
var Question_esm = __webpack_require__(82493);
// EXTERNAL MODULE: ./components/CollectivePickerAsync.js
var CollectivePickerAsync = __webpack_require__(5993);
// EXTERNAL MODULE: ./components/filters/PeriodFilter.tsx + 1 modules
var PeriodFilter = __webpack_require__(4062);
// EXTERNAL MODULE: ./components/NotFound.js
var NotFound = __webpack_require__(40517);
// EXTERNAL MODULE: ./components/PeriodFilterPresetsSelect.js
var PeriodFilterPresetsSelect = __webpack_require__(60732);
// EXTERNAL MODULE: ./node_modules/dayjs/dayjs.min.js
var dayjs_min = __webpack_require__(27484);
var dayjs_min_default = /*#__PURE__*/__webpack_require__.n(dayjs_min);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/HostCSVDownloadButton.js


function HostCSVDownloadButton_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostCSVDownloadButton_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostCSVDownloadButton_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostCSVDownloadButton_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












var getHostReportURL = function getHostReportURL(hostSlug, params) {
  var _ref = params || {},
      dateFrom = _ref.dateFrom,
      dateTo = _ref.dateTo,
      accountsSlugs = _ref.accountsSlugs,
      _ref$format = _ref.format,
      format = _ref$format === void 0 ? 'txt' : _ref$format;

  var url = new URL("".concat("https://rest-staging.opencollective.com", "/v2/").concat(hostSlug, "/hostTransactions.").concat(format));

  if (dateFrom) {
    url.searchParams.set('dateFrom', dateFrom);
  }

  if (dateTo) {
    url.searchParams.set('dateTo', dateTo);
  }

  if (accountsSlugs !== null && accountsSlugs !== void 0 && accountsSlugs.length) {
    url.searchParams.set('account', accountsSlugs.join(','));
  }

  url.searchParams.set('fetchAll', '1');
  return url.toString();
};

var prepareDateArgs = function prepareDateArgs(dateInterval) {
  if (!dateInterval) {
    return {};
  } else {
    return {
      dateFrom: (0,date_utils/* simpleDateToISOString */.GF)(dateInterval.from, false, dateInterval.timezoneType),
      dateTo: (0,date_utils/* simpleDateToISOString */.GF)(dateInterval.to, true, dateInterval.timezoneType)
    };
  }
};

var triggerCSVDownload = function triggerCSVDownload(host, reportUrl, dateInterval) {
  var filename = "host-".concat(host.slug, "-transactions");

  if (dateInterval !== null && dateInterval !== void 0 && dateInterval.from) {
    var until = dateInterval.to || dayjs_min_default()().format('YYYY-MM-DD');
    filename += "-".concat(dateInterval.from, "-").concat(until);
  }

  return (0,api/* fetchCSVFileFromRESTService */.Zu)(reportUrl, filename);
};

var HostCSVDownloadButton = function HostCSVDownloadButton(_ref2) {
  var host = _ref2.host,
      collectives = _ref2.collectives,
      dateInterval = _ref2.dateInterval;
  var accountsSlugs = collectives === null || collectives === void 0 ? void 0 : collectives.map(function (c) {
    return c.slug;
  });
  var hostReportUrl = getHostReportURL(host === null || host === void 0 ? void 0 : host.slug, HostCSVDownloadButton_objectSpread(HostCSVDownloadButton_objectSpread({}, prepareDateArgs(dateInterval)), {}, {
    accountsSlugs: accountsSlugs
  }));

  var _useAsyncCall = (0,useAsyncCall/* useAsyncCall */.N)(function () {
    return triggerCSVDownload(host, hostReportUrl, dateInterval);
  }, {
    useErrorToast: true
  }),
      isFetching = _useAsyncCall.loading,
      downloadCSV = _useAsyncCall.call;

  return /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
    as: Link/* default */.Z,
    width: "100%",
    href: hostReportUrl,
    onClick: function onClick(e) {
      e.preventDefault();
      downloadCSV();
    },
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      buttonStyle: "primary",
      buttonSize: "small",
      py: "7px",
      minWidth: 140,
      width: "100%",
      loading: isFetching,
      disabled: !host,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "gefgLF",
        defaultMessage: [{
          "type": 0,
          "value": "Generate CSV report"
        }]
      })
    })
  });
};

HostCSVDownloadButton.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostCSVDownloadButton",
  "props": {
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "slug": {
              "name": "string",
              "required": true
            }
          }
        }
      },
      "required": false
    },
    "dateInterval": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "legacyId": {
            "name": "number",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_HostCSVDownloadButton = (HostCSVDownloadButton);
// EXTERNAL MODULE: ./node_modules/@styled-icons/fa-solid/ChevronDown/ChevronDown.js
var ChevronDown = __webpack_require__(11208);
// EXTERNAL MODULE: ./node_modules/@styled-icons/fa-solid/ChevronUp/ChevronUp.js
var ChevronUp = __webpack_require__(80292);
// EXTERNAL MODULE: ./components/Image.js
var Image = __webpack_require__(56562);
// EXTERNAL MODULE: ./components/StyledLinkButton.js
var StyledLinkButton = __webpack_require__(67001);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/toConsumableArray.js
var toConsumableArray = __webpack_require__(7980);
var toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);
// EXTERNAL MODULE: ./node_modules/lodash/groupBy.js
var groupBy = __webpack_require__(7739);
var groupBy_default = /*#__PURE__*/__webpack_require__.n(groupBy);
// EXTERNAL MODULE: ./node_modules/lodash/get.js
var get = __webpack_require__(27361);
var get_default = /*#__PURE__*/__webpack_require__.n(get);
// EXTERNAL MODULE: ./node_modules/next/dynamic.js
var dynamic = __webpack_require__(28860);
var dynamic_default = /*#__PURE__*/__webpack_require__.n(dynamic);
// EXTERNAL MODULE: ./lib/i18n/transaction.js
var transaction = __webpack_require__(3025);
// EXTERNAL MODULE: ./node_modules/prop-types/index.js
var prop_types = __webpack_require__(45697);
var prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);
;// CONCATENATED MODULE: ./components/ChartWrapper.js


var ChartWrapper = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ChartWrapper",
  componentId: "sc-1nbt4v5-0"
})(["position:relative;.apexcharts-legend-series{background:white;padding:8px;border-radius:10px;& > span{vertical-align:middle;}}.apexcharts-toolbar{z-index:0;}.apexcharts-legend-marker{margin-right:8px;}"]);
ChartWrapper.propTypes = {
  children: (prop_types_default()).node
};
// EXTERNAL MODULE: ./node_modules/lodash/min.js
var min = __webpack_require__(53632);
var min_default = /*#__PURE__*/__webpack_require__.n(min);
// EXTERNAL MODULE: ./node_modules/lodash/max.js
var max = __webpack_require__(6162);
var max_default = /*#__PURE__*/__webpack_require__.n(max);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/helpers.js



var getActiveYearsOptions = function getActiveYearsOptions(host) {
  var currentYear = new Date().getFullYear();
  var firstYear = host ? parseInt(host.createdAt.split('-')[0]) : currentYear;

  var activeYears = toConsumableArray_default()(Array(currentYear - firstYear + 1).keys()).map(function (year) {
    return year + firstYear;
  });

  return activeYears.map(function (year) {
    return {
      value: year,
      label: year
    };
  }).reverse();
};
var formatAmountForLegend = function formatAmountForLegend(value, currency, locale) {
  var isCompactNotation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
  return new Intl.NumberFormat(locale, {
    currency: currency,
    style: 'currency',
    notation: isCompactNotation ? 'compact' : 'standard'
  }).format(value);
};
var getMinMaxDifference = function getMinMaxDifference(numberArray) {
  var minVal = min_default()(numberArray);

  var maxVal = max_default()(numberArray);

  return maxVal - minVal;
};
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/HostFeesSectionHistorical.js







var HostFeesSectionHistorical_templateObject;

function HostFeesSectionHistorical_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostFeesSectionHistorical_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostFeesSectionHistorical_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostFeesSectionHistorical_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












 // Dynamic imports



var Chart = dynamic_default()(function () {
  return Promise.all(/* import() */[__webpack_require__.e(5279), __webpack_require__.e(7229)]).then(__webpack_require__.bind(__webpack_require__, 47229));
}, {
  ssr: false,
  loadableGenerated: {
    webpack: function webpack() {
      return [/*require.resolve*/(47229)];
    }
  }
});
var hostFeeSectionTimeSeriesQuery = (0,graphql_tag_lib/* default */.ZP)(HostFeesSectionHistorical_templateObject || (HostFeesSectionHistorical_templateObject = taggedTemplateLiteral_default()(["\n  query HostFeeSectionTimeSeries($hostSlug: String!, $dateFrom: DateTime!, $dateTo: DateTime!) {\n    host(slug: $hostSlug) {\n      id\n      legacyId\n      createdAt\n      currency\n      hostMetricsTimeSeries(dateFrom: $dateFrom, dateTo: $dateTo, timeUnit: MONTH) {\n        hostFees {\n          nodes {\n            date\n            amount {\n              value\n              valueInCents\n              currency\n            }\n          }\n        }\n        hostFeeShare {\n          nodes {\n            date\n            settlementStatus\n            amount {\n              value\n              valueInCents\n              currency\n            }\n          }\n        }\n      }\n    }\n  }\n"])));

var getChartOptions = function getChartOptions(intl, hostCurrency) {
  return {
    chart: {
      id: 'chart-host-report-fees',
      stacked: true
    },
    legend: {
      show: true,
      showForSingleSeries: true,
      horizontalAlign: 'left',
      fontWeight: 'bold',
      fontSize: '12px',
      markers: {
        width: 16,
        height: 16
      }
    },
    dataLabels: {
      enabled: false
    },
    grid: {
      raw: {
        opacity: 0
      },
      column: {
        opacity: 0
      },
      xaxis: {
        lines: {
          show: true
        }
      },
      yaxis: {
        lines: {
          show: false
        }
      }
    },
    plotOptions: {
      bar: {
        columnWidth: '50%'
      }
    },
    colors: ['#46347F', '#95DDF4', '#F5C451', '#0EA755'],
    // TODO(HostReport): Use host primary colors
    xaxis: {
      categories: toConsumableArray_default()(new Array(12)).map(function (_, idx) {
        return "".concat(intl.formatDate(new Date(0, idx), {
          month: 'short'
        }).toUpperCase());
      })
    },
    yaxis: {
      labels: {
        minWidth: 38,
        formatter: function formatter(value) {
          return formatAmountForLegend(value, hostCurrency, intl.locale);
        }
      }
    },
    tooltip: {
      y: {
        formatter: function formatter(value) {
          return formatAmountForLegend(value, hostCurrency, intl.locale, false);
        } // Never use compact notation in tooltip

      }
    }
  };
};

var SERIES_NAMES = (0,lib.defineMessages)({
  hostRevenue: {
    id: "4kaWYR",
    defaultMessage: [{
      "type": 0,
      "value": "Net Host Fees"
    }]
  },
  hostFeeShare: {
    id: "Transaction.kind.HOST_FEE_SHARE",
    defaultMessage: [{
      "type": 0,
      "value": "Platform share"
    }]
  }
});

var getHostFeesWithoutShare = function getHostFeesWithoutShare(hostFeeNodes, hostFeeShareNodes) {
  var totalHostFeeSharePerMonthInCents = hostFeeShareNodes.reduce(function (result, node) {
    var monthKey = new Date(node.date).getMonth();
    result[monthKey] = (result[monthKey] || 0) + node.amount.valueInCents;
    return result;
  }, {});
  return hostFeeNodes.map(function (node) {
    var monthKey = new Date(node.date).getMonth();

    if (totalHostFeeSharePerMonthInCents[monthKey]) {
      var valueInCents = node.amount.valueInCents - totalHostFeeSharePerMonthInCents[monthKey];
      return HostFeesSectionHistorical_objectSpread(HostFeesSectionHistorical_objectSpread({}, node), {}, {
        amount: HostFeesSectionHistorical_objectSpread(HostFeesSectionHistorical_objectSpread({}, node.amount), {}, {
          valueInCents: valueInCents,
          value: valueInCents / 100
        })
      });
    } else {
      return node;
    }
  });
};

var getSeriesFromData = function getSeriesFromData(intl, timeSeries) {
  var dataToSeries = function dataToSeries(data) {
    var series = new Array(12).fill(0); // = 12 months

    data === null || data === void 0 ? void 0 : data.forEach(function (_ref) {
      var date = _ref.date,
          amount = _ref.amount;
      return series[new Date(date).getMonth()] = amount.value;
    });
    return series;
  };

  var hostFeeNodes = get_default()(timeSeries, 'hostFees.nodes', []);

  var hostFeeShareNodes = get_default()(timeSeries, 'hostFeeShare.nodes', []);

  return [{
    name: intl.formatMessage(SERIES_NAMES.hostRevenue),
    data: dataToSeries(getHostFeesWithoutShare(hostFeeNodes, hostFeeShareNodes))
  }].concat(toConsumableArray_default()(Object.entries(groupBy_default()(hostFeeShareNodes, 'settlementStatus')).map(function (_ref2) {
    var _ref3 = slicedToArray_default()(_ref2, 2),
        status = _ref3[0],
        nodes = _ref3[1];

    return {
      name: "".concat(intl.formatMessage(SERIES_NAMES.hostFeeShare), " (").concat((0,transaction/* i18nTransactionSettlementStatus */.pK)(intl, status), ")"),
      data: dataToSeries(nodes)
    };
  })));
};

var getQueryVariables = function getQueryVariables(hostSlug, year) {
  return {
    hostSlug: hostSlug,
    dateFrom: "".concat(year, "-01-01T00:00:00Z"),
    dateTo: "".concat(year, "-12-31T23:59:59Z")
  };
};

var HostFeesSectionHistorical = function HostFeesSectionHistorical(_ref4) {
  var _data$host;

  var hostSlug = _ref4.hostSlug;
  var intl = (0,useIntl/* default */.Z)();

  var _useState = (0,react.useState)(function () {
    return new Date().getFullYear();
  }),
      selectedYear = _useState[0],
      setSelectedYear = _useState[1];

  var variables = getQueryVariables(hostSlug, selectedYear);

  var _useQuery = (0,client.useQuery)(hostFeeSectionTimeSeriesQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      loading = _useQuery.loading,
      data = _useQuery.data;

  var host = data === null || data === void 0 ? void 0 : data.host;
  var timeSeries = data === null || data === void 0 ? void 0 : (_data$host = data.host) === null || _data$host === void 0 ? void 0 : _data$host.hostMetricsTimeSeries;
  var series = (0,react.useMemo)(function () {
    return getSeriesFromData(intl, timeSeries);
  }, [timeSeries]);
  var yearsOptions = (0,react.useMemo)(function () {
    return getActiveYearsOptions(host);
  }, [host]);
  var chartOptions = (0,react.useMemo)(function () {
    return getChartOptions(intl, host === null || host === void 0 ? void 0 : host.currency);
  }, [host === null || host === void 0 ? void 0 : host.currency]);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    py: 3,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      px: 2,
      mb: 2,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "11px",
        fontWeight: "700",
        mr: 3,
        textTransform: "uppercase",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "HostFeesSection.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Host Fees per year"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, {
        inputId: "host-report-host-fees-year-select",
        options: yearsOptions,
        defaultValue: {
          value: selectedYear,
          label: selectedYear
        },
        onChange: function onChange(_ref5) {
          var value = _ref5.value;
          return setSelectedYear(value);
        },
        isSearchable: false,
        minWidth: 100,
        isLoading: loading,
        disabled: loading
      })]
    }), loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 250
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(ChartWrapper, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Chart, {
        type: "bar",
        width: "100%",
        height: "250px",
        options: chartOptions,
        series: series
      })
    })]
  });
};
HostFeesSectionHistorical.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostFeesSectionHistorical",
  "props": {
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/HostFeesSection.js















var getValuesToDisplay = function getValuesToDisplay(isLoading, host, locale) {
  if (isLoading) {
    var loadingComponent = /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 21,
      width: 120
    });

    return {
      fees: loadingComponent,
      netHostFee: loadingComponent,
      sharedRevenue: loadingComponent
    };
  } else {
    var _host$hostMetrics = host.hostMetrics,
        hostFees = _host$hostMetrics.hostFees,
        hostFeeShare = _host$hostMetrics.hostFeeShare;
    return {
      fees: (0,currency_utils/* formatCurrency */.xG)(hostFees.valueInCents, host.currency, {
        locale: locale
      }),
      sharedRevenue: (0,currency_utils/* formatCurrency */.xG)(hostFeeShare.valueInCents, host.currency, {
        locale: locale
      }),
      netHostFee: (0,currency_utils/* formatCurrency */.xG)(hostFees.valueInCents - hostFeeShare.valueInCents, host.currency, {
        locale: locale
      })
    };
  }
};

var HostFeesSection = function HostFeesSection(_ref) {
  var host = _ref.host,
      collectives = _ref.collectives,
      isLoading = _ref.isLoading;

  var _useState = (0,react.useState)(false),
      showHostFeeChart = _useState[0],
      setShowHostFeeChart = _useState[1];

  var _useIntl = (0,useIntl/* default */.Z)(),
      locale = _useIntl.locale;

  var valuesToDisplay = getValuesToDisplay(isLoading, host, locale);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              width: 14,
              height: 7,
              src: "/static/images/host-fees-timeline.svg"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "Kw8wV2",
                defaultMessage: [{
                  "type": 0,
                  "value": "Total Collected"
                }]
              })
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.fees
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "suKNE1",
            defaultMessage: [{
              "type": 0,
              "value": "Host Fees charged to Collectives during this time period (these are added continuously to your budget)."
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: ['none', 'none', 'flex'],
        borderLeft: "1px solid",
        borderColor: "primary.800",
        height: "88px",
        mt: "39px"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              width: 9.42,
              height: 12,
              mr: 10,
              src: "/static/images/host-fees-oc.svg"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "zMq41p",
                defaultMessage: [{
                  "type": 0,
                  "value": "Platform Share"
                }]
              })
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.sharedRevenue
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "oEyZeo",
            defaultMessage: [{
              "type": 0,
              "value": "Portion of Host Fees paid to Open Collective (which are either paid as you go, or charged monthly through settlement expenses, depending on the payment method.)"
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: ['none', 'none', 'flex'],
        borderLeft: "1px solid",
        borderColor: "primary.800",
        height: "88px",
        mt: "39px"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        flex: "1 1 230px",
        px: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          mt: "24px",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              width: 6.5,
              height: 12,
              mr: 10,
              src: "/static/images/host-fees-money-sign.svg"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              ml: "10px",
              fontSize: "12px",
              fontWeight: "500",
              textTransform: "uppercase",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "4kaWYR",
                defaultMessage: [{
                  "type": 0,
                  "value": "Net Host Fees"
                }]
              })
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          pt: "12px",
          pb: "10px",
          fontSize: "18px",
          fontWeight: "500",
          children: valuesToDisplay.netHostFee
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "12px",
          fontWeight: "400",
          mt: "10px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "fOMB1g",
            defaultMessage: [{
              "type": 0,
              "value": "Net amount of Host Fees retained by your Organization after removing the Platform Share."
            }]
          })
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      my: 3,
      justifyContent: "space-between",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        px: 2,
        textAlign: "right",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledLinkButton/* default */.Z, {
          asLink: true,
          onClick: function onClick() {
            return setShowHostFeeChart(!showHostFeeChart);
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            fontSize: "12px",
            fontWeight: "400",
            mt: "16px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "BWoXXL",
              defaultMessage: [{
                "type": 0,
                "value": "See historic"
              }]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              pl: "8px",
              children: showHostFeeChart ? /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronUp/* ChevronUp */.Kh, {
                size: 12
              }) : /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronDown/* ChevronDown */._M, {
                fontVariant: "solid",
                size: 12
              })
            })]
          })
        })
      })
    }), showHostFeeChart && isLoading && /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 250
    }), showHostFeeChart && !isLoading && /*#__PURE__*/(0,jsx_runtime.jsx)(HostFeesSectionHistorical, {
      collectives: collectives,
      hostSlug: host.slug
    })]
  });
};

HostFeesSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostFeesSection",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          },
          "hostMetrics": {
            "name": "shape",
            "value": {
              "hostFees": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": true
                  }
                },
                "required": true
              },
              "hostFeeShare": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": true
                  }
                },
                "required": true
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_HostFeesSection = (HostFeesSection);
// EXTERNAL MODULE: ./node_modules/next/image.js
var next_image = __webpack_require__(25675);
var image_default = /*#__PURE__*/__webpack_require__.n(next_image);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/PlatformTipsCollected.js


function PlatformTipsCollected_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function PlatformTipsCollected_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? PlatformTipsCollected_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : PlatformTipsCollected_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












var AMOUNT_STYLES = PlatformTipsCollected_objectSpread(PlatformTipsCollected_objectSpread({}, FormattedMoneyAmount/* DEFAULT_AMOUNT_STYLES */.a), {}, {
  fontSize: '18px',
  lineHeight: '26px'
});

var PlatformTipsCollected = function PlatformTipsCollected(_ref) {
  var host = _ref.host,
      isLoading = _ref.isLoading;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    p: 24,
    bg: "blue.50",
    border: "1px solid",
    borderColor: "blue.700",
    borderRadius: "8px",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      my: 2,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)((image_default()), {
        src: "/static/images/opencollective-icon.png",
        width: 14,
        height: 14,
        alt: ""
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        textTransform: "uppercase",
        ml: 2,
        fontSize: "12px",
        fontWeight: "500",
        color: "black.700",
        letterSpacing: "0.06em",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "PlatformTipsCollected",
          defaultMessage: [{
            "type": 0,
            "value": "Platform Tips"
          }]
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mt: 20,
      mb: 10,
      children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 26,
          maxWidth: 200
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          mx: 2,
          children: ' / '
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 26,
          maxWidth: 200
        })]
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
        fontSize: "14px",
        color: "black.700",
        textTransform: "capitalize",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "AmountCollected",
          defaultMessage: [{
            "type": 1,
            "value": "amount"
          }, {
            "type": 0,
            "value": " collected"
          }],
          values: {
            amount: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
              amount: host.hostMetrics.platformTips.valueInCents,
              currency: host.currency,
              amountStyles: AMOUNT_STYLES
            })
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          mx: 2,
          children: ' / '
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "UKIPT2",
          defaultMessage: [{
            "type": 1,
            "value": "amount"
          }, {
            "type": 0,
            "value": " owed to "
          }, {
            "type": 1,
            "value": "account"
          }],
          values: {
            account: 'Open Collective',
            amount: /*#__PURE__*/(0,jsx_runtime.jsx)(FormattedMoneyAmount/* default */.Z, {
              amount: host.hostMetrics.pendingPlatformTips.valueInCents,
              currency: host.currency,
              amountStyles: AMOUNT_STYLES
            })
          }
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      color: "black.700",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "Host.PlatformTip.description",
        defaultMessage: [{
          "type": 0,
          "value": "Contributors optionally add Platform Tips to transactions. Amounts owed to Open Collective that have been deposited into the Host's bank account are charged as part of monthly Settlement Expenses."
        }]
      })
    })]
  });
};

PlatformTipsCollected.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PlatformTipsCollected",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "hostMetrics": {
            "name": "shape",
            "value": {
              "platformTips": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              },
              "pendingPlatformTips": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_PlatformTipsCollected = (PlatformTipsCollected);
// EXTERNAL MODULE: ./node_modules/styled-system/dist/index.esm.js + 11 modules
var index_esm = __webpack_require__(16678);
;// CONCATENATED MODULE: ./components/ProportionalAreaChart.js








var ChartContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ProportionalAreaChart__ChartContainer",
  componentId: "sc-pcdist-0"
})(["display:flex;flex-wrap:wrap;overflow:hidden;", ""], index_esm/* borderRadius */.E0);
var LegendContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ProportionalAreaChart__LegendContainer",
  componentId: "sc-pcdist-1"
})(["display:flex;flex-wrap:wrap;margin-top:8px;width:100%;"]);
var Label = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ProportionalAreaChart__Label",
  componentId: "sc-pcdist-2"
})(["display:inline-block;background:rgba(255,255,255,0.8);padding:4px 6px;font-size:12px;border-radius:4px;white-space:nowrap;"]);
var Area = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ProportionalAreaChart__Area",
  componentId: "sc-pcdist-3"
})(["padding:12px 8px;flex-shrink:0;flex-grow:1;flex-basis:", ";", ""], function (props) {
  return props.percentage;
}, index_esm/* color */.$_);
var Square = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "ProportionalAreaChart__Square",
  componentId: "sc-pcdist-4"
})(["width:8px;height:8px;border-radius:1.2px;margin-right:8px;", ""], index_esm/* color */.$_);

var Legend = function Legend(_ref) {
  var color = _ref.color,
      label = _ref.label;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    alignItems: "center",
    mr: 2,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Square, {
      backgroundColor: color
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "12px",
      lineHeight: "16px",
      color: "black.600",
      whiteSpace: "nowrap",
      children: label
    })]
  });
};

var getPreparedAreaPercentage = function getPreparedAreaPercentage(areas, area) {
  if (area.percentage) {
    return "".concat(round_default()(area.percentage * 100, 2), "%");
  } else {
    return "".concat(round_default()(100 / areas.length, 2), "%");
  }
};

var ProportionalAreaChart = function ProportionalAreaChart(_ref2) {
  var areas = _ref2.areas,
      borderRadius = _ref2.borderRadius;
  var hasLegend = areas.some(function (area) {
    return area.legend;
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(ChartContainer, {
      borderRadius: borderRadius,
      children: areas.map(function (area) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Area, {
          percentage: getPreparedAreaPercentage(areas, area),
          backgroundColor: area.color,
          children: area.label && /*#__PURE__*/(0,jsx_runtime.jsx)(Label, {
            children: area.label
          })
        }, area.key);
      })
    }), hasLegend && /*#__PURE__*/(0,jsx_runtime.jsx)(LegendContainer, {
      children: areas.map(function (area) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          flexBasis: getPreparedAreaPercentage(areas, area),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Legend, {
            label: area.legend,
            color: area.color
          })
        }, area.key);
      })
    })]
  });
};

ProportionalAreaChart.defaultProps = {
  borderRadius: '6px'
};
ProportionalAreaChart.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ProportionalAreaChart",
  "props": {
    "borderRadius": {
      "defaultValue": {
        "value": "'6px'",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "areas": {
      "description": "The series to represent",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "key": {
              "name": "string",
              "required": true
            },
            "label": {
              "name": "node",
              "required": false
            },
            "percentage": {
              "name": "number",
              "description": "How much space should be taken by this area. Defaults to proportional (100 / numberOfAreas)%",
              "required": false
            },
            "color": {
              "name": "string",
              "required": false
            },
            "legend": {
              "name": "node",
              "required": false
            }
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var components_ProportionalAreaChart = (/*#__PURE__*/react.memo(ProportionalAreaChart));
// EXTERNAL MODULE: ./components/ContainerOverlay.js
var ContainerOverlay = __webpack_require__(3798);
// EXTERNAL MODULE: ./components/StyledSpinner.tsx + 1 modules
var StyledSpinner = __webpack_require__(771);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/TotalMoneyManagedHistorical.js




var TotalMoneyManagedHistorical_templateObject;












 // Dynamic imports



var TotalMoneyManagedHistorical_Chart = dynamic_default()(function () {
  return Promise.all(/* import() */[__webpack_require__.e(5279), __webpack_require__.e(7229)]).then(__webpack_require__.bind(__webpack_require__, 47229));
}, {
  ssr: false,
  loadableGenerated: {
    webpack: function webpack() {
      return [/*require.resolve*/(47229)];
    }
  }
});
var totalMoneyManagedQuery = (0,graphql_tag_lib/* default */.ZP)(TotalMoneyManagedHistorical_templateObject || (TotalMoneyManagedHistorical_templateObject = taggedTemplateLiteral_default()(["\n  query TotalMoneyManagedQuery(\n    $hostSlug: String!\n    $dateFrom: DateTime!\n    $account: [AccountReferenceInput!]\n    $dateTo: DateTime!\n  ) {\n    host(slug: $hostSlug) {\n      id\n      hostMetricsTimeSeries(dateFrom: $dateFrom, dateTo: $dateTo, account: $account, timeUnit: MONTH) {\n        totalMoneyManaged {\n          nodes {\n            date\n            amount {\n              value\n              valueInCents\n              currency\n            }\n          }\n        }\n      }\n    }\n  }\n"])));

var TotalMoneyManagedHistorical_getQueryVariables = function getQueryVariables(hostSlug, year, collectives) {
  return {
    hostSlug: hostSlug,
    account: collectives === null || collectives === void 0 ? void 0 : collectives.map(function (collective) {
      return {
        legacyId: collective.legacyId
      };
    }),
    dateFrom: "".concat(year, "-01-01T00:00:00Z"),
    dateTo: "".concat(year, "-12-31T23:59:59Z")
  };
};

var TotalMoneyManagedHistorical_getSeriesFromData = function getSeriesFromData(intl, timeSeries, year) {
  var currentYear = new Date().getUTCFullYear();
  var currentMonth = new Date().getUTCMonth();

  var dataToSeries = function dataToSeries(data) {
    var series; // For previous years we show all the months in the chart

    if (year < currentYear) {
      series = new Array(12).fill(0); // = 12 months
      // For current year we only show upto the current month (as no data is available for future)
    } else {
      series = new Array(currentMonth + 1).fill(0); // = upto current month
    }

    data === null || data === void 0 ? void 0 : data.forEach(function (_ref) {
      var date = _ref.date,
          amount = _ref.amount;
      return series[new Date(date).getUTCMonth()] = amount.value;
    });
    return series;
  };

  var totalMoneyManagedProgressNodes = get_default()(timeSeries, 'totalMoneyManaged.nodes', []);

  return [{
    name: intl.formatMessage({
      id: "MzXqKG",
      defaultMessage: [{
        "type": 0,
        "value": "Total Managed Amount"
      }]
    }),
    data: dataToSeries(totalMoneyManagedProgressNodes)
  }];
};

var TotalMoneyManagedHistorical_getChartOptions = function getChartOptions(intl, hostCurrency, isCompactNotation) {
  return {
    chart: {
      id: 'chart-host-report-money-managed'
    },
    stroke: {
      curve: 'straight',
      width: 2
    },
    markers: {
      size: 4
    },
    colors: ['#46347F'],
    xaxis: {
      categories: toConsumableArray_default()(new Array(12)).map(function (_, idx) {
        return "".concat(intl.formatDate(new Date(0, idx), {
          month: 'short'
        }).toUpperCase());
      })
    },
    yaxis: {
      labels: {
        minWidth: 38,
        formatter: function formatter(value) {
          return formatAmountForLegend(value, hostCurrency, intl.locale, isCompactNotation);
        }
      }
    },
    tooltip: {
      y: {
        formatter: function formatter(value) {
          return formatAmountForLegend(value, hostCurrency, intl.locale, false);
        } // Never use compact notation in tooltip

      }
    }
  };
};

var TotalMoneyManagedHistorical = function TotalMoneyManagedHistorical(_ref2) {
  var host = _ref2.host,
      collectives = _ref2.collectives;
  var intl = (0,useIntl/* default */.Z)();
  var yearsOptions = (0,react.useMemo)(function () {
    return getActiveYearsOptions(host);
  }, [null]);

  var _useState = (0,react.useState)(function () {
    return new Date().getFullYear();
  }),
      selectedYear = _useState[0],
      setSelectedYear = _useState[1];

  var variables = TotalMoneyManagedHistorical_getQueryVariables(host.slug, selectedYear, collectives);

  var _useQuery = (0,client.useQuery)(totalMoneyManagedQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      loading = _useQuery.loading,
      data = _useQuery.data,
      previousData = _useQuery.previousData;

  var hostTimeSeriesData = loading && !data ? previousData === null || previousData === void 0 ? void 0 : previousData.host : data === null || data === void 0 ? void 0 : data.host;
  var timeSeries = hostTimeSeriesData === null || hostTimeSeriesData === void 0 ? void 0 : hostTimeSeriesData.hostMetricsTimeSeries;
  var series = react.useMemo(function () {
    return TotalMoneyManagedHistorical_getSeriesFromData(intl, timeSeries, selectedYear);
  }, [timeSeries]);
  var isCompactNotation = getMinMaxDifference(series[0].data) >= 10000;
  var chartOptions = (0,react.useMemo)(function () {
    return TotalMoneyManagedHistorical_getChartOptions(intl, host.currency, isCompactNotation);
  }, [host.currency, isCompactNotation]);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    py: 3,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      px: 2,
      mb: 2,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "11px",
        fontWeight: "700",
        mr: 3,
        textTransform: "uppercase",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "hx2hjA",
          defaultMessage: [{
            "type": 0,
            "value": "Total money managed per year"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectFilter/* StyledSelectFilter */.V, {
        inputId: "host-report-money-managed-year-select",
        options: yearsOptions,
        defaultValue: {
          value: selectedYear,
          label: selectedYear
        },
        onChange: function onChange(_ref3) {
          var value = _ref3.value;
          return setSelectedYear(value);
        },
        isSearchable: false,
        minWidth: 100
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(ChartWrapper, {
      children: [loading && /*#__PURE__*/(0,jsx_runtime.jsx)(ContainerOverlay/* default */.Z, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSpinner/* default */.Z, {
          size: 64
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(TotalMoneyManagedHistorical_Chart, {
        type: "line",
        width: "100%",
        height: "250px",
        options: chartOptions,
        series: series
      })]
    })]
  });
};

TotalMoneyManagedHistorical.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TotalMoneyManagedHistorical",
  "props": {
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": true
          },
          "hostMetrics": {
            "name": "object",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_TotalMoneyManagedHistorical = (TotalMoneyManagedHistorical);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/TotalMoneyManagedSection.js















var getMoneyManagedChartAreas = function getMoneyManagedChartAreas(hostBalance, collectivesBalance, hostCurrency, isLoading, locale) {
  return [{
    key: 'organization',
    color: 'primary.800',
    label: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      width: 195,
      height: 16
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      color: "black.700",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        fontWeight: "bold",
        children: (0,currency_utils/* formatCurrency */.xG)(hostBalance, hostCurrency, {
          locale: locale
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "TotalMoneyManagedSection.hostBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Host Organization balance"
        }]
      })]
    })
  }, {
    key: 'my-collectives',
    color: 'primary.500',
    label: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      width: 165,
      height: 16
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        fontWeight: "700",
        children: (0,currency_utils/* formatCurrency */.xG)(collectivesBalance, hostCurrency, {
          locale: locale
        })
      }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "TotalMoneyManagedSection.collectivesBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Collectives balance"
        }]
      })]
    })
  }];
};

var TotalMoneyManagedSection = function TotalMoneyManagedSection(_ref) {
  var host = _ref.host,
      collectives = _ref.collectives,
      isLoading = _ref.isLoading;

  var _useIntl = (0,useIntl/* default */.Z)(),
      locale = _useIntl.locale;

  var _useState = (0,react.useState)(false),
      showMoneyManagedChart = _useState[0],
      setShowMoneyManagedChart = _useState[1]; // Compute some general stats


  var hostMetrics = host === null || host === void 0 ? void 0 : host.hostMetrics;
  var hostBalance = host === null || host === void 0 ? void 0 : host.stats.balance.valueInCents;
  var collectivesBalance;

  if (!collectives || collectives.length === 0) {
    collectivesBalance = (hostMetrics === null || hostMetrics === void 0 ? void 0 : hostMetrics.totalMoneyManaged.valueInCents) - hostBalance;
  } else {
    collectivesBalance = hostMetrics === null || hostMetrics === void 0 ? void 0 : hostMetrics.totalMoneyManaged.valueInCents;
  } // Generate graph data (memoized for performances)


  var chartArgs = [hostBalance, collectivesBalance, host === null || host === void 0 ? void 0 : host.currency, isLoading, locale];
  var chartAreas = react.useMemo(function () {
    return getMoneyManagedChartAreas.apply(void 0, chartArgs);
  }, chartArgs);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    children: [(!collectives || collectives.length === 0) && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      my: 14,
      alignItems: "baseline",
      children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 21,
        width: 125
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        fontSize: 18,
        fontWeight: "500",
        children: (0,currency_utils/* formatCurrency */.xG)(hostMetrics.totalMoneyManaged.valueInCents, host.currency, {
          locale: locale
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      mt: 18,
      mb: 12,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_ProportionalAreaChart, {
        areas: chartAreas
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      justifyContent: "space-between",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        px: 2,
        textAlign: "right",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledLinkButton/* default */.Z, {
          asLink: true,
          onClick: function onClick() {
            return setShowMoneyManagedChart(!showMoneyManagedChart);
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            fontSize: "12px",
            fontWeight: "400",
            mt: "16px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "BWoXXL",
              defaultMessage: [{
                "type": 0,
                "value": "See historic"
              }]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              pl: "8px",
              children: showMoneyManagedChart ? /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronUp/* ChevronUp */.Kh, {
                size: 12
              }) : /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronDown/* ChevronDown */._M, {
                fontVariant: "solid",
                size: 12
              })
            })]
          })
        })
      })
    }), isLoading && /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 250
    }), !isLoading && showMoneyManagedChart && /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_TotalMoneyManagedHistorical, {
      host: host,
      collectives: collectives
    })]
  });
};

TotalMoneyManagedSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TotalMoneyManagedSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "stats": {
            "name": "shape",
            "value": {
              "balance": {
                "name": "shape",
                "value": {
                  "valueInCents": {
                    "name": "number",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": true
          },
          "hostMetrics": {
            "name": "object",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "collectives": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_TotalMoneyManagedSection = (TotalMoneyManagedSection);
// EXTERNAL MODULE: ./lib/charts.js
var charts = __webpack_require__(26043);
;// CONCATENATED MODULE: ./components/host-dashboard/reports-section/TransactionsOverviewSection.js













 // Dynamic imports



var TransactionsOverviewSection_Chart = dynamic_default()(function () {
  return Promise.all(/* import() */[__webpack_require__.e(5279), __webpack_require__.e(7229)]).then(__webpack_require__.bind(__webpack_require__, 47229));
}, {
  ssr: false,
  loadableGenerated: {
    webpack: function webpack() {
      return [/*require.resolve*/(47229)];
    }
  }
});
var StyledBox = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "TransactionsOverviewSection__StyledBox",
  componentId: "sc-1f5ws6m-0"
})([".apexcharts-toolbar{z-index:0;}"]);

var TransactionsOverviewSection_getChartOptions = function getChartOptions(intl, timeUnit, hostCurrency, series) {
  return {
    chart: {
      id: 'chart-transactions-overview'
    },
    legend: {
      show: true,
      horizontalAlign: 'left'
    },
    colors: ['#29CC75', '#F55882'],
    grid: {
      xaxis: {
        lines: {
          show: true
        }
      },
      yaxis: {
        lines: {
          show: false
        }
      }
    },
    stroke: {
      curve: 'straight',
      width: 1.5
    },
    dataLabels: {
      enabled: false
    },
    xaxis: {
      labels: {
        formatter: function formatter(value) {
          // Show data aggregated yearly
          if (timeUnit === 'YEAR') {
            return dayjs_min_default()(value).utc().year(); // Show data aggregated monthly
          } else if (timeUnit === 'MONTH') {
            return dayjs_min_default()(value).utc().format('MMM-YYYY'); // Show data aggregated by week or day
          } else if (timeUnit === 'WEEK' || timeUnit === 'DAY') {
            return dayjs_min_default()(value).utc().format('DD-MMM-YYYY');
          }
        }
      }
    },
    yaxis: {
      labels: {
        formatter: function formatter(value) {
          return formatAmountForLegend(value, hostCurrency, intl.locale);
        }
      }
    },
    tooltip: {
      y: {
        formatter: function formatter(value, _ref) {
          var seriesIndex = _ref.seriesIndex,
              dataPointIndex = _ref.dataPointIndex;

          var formatAmount = function formatAmount(amount) {
            return formatAmountForLegend(amount, hostCurrency, intl.locale, false);
          }; // Never use compact notation in tooltip


          var dataPoint = series[seriesIndex].data[dataPointIndex];

          if (dataPoint.kinds && Object.keys(dataPoint.kinds).length > 1) {
            var formatKindAmount = function formatKindAmount(_ref2) {
              var _ref3 = slicedToArray_default()(_ref2, 2),
                  kind = _ref3[0],
                  amount = _ref3[1];

              return "".concat(formatAmount(amount), " ").concat((0,transaction/* i18nTransactionKind */.w$)(intl, kind));
            };

            var amountsByKind = Object.entries(dataPoint.kinds).map(formatKindAmount).join(', ');
            var prettyKindAmounts = "<small style=\"font-weight: normal; text-transform: lowercase;\">(".concat(amountsByKind, ")</small>");
            return "".concat(formatAmount(value), " ").concat(prettyKindAmounts);
          } else {
            return formatAmount(value);
          }
        }
      }
    }
  };
};

var getTransactionsAreaChartData = function getTransactionsAreaChartData(host, locale) {
  if (!host) {
    return [];
  }

  var currency = host.currency;
  var _host$contributionSta = host.contributionStats,
      contributionsCount = _host$contributionSta.contributionsCount,
      dailyAverageIncomeAmount = _host$contributionSta.dailyAverageIncomeAmount;
  var _host$expenseStats = host.expenseStats,
      expensesCount = _host$expenseStats.expensesCount,
      dailyAverageAmount = _host$expenseStats.dailyAverageAmount;
  return [{
    key: 'contributions',
    percentage: 0.5,
    color: 'green.500',
    label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "bBBcZ8",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " contribution"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " contributions"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: contributionsCount
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "tmShv9",
        defaultMessage: [{
          "type": 0,
          "value": "Daily average: "
        }, {
          "type": 1,
          "value": "amount"
        }],
        values: {
          amount: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
            children: (0,currency_utils/* formatCurrency */.xG)(dailyAverageIncomeAmount.valueInCents, currency, {
              locale: locale
            })
          })
        }
      })]
    })
  }, {
    key: 'expenses',
    percentage: 0.5,
    color: 'red.500',
    label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "kygWtR",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expense"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " expenses"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: expensesCount
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
        mx: "6px",
        color: "black.600",
        children: ' | '
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "tmShv9",
        defaultMessage: [{
          "type": 0,
          "value": "Daily average: "
        }, {
          "type": 1,
          "value": "amount"
        }],
        values: {
          amount: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
            children: (0,currency_utils/* formatCurrency */.xG)(dailyAverageAmount.valueInCents, currency, {
              locale: locale
            })
          })
        }
      })]
    })
  }];
};

var getTransactionsBreakdownChartData = function getTransactionsBreakdownChartData(host) {
  if (!host) {
    return [];
  }

  var contributionStats = host === null || host === void 0 ? void 0 : host.contributionStats;
  var expenseStats = host === null || host === void 0 ? void 0 : host.expenseStats;
  var recurringContributionsCount = contributionStats.recurringContributionsCount,
      oneTimeContributionsCount = contributionStats.oneTimeContributionsCount;
  var invoicesCount = expenseStats.invoicesCount,
      reimbursementsCount = expenseStats.reimbursementsCount,
      grantsCount = expenseStats.grantsCount;
  var hasGrants = grantsCount > 0;
  var areas = [{
    key: 'one-time',
    percentage: 0.25,
    color: 'green.400',
    legend: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "xKaQkm",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " One-time"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " One-time"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: oneTimeContributionsCount
      }
    })
  }, {
    key: 'recurring',
    percentage: 0.25,
    color: 'green.300',
    legend: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "9DioA1",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Recurring"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Recurring"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: recurringContributionsCount
      }
    })
  }, {
    key: 'invoices',
    percentage: hasGrants ? 0.166 : 0.25,
    color: 'red.600',
    legend: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "U7psWO",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Invoice"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Invoices"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: invoicesCount
      }
    })
  }, {
    key: 'receipts',
    percentage: hasGrants ? 0.166 : 0.25,
    color: 'red.400',
    legend: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "jo45s2",
      defaultMessage: [{
        "type": 6,
        "value": "count",
        "options": {
          "one": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Reimbursement"
            }]
          },
          "other": {
            "value": [{
              "type": 7
            }, {
              "type": 0,
              "value": " Reimbursements"
            }]
          }
        },
        "offset": 0,
        "pluralType": "cardinal"
      }],
      values: {
        count: reimbursementsCount
      }
    })
  }]; // Grants are only enabled for a few hosts/collectives, we only display the metric if active

  if (hasGrants) {
    areas.push({
      key: 'grants',
      percentage: 0.166,
      color: 'red.300',
      legend: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "ERs/eC",
        defaultMessage: [{
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " Grant"
              }]
            },
            "other": {
              "value": [{
                "type": 7
              }, {
                "type": 0,
                "value": " Grants"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }],
        values: {
          count: grantsCount
        }
      })
    });
  }

  return areas;
};
/**
 * Transforms a list of datapoints like [{ date, kind, amount }] into a series like:
 * `[{ x: date, y: 3000, kinds: { ADDED_FUNDS: 2000, CONTRIBUTION: 1000 } }]`
 */


var getSeriesDataFromTotalReceivedNodes = function getSeriesDataFromTotalReceivedNodes(nodes) {
  var keyedData = {};
  nodes.forEach(function (_ref4) {
    var date = _ref4.date,
        amount = _ref4.amount,
        kind = _ref4.kind;

    if (!keyedData[date]) {
      keyedData[date] = {
        x: date,
        y: 0,
        kinds: {}
      };
    }

    keyedData[date].y += amount.value;
    keyedData[date]['kinds'][kind] = amount.value;
  });
  return Object.values(keyedData);
};

var getSeries = function getSeries(host, intl) {
  var getNodes = function getNodes(timeSeries) {
    var _host$hostMetricsTime, _host$hostMetricsTime2;

    return (host === null || host === void 0 ? void 0 : (_host$hostMetricsTime = host.hostMetricsTimeSeries) === null || _host$hostMetricsTime === void 0 ? void 0 : (_host$hostMetricsTime2 = _host$hostMetricsTime[timeSeries]) === null || _host$hostMetricsTime2 === void 0 ? void 0 : _host$hostMetricsTime2.nodes) || [];
  };

  var series = [{
    name: intl.formatMessage({
      id: "Contributions",
      defaultMessage: [{
        "type": 0,
        "value": "Contributions"
      }]
    }),
    data: getSeriesDataFromTotalReceivedNodes(getNodes('totalReceived'))
  }, {
    name: intl.formatMessage({
      id: "Expenses",
      defaultMessage: [{
        "type": 0,
        "value": "Expenses"
      }]
    }),
    data: getNodes('totalSpent').map(function (_ref5) {
      var date = _ref5.date,
          amount = _ref5.amount;
      return {
        x: date,
        y: Math.abs(amount.value)
      };
    })
  }];
  (0,charts/* alignSeries */.yc)(series);
  return series;
};

var TransactionsOverviewSection = function TransactionsOverviewSection(_ref6) {
  var _host$hostMetricsTime3;

  var host = _ref6.host,
      isLoading = _ref6.isLoading;
  var intl = (0,useIntl/* default */.Z)();
  var locale = intl.locale;
  var timeUnit = host === null || host === void 0 ? void 0 : (_host$hostMetricsTime3 = host.hostMetricsTimeSeries) === null || _host$hostMetricsTime3 === void 0 ? void 0 : _host$hostMetricsTime3.timeUnit;
  var series = react.useMemo(function () {
    return getSeries(host, intl);
  }, [host]);
  var areaChartData = react.useMemo(function () {
    return getTransactionsAreaChartData(host, locale);
  }, [host, locale]);
  var transactionBreakdownChart = react.useMemo(function () {
    return getTransactionsBreakdownChartData(host);
  }, [host]);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mt: 18,
      mb: 12,
      children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: "98px",
        borderRadius: "8px"
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_ProportionalAreaChart, {
          areas: areaChartData,
          borderRadius: "6px 6px 0 0"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_ProportionalAreaChart, {
          areas: transactionBreakdownChart,
          borderRadius: "0 0 6px 6px"
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledBox, {
      mt: "24px",
      mb: "12px",
      children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 21,
        width: "100%",
        borderRadius: "8px"
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(TransactionsOverviewSection_Chart, {
        type: "area",
        width: "100%",
        height: "250px",
        options: TransactionsOverviewSection_getChartOptions(intl, timeUnit, host.currency, series),
        series: series
      })
    })]
  });
};

TransactionsOverviewSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "TransactionsOverviewSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "createdAt": {
            "name": "string",
            "required": false
          },
          "hostMetricsTimeSeries": {
            "name": "shape",
            "value": {
              "timeUnit": {
                "name": "string",
                "required": false
              },
              "totalReceived": {
                "name": "shape",
                "value": {
                  "nodes": {
                    "name": "shape",
                    "value": {
                      "date": {
                        "name": "string",
                        "required": false
                      },
                      "kind": {
                        "name": "string",
                        "required": false
                      },
                      "amount": {
                        "name": "shape",
                        "value": {
                          "valueInCents": {
                            "name": "number",
                            "required": false
                          }
                        },
                        "required": false
                      }
                    },
                    "required": false
                  }
                },
                "required": false
              },
              "totalSpent": {
                "name": "shape",
                "value": {
                  "nodes": {
                    "name": "shape",
                    "value": {
                      "date": {
                        "name": "string",
                        "required": false
                      },
                      "kind": {
                        "name": "string",
                        "required": false
                      },
                      "amount": {
                        "name": "shape",
                        "value": {
                          "valueInCents": {
                            "name": "number",
                            "required": false
                          }
                        },
                        "required": false
                      }
                    },
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var reports_section_TransactionsOverviewSection = (TransactionsOverviewSection);
;// CONCATENATED MODULE: ./components/host-dashboard/HostDashboardReports.js




var HostDashboardReports_templateObject;

function HostDashboardReports_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostDashboardReports_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostDashboardReports_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostDashboardReports_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }




























var hostReportPageQuery = (0,graphql_tag_lib/* default */.ZP)(HostDashboardReports_templateObject || (HostDashboardReports_templateObject = taggedTemplateLiteral_default()(["\n  query HostReportsPage(\n    $hostSlug: String!\n    $account: [AccountReferenceInput!]\n    $dateFrom: DateTime\n    $dateTo: DateTime\n  ) {\n    host(slug: $hostSlug) {\n      id\n      legacyId\n      slug\n      name\n      currency\n      isHost\n      isActive\n      type\n      createdAt\n      hostFeePercent\n      isTrustedHost\n      stats {\n        id\n        balance(dateTo: $dateTo) {\n          valueInCents\n          currency\n        }\n      }\n      contributionStats(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {\n        contributionsCount\n        oneTimeContributionsCount\n        recurringContributionsCount\n        dailyAverageIncomeAmount {\n          valueInCents\n        }\n      }\n      expenseStats(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {\n        expensesCount\n        dailyAverageAmount {\n          valueInCents\n        }\n        invoicesCount\n        reimbursementsCount\n        grantsCount\n      }\n      hostMetrics(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {\n        hostFees {\n          valueInCents\n          currency\n        }\n        hostFeeShare {\n          valueInCents\n          currency\n        }\n        pendingPlatformFees {\n          valueInCents\n          currency\n        }\n        platformTips {\n          valueInCents\n          currency\n        }\n        pendingPlatformTips {\n          valueInCents\n          currency\n        }\n        pendingHostFeeShare {\n          valueInCents\n          currency\n        }\n        totalMoneyManaged {\n          valueInCents\n          currency\n        }\n      }\n      hostMetricsTimeSeries(account: $account, dateFrom: $dateFrom, dateTo: $dateTo) {\n        timeUnit\n        totalReceived {\n          timeUnit\n          nodes {\n            date\n            kind\n            amount {\n              value\n            }\n          }\n        }\n        totalSpent {\n          timeUnit\n          nodes {\n            date\n            kind\n            amount {\n              value\n            }\n          }\n        }\n      }\n    }\n  }\n"])));

var HostDashboardReports_SectionTitle = function SectionTitle(_ref) {
  var children = _ref.children,
      _ref$hint = _ref.hint,
      hint = _ref$hint === void 0 ? null : _ref$hint;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    alignItems: "center",
    justifyContent: "space-between",
    mb: 22,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H2, {
      fontWeight: "500",
      fontSize: "20px",
      lineHeight: "28px",
      children: children
    }), hint && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mx: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
        content: hint,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Question_esm/* Question */.H, {
          size: 18,
          color: "#75777A"
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      borderColor: "black.300",
      flex: "1",
      ml: 2
    })]
  });
};

var HostDashboardReports_FilterLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "HostDashboardReports__FilterLabel",
  componentId: "sc-1occr4f-0"
})(["font-weight:500;text-transform:uppercase;margin-bottom:8px;color:#4e5052;"]);

var prepareCollectivesForFilter = function prepareCollectivesForFilter(collectives) {
  return !(collectives !== null && collectives !== void 0 && collectives.length) ? null : collectives.map(function (collective) {
    return {
      legacyId: collective.value.id
    };
  });
};

var getDefaultDateInterval = function getDefaultDateInterval() {
  var interval = PeriodFilterPresetsSelect/* PERIOD_FILTER_PRESETS.thisMonth.getInterval */.p.thisMonth.getInterval();
  return {
    timezoneType: 'UTC',
    // To match the monthly host report sent by email
    from: interval.from.format('YYYY-MM-DD'),
    to: interval.to.format('YYYY-MM-DD')
  };
};

var HostDashboardReports = function HostDashboardReports(_ref2) {
  var hostSlug = _ref2.hostSlug;

  var _React$useState = react.useState(getDefaultDateInterval),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      dateInterval = _React$useState2[0],
      setDateInterval = _React$useState2[1];

  var _React$useState3 = react.useState(null),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      collectives = _React$useState4[0],
      setCollectives = _React$useState4[1];

  var dateFrom = (0,date_utils/* simpleDateToISOString */.GF)(dateInterval === null || dateInterval === void 0 ? void 0 : dateInterval.from, false, dateInterval === null || dateInterval === void 0 ? void 0 : dateInterval.timezoneType);
  var dateTo = (0,date_utils/* simpleDateToISOString */.GF)(dateInterval === null || dateInterval === void 0 ? void 0 : dateInterval.to, true, dateInterval === null || dateInterval === void 0 ? void 0 : dateInterval.timezoneType);
  var variables = {
    hostSlug: hostSlug,
    account: collectives,
    dateFrom: dateFrom,
    dateTo: dateTo
  };

  var _useQuery = (0,client.useQuery)(hostReportPageQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      error = _useQuery.error,
      loading = _useQuery.loading;

  var host = data === null || data === void 0 ? void 0 : data.host;

  if (!loading) {
    if (error) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
        error: error,
        maxWidth: 500,
        m: "0 auto"
      });
    } else if (!host) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(NotFound/* default */.Z, {});
    } else if (!host.isActive) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        withIcon: true,
        type: "error",
        maxWidth: 400,
        m: "0 auto",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "host.onlyActive",
          defaultMessage: [{
            "type": 0,
            "value": "This page is only available for active fiscal hosts"
          }]
        })
      });
    }
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    m: "0 auto",
    px: 2,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      mb: 24,
      flexWrap: "wrap",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
        fontSize: "32px",
        lineHeight: "40px",
        py: 2,
        fontWeight: "normal",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Reports",
          defaultMessage: [{
            "type": 0,
            "value": "Reports"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mx: "auto"
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      position: ['relative', 'sticky'],
      top: "0",
      background: "white",
      zIndex: "10",
      py: 3,
      mb: 4,
      boxShadow: "5px 12px 7px -10px #44444429",
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
        gridTemplateColumns: ['100%', '1fr 2fr auto'],
        gridGap: ['8px', null, null, '28px'],
        width: "100%",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(HostDashboardReports_FilterLabel, {
            htmlFor: "transactions-period-filter",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "TransactionsOverviewSection.PeriodFilter",
              defaultMessage: [{
                "type": 0,
                "value": "Filter by Date"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(PeriodFilter/* default */.Z, {
            onChange: setDateInterval,
            value: dateInterval,
            minDate: host === null || host === void 0 ? void 0 : host.createdAt
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(HostDashboardReports_FilterLabel, {
            htmlFor: "transactions-collective-filter",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "TransactionsOverviewSection.CollectiveFilter",
              defaultMessage: [{
                "type": 0,
                "value": "Filter by Collective"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CollectivePickerAsync/* default */.Z, {
            inputId: "TransactionsCollectiveFilter",
            "data-cy": "transactions-collective-filter",
            types: [constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE, constants_collectives/* CollectiveType.EVENT */.eV.EVENT, constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT, constants_collectives/* CollectiveType.FUND */.eV.FUND],
            isMulti: true,
            hostCollectiveIds: [host === null || host === void 0 ? void 0 : host.legacyId],
            onChange: function onChange(value) {
              return setCollectives(prepareCollectivesForFilter(value));
            },
            styles: {
              control: function control(baseStyles) {
                return HostDashboardReports_objectSpread(HostDashboardReports_objectSpread({}, baseStyles), {}, {
                  borderRadius: 16
                });
              }
            },
            isLoading: loading,
            disabled: loading,
            useCompactMode: true
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          alignItems: "flex-end",
          width: "100%",
          mt: [24, 0],
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_HostCSVDownloadButton, {
            host: host,
            collectives: collectives,
            dateInterval: dateInterval
          })
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
      mb: 5,
      borderRadius: "12px",
      padding: "32px 24px",
      borderColor: "black.400",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mb: 38,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(HostDashboardReports_SectionTitle, {
          hint: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.Metrics.TotalMoneyManages.description",
            defaultMessage: [{
              "type": 0,
              "value": "Total amount held in your bank account for the Host and its Collectives."
            }]
          }),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.Metrics.TotalMoneyManages",
            defaultMessage: [{
              "type": 0,
              "value": "Total Money Managed"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_TotalMoneyManagedSection, {
          host: host,
          isLoading: loading,
          collectives: collectives
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mb: 38,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(HostDashboardReports_SectionTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.Metrics.HostFees",
            defaultMessage: [{
              "type": 0,
              "value": "Host Fees"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_HostFeesSection, {
          host: host,
          collectives: collectives,
          isLoading: loading
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mb: 38,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(HostDashboardReports_SectionTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "TransactionsOverview",
            defaultMessage: [{
              "type": 0,
              "value": "Contributions and Expenses"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_TransactionsOverviewSection, {
          host: host,
          isLoading: loading
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mb: 4,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(reports_section_PlatformTipsCollected, {
          host: host,
          isLoading: loading
        })
      })]
    })]
  });
};

HostDashboardReports.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostDashboardReports",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var host_dashboard_HostDashboardReports = (HostDashboardReports);
// EXTERNAL MODULE: ./node_modules/lodash/pick.js
var pick = __webpack_require__(78718);
var pick_default = /*#__PURE__*/__webpack_require__.n(pick);
// EXTERNAL MODULE: ./node_modules/lodash/isArray.js
var isArray = __webpack_require__(1469);
var isArray_default = /*#__PURE__*/__webpack_require__.n(isArray);
// EXTERNAL MODULE: ./lib/graphql/mutations.js
var mutations = __webpack_require__(79618);
// EXTERNAL MODULE: ./lib/graphql/queries.js
var queries = __webpack_require__(51719);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/classCallCheck.js
var classCallCheck = __webpack_require__(33227);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/createClass.js
var createClass = __webpack_require__(88361);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(92191);
var assertThisInitialized_default = /*#__PURE__*/__webpack_require__.n(assertThisInitialized);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/inherits.js
var inherits = __webpack_require__(85971);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/possibleConstructorReturn.js
var possibleConstructorReturn = __webpack_require__(52715);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn);
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(91193);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf);
// EXTERNAL MODULE: ./node_modules/lodash/set.js
var set = __webpack_require__(36968);
var set_default = /*#__PURE__*/__webpack_require__.n(set);
// EXTERNAL MODULE: ./node_modules/lodash/find.js
var find = __webpack_require__(13311);
var find_default = /*#__PURE__*/__webpack_require__.n(find);
// EXTERNAL MODULE: ./node_modules/lodash/cloneDeep.js
var cloneDeep = __webpack_require__(50361);
var cloneDeep_default = /*#__PURE__*/__webpack_require__.n(cloneDeep);
// EXTERNAL MODULE: ./node_modules/@opencollective/taxes/dist/index.js
var dist = __webpack_require__(41429);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/InfoCircle/InfoCircle.esm.js
var InfoCircle_esm = __webpack_require__(95612);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/ArrowBack/ArrowBack.esm.js
var ArrowBack_esm = __webpack_require__(7742);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/injectIntl.js
var injectIntl = __webpack_require__(74806);
// EXTERNAL MODULE: ./lib/constants/currency.js
var currency = __webpack_require__(38198);
// EXTERNAL MODULE: ./lib/constants/order-status.js
var order_status = __webpack_require__(24317);
// EXTERNAL MODULE: ./lib/constants/tiers-types.js
var tiers_types = __webpack_require__(12568);
;// CONCATENATED MODULE: ./lib/constants/vat.js
var VAT_OPTIONS = {
  HOST: 'HOST',
  OWN: 'OWN'
};
// EXTERNAL MODULE: ./lib/utils.js
var utils = __webpack_require__(97079);
// EXTERNAL MODULE: ./components/admin-panel/sections/ActivityLog/index.js + 8 modules
var ActivityLog = __webpack_require__(65777);
// EXTERNAL MODULE: ./lib/url-helpers.js
var url_helpers = __webpack_require__(25896);
// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/relative.js
var relative = __webpack_require__(48272);
// EXTERNAL MODULE: ./lib/dayjs.js
var dayjs = __webpack_require__(82114);
// EXTERNAL MODULE: ./components/Avatar.tsx
var Avatar = __webpack_require__(11194);
// EXTERNAL MODULE: ./components/DateTime.js
var DateTime = __webpack_require__(95370);
// EXTERNAL MODULE: ./components/LinkCollective.js
var LinkCollective = __webpack_require__(97619);
;// CONCATENATED MODULE: ./components/oauth/AuthorizedApp.js




var AuthorizedApp_templateObject;




















var revokeAuthorizationMutation = (0,graphql_tag_lib/* default */.ZP)(AuthorizedApp_templateObject || (AuthorizedApp_templateObject = taggedTemplateLiteral_default()(["\n  mutation RevokeAuthorization($id: String!) {\n    revokeOAuthAuthorization(oAuthAuthorization: { id: $id }) {\n      id\n    }\n  }\n"])));
var AuthorizedApp = function AuthorizedApp(_ref) {
  var authorization = _ref.authorization,
      onRevoke = _ref.onRevoke;
  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useMutation = (0,client.useMutation)(revokeAuthorizationMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    onCompleted: onRevoke
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      revokeAuthorization = _useMutation2[0],
      loading = _useMutation2[1].loading;

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    "data-cy": "connected-oauth-app",
    alignItems: "center",
    justifyContent: "space-between",
    maxWidth: 776,
    mb: 3,
    flexWrap: "wrap",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
        collective: authorization.application.account,
        size: 64
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        ml: 24,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontWeight: "800",
          fontSize: "15px",
          children: authorization.application.name
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          alignItems: "center",
          flexWrap: "wrap",
          fontSize: "12px",
          mt: 2,
          color: "black.700",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("time", {
            dateTime: authorization.createdAt,
            title: (0,DateTime/* generateDateTitle */.r)(intl, new Date(authorization.createdAt)),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Zi4M6s",
              defaultMessage: [{
                "type": 0,
                "value": "Connected on "
              }, {
                "type": 3,
                "value": "date",
                "style": "simple"
              }],
              values: {
                date: new Date()
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            mr: 1,
            children: authorization.lastUsedAt && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
              children: ["\xA0\u2022\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)("time", {
                dateTime: authorization.lastUsedAt,
                title: (0,DateTime/* generateDateTitle */.r)(intl, new Date(authorization.lastUsedAt)),
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "lihKZ1",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Last used "
                  }, {
                    "type": 1,
                    "value": "timeElapsed"
                  }],
                  values: {
                    timeElapsed: /*#__PURE__*/(0,jsx_runtime.jsx)(relative/* default */.Z, {
                      value: (0,dayjs/* default */.Z)(authorization.lastUsedAt).diff((0,dayjs/* default */.Z)(), 'second'),
                      unit: "second",
                      updateIntervalInSeconds: 60
                    })
                  }
                })
              })]
            })
          }), !(0,collective_lib/* isIndividualAccount */.Sh)(authorization.account) && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            alignItems: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "CreatedBy",
              defaultMessage: [{
                "type": 0,
                "value": "by "
              }, {
                "type": 1,
                "value": "name"
              }],
              values: {
                name: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                  alignItems: "center",
                  ml: 2,
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
                    collective: authorization.account,
                    size: 24,
                    mr: 1
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                    as: LinkCollective/* default */.Z,
                    collective: authorization.account,
                    color: "black.700"
                  })]
                })
              }
            })
          })]
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      ml: 2,
      textAlign: "center",
      mt: 2,
      width: ['100%', 'auto'],
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        "data-cy": "oauth-app-revoke-btn",
        buttonSize: "small",
        buttonStyle: "dangerSecondary",
        isBorderless: true,
        loading: loading,
        onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
          return regenerator_default().wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _context.prev = 0;
                  _context.next = 3;
                  return revokeAuthorization({
                    variables: {
                      id: authorization.id
                    }
                  });

                case 3:
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                    message: intl.formatMessage({
                      id: "hfh76h",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Authorization for "
                      }, {
                        "type": 1,
                        "value": "appName"
                      }, {
                        "type": 0,
                        "value": " revoked"
                      }]
                    }, {
                      appName: authorization.application.name
                    })
                  });
                  _context.next = 9;
                  break;

                case 6:
                  _context.prev = 6;
                  _context.t0 = _context["catch"](0);
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                    message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                  });

                case 9:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[0, 6]]);
        })),
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "KUFMiM",
          defaultMessage: [{
            "type": 0,
            "value": "Revoke access"
          }]
        })
      })
    })]
  });
};
AuthorizedApp.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AuthorizedApp",
  "props": {
    "authorization": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "createdAt": {
            "name": "string",
            "required": true
          },
          "lastUsedAt": {
            "name": "string",
            "required": true
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              },
              "name": {
                "name": "string",
                "required": true
              },
              "slug": {
                "name": "string",
                "required": true
              },
              "type": {
                "name": "string",
                "required": true
              },
              "imageUrl": {
                "name": "string",
                "required": false
              }
            },
            "required": true
          },
          "application": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              },
              "name": {
                "name": "string",
                "required": true
              },
              "account": {
                "name": "shape",
                "value": {
                  "id": {
                    "name": "string",
                    "required": true
                  },
                  "name": {
                    "name": "string",
                    "required": true
                  },
                  "slug": {
                    "name": "string",
                    "required": true
                  },
                  "type": {
                    "name": "string",
                    "required": true
                  },
                  "imageUrl": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    },
    "onRevoke": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
;// CONCATENATED MODULE: ./components/oauth/queries.js


var queries_templateObject;


var authorizedAppsQuery = (0,graphql_tag_lib/* default */.ZP)(queries_templateObject || (queries_templateObject = taggedTemplateLiteral_default()(["\n  query AuthorizedApps($limit: Int, $offset: Int) {\n    loggedInAccount {\n      id\n      oAuthAuthorizations(limit: $limit, offset: $offset) {\n        totalCount\n        nodes {\n          id\n          createdAt\n          lastUsedAt\n          account {\n            id\n            name\n            slug\n            type\n            imageUrl(height: 48)\n          }\n          application {\n            id\n            name\n            account {\n              id\n              name\n              slug\n              type\n              imageUrl(height: 128)\n            }\n          }\n        }\n      }\n    }\n  }\n"])));
;// CONCATENATED MODULE: ./components/admin-panel/sections/AuthorizedApps.js






















var AuthorizedAppsSection = function AuthorizedAppsSection() {
  var _data$loggedInAccount, _data$loggedInAccount2, _data$loggedInAccount3;

  var router = (0,next_router.useRouter)() || {};
  var query = router.query;
  var variables = {
    limit: 10,
    offset: query.offset ? parseInt(query.offset) : 0
  };

  var _useQuery = (0,client.useQuery)(authorizedAppsQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error,
      refetch = _useQuery.refetch;

  var _useLoggedInUser = (0,useLoggedInUser/* default */.Z)(),
      LoggedInUser = _useLoggedInUser.LoggedInUser;

  var authorizations = data === null || data === void 0 ? void 0 : (_data$loggedInAccount = data.loggedInAccount) === null || _data$loggedInAccount === void 0 ? void 0 : _data$loggedInAccount.oAuthAuthorizations; // Redirect to previous page when removing the last item of a page

  react.useEffect(function () {
    if (variables.offset && variables.offset >= (authorizations === null || authorizations === void 0 ? void 0 : authorizations.totalCount)) {
      var pathname = router.asPath.split('?')[0];
      var offset = Math.max(0, variables.offset - variables.limit);
      router.push({
        pathname: pathname,
        query: {
          offset: offset,
          limit: variables.limit
        }
      });
      refetch();
    }
  }, [authorizations === null || authorizations === void 0 ? void 0 : authorizations.totalCount, variables.offset]);
  return loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
    height: 300
  }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
    error: error
  }) : !(data !== null && data !== void 0 && (_data$loggedInAccount2 = data.loggedInAccount) !== null && _data$loggedInAccount2 !== void 0 && (_data$loggedInAccount3 = _data$loggedInAccount2.oAuthAuthorizations) !== null && _data$loggedInAccount3 !== void 0 && _data$loggedInAccount3.totalCount) ? /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    children: LoggedInUser.collective.settings.oauthBeta ? /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "7q8x3B",
        defaultMessage: [{
          "type": 0,
          "value": "You haven't configured any application yet"
        }]
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      withIcon: true,
      mt: 3,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "XhMMHL",
        defaultMessage: [{
          "type": 0,
          "value": "No Authorized App yet. You can create your own OAuth application from the "
        }, {
          "type": 8,
          "value": "ForDevelopersLink",
          "children": [{
            "type": 0,
            "value": "For Developers"
          }]
        }, {
          "type": 0,
          "value": " section."
        }],
        values: {
          ForDevelopersLink: (0,I18nFormatters/* getI18nLink */.fw)({
            as: Link/* default */.Z,
            href: (0,url_helpers/* getSettingsRoute */.aT)(LoggedInUser.collective, ALL_SECTIONS.FOR_DEVELOPERS)
          })
        }
      })
    })
  }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    mt: 3,
    children: [authorizations.nodes.map(function (authorization, index) {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(AuthorizedApp, {
          authorization: authorization,
          onRevoke: refetch
        }), index !== authorizations.nodes.length - 1 && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          my: 4,
          borderColor: "black.300"
        })]
      }, authorization.id);
    }), authorizations.totalCount > variables.limit && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
        total: authorizations.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

AuthorizedAppsSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AuthorizedAppsSection"
};
/* harmony default export */ var AuthorizedApps = (AuthorizedAppsSection);
// EXTERNAL MODULE: ./node_modules/formik/dist/formik.esm.js + 121 modules
var formik_esm = __webpack_require__(82580);
// EXTERNAL MODULE: ./components/StyledInput.tsx
var StyledInput = __webpack_require__(97274);
// EXTERNAL MODULE: ./components/StyledInputFormikField.js
var StyledInputFormikField = __webpack_require__(75667);
// EXTERNAL MODULE: ./components/WarnIfUnsavedChanges.js
var WarnIfUnsavedChanges = __webpack_require__(84906);
// EXTERNAL MODULE: ./components/ConfirmationModal.js
var ConfirmationModal = __webpack_require__(47988);
;// CONCATENATED MODULE: ./components/oauth/DeleteOAuthApplicationModal.js





var DeleteOAuthApplicationModal_excluded = ["application", "onDelete"];

var DeleteOAuthApplicationModal_templateObject;

function DeleteOAuthApplicationModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function DeleteOAuthApplicationModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? DeleteOAuthApplicationModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : DeleteOAuthApplicationModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }











var deleteApplicationMutation = (0,graphql_tag_lib/* default */.ZP)(DeleteOAuthApplicationModal_templateObject || (DeleteOAuthApplicationModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation DeleteOAuthApplication($id: String!) {\n    deleteApplication(application: { id: $id }) {\n      id\n      account {\n        id\n      }\n    }\n  }\n"])));

var DeleteOAuthApplicationModal = function DeleteOAuthApplicationModal(_ref) {
  var application = _ref.application,
      onDelete = _ref.onDelete,
      props = objectWithoutProperties_default()(_ref, DeleteOAuthApplicationModal_excluded);

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var intl = (0,useIntl/* default */.Z)();

  var _useMutation = (0,client.useMutation)(deleteApplicationMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    update: function update(cache, _ref2) {
      var data = _ref2.data;
      // Remove object from cache
      cache.evict({
        id: cache.identify(application)
      });
      cache.gc(); // Remove object from parent query

      var accountCacheId = cache.identify(data.deleteApplication.account);
      cache.modify({
        id: accountCacheId,
        fields: {
          oAuthApplications: function oAuthApplications(_, _ref3) {
            var DELETE = _ref3.DELETE;
            return DELETE;
          }
        }
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      deleteApplication = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsx)(ConfirmationModal/* default */.Z, DeleteOAuthApplicationModal_objectSpread(DeleteOAuthApplicationModal_objectSpread({
    isDanger: true,
    type: "delete",
    header: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "M5dGYy",
      defaultMessage: [{
        "type": 0,
        "value": "Delete application "
      }, {
        "type": 1,
        "value": "name"
      }],
      values: {
        name: application.name
      }
    })
  }, props), {}, {
    continueHandler: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return deleteApplication({
                variables: {
                  id: application.id
                }
              });

            case 3:
              _context.next = 5;
              return onDelete(application);

            case 5:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: intl.formatMessage({
                  id: "vAzArE",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Application "
                  }, {
                    "type": 1,
                    "value": "name"
                  }, {
                    "type": 0,
                    "value": " deleted"
                  }]
                }, {
                  name: application.name
                })
              });
              return _context.abrupt("return", ConfirmationModal/* CONFIRMATION_MODAL_TERMINATE */.p);

            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](0);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                variant: 'light',
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
              });

            case 12:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 9]]);
    })),
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "pp/kVH",
        defaultMessage: [{
          "type": 0,
          "value": "This will permanently delete the application, revoking all tokens associated with it. Are you sure you want to continue?"
        }]
      })
    })
  }));
};

DeleteOAuthApplicationModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteOAuthApplicationModal",
  "props": {
    "application": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var oauth_DeleteOAuthApplicationModal = (DeleteOAuthApplicationModal);
// EXTERNAL MODULE: ./lib/form-utils.js
var form_utils = __webpack_require__(40986);
;// CONCATENATED MODULE: ./components/oauth/lib.js

var validateOauthApplicationValues = function validateOauthApplicationValues(intl, values) {
  var errors = {};
  (0,form_utils/* verifyFieldLength */.zy)(intl, errors, values, 'name', 3, 100);
  return errors;
};
;// CONCATENATED MODULE: ./components/oauth/OAuthApplicationSettings.js







var OAuthApplicationSettings_templateObject, _templateObject2, _templateObject3;



function OAuthApplicationSettings_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function OAuthApplicationSettings_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? OAuthApplicationSettings_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : OAuthApplicationSettings_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



























var applicationSettingsFragment = (0,graphql_tag_lib/* default */.ZP)(OAuthApplicationSettings_templateObject || (OAuthApplicationSettings_templateObject = taggedTemplateLiteral_default()(["\n  fragment ApplicationSettings on Application {\n    id\n    name\n    description\n    redirectUri\n    clientId\n    clientSecret\n  }\n"])));
var applicationQuery = (0,graphql_tag_lib/* default */.ZP)(_templateObject2 || (_templateObject2 = taggedTemplateLiteral_default()(["\n  query OAuthApplicationQuery($id: String!) {\n    application(id: $id) {\n      id\n      ...ApplicationSettings\n    }\n  }\n  ", "\n"])), applicationSettingsFragment);
var updateApplicationMutation = (0,graphql_tag_lib/* default */.ZP)(_templateObject3 || (_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation UpdateOAuthApplication($application: ApplicationUpdateInput!) {\n    updateApplication(application: $application) {\n      id\n      ...ApplicationSettings\n    }\n  }\n  ", "\n"])), applicationSettingsFragment);
var CodeContainer = (0,styled_components_browser_esm/* default */.ZP)(Text/* Span */.Dr).withConfig({
  displayName: "OAuthApplicationSettings__CodeContainer",
  componentId: "sc-1kead3n-0"
})(["overflow-wrap:anywhere;user-select:all;margin-right:8px;"]);

var _StyledCodeContainer = (0,styled_components_browser_esm/* default */.ZP)(CodeContainer).withConfig({
  displayName: "OAuthApplicationSettings___StyledCodeContainer",
  componentId: "sc-1kead3n-1"
})({});

var ObfuscatedClientSecret = function ObfuscatedClientSecret(_ref) {
  var secret = _ref.secret;

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      show = _React$useState2[0],
      setShow = _React$useState2[1];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
    children: [show && /*#__PURE__*/(0,jsx_runtime.jsx)(CodeContainer, {
      "data-cy": "unhidden-secret",
      children: secret
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
      "data-cy": "show-secret-btn",
      as: "button",
      color: "blue.600",
      onClick: function onClick() {
        return setShow(!show);
      },
      children: show ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide"
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "K7AkdL",
        defaultMessage: [{
          "type": 0,
          "value": "Show"
        }]
      })
    })]
  });
};

var LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '16px',
  lineHeight: '24px'
};

var OAuthApplicationSettings = function OAuthApplicationSettings(_ref2) {
  var backPath = _ref2.backPath,
      id = _ref2.id;
  var intl = (0,useIntl/* default */.Z)();
  var router = (0,next_router.useRouter)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      showDeleteModal = _React$useState4[0],
      setShowDeleteModal = _React$useState4[1];

  var _useQuery = (0,client.useQuery)(applicationQuery, {
    variables: {
      id: id
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error;

  var _useMutation = (0,client.useMutation)(updateApplicationMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      updateApplication = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    "data-cy": "oauth-app-settings",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mt: 3,
      mb: 4,
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
        "data-cy": "go-back-link",
        as: Link/* default */.Z,
        color: "black.800",
        href: backPath,
        children: ["\u2190 ", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "05doZ2",
          defaultMessage: [{
            "type": 0,
            "value": "Go back to all your apps"
          }]
        })]
      })
    }), loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 300
    }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        width: "100%",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
          fontSize: "18px",
          fontWeight: "700",
          children: data.application.name
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          ml: 2,
          flex: "1",
          borderColor: "black.400"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
        maxWidth: "600px",
        p: 3,
        my: 4,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          color: "black.800",
          mb: "20px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FJBnaq",
            defaultMessage: [{
              "type": 0,
              "value": "Client ID and client secret"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          justifyContent: "space-between",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            width: "35%",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "15px",
              fontWeight: "500",
              color: "black.800",
              mb: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "U5+MBC",
                defaultMessage: [{
                  "type": 0,
                  "value": "Client ID"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledCodeContainer, {
              "data-cy": "oauth-app-client-id",
              fontSize: "14px",
              color: "black.800",
              children: data.application.clientId
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            width: "65%",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "15px",
              fontWeight: "500",
              color: "black.800",
              mb: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "B7p2EC",
                defaultMessage: [{
                  "type": 0,
                  "value": "Client secret"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(ObfuscatedClientSecret, {
              secret: data.application.clientSecret
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
        initialValues: data.application,
        validate: function validate(values) {
          return validateOauthApplicationValues(intl, values);
        },
        onSubmit: /*#__PURE__*/function () {
          var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values, _ref3) {
            var resetForm, filteredValues, applicationInput, result;
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    resetForm = _ref3.resetForm;
                    _context.prev = 1;
                    filteredValues = pick_default()(values, ['name', 'description', 'redirectUri']);
                    applicationInput = OAuthApplicationSettings_objectSpread({
                      id: data.application.id
                    }, filteredValues);
                    _context.next = 6;
                    return updateApplication({
                      variables: {
                        application: applicationInput
                      }
                    });

                  case 6:
                    result = _context.sent;
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                      message: intl.formatMessage({
                        id: "NZ1C9t",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Application \""
                        }, {
                          "type": 1,
                          "value": "name"
                        }, {
                          "type": 0,
                          "value": "\" updated"
                        }]
                      }, {
                        name: result.data.updateApplication.name
                      })
                    });
                    resetForm({
                      values: result.data.updateApplication
                    });
                    _context.next = 14;
                    break;

                  case 11:
                    _context.prev = 11;
                    _context.t0 = _context["catch"](1);
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                      variant: 'light',
                      message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                    });

                  case 14:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, null, [[1, 11]]);
          }));

          return function (_x, _x2) {
            return _ref4.apply(this, arguments);
          };
        }(),
        children: function children(_ref5) {
          var isSubmitting = _ref5.isSubmitting,
              dirty = _ref5.dirty;
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(WarnIfUnsavedChanges/* default */.Z, {
              hasUnsavedChanges: dirty && !showDeleteModal
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "name",
              label: intl.formatMessage({
                id: "J7xOu/",
                defaultMessage: [{
                  "type": 0,
                  "value": "Name of the app"
                }]
              }),
              labelProps: LABEL_STYLES,
              required: true,
              children: function children(_ref6) {
                var field = _ref6.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, OAuthApplicationSettings_objectSpread(OAuthApplicationSettings_objectSpread({}, field), {}, {
                  placeholder: intl.formatMessage({
                    id: "examples",
                    defaultMessage: [{
                      "type": 0,
                      "value": "e.g., "
                    }, {
                      "type": 1,
                      "value": "examples"
                    }]
                  }, {
                    examples: 'Back Your Stack'
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "description",
              label: intl.formatMessage({
                id: "Fields.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Description"
                }]
              }),
              hint: intl.formatMessage({
                id: "sZy/sl",
                defaultMessage: [{
                  "type": 0,
                  "value": "A short description of your app so users know what it does."
                }]
              }),
              labelProps: LABEL_STYLES,
              mt: 20,
              children: function children(_ref7) {
                var field = _ref7.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, OAuthApplicationSettings_objectSpread(OAuthApplicationSettings_objectSpread({}, field), {}, {
                  height: "98px",
                  resize: "none",
                  placeholder: intl.formatMessage({
                    id: "oauthApp.descriptionPlaceholder",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Discover the Open Source projects your organization is using that need financial support."
                    }]
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "redirectUri",
              label: intl.formatMessage({
                id: "5nkU0l",
                defaultMessage: [{
                  "type": 0,
                  "value": "Callback URL"
                }]
              }),
              labelProps: LABEL_STYLES,
              mt: 20,
              required: true,
              children: function children(_ref8) {
                var field = _ref8.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, OAuthApplicationSettings_objectSpread(OAuthApplicationSettings_objectSpread({}, field), {}, {
                  type: "url",
                  placeholder: "http://example.com/path"
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              gap: "16px",
              justifyContent: "space-between",
              mt: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "submit",
                buttonStyle: "primary",
                buttonSize: "small",
                loading: isSubmitting,
                disabled: !dirty,
                minWidth: "125px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "UtDIxu",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Update app"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "button",
                buttonStyle: "dangerSecondary",
                buttonSize: "small",
                disabled: isSubmitting,
                onClick: function onClick() {
                  return setShowDeleteModal(true);
                },
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "3I6uVw",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Delete app"
                  }]
                })
              })]
            })]
          });
        }
      }), showDeleteModal && /*#__PURE__*/(0,jsx_runtime.jsx)(oauth_DeleteOAuthApplicationModal, {
        application: data.application,
        onClose: function onClose() {
          return setShowDeleteModal(false);
        },
        onDelete: function onDelete() {
          return router.push(backPath);
        }
      })]
    })]
  });
};

OAuthApplicationSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OAuthApplicationSettings",
  "props": {
    "id": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "backPath": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var oauth_OAuthApplicationSettings = (OAuthApplicationSettings);
// EXTERNAL MODULE: ./node_modules/@apollo/client/core/networkStatus.js
var core_networkStatus = __webpack_require__(85942);
;// CONCATENATED MODULE: ./components/oauth/CreateOauthApplicationModal.js





var CreateOauthApplicationModal_excluded = ["account", "onSuccess", "onClose"];

var CreateOauthApplicationModal_templateObject;



function CreateOauthApplicationModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CreateOauthApplicationModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CreateOauthApplicationModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CreateOauthApplicationModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

















var createApplicationMutation = (0,graphql_tag_lib/* default */.ZP)(CreateOauthApplicationModal_templateObject || (CreateOauthApplicationModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation CreateApplication($application: ApplicationCreateInput!) {\n    createApplication(application: $application) {\n      id\n      name\n    }\n  }\n"])));
var CreateOauthApplicationModal_LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '14px',
  lineHeight: '17px'
};
var INITIAL_VALUES = {
  name: '',
  description: '',
  redirectUri: ''
};

var CreateOauthApplicationModal = function CreateOauthApplicationModal(_ref) {
  var account = _ref.account,
      onSuccess = _ref.onSuccess,
      onClose = _ref.onClose,
      props = objectWithoutProperties_default()(_ref, CreateOauthApplicationModal_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useMutation = (0,client.useMutation)(createApplicationMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    update: function update(cache) {
      var accountCacheId = cache.identify(account);
      cache.modify({
        id: accountCacheId,
        fields: {
          oAuthApplications: function oAuthApplications(_, _ref2) {
            var DELETE = _ref2.DELETE;
            return DELETE;
          }
        }
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      createApplication = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, CreateOauthApplicationModal_objectSpread(CreateOauthApplicationModal_objectSpread({
    width: "576px",
    onClose: onClose,
    "data-cy": "create-oauth-app-modal"
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "m6BfW0",
        defaultMessage: [{
          "type": 0,
          "value": "Create OAuth app"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
      initialValues: INITIAL_VALUES,
      validate: function validate(values) {
        return validateOauthApplicationValues(intl, values);
      },
      onSubmit: /*#__PURE__*/function () {
        var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
          var appInput, result;
          return regenerator_default().wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _context.prev = 0;
                  appInput = CreateOauthApplicationModal_objectSpread(CreateOauthApplicationModal_objectSpread({}, values), {}, {
                    account: {
                      id: account.id
                    }
                  });
                  _context.next = 4;
                  return createApplication({
                    variables: {
                      application: appInput
                    }
                  });

                case 4:
                  result = _context.sent;
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                    message: intl.formatMessage({
                      id: "E8zg4M",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Application \""
                      }, {
                        "type": 1,
                        "value": "name"
                      }, {
                        "type": 0,
                        "value": "\" created"
                      }]
                    }, {
                      name: result.data.createApplication.name
                    })
                  });
                  onSuccess(result.data.createApplication, account);
                  _context.next = 12;
                  break;

                case 9:
                  _context.prev = 9;
                  _context.t0 = _context["catch"](0);
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                    variant: 'light',
                    message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                  });

                case 12:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[0, 9]]);
        }));

        return function (_x) {
          return _ref3.apply(this, arguments);
        };
      }(),
      children: function children(_ref4) {
        var isSubmitting = _ref4.isSubmitting;
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
            mt: "36px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "name",
              label: intl.formatMessage({
                id: "J7xOu/",
                defaultMessage: [{
                  "type": 0,
                  "value": "Name of the app"
                }]
              }),
              labelProps: CreateOauthApplicationModal_LABEL_STYLES,
              required: true,
              children: function children(_ref5) {
                var field = _ref5.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, CreateOauthApplicationModal_objectSpread(CreateOauthApplicationModal_objectSpread({}, field), {}, {
                  placeholder: intl.formatMessage({
                    id: "examples",
                    defaultMessage: [{
                      "type": 0,
                      "value": "e.g., "
                    }, {
                      "type": 1,
                      "value": "examples"
                    }]
                  }, {
                    examples: 'Back Your Stack'
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "description",
              label: intl.formatMessage({
                id: "Fields.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Description"
                }]
              }),
              hint: intl.formatMessage({
                id: "sZy/sl",
                defaultMessage: [{
                  "type": 0,
                  "value": "A short description of your app so users know what it does."
                }]
              }),
              labelProps: CreateOauthApplicationModal_LABEL_STYLES,
              mt: 20,
              children: function children(_ref6) {
                var field = _ref6.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, CreateOauthApplicationModal_objectSpread(CreateOauthApplicationModal_objectSpread({}, field), {}, {
                  height: "98px",
                  resize: "none",
                  placeholder: intl.formatMessage({
                    id: "oauthApp.descriptionPlaceholder",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Discover the Open Source projects your organization is using that need financial support."
                    }]
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "redirectUri",
              label: intl.formatMessage({
                id: "5nkU0l",
                defaultMessage: [{
                  "type": 0,
                  "value": "Callback URL"
                }]
              }),
              labelProps: CreateOauthApplicationModal_LABEL_STYLES,
              mt: 20,
              required: true,
              children: function children(_ref7) {
                var field = _ref7.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, CreateOauthApplicationModal_objectSpread(CreateOauthApplicationModal_objectSpread({}, field), {}, {
                  type: "url",
                  placeholder: "http://example.com/path"
                }));
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              gap: "16px",
              justifyContent: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "submit",
                buttonStyle: "primary",
                buttonSize: "small",
                loading: isSubmitting,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "r+ksJu",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Create app"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "button",
                buttonStyle: "secondary",
                buttonSize: "small",
                disabled: isSubmitting,
                onClick: function onClick() {
                  return onClose();
                },
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "actions.cancel",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Cancel"
                  }]
                })
              })]
            })
          })]
        });
      }
    })]
  }));
};

CreateOauthApplicationModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CreateOauthApplicationModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var oauth_CreateOauthApplicationModal = (CreateOauthApplicationModal);
;// CONCATENATED MODULE: ./components/oauth/OAuthApplicationsList.js



var OAuthApplicationsList_templateObject;






















var applicationsQuery = (0,graphql_tag_lib/* default */.ZP)(OAuthApplicationsList_templateObject || (OAuthApplicationsList_templateObject = taggedTemplateLiteral_default()(["\n  query ApplicationsQuery($slug: String!, $limit: Int, $offset: Int) {\n    account(slug: $slug) {\n      id\n      name\n      slug\n      type\n      imageUrl(height: 128)\n      oAuthApplications(limit: $limit, offset: $offset) {\n        totalCount\n        nodes {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));

var OAuthApplicationsList = function OAuthApplicationsList(_ref) {
  var _data$account, _data$account$oAuthAp;

  var account = _ref.account,
      onApplicationCreated = _ref.onApplicationCreated,
      _ref$offset = _ref.offset,
      offset = _ref$offset === void 0 ? 0 : _ref$offset;
  var variables = {
    slug: account.slug,
    limit: 12,
    offset: offset
  };

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showCreateApplicationModal = _React$useState2[0],
      setShowCreateApplicationModal = _React$useState2[1];

  var _useQuery = (0,client.useQuery)(applicationsQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error,
      networkStatus = _useQuery.networkStatus;

  var showLoadingState = loading || networkStatus === core_networkStatus/* NetworkStatus.refetch */.I.refetch;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    "data-cy": "oauth-apps-list",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      width: "100%",
      alignItems: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
        fontSize: "18px",
        fontWeight: "700",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "cGHrNj",
          defaultMessage: [{
            "type": 0,
            "value": "OAuth Apps"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        mx: 2,
        flex: "1",
        borderColor: "black.400"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
        "data-cy": "create-app-btn",
        buttonSize: "tiny",
        onClick: function onClick() {
          return setShowCreateApplicationModal(true);
        },
        children: ["+ ", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "m6BfW0",
          defaultMessage: [{
            "type": 0,
            "value": "Create OAuth app"
          }]
        })]
      }), showCreateApplicationModal && /*#__PURE__*/(0,jsx_runtime.jsx)(oauth_CreateOauthApplicationModal, {
        account: data.account,
        onClose: function onClose() {
          return setShowCreateApplicationModal(false);
        },
        onSuccess: onApplicationCreated
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      my: 2,
      color: "black.700",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "p4WWnt",
        defaultMessage: [{
          "type": 0,
          "value": "You can register new apps that you developed using Open Collective's API."
        }]
      }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "dG3sDf",
        defaultMessage: [{
          "type": 0,
          "value": "For more information about OAuth applications, check "
        }, {
          "type": 8,
          "value": "link",
          "children": [{
            "type": 0,
            "value": "our documentation"
          }]
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          link: (0,I18nFormatters/* getI18nLink */.fw)({
            href: 'https://docs.opencollective.com/help/developers/oauth'
          })
        }
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      my: 4,
      children: error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
        error: error
      }) : !showLoadingState && !data.account.oAuthApplications.totalCount ? /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCard/* default */.Z, {
        p: "24px",
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            flex: "0 0 64px",
            height: "64px",
            justifyContent: "center",
            alignItems: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              src: "/static/icons/apps.png",
              width: "52px",
              height: "52px",
              alt: ""
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            ml: 3,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "14px",
              fontWeight: "700",
              lineHeight: "20px",
              mb: "12px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "v8bmup",
                defaultMessage: [{
                  "type": 0,
                  "value": "You don't have any app yet"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "12px",
              lineHeight: "18px",
              color: "black.700",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "1lIftz",
                defaultMessage: [{
                  "type": 0,
                  "value": "You can create apps that integrate with the Open Collective platform. "
                }, {
                  "type": 8,
                  "value": "CreateAppLink",
                  "children": [{
                    "type": 0,
                    "value": "Create an app"
                  }]
                }, {
                  "type": 0,
                  "value": " using the Open Collective's API."
                }],
                values: {
                  CreateAppLink: function CreateAppLink(children) {
                    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                      "data-cy": "create-app-link",
                      as: "button",
                      color: "blue.500",
                      onClick: function onClick() {
                        return setShowCreateApplicationModal(true);
                      },
                      children: children
                    });
                  }
                }
              })
            })]
          })]
        })
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
        gridTemplateColumns: ['1fr', null, null, '1fr 1fr', '1fr 1fr 1fr'],
        gridGap: "46px",
        children: showLoadingState ? Array.from({
          length: variables.limit
        }, function (_, index) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: "64px"
          }, index);
        }) : data.account.oAuthApplications.nodes.map(function (app) {
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            "data-cy": "oauth-app",
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              mr: 24,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
                radius: 64,
                collective: data.account
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              flexDirection: "column",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                fontSize: "18px",
                lineHeight: "26px",
                fontWeight: "500",
                color: "black.900",
                children: app.name
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                mt: "10px",
                fontSize: "14px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                  href: (0,url_helpers/* getOauthAppSettingsRoute */.Sn)(data.account, app),
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "Settings",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Settings"
                    }]
                  })
                })
              })]
            })]
          }, app.id);
        })
      })
    }), (data === null || data === void 0 ? void 0 : (_data$account = data.account) === null || _data$account === void 0 ? void 0 : (_data$account$oAuthAp = _data$account.oAuthApplications) === null || _data$account$oAuthAp === void 0 ? void 0 : _data$account$oAuthAp.totalCount) > variables.limit && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
        total: data.account.oAuthApplications.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

OAuthApplicationsList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "OAuthApplicationsList",
  "props": {
    "offset": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "onApplicationCreated": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var oauth_OAuthApplicationsList = (OAuthApplicationsList);
;// CONCATENATED MODULE: ./components/personal-token/DeletePersonalTokenModal.js





var DeletePersonalTokenModal_excluded = ["personalToken", "onDelete"];

var DeletePersonalTokenModal_templateObject;

function DeletePersonalTokenModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function DeletePersonalTokenModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? DeletePersonalTokenModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : DeletePersonalTokenModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }











var deletePersonalTokenMutation = (0,graphql_tag_lib/* default */.ZP)(DeletePersonalTokenModal_templateObject || (DeletePersonalTokenModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation DeletePersonalToken($id: String!) {\n    deletePersonalToken(personalToken: { id: $id }) {\n      id\n      account {\n        id\n      }\n    }\n  }\n"])));

var DeletePersonalTokenModal = function DeletePersonalTokenModal(_ref) {
  var personalToken = _ref.personalToken,
      onDelete = _ref.onDelete,
      props = objectWithoutProperties_default()(_ref, DeletePersonalTokenModal_excluded);

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var intl = (0,useIntl/* default */.Z)();

  var _useMutation = (0,client.useMutation)(deletePersonalTokenMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    update: function update(cache, _ref2) {
      var data = _ref2.data;
      cache.evict({
        id: cache.identify(personalToken)
      });
      cache.gc(); // Remove object from parent query

      var accountCacheId = cache.identify(data.deletePersonalToken.account);
      cache.modify({
        id: accountCacheId,
        fields: {
          personalTokens: function personalTokens(_, _ref3) {
            var DELETE = _ref3.DELETE;
            return DELETE;
          }
        }
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      deleteToken = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsx)(ConfirmationModal/* default */.Z, DeletePersonalTokenModal_objectSpread(DeletePersonalTokenModal_objectSpread({
    isDanger: true,
    type: "delete",
    header: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "WzSLvB",
      defaultMessage: [{
        "type": 0,
        "value": "Delete token "
      }, {
        "type": 1,
        "value": "name"
      }],
      values: {
        name: personalToken.name || ''
      }
    })
  }, props), {}, {
    continueHandler: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return deleteToken({
                variables: {
                  id: personalToken.id
                }
              });

            case 3:
              _context.next = 5;
              return onDelete(personalToken);

            case 5:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: intl.formatMessage({
                  id: "Ix3kXB",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Personal token \""
                  }, {
                    "type": 1,
                    "value": "name"
                  }, {
                    "type": 0,
                    "value": "\" deleted"
                  }]
                }, {
                  name: personalToken.name || ''
                })
              });
              return _context.abrupt("return", ConfirmationModal/* CONFIRMATION_MODAL_TERMINATE */.p);

            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](0);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                variant: 'light',
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
              });

            case 12:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 9]]);
    })),
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "7YAGj2",
        defaultMessage: [{
          "type": 0,
          "value": "This will permanently delete the token, revoking all access associated with it. Are you sure you want to continue?"
        }]
      })
    })
  }));
};

DeletePersonalTokenModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeletePersonalTokenModal",
  "props": {
    "personalToken": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    },
    "onDelete": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var personal_token_DeletePersonalTokenModal = (DeletePersonalTokenModal);
// EXTERNAL MODULE: ./lib/graphql/types/v2/graphql.ts
var graphql = __webpack_require__(97965);
;// CONCATENATED MODULE: ./components/personal-token/lib.js


var validatePersonalTokenValues = function validatePersonalTokenValues(intl, values) {
  var errors = {};
  (0,form_utils/* verifyFieldLength */.zy)(intl, errors, values, 'name', 3, 100);
  return errors;
};
var getScopesOptions = function getScopesOptions() {
  var scopes = Object.values(graphql/* OAuthScope */.YX);
  return scopes.map(function (scope) {
    return {
      label: scope,
      value: scope
    };
  });
};
;// CONCATENATED MODULE: ./components/personal-token/PersonalTokenSettings.js







var PersonalTokenSettings_templateObject, PersonalTokenSettings_templateObject2, PersonalTokenSettings_templateObject3;



function PersonalTokenSettings_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function PersonalTokenSettings_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? PersonalTokenSettings_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : PersonalTokenSettings_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





























var personalTokenSettingsFragment = (0,graphql_tag_lib/* default */.ZP)(PersonalTokenSettings_templateObject || (PersonalTokenSettings_templateObject = taggedTemplateLiteral_default()(["\n  fragment PersonalTokenSettings on PersonalToken {\n    id\n    name\n    scope\n    expiresAt\n    token\n  }\n"])));
var personalTokenQuery = (0,graphql_tag_lib/* default */.ZP)(PersonalTokenSettings_templateObject2 || (PersonalTokenSettings_templateObject2 = taggedTemplateLiteral_default()(["\n  query PersonalTokenQuery($id: String!) {\n    personalToken(id: $id) {\n      id\n      ...PersonalTokenSettings\n    }\n  }\n  ", "\n"])), personalTokenSettingsFragment);
var updatePersonalTokenMutation = (0,graphql_tag_lib/* default */.ZP)(PersonalTokenSettings_templateObject3 || (PersonalTokenSettings_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation UpdatePersonalToken($personalToken: PersonalTokenUpdateInput!) {\n    updatePersonalToken(personalToken: $personalToken) {\n      id\n      ...PersonalTokenSettings\n    }\n  }\n  ", "\n"])), personalTokenSettingsFragment);
var PersonalTokenSettings_CodeContainer = (0,styled_components_browser_esm/* default */.ZP)(Text/* Span */.Dr).withConfig({
  displayName: "PersonalTokenSettings__CodeContainer",
  componentId: "sc-ve0c2j-0"
})(["overflow-wrap:anywhere;user-select:all;margin-right:8px;"]);

var PersonalTokenSettings_StyledCodeContainer = (0,styled_components_browser_esm/* default */.ZP)(PersonalTokenSettings_CodeContainer).withConfig({
  displayName: "PersonalTokenSettings___StyledCodeContainer",
  componentId: "sc-ve0c2j-1"
})({});

var PersonalTokenSettings_ObfuscatedClientSecret = function ObfuscatedClientSecret(_ref) {
  var secret = _ref.secret;

  var _React$useState = React.useState(false),
      _React$useState2 = _slicedToArray(_React$useState, 2),
      show = _React$useState2[0],
      setShow = _React$useState2[1];

  return /*#__PURE__*/_jsxs(P, {
    children: [show && /*#__PURE__*/_jsx(PersonalTokenSettings_CodeContainer, {
      "data-cy": "unhidden-secret",
      children: secret
    }), /*#__PURE__*/_jsx(StyledLink, {
      "data-cy": "show-secret-btn",
      as: "button",
      color: "blue.600",
      onClick: function onClick() {
        return setShow(!show);
      },
      children: show ? /*#__PURE__*/_jsx(FormattedMessage, {
        id: "Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide"
        }]
      }) : /*#__PURE__*/_jsx(FormattedMessage, {
        id: "K7AkdL",
        defaultMessage: [{
          "type": 0,
          "value": "Show"
        }]
      })
    })]
  });
};

var PersonalTokenSettings_LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '16px',
  lineHeight: '24px'
};

var PersonalTokenSettings = function PersonalTokenSettings(_ref2) {
  var backPath = _ref2.backPath,
      id = _ref2.id;
  var intl = (0,useIntl/* default */.Z)();
  var router = (0,next_router.useRouter)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      showDeleteModal = _React$useState4[0],
      setShowDeleteModal = _React$useState4[1];

  var _useQuery = (0,client.useQuery)(personalTokenQuery, {
    variables: {
      id: id
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error;

  var _useMutation = (0,client.useMutation)(updatePersonalTokenMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      updateToken = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    "data-cy": "personal-token-settings",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mt: 3,
      mb: 4,
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
        "data-cy": "go-back-link",
        as: Link/* default */.Z,
        color: "black.800",
        href: backPath,
        children: ["\u2190 ", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "3Sl9Fc",
          defaultMessage: [{
            "type": 0,
            "value": "Go back to all your tokens"
          }]
        })]
      })
    }), loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 300
    }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        width: "100%",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
          fontSize: "18px",
          fontWeight: "700",
          children: data.personalToken.name
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          ml: 2,
          flex: "1",
          borderColor: "black.400"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
        maxWidth: "600px",
        p: 3,
        my: 4,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          color: "black.800",
          mb: "20px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "hAcvJ3",
            defaultMessage: [{
              "type": 0,
              "value": "Personal Token"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          justifyContent: "space-between",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            flexDirection: "column",
            width: "100%",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(PersonalTokenSettings_StyledCodeContainer, {
              "data-cy": "personalToken-token",
              fontSize: "14px",
              color: "black.800",
              children: data.personalToken.token
            })
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
        initialValues: PersonalTokenSettings_objectSpread(PersonalTokenSettings_objectSpread({}, data.personalToken), {}, {
          name: data.personalToken.name || '',
          expiresAt: data.personalToken.expiresAt ? (0,date_utils/* stripTime */.xR)(data.personalToken.expiresAt) : '',
          scope: (data.personalToken.scope || []).map(function (scope) {
            return {
              value: scope,
              label: scope
            };
          })
        }),
        validate: function validate(values) {
          return validatePersonalTokenValues(intl, values);
        },
        onSubmit: /*#__PURE__*/function () {
          var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values, _ref3) {
            var resetForm, filteredValue, personalToken, result;
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    resetForm = _ref3.resetForm;
                    _context.prev = 1;
                    filteredValue = pick_default()(values, ['name', 'scope', 'expiresAt']);
                    personalToken = PersonalTokenSettings_objectSpread(PersonalTokenSettings_objectSpread({}, filteredValue), {}, {
                      id: id,
                      scope: filteredValue.scope.map(function (s) {
                        return s.value;
                      }),
                      expiresAt: filteredValue.expiresAt ? filteredValue.expiresAt : null
                    });
                    _context.next = 6;
                    return updateToken({
                      variables: {
                        personalToken: personalToken
                      }
                    });

                  case 6:
                    result = _context.sent;
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                      message: intl.formatMessage({
                        id: "aS9iWV",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Personal token \""
                        }, {
                          "type": 1,
                          "value": "name"
                        }, {
                          "type": 0,
                          "value": "\" updated"
                        }]
                      }, {
                        name: result.data.updatePersonalToken.name
                      })
                    });
                    resetForm({
                      values: PersonalTokenSettings_objectSpread(PersonalTokenSettings_objectSpread({}, result.data.updatePersonalToken), {}, {
                        expiresAt: (0,date_utils/* stripTime */.xR)(result.data.updatePersonalToken.expiresAt)
                      })
                    });
                    _context.next = 14;
                    break;

                  case 11:
                    _context.prev = 11;
                    _context.t0 = _context["catch"](1);
                    addToast({
                      type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                      variant: 'light',
                      message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                    });

                  case 14:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, null, [[1, 11]]);
          }));

          return function (_x, _x2) {
            return _ref4.apply(this, arguments);
          };
        }(),
        children: function children(_ref5) {
          var isSubmitting = _ref5.isSubmitting,
              dirty = _ref5.dirty;
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(WarnIfUnsavedChanges/* default */.Z, {
              hasUnsavedChanges: dirty && !showDeleteModal
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "name",
              label: intl.formatMessage({
                id: "xQXSru",
                defaultMessage: [{
                  "type": 0,
                  "value": "Token name"
                }]
              }),
              labelProps: PersonalTokenSettings_LABEL_STYLES,
              required: true,
              children: function children(_ref6) {
                var field = _ref6.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, PersonalTokenSettings_objectSpread(PersonalTokenSettings_objectSpread({}, field), {}, {
                  placeholder: intl.formatMessage({
                    id: "examples",
                    defaultMessage: [{
                      "type": 0,
                      "value": "e.g., "
                    }, {
                      "type": 1,
                      "value": "examples"
                    }]
                  }, {
                    examples: 'Back Your Stack'
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "scope",
              label: "Scopes",
              labelProps: PersonalTokenSettings_LABEL_STYLES,
              mt: 20,
              hint: intl.formatMessage({
                id: "OL9S0O",
                defaultMessage: [{
                  "type": 0,
                  "value": "Scopes define the access for personal tokens. "
                }, {
                  "type": 8,
                  "value": "Link",
                  "children": [{
                    "type": 0,
                    "value": "More info"
                  }]
                }, {
                  "type": 0,
                  "value": "."
                }]
              }, {
                Link: (0,I18nFormatters/* getI18nLink */.fw)({
                  href: 'https://docs.opencollective.com/help/developers/oauth#text-available-scopes',
                  openInNewTab: true
                })
              }),
              children: function children(_ref7) {
                var form = _ref7.form,
                    field = _ref7.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
                  options: getScopesOptions(),
                  inputId: field.id,
                  error: field.error,
                  name: field.name,
                  defaultValue: field.value,
                  onBlur: function onBlur() {
                    return form.setFieldTouched(field.name, true);
                  },
                  onChange: function onChange(value) {
                    return form.setFieldValue(field.name, value);
                  },
                  isMulti: true,
                  "data-cy": "personal-token-scope"
                });
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "expiresAt",
              label: intl.formatMessage({
                id: "CICBj0",
                defaultMessage: [{
                  "type": 0,
                  "value": "Expiration date"
                }]
              }),
              labelProps: PersonalTokenSettings_LABEL_STYLES,
              mt: 20,
              hint: intl.formatMessage({
                id: "Slkvpr",
                defaultMessage: [{
                  "type": 0,
                  "value": "Personal tokens can expire after a certain date."
                }]
              }),
              children: function children(_ref8) {
                var field = _ref8.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, PersonalTokenSettings_objectSpread(PersonalTokenSettings_objectSpread({}, field), {}, {
                  type: "date",
                  min: (0,date_utils/* stripTime */.xR)(new Date())
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              gap: "16px",
              justifyContent: "space-between",
              mt: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "submit",
                buttonStyle: "primary",
                buttonSize: "small",
                loading: isSubmitting,
                disabled: !dirty,
                minWidth: "125px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "FoRCrl",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Update token"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "button",
                buttonStyle: "dangerSecondary",
                buttonSize: "small",
                disabled: isSubmitting,
                onClick: function onClick() {
                  return setShowDeleteModal(true);
                },
                "data-cy": "personalToken-delete",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "+5KHJy",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Delete token"
                  }]
                })
              })]
            })]
          });
        }
      }), showDeleteModal && /*#__PURE__*/(0,jsx_runtime.jsx)(personal_token_DeletePersonalTokenModal, {
        personalToken: data.personalToken,
        onClose: function onClose() {
          return setShowDeleteModal(false);
        },
        onDelete: function onDelete() {
          return router.push(backPath);
        }
      })]
    })]
  });
};

PersonalTokenSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PersonalTokenSettings",
  "props": {
    "id": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "backPath": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var personal_token_PersonalTokenSettings = (PersonalTokenSettings);
;// CONCATENATED MODULE: ./components/personal-token/CreatePersonalTokenModal.js





var CreatePersonalTokenModal_excluded = ["account", "onSuccess", "onClose"];

var CreatePersonalTokenModal_templateObject;



function CreatePersonalTokenModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CreatePersonalTokenModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CreatePersonalTokenModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CreatePersonalTokenModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



















var createPersonalTokenMutation = (0,graphql_tag_lib/* default */.ZP)(CreatePersonalTokenModal_templateObject || (CreatePersonalTokenModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation CreatePersonalToken($personalToken: PersonalTokenCreateInput!) {\n    createPersonalToken(personalToken: $personalToken) {\n      id\n      name\n    }\n  }\n"])));
var CreatePersonalTokenModal_LABEL_STYLES = {
  fontWeight: 700,
  fontSize: '14px',
  lineHeight: '17px'
};
var CreatePersonalTokenModal_INITIAL_VALUES = {
  name: '',
  scope: [],
  expiresAt: ''
};

var CreatePersonalTokenModal = function CreatePersonalTokenModal(_ref) {
  var account = _ref.account,
      onSuccess = _ref.onSuccess,
      onClose = _ref.onClose,
      props = objectWithoutProperties_default()(_ref, CreatePersonalTokenModal_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useMutation = (0,client.useMutation)(createPersonalTokenMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    update: function update(cache) {
      var accountCacheId = cache.identify(account);
      cache.modify({
        id: accountCacheId,
        fields: {
          personalTokens: function personalTokens(_, _ref2) {
            var DELETE = _ref2.DELETE;
            return DELETE;
          }
        }
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      createPersonalToken = _useMutation2[0];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, CreatePersonalTokenModal_objectSpread(CreatePersonalTokenModal_objectSpread({
    width: "576px",
    onClose: onClose,
    "data-cy": "create-personal-token-modal"
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "MMyZfL",
        defaultMessage: [{
          "type": 0,
          "value": "Create Personal token"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
      initialValues: CreatePersonalTokenModal_INITIAL_VALUES,
      validate: function validate(values) {
        return validatePersonalTokenValues(intl, values);
      },
      onSubmit: /*#__PURE__*/function () {
        var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
          var tokenInput, result;
          return regenerator_default().wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _context.prev = 0;
                  tokenInput = CreatePersonalTokenModal_objectSpread(CreatePersonalTokenModal_objectSpread({}, values), {}, {
                    account: {
                      id: account.id
                    },
                    scope: values.scope.map(function (scope) {
                      return scope.value;
                    }),
                    expiresAt: values.expiresAt ? values.expiresAt : null
                  });
                  _context.next = 4;
                  return createPersonalToken({
                    variables: {
                      personalToken: tokenInput
                    }
                  });

                case 4:
                  result = _context.sent;
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                    message: intl.formatMessage({
                      id: "aIdo8o",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Personal token \""
                      }, {
                        "type": 1,
                        "value": "name"
                      }, {
                        "type": 0,
                        "value": "\" created"
                      }]
                    }, {
                      name: result.data.createPersonalToken.name
                    })
                  });
                  onSuccess(result.data.createPersonalToken, account);
                  _context.next = 12;
                  break;

                case 9:
                  _context.prev = 9;
                  _context.t0 = _context["catch"](0);
                  addToast({
                    type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                    variant: 'light',
                    message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                  });

                case 12:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[0, 9]]);
        }));

        return function (_x) {
          return _ref3.apply(this, arguments);
        };
      }(),
      children: function children(_ref4) {
        var isSubmitting = _ref4.isSubmitting;
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
            mt: "36px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "name",
              label: intl.formatMessage({
                id: "w0wvhm",
                defaultMessage: [{
                  "type": 0,
                  "value": "Token Name"
                }]
              }),
              labelProps: CreatePersonalTokenModal_LABEL_STYLES,
              required: true,
              children: function children(_ref5) {
                var field = _ref5.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, CreatePersonalTokenModal_objectSpread(CreatePersonalTokenModal_objectSpread({}, field), {}, {
                  placeholder: intl.formatMessage({
                    id: "examples",
                    defaultMessage: [{
                      "type": 0,
                      "value": "e.g., "
                    }, {
                      "type": 1,
                      "value": "examples"
                    }]
                  }, {
                    examples: 'Back Your Stack'
                  })
                }));
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "scope",
              label: "Scopes",
              labelProps: CreatePersonalTokenModal_LABEL_STYLES,
              mt: 20,
              hint: intl.formatMessage({
                id: "OL9S0O",
                defaultMessage: [{
                  "type": 0,
                  "value": "Scopes define the access for personal tokens. "
                }, {
                  "type": 8,
                  "value": "Link",
                  "children": [{
                    "type": 0,
                    "value": "More info"
                  }]
                }, {
                  "type": 0,
                  "value": "."
                }]
              }, {
                Link: (0,I18nFormatters/* getI18nLink */.fw)({
                  href: 'https://docs.opencollective.com/help/developers/oauth#text-available-scopes',
                  openInNewTab: true
                })
              }),
              children: function children(_ref6) {
                var form = _ref6.form,
                    field = _ref6.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
                  options: getScopesOptions(),
                  inputId: field.id,
                  error: field.error,
                  name: field.name,
                  defaultValue: field.value,
                  onBlur: function onBlur() {
                    return form.setFieldTouched(field.name, true);
                  },
                  onChange: function onChange(value) {
                    return form.setFieldValue(field.name, value);
                  },
                  isMulti: true,
                  "data-cy": "personal-token-scope"
                });
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
              name: "expiresAt",
              label: intl.formatMessage({
                id: "CICBj0",
                defaultMessage: [{
                  "type": 0,
                  "value": "Expiration date"
                }]
              }),
              labelProps: CreatePersonalTokenModal_LABEL_STYLES,
              mt: 20,
              hint: intl.formatMessage({
                id: "Slkvpr",
                defaultMessage: [{
                  "type": 0,
                  "value": "Personal tokens can expire after a certain date."
                }]
              }),
              children: function children(_ref7) {
                var field = _ref7.field;
                return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, CreatePersonalTokenModal_objectSpread(CreatePersonalTokenModal_objectSpread({}, field), {}, {
                  type: "date",
                  min: (0,date_utils/* stripTime */.xR)(new Date())
                }));
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              gap: "16px",
              justifyContent: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "submit",
                buttonStyle: "primary",
                buttonSize: "small",
                loading: isSubmitting,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "c+swVk",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Create token"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                type: "button",
                buttonStyle: "secondary",
                buttonSize: "small",
                disabled: isSubmitting,
                onClick: function onClick() {
                  return onClose();
                },
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "actions.cancel",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Cancel"
                  }]
                })
              })]
            })
          })]
        });
      }
    })]
  }));
};

CreatePersonalTokenModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CreatePersonalTokenModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var personal_token_CreatePersonalTokenModal = (CreatePersonalTokenModal);
;// CONCATENATED MODULE: ./components/personal-token/PersonalTokensList.js



var PersonalTokensList_templateObject;





















var PersonalTokensList_personalTokenQuery = (0,graphql_tag_lib/* default */.ZP)(PersonalTokensList_templateObject || (PersonalTokensList_templateObject = taggedTemplateLiteral_default()(["\n  query PersonalTokens($slug: String!, $limit: Int, $offset: Int) {\n    individual(slug: $slug) {\n      id\n      name\n      slug\n      type\n      imageUrl(height: 128)\n      personalTokens(limit: $limit, offset: $offset) {\n        totalCount\n        nodes {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));

var PersonalTokensList = function PersonalTokensList(_ref) {
  var _data$individual, _data$individual$pers;

  var account = _ref.account,
      onPersonalTokenCreated = _ref.onPersonalTokenCreated,
      _ref$offset = _ref.offset,
      offset = _ref$offset === void 0 ? 0 : _ref$offset;
  var variables = {
    slug: account.slug,
    limit: 12,
    offset: offset
  };

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showCreatePersonalToken = _React$useState2[0],
      setShowCreatePersonalTokenModal = _React$useState2[1];

  var _useQuery = (0,client.useQuery)(PersonalTokensList_personalTokenQuery, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error,
      networkStatus = _useQuery.networkStatus;

  var showLoadingState = loading || networkStatus === core_networkStatus/* NetworkStatus.refetch */.I.refetch;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    "data-cy": "personal-tokens-list",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      width: "100%",
      alignItems: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
        fontSize: "18px",
        fontWeight: "700",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "IPdwXJ",
          defaultMessage: [{
            "type": 0,
            "value": "Personal Tokens"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        mx: 2,
        flex: "1",
        borderColor: "black.400"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
        "data-cy": "create-personal-token-btn",
        buttonSize: "tiny",
        onClick: function onClick() {
          return setShowCreatePersonalTokenModal(true);
        },
        children: ["+ ", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "MMyZfL",
          defaultMessage: [{
            "type": 0,
            "value": "Create Personal token"
          }]
        })]
      }), showCreatePersonalToken && /*#__PURE__*/(0,jsx_runtime.jsx)(personal_token_CreatePersonalTokenModal, {
        account: data.individual,
        onClose: function onClose() {
          return setShowCreatePersonalTokenModal(false);
        },
        onSuccess: onPersonalTokenCreated
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      my: 2,
      color: "black.700",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "QZRYxh",
        defaultMessage: [{
          "type": 0,
          "value": "Personal tokens are used to authenticate with the API. They are not tied to a specific application. Pass it as "
        }, {
          "type": 1,
          "value": "headerName"
        }, {
          "type": 0,
          "value": " HTTP header or "
        }, {
          "type": 1,
          "value": "queryParam"
        }, {
          "type": 0,
          "value": " query parameter in the URL."
        }],
        values: {
          headerName: /*#__PURE__*/(0,jsx_runtime.jsx)("code", {
            children: "Personal-Token"
          }),
          queryParam: /*#__PURE__*/(0,jsx_runtime.jsx)("code", {
            children: "personalToken"
          })
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      my: 4,
      children: error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
        error: error
      }) : !showLoadingState && !data.individual.personalTokens.totalCount ? /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCard/* default */.Z, {
        p: "24px",
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            flex: "0 0 64px",
            height: "64px",
            justifyContent: "center",
            alignItems: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              src: "/static/icons/apps.png",
              width: "52px",
              height: "52px",
              alt: ""
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            ml: 3,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "14px",
              fontWeight: "700",
              lineHeight: "20px",
              mb: "12px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "1SzDWu",
                defaultMessage: [{
                  "type": 0,
                  "value": "You don't have any token yet"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "12px",
              lineHeight: "18px",
              color: "black.700",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "oG4/dR",
                defaultMessage: [{
                  "type": 0,
                  "value": "You can create personal token that integrate with the Open Collective platform. "
                }, {
                  "type": 8,
                  "value": "CreateTokenLink",
                  "children": [{
                    "type": 0,
                    "value": "Create Personal Token"
                  }]
                }, {
                  "type": 0,
                  "value": "."
                }],
                values: {
                  CreateTokenLink: function CreateTokenLink(children) {
                    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                      "data-cy": "create-token-link",
                      as: "button",
                      color: "blue.500",
                      onClick: function onClick() {
                        return setShowCreatePersonalTokenModal(true);
                      },
                      children: children
                    });
                  }
                }
              })
            })]
          })]
        })
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
        gridTemplateColumns: ['1fr', null, null, '1fr 1fr', '1fr 1fr 1fr'],
        gridGap: "46px",
        children: showLoadingState ? Array.from({
          length: variables.limit
        }, function (_, index) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: "64px"
          }, index);
        }) : data.individual.personalTokens.nodes.map(function (token) {
          var _token$name;

          return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            "data-cy": "personal-token",
            alignItems: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              mr: 24,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
                radius: 64,
                collective: data.individual
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              flexDirection: "column",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                fontSize: "18px",
                lineHeight: "26px",
                fontWeight: "500",
                color: "black.900",
                children: (_token$name = token.name) !== null && _token$name !== void 0 ? _token$name : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "3IwVoe",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Unnamed token"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                mt: "10px",
                fontSize: "14px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                  href: (0,url_helpers/* getPersonalTokenSettingsRoute */.gb)(data.individual, token),
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "Settings",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Settings"
                    }]
                  })
                })
              })]
            })]
          }, token.id);
        })
      })
    }), (data === null || data === void 0 ? void 0 : (_data$individual = data.individual) === null || _data$individual === void 0 ? void 0 : (_data$individual$pers = _data$individual.personalTokens) === null || _data$individual$pers === void 0 ? void 0 : _data$individual$pers.totalCount) > variables.limit && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
        total: data.individual.personalTokens.totalCount,
        limit: variables.limit,
        offset: variables.offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

PersonalTokensList.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PersonalTokensList",
  "props": {
    "offset": {
      "defaultValue": {
        "value": "0",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "onPersonalTokenCreated": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var personal_token_PersonalTokensList = (PersonalTokensList);
;// CONCATENATED MODULE: ./components/admin-panel/sections/ForDevelopers.js













var ForDevelopers = function ForDevelopers(_ref) {
  var account = _ref.account;
  var router = (0,next_router.useRouter)() || {};
  var query = router.query;

  var _ref2 = query.subpath || [],
      _ref3 = slicedToArray_default()(_ref2, 2),
      subSection = _ref3[0],
      id = _ref3[1];

  if (subSection === 'oauth' && id) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(oauth_OAuthApplicationSettings, {
      id: id,
      backPath: router.asPath.replace(/\/oauth\/.+/, '')
    });
  } else if (subSection === 'personal-tokens' && id) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(personal_token_PersonalTokenSettings, {
      id: id,
      backPath: router.asPath.replace(/\/personal-tokens\/.+/, '')
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(oauth_OAuthApplicationsList, {
        account: account,
        offset: query.offset ? parseInt(query.offset) : 0,
        onApplicationCreated: function onApplicationCreated(app, account) {
          return router.push((0,url_helpers/* getOauthAppSettingsRoute */.Sn)(account, app));
        }
      }), (0,collective_lib/* isIndividualAccount */.Sh)(account) && /*#__PURE__*/(0,jsx_runtime.jsx)(personal_token_PersonalTokensList, {
        account: account,
        offset: query.offset ? parseInt(query.offset) : 0,
        onPersonalTokenCreated: function onPersonalTokenCreated(app, account) {
          return router.push((0,url_helpers/* getPersonalTokenSettingsRoute */.gb)(account, app));
        }
      })]
    });
  }
};

ForDevelopers.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ForDevelopers",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "type": {
            "name": "enum",
            "computed": true,
            "value": "Object.keys(CollectiveType)",
            "required": true
          },
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_ForDevelopers = (ForDevelopers);
// EXTERNAL MODULE: ./node_modules/lodash/truncate.js
var truncate = __webpack_require__(39138);
var truncate_default = /*#__PURE__*/__webpack_require__.n(truncate);
// EXTERNAL MODULE: ./node_modules/@apollo/client/react/hoc/graphql.js + 7 modules
var hoc_graphql = __webpack_require__(16608);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/RadioButtonChecked/RadioButtonChecked.esm.js
var RadioButtonChecked_esm = __webpack_require__(55094);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/RadioButtonUnchecked/RadioButtonUnchecked.esm.js
var RadioButtonUnchecked_esm = __webpack_require__(79586);
// EXTERNAL MODULE: ./node_modules/@styled-system/theme-get/dist/index.esm.js
var dist_index_esm = __webpack_require__(50056);
// EXTERNAL MODULE: ./node_modules/memoize-one/dist/memoize-one.esm.js
var memoize_one_esm = __webpack_require__(30845);
// EXTERNAL MODULE: ./lib/constants/payment-methods.js
var payment_methods = __webpack_require__(1808);
// EXTERNAL MODULE: ./components/CollectivePicker.js + 2 modules
var CollectivePicker = __webpack_require__(41861);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/CheckCircle/CheckCircle.esm.js
var CheckCircle_esm = __webpack_require__(46929);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Clipboard/Clipboard.esm.js
var Clipboard_esm = __webpack_require__(39234);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Printer/Printer.esm.js
var Printer_esm = __webpack_require__(61203);
// EXTERNAL MODULE: ./node_modules/file-saver/dist/FileSaver.min.js
var FileSaver_min = __webpack_require__(93162);
;// CONCATENATED MODULE: ./components/FileDownloader.js










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



/**
 * A generic wrapper to handle the flow of downloading a file (fetching from URL,
 * saving...etc).
 */

var FileDownloader = /*#__PURE__*/function (_React$Component) {
  inherits_default()(FileDownloader, _React$Component);

  var _super = _createSuper(FileDownloader);

  function FileDownloader() {
    var _this;

    classCallCheck_default()(this, FileDownloader);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    defineProperty_default()(assertThisInitialized_default()(_this), "state", {
      loading: false,
      error: false,
      downloaded: false
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "downloadFile", /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      var response, file;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;

              _this.setState({
                loading: true
              });

              _context.next = 4;
              return fetch(_this.props.url, _this.props.buildFetchParams());

            case 4:
              response = _context.sent;
              _context.next = 7;
              return response.blob();

            case 7:
              file = _context.sent;
              (0,FileSaver_min.saveAs)(file, _this.props.filename);

              _this.setState({
                loading: false,
                downloaded: true
              });

              _context.next = 15;
              break;

            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](0);

              _this.setState({
                error: _context.t0.message,
                loading: false
              });

            case 15:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 12]]);
    })));

    return _this;
  }

  createClass_default()(FileDownloader, [{
    key: "render",
    value: function render() {
      var _this$state = this.state,
          loading = _this$state.loading,
          error = _this$state.error,
          downloaded = _this$state.downloaded;
      return this.props.children({
        loading: loading,
        error: error,
        downloaded: downloaded,
        downloadFile: this.downloadFile
      });
    }
  }]);

  return FileDownloader;
}(react.Component);

defineProperty_default()(FileDownloader, "defaultProps", {
  buildFetchParams: function buildFetchParams() {}
});


FileDownloader.__docgenInfo = {
  "description": "A generic wrapper to handle the flow of downloading a file (fetching from URL,\nsaving...etc).",
  "methods": [{
    "name": "downloadFile",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }],
  "displayName": "FileDownloader",
  "props": {
    "buildFetchParams": {
      "defaultValue": {
        "value": "() => {}",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filename": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "url": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "children": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
;// CONCATENATED MODULE: ./components/CreateGiftCardsSuccess.js








function CreateGiftCardsSuccess_createSuper(Derived) { var hasNativeReflectConstruct = CreateGiftCardsSuccess_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CreateGiftCardsSuccess_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var RedeemLinksTextarea = (0,styled_components_browser_esm/* default */.ZP)(StyledInput/* default */.ZP).attrs({
  as: 'textarea'
}).withConfig({
  displayName: "CreateGiftCardsSuccess__RedeemLinksTextarea",
  componentId: "sc-10otmsu-0"
})(["width:95%;max-width:450px;min-height:175px;padding:8px;border-radius:8px;resize:vertical;overflow-wrap:normal;"]);
/**
 * Displays created gift cards, with an option to print them.
 */

var CreateGiftCardsSuccess = /*#__PURE__*/function (_React$Component) {
  inherits_default()(CreateGiftCardsSuccess, _React$Component);

  var _super = CreateGiftCardsSuccess_createSuper(CreateGiftCardsSuccess);

  function CreateGiftCardsSuccess(props) {
    var _this;

    classCallCheck_default()(this, CreateGiftCardsSuccess);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getRedeemLinkFromVC", function (vc) {
      var code = vc.uuid.split('-')[0];
      return "".concat((0,utils/* getWebsiteUrl */.ls)(), "/").concat(_this.props.collectiveSlug, "/redeem/").concat(code);
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "copyLinksToClipboard", function () {
      try {
        _this.redeemLinkTextareaRef.current.select();

        document.execCommand('copy');
      } catch (e) {
        // TODO: this should be reported to the user
        // eslint-disable-next-line no-console
        console.error('Cannot copy to clipboard', e);
      }
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "buildFetchParams", function () {
      return {};
    });

    _this.redeemLinkTextareaRef = /*#__PURE__*/react.createRef();
    return _this;
  }

  createClass_default()(CreateGiftCardsSuccess, [{
    key: "renderManualSuccess",
    value: function renderManualSuccess() {
      var _this2 = this;

      var filename = "".concat(this.props.collectiveSlug, "-giftcards-").concat(Date.now(), ".pdf");
      var downloadUrl = (0,url_helpers/* giftCardsDownloadUrl */.Rn)(filename);
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "giftCards.create.successCreate",
            defaultMessage: [{
              "type": 0,
              "value": "Your "
            }, {
              "type": 6,
              "value": "count",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "gift card has"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 1,
                    "value": "count"
                  }, {
                    "type": 0,
                    "value": " gift cards have"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }, {
              "type": 0,
              "value": " been created."
            }],
            values: {
              count: this.props.cards.length
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          width: 1,
          flexDirection: "column",
          alignItems: "center",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            my: 3,
            flexWrap: "wrap",
            justifyContent: "center",
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
              m: 2,
              minWidth: 270,
              buttonSize: "large",
              buttonStyle: "primary",
              onClick: this.copyLinksToClipboard,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Clipboard_esm/* Clipboard */.T, {
                size: "1em"
              }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "CreateGiftCardsSuccess.RedeemLinks",
                defaultMessage: [{
                  "type": 0,
                  "value": "Copy links"
                }]
              })]
            }), this.props.cards.length < 300 && /*#__PURE__*/(0,jsx_runtime.jsx)(FileDownloader, {
              url: downloadUrl,
              filename: filename,
              buildFetchParams: function buildFetchParams() {
                return {
                  method: 'POST',
                  headers: {
                    Accept: 'application/json',
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({
                    cards: _this2.props.cards
                  })
                };
              },
              children: function children(_ref) {
                var loading = _ref.loading,
                    downloadFile = _ref.downloadFile;
                return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
                  minWidth: 270,
                  m: 2,
                  buttonSize: "large",
                  loading: loading,
                  onClick: downloadFile,
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Printer_esm/* Printer */.F, {
                    size: "1em"
                  }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "CreateGiftCardsSuccess.Download",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Download cards"
                    }]
                  })]
                });
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(RedeemLinksTextarea, {
            ref: this.redeemLinkTextareaRef,
            className: "result-redeem-links",
            readOnly: true,
            value: this.props.cards.map(this.getRedeemLinkFromVC).join('\n')
          })]
        })]
      });
    }
  }, {
    key: "renderEmailSuccess",
    value: function renderEmailSuccess() {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "giftCards.create.successSent",
        defaultMessage: [{
          "type": 0,
          "value": "Your "
        }, {
          "type": 6,
          "value": "count",
          "options": {
            "one": {
              "value": [{
                "type": 0,
                "value": "gift card has"
              }]
            },
            "other": {
              "value": [{
                "type": 1,
                "value": "count"
              }, {
                "type": 0,
                "value": " gift cards have"
              }]
            }
          },
          "offset": 0,
          "pluralType": "cardinal"
        }, {
          "type": 0,
          "value": " been sent!"
        }],
        values: {
          count: this.props.cards.length
        }
      });
    }
  }, {
    key: "render",
    value: function render() {
      var deliverType = this.props.deliverType;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          color: "green.700",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(CheckCircle_esm/* CheckCircle */.f, {
            size: "3em"
          })
        }), deliverType === 'email' ? this.renderEmailSuccess() : this.renderManualSuccess()]
      });
    }
  }]);

  return CreateGiftCardsSuccess;
}(react.Component);


CreateGiftCardsSuccess.__docgenInfo = {
  "description": "Displays created gift cards, with an option to print them.",
  "methods": [{
    "name": "getRedeemLinkFromVC",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "vc",
      "type": null
    }],
    "returns": null
  }, {
    "name": "copyLinksToClipboard",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "buildFetchParams",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderManualSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderEmailSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateGiftCardsSuccess",
  "props": {
    "cards": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "uuid": {
              "name": "string",
              "required": true
            },
            "currency": {
              "name": "string",
              "required": true
            },
            "initialBalance": {
              "name": "number",
              "required": true
            },
            "expiryDate": {
              "name": "string",
              "required": false
            }
          }
        }
      },
      "required": true
    },
    "deliverType": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'manual'",
          "computed": false
        }, {
          "value": "'email'",
          "computed": false
        }]
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
// EXTERNAL MODULE: ./components/Loading.js
var Loading = __webpack_require__(53169);
// EXTERNAL MODULE: ./lib/payment_method_label.js
var payment_method_label = __webpack_require__(51515);
;// CONCATENATED MODULE: ./components/PaymentMethodSelect.js








var PaymentMethodSelect_excluded = ["intl", "paymentMethods", "defaultPaymentMethod", "value", "onChange", "inputId"];

function PaymentMethodSelect_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function PaymentMethodSelect_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? PaymentMethodSelect_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : PaymentMethodSelect_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function PaymentMethodSelect_createSuper(Derived) { var hasNativeReflectConstruct = PaymentMethodSelect_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function PaymentMethodSelect_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }







var PaymentMethodSelect = /*#__PURE__*/function (_Component) {
  inherits_default()(PaymentMethodSelect, _Component);

  var _super = PaymentMethodSelect_createSuper(PaymentMethodSelect);

  function PaymentMethodSelect() {
    var _this;

    classCallCheck_default()(this, PaymentMethodSelect);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    defineProperty_default()(assertThisInitialized_default()(_this), "paymentMethodValueAndLabel", function (intl, paymentMethod) {
      return {
        value: paymentMethod,
        label: (0,payment_method_label/* paymentMethodLabelWithIcon */.FF)(intl, paymentMethod)
      };
    });

    return _this;
  }

  createClass_default()(PaymentMethodSelect, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          intl = _this$props.intl,
          paymentMethods = _this$props.paymentMethods,
          defaultPaymentMethod = _this$props.defaultPaymentMethod,
          value = _this$props.value,
          _onChange = _this$props.onChange,
          inputId = _this$props.inputId,
          props = objectWithoutProperties_default()(_this$props, PaymentMethodSelect_excluded);

      var options = paymentMethods.map(function (paymentMethod) {
        return _this2.paymentMethodValueAndLabel(intl, paymentMethod);
      });
      return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, PaymentMethodSelect_objectSpread({
        inputId: inputId,
        name: "paymentMethod",
        options: options,
        minWidth: 300,
        onChange: function onChange(_ref) {
          var value = _ref.value;
          return _onChange(value);
        },
        value: value ? this.paymentMethodValueAndLabel(intl, value) : undefined,
        defaultValue: defaultPaymentMethod ? this.paymentMethodValueAndLabel(intl, defaultPaymentMethod) : options[0]
      }, props));
    }
  }]);

  return PaymentMethodSelect;
}(react.Component);

PaymentMethodSelect.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "paymentMethodValueAndLabel",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "intl",
      "type": null
    }, {
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "PaymentMethodSelect",
  "props": {
    "inputId": {
      "description": "The id of the search input",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "value": {
      "description": "To control the component state",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "paymentMethods": {
      "description": "The payment methods to display. **Cannot be empty !**",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": true
    },
    "defaultPaymentMethod": {
      "description": "The default payment method. Will use the first one if not provided.",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore Provided by injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_PaymentMethodSelect = ((0,injectIntl/* default */.ZP)(PaymentMethodSelect));
// EXTERNAL MODULE: ./components/StyledCheckbox.js
var StyledCheckbox = __webpack_require__(41433);
// EXTERNAL MODULE: ./components/StyledInputAmount.js
var StyledInputAmount = __webpack_require__(54029);
// EXTERNAL MODULE: ./node_modules/lodash/uniq.js
var uniq = __webpack_require__(44908);
var uniq_default = /*#__PURE__*/__webpack_require__.n(uniq);
// EXTERNAL MODULE: ./node_modules/lodash/debounce.js
var debounce = __webpack_require__(23279);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce);
// EXTERNAL MODULE: ./node_modules/draft-js/lib/Draft.js
var Draft = __webpack_require__(9041);
;// CONCATENATED MODULE: ./lib/styled_components_utils.js
/**
 * Return the correct border color index depending on `error` and `success`.
 *
 * ## Examples
 *
 *    > getInputBorderColor(true)
 *    'red.500'
 */
var getInputBorderColor = function getInputBorderColor(error, success) {
  if (error) {
    return 'red.500';
  }

  if (success) {
    return 'green.300';
  }

  return 'black.300';
};
;// CONCATENATED MODULE: ./components/StyledMultiEmailInput.js











function StyledMultiEmailInput_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function StyledMultiEmailInput_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? StyledMultiEmailInput_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : StyledMultiEmailInput_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function StyledMultiEmailInput_createSuper(Derived) { var hasNativeReflectConstruct = StyledMultiEmailInput_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function StyledMultiEmailInput_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var InputContainer = (0,styled_components_browser_esm/* default */.ZP)(Container/* default */.Z).withConfig({
  displayName: "StyledMultiEmailInput__InputContainer",
  componentId: "sc-l9fsfu-0"
})([".DraftEditor-root{padding:0.5em;cursor:text;font-weight:400;border:1px solid;border-radius:4px;border-color:inherit;&:hover,&:focus{border-color:", ";}}.public-DraftEditor-content{min-height:3em;max-height:18em;overflow-y:auto;}.public-DraftEditor-content[contenteditable='false']{cursor:not-allowed;}"], (0,dist_index_esm/* themeGet */.R)('colors.primary.300'));

var StyledMultiEmailInput = /*#__PURE__*/function (_Component) {
  inherits_default()(StyledMultiEmailInput, _Component);

  var _super = StyledMultiEmailInput_createSuper(StyledMultiEmailInput);

  function StyledMultiEmailInput(props) {
    var _this;

    classCallCheck_default()(this, StyledMultiEmailInput);

    _this = _super.call(this, props);
    _this.onChange = _this.onChange.bind(assertThisInitialized_default()(_this));
    _this.onChangeParent = debounce_default()(_this.onChangeParent.bind(assertThisInitialized_default()(_this)), 100, {
      trailing: true
    });
    _this.onBlur = _this.onBlur.bind(assertThisInitialized_default()(_this));
    _this.onFocus = _this.onFocus.bind(assertThisInitialized_default()(_this));
    _this.state = {
      editorState: props.initialState || Draft.EditorState.createEmpty(),
      showErrors: false
    };
    return _this;
  }

  createClass_default()(StyledMultiEmailInput, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.props.onClose) {
        this.props.onClose(this.state.editorState);
      }
    }
  }, {
    key: "extractEmails",
    value: function extractEmails(str) {
      return uniq_default()(str.split(/[\s,;]/gm)).reduce(function (result, term) {
        if (term.length === 0) {
          return result;
        } else if (term.match(/.+@.+\..+/)) {
          result.emails.push(term);
        } else {
          result.invalids.push(term);
        }

        return result;
      }, {
        emails: [],
        invalids: []
      });
    }
  }, {
    key: "onChange",
    value: function onChange(editorState) {
      this.setState({
        editorState: editorState
      });

      if (this.props.onChange) {
        this.onChangeParent(editorState);
      }
    }
  }, {
    key: "onChangeParent",
    value: function onChangeParent(editorState) {
      var stringContent = editorState.getCurrentContent().getPlainText();
      var returnedState = this.extractEmails(stringContent);
      this.props.onChange(returnedState);
    }
  }, {
    key: "onBlur",
    value: function onBlur() {
      this.setState({
        showErrors: true
      });
    }
  }, {
    key: "onFocus",
    value: function onFocus() {
      this.setState({
        showErrors: false
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          invalids = _this$props.invalids,
          disabled = _this$props.disabled;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(InputContainer, StyledMultiEmailInput_objectSpread(StyledMultiEmailInput_objectSpread({
        width: "100%",
        bg: disabled ? 'black.50' : 'white.full',
        fontSize: "14px",
        borderColor: getInputBorderColor(invalids && invalids.length > 0)
      }, omit_default()(this.props, ['invalids', 'onChange', 'initialState', 'onClose'])), {}, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Draft.Editor, {
          editorState: this.state.editorState,
          onChange: this.onChange,
          onBlur: this.onBlur,
          onFocus: this.onFocus,
          readOnly: disabled,
          stripPastedStyles: true
        }), this.state.showErrors && invalids && invalids.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text/* Span */.Dr, {
          className: "multiemails-errors",
          display: "block",
          color: "red.500",
          pt: 2,
          fontSize: "10px",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("strong", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "multiemail.invalids",
              defaultMessage: [{
                "type": 0,
                "value": "Invalid emails:"
              }]
            }), ' ']
          }), invalids.join(', ')]
        })]
      }));
    }
  }]);

  return StyledMultiEmailInput;
}(react.Component);


StyledMultiEmailInput.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "extractEmails",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "str",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "editorState",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onChangeParent",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "editorState",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onBlur",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onFocus",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "StyledMultiEmailInput",
  "props": {
    "initialState": {
      "description": "Editor initial state",
      "type": {
        "name": "instanceOf",
        "value": "EditorState"
      },
      "required": false
    },
    "onChange": {
      "description": "Callback for state update like `({emails, invalids}) => void`",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onClose": {
      "description": "Callback for when component is unmount. Useful to save editor state.",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "invalids": {
      "description": "On array of invalid emails",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "disabled": {
      "description": "disabled",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
// EXTERNAL MODULE: ./node_modules/react-select/creatable/dist/react-select-creatable.esm.js + 1 modules
var react_select_creatable_esm = __webpack_require__(83739);
;// CONCATENATED MODULE: ./components/StyledSelectCreatable.js



/**
 * A StyledSelect with creatable activated. See https://react-select.com/creatable
 */

/* harmony default export */ var StyledSelectCreatable = ((0,injectIntl/* default */.ZP)((0,StyledSelect/* makeStyledSelect */.tO)(react_select_creatable_esm/* default */.Z)));
;// CONCATENATED MODULE: ./components/CreateGiftCardsForm.js












var CreateGiftCardsForm_templateObject, CreateGiftCardsForm_templateObject2;

function CreateGiftCardsForm_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CreateGiftCardsForm_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CreateGiftCardsForm_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CreateGiftCardsForm_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function CreateGiftCardsForm_createSuper(Derived) { var hasNativeReflectConstruct = CreateGiftCardsForm_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CreateGiftCardsForm_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






























var MIN_AMOUNT = 500;
var MAX_AMOUNT = 100000000;
var WARN_NB_GIFT_CARDS_WITHOUT_HOST_LIMIT = 10;
var WARN_NB_GIFT_CARDS_WITH_CREDIT_CARD = 10;
var WARN_GIFT_CARDS_AMOUNT_WITH_CREDIT_CARD = 1000e2;
var messages = (0,lib.defineMessages)({
  emailCustomMessage: {
    id: "giftCards.email.customMessage",
    defaultMessage: [{
      "type": 0,
      "value": "Will be sent in the invitation email"
    }]
  },
  limitToHostsPlaceholder: {
    id: "giftCards.limitToHosts.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "All Hosts"
    }]
  },
  limitToCollectivesPlaceholder: {
    id: "giftCards.limitToCollectives.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "All Collectives "
    }, {
      "type": 6,
      "value": "nbHosts",
      "options": {
        "=0": {
          "value": []
        },
        "=1": {
          "value": [{
            "type": 0,
            "value": "under the selected Host"
          }]
        },
        "other": {
          "value": [{
            "type": 0,
            "value": "under the selected Hosts"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  },
  notBatched: {
    id: "giftCards.notBatched",
    defaultMessage: [{
      "type": 0,
      "value": "Not batched"
    }]
  }
});

var InlineField = function InlineField(_ref) {
  var name = _ref.name,
      children = _ref.children,
      label = _ref.label,
      isLabelClickable = _ref.isLabelClickable;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexWrap: "wrap",
    alignItems: "center",
    mb: "2.5em",
    className: "field-".concat(name),
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      width: [1, 0.3],
      children: /*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        htmlFor: "giftcard-".concat(name),
        style: {
          cursor: isLabelClickable ? 'pointer' : 'inherit',
          width: '100%'
        },
        children: label
      })
    }), children]
  });
};

/** Entry title */
var Title = styled_components_browser_esm/* default.summary.withConfig */.ZP.summary.withConfig({
  displayName: "CreateGiftCardsForm__Title",
  componentId: "sc-1c91oz8-0"
})([""]);
var DeliverTypeRadioSelector = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "CreateGiftCardsForm__DeliverTypeRadioSelector",
  componentId: "sc-1c91oz8-1"
})(["justify-content:space-evenly;align-items:center;padding:1.25em 1em;margin-bottom:2.5em;background:white;box-shadow:0px 3px 10px ", ";border-top:1px solid ", ";border-bottom:1px solid ", ";"], (0,dist_index_esm/* themeGet */.R)('colors.black.200'), (0,dist_index_esm/* themeGet */.R)('colors.black.200'), (0,dist_index_esm/* themeGet */.R)('colors.black.200'));
var RadioButtonContainer = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "CreateGiftCardsForm__RadioButtonContainer",
  componentId: "sc-1c91oz8-2"
})(["display:flex;flex-direction:column;cursor:pointer;width:auto;svg{height:30px;width:30px;color:", ";transition:color 0.2s;&:hover{color:", ";}}"], (0,dist_index_esm/* themeGet */.R)('colors.primary.400'), (0,dist_index_esm/* themeGet */.R)('colors.primary.500'));

var RadioButtonWithLabel = function RadioButtonWithLabel(_ref2) {
  var checked = _ref2.checked,
      onClick = _ref2.onClick,
      name = _ref2.name,
      children = _ref2.children;
  var icon = checked ? /*#__PURE__*/(0,jsx_runtime.jsx)(RadioButtonChecked_esm/* RadioButtonChecked */.f, {}) : /*#__PURE__*/(0,jsx_runtime.jsx)(RadioButtonUnchecked_esm/* RadioButtonUnchecked */.l, {});
  return /*#__PURE__*/(0,jsx_runtime.jsx)(RadioButtonContainer, {
    htmlFor: "radio-buttons",
    "data-name": name,
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      role: "presentation",
      onClick: onClick,
      onKeyDown: function onKeyDown(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          onClick();
        }
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        className: "radio-btn",
        textAlign: "center",
        children: icon
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        id: "radio-buttons",
        style: {
          marginTop: 8,
          cursor: 'pointer'
        },
        children: children
      })]
    })
  });
};

var FieldLabelDetails = styled_components_browser_esm/* default.span.withConfig */.ZP.span.withConfig({
  displayName: "CreateGiftCardsForm__FieldLabelDetails",
  componentId: "sc-1c91oz8-3"
})(["color:", ";font-weight:normal;"], (0,dist_index_esm/* themeGet */.R)('colors.black.600'));

var CreateGiftCardsForm = /*#__PURE__*/function (_Component) {
  inherits_default()(CreateGiftCardsForm, _Component);

  var _super = CreateGiftCardsForm_createSuper(CreateGiftCardsForm);

  function CreateGiftCardsForm(props) {
    var _this;

    classCallCheck_default()(this, CreateGiftCardsForm);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getBatchesOptions", (0,memoize_one_esm/* default */.Z)(function (batches, intl) {
      var noBatchOption = {
        label: intl.formatMessage(messages.notBatched),
        value: null
      };

      if (!batches) {
        return [noBatchOption];
      } else {
        return [noBatchOption].concat(toConsumableArray_default()(batches.filter(function (b) {
          return b.name !== null;
        }).map(function (batch) {
          return {
            label: batch.name,
            value: batch.name
          };
        })));
      }
    }));

    _this.form = /*#__PURE__*/react.createRef();
    _this.onSubmit = _this.onSubmit.bind(assertThisInitialized_default()(_this));
    _this.state = {
      deliverType: 'email',
      // email or manual
      values: {
        batch: null,
        amount: MIN_AMOUNT,
        emails: [],
        customMessage: '',
        numberOfGiftCards: 1,
        limitedToHosts: [],
        expiryDate: dayjs_min_default()().add(12, 'month').format('YYYY-MM-DD')
      },
      errors: {
        emails: []
      },
      multiEmailsInitialState: null,
      submitting: false,
      createdGiftCards: null,
      serverError: null,
      hasAcceptedWarning: false
    };
    return _this;
  }

  createClass_default()(CreateGiftCardsForm, [{
    key: "onChange",
    value: function onChange(fieldName, value) {
      var errors = {}; // Format value

      if (fieldName === 'emails') {
        var _value = value,
            emails = _value.emails,
            invalids = _value.invalids;
        value = emails;
        errors.emails = invalids;
      } else if (fieldName === 'numberOfGiftCards') {
        var intNumberOfGiftCards = parseInt(value);
        value = !isNaN(intNumberOfGiftCards) ? intNumberOfGiftCards : 1;
      } // Set value


      this.setState(function (state) {
        return {
          values: Object.assign(state.values, defineProperty_default()({}, fieldName, value)),
          errors: Object.assign(state.errors, errors)
        };
      });
    }
  }, {
    key: "isSubmitEnabled",
    value: function isSubmitEnabled() {
      // Others fields validity are checked with HTML5 validation (see `onSubmit`)
      var _this$state = this.state,
          values = _this$state.values,
          errors = _this$state.errors,
          deliverType = _this$state.deliverType;

      if (this.isPaymentMethodDiscouraged() && !this.state.hasAcceptedWarning) {
        return false;
      }

      if (deliverType === 'email') {
        return values.emails.length > 0 && errors.emails.length === 0;
      } else {
        return values.numberOfGiftCards !== 0;
      }
    }
  }, {
    key: "onSubmit",
    value: function onSubmit(e) {
      var _this2 = this;

      e.preventDefault();
      var _this$state2 = this.state,
          values = _this$state2.values,
          submitting = _this$state2.submitting,
          deliverType = _this$state2.deliverType;

      if (!submitting && (0,utils/* reportValidityHTML5 */.CR)(this.form.current)) {
        var paymentMethod = values.paymentMethod || this.getDefaultPaymentMethod();
        var limitations = {};

        if (this.canLimitToFiscalHosts()) {
          limitations.limitedToHostCollectiveIds = this.optionsToIdsList(values.limitedToHosts);
        }

        this.setState({
          submitting: true
        });

        var variables = CreateGiftCardsForm_objectSpread({
          CollectiveId: this.props.collectiveId,
          amount: values.amount,
          PaymentMethodId: paymentMethod.id,
          expiryDate: values.expiryDate,
          batch: values.batch
        }, limitations);

        if (deliverType === 'email') {
          variables.emails = values.emails;
          variables.customMessage = values.customMessage;
        } else if (deliverType === 'manual') {
          variables.numberOfGiftCards = values.numberOfGiftCards;
        }

        this.props.createGiftCards({
          variables: variables
        }).then(function (_ref3) {
          var data = _ref3.data;

          _this2.setState({
            createdGiftCards: data.createGiftCards,
            submitting: false
          });

          window.scrollTo(0, 0);
        })["catch"](function (e) {
          _this2.setState({
            serverError: e.message,
            submitting: false
          });
        });
      }
    }
  }, {
    key: "getDefaultPaymentMethod",
    value: function getDefaultPaymentMethod() {
      return get_default()(this.props, 'data.Collective.paymentMethods', [])[0];
    }
  }, {
    key: "getError",
    value: function getError(fieldName) {
      return this.state.errors[fieldName];
    }
  }, {
    key: "changeDeliverType",
    value: function changeDeliverType(deliverType) {
      this.setState(function (state) {
        // Use the emails count to pre-fill the number count
        var values = CreateGiftCardsForm_objectSpread({}, state.values);

        if (state.deliverType === 'email' && deliverType === 'manual' && values.emails.length) {
          values.numberOfGiftCards = values.emails.length;
        }

        return {
          values: values,
          deliverType: deliverType
        };
      });
    }
  }, {
    key: "getGiftCardsCount",
    value: function getGiftCardsCount() {
      var _this$state3 = this.state,
          values = _this$state3.values,
          deliverType = _this$state3.deliverType;
      return deliverType === 'email' ? values.emails.length : values.numberOfGiftCards;
    }
  }, {
    key: "shouldLimitToSpecificHosts",
    value: function shouldLimitToSpecificHosts() {
      var _this$state$values$li;

      return this.canLimitToFiscalHosts() && !((_this$state$values$li = this.state.values.limitedToHosts) !== null && _this$state$values$li !== void 0 && _this$state$values$li.length) && this.getGiftCardsCount() >= WARN_NB_GIFT_CARDS_WITHOUT_HOST_LIMIT;
    }
  }, {
    key: "isPaymentMethodDiscouraged",
    value: function isPaymentMethodDiscouraged() {
      var values = this.state.values;
      var paymentMethod = values.paymentMethod || this.getDefaultPaymentMethod();

      if ((paymentMethod === null || paymentMethod === void 0 ? void 0 : paymentMethod.type) !== 'CREDITCARD') {
        return false;
      }

      var count = this.getGiftCardsCount();
      return count >= WARN_NB_GIFT_CARDS_WITH_CREDIT_CARD || count * values.amount >= WARN_GIFT_CARDS_AMOUNT_WITH_CREDIT_CARD;
    }
  }, {
    key: "renderSubmit",
    value: function renderSubmit() {
      var submitting = this.state.submitting;
      var count = this.getGiftCardsCount();
      var enable = this.isSubmitEnabled();
      return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        type: "submit",
        buttonSize: "large",
        buttonStyle: "primary",
        minWidth: "16em",
        disabled: !submitting && !enable,
        loading: submitting,
        "data-cy": "submit-new-gift-cards",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "giftCards.generate",
          defaultMessage: [{
            "type": 0,
            "value": "Create "
          }, {
            "type": 1,
            "value": "count"
          }, {
            "type": 0,
            "value": " gift cards"
          }],
          values: {
            count: count
          }
        })
      });
    }
  }, {
    key: "renderNoPaymentMethodMessage",
    value: function renderNoPaymentMethodMessage() {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
          href: "/".concat(this.props.collectiveSlug, "/admin/payment-methods"),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonSize: "large",
            mt: "2em",
            justifyContent: "center",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.create.requirePM",
              defaultMessage: [{
                "type": 0,
                "value": "Add a payment method to create gift cards"
              }]
            })
          })
        })
      });
    }
  }, {
    key: "renderEmailFields",
    value: function renderEmailFields() {
      var _this3 = this;

      var _this$state4 = this.state,
          submitting = _this$state4.submitting,
          errors = _this$state4.errors,
          multiEmailsInitialState = _this$state4.multiEmailsInitialState;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mb: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              width: '100%'
            },
            htmlFor: "gift-cards-recipients",
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              flexDirection: "column",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.create.recipients",
                defaultMessage: [{
                  "type": 0,
                  "value": "Recipients"
                }]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(FieldLabelDetails, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "giftCards.create.recipientsDetails",
                  defaultMessage: [{
                    "type": 0,
                    "value": "A list of emails that will receive a gift card"
                  }]
                })
              })]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledMultiEmailInput, {
            id: "gift-cards-recipients",
            className: "gift-cards-recipients",
            mt: "0.25em",
            invalids: errors.emails,
            initialState: multiEmailsInitialState,
            onClose: function onClose(s) {
              return _this3.setState({
                multiEmailsInitialState: s
              });
            },
            onChange: function onChange(value) {
              return _this3.onChange('emails', value);
            },
            disabled: submitting
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
          name: "customMessage",
          label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.create.customMessage",
              defaultMessage: [{
                "type": 0,
                "value": "Custom message"
              }]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(FieldLabelDetails, {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "forms.optional",
                defaultMessage: [{
                  "type": 0,
                  "value": "Optional"
                }]
              })
            })]
          }),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
            id: "giftcard-customMessage",
            type: "text",
            maxLength: "255",
            placeholder: this.props.intl.formatMessage(messages.emailCustomMessage),
            onChange: function onChange(e) {
              return _this3.onChange('customMessage', e.target.value);
            },
            style: {
              flexGrow: 1
            },
            disabled: submitting
          })
        })]
      });
    }
  }, {
    key: "renderManualFields",
    value: function renderManualFields() {
      var _this4 = this;

      var collectiveSettings = this.props.collectiveSettings;
      var giftCardsMaxDailyCount = get_default()(collectiveSettings, "giftCardsMaxDailyCount") || 100;
      return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: "flex",
        flexDirection: "column",
        width: 1,
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          justifyContent: "center",
          mt: 3,
          mb: 4,
          alignItems: "center",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            htmlFor: "giftcard-numberOfGiftCards",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.create.number",
              defaultMessage: [{
                "type": 0,
                "value": "Number of gift cards"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
            id: "giftcard-numberOfGiftCards",
            name: "giftcard-numberOfGiftCards",
            type: "number",
            step: "1",
            min: "1",
            ml: 3,
            max: giftCardsMaxDailyCount,
            maxWidth: "6.5em",
            onChange: function onChange(e) {
              return _this4.onChange('numberOfGiftCards', e.target.value);
            },
            value: this.state.values.numberOfGiftCards,
            disabled: this.state.submitting,
            onWheel: function onWheel(e) {
              // Prevent accidentally changing the number when scrolling
              e.preventDefault();
              e.target.blur();
            }
          })]
        })
      });
    }
  }, {
    key: "optionsToIdsList",
    value: function optionsToIdsList(options) {
      return options ? options.map(function (_ref4) {
        var value = _ref4.value;
        return value.id;
      }) : [];
    }
  }, {
    key: "canLimitToFiscalHosts",
    value: function canLimitToFiscalHosts() {
      var paymentMethod = this.state.values.paymentMethod || this.getDefaultPaymentMethod();
      return !(0,payment_methods/* isPrepaid */.bk)(paymentMethod); // Prepaid are already limited to specific fiscal hosts
    }
    /** Get batch options for select. First option is always "No batch" */

  }, {
    key: "render",
    value: function render() {
      var _this5 = this,
          _values$limitedToHost;

      var _this$props = this.props,
          data = _this$props.data,
          intl = _this$props.intl,
          collectiveSlug = _this$props.collectiveSlug,
          currency = _this$props.currency,
          collectiveSettings = _this$props.collectiveSettings;
      var _this$state5 = this.state,
          submitting = _this$state5.submitting,
          values = _this$state5.values,
          createdGiftCards = _this$state5.createdGiftCards,
          serverError = _this$state5.serverError,
          deliverType = _this$state5.deliverType;

      var loading = get_default()(data, 'loading');

      var error = get_default()(data, 'error');

      var paymentMethods = get_default()(data, 'Collective.paymentMethods', []);

      var batches = get_default()(data, 'Collective.giftCardsBatches');

      var hosts = get_default()(data, 'allHosts.collectives', []);

      var batchesOptions = this.getBatchesOptions(batches, intl);

      if (loading) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
      } else if (error) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "error",
          withIcon: true,
          children: error.message
        });
      } else if (paymentMethods.length === 0) {
        return this.renderNoPaymentMethodMessage();
      } else if (createdGiftCards) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(CreateGiftCardsSuccess, {
          cards: createdGiftCards,
          deliverType: deliverType,
          collectiveSlug: collectiveSlug
        });
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
        ref: this.form,
        onSubmit: this.onSubmit,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "info",
          fontSize: "13px",
          withIcon: true,
          mb: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "GiftCard.Limitinfo",
            defaultMessage: [{
              "type": 0,
              "value": "Your account is currently limited to "
            }, {
              "type": 1,
              "value": "limit"
            }, {
              "type": 0,
              "value": " gift cards per day. If you want to increase that limit, please contact "
            }, {
              "type": 8,
              "value": "SupportLink",
              "children": [{
                "type": 0,
                "value": "support"
              }]
            }, {
              "type": 0,
              "value": "."
            }],
            values: {
              SupportLink: I18nFormatters/* I18nSupportLink */.wl,
              limit: get_default()(collectiveSettings, "giftCardsMaxDailyCount") || 100
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
            name: "amount",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Fields.amount",
              defaultMessage: [{
                "type": 0,
                "value": "Amount"
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputAmount/* default */.Z, {
              id: "giftcard-amount",
              currency: currency,
              prepend: currency,
              onChange: function onChange(value) {
                return _this5.onChange('amount', value);
              },
              error: this.getError('amount'),
              value: values.amount,
              min: MIN_AMOUNT,
              max: MAX_AMOUNT,
              disabled: submitting,
              required: true
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
            name: "paymentMethod",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentmethod.label",
              defaultMessage: [{
                "type": 0,
                "value": "Payment Method"
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_PaymentMethodSelect, {
              inputId: "gift-card-payment-method",
              disabled: submitting,
              paymentMethods: paymentMethods,
              defaultPaymentMethod: this.getDefaultPaymentMethod(),
              onChange: function onChange(pm) {
                return _this5.onChange('paymentMethod', pm);
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
            name: "expiryDate",
            isLabelClickable: true,
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "x/oJ17",
              defaultMessage: [{
                "type": 0,
                "value": "Expiry date"
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
              id: "giftcard-expiryDate",
              name: "expiryDate",
              value: values.expiryDate,
              onChange: function onChange(e) {
                return _this5.onChange('expiryDate', e.target.value);
              },
              type: "date",
              required: true,
              min: dayjs_min_default()().add(1, 'day').format('YYYY-MM-DD')
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
            name: "batch",
            label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              flexDirection: "column",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.batch",
                defaultMessage: [{
                  "type": 0,
                  "value": "Batch name"
                }]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(FieldLabelDetails, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "forms.optional",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Optional"
                  }]
                })
              })]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelectCreatable, {
              id: "giftcard-batch",
              inputId: "giftcard-batch",
              onChange: function onChange(_ref5) {
                var value = _ref5.value;
                return _this5.onChange('batch', truncate_default()(value, {
                  length: 200
                }));
              },
              minWidth: 300,
              disabled: submitting,
              fontSize: "14px",
              options: batchesOptions,
              defaultValue: batchesOptions[0]
            })
          }), this.canLimitToFiscalHosts() && /*#__PURE__*/(0,jsx_runtime.jsx)(InlineField, {
            name: "limitToHosts",
            label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              flexDirection: "column",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.create.limitToHosts",
                defaultMessage: [{
                  "type": 0,
                  "value": "Limit to the following Hosts"
                }]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(FieldLabelDetails, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "forms.optional",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Optional"
                  }]
                })
              })]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(CollectivePicker/* default */.ZP, {
              inputId: "create-gift-card-host-picker",
              placeholder: intl.formatMessage(messages.limitToHostsPlaceholder),
              disabled: hosts.length === 0,
              minWidth: 300,
              maxWidth: 600,
              sortFunc: function sortFunc(collectives) {
                return collectives;
              }
              /** Sort is handled by the API */
              ,
              groupByType: false,
              collectives: hosts,
              defaultValue: values.limitedToHosts,
              onChange: function onChange(options) {
                return _this5.onChange('limitedToHosts', options);
              },
              isMulti: true,
              useCompactMode: ((_values$limitedToHost = values.limitedToHosts) === null || _values$limitedToHost === void 0 ? void 0 : _values$limitedToHost.length) >= 3
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(DeliverTypeRadioSelector, {
            className: "deliver-type-selector",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(RadioButtonWithLabel, {
              name: "email",
              checked: deliverType === 'email',
              onClick: function onClick() {
                return _this5.changeDeliverType('email');
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.create.sendEmails",
                defaultMessage: [{
                  "type": 0,
                  "value": "Send the cards by email"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(RadioButtonWithLabel, {
              name: "manual",
              checked: deliverType === 'manual',
              onClick: function onClick() {
                return _this5.changeDeliverType('manual');
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.create.generateCodes",
                defaultMessage: [{
                  "type": 0,
                  "value": "I'll send the codes myself"
                }]
              })
            })]
          }), deliverType === 'email' && this.renderEmailFields(), deliverType === 'manual' && this.renderManualFields(), serverError && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "error",
            withIcon: true,
            children: serverError
          }), this.shouldLimitToSpecificHosts() && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "warning",
            fontSize: "14px",
            lineHeight: "20px",
            withIcon: true,
            mb: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "f7yDbJ",
              defaultMessage: [{
                "type": 0,
                "value": "We strongly recommend limiting your gift cards to specific fiscal hosts - otherwise, malicious users could create fake Collectives to withdraw the funds. Collectives under trusted fiscal hosts have all been vetted and confirmed as legitimate."
              }],
              values: {
                SupportLink: I18nFormatters/* I18nSupportLink */.wl
              }
            })
          }), this.isPaymentMethodDiscouraged() && /*#__PURE__*/(0,jsx_runtime.jsxs)(MessageBox/* default */.Z, {
            type: "warning",
            fontSize: "14px",
            lineHeight: "20px",
            withIcon: true,
            mb: 4,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "wT94tD",
              defaultMessage: [{
                "type": 0,
                "value": "Credit card payments incur processor fees, which can add up on large campaigns. Banks may also flag the numerous transactions as suspicious. We strongly recommend adding a prepaid budget via bank transfer instead. "
              }, {
                "type": 8,
                "value": "SupportLink",
                "children": [{
                  "type": 0,
                  "value": "Contact us"
                }]
              }, {
                "type": 0,
                "value": " to learn more."
              }],
              values: {
                SupportLink: I18nFormatters/* I18nSupportLink */.wl
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              mt: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
                name: "accept-payment-method-warning",
                checked: this.state.hasAcceptedWarning,
                onChange: function onChange() {
                  return _this5.setState({
                    hasAcceptedWarning: !_this5.state.hasAcceptedWarning
                  });
                },
                label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "8jaG3F",
                  defaultMessage: [{
                    "type": 0,
                    "value": "I understand, let me continue"
                  }]
                })
              })
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: "1em",
            alignSelf: "center",
            mt: 3,
            children: this.renderSubmit()
          })]
        })]
      });
    }
  }]);

  return CreateGiftCardsForm;
}(react.Component);
/**
 * A query to get a collective source payment methods. This will not return
 * gift cards, as a gift card cannot be used as a source payment method
 * for another payment method.
 */


var collectiveSourcePaymentMethodsQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(CreateGiftCardsForm_templateObject || (CreateGiftCardsForm_templateObject = taggedTemplateLiteral_default()(["\n  query CollectiveSourcePaymentMethods($id: Int) {\n    Collective(id: $id) {\n      id\n      giftCardsBatches {\n        id\n        name\n        count\n      }\n      paymentMethods(type: [\"CREDITCARD\", \"PREPAID\"], hasBalanceAboveZero: true) {\n        id\n        uuid\n        name\n        data\n        monthlyLimitPerMember\n        service\n        type\n        balance\n        currency\n        expiryDate\n        batch\n      }\n    }\n    allHosts(limit: 100, onlyOpenHosts: false, minNbCollectivesHosted: 1) {\n      id\n      collectives {\n        id\n        type\n        name\n        slug\n        imageUrl\n      }\n    }\n  }\n"])));
var addCollectiveSourcePaymentMethodsQuery = (0,hoc_graphql/* graphql */.B)(collectiveSourcePaymentMethodsQuery, {
  options: function options(props) {
    return {
      variables: {
        id: props.collectiveId
      },
      fetchPolicy: 'network-only'
    };
  }
});
var createGiftCardsMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(CreateGiftCardsForm_templateObject2 || (CreateGiftCardsForm_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation CreateGiftCards(\n    $CollectiveId: Int!\n    $numberOfGiftCards: Int\n    $emails: [String]\n    $PaymentMethodId: Int\n    $amount: Int\n    $monthlyLimitPerMember: Int\n    $description: String\n    $expiryDate: String\n    $currency: String\n    $limitedToTags: [String]\n    $limitedToHostCollectiveIds: [Int]\n    $customMessage: String\n    $batch: String\n  ) {\n    createGiftCards(\n      amount: $amount\n      monthlyLimitPerMember: $monthlyLimitPerMember\n      CollectiveId: $CollectiveId\n      PaymentMethodId: $PaymentMethodId\n      description: $description\n      expiryDate: $expiryDate\n      currency: $currency\n      limitedToTags: $limitedToTags\n      limitedToHostCollectiveIds: $limitedToHostCollectiveIds\n      numberOfGiftCards: $numberOfGiftCards\n      emails: $emails\n      customMessage: $customMessage\n      batch: $batch\n    ) {\n      id\n      name\n      uuid\n      batch\n      limitedToHostCollectiveIds\n      description\n      initialBalance\n      monthlyLimitPerMember\n      expiryDate\n      currency\n      data\n    }\n  }\n"])));
var addCreateGiftCardsMutation = (0,hoc_graphql/* graphql */.B)(createGiftCardsMutation, {
  name: 'createGiftCards'
});
var addGraphql = (0,utils/* compose */.qC)(addCollectiveSourcePaymentMethodsQuery, addCreateGiftCardsMutation);
CreateGiftCardsForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldName",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "isSubmitEnabled",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onSubmit",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getDefaultPaymentMethod",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldName",
      "type": null
    }],
    "returns": null
  }, {
    "name": "changeDeliverType",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "deliverType",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getGiftCardsCount",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "shouldLimitToSpecificHosts",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "isPaymentMethodDiscouraged",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderSubmit",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderNoPaymentMethodMessage",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderEmailFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderManualFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "optionsToIdsList",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "options",
      "type": null
    }],
    "returns": null
  }, {
    "name": "canLimitToFiscalHosts",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateGiftCardsForm",
  "props": {
    "collectiveId": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "createGiftCards": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "collectiveSettings": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "loading": {
            "name": "bool",
            "required": false
          },
          "error": {
            "name": "object",
            "required": false
          },
          "Collective": {
            "name": "shape",
            "value": {
              "paymentMethods": {
                "name": "array",
                "required": false
              }
            },
            "required": false
          },
          "allHosts": {
            "name": "shape",
            "value": {
              "collectives": {
                "name": "arrayOf",
                "value": {
                  "name": "shape",
                  "value": {
                    "id": {
                      "name": "number",
                      "required": false
                    }
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "intl": {
      "description": "@ignore from injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_CreateGiftCardsForm = ((0,injectIntl/* default */.ZP)(addGraphql(CreateGiftCardsForm)));
// EXTERNAL MODULE: ./components/InputField.js + 1 modules
var InputField = __webpack_require__(97038);
// EXTERNAL MODULE: ./components/orders/OrdersWithData.js + 4 modules
var OrdersWithData = __webpack_require__(12328);
// EXTERNAL MODULE: ./components/collective-page/graphql/fragments.js
var graphql_fragments = __webpack_require__(5824);
;// CONCATENATED MODULE: ./components/admin-panel/queries.ts


var admin_panel_queries_templateObject;



var adminPanelQuery = (0,graphql_tag_lib/* default */.ZP)(admin_panel_queries_templateObject || (admin_panel_queries_templateObject = taggedTemplateLiteral_default()(["\n  query AdminPanel($slug: String!) {\n    account(slug: $slug) {\n      id\n      legacyId\n      slug\n      name\n      isHost\n      type\n      settings\n      isArchived\n      isIncognito\n      imageUrl(height: 256)\n      features {\n        id\n        ...NavbarFields\n        VIRTUAL_CARDS\n        USE_PAYMENT_METHODS\n        EMIT_GIFT_CARDS\n      }\n      policies {\n        REQUIRE_2FA_FOR_ADMINS\n      }\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n          policies {\n            REQUIRE_2FA_FOR_ADMINS\n          }\n        }\n      }\n      ... on AccountWithHost {\n        hostFeePercent\n        host {\n          id\n          slug\n          name\n          settings\n          policies {\n            EXPENSE_AUTHOR_CANNOT_APPROVE {\n              enabled\n              amountInCents\n              appliesToHostedCollectives\n              appliesToSingleAdminCollectives\n            }\n            COLLECTIVE_MINIMUM_ADMINS {\n              numberOfAdmins\n              applies\n              freeze\n            }\n          }\n        }\n      }\n      ... on AccountWithHost {\n        isApproved\n      }\n    }\n  }\n  ", "\n"])), graphql_fragments/* collectiveNavbarFieldsFragment */.AS);
;// CONCATENATED MODULE: ./components/edit-collective/sections/SettingsSectionTitle.js


var SettingsSectionTitle_excluded = ["children"];

function SettingsSectionTitle_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function SettingsSectionTitle_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? SettingsSectionTitle_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : SettingsSectionTitle_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }








var SettingsSectionTitle = function SettingsSectionTitle(_ref) {
  var children = _ref.children,
      props = objectWithoutProperties_default()(_ref, SettingsSectionTitle_excluded);

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, SettingsSectionTitle_objectSpread(SettingsSectionTitle_objectSpread({
    alignItems: "center",
    mb: 3,
    width: "100%"
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
      fontSize: "18px",
      lineHeight: "26px",
      children: children
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      ml: 2,
      flex: "1 1",
      borderColor: "black.400"
    })]
  }));
};

SettingsSectionTitle.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SettingsSectionTitle",
  "props": {
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_SettingsSectionTitle = (SettingsSectionTitle);
;// CONCATENATED MODULE: ./components/edit-collective/actions/Archive.js





var Archive_templateObject, Archive_templateObject2;



function Archive_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Archive_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Archive_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Archive_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

















var archiveCollectiveMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Archive_templateObject || (Archive_templateObject = taggedTemplateLiteral_default()(["\n  mutation ArchiveCollective($id: Int!) {\n    archiveCollective(id: $id) {\n      id\n      isArchived\n    }\n  }\n"])));
var unarchiveCollectiveMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Archive_templateObject2 || (Archive_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation UnarchiveCollective($id: Int!) {\n    unarchiveCollective(id: $id) {\n      id\n      isArchived\n    }\n  }\n"])));

var ArchiveCollective = function ArchiveCollective(_ref) {
  var _collective$host;

  var collective = _ref.collective;

  var _useState = (0,react.useState)({
    processing: false,
    isArchived: collective.isArchived,
    error: null,
    confirmationMsg: ''
  }),
      archiveStatus = _useState[0],
      setArchiveStatus = _useState[1];

  var processing = archiveStatus.processing,
      isArchived = archiveStatus.isArchived,
      error = archiveStatus.error,
      confirmationMsg = archiveStatus.confirmationMsg;
  var defaultAction = isArchived ? 'Archive' : 'Unarchive';

  var _useState2 = (0,react.useState)({
    type: defaultAction,
    show: false
  }),
      modal = _useState2[0],
      setModal = _useState2[1];

  var adminPanelMutationParams = {
    refetchQueries: [{
      query: adminPanelQuery,
      variables: {
        slug: collective.slug
      },
      context: helpers/* API_V2_CONTEXT */.T
    }]
  };

  var _useMutation = (0,client.useMutation)(archiveCollectiveMutation, adminPanelMutationParams),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      archiveCollective = _useMutation2[0];

  var _useMutation3 = (0,client.useMutation)(unarchiveCollectiveMutation, adminPanelMutationParams),
      _useMutation4 = slicedToArray_default()(_useMutation3, 1),
      unarchiveCollective = _useMutation4[0];

  var handleArchiveCollective = /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(_ref2) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              id = _ref2.id;
              setModal({
                type: 'Archive',
                show: false
              });
              _context.prev = 2;
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: true
              }));
              _context.next = 6;
              return archiveCollective({
                variables: {
                  id: id
                }
              });

            case 6:
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: false,
                isArchived: true
              }));
              _context.next = 13;
              break;

            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[2, 9]]);
    }));

    return function handleArchiveCollective(_x) {
      return _ref3.apply(this, arguments);
    };
  }();

  var handleUnarchiveCollective = /*#__PURE__*/function () {
    var _ref5 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(_ref4) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              id = _ref4.id;
              setModal({
                type: 'Unarchive',
                show: false
              });
              _context2.prev = 2;
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: true
              }));
              _context2.next = 6;
              return unarchiveCollective({
                variables: {
                  id: id
                }
              });

            case 6:
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: false,
                isArchived: false
              }));
              _context2.next = 13;
              break;

            case 9:
              _context2.prev = 9;
              _context2.t0 = _context2["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context2.t0).message;
              setArchiveStatus(Archive_objectSpread(Archive_objectSpread({}, archiveStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[2, 9]]);
    }));

    return function handleUnarchiveCollective(_x2) {
      return _ref5.apply(this, arguments);
    };
  }();

  var hasBalance = collective.stats.balance > 0 && (collective.type === 'COLLECTIVE' || collective.type === 'FUND');

  var closeModal = function closeModal() {
    return setModal(Archive_objectSpread(Archive_objectSpread({}, modal), {}, {
      show: false
    }));
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.title",
        defaultMessage: [{
          "type": 0,
          "value": "Archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      mb: 3,
      lineHeight: "16px",
      fontSize: "14px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.description",
        defaultMessage: [{
          "type": 0,
          "value": "Archiving "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " means it will visually appear inactive and no new activity will be allowed."
        }],
        values: {
          type: collective.type
        }
      }), "\xA0", collective.type === 'COLLECTIVE' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.subscriptions",
        defaultMessage: [{
          "type": 0,
          "value": "Recurring financial contributions will be automatically canceled."
        }]
      })]
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      my: 3,
      color: "#ff5252",
      children: error
    }), !isArchived && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: function onClick() {
        return setModal({
          type: 'Archive',
          show: true
        });
      },
      loading: processing,
      disabled: collective.isHost || hasBalance,
      mb: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.title",
        defaultMessage: [{
          "type": 0,
          "value": "Archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && hasBalance && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.availableBalance",
        defaultMessage: [{
          "type": 0,
          "value": "Only "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Funds"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collectives"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with a balance of zero can be archived. To pay out the funds, submit an expense, donate to another Collective, or send the funds to your Fiscal Host using the 'empty balance' option."
        }],
        values: {
          type: collective.type
        }
      })
    }), !isArchived && collective.isHost && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: collective.type === constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.selfHosted",
        defaultMessage: [{
          "type": 0,
          "value": "To archive this Independent Collective, first go to your "
        }, {
          "type": 8,
          "value": "SettingsLink",
          "children": [{
            "type": 0,
            "value": "Fiscal Host settings"
          }]
        }, {
          "type": 0,
          "value": " and click 'Reset Fiscal Host'."
        }],
        values: {
          SettingsLink: (0,I18nFormatters/* getI18nLink */.fw)({
            href: "/".concat((_collective$host = collective.host) === null || _collective$host === void 0 ? void 0 : _collective$host.slug, "/admin/host")
          })
        }
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.archive.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You can't archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "your Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "your account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " while being a Host. Please deactivate as Host first (in your Fiscal Hosting settings)."
        }],
        values: {
          type: collective.type
        }
      })
    }), isArchived && confirmationMsg && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      withIcon: true,
      type: "info",
      mb: 4,
      children: confirmationMsg
    }), isArchived && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: function onClick() {
        return setModal({
          type: 'Unarchive',
          show: true
        });
      },
      loading: processing,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.unarchive.button",
        defaultMessage: [{
          "type": 0,
          "value": "Unarchive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), modal.show && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        onClose: closeModal,
        children: modal.type === 'Unarchive' ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "unarchive.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Unarchive "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "archive.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Archive "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [modal.type !== 'Unarchive' && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "archive.account.confirmation",
              defaultMessage: [{
                "type": 0,
                "value": "Are you sure you want to archive "
              }, {
                "type": 5,
                "value": "type",
                "options": {
                  "EVENT": {
                    "value": [{
                      "type": 0,
                      "value": "this Event"
                    }]
                  },
                  "PROJECT": {
                    "value": [{
                      "type": 0,
                      "value": "this Project"
                    }]
                  },
                  "FUND": {
                    "value": [{
                      "type": 0,
                      "value": "this Fund"
                    }]
                  },
                  "COLLECTIVE": {
                    "value": [{
                      "type": 0,
                      "value": "this Collective"
                    }]
                  },
                  "ORGANIZATION": {
                    "value": [{
                      "type": 0,
                      "value": "this Organization"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "this account"
                    }]
                  }
                }
              }, {
                "type": 0,
                "value": "?"
              }],
              values: {
                type: collective.type
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
              fontSize: 13,
              type: "warning",
              withIcon: true,
              mt: 3,
              mb: 3,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "kyC4C+",
                defaultMessage: [{
                  "type": 0,
                  "value": "Note that archiving will cancel all active recurring contributions."
                }]
              })
            })]
          }), modal.type === 'Unarchive' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "unarchive.account.confirmation",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to unarchive "
            }, {
              "type": 5,
              "value": "type",
              "options": {
                "EVENT": {
                  "value": [{
                    "type": 0,
                    "value": "this Event"
                  }]
                },
                "PROJECT": {
                  "value": [{
                    "type": 0,
                    "value": "this Project"
                  }]
                },
                "FUND": {
                  "value": [{
                    "type": 0,
                    "value": "this Fund"
                  }]
                },
                "COLLECTIVE": {
                  "value": [{
                    "type": 0,
                    "value": "this Collective"
                  }]
                },
                "ORGANIZATION": {
                  "value": [{
                    "type": 0,
                    "value": "this Organization"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "this account"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              type: collective.type
            }
          })]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            onClick: function onClick() {
              return setModal(Archive_objectSpread(Archive_objectSpread({}, modal), {}, {
                show: false
              }));
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: function onClick() {
              if (modal.type === 'Unarchive') {
                handleUnarchiveCollective({
                  id: collective.id
                });
              } else {
                handleArchiveCollective({
                  id: collective.id
                });
              }
            },
            children: modal.type === 'Unarchive' ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.unarchive.confirm.btn",
              defaultMessage: [{
                "type": 0,
                "value": "Unarchive"
              }]
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.archive.confirm.btn",
              defaultMessage: [{
                "type": 0,
                "value": "Archive"
              }]
            })
          })]
        })
      })]
    })]
  });
};

ArchiveCollective.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ArchiveCollective",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "archiveCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "unarchiveCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var Archive = (ArchiveCollective);
// EXTERNAL MODULE: ./components/UserProvider.js + 2 modules
var UserProvider = __webpack_require__(51927);
;// CONCATENATED MODULE: ./components/edit-collective/actions/Delete.js





var Delete_excluded = ["collective"];

var Delete_templateObject, Delete_templateObject2;



function Delete_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Delete_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Delete_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Delete_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

















var deleteCollectiveMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Delete_templateObject || (Delete_templateObject = taggedTemplateLiteral_default()(["\n  mutation DeleteCollective($id: Int!) {\n    deleteCollective(id: $id) {\n      id\n    }\n  }\n"])));
var deleteUserCollectiveMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Delete_templateObject2 || (Delete_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation DeleteUserCollective($id: Int!) {\n    deleteUserCollective(id: $id) {\n      id\n    }\n  }\n"])));

var DeleteCollective = function DeleteCollective(_ref) {
  var _collective$host, _collective$host2;

  var collective = _ref.collective,
      props = objectWithoutProperties_default()(_ref, Delete_excluded);

  var _useState = (0,react.useState)(false),
      showModal = _useState[0],
      setShowModal = _useState[1];

  var _useState2 = (0,react.useState)({
    deleting: false,
    error: null
  }),
      deleteStatus = _useState2[0],
      setDeleteStatus = _useState2[1];

  var _useMutation = (0,client.useMutation)(deleteCollectiveMutation),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      deleteCollective = _useMutation2[0];

  var _useMutation3 = (0,client.useMutation)(deleteUserCollectiveMutation),
      _useMutation4 = slicedToArray_default()(_useMutation3, 1),
      deleteUserCollective = _useMutation4[0];

  var isSelfHosted = ((_collective$host = collective.host) === null || _collective$host === void 0 ? void 0 : _collective$host.id) === collective.id;

  var handleDelete = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      var errorMsg;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              setDeleteStatus(Delete_objectSpread(Delete_objectSpread({}, deleteStatus), {}, {
                deleting: true
              }));

              if (!(collective.type === 'USER')) {
                _context.next = 7;
                break;
              }

              _context.next = 5;
              return deleteUserCollective({
                variables: {
                  id: collective.id
                }
              });

            case 5:
              _context.next = 11;
              break;

            case 7:
              _context.next = 9;
              return deleteCollective({
                variables: {
                  id: collective.id
                }
              });

            case 9:
              _context.next = 11;
              return props.refetchLoggedInUser();

            case 11:
              _context.next = 13;
              return props.router.push("/deleteCollective/confirmed?type=".concat(collective.type));

            case 13:
              _context.next = 19;
              break;

            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](0);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;
              setDeleteStatus({
                deleting: false,
                error: errorMsg
              });

            case 19:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 15]]);
    }));

    return function handleDelete() {
      return _ref2.apply(this, arguments);
    };
  }();

  var deleting = deleteStatus.deleting,
      error = deleteStatus.error;

  var closeModal = function closeModal() {
    return setShowModal(false);
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.title",
        defaultMessage: [{
          "type": 0,
          "value": "Delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mb: 3,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.description",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "This Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "This Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "This Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "This Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "This Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "This account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " will be deleted, along with all related data."
        }],
        values: {
          type: collective.type
        }
      })
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      my: 3,
      color: "#ff5252",
      children: error
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: function onClick() {
        return setShowModal(true);
      },
      loading: deleting,
      disabled: collective.isHost || !collective.isDeletable,
      mb: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.title",
        defaultMessage: [{
          "type": 0,
          "value": "Delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "this Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "this Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "this Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "this Collective"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "this Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "this account"
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), collective.isHost && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: [isSelfHosted ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.selfHost",
        defaultMessage: [{
          "type": 0,
          "value": "To delete this Independent Collective, first go to your "
        }, {
          "type": 8,
          "value": "SettingsLink",
          "children": [{
            "type": 0,
            "value": "Fiscal Host settings"
          }]
        }, {
          "type": 0,
          "value": " and click 'Reset Fiscal Host'."
        }],
        values: {
          SettingsLink: (0,I18nFormatters/* getI18nLink */.fw)({
            href: "/".concat((_collective$host2 = collective.host) === null || _collective$host2 === void 0 ? void 0 : _collective$host2.slug, "/admin/host")
          })
        }
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You can't delete "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "your Organization"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "your account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " while being a Host. Please deactivate as Host first (in your Fiscal Hosting settings)."
        }],
        values: {
          type: collective.type
        }
      }), ' ']
    }), !collective.isDeletable && collective.type !== constants_collectives/* CollectiveType.EVENT */.eV.EVENT && collective.type !== constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.delete.isNotDeletable-message",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Funds"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collectives"
              }]
            },
            "ORGANIZATION": {
              "value": [{
                "type": 0,
                "value": "Organizations"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with transactions, orders, events or paid expenses cannot be deleted. Please archive it instead."
        }],
        values: {
          type: collective.type
        }
      }), ' ']
    }), !collective.isDeletable && (collective.type === constants_collectives/* CollectiveType.EVENT */.eV.EVENT || collective.type === constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT) && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.event.delete.isNotDeletable-message",
        defaultMessage: [{
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Events"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Projects"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Accounts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " with transactions, orders or paid expenses cannot be deleted. Please archive it instead."
        }],
        values: {
          type: collective.type
        }
      })
    }), showModal && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        onClose: closeModal,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.delete.modal.header",
          defaultMessage: [{
            "type": 0,
            "value": "Delete "
          }, {
            "type": 1,
            "value": "name"
          }],
          values: {
            name: collective.name
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.delete.modal.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to delete "
            }, {
              "type": 5,
              "value": "type",
              "options": {
                "EVENT": {
                  "value": [{
                    "type": 0,
                    "value": "this Event"
                  }]
                },
                "PROJECT": {
                  "value": [{
                    "type": 0,
                    "value": "this Project"
                  }]
                },
                "FUND": {
                  "value": [{
                    "type": 0,
                    "value": "this Fund"
                  }]
                },
                "COLLECTIVE": {
                  "value": [{
                    "type": 0,
                    "value": "this Collective"
                  }]
                },
                "ORGANIZATION": {
                  "value": [{
                    "type": 0,
                    "value": "this Organization"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "this account"
                  }]
                }
              }
            }, {
              "type": 0,
              "value": "?"
            }],
            values: {
              type: collective.type
            }
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            onClick: function onClick() {
              return setShowModal(false);
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            "data-cy": "delete",
            onClick: function onClick() {
              setShowModal(false);
              handleDelete();
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.delete",
              defaultMessage: [{
                "type": 0,
                "value": "Delete"
              }]
            })
          })]
        })
      })]
    })]
  });
};

DeleteCollective.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteCollective",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "refetchLoggedInUser": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var Delete = ((0,UserProvider/* withUser */.ns)((0,next_router.withRouter)(DeleteCollective)));
// EXTERNAL MODULE: ./components/SendMoneyToCollectiveBtn.js
var SendMoneyToCollectiveBtn = __webpack_require__(75052);
;// CONCATENATED MODULE: ./components/edit-collective/SendFundsToCollectiveSection.js


function SendFundsToCollectiveSection_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function SendFundsToCollectiveSection_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? SendFundsToCollectiveSection_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : SendFundsToCollectiveSection_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












var SendFundsToCollectiveSection = function SendFundsToCollectiveSection(_ref) {
  var collective = _ref.collective,
      toCollective = _ref.toCollective,
      LoggedInUser = _ref.LoggedInUser;

  var _useIntl = (0,useIntl/* default */.Z)(),
      locale = _useIntl.locale;

  var _useState = (0,react.useState)({
    type: 'Transfer',
    show: false,
    isApproved: false
  }),
      modal = _useState[0],
      setModal = _useState[1];

  var confirmTransfer = function confirmTransfer() {
    setModal(SendFundsToCollectiveSection_objectSpread(SendFundsToCollectiveSection_objectSpread({}, modal), {}, {
      show: true,
      isApproved: false
    }));
  };

  var closeModal = function closeModal() {
    return setModal(SendFundsToCollectiveSection_objectSpread(SendFundsToCollectiveSection_objectSpread({}, modal), {}, {
      show: false,
      isApproved: false
    }));
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [collective.stats.balance > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(SendMoneyToCollectiveBtn/* default */.Z, {
      fromCollective: collective,
      toCollective: toCollective,
      LoggedInUser: LoggedInUser,
      amount: collective.stats.balance,
      currency: collective.currency,
      confirmTransfer: confirmTransfer,
      isTransferApproved: modal.isApproved
    }), collective.stats.balance === 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      disabled: true,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "SendMoneyToCollective.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Send "
        }, {
          "type": 1,
          "value": "amount"
        }, {
          "type": 0,
          "value": " to "
        }, {
          "type": 1,
          "value": "collective"
        }],
        values: {
          amount: (0,currency_utils/* formatCurrency */.xG)(0, collective.currency, {
            locale: locale
          }),
          collective: toCollective.name
        }
      })
    }), modal.show && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: "570px",
      onClose: closeModal,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        onClose: closeModal,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.emptyBalance.header",
          values: {
            action: modal.type
          },
          defaultMessage: [{
            "type": 1,
            "value": "action"
          }, {
            "type": 0,
            "value": " Balance"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.emptyBalance.body",
            values: {
              collective: toCollective.name,
              action: modal.type.toLowerCase()
            },
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to "
            }, {
              "type": 1,
              "value": "action"
            }, {
              "type": 0,
              "value": " to "
            }, {
              "type": 1,
              "value": "collective"
            }, {
              "type": 0,
              "value": "?"
            }]
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            onClick: function onClick() {
              return setModal(SendFundsToCollectiveSection_objectSpread(SendFundsToCollectiveSection_objectSpread({}, modal), {}, {
                show: false,
                isApproved: false
              }));
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: function onClick() {
              return setModal(SendFundsToCollectiveSection_objectSpread(SendFundsToCollectiveSection_objectSpread({}, modal), {}, {
                show: false,
                isApproved: true
              }));
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "confirm",
              defaultMessage: [{
                "type": 0,
                "value": "Confirm"
              }]
            })
          })]
        })
      })]
    })]
  });
};

SendFundsToCollectiveSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SendFundsToCollectiveSection",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "toCollective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var edit_collective_SendFundsToCollectiveSection = (SendFundsToCollectiveSection);
;// CONCATENATED MODULE: ./components/edit-collective/actions/EmptyBalance.js










var EmptyBalance = function EmptyBalance(_ref) {
  var collective = _ref.collective,
      LoggedInUser = _ref.LoggedInUser;

  if (!collective.host || collective.host.id === collective.id) {
    return null;
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    mb: 50,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.balance.title",
        defaultMessage: [{
          "type": 0,
          "value": "Empty "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " balance"
        }],
        values: {
          type: collective.type
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mb: 2,
      lineHeight: "16px",
      fontSize: "14px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.balance.description",
        defaultMessage: [{
          "type": 0,
          "value": "Transfer remaining balance to "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "the Collective"
              }]
            },
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "the Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "the Fiscal Host"
              }]
            }
          }
        }, {
          "type": 0,
          "value": ". "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "Project"
              }]
            },
            "FUND": {
              "value": [{
                "type": 0,
                "value": "Fund"
              }]
            },
            "COLLECTIVE": {
              "value": [{
                "type": 0,
                "value": "Collective"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "account"
              }]
            }
          }
        }, {
          "type": 0,
          "value": " balance must be zero to archive "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": [{
                "type": 0,
                "value": "the Event"
              }]
            },
            "PROJECT": {
              "value": [{
                "type": 0,
                "value": "the Project"
              }]
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "or change Hosts"
              }]
            }
          }
        }, {
          "type": 0,
          "value": ". "
        }, {
          "type": 5,
          "value": "type",
          "options": {
            "EVENT": {
              "value": []
            },
            "PROJECT": {
              "value": []
            },
            "other": {
              "value": [{
                "type": 0,
                "value": "Alternatively, you can submit an expense or donate to another Collective to zero the balance."
              }]
            }
          }
        }],
        values: {
          type: collective.type
        }
      })
    }), [constants_collectives/* CollectiveType.FUND */.eV.FUND, constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE].includes(collective.type) && !collective.host.hostCollective && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.balance.notAvailable",
        defaultMessage: [{
          "type": 0,
          "value": "The Host doesn't support this feature. Submit an expense, donate to another Collective, or contact support if you're blocked."
        }]
      })
    }), [constants_collectives/* CollectiveType.FUND */.eV.FUND, constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE].includes(collective.type) && collective.host.hostCollective && /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_SendFundsToCollectiveSection, {
      LoggedInUser: LoggedInUser,
      collective: collective,
      toCollective: collective.host.hostCollective
    }), [constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT, constants_collectives/* CollectiveType.EVENT */.eV.EVENT].includes(collective.type) && collective.parentCollective && /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_SendFundsToCollectiveSection, {
      LoggedInUser: LoggedInUser,
      collective: collective,
      toCollective: collective.parentCollective
    })]
  });
};

EmptyBalance.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EmptyBalance",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var actions_EmptyBalance = (EmptyBalance);
// EXTERNAL MODULE: ./node_modules/lodash/startCase.js
var startCase = __webpack_require__(18029);
var startCase_default = /*#__PURE__*/__webpack_require__.n(startCase);
// EXTERNAL MODULE: ./node_modules/lodash/sortBy.js
var sortBy = __webpack_require__(89734);
var sortBy_default = /*#__PURE__*/__webpack_require__.n(sortBy);
// EXTERNAL MODULE: ./components/GoalsCover.js
var GoalsCover = __webpack_require__(75593);
// EXTERNAL MODULE: ./components/StyledInputField.js
var StyledInputField = __webpack_require__(87262);
;// CONCATENATED MODULE: ./components/edit-collective/SettingsSubtitle.js




var SettingsSubtitle = function SettingsSubtitle(_ref) {
  var children = _ref.children;
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
    fontSize: "14px",
    lineHeight: "21px",
    color: "black.700",
    mt: 2,
    children: children
  });
};

SettingsSubtitle.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "SettingsSubtitle",
  "props": {
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_SettingsSubtitle = (SettingsSubtitle);
;// CONCATENATED MODULE: ./components/edit-collective/sections/CollectiveGoals.js














var CollectiveGoals_templateObject;



function CollectiveGoals_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveGoals_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveGoals_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveGoals_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function CollectiveGoals_createSuper(Derived) { var hasNativeReflectConstruct = CollectiveGoals_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CollectiveGoals_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





















var BORDER = '1px solid #efefef';

var getInterpolationOption = function getInterpolationOption(value) {
  return {
    label: startCase_default()(value),
    value: value
  };
};

var INTERPOLATION_OPTIONS = ['auto', 'logarithm', 'linear'].map(getInterpolationOption);

var CollectiveGoals = /*#__PURE__*/function (_React$Component) {
  inherits_default()(CollectiveGoals, _React$Component);

  var _super = CollectiveGoals_createSuper(CollectiveGoals);

  function CollectiveGoals(props) {
    var _this;

    classCallCheck_default()(this, CollectiveGoals);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "editGoal", function (index, fieldName, value) {
      if (value === 'onetime') {
        value = null;
      }

      _this.setState(function (state) {
        var goal = state.goals[index];

        var updatedGoal = CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, goal), {}, defineProperty_default()({
          type: goal.type || _this.defaultType
        }, fieldName, value));

        var updatedGoals = toConsumableArray_default()(state.goals);

        updatedGoals[index] = updatedGoal;
        return {
          isTouched: true,
          goals: updatedGoals
        };
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "toggleGoalsOnCollectivePage", function (_ref) {
      var checked = _ref.checked;

      _this.setState(function (state) {
        return {
          isTouched: true,
          collectivePage: CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, state.collectivePage), {}, {
            showGoals: checked
          })
        };
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "addGoal", function () {
      var newGoal = {
        type: _this.defaultType,
        key: (0,v4/* default */.Z)()
      };

      _this.setState(function (state) {
        return {
          isTouched: true,
          goals: [].concat(toConsumableArray_default()(state.goals), [newGoal])
        };
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "removeGoal", function (index) {
      _this.setState(function (state) {
        if (index < 0 || index > state.goals.length) {
          return null;
        } else {
          var updatedGoals = toConsumableArray_default()(state.goals);

          updatedGoals.splice(index, 1);
          return {
            isTouched: true,
            goals: updatedGoals
          };
        }
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "handleSubmit", /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;

              _this.setState({
                isSubmitting: true
              });

              _context.next = 4;
              return _this.props.editCollectiveSettings({
                variables: {
                  id: _this.props.collective.id,
                  settings: CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, _this.props.collective.settings), {}, {
                    goals: _this.state.goals,
                    goalsInterpolation: _this.state.goalsInterpolation,
                    collectivePage: _this.state.collectivePage
                  })
                }
              });

            case 4:
              _this.setState({
                isSubmitting: false,
                isTouched: false,
                submitted: true
              });

              setTimeout(function () {
                return _this.setState({
                  submitted: false
                });
              }, 2000);
              _context.next = 11;
              break;

            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](0);

              _this.setState({
                isSubmitting: false,
                error: _context.t0.toString()
              });

            case 11:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 8]]);
    })));

    defineProperty_default()(assertThisInitialized_default()(_this), "renderGoal", function (goal, index) {
      var intl = _this.props.intl;

      var defaultValues = CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, goal), {}, {
        type: goal.type || _this.defaultType
      });

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mt: 4,
        pb: 4,
        borderBottom: BORDER,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
              name: _this.fields[0].name,
              label: _this.fields[0].label,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
                width: "100%",
                type: "text",
                placeholder: _this.fields[0].placeholder,
                onChange: function onChange(event) {
                  return _this.editGoal(index, _this.fields[0].name, event.target.value);
                },
                value: defaultValues[_this.fields[0].name] || ''
              })
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
              name: _this.fields[1].name,
              label: _this.fields[1].label,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
                inputId: "collective-goals-".concat(_this.fields[1].name),
                options: _this.fields[1].options,
                onChange: function onChange(obj) {
                  return _this.editGoal(index, _this.fields[1].name, obj.value);
                },
                isSearchable: false,
                defaultValue: goal.type && {
                  value: goal.type,
                  label: intl.formatMessage(_this.messages[goal.type])
                }
              })
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
              name: _this.fields[2].name,
              label: _this.fields[2].label,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputGroup/* default */.Z, {
                prepend: _this.fields[2].pre,
                type: _this.fields[2].type,
                placeholder: _this.fields[2].placeholder,
                onChange: function onChange(event) {
                  return _this.editGoal(index, _this.fields[2].name, event.target.value * 100);
                },
                value: defaultValues[_this.fields[2].name] / 100 || ''
              })
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
              name: _this.fields[3].name,
              label: _this.fields[3].label,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, {
                placeholder: _this.fields[3].placeholder,
                onChange: function onChange(event) {
                  return _this.editGoal(index, _this.fields[3].name, event.target.value);
                },
                value: defaultValues[_this.fields[3].name] || '',
                width: "100%"
              })
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          className: "goalActions",
          textAlign: "right",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            isBorderless: true,
            buttonStyle: "dangerSecondary",
            onClick: function onClick() {
              return _this.removeGoal(index);
            },
            children: intl.formatMessage(_this.messages.remove)
          })
        })]
      }, "goal-".concat(index, "-").concat(goal.key));
    });

    var _intl = props.intl,
        collective = props.collective;
    _this.state = {
      collectivePage: get_default()(collective.settings, 'collectivePage', {}),
      isTouched: false,
      error: null,
      submitting: false,
      submitted: false,
      goalsInterpolation: get_default()(collective.settings, 'goalsInterpolation', 'auto'),
      goals: sortBy_default()(get_default()(collective.settings, 'goals', []), 'amount').map(function (goal) {
        return CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, goal), {}, {
          key: goal.key || (0,v4/* default */.Z)()
        });
      })
    };
    _this.defaultType = 'yearlyBudget';
    _this.messages = (0,lib.defineMessages)({
      add: {
        id: "goal.add",
        defaultMessage: [{
          "type": 0,
          "value": "Add goal"
        }]
      },
      remove: {
        id: "Remove",
        defaultMessage: [{
          "type": 0,
          "value": "Remove"
        }]
      },
      type: {
        id: "goal.type.label",
        defaultMessage: [{
          "type": 0,
          "value": "Type"
        }]
      },
      balance: {
        id: "goal.balance.label",
        defaultMessage: [{
          "type": 0,
          "value": "Balance"
        }]
      },
      monthlyBudget: {
        id: "MonthlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Monthly budget"
        }]
      },
      yearlyBudget: {
        id: "YearlyBudget",
        defaultMessage: [{
          "type": 0,
          "value": "Yearly budget"
        }]
      },
      title: {
        id: "goal.title.label",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      },
      description: {
        id: "Fields.description",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      },
      amount: {
        id: "Fields.amount",
        defaultMessage: [{
          "type": 0,
          "value": "Amount"
        }]
      },
      showToggle: {
        id: "goal.show",
        defaultMessage: [{
          "type": 0,
          "value": "Show goals on my Profile page"
        }]
      }
    });

    var getOptions = function getOptions(arr) {
      return arr.map(function (key) {
        return {
          value: key,
          label: _intl.formatMessage(_this.messages[key])
        };
      });
    };

    _this.fields = [{
      name: 'title',
      label: _intl.formatMessage(_this.messages.title),
      placeholder: 'Please add a title to your new goal',
      maxLength: 64
    }, {
      name: 'type',
      type: 'select',
      options: getOptions(['balance', 'monthlyBudget', 'yearlyBudget']),
      label: _intl.formatMessage(_this.messages.type)
    }, {
      name: 'amount',
      pre: props.currency,
      type: 'currency',
      label: _intl.formatMessage(_this.messages.amount),
      placeholder: '0.00'
    }, {
      name: 'description',
      type: 'textarea',
      label: _intl.formatMessage(_this.messages.description),
      placeholder: 'Tell your community about your goal.'
    }];
    return _this;
  }

  createClass_default()(CollectiveGoals, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          intl = _this$props.intl,
          collective = _this$props.collective;
      var _this$state = this.state,
          goals = _this$state.goals,
          goalsInterpolation = _this$state.goalsInterpolation,
          collectivePage = _this$state.collectivePage,
          isSubmitting = _this$state.isSubmitting,
          submitted = _this$state.submitted,
          isTouched = _this$state.isTouched,
          error = _this$state.error;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          borderBottom: BORDER,
          mb: 4,
          pb: 4,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_SettingsSubtitle, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "EditGoals.Instructions",
              defaultMessage: [{
                "type": 0,
                "value": "You can define custom goals to motivate contributors and track your progress. Goals appear in automated email notifications to your contributors. You can also choose to display them on your Collective by ticking the box below."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            mt: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
              name: "show-on-collective-page",
              label: intl.formatMessage(this.messages.showToggle),
              onChange: this.toggleGoalsOnCollectivePage,
              defaultChecked: Boolean(collectivePage.showGoals)
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
            options: INTERPOLATION_OPTIONS,
            onChange: function onChange(_ref3) {
              var value = _ref3.value;
              return _this2.setState({
                goalsInterpolation: value,
                isTouched: true
              });
            },
            value: getInterpolationOption(goalsInterpolation),
            isSearchable: false
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          textAlign: "left",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            background: "rgb(245, 247, 250)",
            pt: 5,
            pb: 40,
            px: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(GoalsCover["default"], {
              collective: CollectiveGoals_objectSpread(CollectiveGoals_objectSpread({}, collective), {}, {
                settings: {
                  goals: goals
                }
              }),
              interpolation: goalsInterpolation
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            borderTop: BORDER,
            children: goals.map(this.renderGoal)
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          textAlign: "center",
          py: 4,
          mb: 4,
          borderBottom: BORDER,
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            width: "100%",
            color: "#297EFF",
            borderColor: "#297EFF",
            onClick: function onClick() {
              return _this2.addGoal();
            },
            children: [intl.formatMessage(this.messages.add), " +"]
          })
        }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "error",
          withIcon: true,
          my: 3,
          children: error
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          justifyContent: "center",
          flexWrap: "wrap",
          mt: 5,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: "/".concat(collective.slug),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              mx: 2,
              minWidth: 200,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "ViewCollectivePage",
                defaultMessage: [{
                  "type": 0,
                  "value": "View Profile page"
                }]
              })
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            onClick: this.handleSubmit,
            loading: isSubmitting,
            disabled: submitted || !isTouched,
            mx: 2,
            minWidth: 200,
            children: submitted ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "saved",
              defaultMessage: [{
                "type": 0,
                "value": "Saved"
              }]
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })]
      });
    }
  }]);

  return CollectiveGoals;
}(react.Component);

var editCollectiveSettingsMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(CollectiveGoals_templateObject || (CollectiveGoals_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {\n    editCollective(collective: { id: $id, settings: $settings }) {\n      id\n      settings\n    }\n  }\n"])));
var addEditCollectiveSettingsMutation = (0,hoc_graphql/* graphql */.B)(editCollectiveSettingsMutation, {
  name: 'editCollectiveSettings'
});
CollectiveGoals.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "editGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }, {
      "name": "fieldName",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "toggleGoalsOnCollectivePage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "{ checked }",
      "type": null
    }],
    "returns": null
  }, {
    "name": "addGoal",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "removeGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderGoal",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "goal",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CollectiveGoals",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": true
          },
          "slug": {
            "name": "string",
            "required": true
          },
          "settings": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": true
    },
    "currency": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveSettings": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "title": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_CollectiveGoals = ((0,injectIntl/* default */.ZP)(addEditCollectiveSettingsMutation(CollectiveGoals)));
// EXTERNAL MODULE: ./node_modules/lodash/capitalize.js
var capitalize = __webpack_require__(48403);
var capitalize_default = /*#__PURE__*/__webpack_require__.n(capitalize);
// EXTERNAL MODULE: ./lib/local-storage.ts
var local_storage = __webpack_require__(35427);
// EXTERNAL MODULE: ./node_modules/lodash/trim.js
var trim = __webpack_require__(92742);
var trim_default = /*#__PURE__*/__webpack_require__.n(trim);
;// CONCATENATED MODULE: ./components/edit-collective/EditPayPalAccount.js






var EditPayPalAccount_templateObject;

function EditPayPalAccount_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function EditPayPalAccount_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? EditPayPalAccount_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : EditPayPalAccount_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }















var createConnectedAccountMutation = (0,graphql_tag_lib/* default */.ZP)(EditPayPalAccount_templateObject || (EditPayPalAccount_templateObject = taggedTemplateLiteral_default()(["\n  mutation createConnectedAccount($connectedAccount: ConnectedAccountCreateInput!, $account: AccountReferenceInput!) {\n    createConnectedAccount(connectedAccount: $connectedAccount, account: $account) {\n      id\n      settings\n      service\n      createdAt\n      updatedAt\n    }\n  }\n"])));

var EditPayPalAccount = function EditPayPalAccount(props) {
  var isReceiving = props.variation === 'RECEIVING';
  var mutationOptions = {
    context: helpers/* API_V2_CONTEXT */.T,
    refetchQueries: [{
      query: queries/* editCollectivePageQuery */.cd,
      variables: {
        slug: props.collective.slug
      }
    }],
    awaitRefetchQueries: true
  };

  var _React$useState = react.useState(props.connectedAccount),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      connectedAccount = _React$useState2[0],
      setConnectedAccount = _React$useState2[1];

  var _useMutation = (0,client.useMutation)(createConnectedAccountMutation, mutationOptions),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      createConnectedAccount = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      isCreating = _useMutation2$.loading,
      createError = _useMutation2$.error;

  var formik = (0,formik_esm/* useFormik */.TA)({
    initialValues: {
      token: '',
      clientId: ''
    },
    onSubmit: function onSubmit(values) {
      return asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var _yield$createConnecte, createdAccount;

        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return createConnectedAccount({
                  variables: {
                    connectedAccount: {
                      token: trim_default()(values.token),
                      clientId: trim_default()(values.clientId),
                      service: 'paypal'
                    },
                    account: {
                      slug: props.collective.slug
                    }
                  }
                });

              case 2:
                _yield$createConnecte = _context.sent;
                createdAccount = _yield$createConnecte.data.createConnectedAccount;
                setConnectedAccount(createdAccount);

              case 5:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    validate: function validate(values) {
      var errors = {};

      if (!values.token) {
        errors.token = 'Required';
      }

      if (!values.clientId) {
        errors.clientId = 'Required';
      }

      return errors;
    }
  });

  if (!connectedAccount) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "12px",
        color: "black.700",
        fontWeight: "normal",
        mb: 3,
        children: isReceiving ? null : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.create.connectedAccounts.paypal.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a PayPal account to pay expenses with one click. ("
          }, {
            "type": 8,
            "value": "a",
            "children": [{
              "type": 0,
              "value": "Instructions"
            }]
          }, {
            "type": 0,
            "value": ")."
          }],
          values: {
            a: (0,I18nFormatters/* getI18nLink */.fw)({
              href: 'https://docs.opencollective.com/help/fiscal-hosts/payouts/payouts-with-paypal',
              openInNewTab: true
            })
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
        name: "clientId",
        label: "Client ID",
        error: formik.touched.clientId && formik.errors.clientId || (createError === null || createError === void 0 ? void 0 : createError.message),
        disabled: isCreating,
        children: function children(inputProps) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, EditPayPalAccount_objectSpread(EditPayPalAccount_objectSpread({
            type: "text"
          }, inputProps), {}, {
            onChange: formik.handleChange,
            value: formik.values.clientId,
            autoComplete: "off"
          }));
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
        mt: 2,
        name: "token",
        label: "Secret",
        error: formik.touched.token && formik.errors.token || (createError === null || createError === void 0 ? void 0 : createError.message),
        disabled: isCreating,
        children: function children(inputProps) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, EditPayPalAccount_objectSpread(EditPayPalAccount_objectSpread({
            type: "text"
          }, inputProps), {}, {
            onChange: formik.handleChange,
            value: formik.values.token,
            autoComplete: "off"
          }));
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        type: "submit",
        mt: 2,
        minWidth: 150,
        loading: isCreating,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'PayPal'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.connectedAccounts.paypal.connected",
          defaultMessage: [{
            "type": 0,
            "value": "PayPal connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.updatedAt || connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        mt: 3,
        fontStyle: "italic",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "ivhAav",
          defaultMessage: [{
            "type": 0,
            "value": "Please contact "
          }, {
            "type": 8,
            "value": "SupportLink",
            "children": [{
              "type": 0,
              "value": "support"
            }]
          }, {
            "type": 0,
            "value": " to disconnect PayPal."
          }],
          values: {
            SupportLink: I18nFormatters/* I18nSignInLink */.Kl
          }
        })
      })]
    });
  }
};

EditPayPalAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPayPalAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "variation": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_EditPayPalAccount = (EditPayPalAccount);
;// CONCATENATED MODULE: ./components/edit-collective/EditPrivacyAccount.js






var EditPrivacyAccount_templateObject, EditPrivacyAccount_templateObject2;

function EditPrivacyAccount_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function EditPrivacyAccount_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? EditPrivacyAccount_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : EditPrivacyAccount_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }














var EditPrivacyAccount_createConnectedAccountMutation = (0,graphql_tag_lib/* default */.ZP)(EditPrivacyAccount_templateObject || (EditPrivacyAccount_templateObject = taggedTemplateLiteral_default()(["\n  mutation createConnectedAccount($connectedAccount: ConnectedAccountCreateInput!, $account: AccountReferenceInput!) {\n    createConnectedAccount(connectedAccount: $connectedAccount, account: $account) {\n      id\n      settings\n      service\n      createdAt\n      updatedAt\n    }\n  }\n"])));
var deleteConnectedAccountMutation = (0,graphql_tag_lib/* default */.ZP)(EditPrivacyAccount_templateObject2 || (EditPrivacyAccount_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation deleteConnectedAccount($connectedAccount: ConnectedAccountReferenceInput!) {\n    deleteConnectedAccount(connectedAccount: $connectedAccount) {\n      id\n    }\n  }\n"])));

var EditPrivacyAccount = function EditPrivacyAccount(props) {
  var mutationOptions = {
    context: helpers/* API_V2_CONTEXT */.T,
    refetchQueries: [{
      query: queries/* editCollectivePageQuery */.cd,
      variables: {
        slug: props.collective.slug
      }
    }],
    awaitRefetchQueries: true
  };

  var _React$useState = react.useState(props.connectedAccount),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      connectedAccount = _React$useState2[0],
      setConnectedAccount = _React$useState2[1];

  var _useMutation = (0,client.useMutation)(EditPrivacyAccount_createConnectedAccountMutation, mutationOptions),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      createConnectedAccount = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      isCreating = _useMutation2$.loading,
      createError = _useMutation2$.error;

  var _useMutation3 = (0,client.useMutation)(deleteConnectedAccountMutation, mutationOptions),
      _useMutation4 = slicedToArray_default()(_useMutation3, 2),
      deleteConnectedAccount = _useMutation4[0],
      isDeleting = _useMutation4[1].loading;

  var formik = (0,formik_esm/* useFormik */.TA)({
    initialValues: {
      token: ''
    },
    onSubmit: function onSubmit(values) {
      return asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var _yield$createConnecte, createdAccount;

        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return createConnectedAccount({
                  variables: {
                    connectedAccount: {
                      token: trim_default()(values.token),
                      service: 'privacy'
                    },
                    account: {
                      slug: props.collective.slug
                    }
                  }
                });

              case 2:
                _yield$createConnecte = _context.sent;
                createdAccount = _yield$createConnecte.data.createConnectedAccount;
                setConnectedAccount(createdAccount);

              case 5:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    validate: function validate(values) {
      var errors = {};

      if (!values.token) {
        errors.token = 'Required';
      }

      return errors;
    }
  });

  var handleDelete = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return deleteConnectedAccount({
                variables: {
                  connectedAccount: {
                    legacyId: props.connectedAccount.id
                  }
                }
              });

            case 2:
              setConnectedAccount();

            case 3:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDelete() {
      return _ref.apply(this, arguments);
    };
  }();

  if (!connectedAccount) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "12px",
        color: "black.600",
        fontWeight: "normal",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.create.connectedAccounts.privacy.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a Privacy account to emit Virtual Credit Cards to your collectives."
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
        mt: 2,
        name: "token",
        label: "API Key",
        error: formik.touched.token && formik.errors.token || (createError === null || createError === void 0 ? void 0 : createError.message),
        disabled: isCreating,
        children: function children(inputProps) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, EditPrivacyAccount_objectSpread(EditPrivacyAccount_objectSpread({
            type: "text"
          }, inputProps), {}, {
            onChange: formik.handleChange,
            value: formik.values.token
          }));
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        mt: 2,
        type: "submit",
        loading: isCreating,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'Privacy'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.connectedAccounts.privacy.connected",
          defaultMessage: [{
            "type": 0,
            "value": "Privacy connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.updatedAt || connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          type: "submit",
          mt: 2,
          loading: isDeleting,
          onClick: handleDelete,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.connectedAccounts.disconnect.button",
            defaultMessage: [{
              "type": 0,
              "value": "Disconnect"
            }]
          })
        })
      })]
    });
  }
};

EditPrivacyAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPrivacyAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "variation": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_EditPrivacyAccount = (EditPrivacyAccount);
;// CONCATENATED MODULE: ./components/edit-collective/EditTransferWiseAccount.js



var EditTransferWiseAccount_excluded = ["collective"];











var EditTransferWiseAccount = function EditTransferWiseAccount(_ref) {
  var _router$query;

  var collective = _ref.collective,
      props = objectWithoutProperties_default()(_ref, EditTransferWiseAccount_excluded);

  var router = (0,next_router.useRouter)();
  var error = (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.error;

  var _React$useState = react.useState(props.connectedAccount),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      connectedAccount = _React$useState2[0],
      setConnectedAccount = _React$useState2[1];

  var handleConnect = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      var json;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return (0,api/* connectAccount */.Yn)(collective.id, 'transferwise');

            case 2:
              json = _context.sent;
              window.location.href = json.redirectUrl;

            case 4:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function handleConnect() {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleDisconnect = /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
      var json;
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return (0,api/* disconnectAccount */.DL)(collective.id, 'transferwise');

            case 2:
              json = _context2.sent;

              if (json.deleted === true) {
                setConnectedAccount(null);
              }

            case 4:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleDisconnect() {
      return _ref3.apply(this, arguments);
    };
  }();

  if (!connectedAccount) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "13px",
        color: "black.700",
        fontWeight: "normal",
        mb: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.create.connectedAccounts.transferwise.description",
          defaultMessage: [{
            "type": 0,
            "value": "Connect a Wise account to pay expenses with one click."
          }]
        })
      }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        withIcon: true,
        type: "error",
        mb: 3,
        children: error
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        mt: 2,
        type: "submit",
        onClick: handleConnect,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "C9HmCs",
          defaultMessage: [{
            "type": 0,
            "value": "Connect "
          }, {
            "type": 1,
            "value": "service"
          }],
          values: {
            service: 'Wise'
          }
        })
      })]
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.connectedAccounts.transferwise.connected",
          defaultMessage: [{
            "type": 0,
            "value": "Wise connected on "
          }, {
            "type": 3,
            "value": "updatedAt",
            "style": "short"
          }],
          values: {
            updatedAt: new Date(connectedAccount.createdAt)
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          type: "submit",
          mt: 2,
          onClick: handleDisconnect,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.connectedAccounts.disconnect.button",
            defaultMessage: [{
              "type": 0,
              "value": "Disconnect"
            }],
            buttonStyle: "dangerSecondary"
          })
        })
      })]
    });
  }
};

EditTransferWiseAccount.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditTransferWiseAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var edit_collective_EditTransferWiseAccount = (EditTransferWiseAccount);
// EXTERNAL MODULE: ./components/InputSwitch.js
var InputSwitch = __webpack_require__(96124);
;// CONCATENATED MODULE: ./components/edit-collective/EditTwitterAccount.js












var EditTwitterAccount_templateObject;



function EditTwitterAccount_createSuper(Derived) { var hasNativeReflectConstruct = EditTwitterAccount_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function EditTwitterAccount_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }













var DEFAULT_TWEETS = {
  newBacker: '{backerTwitterHandle} thank you for your contribution of {amount} 🙏 - it makes a difference!',
  tenBackers: "\uD83C\uDF89 {collective} just reached 10 financial contributors! Thank you {topBackersTwitterHandles} \uD83D\uDE4C\n  Support them too!",
  fiftyBackers: "\uD83C\uDF89 {collective} just reached 50 financial contributors!! \uD83D\uDE4C\n  Support them too!",
  oneHundred: "\uD83C\uDF89 {collective} just reached 100 financial contributors!! \uD83D\uDE4C\n  Support them too!",
  oneThousandBackers: "\uD83C\uDF89 {collective} just reached 1,000 financial contributors!!! \uD83D\uDE4C\n  Support them too!"
};

var EditTwitterAccount = /*#__PURE__*/function (_React$Component) {
  inherits_default()(EditTwitterAccount, _React$Component);

  var _super = EditTwitterAccount_createSuper(EditTwitterAccount);

  function EditTwitterAccount(props) {
    var _this;

    classCallCheck_default()(this, EditTwitterAccount);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getNotificationTypes", function () {
      var notificationTypes = [];

      if (_this.props.collective.type === 'COLLECTIVE') {
        notificationTypes.push('newBacker', 'monthlyStats', 'updatePublished');
      }

      if (_this.props.collective.isHost) {
        notificationTypes.push('tenBackers', 'oneHundredBackers', 'oneThousandBackers');
      }

      return notificationTypes;
    });

    _this.onClick = _this.onClick.bind(assertThisInitialized_default()(_this));
    _this.renderNotification = _this.renderNotification.bind(assertThisInitialized_default()(_this));
    _this.handleChange = _this.handleChange.bind(assertThisInitialized_default()(_this));
    _this.messages = (0,lib.defineMessages)({
      'newBacker.toggle.label': {
        id: "connectedAccounts.twitter.newBacker.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "New financial contributors"
        }]
      },
      'newBacker.toggle.description': {
        id: "connectedAccounts.twitter.newBacker.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever you have a new contributor that has provided a twitter username, a tweet will be sent from your connected account"
        }]
      },
      'monthlyStats.toggle.label': {
        id: "connectedAccounts.twitter.monthlyStats.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "Monthly stats"
        }]
      },
      'monthlyStats.toggle.description': {
        id: "connectedAccounts.twitter.monthlyStats.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "On the first of the month, automatically send a tweet with your latest stats (new and top contributors)"
        }]
      },
      'updatePublished.toggle.label': {
        id: "connectedAccounts.twitter.updatePublished.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "Update published"
        }]
      },
      'updatePublished.toggle.description': {
        id: "connectedAccounts.twitter.updatePublished.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Send a tweet whenever you publish an Update"
        }]
      },
      'tenBackers.toggle.label': {
        id: "connectedAccounts.twitter.tenBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "10 contributors"
        }]
      },
      'tenBackers.toggle.description': {
        id: "connectedAccounts.twitter.tenBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 10 contributors"
        }]
      },
      'oneHundredBackers.toggle.label': {
        id: "connectedAccounts.twitter.oneHundredBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "100 contributors"
        }]
      },
      'oneHundredBackers.toggle.description': {
        id: "connectedAccounts.twitter.oneHundredBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 100 contributors"
        }]
      },
      'oneThousandBackers.toggle.label': {
        id: "connectedAccounts.twitter.oneThousandBackers.toggle.label",
        defaultMessage: [{
          "type": 0,
          "value": "1,000 contributors"
        }]
      },
      'oneThousandBackers.toggle.description': {
        id: "connectedAccounts.twitter.oneThousandBackers.toggle.description",
        defaultMessage: [{
          "type": 0,
          "value": "Whenever one of the Collectives that you are Hosting reaches 1,000 contributors"
        }]
      }
    });

    var connectedAccount = cloneDeep_default()(props.connectedAccount);

    connectedAccount.settings = connectedAccount.settings || {};

    _this.getNotificationTypes().forEach(function (notificationType) {
      connectedAccount.settings[notificationType] = connectedAccount.settings[notificationType] || {
        active: false
      };
    });

    _this.state = {
      isSaving: false,
      isModified: false,
      connectedAccount: connectedAccount
    };
    return _this;
  }

  createClass_default()(EditTwitterAccount, [{
    key: "onClick",
    value: function () {
      var _onClick = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var connectedAccount;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.setState({
                  isSaving: true
                });
                _context.prev = 1;
                connectedAccount = pick_default()(this.state.connectedAccount, ['id', 'settings']);
                _context.next = 5;
                return this.props.editConnectedAccount({
                  variables: {
                    connectedAccount: connectedAccount
                  }
                });

              case 5:
                this.setState({
                  isModified: false
                });
                this.props.addToast({
                  type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                  message: 'Twitter settings updated'
                });

              case 7:
                _context.prev = 7;
                this.setState({
                  isSaving: false
                });
                return _context.finish(7);

              case 10:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[1,, 7, 10]]);
      }));

      function onClick() {
        return _onClick.apply(this, arguments);
      }

      return onClick;
    }()
  }, {
    key: "handleChange",
    value: function handleChange(notification, attr, val) {
      var connectedAccount = cloneDeep_default()(this.state.connectedAccount);

      connectedAccount.settings[notification][attr] = val;
      this.setState({
        connectedAccount: connectedAccount,
        isModified: true
      });
    }
  }, {
    key: "renderNotification",
    value: function renderNotification(notificationType) {
      var _this2 = this;

      var intl = this.props.intl;
      var connectedAccount = this.state.connectedAccount;
      var defaultTweet = DEFAULT_TWEETS[notificationType];
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        margin: "16px 0",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          alignItems: "center",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            flex: "0 1",
            flexBasis: ['100%', '25%'],
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
              htmlFor: "".concat(notificationType, ".active"),
              fontWeight: "700",
              fontSize: "14px",
              cursor: "pointer",
              children: intl.formatMessage(this.messages["".concat(notificationType, ".toggle.label")])
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputSwitch/* default */.Z, {
              id: "".concat(notificationType, ".active"),
              name: "".concat(notificationType, ".active"),
              checked: connectedAccount.settings[notificationType].active,
              onChange: function onChange(event) {
                return _this2.handleChange(notificationType, 'active', event.target.checked);
              }
            })
          })]
        }), this.messages["".concat(notificationType, ".toggle.description")] && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            flex: "0 1",
            flexBasis: [0, '25%']
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            flex: "1 1",
            flexBasis: ['100%', '75%'],
            pl: "12px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "13px",
              color: "black.600",
              children: intl.formatMessage(this.messages["".concat(notificationType, ".toggle.description")])
            })
          })]
        }), defaultTweet && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          mt: 2,
          flexWrap: "wrap",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            flex: "0 1",
            flexBasis: [0, '25%']
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            flex: "1 1",
            flexBasis: ['100%', '75%'],
            pl: "12px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, {
              maxLength: 280,
              minHeight: "100px",
              width: "100%",
              showCount: true,
              name: "".concat(notificationType, ".tweet"),
              defaultValue: connectedAccount.settings[notificationType].tweet || '',
              placeholder: defaultTweet,
              onChange: function onChange(event) {
                return _this2.handleChange(notificationType, 'tweet', event.target.value);
              }
            })
          })]
        })]
      }, notificationType);
    }
  }, {
    key: "render",
    value: function render() {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("details", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("summary", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            fontSize: "15px",
            color: "blue.500",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Settings",
              defaultMessage: [{
                "type": 0,
                "value": "Settings"
              }]
            })
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [this.getNotificationTypes().map(this.renderNotification), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexWrap: "wrap",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              width: [1, '25%']
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              width: [1, '75%'],
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                disabled: !this.state.isModified,
                buttonStyle: "primary",
                buttonSize: "small",
                onClick: this.onClick,
                loading: this.state.isSaving,
                minWidth: 100,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "save",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Save"
                  }]
                })
              })
            })]
          })]
        })]
      });
    }
  }]);

  return EditTwitterAccount;
}(react.Component);

var editConnectedAccountMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(EditTwitterAccount_templateObject || (EditTwitterAccount_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditConnectedAccount($connectedAccount: ConnectedAccountInputType!) {\n    editConnectedAccount(connectedAccount: $connectedAccount) {\n      id\n      settings\n    }\n  }\n"])));
var addEditConnectedAccountMutation = (0,hoc_graphql/* graphql */.B)(editConnectedAccountMutation, {
  name: 'editConnectedAccount'
});
EditTwitterAccount.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getNotificationTypes",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onClick",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "notification",
      "type": null
    }, {
      "name": "attr",
      "type": null
    }, {
      "name": "val",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderNotification",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "notificationType",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "EditTwitterAccount",
  "props": {
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editConnectedAccount": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addToast": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var edit_collective_EditTwitterAccount = ((0,injectIntl/* default */.ZP)(addEditConnectedAccountMutation((0,ToastProvider/* withToasts */.CP)(EditTwitterAccount))));
;// CONCATENATED MODULE: ./components/edit-collective/EditConnectedAccount.js








function EditConnectedAccount_createSuper(Derived) { var hasNativeReflectConstruct = EditConnectedAccount_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function EditConnectedAccount_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var EditConnectedAccount = /*#__PURE__*/function (_React$Component) {
  inherits_default()(EditConnectedAccount, _React$Component);

  var _super = EditConnectedAccount_createSuper(EditConnectedAccount);

  function EditConnectedAccount(props) {
    var _this;

    classCallCheck_default()(this, EditConnectedAccount);

    _this = _super.call(this, props);
    _this.state = {
      editMode: props.editMode || false,
      connectedAccount: props.connectedAccount
    };
    _this.connect = _this.connect.bind(assertThisInitialized_default()(_this));
    _this.disconnect = _this.disconnect.bind(assertThisInitialized_default()(_this));
    _this.messages = (0,lib.defineMessages)({
      'collective.connectedAccounts.reconnect.button': {
        id: "collective.connectedAccounts.reconnect.button",
        defaultMessage: [{
          "type": 0,
          "value": "Reconnect"
        }]
      },
      'collective.connectedAccounts.disconnect.button': {
        id: "collective.connectedAccounts.disconnect.button",
        defaultMessage: [{
          "type": 0,
          "value": "Disconnect"
        }]
      },
      'collective.connectedAccounts.stripe.description': {
        id: "collective.create.connectedAccounts.stripe.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a Stripe account to start accepting financial contributions."
        }]
      },
      'collective.connectedAccounts.stripe.connected': {
        id: "collective.connectedAccounts.stripe.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Stripe account connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      },
      'collective.connectedAccounts.twitter.description': {
        id: "collective.connectedAccounts.twitter.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a Twitter account to automatically thank new financial contributors"
        }]
      },
      'collective.connectedAccounts.twitter.connected': {
        id: "collective.connectedAccounts.twitter.connected",
        defaultMessage: [{
          "type": 0,
          "value": "Twitter account @"
        }, {
          "type": 1,
          "value": "username"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      },
      'collective.connectedAccounts.github.description': {
        id: "collective.connectedAccounts.github.description",
        defaultMessage: [{
          "type": 0,
          "value": "Connect a GitHub account to verify your identity and add it to your profile"
        }]
      },
      'collective.connectedAccounts.github.connected': {
        id: "collective.connectedAccounts.github.connected",
        defaultMessage: [{
          "type": 0,
          "value": "GitHub account "
        }, {
          "type": 1,
          "value": "username"
        }, {
          "type": 0,
          "value": " connected on "
        }, {
          "type": 3,
          "value": "updatedAt",
          "style": "short"
        }]
      }
    });
    _this.services = ['stripe', 'paypal', 'twitter', 'github', 'transferwise', 'privacy'];
    return _this;
  }

  createClass_default()(EditConnectedAccount, [{
    key: "connect",
    value: function connect(service) {
      var _this$props = this.props,
          collective = _this$props.collective,
          options = _this$props.options;

      if (service === 'github' || service === 'twitter') {
        var redirectUrl = "".concat((0,utils/* getWebsiteUrl */.ls)(), "/api/connected-accounts/").concat(service, "/oauthUrl");
        var redirectUrlParams = new URLSearchParams({
          CollectiveId: collective.id
        });
        var accessToken = (0,local_storage/* getFromLocalStorage */.fp)(local_storage/* LOCAL_STORAGE_KEYS.ACCESS_TOKEN */.dA.ACCESS_TOKEN);

        if (accessToken) {
          redirectUrlParams.set('access_token', accessToken); // eslint-disable-line camelcase
        }

        window.location.href = "".concat(redirectUrl, "?").concat(redirectUrlParams.toString());
        return;
      }

      (0,api/* connectAccount */.Yn)(collective.id, service, options).then(function (json) {
        return window.location.href = json.redirectUrl;
      })["catch"](function (err) {
        // TODO: this should be reported to the user
        // eslint-disable-next-line no-console
        console.error(">>> /api/connected-accounts/".concat(service, " error"), err);
      });
    }
  }, {
    key: "disconnect",
    value: function disconnect(service) {
      var _this2 = this;

      var collective = this.props.collective;
      (0,api/* disconnectAccount */.DL)(collective.id, service).then(function (json) {
        if (json.deleted === true) {
          _this2.setState({
            connectedAccount: null
          });
        }
      })["catch"](function (err) {
        // TODO: this should be reported to the user
        // eslint-disable-next-line no-console
        console.error(">>> /api/connected-accounts/".concat(service, "/disconnect error"), err);
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var _this$props2 = this.props,
          intl = _this$props2.intl,
          service = _this$props2.service,
          collective = _this$props2.collective,
          variation = _this$props2.variation;
      var connectedAccount = this.state.connectedAccount;
      var vars = {};

      if (connectedAccount) {
        vars = {
          username: connectedAccount.username,
          updatedAt: new Date(connectedAccount.updatedAt)
        };
      }

      if (service === 'transferwise') {
        // Notice we're passing props.connectedAccount to EditTransferWiseAccount
        // This happens because the component will take care of refetching data from
        // the DB to make sure it is displaying accurate information.
        return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditTransferWiseAccount, {
          collective: collective,
          connectedAccount: this.props.connectedAccount,
          intl: intl
        });
      } else if (service === 'paypal') {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditPayPalAccount, {
          collective: collective,
          connectedAccount: this.props.connectedAccount,
          variation: variation,
          intl: intl
        });
      } else if (service === 'privacy') {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditPrivacyAccount, {
          collective: collective,
          connectedAccount: this.props.connectedAccount,
          intl: intl
        });
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        width: "100%",
        children: [!connectedAccount && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "12px",
            color: "black.600",
            fontWeight: "normal",
            mb: 2,
            children: intl.formatMessage(this.messages["collective.connectedAccounts.".concat(service, ".description")])
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            "data-cy": "connect-".concat(service, "-button"),
            buttonSize: "small",
            onClick: function onClick() {
              return _this3.connect(service);
            },
            mb: 2,
            children: intl.formatMessage({
              id: "C9HmCs",
              defaultMessage: [{
                "type": 0,
                "value": "Connect "
              }, {
                "type": 1,
                "value": "service"
              }]
            }, {
              service: capitalize_default()(service)
            })
          })]
        }), connectedAccount && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          width: "100%",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            children: intl.formatMessage(this.messages["collective.connectedAccounts.".concat(service, ".connected")], vars)
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            mt: 1,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonSize: "small",
              onClick: function onClick() {
                return _this3.connect(service);
              },
              children: intl.formatMessage(this.messages['collective.connectedAccounts.reconnect.button'])
            }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonSize: "small",
              onClick: function onClick() {
                return _this3.disconnect(service);
              },
              children: intl.formatMessage(this.messages['collective.connectedAccounts.disconnect.button'])
            })]
          }), connectedAccount.service === 'twitter' && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            my: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditTwitterAccount, {
              collective: collective,
              connectedAccount: connectedAccount
            })
          })]
        })]
      });
    }
  }]);

  return EditConnectedAccount;
}(react.Component);

EditConnectedAccount.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "connect",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }],
    "returns": null
  }, {
    "name": "disconnect",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "service",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "EditConnectedAccount",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "connectedAccounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "options": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "editMode": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "service": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "connectedAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "variation": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_EditConnectedAccount = ((0,injectIntl/* default */.ZP)(EditConnectedAccount));
;// CONCATENATED MODULE: ./components/edit-collective/sections/ConnectedAccounts.js












var TITLE_OVERRIDE = {
  transferwise: 'Wise'
};

var ConnectedAccounts = function ConnectedAccounts(props) {
  var connectedAccountsByService = groupBy_default()(props.connectedAccounts, 'service');

  var services = [];

  if (props.services) {
    services = [].concat(toConsumableArray_default()(props.services), toConsumableArray_default()(services));
  } else {
    if (props.collective.type === 'COLLECTIVE' || props.collective.isHost) {
      services.push('twitter');
    }
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    className: "EditConnectedAccounts",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mb: 4,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "5thSOv",
        defaultMessage: [{
          "type": 0,
          "value": "See "
        }, {
          "type": 8,
          "value": "Link",
          "children": [{
            "type": 0,
            "value": "the documentation"
          }]
        }, {
          "type": 0,
          "value": " to learn more about Connected Accounts."
        }],
        values: {
          Link: (0,I18nFormatters/* getI18nLink */.fw)({
            href: 'https://docs.opencollective.com/help/fiscal-hosts/fiscal-host-settings/connected-accounts',
            openInNewTab: true
          })
        }
      })
    }), services.map(function (service) {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        mb: 4,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          children: TITLE_OVERRIDE[service] || (0,utils/* capitalize */.kC)(service)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditConnectedAccount, {
          collective: props.collective,
          service: service,
          connectedAccount: connectedAccountsByService[service] && connectedAccountsByService[service][0],
          variation: props.variation
        })]
      }, "connect-".concat(service));
    })]
  });
};

ConnectedAccounts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ConnectedAccounts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "connectedAccounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "editMode": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "services": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "variation": {
      "description": "",
      "type": {
        "name": "enum",
        "value": [{
          "value": "'SENDING'",
          "computed": false
        }, {
          "value": "'RECEIVING'",
          "computed": false
        }]
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_ConnectedAccounts = (ConnectedAccounts);
;// CONCATENATED MODULE: ./components/PreviewModal.js







/*
 * A image preview modal that can be used to display a preview image for a
 * an Email Template or an Invoice Receipt.
 */




var PreviewModal = function PreviewModal(_ref) {
  var previewImage = _ref.previewImage,
      heading = _ref.heading,
      subheading = _ref.subheading,
      imgHeight = _ref.imgHeight,
      imgWidth = _ref.imgWidth,
      onClose = _ref.onClose;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
    onClose: onClose,
    trapFocus: true,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
      children: heading
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
      mb: 0,
      children: [subheading && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        pt: "6px",
        pb: "32px",
        fontSize: "14px",
        fontWeight: 400,
        lineHeight: "20px",
        color: "black.700",
        children: subheading
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
        src: previewImage,
        alt: "Position of custom message",
        height: imgHeight,
        width: imgWidth
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        display: "flex",
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "secondary",
          onClick: onClose,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Close",
            defaultMessage: [{
              "type": 0,
              "value": "Close"
            }]
          })
        })
      })
    })]
  });
};

PreviewModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PreviewModal",
  "props": {
    "previewImage": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "heading": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "element"
        }]
      },
      "required": true
    },
    "subheading": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "element"
        }]
      },
      "required": false
    },
    "imgHeight": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": true
    },
    "imgWidth": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_PreviewModal = (PreviewModal);
// EXTERNAL MODULE: ./components/RichTextEditor.js
var RichTextEditor = __webpack_require__(59139);
;// CONCATENATED MODULE: ./components/edit-collective/sections/CustomMessage.js




var CustomMessage_templateObject;


















var updateCustomMessageMutation = (0,graphql_tag_lib/* default */.ZP)(CustomMessage_templateObject || (CustomMessage_templateObject = taggedTemplateLiteral_default()(["\n  mutation UpdateCustomMessage($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      type\n      isActive\n      settings\n    }\n  }\n"])));

var CustomMessage = function CustomMessage(_ref) {
  var _collective$settings, _collective$parentCol, _collective$parentCol2;

  var collective = _ref.collective;
  var thankYouMessage = (collective === null || collective === void 0 ? void 0 : (_collective$settings = collective.settings) === null || _collective$settings === void 0 ? void 0 : _collective$settings.customEmailMessage) || (collective === null || collective === void 0 ? void 0 : (_collective$parentCol = collective.parentCollective) === null || _collective$parentCol === void 0 ? void 0 : (_collective$parentCol2 = _collective$parentCol.settings) === null || _collective$parentCol2 === void 0 ? void 0 : _collective$parentCol2.customEmailMessage);

  var _useState = (0,react.useState)(thankYouMessage),
      customMessage = _useState[0],
      setCustomMessage = _useState[1];

  var _useState2 = (0,react.useState)(false),
      isModified = _useState2[0],
      setIsModified = _useState2[1];

  var _useState3 = (0,react.useState)(false),
      showPreview = _useState3[0],
      setShowPreview = _useState3[1];

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useMutation = (0,client.useMutation)(updateCustomMessageMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    onError: function onError(e) {
      addToast({
        type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
        message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "DVdz90",
          defaultMessage: [{
            "type": 0,
            "value": "Error updating custom email message: "
          }, {
            "type": 1,
            "value": "error"
          }],
          values: {
            error: e.message
          }
        })
      });
    },
    onCompleted: function onCompleted() {
      addToast({
        type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
        message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "PoJg0R",
          defaultMessage: [{
            "type": 0,
            "value": "Email message updated"
          }]
        })
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      updateCustomEmailMessage = _useMutation2[0],
      loading = _useMutation2[1].loading;

  var handleSubmit = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(message) {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return updateCustomEmailMessage({
                variables: {
                  account: {
                    legacyId: collective.id
                  },
                  key: 'customEmailMessage',
                  value: message || ''
                }
              });

            case 2:
              setIsModified(false);

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function handleSubmit(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var _onChange = /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(value) {
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              setCustomMessage(value);
              setIsModified(true);

            case 2:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function onChange(_x2) {
      return _ref3.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "14px",
      fontWeight: 400,
      lineHeight: "20ppx",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "jRacqf",
        defaultMessage: [{
          "type": 0,
          "value": "Add a custom message to be included in the email sent to financial contributors of your Collective, Project, or Event."
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      mt: "32px",
      mb: "34px",
      borderStyle: "dotted"
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
      maxWidth: "1000px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        justifyContent: "space-between",
        flexDirection: ['column', 'row'],
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 2,
          fontSize: "18px",
          fontWeight: 700,
          lineHeight: "26px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "+jDZdn",
            defaultMessage: [{
              "type": 0,
              "value": "Custom Message"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "secondary",
          buttonSize: "tiny",
          maxWidth: "78px",
          pt: "4px",
          pb: "4px",
          pl: "14px",
          pr: "14px",
          height: "24px",
          onClick: function onClick() {
            return setShowPreview(true);
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            fontSize: "13px",
            fontWeight: 500,
            lineHeight: "16px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "TJo5E6",
              defaultMessage: [{
                "type": 0,
                "value": "Preview"
              }]
            })
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(RichTextEditor["default"], {
        kind: "ACCOUNT_CUSTOM_EMAIL",
        inputName: "message",
        onChange: function onChange(e) {
          return _onChange(e.target.value);
        },
        defaultValue: customMessage,
        withBorders: true,
        editorMinHeight: "150px",
        maxLength: 500,
        showCount: true
      })]
    }), [constants_collectives/* CollectiveType.EVENT */.eV.EVENT, constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT].includes(collective.type) ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      mt: "24px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "13px",
        fontWeight: 400,
        lineHeight: "20px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "l/qt37",
          defaultMessage: [{
            "type": 0,
            "value": "The above text will override the customized message set by the parent Collective of this Event or Project."
          }]
        })
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "info",
      mt: "24px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "13px",
        fontWeight: 400,
        lineHeight: "20px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "4L4QX2",
          defaultMessage: [{
            "type": 0,
            "value": "The above text will be considered as the default customized email response for all contributions to your Collective, and all of your Events and Projects. You also have the ability to customize the messages for Events & Projects from within their individual Setting's Menus."
          }]
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      justifyContent: ['center', 'left'],
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        disabled: loading || !isModified,
        mt: "35px",
        buttonStyle: "primary",
        width: "157px",
        onClick: function onClick() {
          return handleSubmit(customMessage);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "save",
          defaultMessage: [{
            "type": 0,
            "value": "Save"
          }]
        })
      })
    }), showPreview && /*#__PURE__*/(0,jsx_runtime.jsx)(components_PreviewModal, {
      heading: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "XvKF/A",
        defaultMessage: [{
          "type": 0,
          "value": "Preview Notification"
        }]
      }),
      subheading: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "cka+9I",
        defaultMessage: [{
          "type": 0,
          "value": "This is the preview of the email template which your financial contributor will receive."
        }]
      }),
      onClose: function onClose() {
        return setShowPreview(false);
      },
      previewImage: "/static/images/custom-email-preview.png",
      imgHeight: "715px",
      imgWidth: "809px"
    })]
  });
};

CustomMessage.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CustomMessage",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "settings": {
            "name": "shape",
            "value": {
              "customEmailMessage": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "parentCollective": {
            "name": "shape",
            "value": {
              "settings": {
                "name": "shape",
                "value": {
                  "customEmailMessage": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "isInheritSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_CustomMessage = (CustomMessage);
// EXTERNAL MODULE: ./node_modules/lodash/isEqual.js
var isEqual = __webpack_require__(18446);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual);
// EXTERNAL MODULE: ./node_modules/lodash/flatten.js
var flatten = __webpack_require__(85564);
var flatten_default = /*#__PURE__*/__webpack_require__.n(flatten);
// EXTERNAL MODULE: ./node_modules/@dnd-kit/core/dist/core.esm.js + 1 modules
var core_esm = __webpack_require__(60887);
// EXTERNAL MODULE: ./node_modules/@dnd-kit/sortable/dist/sortable.esm.js
var sortable_esm = __webpack_require__(45587);
// EXTERNAL MODULE: ./node_modules/@dnd-kit/utilities/dist/utilities.esm.js
var utilities_esm = __webpack_require__(24285);
// EXTERNAL MODULE: ./node_modules/@styled-icons/fa-solid/InfoCircle/InfoCircle.esm.js
var InfoCircle_InfoCircle_esm = __webpack_require__(5590);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/DragIndicator/DragIndicator.esm.js
var DragIndicator_esm = __webpack_require__(93619);
// EXTERNAL MODULE: ./lib/collective-sections.js
var collective_sections = __webpack_require__(64453);
// EXTERNAL MODULE: ./lib/i18n/navbar-categories.js
var navbar_categories = __webpack_require__(86971);
// EXTERNAL MODULE: ./lib/i18n-collective-page-section.js
var i18n_collective_page_section = __webpack_require__(42994);
// EXTERNAL MODULE: ./components/collective-page/_constants.js
var _constants = __webpack_require__(24839);
// EXTERNAL MODULE: ./components/faqs/FAQ.js
var FAQ = __webpack_require__(99849);
;// CONCATENATED MODULE: ./components/faqs/EditCollectivePageFAQ.js


var EditCollectivePageFAQ_excluded = ["defaultOpen"];

function EditCollectivePageFAQ_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function EditCollectivePageFAQ_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? EditCollectivePageFAQ_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : EditCollectivePageFAQ_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }







var EditCollectivePageFAQ = function EditCollectivePageFAQ(_ref) {
  var defaultOpen = _ref.defaultOpen,
      props = objectWithoutProperties_default()(_ref, EditCollectivePageFAQ_excluded);

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(FAQ/* default */.ZP, EditCollectivePageFAQ_objectSpread(EditCollectivePageFAQ_objectSpread({}, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(FAQ/* Entry */.kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Title */.Dx, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.Data",
          defaultMessage: [{
            "type": 0,
            "value": "If I disable a section will its content be deleted?"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Content */.VY, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.DataDetails",
          defaultMessage: [{
            "type": 0,
            "value": "No, your data is preserved when you disable a section. You can re-enable it any time."
          }]
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FAQ/* Entry */.kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Title */.Dx, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.EditHidden",
          defaultMessage: [{
            "type": 0,
            "value": "Can I edit a disabled section?"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Content */.VY, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.EditHiddenDetails",
          defaultMessage: [{
            "type": 0,
            "value": "No. To edit a section, you need to make it to visible."
          }]
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FAQ/* Entry */.kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Title */.Dx, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.Publish",
          defaultMessage: [{
            "type": 0,
            "value": "When will changes be published?"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Content */.VY, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.PublishDetails",
          defaultMessage: [{
            "type": 0,
            "value": "As soon as you click \"Save\"."
          }]
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(FAQ/* Entry */.kS, {
      open: defaultOpen,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Title */.Dx, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.HideBudget",
          defaultMessage: [{
            "type": 0,
            "value": "Why can't I hide my budget section?"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(FAQ/* Content */.VY, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePageFAQ.HideBudgetDetails",
          defaultMessage: [{
            "type": 0,
            "value": "Open Collective is all about transparency, and visibility of the budget section is a key part of that."
          }]
        })
      })]
    })]
  }));
};

EditCollectivePageFAQ.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditCollectivePageFAQ",
  "props": {
    "defaultOpen": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var faqs_EditCollectivePageFAQ = (EditCollectivePageFAQ);
;// CONCATENATED MODULE: ./components/edit-collective/mutations.js


var mutations_templateObject, mutations_templateObject2;



var mutations_editCollectiveSettingsMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(mutations_templateObject || (mutations_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {\n    editCollective(collective: { id: $id, settings: $settings }) {\n      id\n      settings\n    }\n  }\n"])));
var mutations_editAccountSettingsMutation = (0,graphql_tag_lib/* default */.ZP)(mutations_templateObject2 || (mutations_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditAccountSetting($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      settings\n    }\n  }\n"])));
;// CONCATENATED MODULE: ./components/edit-collective/sections/EditCollectivePage.js











var EditCollectivePage_templateObject, EditCollectivePage_templateObject2;



function EditCollectivePage_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function EditCollectivePage_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? EditCollectivePage_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : EditCollectivePage_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

































var getSettingsQuery = (0,graphql_tag_lib/* default */.ZP)(EditCollectivePage_templateObject || (EditCollectivePage_templateObject = taggedTemplateLiteral_default()(["\n  query GetSettingsForEditCollectivePage($slug: String!) {\n    account(slug: $slug) {\n      id\n      type\n      currency\n      isActive\n      isHost\n      settings\n      policies {\n        EXPENSE_AUTHOR_CANNOT_APPROVE {\n          enabled\n          amountInCents\n          appliesToHostedCollectives\n          appliesToSingleAdminCollectives\n        }\n        COLLECTIVE_MINIMUM_ADMINS {\n          numberOfAdmins\n          applies\n          freeze\n        }\n      }\n      ... on AccountWithHost {\n        host {\n          id\n          policies {\n            EXPENSE_AUTHOR_CANNOT_APPROVE {\n              enabled\n              amountInCents\n              appliesToHostedCollectives\n              appliesToSingleAdminCollectives\n            }\n          }\n        }\n      }\n    }\n  }\n"])));
var collectiveSettingsV1Query = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(EditCollectivePage_templateObject2 || (EditCollectivePage_templateObject2 = taggedTemplateLiteral_default()(["\n  query EditCollectivePage($slug: String) {\n    Collective(slug: $slug) {\n      id\n      settings\n    }\n  }\n"])));
var ItemContainer = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "EditCollectivePage__ItemContainer",
  componentId: "sc-jg1dbu-0"
})(["", " background:", ";", ""], function (props) {
  return props.isDragging && (0,styled_components_browser_esm/* css */.iv)(["border-color:#99c9ff;background:#f0f8ff;& > *{opacity:0;}"]);
}, function (props) {
  return props.isDragging ? '#f0f8ff' : !props.isDragOverlay ? 'transparent' : props.isSubSection ? props.theme.colors.black[100] : 'white';
}, function (props) {
  return props.isDragOverlay && (0,styled_components_browser_esm/* css */.iv)(["box-shadow:0px 4px 6px rgba(26,27,31,0.16);"]);
});

var CollectiveSectionEntry = function CollectiveSectionEntry(_ref) {
  var isEnabled = _ref.isEnabled,
      version = _ref.version,
      restrictedTo = _ref.restrictedTo,
      section = _ref.section,
      onSectionToggle = _ref.onSectionToggle,
      collectiveType = _ref.collectiveType,
      isSubSection = _ref.isSubSection,
      hasData = _ref.hasData,
      showMissingDataWarning = _ref.showMissingDataWarning,
      showDragIcon = _ref.showDragIcon,
      dragHandleProps = _ref.dragHandleProps;
  var intl = (0,useIntl/* default */.Z)();
  var options = [{
    label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "EditCollectivePage.ShowSection.AlwaysVisible",
      defaultMessage: [{
        "type": 0,
        "value": "Always visible"
      }]
    }),
    value: 'ALWAYS'
  }, {
    label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "EditCollectivePage.ShowSection.OnlyAdmins",
      defaultMessage: [{
        "type": 0,
        "value": "Only for admins"
      }]
    }),
    value: 'ADMIN'
  }, {
    label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "tthToS",
      defaultMessage: [{
        "type": 0,
        "value": "Disabled"
      }]
    }),
    value: 'DISABLED'
  }]; // Remove the "Only for admins" option if it's not a FUND or PROJECT
  // That can be re-considered later

  if (collectiveType !== constants_collectives/* CollectiveType.FUND */.eV.FUND && collectiveType !== constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT) {
    options = options.filter(function (_ref2) {
      var value = _ref2.value;
      return value !== 'ADMIN';
    });
  } // Can't hide the budget, except if already hidden


  if (section === 'budget') {
    if (isEnabled && !isEqual_default()(restrictedTo, ['ADMIN'])) {
      options = options.filter(function (_ref3) {
        var value = _ref3.value;
        return value !== 'ADMIN' && value !== 'DISABLED';
      });
    } // New budget version not available for


    if (collectiveType !== constants_collectives/* CollectiveType.USER */.eV.USER) {
      options.push({
        label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "EditCollectivePage.ShowSection.AlwaysVisibleV2",
          defaultMessage: [{
            "type": 0,
            "value": "New version visible"
          }]
        }),
        value: 'ALWAYS_V2'
      });
    }
  }

  var defaultValue;

  if (!isEnabled) {
    defaultValue = options.find(function (_ref4) {
      var value = _ref4.value;
      return value === 'DISABLED';
    });
  } else if (restrictedTo && restrictedTo.includes('ADMIN')) {
    defaultValue = options.find(function (_ref5) {
      var value = _ref5.value;
      return value === 'ADMIN';
    });
  } else if (version === 2) {
    defaultValue = options.find(function (_ref6) {
      var value = _ref6.value;
      return value === 'ALWAYS_V2';
    });
  } else {
    defaultValue = options.find(function (_ref7) {
      var value = _ref7.value;
      return value === 'ALWAYS';
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    justifyContent: "space-between",
    alignItems: "center",
    padding: "4px 16px",
    children: [showDragIcon && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({
      mr: 3,
      cursor: "move"
    }, dragHandleProps), {}, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(DragIndicator_esm/* DragIndicator */.N, {
        size: 14
      })
    })), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledP, {
      letterSpacing: isSubSection ? undefined : 0,
      fontSize: "14px",
      fontWeight: isSubSection ? '500' : '700',
      children: (0,i18n_collective_page_section/* default */.Z)(intl, section)
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
      inputId: "section-select-".concat(section),
      fontSize: "11px",
      name: "show-section-".concat(section),
      defaultValue: defaultValue,
      options: options,
      minWidth: 150,
      isSearchable: false,
      onChange: function onChange(_ref8) {
        var value = _ref8.value;
        var isEnabled = value !== 'DISABLED' || value === 'ALWAYS_V2';
        var restrictedTo = value === 'ADMIN' ? ['ADMIN'] : [];
        var version = value === 'ALWAYS_V2' ? 2 : 1;
        onSectionToggle(section, {
          isEnabled: isEnabled,
          restrictedTo: restrictedTo,
          version: version
        });
      },
      formatOptionLabel: function formatOptionLabel(option) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          fontSize: "11px",
          children: option.label
        });
      }
    }), showMissingDataWarning && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      width: 16,
      ml: 2,
      children: !hasData && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
        content: function content() {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "EditCollectivePage.EmptySection",
            defaultMessage: [{
              "type": 0,
              "value": "This section does not appear to have any associated data and will not appear publicly until it does."
            }]
          });
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(InfoCircle_InfoCircle_esm/* InfoCircle */.Z, {
          size: 16
        })
      })
    })]
  });
};

var MenuCategory = function MenuCategory(_ref9) {
  var _item$sections, _item$sections2;

  var item = _ref9.item,
      collective = _ref9.collective,
      onSectionToggle = _ref9.onSectionToggle,
      setSubSections = _ref9.setSubSections,
      dragHandleProps = _ref9.dragHandleProps;
  var intl = (0,useIntl/* default */.Z)();

  var _React$useState = react.useState(null),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      draggingId = _React$useState2[0],
      setDraggingId = _React$useState2[1];

  function handleDragStart(event) {
    setDraggingId(event.active.id);
  }

  function handleDragEnd(event) {
    var active = event.active,
        over = event.over;
    setDraggingId(null);

    if (active.id !== over.id) {
      var oldSubsections = item.sections;
      var oldIndex = oldSubsections.findIndex(function (item) {
        return item.name === active.id;
      });
      var newIndex = oldSubsections.findIndex(function (item) {
        return item.name === over.id;
      });
      var newSections = (0,sortable_esm/* arrayMove */.Rp)(oldSubsections, oldIndex, newIndex);
      setSubSections(newSections);
    }
  }

  var draggingItem = item.sections.find(function (item) {
    return item.name === draggingId;
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
      display: "flex",
      px: 3,
      py: "10px",
      fontSize: "14px",
      fontWeight: "bold",
      boxShadow: "0 3px 4px 0px #6b6b6b38",
      alignItems: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({
        display: "inline-block",
        mr: 3,
        cursor: "move"
      }, dragHandleProps), {}, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(DragIndicator_esm/* DragIndicator */.N, {
          size: 14
        })
      })), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        children: (0,navbar_categories/* default */.Z)(intl, item.name)
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(core_esm/* DndContext */.LB, {
        collisionDetection: core_esm/* closestCenter */.pE,
        onDragStart: handleDragStart,
        onDragEnd: handleDragEnd,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sortable_esm/* SortableContext */.Fo, {
          items: (_item$sections = item.sections) === null || _item$sections === void 0 ? void 0 : _item$sections.map(function (item) {
            return item.name;
          }),
          strategy: sortable_esm/* verticalListSortingStrategy */.qw,
          children: (_item$sections2 = item.sections) === null || _item$sections2 === void 0 ? void 0 : _item$sections2.map(function (section) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
              pl: 1,
              borderLeft: "8px solid",
              borderColor: "black.200",
              bg: "black.100",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(DraggableItem, {
                id: section.name,
                item: section,
                collective: collective,
                onSectionToggle: onSectionToggle,
                showDragIcon: item.sections.length > 1,
                isSubSection: true
              })
            }, section.name);
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(core_esm/* DragOverlay */.y9, {
          children: draggingItem ? /*#__PURE__*/(0,jsx_runtime.jsx)(Item, {
            item: draggingItem,
            collective: collective,
            showDragIcon: true,
            isDragOverlay: true,
            isSubSection: true
          }) : null
        })]
      })
    })]
  });
};

var Item = /*#__PURE__*/react.forwardRef(function (_ref10, ref) {
  var dragHandleProps = _ref10.dragHandleProps,
      isDragging = _ref10.isDragging,
      isDragOverlay = _ref10.isDragOverlay,
      style = _ref10.style,
      setSubSections = _ref10.setSubSections,
      onSectionToggle = _ref10.onSectionToggle,
      collective = _ref10.collective,
      item = _ref10.item,
      isSubSection = _ref10.isSubSection,
      showDragIcon = _ref10.showDragIcon;
  return /*#__PURE__*/(0,jsx_runtime.jsx)(ItemContainer, {
    ref: ref,
    style: style,
    isDragging: isDragging,
    isDragOverlay: isDragOverlay,
    isSubSection: isSubSection,
    children: item.type === 'CATEGORY' ? /*#__PURE__*/(0,jsx_runtime.jsx)(MenuCategory, {
      item: item,
      collective: collective,
      onSectionToggle: onSectionToggle,
      setSubSections: setSubSections,
      dragHandleProps: dragHandleProps
    }) : item.type === 'SECTION' ? /*#__PURE__*/(0,jsx_runtime.jsx)(CollectiveSectionEntry, {
      section: item.name,
      isEnabled: item.isEnabled,
      version: item.version,
      collectiveType: collective.type,
      restrictedTo: item.restrictedTo,
      onSectionToggle: onSectionToggle,
      isSubSection: isSubSection,
      showDragIcon: showDragIcon,
      dragHandleProps: dragHandleProps
    }) : null
  });
});
Item.displayName = 'Item';
var MemoizedItem = /*#__PURE__*/(0,react.memo)(Item);

var DraggableItem = function DraggableItem(props) {
  var _useSortable = (0,sortable_esm/* useSortable */.nB)({
    id: props.id
  }),
      attributes = _useSortable.attributes,
      listeners = _useSortable.listeners,
      isDragging = _useSortable.isDragging,
      setNodeRef = _useSortable.setNodeRef,
      transform = _useSortable.transform,
      transition = _useSortable.transition;

  var style = {
    transform: utilities_esm/* CSS.Transform.toString */.ux.Transform.toString(transform),
    transition: transition
  };
  return /*#__PURE__*/(0,jsx_runtime.jsx)(MemoizedItem, EditCollectivePage_objectSpread({
    ref: setNodeRef,
    style: style,
    dragHandleProps: EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({}, attributes), listeners),
    isDragging: isDragging
  }, props));
};

var EditCollectivePage = function EditCollectivePage(_ref11) {
  var collective = _ref11.collective;
  var intl = (0,useIntl/* default */.Z)();

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      isDirty = _React$useState4[0],
      setDirty = _React$useState4[1];

  var _React$useState5 = react.useState([]),
      _React$useState6 = slicedToArray_default()(_React$useState5, 2),
      sections = _React$useState6[0],
      setSections = _React$useState6[1];

  var _React$useState7 = react.useState(null),
      _React$useState8 = slicedToArray_default()(_React$useState7, 2),
      draggingId = _React$useState8[0],
      setDraggingId = _React$useState8[1];

  var _useQuery = (0,client.useQuery)(getSettingsQuery, {
    variables: {
      slug: collective.slug
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      loading = _useQuery.loading,
      data = _useQuery.data;

  var _useMutation = (0,client.useMutation)(mutations_editAccountSettingsMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    // Refresh the settings for GQLV1 cache, to refresh the navbar
    refetchQueries: [{
      query: collectiveSettingsV1Query,
      variables: {
        slug: collective.slug
      }
    }]
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      submitSetting = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      isSubmitting = _useMutation2$.loading,
      error = _useMutation2$.error; // Load sections from fetched collective


  react.useEffect(function () {
    if (data !== null && data !== void 0 && data.account) {
      var _sections = (0,collective_sections/* getCollectiveSections */.t4)(data.account);

      setSections(_sections);
    }
  }, [data === null || data === void 0 ? void 0 : data.account]);

  var onSectionToggle = function onSectionToggle(selectedSection, _ref12) {
    var isEnabled = _ref12.isEnabled,
        restrictedTo = _ref12.restrictedTo,
        version = _ref12.version;

    var newSections = cloneDeep_default()(sections);

    var sectionPath = (0,collective_sections/* getSectionPath */.YH)(sections, selectedSection);

    set_default()(newSections, "".concat(sectionPath), EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({}, get_default()(newSections, sectionPath)), {}, {
      isEnabled: isEnabled,
      restrictedTo: restrictedTo,
      version: version
    }));

    setSections(newSections);
    setDirty(true);
  };

  function handleDragStart(event) {
    setDraggingId(event.active.id);
  }

  function handleDragEnd(event) {
    var active = event.active,
        over = event.over;
    setDraggingId(null);

    if (active.id !== over.id) {
      var oldIndex = sections.findIndex(function (item) {
        return item.name === active.id;
      });
      var newIndex = sections.findIndex(function (item) {
        return item.name === over.id;
      });
      var newSections = (0,sortable_esm/* arrayMove */.Rp)(sections, oldIndex, newIndex);
      setSections(newSections);
      setDirty(true);
    }
  }

  var draggingSection = sections.find(function (section) {
    return section.name === draggingId;
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(core_esm/* DndContext */.LB, {
    collisionDetection: core_esm/* closestCenter */.pE,
    onDragStart: handleDragStart,
    onDragEnd: handleDragEnd,
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_SettingsSubtitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "EditCollectivePage.SectionsDescription",
        defaultMessage: [{
          "type": 0,
          "value": "Drag and drop to reorder sections. Toggle on and off with the visibility setting dropdown. Remember to click save at the bottom!"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      mt: 4,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        width: "100%",
        maxWidth: 436,
        children: loading || !sections ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 400
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
            mb: 4,
            overflowX: 'visible',
            overflowY: "visible",
            position: "relative",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sortable_esm/* SortableContext */.Fo, {
              items: sections === null || sections === void 0 ? void 0 : sections.map(function (item) {
                return item.name;
              }),
              strategy: sortable_esm/* verticalListSortingStrategy */.qw,
              children: sections.map(function (item, index) {
                return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                  children: [index !== 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
                    borderColor: "black.200"
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(DraggableItem, {
                    id: item.name,
                    item: item,
                    collective: collective,
                    onSectionToggle: onSectionToggle,
                    fontWeight: "bold",
                    showDragIcon: true,
                    setSubSections: function setSubSections(subSections) {
                      var newSections = cloneDeep_default()(sections);

                      var subSectionsIdx = newSections.findIndex(function (e) {
                        return e.type === 'CATEGORY' && e.name === item.name;
                      });
                      newSections[subSectionsIdx] = EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({}, newSections[subSectionsIdx]), {}, {
                        sections: subSections
                      });
                      setSections(newSections);
                      setDirty(true);
                    }
                  })]
                }, item.name);
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(core_esm/* DragOverlay */.y9, {
              children: draggingSection ? /*#__PURE__*/(0,jsx_runtime.jsx)(Item, {
                item: draggingSection,
                collective: collective,
                isDragOverlay: true,
                showDragIcon: true
              }) : null
            })]
          }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "error",
            fontSize: "14px",
            withIcon: true,
            my: 2,
            children: (0,errors/* formatErrorMessage */.jN)(intl, (0,errors/* getErrorFromGraphqlException */.H1)(error))
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexWrap: "wrap",
            alignItems: "center",
            justifyContent: ['center', 'flex-start'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonStyle: "primary",
              m: 2,
              minWidth: 150,
              loading: isSubmitting,
              disabled: !isDirty,
              onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
                return regenerator_default().wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        _context.next = 2;
                        return submitSetting({
                          variables: {
                            account: {
                              id: data.account.id
                            },
                            key: 'collectivePage',
                            value: EditCollectivePage_objectSpread(EditCollectivePage_objectSpread({}, data.account.settings.collectivePage), {}, {
                              sections: sections,
                              showGoals: flatten_default()(sections, function (item) {
                                return item.sections || item;
                              }).some(function (_ref14) {
                                var section = _ref14.section;
                                return section === _constants/* Sections.GOALS */.bx.GOALS;
                              })
                            })
                          }
                        });

                      case 2:
                        setDirty(false);

                      case 3:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee);
              })),
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "save",
                defaultMessage: [{
                  "type": 0,
                  "value": "Save"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              m: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                href: "/".concat(collective.slug),
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
                  fontSize: "14px",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "ViewCollectivePage",
                    defaultMessage: [{
                      "type": 0,
                      "value": "View Profile page"
                    }]
                  })
                })
              })
            })]
          })]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        ml: [0, null, null, 42],
        maxWidth: 400,
        width: "100%",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(faqs_EditCollectivePageFAQ, {
          withNewButtons: true,
          withBorderLeft: true
        })
      })]
    })]
  });
};

EditCollectivePage.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditCollectivePage",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_EditCollectivePage = (EditCollectivePage);

var _StyledP = (0,styled_components_browser_esm/* default */.ZP)(Text.P).withConfig({
  displayName: "EditCollectivePage___StyledP",
  componentId: "sc-jg1dbu-1"
})({
  flex: '1'
});
// EXTERNAL MODULE: ./lib/export_file.js
var export_file = __webpack_require__(15985);
;// CONCATENATED MODULE: ./components/ExportImages.js








function ExportImages_createSuper(Derived) { var hasNativeReflectConstruct = ExportImages_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function ExportImages_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }












var ParameterColumnHeader = styled_components_browser_esm/* default.th.withConfig */.ZP.th.withConfig({
  displayName: "ExportImages__ParameterColumnHeader",
  componentId: "sc-1idb0eq-0"
})(["font-size:12px;font-weight:bold;padding:0.1rem 1rem 0.1rem 0;"]);

var ExportImages = /*#__PURE__*/function (_React$Component) {
  inherits_default()(ExportImages, _React$Component);

  var _super = ExportImages_createSuper(ExportImages);

  function ExportImages(props) {
    var _this;

    classCallCheck_default()(this, ExportImages);

    _this = _super.call(this, props);
    _this.state = {
      tierIndex: 0
    };
    return _this;
  }

  createClass_default()(ExportImages, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var collective = this.props.collective;

      if (collective.tiers.length === 0) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {});
      }

      var tiers = collective.tiers.map(function (tier) {
        var encodedTierName = encodeURIComponent(tier.name);
        return {
          id: tier.id,
          name: tier.name,
          images: [{
            name: 'Tier badge',
            url: "https://opencollective.com/".concat(collective.slug, "/tiers/").concat(tier.slug, "/badge.svg?label=").concat(encodedTierName, "&color=brightgreen"),
            code: "<img alt=\"open collective badge\" src=\"https://opencollective.com/".concat(collective.slug, "/tiers/").concat(tier.slug, "/badge.svg?label=").concat(encodedTierName, "&color=brightgreen\" />"),
            options: [{
              name: 'label',
              description: 'badge label',
              defaultValue: "tier name (".concat(tier.name, ")")
            }, {
              name: 'color',
              description: 'badge color (brightgreen, green, yellowgreen, yellow, orange, red, lightgrey, blue)',
              defaultValue: 'brightgreen'
            }]
          }, {
            name: 'Financial contributors widget',
            url: "https://opencollective.com/".concat(collective.slug, "/tiers/").concat(tier.slug, ".svg?avatarHeight=36"),
            code: "<object type=\"image/svg+xml\" data=\"https://opencollective.com/".concat(collective.slug, "/tiers/").concat(tier.slug, ".svg?avatarHeight=36&width=600\"></object>"),
            options: [{
              name: 'width',
              description: 'image width'
            }, {
              name: 'height',
              description: 'image height'
            }, {
              name: 'limit',
              description: 'max contributors to show',
              defaultValue: '(unlimited)'
            }, {
              name: 'avatarHeight',
              description: 'max avatar/logo height'
            }, {
              name: 'button',
              description: 'show "become a contributor" button',
              defaultValue: 'true'
            }, {
              name: 'format',
              description: 'image format (replace .svg with .png or .jpg)'
            }]
          }]
        };
      });
      var tierOptions = tiers.map(function (tier, index) {
        return defineProperty_default()({}, index, tier.name);
      });
      var tier = tiers[this.state.tierIndex];
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "export.images.title",
            defaultMessage: [{
              "type": 0,
              "value": "Export tier images"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ExportImages.Title",
            defaultMessage: [{
              "type": 0,
              "value": "You can export images showing the financial contributors to each tier."
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
            name: "tiers",
            type: "select",
            options: tierOptions,
            onChange: function onChange(tierIndex) {
              return _this2.setState({
                tierIndex: tierIndex
              });
            }
          })
        }), tier && /*#__PURE__*/(0,jsx_runtime.jsx)("ul", {
          children: tier.images.map(function (image) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              as: "li",
              mb: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
                fontWeight: "500",
                children: image.name
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  maxWidth: '100%'
                },
                dangerouslySetInnerHTML: {
                  __html: image.code
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                my: 1,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                  fontSize: "14px",
                  href: image.url,
                  openInNewTab: true,
                  children: image.url
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                as: "pre",
                whiteSpace: "pre-wrap",
                fontSize: "11px",
                maxWidth: 880,
                children: image.code
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
                fontSize: "14px",
                mt: 3,
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Strong */.cK, {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "export.json.parameters.title",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Parameters"
                    }]
                  })
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledContainer, {
                  as: "table",
                  width: "100%",
                  children: /*#__PURE__*/(0,jsx_runtime.jsxs)("tbody", {
                    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("tr", {
                      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(ParameterColumnHeader, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "Parameter",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Parameter"
                          }]
                        })
                      }), /*#__PURE__*/(0,jsx_runtime.jsx)(ParameterColumnHeader, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "Fields.description",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Description"
                          }]
                        })
                      }), /*#__PURE__*/(0,jsx_runtime.jsx)(ParameterColumnHeader, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "DefaultValue",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Default value"
                          }]
                        })
                      })]
                    }), image.options.map(function (option) {
                      return /*#__PURE__*/(0,jsx_runtime.jsxs)("tr", {
                        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                          valign: "top",
                          children: option.name
                        }), /*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                          valign: "top",
                          children: option.description
                        }), /*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                          valign: "top",
                          children: option.defaultValue
                        })]
                      }, option.name);
                    })]
                  })
                })]
              })]
            }, image.name);
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ExportImages.AllFinancial",
            defaultMessage: [{
              "type": 0,
              "value": "All financial contributors badge"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
            fontSize: "14px",
            openInNewTab: true,
            href: "https://opencollective.com/".concat(collective.slug, "/tiers/badge.svg"),
            children: "https://opencollective.com/".concat(collective.slug, "/tiers/badge.svg")
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("img", {
          alt: "open collective badge",
          src: "https://opencollective.com/".concat(collective.slug, "/tiers/badge.svg")
        })]
      });
    }
  }]);

  return ExportImages;
}(react.Component);

ExportImages.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ExportImages",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var components_ExportImages = (ExportImages);

var _StyledContainer = (0,styled_components_browser_esm/* default */.ZP)(Container/* default */.Z).withConfig({
  displayName: "ExportImages___StyledContainer",
  componentId: "sc-1idb0eq-1"
})({
  borderSpacing: 16
});
;// CONCATENATED MODULE: ./components/edit-collective/sections/Export.js









function Export_createSuper(Derived) { var hasNativeReflectConstruct = Export_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function Export_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var Export = /*#__PURE__*/function (_React$Component) {
  inherits_default()(Export, _React$Component);

  var _super = Export_createSuper(Export);

  function Export(props) {
    classCallCheck_default()(this, Export);

    return _super.call(this, props);
  }

  createClass_default()(Export, [{
    key: "render",
    value: function render() {
      var collective = this.props.collective;
      var widgetCode = "<script src=\"https://opencollective.com/".concat(collective.slug, "/banner.js\"></script>");
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Export.Format",
            defaultMessage: [{
              "type": 0,
              "value": "Export "
            }, {
              "type": 1,
              "value": "format"
            }],
            values: {
              format: 'CSV'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ExportContributors.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Export your contributor data in "
            }, {
              "type": 1,
              "value": "format"
            }, {
              "type": 0,
              "value": " format"
            }],
            values: {
              format: 'CSV'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _context.next = 2;
                    return (0,export_file/* exportMembers */.$G)(collective.slug);

                  case 2:
                    return _context.abrupt("return", _context.sent);

                  case 3:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee);
          })),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Export.Format",
            defaultMessage: [{
              "type": 0,
              "value": "Export "
            }, {
              "type": 1,
              "value": "format"
            }],
            values: {
              format: 'CSV'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Export.Format",
            defaultMessage: [{
              "type": 0,
              "value": "Export "
            }, {
              "type": 1,
              "value": "format"
            }],
            values: {
              format: 'JSON'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ExportContributors.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Export your contributor data in "
            }, {
              "type": 1,
              "value": "format"
            }, {
              "type": 0,
              "value": " format"
            }],
            values: {
              format: 'JSON'
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("ul", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("li", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "ExportContributors.All",
              defaultMessage: [{
                "type": 0,
                "value": "All contributors: "
              }, {
                "type": 1,
                "value": "link"
              }],
              values: {
                link: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
                  href: "/".concat(collective.slug, "/members/all.json"),
                  children: ["https://opencollective.com/", collective.slug, "/members/all.json"]
                })
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "ExportContributors.OnlyIndividuals",
              defaultMessage: [{
                "type": 0,
                "value": "Only individuals: "
              }, {
                "type": 1,
                "value": "link"
              }],
              values: {
                link: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
                  href: "/".concat(collective.slug, "/members/users.json"),
                  children: ["https://opencollective.com/", collective.slug, "/members/users.json"]
                })
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "ExportContributors.OnlyOrganizations",
              defaultMessage: [{
                "type": 0,
                "value": "Only organizations: "
              }, {
                "type": 1,
                "value": "link"
              }],
              values: {
                link: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
                  href: "/".concat(collective.slug, "/members/organizations.json"),
                  children: ["https://opencollective.com/", collective.slug, "/members/organizations.json"]
                })
              }
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
          fontSize: "14px",
          fontWeight: "500",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "export.json.parameters.title",
            defaultMessage: [{
              "type": 0,
              "value": "Parameters"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Export_StyledContainer, {
          as: "table",
          fontSize: "14px",
          mb: 3,
          width: "100%",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)("tbody", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("tr", {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                children: "limit"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "export.json.parameters.limit",
                  defaultMessage: [{
                    "type": 0,
                    "value": "number of contributors to return"
                  }]
                })
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("tr", {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                children: "offset"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "export.json.parameters.offset",
                  defaultMessage: [{
                    "type": 0,
                    "value": "number of contributors to skip (for paging)"
                  }]
                })
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("tr", {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                as: "td",
                pr: 2,
                children: "TierId"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("td", {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "export.json.parameters.TierId",
                  defaultMessage: [{
                    "type": 0,
                    "value": "only return contributors that belong to this Tier (select a tier on your Collective page and look at the URL to find its ID)."
                  }]
                })
              })]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          mb: 4,
          children: [collective.tiers[0] && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: ["e.g.,", /*#__PURE__*/(0,jsx_runtime.jsx)("br", {}), /*#__PURE__*/(0,jsx_runtime.jsxs)("a", {
              href: "/".concat(collective.slug, "/members/all.json?limit=10&offset=0&TierId=").concat(collective.tiers[0].id),
              children: ["https://opencollective.com/", collective.slug, "/members/all.json?limit=10&offset=0&TierId=", collective.tiers[0].id]
            })]
          }), !collective.tiers[0] && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: ["e.g.,", /*#__PURE__*/(0,jsx_runtime.jsx)("br", {}), /*#__PURE__*/(0,jsx_runtime.jsxs)("a", {
              href: "/".concat(collective.slug, "/members/all.json?limit=10&offset=0"),
              children: ["https://opencollective.com/", collective.slug, "/members/all.json?limit=10&offset=0"]
            })]
          })]
        }), !(0,collective_sections/* isOneOfTypes */.B_)(collective, [constants_collectives/* CollectiveType.EVENT */.eV.EVENT, constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT]) && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "export.widget.title",
              defaultMessage: [{
                "type": 0,
                "value": "Widget"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            as: "pre",
            fontSize: "11px",
            whiteSpace: "pre-wrap",
            mb: 4,
            children: widgetCode
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            my: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_ExportImages, {
              collective: collective
            })
          })]
        })]
      });
    }
  }]);

  return Export;
}(react.Component);

Export.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Export",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_Export = (Export);

var Export_StyledContainer = (0,styled_components_browser_esm/* default */.ZP)(Container/* default */.Z).withConfig({
  displayName: "Export___StyledContainer",
  componentId: "sc-1g70bs6-0"
})({
  borderSpacing: 16
});
;// CONCATENATED MODULE: ./components/edit-collective/sections/FiscalHosting.js





var FiscalHosting_templateObject, FiscalHosting_templateObject2, FiscalHosting_templateObject3, _templateObject4;



function FiscalHosting_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function FiscalHosting_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? FiscalHosting_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : FiscalHosting_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }















var activateCollectiveAsHostMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(FiscalHosting_templateObject || (FiscalHosting_templateObject = taggedTemplateLiteral_default()(["\n  mutation ActivateCollectiveAsHost($id: Int!) {\n    activateCollectiveAsHost(id: $id) {\n      id\n      currency\n      isHost\n      plan {\n        id\n        name\n      }\n    }\n  }\n"])));
var deactivateCollectiveAsHostMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(FiscalHosting_templateObject2 || (FiscalHosting_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation DeactivateCollectiveAsHost($id: Int!) {\n    deactivateCollectiveAsHost(id: $id) {\n      id\n      currency\n      isHost\n      plan {\n        id\n        name\n      }\n    }\n  }\n"])));
var activateBudgetMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(FiscalHosting_templateObject3 || (FiscalHosting_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation ActivateHostBudget($id: Int!) {\n    activateBudget(id: $id) {\n      id\n      isActive\n    }\n  }\n"])));
var deactivateBudgetMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(_templateObject4 || (_templateObject4 = taggedTemplateLiteral_default()(["\n  mutation DeactivateHostBudget($id: Int!) {\n    deactivateBudget(id: $id) {\n      id\n      isActive\n    }\n  }\n"])));

var getCollectiveType = function getCollectiveType(type) {
  switch (type) {
    case 'ORGANIZATION':
      return 'Organization';

    case 'COLLECTIVE':
      return 'Collective';

    default:
      return 'Account';
  }
};

var FiscalHosting = function FiscalHosting(_ref) {
  var collective = _ref.collective;
  var isHostAccount = collective.isHost;
  var isBudgetActive = collective.isActive;
  var collectiveType = getCollectiveType(collective.type);

  var _useState = (0,react.useState)({
    processing: false,
    error: null
  }),
      activateAsHostStatus = _useState[0],
      setActivateAsHostStatus = _useState[1];

  var _useState2 = (0,react.useState)({
    processing: false,
    error: null
  }),
      activateBudgetStatus = _useState2[0],
      setActivateBudgetStatus = _useState2[1];

  var _useState3 = (0,react.useState)({
    type: isHostAccount ? 'Activate' : 'Deactivate',
    show: false
  }),
      activateAsHostModal = _useState3[0],
      setActivateAsHostModal = _useState3[1];

  var _useState4 = (0,react.useState)({
    type: collective.isActive ? 'Activate' : 'Deactivate',
    show: false
  }),
      activateBudgetModal = _useState4[0],
      setActivateBudgetModal = _useState4[1];

  var adminPanelMutationParams = {
    refetchQueries: [{
      query: adminPanelQuery,
      variables: {
        slug: collective.slug
      },
      context: helpers/* API_V2_CONTEXT */.T
    }]
  };

  var _useMutation = (0,client.useMutation)(activateCollectiveAsHostMutation, adminPanelMutationParams),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      activateCollectiveAsHost = _useMutation2[0];

  var _useMutation3 = (0,client.useMutation)(deactivateCollectiveAsHostMutation, adminPanelMutationParams),
      _useMutation4 = slicedToArray_default()(_useMutation3, 1),
      deactivateCollectiveAsHost = _useMutation4[0];

  var _useMutation5 = (0,client.useMutation)(activateBudgetMutation),
      _useMutation6 = slicedToArray_default()(_useMutation5, 1),
      activateBudget = _useMutation6[0];

  var _useMutation7 = (0,client.useMutation)(deactivateBudgetMutation),
      _useMutation8 = slicedToArray_default()(_useMutation7, 1),
      deactivateBudget = _useMutation8[0];

  var handleActivateAsHost = /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(_ref2) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              id = _ref2.id;
              setActivateAsHostModal({
                type: 'Activate',
                show: false
              });
              _context.prev = 2;
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: true
              }));
              _context.next = 6;
              return activateCollectiveAsHost({
                variables: {
                  id: id
                }
              });

            case 6:
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: false
              }));
              _context.next = 13;
              break;

            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[2, 9]]);
    }));

    return function handleActivateAsHost(_x) {
      return _ref3.apply(this, arguments);
    };
  }();

  var handleDeactivateAsHost = /*#__PURE__*/function () {
    var _ref5 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(_ref4) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              id = _ref4.id;
              setActivateAsHostModal({
                type: 'Deactivate',
                show: false
              });
              _context2.prev = 2;
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: true
              }));
              _context2.next = 6;
              return deactivateCollectiveAsHost({
                variables: {
                  id: id
                }
              });

            case 6:
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: false
              }));
              _context2.next = 13;
              break;

            case 9:
              _context2.prev = 9;
              _context2.t0 = _context2["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context2.t0).message;
              setActivateAsHostStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[2, 9]]);
    }));

    return function handleDeactivateAsHost(_x2) {
      return _ref5.apply(this, arguments);
    };
  }();

  var closeActivateAsHost = function closeActivateAsHost() {
    return setActivateAsHostModal(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostModal), {}, {
      show: false
    }));
  };

  var handleActivateBudget = /*#__PURE__*/function () {
    var _ref7 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3(_ref6) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              id = _ref6.id;
              setActivateBudgetModal({
                type: 'Activate',
                show: false
              });
              _context3.prev = 2;
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: true
              }));
              _context3.next = 6;
              return activateBudget({
                variables: {
                  id: id
                }
              });

            case 6:
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: false
              }));
              _context3.next = 13;
              break;

            case 9:
              _context3.prev = 9;
              _context3.t0 = _context3["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context3.t0).message;
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[2, 9]]);
    }));

    return function handleActivateBudget(_x3) {
      return _ref7.apply(this, arguments);
    };
  }();

  var handleDeactivateBudget = /*#__PURE__*/function () {
    var _ref9 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee4(_ref8) {
      var id, errorMsg;
      return regenerator_default().wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              id = _ref8.id;
              setActivateBudgetModal({
                type: 'Deactivate',
                show: false
              });
              _context4.prev = 2;
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: true
              }));
              _context4.next = 6;
              return deactivateBudget({
                variables: {
                  id: id
                }
              });

            case 6:
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: false
              }));
              _context4.next = 13;
              break;

            case 9:
              _context4.prev = 9;
              _context4.t0 = _context4["catch"](2);
              errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context4.t0).message;
              setActivateBudgetStatus(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetStatus), {}, {
                processing: false,
                error: errorMsg
              }));

            case 13:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[2, 9]]);
    }));

    return function handleDeactivateBudget(_x4) {
      return _ref9.apply(this, arguments);
    };
  }();

  var closeActivateBudget = function closeActivateBudget() {
    return setActivateBudgetModal(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetModal), {}, {
      show: false
    }));
  };

  var handlePrimaryBtnClick = function handlePrimaryBtnClick() {
    if (activateBudgetModal.type === 'Deactivate') {
      handleDeactivateBudget({
        id: collective.id
      });
    } else {
      handleActivateBudget({
        id: collective.id
      });
    }
  };

  (0,useKeyboardKey/* default */.ZP)({
    callback: handlePrimaryBtnClick,
    keyMatch: useKeyboardKey/* ENTER_KEY */.q7
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    display: "flex",
    flexDirection: "column",
    width: 1,
    alignItems: "flex-start",
    children: [!isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.hostAccount.activate.description",
        defaultMessage: [{
          "type": 0,
          "value": "A Fiscal Host is a legal entity who holds Collective funds in their bank account, manages payouts, and generates invoices and receipts."
        }]
      })
    }), isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "host.deactivate",
        defaultMessage: [{
          "type": 0,
          "value": "Deactivate as Host"
        }]
      })
    }), isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mb: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        values: {
          type: collectiveType.toLowerCase()
        },
        id: "collective.hostAccount.deactivate.description",
        defaultMessage: [{
          "type": 0,
          "value": "After deactivating, you will not be able to act as a Host anymore. The profile will remain active as a "
        }, {
          "type": 1,
          "value": "type"
        }, {
          "type": 0,
          "value": "."
        }]
      })
    }), activateAsHostStatus.error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "#ff5252",
      children: activateAsHostStatus.error
    }), !isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: function onClick() {
        return setActivateAsHostModal({
          type: 'Activate',
          show: true
        });
      },
      loading: activateAsHostStatus.processing,
      disabled: false,
      my: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "collective.activateAsHost",
        defaultMessage: [{
          "type": 0,
          "value": "Activate as Host"
        }]
      })
    }), isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: function onClick() {
        return setActivateAsHostModal({
          type: 'Deactivate',
          show: true
        });
      },
      loading: activateAsHostStatus.processing,
      disabled: collective.plan.hostedCollectives > 0,
      mb: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "host.deactivate",
        defaultMessage: [{
          "type": 0,
          "value": "Deactivate as Host"
        }]
      })
    }), collective.plan.hostedCollectives > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      color: "rgb(224, 183, 0)",
      my: 1,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        values: {
          hostedCollectives: collective.plan.hostedCollectives
        },
        id: "collective.hostAccount.deactivate.isHost",
        defaultMessage: [{
          "type": 0,
          "value": "You are currently hosting "
        }, {
          "type": 1,
          "value": "hostedCollectives"
        }, {
          "type": 0,
          "value": " Collectives. To deactivate, they need to be moved to a different Host or archived."
        }]
      })
    }), activateAsHostModal.show && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: "570px",
      onClose: closeActivateAsHost,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalHeader */.xB, {
        onClose: closeActivateAsHost,
        children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.activateAsHost",
          defaultMessage: [{
            "type": 0,
            "value": "Activate as Host"
          }]
        }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "host.deactivate",
          defaultMessage: [{
            "type": 0,
            "value": "Deactivate as Host"
          }]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: "1rem",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.hostAccount.modal.description",
            defaultMessage: [{
              "type": 0,
              "value": "A Fiscal Host is a legal entity (company or individual) who holds Collective funds in their bank account, and can generate invoices and receipts for Financial Contributors."
            }, {
              "type": 1,
              "value": "br"
            }, {
              "type": 0,
              "value": "Think of a Fiscal Host as an umbrella organization for its Collectives."
            }],
            values: {
              br: /*#__PURE__*/(0,jsx_runtime.jsx)("br", {})
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.hostAccount.modal.activate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to activate this Fiscal Host?"
            }]
          }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.hostAccount.modal.deactivate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to deactivate this Fiscal Host?"
            }]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            onClick: function onClick() {
              return setActivateAsHostModal(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateAsHostModal), {}, {
                show: false
              }));
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: function onClick() {
              if (activateAsHostModal.type === 'Deactivate') {
                handleDeactivateAsHost({
                  id: collective.id
                });
              } else {
                handleActivateAsHost({
                  id: collective.id
                });
              }
            },
            children: [activateAsHostModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.activateAsHost",
              defaultMessage: [{
                "type": 0,
                "value": "Activate as Host"
              }]
            }), activateAsHostModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "host.deactivate",
              defaultMessage: [{
                "type": 0,
                "value": "Deactivate as Host"
              }]
            })]
          })]
        })
      })]
    }), isHostAccount && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [!isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
        mt: 4,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        })
      }), isBudgetActive && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.deactivate.description",
          defaultMessage: [{
            "type": 0,
            "value": "Your Host Budget is activated. It can receive financial contributions and manage expenses."
          }]
        })
      }), !isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.activate.description",
          defaultMessage: [{
            "type": 0,
            "value": "By activating the Host Budget, it will be able to receive financial contributions and manage expenses."
          }]
        })
      }), activateBudgetStatus.error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        color: "#ff5252",
        children: activateBudgetStatus.error
      }), !isBudgetActive && collective.type === 'ORGANIZATION' && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        onClick: function onClick() {
          return setActivateBudgetModal({
            type: 'Activate',
            show: true
          });
        },
        loading: activateBudgetStatus.processing,
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        })
      })]
    }), activateBudgetModal.show && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: "570px",
      onClose: closeActivateBudget,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalHeader */.xB, {
        onClose: closeActivateBudget,
        children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.activate",
          defaultMessage: [{
            "type": 0,
            "value": "Activate Host Budget"
          }]
        }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "FiscalHosting.budget.deactivate",
          defaultMessage: [{
            "type": 0,
            "value": "Deactivate Host Budget"
          }]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FiscalHosting.budget.modal.activate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to activate the Host budget?"
            }]
          }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FiscalHosting.budget.modal.deactivate.body",
            defaultMessage: [{
              "type": 0,
              "value": "Are you sure you want to deactivate the Host budget?"
            }]
          })]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            onClick: function onClick() {
              return setActivateBudgetModal(FiscalHosting_objectSpread(FiscalHosting_objectSpread({}, activateBudgetModal), {}, {
                show: false
              }));
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            "data-cy": "action",
            onClick: function onClick() {
              return handlePrimaryBtnClick();
            },
            children: [activateBudgetModal.type === 'Activate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "FiscalHosting.budget.activate",
              defaultMessage: [{
                "type": 0,
                "value": "Activate Host Budget"
              }]
            }), activateBudgetModal.type === 'Deactivate' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "FiscalHosting.budget.deactivate",
              defaultMessage: [{
                "type": 0,
                "value": "Deactivate Host Budget"
              }]
            })]
          })]
        })
      })]
    })]
  });
};

FiscalHosting.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FiscalHosting",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_FiscalHosting = (FiscalHosting);
// EXTERNAL MODULE: ./node_modules/lodash/last.js
var last = __webpack_require__(10928);
var last_default = /*#__PURE__*/__webpack_require__.n(last);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/Add/Add.esm.js
var Add_esm = __webpack_require__(97325);
// EXTERNAL MODULE: ./components/icons/GiftCard.js
var GiftCard = __webpack_require__(19740);
;// CONCATENATED MODULE: ./components/GiftCardDetails.js








function GiftCardDetails_createSuper(Derived) { var hasNativeReflectConstruct = GiftCardDetails_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function GiftCardDetails_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var DetailsColumnHeader = styled_components_browser_esm/* default.span.withConfig */.ZP.span.withConfig({
  displayName: "GiftCardDetails__DetailsColumnHeader",
  componentId: "sc-18b01nd-0"
})(["text-transform:uppercase;color:", ";font-weight:300;white-space:nowrap;"], (0,dist_index_esm/* themeGet */.R)('colors.black.500'));
/** Render a text status to indicate if gift card is claimed, and by whom */

var GiftCardStatus = function GiftCardStatus(_ref) {
  var isConfirmed = _ref.isConfirmed,
      collective = _ref.collective,
      data = _ref.data;

  if (isConfirmed) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "giftCards.claimedBy",
      defaultMessage: [{
        "type": 0,
        "value": "claimed by "
      }, {
        "type": 1,
        "value": "user"
      }],
      values: {
        user: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
          href: "/".concat(collective.slug),
          children: collective.name
        })
      }
    });
  } else if (get_default()(data, 'email')) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "giftCards.sentTo",
      defaultMessage: [{
        "type": 0,
        "value": "sent to "
      }, {
        "type": 1,
        "value": "email"
      }],
      values: {
        email: /*#__PURE__*/(0,jsx_runtime.jsx)("a", {
          href: "mailto:".concat(data.email),
          children: data.email
        })
      }
    });
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "giftCards.notYetClaimed",
      defaultMessage: [{
        "type": 0,
        "value": "not yet claimed"
      }]
    });
  }
};

/**
 * Render GiftCard details like its status (claimed or not), who claimed it,
 * when was it created... It is not meant to be show to all users, but just to
 * the organizations that create the gift cards.
 */
var GiftCardDetails = /*#__PURE__*/function (_React$Component) {
  inherits_default()(GiftCardDetails, _React$Component);

  var _super = GiftCardDetails_createSuper(GiftCardDetails);

  function GiftCardDetails(props) {
    var _this;

    classCallCheck_default()(this, GiftCardDetails);

    _this = _super.call(this, props);
    _this.state = {
      expended: false
    };
    return _this;
  }

  createClass_default()(GiftCardDetails, [{
    key: "toggleExpended",
    value: function toggleExpended() {
      this.setState(function (state) {
        return {
          expended: !state.expended
        };
      });
    }
  }, {
    key: "getStatusColor",
    value: function getStatusColor(isConfirmed, balance, isExpired) {
      var colors = this.props.theme.colors;

      if (balance === 0 || isExpired) {
        return colors.black[200];
      }

      return isConfirmed ? colors.green[500] : colors.yellow[500];
    }
  }, {
    key: "renderDetails",
    value: function renderDetails() {
      var _this$props = this.props,
          giftCard = _this$props.giftCard,
          collectiveSlug = _this$props.collectiveSlug;
      var redeemCode = giftCard.uuid.split('-')[0];

      var email = get_default()(giftCard, 'data.email');

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        mt: "0.75em",
        fontSize: "0.8em",
        children: [!giftCard.isConfirmed && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mr: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailsColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.redeemCode",
              defaultMessage: [{
                "type": 0,
                "value": "REDEEM CODE"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: {
              pathname: "/".concat(collectiveSlug, "/redeem/").concat(redeemCode),
              query: {
                email: email
              }
            },
            children: redeemCode
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mr: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailsColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.emmited",
              defaultMessage: [{
                "type": 0,
                "value": "Emitted"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(lib.FormattedDate, {
            value: giftCard.createdAt
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mr: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailsColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.expiryDate",
              defaultMessage: [{
                "type": 0,
                "value": "EXPIRY DATE"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            children: dayjs_min_default()(giftCard.expiryDate).format('MM/YYYY')
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mr: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailsColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.batch",
              defaultMessage: [{
                "type": 0,
                "value": "Batch name"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            children: giftCard.batch || /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              fontStyle: "italic",
              color: "black.500",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.notBatched",
                defaultMessage: [{
                  "type": 0,
                  "value": "Not batched"
                }]
              })
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          mr: "2em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(DetailsColumnHeader, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "giftCards.description",
              defaultMessage: [{
                "type": 0,
                "value": "DESCRIPTION"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            children: giftCard.description
          })]
        })]
      });
    }
  }, {
    key: "renderValue",
    value: function renderValue() {
      var _this$props$giftCard = this.props.giftCard,
          initialBalance = _this$props$giftCard.initialBalance,
          currency = _this$props$giftCard.currency,
          monthlyLimitPerMember = _this$props$giftCard.monthlyLimitPerMember;
      var locale = this.props.intl.locale;
      return monthlyLimitPerMember ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "giftCards.monthlyValue",
        defaultMessage: [{
          "type": 1,
          "value": "value"
        }, {
          "type": 0,
          "value": " monthly"
        }],
        values: {
          value: (0,currency_utils/* formatCurrency */.xG)(monthlyLimitPerMember, currency, {
            locale: locale
          })
        }
      }) : (0,currency_utils/* formatCurrency */.xG)(initialBalance, currency, {
        locale: locale
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props$giftCard2 = this.props.giftCard,
          isConfirmed = _this$props$giftCard2.isConfirmed,
          collective = _this$props$giftCard2.collective,
          balance = _this$props$giftCard2.balance,
          currency = _this$props$giftCard2.currency,
          expiryDate = _this$props$giftCard2.expiryDate,
          data = _this$props$giftCard2.data;
      var isExpired = Boolean(expiryDate && new Date(expiryDate) < new Date());
      var locale = this.props.intl.locale;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        "data-cy": "vc-details",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mr: "20px",
          children: isConfirmed ? /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: "/".concat(collective.slug),
            title: collective.name,
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(GiftCard/* default */.Z, {
                alignSelf: "center",
                size: "2.5em",
                color: this.getStatusColor(isConfirmed, balance, isExpired)
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledAvatar, {
                collective: collective,
                radius: 24,
                mt: "-1em",
                ml: "1em"
              })]
            })
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(GiftCard/* default */.Z, {
            alignSelf: "center",
            size: "2.5em",
            color: this.getStatusColor(isConfirmed, balance, isExpired)
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: "column",
          p: "0.1em",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
              children: this.renderValue()
            }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(GiftCardStatus, {
              isConfirmed: isConfirmed,
              collective: collective,
              data: data
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            color: this.props.theme.colors.black[500],
            fontSize: "0.9em",
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              alignItems: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.balance",
                defaultMessage: [{
                  "type": 0,
                  "value": "Balance: "
                }, {
                  "type": 1,
                  "value": "balance"
                }],
                values: {
                  balance: (0,currency_utils/* formatCurrency */.xG)(balance, currency, {
                    locale: locale
                  })
                }
              }), isExpired && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                  mx: 1,
                  children: "|"
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "GiftCard.Expired",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Expired"
                  }]
                })]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                mx: 1,
                children: "|"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                isBorderless: true,
                buttonSize: "tiny",
                buttonStyle: "secondary",
                fontSize: "11px",
                onClick: function onClick() {
                  return _this2.toggleExpended();
                },
                px: 1,
                children: this.state.expended ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "closeDetails",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Close Details"
                  }]
                }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "viewDetails",
                  defaultMessage: [{
                    "type": 0,
                    "value": "View Details"
                  }]
                })
              })]
            })
          }), this.state.expended && this.renderDetails()]
        })]
      });
    }
  }]);

  return GiftCardDetails;
}(react.Component);

GiftCardDetails.__docgenInfo = {
  "description": "Render GiftCard details like its status (claimed or not), who claimed it,\nwhen was it created... It is not meant to be show to all users, but just to\nthe organizations that create the gift cards.",
  "methods": [{
    "name": "toggleExpended",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getStatusColor",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "isConfirmed",
      "type": null
    }, {
      "name": "balance",
      "type": null
    }, {
      "name": "isExpired",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderDetails",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "renderValue",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "GiftCardDetails",
  "props": {
    "giftCard": {
      "description": "The gift card, which is actually a PaymentMethod",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "Collective slug",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "theme": {
      "description": "@ignore Provided by styled-component withTheme(...)",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore Provided by injectIntl",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_GiftCardDetails = ((0,styled_components_browser_esm/* withTheme */.Zz)((0,injectIntl/* default */.ZP)(GiftCardDetails)));

var _StyledAvatar = (0,styled_components_browser_esm/* default */.ZP)(Avatar/* default */.ZP).withConfig({
  displayName: "GiftCardDetails___StyledAvatar",
  componentId: "sc-18b01nd-1"
})({
  position: 'absolute'
});
// EXTERNAL MODULE: ./components/StyledButtonSet.js
var StyledButtonSet = __webpack_require__(16738);
;// CONCATENATED MODULE: ./components/edit-collective/sections/GiftCards.js














var GiftCards_templateObject;

function GiftCards_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function GiftCards_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? GiftCards_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : GiftCards_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function GiftCards_createSuper(Derived) { var hasNativeReflectConstruct = GiftCards_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function GiftCards_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



















var GiftCards_messages = (0,lib.defineMessages)({
  notBatched: {
    id: "giftCards.notBatched",
    defaultMessage: [{
      "type": 0,
      "value": "Not batched"
    }]
  },
  allBatches: {
    id: "giftCards.batches.all",
    defaultMessage: [{
      "type": 0,
      "value": "All batches"
    }]
  }
});
var NOT_BATCHED_KEY = '__not-batched__';
/**
 * A filterable list of gift cards meant to be displayed for organization
 * admins.
 */

var GiftCards = /*#__PURE__*/function (_React$Component) {
  inherits_default()(GiftCards, _React$Component);

  var _super = GiftCards_createSuper(GiftCards);

  function GiftCards(props) {
    var _this;

    classCallCheck_default()(this, GiftCards);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getBatchesOptions", (0,memoize_one_esm/* default */.Z)(function (batches, selected, intl) {
      if (!batches || batches.length < 2) {
        return [[], null];
      } else {
        var options = [{
          label: intl.formatMessage(GiftCards_messages.allBatches),
          value: undefined
        }].concat(toConsumableArray_default()(batches.map(function (batch) {
          return {
            label: "".concat(batch.name || intl.formatMessage(GiftCards_messages.notBatched), " (").concat(batch.count, ")"),
            value: batch.name || NOT_BATCHED_KEY
          };
        })));
        return [options, options.find(function (option) {
          return option.value === selected;
        })];
      }
    }));

    _this.state = {
      claimedFilter: 'all'
    };
    return _this;
  }

  createClass_default()(GiftCards, [{
    key: "getQueryParams",
    value: function getQueryParams(picked, newParams) {
      return omitBy_default()(GiftCards_objectSpread(GiftCards_objectSpread({}, this.props.router.query), newParams), function (value, key) {
        return !value || !picked.includes(key);
      });
    }
  }, {
    key: "renderFilters",
    value: function renderFilters(onlyConfirmed) {
      var _this2 = this;

      var selected = 'all';

      if (onlyConfirmed) {
        selected = 'redeemed';
      }

      if (onlyConfirmed === false) {
        selected = 'pending';
      }

      var query = this.getQueryParams(['filter', 'batch']);
      return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButtonSet/* default */.Z, {
        justifyContent: "center",
        mt: [4, 0],
        items: ['all', 'redeemed', 'pending'],
        selected: selected,
        buttonProps: {
          p: 1
        },
        display: "block",
        children: function children(_ref) {
          var item = _ref.item,
              isSelected = _ref.isSelected;
          return /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: {
              pathname: "/".concat(_this2.props.collectiveSlug, "/admin/gift-cards"),
              query: GiftCards_objectSpread(GiftCards_objectSpread({}, query), {}, {
                filter: item
              })
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              p: "0.5em 1em",
              color: isSelected ? 'white.full' : 'black.800',
              style: {
                margin: 0
              },
              children: [item === 'all' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.filterAll",
                defaultMessage: [{
                  "type": 0,
                  "value": "All"
                }]
              }), item === 'redeemed' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.filterRedeemed",
                defaultMessage: [{
                  "type": 0,
                  "value": "Redeemed"
                }]
              }), item === 'pending' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "giftCards.filterPending",
                defaultMessage: [{
                  "type": 0,
                  "value": "Pending"
                }]
              })]
            })
          });
        }
      });
    }
  }, {
    key: "renderNoGiftCardMessage",
    value: function renderNoGiftCardMessage(onlyConfirmed) {
      if (onlyConfirmed === undefined) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
          href: "/".concat(this.props.collectiveSlug, "/admin/gift-cards-create"),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "giftCards.createFirst",
            defaultMessage: [{
              "type": 0,
              "value": "Create your first gift card!"
            }]
          })
        });
      } else if (onlyConfirmed) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "giftCards.emptyClaimed",
          defaultMessage: [{
            "type": 0,
            "value": "No gift cards claimed yet"
          }]
        });
      } else {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "giftCards.emptyUnclaimed",
          defaultMessage: [{
            "type": 0,
            "value": "No unclaimed gift cards"
          }]
        });
      }
    }
    /** Get batch options for select. First option is always "No batch" */

  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var _this$props = this.props,
          data = _this$props.data,
          collectiveSlug = _this$props.collectiveSlug,
          intl = _this$props.intl;

      var queryResult = get_default()(data, 'Collective.createdGiftCards', {});

      var onlyConfirmed = get_default()(data, 'variables.isConfirmed');

      var batches = get_default()(data, 'Collective.giftCardsBatches');

      var offset = queryResult.offset,
          limit = queryResult.limit,
          total = queryResult.total,
          _queryResult$paymentM = queryResult.paymentMethods,
          paymentMethods = _queryResult$paymentM === void 0 ? [] : _queryResult$paymentM;

      var lastGiftCard = last_default()(paymentMethods);

      var _this$getBatchesOptio = this.getBatchesOptions(batches, get_default()(data, 'variables.batch'), intl),
          _this$getBatchesOptio2 = slicedToArray_default()(_this$getBatchesOptio, 2),
          batchesOptions = _this$getBatchesOptio2[0],
          selectedOption = _this$getBatchesOptio2[1];

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        mt: 4,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mb: 4,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            mb: 3,
            flexDirection: ['column-reverse', 'row'],
            justifyContent: "space-between",
            alignItems: "center",
            flexWrap: "wrap",
            children: [this.renderFilters(onlyConfirmed), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
              justifyContent: "center",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                href: "/".concat(collectiveSlug, "/admin/gift-cards-create"),
                children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
                  buttonStyle: "primary",
                  buttonSize: "medium",
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Add_esm/* Add */.m, {
                    size: "1em"
                  }), '  ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "giftCards.create",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Create gift cards"
                    }]
                  })]
                })
              })
            })]
          }), batchesOptions.length > 1 && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
              inputId: "batches-options",
              options: batchesOptions,
              onChange: function onChange(_ref2) {
                var value = _ref2.value;
                return _this3.props.router.push({
                  pathname: "/".concat(collectiveSlug, "/admin/gift-cards"),
                  query: _this3.getQueryParams(['filter', 'batch'], {
                    batch: value
                  })
                });
              },
              defaultValue: selectedOption
            })
          })]
        }), data.loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {}) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          "data-cy": "gift-cards-list",
          children: [paymentMethods.length === 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            justifyContent: "center",
            mt: "4em",
            children: this.renderNoGiftCardMessage(onlyConfirmed)
          }), paymentMethods.map(function (v) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_GiftCardDetails, {
                giftCard: v,
                collectiveSlug: _this3.props.collectiveSlug
              }), v !== lastGiftCard && /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {})]
            }, v.id);
          }), total > limit && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            className: "vc-pagination",
            justifyContent: "center",
            mt: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
              offset: offset,
              total: total,
              limit: limit
            })
          })]
        })]
      });
    }
  }]);

  return GiftCards;
}(react.Component);

var GIFT_CARDS_PER_PAGE = 15;

var getIsConfirmedFromFilter = function getIsConfirmedFromFilter(filter) {
  if (filter === undefined || filter === 'all') {
    return undefined;
  }

  return filter === 'redeemed';
};
/** A query to get the gift cards created by a collective. Must be authenticated. */


var giftCardsQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(GiftCards_templateObject || (GiftCards_templateObject = taggedTemplateLiteral_default()(["\n  query EditCollectiveGiftCards($CollectiveId: Int, $isConfirmed: Boolean, $limit: Int, $offset: Int, $batch: String) {\n    Collective(id: $CollectiveId) {\n      id\n      giftCardsBatches {\n        id\n        name\n        count\n      }\n      createdGiftCards(isConfirmed: $isConfirmed, limit: $limit, offset: $offset, batch: $batch) {\n        offset\n        limit\n        total\n        paymentMethods {\n          id\n          uuid\n          currency\n          name\n          service\n          type\n          batch\n          data\n          initialBalance\n          monthlyLimitPerMember\n          balance\n          expiryDate\n          isConfirmed\n          data\n          createdAt\n          expiryDate\n          description\n          collective {\n            id\n            slug\n            imageUrl\n            type\n            name\n          }\n        }\n      }\n    }\n  }\n"])));

var getGiftCardsVariablesFromProps = function getGiftCardsVariablesFromProps(_ref3) {
  var collectiveId = _ref3.collectiveId,
      router = _ref3.router,
      limit = _ref3.limit;
  return {
    CollectiveId: collectiveId,
    isConfirmed: getIsConfirmedFromFilter(router.query.filter),
    batch: router.query.batch === NOT_BATCHED_KEY ? null : router.query.batch,
    offset: Number(router.query.offset) || 0,
    limit: limit || GIFT_CARDS_PER_PAGE
  };
};

var addGiftCardsData = (0,hoc_graphql/* graphql */.B)(giftCardsQuery, {
  options: function options(props) {
    return {
      variables: getGiftCardsVariablesFromProps(props),
      fetchPolicy: 'network-only'
    };
  }
});
GiftCards.__docgenInfo = {
  "description": "A filterable list of gift cards meant to be displayed for organization\nadmins.",
  "methods": [{
    "name": "getQueryParams",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "picked",
      "type": null
    }, {
      "name": "newParams",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderFilters",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "onlyConfirmed",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderNoGiftCardMessage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "onlyConfirmed",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "GiftCards",
  "props": {
    "collectiveId": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "limit": {
      "description": "Max number of items to display",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "data": {
      "description": "Provided by graphql",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "Provided by withRouter",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "@ignore",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_GiftCards = ((0,next_router.withRouter)((0,injectIntl/* default */.ZP)(addGiftCardsData(GiftCards))));
// EXTERNAL MODULE: ./components/CollectiveCard.js
var CollectiveCard = __webpack_require__(68654);
// EXTERNAL MODULE: ./components/Error.js
var components_Error = __webpack_require__(12665);
;// CONCATENATED MODULE: ./components/HostsWithData.js









var HostsWithData_templateObject;

function HostsWithData_createSuper(Derived) { var hasNativeReflectConstruct = HostsWithData_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function HostsWithData_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var COLLECTIVE_CARDS_PER_PAGE = 10;

var HostsWithData = /*#__PURE__*/function (_React$Component) {
  inherits_default()(HostsWithData, _React$Component);

  var _super = HostsWithData_createSuper(HostsWithData);

  function HostsWithData(props) {
    var _this;

    classCallCheck_default()(this, HostsWithData);

    _this = _super.call(this, props);
    _this.fetchMore = _this.fetchMore.bind(assertThisInitialized_default()(_this));
    _this.refetch = _this.refetch.bind(assertThisInitialized_default()(_this));
    _this.state = {
      role: null,
      loading: false
    };
    return _this;
  }

  createClass_default()(HostsWithData, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var onChange = this.props.onChange;
      onChange && this.node && onChange({
        height: this.node.offsetHeight
      });
    }
  }, {
    key: "fetchMore",
    value: function fetchMore(e) {
      var _this2 = this;

      var onChange = this.props.onChange;
      e.target.blur();
      this.setState({
        loading: true
      });
      this.props.fetchMore().then(function () {
        _this2.setState({
          loading: false
        });

        onChange && onChange({
          height: _this2.node.offsetHeight
        });
      });
    }
  }, {
    key: "refetch",
    value: function refetch(role) {
      this.setState({
        role: role
      });
      this.props.refetch({
        role: role
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var data = this.props.data;

      if (data.error) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(components_Error/* default */.Z, {
          message: data.error.message
        });
      }

      if (!data.allHosts || !data.allHosts.collectives) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {});
      }

      var collectives = toConsumableArray_default()(data.allHosts.collectives);

      if (collectives.length === 0) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          className: "empty",
          style: {
            marginTop: '1rem'
          },
          children: this.props.empty || ''
        });
      }

      var limit = this.props.limit || COLLECTIVE_CARDS_PER_PAGE * 2;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        ref: function ref(node) {
          return _this3.node = node;
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          display: "flex",
          flexWrap: "wrap",
          flexDirection: "row",
          justifyContent: "center",
          overflow: "hidden",
          margin: "1rem 0",
          children: collectives.map(function (collective) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(CollectiveCard/* default */.Z, {
              margin: "1rem",
              collective: collective
            }, collective.id);
          })
        }), collectives.length % 10 === 0 && collectives.length >= limit && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          margin: "1rem",
          textAlign: "center",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            onClick: this.fetchMore,
            children: [this.state.loading && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "loading",
              defaultMessage: [{
                "type": 0,
                "value": "loading"
              }]
            }), !this.state.loading && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "loadMore",
              defaultMessage: [{
                "type": 0,
                "value": "load more"
              }]
            })]
          })
        })]
      });
    }
  }]);

  return HostsWithData;
}(react.Component);

var hostsQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(HostsWithData_templateObject || (HostsWithData_templateObject = taggedTemplateLiteral_default()(["\n  query Hosts(\n    $tags: [String]\n    $currency: String\n    $limit: Int\n    $offset: Int\n    $orderBy: HostCollectiveOrderFieldType\n    $orderDirection: OrderDirection\n  ) {\n    allHosts(\n      tags: $tags\n      currency: $currency\n      limit: $limit\n      offset: $offset\n      orderBy: $orderBy\n      orderDirection: $orderDirection\n    ) {\n      id\n      total\n      collectives {\n        id\n        isHost\n        type\n        createdAt\n        slug\n        name\n        description\n        longDescription\n        currency\n        backgroundImage\n        stats {\n          id\n          collectives {\n            id\n            hosted\n          }\n        }\n      }\n    }\n  }\n"])));
var addHostsData = (0,hoc_graphql/* graphql */.B)(hostsQuery, {
  options: function options(props) {
    return {
      variables: {
        tags: props.tags,
        currency: props.currency,
        orderBy: props.orderBy,
        orderDirection: props.orderDirection,
        offset: 0,
        limit: props.limit || COLLECTIVE_CARDS_PER_PAGE * 2
      }
    };
  },
  props: function props(_ref) {
    var data = _ref.data,
        ownProps = _ref.ownProps;
    return {
      data: data,
      fetchMore: function fetchMore() {
        return data.fetchMore({
          variables: {
            offset: data.allHosts.collectives.length,
            limit: ownProps.limit || COLLECTIVE_CARDS_PER_PAGE
          },
          updateQuery: function updateQuery(previousResult, _ref2) {
            var fetchMoreResult = _ref2.fetchMoreResult;

            if (!fetchMoreResult) {
              return previousResult;
            } // Update the results object with new entries


            var _previousResult$allHo = previousResult.allHosts,
                __typename = _previousResult$allHo.__typename,
                total = _previousResult$allHo.total,
                collectives = _previousResult$allHo.collectives;
            var all = collectives.concat(fetchMoreResult.allHosts.collectives);
            return Object.assign({}, previousResult, {
              allHosts: {
                __typename: __typename,
                total: total,
                collectives: all
              }
            });
          }
        });
      }
    };
  }
});
HostsWithData.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "fetchMore",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "e",
      "type": null
    }],
    "returns": null
  }, {
    "name": "refetch",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "role",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "HostsWithData",
  "props": {
    "tags": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "limit": {
      "description": "",
      "type": {
        "name": "number"
      },
      "required": false
    },
    "empty": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "node"
        }, {
          "name": "string"
        }]
      },
      "required": false
    },
    "fetchMore": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "refetch": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "data": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var components_HostsWithData = (addHostsData(HostsWithData));
// EXTERNAL MODULE: ./components/LoadingGrid.js
var LoadingGrid = __webpack_require__(19306);
;// CONCATENATED MODULE: ./components/edit-collective/CreateOrganizationForm.js







function CreateOrganizationForm_createSuper(Derived) { var hasNativeReflectConstruct = CreateOrganizationForm_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CreateOrganizationForm_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }








var CreateOrganizationForm = /*#__PURE__*/function (_React$Component) {
  inherits_default()(CreateOrganizationForm, _React$Component);

  var _super = CreateOrganizationForm_createSuper(CreateOrganizationForm);

  function CreateOrganizationForm(props) {
    var _this;

    classCallCheck_default()(this, CreateOrganizationForm);

    _this = _super.call(this, props);
    _this.handleChange = _this.handleChange.bind(assertThisInitialized_default()(_this));
    _this.state = {
      form: {}
    };
    _this.messages = (0,lib.defineMessages)({
      'order.organization.name': {
        id: "Fields.name",
        defaultMessage: [{
          "type": 0,
          "value": "Name"
        }]
      },
      'order.organization.website': {
        id: "Fields.website",
        defaultMessage: [{
          "type": 0,
          "value": "Website"
        }]
      },
      'order.organization.twitterHandle.description': {
        id: "tier.order.organization.twitterHandle.description",
        defaultMessage: [{
          "type": 0,
          "value": "optional"
        }]
      }
    });
    return _this;
  }

  createClass_default()(CreateOrganizationForm, [{
    key: "handleChange",
    value: function handleChange(attr, value) {
      var form = this.state.form;
      form[attr] = value;
      this.setState({
        form: form
      });
      this.props.onChange(form);
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var intl = this.props.intl;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("section", {
        className: "organizationDetailsForm",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            width: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              className: "horizontal",
              type: "text",
              name: "organization_name",
              label: intl.formatMessage(this.messages['order.organization.name']),
              onChange: function onChange(value) {
                return _this2.handleChange('name', value);
              }
            })
          })
        }, "organization.name.input"), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            width: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              className: "horizontal",
              type: "text",
              name: "organization_website",
              label: intl.formatMessage(this.messages['order.organization.website']),
              onChange: function onChange(value) {
                return _this2.handleChange('website', value);
              }
            })
          })
        }, "organization.website.input"), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            width: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              className: "horizontal",
              type: "text",
              name: "organization_twitterHandle",
              pre: "@",
              label: "Twitter",
              help: intl.formatMessage(this.messages['order.organization.twitterHandle.description']),
              onChange: function onChange(value) {
                return _this2.handleChange('twitterHandle', value);
              }
            })
          })
        }, "organization.twitterHandle.input")]
      });
    }
  }]);

  return CreateOrganizationForm;
}(react.Component);

CreateOrganizationForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "attr",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CreateOrganizationForm",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var edit_collective_CreateOrganizationForm = ((0,injectIntl/* default */.ZP)(CreateOrganizationForm));
;// CONCATENATED MODULE: ./components/edit-collective/CreateHostForm.js











function CreateHostForm_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CreateHostForm_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CreateHostForm_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CreateHostForm_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function CreateHostForm_createSuper(Derived) { var hasNativeReflectConstruct = CreateHostForm_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CreateHostForm_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }












var CreateHostForm = /*#__PURE__*/function (_React$Component) {
  inherits_default()(CreateHostForm, _React$Component);

  var _super = CreateHostForm_createSuper(CreateHostForm);

  function CreateHostForm(props) {
    var _this;

    classCallCheck_default()(this, CreateHostForm);

    _this = _super.call(this, props);

    var hostId = _this.getDefaultHostId();

    _this.state = {
      form: {
        hostId: hostId
      }
    };
    _this.messages = (0,lib.defineMessages)({
      'hostType.label': {
        id: "host.types.label",
        defaultMessage: [{
          "type": 0,
          "value": "Select Host type"
        }]
      },
      'hostId.label': {
        id: "host.hostId.label",
        defaultMessage: [{
          "type": 0,
          "value": "Select Organization"
        }]
      },
      'host.types.user.label': {
        id: "host.types.user.label",
        defaultMessage: [{
          "type": 0,
          "value": "An individual (me)"
        }]
      },
      'host.types.organization.label': {
        id: "host.types.organization.label",
        defaultMessage: [{
          "type": 0,
          "value": "An Organization"
        }]
      },
      'organization.create': {
        id: "host.organization.create",
        defaultMessage: [{
          "type": 0,
          "value": "Create an Organization"
        }]
      }
    });
    return _this;
  }

  createClass_default()(CreateHostForm, [{
    key: "createOrganization",
    value: function () {
      var _createOrganization = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(org) {
        var organization;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.props.createOrganization(org);

              case 2:
                organization = _context.sent;
                this.setState(function (state) {
                  return {
                    host: organization,
                    form: CreateHostForm_objectSpread(CreateHostForm_objectSpread({}, state.form), {}, {
                      hostId: organization.id
                    })
                  };
                });

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function createOrganization(_x) {
        return _createOrganization.apply(this, arguments);
      }

      return createOrganization;
    }()
  }, {
    key: "handleChange",
    value: function handleChange(attr, value) {
      var form = this.state.form;
      form[attr] = value;
      this.setState({
        form: form
      });
    }
  }, {
    key: "getDefaultHostId",
    value: function getDefaultHostId() {
      return get_default()(this.props, 'organizations[0].id', 0);
    }
  }, {
    key: "getOrganizationsOptions",
    value: function getOrganizationsOptions() {
      var organizationsOptions = this.props.organizations.map(function (_ref) {
        var name = _ref.name,
            id = _ref.id;
        return {
          label: name,
          value: id
        };
      });
      organizationsOptions.push({
        label: this.props.intl.formatMessage({
          id: "host.organization.create",
          defaultMessage: [{
            "type": 0,
            "value": "Create an Organization"
          }]
        }),
        value: 0
      });
      return organizationsOptions;
    }
  }, {
    key: "getInputFields",
    value: function getInputFields() {
      var _this2 = this;

      var fields = [{
        name: 'hostId',
        type: 'select',
        options: this.getOrganizationsOptions(),
        value: this.state.form.hostId
      }];
      return fields.map(function (field) {
        if (_this2.messages["".concat(field.name, ".label")]) {
          field.label = _this2.props.intl.formatMessage(_this2.messages["".concat(field.name, ".label")]);
        }

        return field;
      });
    }
  }, {
    key: "getHost",
    value: function getHost() {
      var _this3 = this;

      if (this.state.host) {
        return this.state.host;
      } else {
        return this.props.organizations.find(function (c) {
          return c.id === Number(_this3.state.form.hostId);
        });
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var host = this.getHost();

      var connectedAccounts = host && groupBy_default()(host.connectedAccounts, 'service');

      var stripeAccount = connectedAccounts && connectedAccounts['stripe'] && connectedAccounts['stripe'][0];
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        className: "CreateHostForm",
        children: [this.getInputFields().map(function (field) {
          return (!field.when || field.when()) && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              width: 1,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, CreateHostForm_objectSpread(CreateHostForm_objectSpread({}, field), {}, {
                onChange: function onChange(value) {
                  return _this4.handleChange(field.name, value);
                }
              }))
            })
          }, "".concat(field.name, ".input"));
        }), !host && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_CreateOrganizationForm, {
            onChange: function onChange(org) {
              return _this4.handleChange('organization', org);
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            type: "submit",
            onClick: function onClick() {
              return _this4.createOrganization(_this4.state.form.organization);
            },
            className: "createOrganizationBtn",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "organization.create",
              defaultMessage: [{
                "type": 0,
                "value": "Create Organization"
              }]
            })
          })]
        }), host && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexDirection: ['column', 'row', 'row'],
          justifyContent: "space-between",
          alignItems: "flex-end",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            my: [3],
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonStyle: "primary",
              type: "submit",
              onClick: function onClick() {
                return _this4.props.onSubmit(host);
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "host.link",
                defaultMessage: [{
                  "type": 0,
                  "value": "Yes, use this Organization as the Fiscal Host"
                }]
              })
            })
          }), !stripeAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            textAlign: "right",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditConnectedAccount, {
              collective: host,
              service: "stripe"
            })
          })]
        })]
      });
    }
  }]);

  return CreateHostForm;
}(react.Component);

CreateHostForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "createOrganization",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "org",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "attr",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getDefaultHostId",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getOrganizationsOptions",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getInputFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "getHost",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "CreateHostForm",
  "props": {
    "organizations": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "userCollective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "createOrganization": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_CreateHostForm = ((0,next_router.withRouter)((0,injectIntl/* default */.ZP)(CreateHostForm)));
;// CONCATENATED MODULE: ./components/edit-collective/CreateHostFormWithData.js












var CreateHostFormWithData_templateObject, CreateHostFormWithData_templateObject2;

function CreateHostFormWithData_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CreateHostFormWithData_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CreateHostFormWithData_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CreateHostFormWithData_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



function CreateHostFormWithData_createSuper(Derived) { var hasNativeReflectConstruct = CreateHostFormWithData_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function CreateHostFormWithData_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var CreateHostFormWithData = /*#__PURE__*/function (_React$Component) {
  inherits_default()(CreateHostFormWithData, _React$Component);

  var _super = CreateHostFormWithData_createSuper(CreateHostFormWithData);

  function CreateHostFormWithData(props) {
    var _this;

    classCallCheck_default()(this, CreateHostFormWithData);

    _this = _super.call(this, props);
    _this.createOrganization = _this.createOrganization.bind(assertThisInitialized_default()(_this));
    return _this;
  }

  createClass_default()(CreateHostFormWithData, [{
    key: "createOrganization",
    value: function () {
      var _createOrganization = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(CollectiveInputType) {
        var res, collective, errorMsg;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.setState({
                  status: 'loading'
                });
                CollectiveInputType.type = 'ORGANIZATION';
                _context.prev = 2;
                _context.next = 5;
                return this.props.createCollective(CollectiveInputType);

              case 5:
                res = _context.sent;
                collective = res.data.createCollective;
                return _context.abrupt("return", collective);

              case 10:
                _context.prev = 10;
                _context.t0 = _context["catch"](2);
                errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;
                this.setState({
                  result: {
                    error: errorMsg
                  }
                });
                throw new Error(errorMsg);

              case 15:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[2, 10]]);
      }));

      function createOrganization(_x) {
        return _createOrganization.apply(this, arguments);
      }

      return createOrganization;
    }()
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          data = _this$props.data,
          collective = _this$props.collective;
      var userCollective = data.Collective;

      if (!userCollective) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          py: 3,
          width: 1,
          justifyContent: "center",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingGrid/* default */.Z, {})
        });
      }

      var organizations = [];
      userCollective.memberOf.map(function (membership) {
        organizations.push(membership.collective);
      });
      return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_CreateHostForm, {
        organizations: organizations,
        collective: collective,
        userCollective: userCollective,
        createOrganization: this.createOrganization,
        onSubmit: this.props.onSubmit
      });
    }
  }]);

  return CreateHostFormWithData;
}(react.Component);

var editCollectiveConnectedAccountsQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(CreateHostFormWithData_templateObject || (CreateHostFormWithData_templateObject = taggedTemplateLiteral_default()(["\n  query EditCollectiveConnectedAccounts($slug: String!) {\n    Collective(slug: $slug) {\n      id\n      isHost\n      slug\n      memberOf(role: \"ADMIN\", type: \"ORGANIZATION\") {\n        id\n        collective {\n          id\n          slug\n          name\n          isHost\n          createdAt\n          imageUrl\n          connectedAccounts {\n            id\n            service\n            createdAt\n            updatedAt\n          }\n        }\n      }\n      connectedAccounts {\n        id\n        service\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"])));
var addEditCollectiveConnectedAccountsData = (0,hoc_graphql/* graphql */.B)(editCollectiveConnectedAccountsQuery, {
  options: function options(props) {
    return {
      variables: {
        slug: get_default()(props, 'LoggedInUser.collective.slug')
      }
    };
  }
});
var editCollectiveCreateHostMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(CreateHostFormWithData_templateObject2 || (CreateHostFormWithData_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveCreateHost($collective: CollectiveInputType!) {\n    createCollective(collective: $collective) {\n      id\n      slug\n      name\n      imageUrl\n      createdAt\n    }\n  }\n"])));
var addEditCollectiveCreateHostMutation = (0,hoc_graphql/* graphql */.B)(editCollectiveCreateHostMutation, {
  props: function props(_ref) {
    var ownProps = _ref.ownProps,
        mutate = _ref.mutate;
    return {
      createCollective: function () {
        var _createCollective = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(CollectiveInputType) {
          return regenerator_default().wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.next = 2;
                  return mutate({
                    variables: {
                      collective: CollectiveInputType
                    },
                    update: function update(proxy, _ref2) {
                      var createCollective = _ref2.data.createCollective;
                      var variables = {
                        slug: get_default()(ownProps, 'LoggedInUser.collective.slug')
                      }; // Retrieve the query from the cache

                      var data = cloneDeep_default()(proxy.readQuery({
                        query: editCollectiveConnectedAccountsQuery,
                        variables: variables
                      })); // Insert new Collective at the beginning


                      var membership = {
                        createdAt: createCollective.createdAt,
                        id: Math.round(Math.random() * 10000000),
                        __typename: 'MemberType',
                        collective: CreateHostFormWithData_objectSpread(CreateHostFormWithData_objectSpread({}, createCollective), {}, {
                          isHost: false,
                          connectedAccounts: []
                        })
                      };
                      data.Collective.memberOf.push(membership); // write data back for the query

                      proxy.writeQuery({
                        query: editCollectiveConnectedAccountsQuery,
                        variables: variables,
                        data: data
                      });
                    }
                  });

                case 2:
                  return _context2.abrupt("return", _context2.sent);

                case 3:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2);
        }));

        function createCollective(_x2) {
          return _createCollective.apply(this, arguments);
        }

        return createCollective;
      }()
    };
  }
});
var CreateHostFormWithData_addGraphql = (0,utils/* compose */.qC)(addEditCollectiveConnectedAccountsData, addEditCollectiveCreateHostMutation);
CreateHostFormWithData.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "createOrganization",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "CollectiveInputType",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "CreateHostFormWithData",
  "props": {
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "createCollective": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_CreateHostFormWithData = (CreateHostFormWithData_addGraphql(CreateHostFormWithData));
;// CONCATENATED MODULE: ./components/edit-collective/sections/Host.js











function Host_createSuper(Derived) { var hasNativeReflectConstruct = Host_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function Host_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }























var OptionLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "Host__OptionLabel",
  componentId: "sc-p2wcs9-0"
})(["display:block;font-weight:bold;cursor:pointer;"]);
var Fineprint = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "Host__Fineprint",
  componentId: "sc-p2wcs9-1"
})(["font-size:14px;"]);
var EditCollectiveHostSection = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "Host__EditCollectiveHostSection",
  componentId: "sc-p2wcs9-2"
})(["h2 label{cursor:pointer;width:auto;}select{cursor:pointer;}"]);

var Host = /*#__PURE__*/function (_React$Component) {
  inherits_default()(Host, _React$Component);

  var _super = Host_createSuper(Host);

  function Host(props) {
    var _this;

    classCallCheck_default()(this, Host);

    _this = _super.call(this, props);
    _this.changeHost = _this.changeHost.bind(assertThisInitialized_default()(_this));
    _this.updateSelectedOption = _this.updateSelectedOption.bind(assertThisInitialized_default()(_this));
    _this.state = {
      collective: props.collective,
      showModal: false,
      action: '',
      isSubmitting: false
    };
    return _this;
  }

  createClass_default()(Host, [{
    key: "updateSelectedOption",
    value: function updateSelectedOption(option) {
      this.props.router.push({
        pathname: "/".concat(this.props.collective.slug, "/admin/host"),
        query: {
          selectedOption: option
        }
      });
    }
  }, {
    key: "changeHost",
    value: function () {
      var _changeHost = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var newHost,
            collective,
            _args = arguments;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                newHost = _args.length > 0 && _args[0] !== undefined ? _args[0] : {
                  id: null
                };
                collective = this.props.collective;
                this.setState({
                  showModal: false
                });

                if (!(newHost.id === get_default()(collective, 'host.id'))) {
                  _context.next = 5;
                  break;
                }

                return _context.abrupt("return");

              case 5:
                this.setState({
                  isSubmitting: true
                });
                _context.prev = 6;
                _context.next = 9;
                return this.props.editCollectiveMutation({
                  id: collective.id,
                  HostCollectiveId: newHost.id
                });

              case 9:
                if (!newHost.id) {
                  this.updateSelectedOption('noHost');
                }

              case 10:
                _context.prev = 10;
                this.setState({
                  isSubmitting: false
                });
                return _context.finish(10);

              case 13:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[6,, 10, 13]]);
      }));

      function changeHost() {
        return _changeHost.apply(this, arguments);
      }

      return changeHost;
    }()
  }, {
    key: "renderLegalNameSetInfoMessage",
    value: function renderLegalNameSetInfoMessage(collective) {
      var _collective$host, _collective$host2;

      return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        type: "info",
        fontSize: "13px",
        withIcon: true,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.edit.host.legalName.info",
          defaultMessage: [{
            "type": 0,
            "value": "Please set the legal name "
          }, {
            "type": 5,
            "value": "isSelfHosted",
            "options": {
              "false": {
                "value": [{
                  "type": 0,
                  "value": "of the host"
                }]
              },
              "other": {
                "value": []
              }
            }
          }, {
            "type": 0,
            "value": " in the Info section of "
          }, {
            "type": 8,
            "value": "SettingsLink",
            "children": [{
              "type": 0,
              "value": "the settings"
            }]
          }, {
            "type": 0,
            "value": ". This is required if the legal name is different than the display name for tax and accounting purposes."
          }],
          values: {
            SettingsLink: (0,I18nFormatters/* getI18nLink */.fw)({
              href: "/".concat((_collective$host = collective.host) === null || _collective$host === void 0 ? void 0 : _collective$host.slug, "/admin")
            }),
            isSelfHosted: collective.id === ((_collective$host2 = collective.host) === null || _collective$host2 === void 0 ? void 0 : _collective$host2.id)
          }
        })
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this,
          _collective$host3;

      var _this$props = this.props,
          LoggedInUser = _this$props.LoggedInUser,
          collective = _this$props.collective,
          router = _this$props.router,
          intl = _this$props.intl;
      var _this$state = this.state,
          showModal = _this$state.showModal,
          action = _this$state.action;
      var locale = intl.locale;

      var selectedOption = get_default()(router, 'query.selectedOption', 'noHost');

      var hostMembership = get_default()(collective, 'members', []).find(function (m) {
        return m.role === 'HOST';
      });

      var closeModal = function closeModal() {
        return _this2.setState({
          showModal: false
        });
      };

      var showLegalNameInfoBox = (LoggedInUser === null || LoggedInUser === void 0 ? void 0 : LoggedInUser.isHostAdmin(collective)) && !(collective !== null && collective !== void 0 && (_collective$host3 = collective.host) !== null && _collective$host3 !== void 0 && _collective$host3.legalName);

      if (get_default()(collective, 'host.id') === collective.id) {
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "editCollective.selfHost.label",
              defaultMessage: [{
                "type": 5,
                "value": "type",
                "options": {
                  "COLLECTIVE": {
                    "value": [{
                      "type": 0,
                      "value": "Your Collective"
                    }]
                  },
                  "FUND": {
                    "value": [{
                      "type": 0,
                      "value": "Your Fund"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "Your Account"
                    }]
                  }
                }
              }, {
                "type": 0,
                "value": " hold its own funds; it doesn't use a Fiscal Host."
              }],
              values: {
                type: collective.type
              }
            })
          }), collective.stats.balance > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment, {
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)("p", {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "editCollective.selfHost.balance",
                defaultMessage: [{
                  "type": 0,
                  "value": "Current balance: "
                }, {
                  "type": 1,
                  "value": "balance"
                }, {
                  "type": 0,
                  "value": "."
                }],
                values: {
                  balance: (0,currency_utils/* formatCurrency */.xG)(collective.stats.balance, collective.currency, {
                    locale: locale
                  }),
                  type: collective.type
                }
              }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "editCollective.selfHost.change.balanceNotEmpty",
                defaultMessage: [{
                  "type": 0,
                  "value": "To change your Fiscal Host, you first need to empty "
                }, {
                  "type": 5,
                  "value": "type",
                  "options": {
                    "COLLECTIVE": {
                      "value": [{
                        "type": 0,
                        "value": "your Collective's balance"
                      }]
                    },
                    "FUND": {
                      "value": [{
                        "type": 0,
                        "value": "your Fund's balance"
                      }]
                    },
                    "other": {
                      "value": [{
                        "type": 0,
                        "value": "your balance"
                      }]
                    }
                  }
                }, {
                  "type": 0,
                  "value": " by submitting and paying expenses."
                }],
                values: {
                  type: collective.type
                }
              })]
            })
          }), showLegalNameInfoBox && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            children: this.renderLegalNameSetInfoMessage(collective)
          }), collective.stats.balance === 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                buttonStyle: "primary",
                type: "submit",
                onClick: function onClick() {
                  return _this2.changeHost();
                },
                minWidth: 200,
                loading: this.state.isSubmitting,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editCollective.selfHost.removeBtn",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Reset Fiscal Host"
                  }]
                })
              })
            })
          })]
        });
      }

      if (get_default()(collective, 'host.id')) {
        var name = collective.host.name;
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: ['column', 'row'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              p: 1,
              mr: 3,
              width: [1, 1 / 2],
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(CollectiveCard/* default */.Z, {
                collective: collective.host,
                membership: hostMembership
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              children: [!collective.isActive && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "editCollective.host.pending",
                    defaultMessage: [{
                      "type": 0,
                      "value": "You applied to be hosted by "
                    }, {
                      "type": 1,
                      "value": "host"
                    }, {
                      "type": 0,
                      "value": " on "
                    }, {
                      "type": 1,
                      "value": "date"
                    }, {
                      "type": 0,
                      "value": ". Your application is being reviewed."
                    }],
                    values: {
                      host: get_default()(collective, 'host.name'),
                      date: (0,utils/* formatDate */.p6)(get_default()(hostMembership, 'createdAt'), {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                      })
                    }
                  })
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                    buttonStyle: "primary",
                    type: "submit",
                    onClick: function onClick() {
                      return _this2.setState({
                        showModal: true,
                        action: 'Withdraw'
                      });
                    },
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "editCollective.host.cancelApplicationBtn",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Withdraw application"
                      }]
                    })
                  })
                })]
              }), collective.isActive && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "editCollective.host.label",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Your Fiscal Host is "
                    }, {
                      "type": 1,
                      "value": "host"
                    }, {
                      "type": 0,
                      "value": "."
                    }],
                    values: {
                      host: get_default()(collective, 'host.name')
                    }
                  })
                }), collective.stats.balance > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "editCollective.host.balance",
                    defaultMessage: [{
                      "type": 0,
                      "value": "It currently holds "
                    }, {
                      "type": 1,
                      "value": "balance"
                    }, {
                      "type": 0,
                      "value": " on behalf of "
                    }, {
                      "type": 5,
                      "value": "type",
                      "options": {
                        "COLLECTIVE": {
                          "value": [{
                            "type": 0,
                            "value": "your Collective"
                          }]
                        },
                        "FUND": {
                          "value": [{
                            "type": 0,
                            "value": "your Fund"
                          }]
                        },
                        "other": {
                          "value": [{
                            "type": 0,
                            "value": "your Account"
                          }]
                        }
                      }
                    }, {
                      "type": 0,
                      "value": "."
                    }],
                    values: {
                      balance: (0,currency_utils/* formatCurrency */.xG)(collective.stats.balance, collective.currency, {
                        locale: locale
                      }),
                      type: collective.type
                    }
                  })
                }), collective.stats.balance > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "editCollective.host.change.balanceNotEmpty",
                    defaultMessage: [{
                      "type": 0,
                      "value": "To change your Fiscal Host, you first need to empty "
                    }, {
                      "type": 5,
                      "value": "type",
                      "options": {
                        "COLLECTIVE": {
                          "value": [{
                            "type": 0,
                            "value": "your Collective's balance"
                          }]
                        },
                        "FUND": {
                          "value": [{
                            "type": 0,
                            "value": "your Fund's balance"
                          }]
                        },
                        "other": {
                          "value": [{
                            "type": 0,
                            "value": "your balance"
                          }]
                        }
                      }
                    }, {
                      "type": 0,
                      "value": ". You can do this by submitting expenses, making financial contributions, or sending the balance to your Fiscal Host using the "
                    }, {
                      "type": 1,
                      "value": "emptyBalanceLink"
                    }, {
                      "type": 0,
                      "value": " feature."
                    }],
                    values: {
                      type: collective.type,
                      emptyBalanceLink: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                        href: "/".concat(collective.slug, "/admin/advanced"),
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "emptyBalance",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Empty Balance"
                          }]
                        })
                      })
                    }
                  })
                }), collective.stats.balance === 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                      buttonStyle: "primary",
                      type: "submit",
                      onClick: function onClick() {
                        return _this2.setState({
                          showModal: true,
                          action: 'Remove'
                        });
                      },
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                        id: "editCollective.host.removeBtn",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Remove Host"
                        }]
                      })
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Fineprint, {
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "editCollective.host.change.removeFirst",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Without a Fiscal Host, "
                      }, {
                        "type": 5,
                        "value": "type",
                        "options": {
                          "COLLECTIVE": {
                            "value": [{
                              "type": 0,
                              "value": "your Collective"
                            }]
                          },
                          "FUND": {
                            "value": [{
                              "type": 0,
                              "value": "your Fund"
                            }]
                          },
                          "other": {
                            "value": []
                          }
                        }
                      }, {
                        "type": 0,
                        "value": " won't be able to accept financial contributions. You will be able to apply to another Fiscal Host."
                      }],
                      values: {
                        type: collective.type
                      }
                    })
                  })]
                }), showLegalNameInfoBox && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                  mt: 4,
                  children: this.renderLegalNameSetInfoMessage(collective)
                })]
              })]
            })]
          }), showModal && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
            width: "570px",
            onClose: closeModal,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
              onClose: closeModal,
              children: action === 'Remove' ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.editHost.remove",
                values: {
                  name: name
                },
                defaultMessage: [{
                  "type": 0,
                  "value": "Remove "
                }, {
                  "type": 1,
                  "value": "name"
                }]
              }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.editHost.header",
                values: {
                  name: name
                },
                defaultMessage: [{
                  "type": 0,
                  "value": "Withdraw application to "
                }, {
                  "type": 1,
                  "value": "name"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
              children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
                children: [action === 'Withdraw' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "collective.editHost.withdrawApp",
                  values: {
                    name: name
                  },
                  defaultMessage: [{
                    "type": 0,
                    "value": "Are you sure you want to withdraw your application to "
                  }, {
                    "type": 1,
                    "value": "name"
                  }, {
                    "type": 0,
                    "value": "?"
                  }]
                }), action === 'Remove' && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "collective.editHost.removeHost",
                  values: {
                    name: name
                  },
                  defaultMessage: [{
                    "type": 0,
                    "value": "Are you sure you want to remove "
                  }, {
                    "type": 1,
                    "value": "name"
                  }, {
                    "type": 0,
                    "value": "?"
                  }]
                })]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
              children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
                display: "flex",
                justifyContent: "flex-end",
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                  mx: 20,
                  onClick: function onClick() {
                    return _this2.setState({
                      showModal: false
                    });
                  },
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "actions.cancel",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Cancel"
                    }]
                  })
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                  buttonStyle: "primary",
                  onClick: function onClick() {
                    return _this2.changeHost();
                  },
                  "data-cy": "continue",
                  children: action
                })]
              })
            })]
          })]
        });
      }

      var connectedAccounts = groupBy_default()(collective.connectedAccounts, 'service');

      var stripeAccount = connectedAccounts && connectedAccounts['stripe'] && connectedAccounts['stripe'][0];
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(EditCollectiveHostSection, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
          fontSize: "15px",
          mb: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "acceptContributions.picker.subtitle",
            defaultMessage: [{
              "type": 0,
              "value": "Who will hold money on behalf of this Collective?"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          id: "noHost",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              flex: "0 0 35px",
              mr: 2,
              pl: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
                type: "radio",
                name: "host-radio",
                id: "host-radio-noHost",
                checked: selectedOption === 'noHost',
                onChange: function onChange() {
                  return _this2.updateSelectedOption('noHost');
                },
                className: "hostRadio"
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              mb: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OptionLabel, {
                htmlFor: "host-radio-noHost",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "tcxpLX",
                  defaultMessage: [{
                    "type": 0,
                    "value": "No one"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.edit.host.noHost.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "You can't receive financial contributions or use the budget features. You can still edit your profile page, submit expenses to be paid later, and post updates."
                }]
              })]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          id: "selfHost",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              flex: "0 0 35px",
              mr: 2,
              pl: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
                type: "radio",
                name: "host-radio",
                id: "host-radio-selfHost",
                checked: selectedOption === 'selfHost',
                onChange: function onChange() {
                  return _this2.updateSelectedOption('selfHost');
                },
                className: "hostRadio"
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              mb: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OptionLabel, {
                htmlFor: "host-radio-selfHost",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "acceptContributions.picker.ourselves",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Independent Collective"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.edit.host.selfHost.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Simply connect a bank account for a single Collective. You will be responsible for accounting, taxes, payments, and liability."
                }]
              }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                href: "https://docs.opencollective.com/help/independent-collectives",
                openInNewTab: true,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "moreInfo",
                  defaultMessage: [{
                    "type": 0,
                    "value": "More info"
                  }]
                })
              }), selectedOption === 'selfHost' && LoggedInUser && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                flexDirection: ['column', 'row', 'row'],
                justifyContent: "space-between",
                alignItems: "flex-end",
                mt: 3,
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                  mb: [3],
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                    buttonStyle: "primary",
                    type: "submit",
                    onClick: function onClick() {
                      return _this2.changeHost({
                        id: collective.id
                      });
                    },
                    loading: this.state.isSubmitting,
                    minWidth: 200,
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "host.selfHost.confirm",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Yes, Activate Independent Collective"
                      }]
                    })
                  })
                }), !stripeAccount && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                  textAlign: "right",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditConnectedAccount, {
                    collective: collective,
                    service: "stripe",
                    options: {
                      redirect: "".concat((0,utils/* getWebsiteUrl */.ls)(), "/").concat(collective.slug, "/admin/host?selectedOption=selfHost")
                    }
                  })
                })]
              })]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          id: "ownHost",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              flex: "0 0 35px",
              mr: 2,
              pl: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
                type: "radio",
                id: "host-radio-ownHost",
                name: "host-radio",
                checked: selectedOption === 'ownHost',
                onChange: function onChange() {
                  return _this2.updateSelectedOption('ownHost');
                },
                className: "hostRadio"
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              mb: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OptionLabel, {
                htmlFor: "host-radio-ownHost",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "acceptContributions.organization.subtitle",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Our Own Fiscal Host"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.edit.host.useOwn.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Select or create your own Fiscal Host, which you manage to hold funds for multiple Collectives, to hold funds and do associated admin for this Collective."
                }]
              }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                href: "https://docs.opencollective.com/help/fiscal-hosts/become-a-fiscal-host",
                openInNewTab: true,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "moreInfo",
                  defaultMessage: [{
                    "type": 0,
                    "value": "More info"
                  }]
                })
              }), selectedOption === 'ownHost' && LoggedInUser && /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_CreateHostFormWithData, {
                collective: collective,
                LoggedInUser: LoggedInUser,
                onSubmit: function onSubmit(hostCollective) {
                  return _this2.changeHost(hostCollective);
                }
              })]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          id: "findHost",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              flex: "0 0 35px",
              mr: 2,
              pl: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
                type: "radio",
                name: "host-radio",
                id: "host-radio-findHost",
                checked: selectedOption === 'findHost',
                onChange: function onChange() {
                  return _this2.updateSelectedOption('findHost');
                },
                className: "hostRadio"
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              mb: 4,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OptionLabel, {
                htmlFor: "host-radio-findHost",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "collective.edit.host.findHost.title",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Apply to a Fiscal Host"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "collective.edit.host.findHost.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Join an existing Fiscal Host who will hold funds on your behalf and take care of accounting, taxes, banking, admin, payments, and liability. Most Hosts charge a fee for this service (you can review the details before choosing a Host)."
                }]
              }), selectedOption === 'findHost' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
                  display: "flex",
                  alignItems: "baseline",
                  mt: 2,
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
                    fontSize: "13px",
                    mr: 2,
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "collective.edit.host.suggestedHosts.title",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Suggested Hosts"
                      }]
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                    as: Link/* default */.Z,
                    fontSize: "13px",
                    href: "".concat(collective.slug, "/accept-financial-contributions/host"),
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "collective.edit.host.viewAllHosts",
                      defaultMessage: [{
                        "type": 0,
                        "value": "View all Fiscal Hosts"
                      }]
                    })
                  })]
                }), collective.tags && collective.tags.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                  color: "#666f80",
                  fontSize: "12px",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "collective.edit.host.suggestedHosts.description",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Based on the tags ("
                    }, {
                      "type": 1,
                      "value": "tags"
                    }, {
                      "type": 0,
                      "value": ")"
                    }],
                    values: {
                      tags: collective.tags.join(', ')
                    }
                  })
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_HostsWithData, {
                  limit: 6,
                  tags: collective.tags,
                  empty: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "collective.edit.host.suggestedHosts.empty",
                    defaultMessage: [{
                      "type": 0,
                      "value": "No suggestions. Please look at all Hosts or consider creating a new one."
                    }]
                  })
                })]
              })]
            })]
          })
        })]
      });
    }
  }]);

  return Host;
}(react.Component);

Host.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "updateSelectedOption",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "option",
      "type": null
    }],
    "returns": null
  }, {
    "name": "changeHost",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "newHost",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderLegalNameSetInfoMessage",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "collective",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "Host",
  "props": {
    "goals": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "object"
        }
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveMutation": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_Host = ((0,next_router.withRouter)((0,injectIntl/* default */.ZP)(Host)));
;// CONCATENATED MODULE: ./components/edit-collective/sections/HostVirtualCardsSettings.js





var HostVirtualCardsSettings_templateObject;


















var VIRTUAL_CARDS_POLICY_MAX_LENGTH = 3000; // 600 words * 5 characters average length word

var updateAccountSettingsMutation = (0,graphql_tag_lib/* default */.ZP)(HostVirtualCardsSettings_templateObject || (HostVirtualCardsSettings_templateObject = taggedTemplateLiteral_default()(["\n  mutation UpdateAccountSettings($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      type\n      isActive\n      settings\n    }\n  }\n"])));
var HostVirtualCardsSettings_messages = (0,lib.defineMessages)({
  'policy.placeholder': {
    id: "Host.VirtualCards.Policy.Placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. deadlines to submit receipts, allowed charges, limits, or who to contact with questions."
    }]
  }
});

var HostVirtualCards = function HostVirtualCards(props) {
  var _props$collective$set, _props$collective$set2;

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useMutation = (0,client.useMutation)(updateAccountSettingsMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    onError: function onError(e) {
      addToast({
        type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
        message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Host.VirtualCards.Settings.Error",
          defaultMessage: [{
            "type": 0,
            "value": "Error updating setting: "
          }, {
            "type": 1,
            "value": "error"
          }],
          values: {
            error: e.message
          }
        })
      });
    }
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      updateAccountSetting = _useMutation2[0],
      updateLoading = _useMutation2[1].loading;

  var _React$useState = react.useState(((_props$collective$set = props.collective.settings) === null || _props$collective$set === void 0 ? void 0 : (_props$collective$set2 = _props$collective$set.virtualcards) === null || _props$collective$set2 === void 0 ? void 0 : _props$collective$set2.policy) || ''),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      virtualCardPolicy = _React$useState2[0],
      setVirtualCardPolicy = _React$useState2[1];

  var handleSettingsUpdate = function handleSettingsUpdate(key) {
    return /*#__PURE__*/function () {
      var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(value) {
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return updateAccountSetting({
                  variables: {
                    account: {
                      legacyId: props.collective.id
                    },
                    key: key,
                    value: value
                  }
                });

              case 2:
                addToast({
                  type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                  message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "Host.VirtualCards.Settings.Success",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Setting updated"
                    }]
                  })
                });

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }();
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Host.VirtualCards.Settings.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Settings and Policy"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.VirtualCards.RequestCard.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Enable card requests"
            }]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Host.VirtualCards.RequestCard.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives can request a card to be linked to their budget."
              }]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          name: "virtualcards.requestcard",
          htmlFor: "virtualcards.requestcard",
          disabled: updateLoading,
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              name: "application",
              className: "horizontal",
              type: "switch",
              id: inputProps.id,
              inputName: inputProps.name,
              onChange: handleSettingsUpdate(inputProps.name),
              defaultValue: get_default()(props.collective, "settings.".concat(inputProps.name))
            });
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.VirtualCards.Reminder.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Automatically notify collectives about pending receipts"
            }]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Host.VirtualCards.Reminder.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Send missing receipt reminder after 15 and 29 days after syncing the transaction."
              }]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          name: "virtualcards.reminder",
          htmlFor: "virtualcards.reminder",
          disabled: updateLoading,
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              name: "application",
              className: "horizontal",
              type: "switch",
              id: inputProps.id,
              inputName: inputProps.name,
              onChange: handleSettingsUpdate(inputProps.name),
              defaultValue: get_default()(props.collective, "settings.".concat(inputProps.name))
            });
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        mt: 4,
        justifyContent: "space-between",
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.VirtualCards.AutoPause.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Automatically suspend cards"
            }]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "11px",
            fontWeight: "400",
            color: "black.600",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Host.VirtualCards.AutoPause.Description",
              defaultMessage: [{
                "type": 0,
                "value": "Automatically suspend cards with pending receipts after 31 days and resume after all receipts are submitted."
              }]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          name: "virtualcards.autopause",
          htmlFor: "virtualcards.autopause",
          disabled: updateLoading,
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
              name: "application",
              className: "horizontal",
              type: "switch",
              id: inputProps.id,
              inputName: inputProps.name,
              onChange: handleSettingsUpdate(inputProps.name),
              defaultValue: get_default()(props.collective, "settings.".concat(inputProps.name))
            });
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
        name: "virtualcards.policy",
        htmlFor: "virtualcards.policy",
        disabled: updateLoading,
        mt: 4,
        label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          lineHeight: "20px",
          fontSize: "14px",
          fontWeight: "500",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            mr: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Host.VirtualCards.Policy.Title",
              defaultMessage: [{
                "type": 0,
                "value": "Virtual Card Policy"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
            content: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Host.VirtualCards.Policy.ToolTip",
              defaultMessage: [{
                "type": 0,
                "value": "This policy text will appear in a pop up when someone 'Requests a Virtual Card' from the Action menu on the collective's page."
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Info_esm/* Info */.k, {
              size: 16
            })
          })]
        }),
        children: function children(inputProps) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(RichTextEditor["default"], {
            withBorders: true,
            showCount: true,
            maxLength: VIRTUAL_CARDS_POLICY_MAX_LENGTH,
            version: "simplified",
            editorMinHeight: "20rem",
            editorMaxHeight: 500,
            id: inputProps.id,
            inputName: inputProps.name,
            onChange: function onChange(e) {
              return setVirtualCardPolicy(e.target.value);
            },
            value: virtualCardPolicy,
            placeholder: formatMessage(HostVirtualCardsSettings_messages['policy.placeholder']),
            fontSize: "14px"
          });
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        mt: 10,
        loading: updateLoading,
        onClick: function onClick() {
          return handleSettingsUpdate('virtualcards.policy')(virtualCardPolicy);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Host.VirtualCards.Policy.Save",
          defaultMessage: [{
            "type": 0,
            "value": "Save Policy"
          }]
        })
      })]
    })
  });
};

HostVirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostVirtualCards",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "number",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "settings": {
            "name": "shape",
            "value": {
              "virtualcards": {
                "name": "shape",
                "value": {
                  "autopause": {
                    "name": "bool",
                    "required": false
                  },
                  "requestcard": {
                    "name": "bool",
                    "required": false
                  },
                  "policy": {
                    "name": "string",
                    "required": false
                  }
                },
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var HostVirtualCardsSettings = (HostVirtualCards);
// EXTERNAL MODULE: ./node_modules/lodash/merge.js
var merge = __webpack_require__(82492);
var merge_default = /*#__PURE__*/__webpack_require__.n(merge);
// EXTERNAL MODULE: ./node_modules/@stripe/react-stripe-js/dist/react-stripe.umd.js
var react_stripe_umd = __webpack_require__(86664);
// EXTERNAL MODULE: ./lib/stripe/index.js
var lib_stripe = __webpack_require__(79936);
// EXTERNAL MODULE: ./pages/confirmOrder.js
var confirmOrder = __webpack_require__(46224);
// EXTERNAL MODULE: ./components/NewCreditCardForm.js
var NewCreditCardForm = __webpack_require__(86501);
// EXTERNAL MODULE: ./components/recurring-contributions/UpdatePaymentMethodPopUp.js
var UpdatePaymentMethodPopUp = __webpack_require__(43072);
// EXTERNAL MODULE: ./components/StripeProvider.js
var StripeProvider = __webpack_require__(41499);
;// CONCATENATED MODULE: ./components/edit-collective/EditPaymentMethod.tsx











var EditPaymentMethod = function EditPaymentMethod(_ref) {
  var collectiveSlug = _ref.collectiveSlug,
      paymentMethod = _ref.paymentMethod,
      isSaving = _ref.isSaving,
      nbActiveSubscriptions = _ref.nbActiveSubscriptions,
      needsConfirmation = _ref.needsConfirmation,
      onConfirm = _ref.onConfirm,
      onRemove = _ref.onRemove;
  var intl = (0,useIntl/* default */.Z)();
  var isStripeCreditCard = (0,payment_methods/* matchPm */.VX)(paymentMethod, payment_methods/* PAYMENT_METHOD_SERVICE.STRIPE */.tp.STRIPE, payment_methods/* PAYMENT_METHOD_TYPE.CREDITCARD */.td.CREDITCARD);
  var canRemove = !nbActiveSubscriptions && isStripeCreditCard;
  var hasActions = canRemove || nbActiveSubscriptions || needsConfirmation;
  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: ['column-reverse', null, 'row'],
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(_StyledFlex, {
        alignItems: "center",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          minWidth: "150px",
          as: "label",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethod.typeSelect",
            values: {
              type: paymentMethod.type.toLowerCase()
            },
            defaultMessage: [{
              "type": 5,
              "value": "type",
              "options": {
                "giftcard": {
                  "value": [{
                    "type": 0,
                    "value": "Gift card"
                  }]
                },
                "creditcard": {
                  "value": [{
                    "type": 0,
                    "value": "Credit card"
                  }]
                },
                "prepaid": {
                  "value": [{
                    "type": 0,
                    "value": "Prepaid"
                  }]
                },
                "other": {
                  "value": []
                }
              }
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mb: 2,
            children: (0,payment_method_label/* paymentMethodLabelWithIcon */.FF)(intl, paymentMethod)
          }), Boolean(nbActiveSubscriptions) && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethod.activeSubscriptions",
            defaultMessage: [{
              "type": 1,
              "value": "n"
            }, {
              "type": 0,
              "value": " active "
            }, {
              "type": 6,
              "value": "n",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "recurring financial contribution"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "recurring financial contributions"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }],
            values: {
              n: nbActiveSubscriptions
            }
          })]
        })]
      }), hasActions && /*#__PURE__*/(0,jsx_runtime.jsxs)(_StyledFlex2, {
        mb: [3, 2, 0],
        justifyContent: ['center', null, 'flex-end'],
        alignItems: ['center', null, 'flex-start'],
        children: [Boolean(nbActiveSubscriptions) && /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
          href: "/".concat(collectiveSlug, "/manage-contributions"),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonSize: "medium",
            mx: 1,
            disabled: isSaving,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethod.editSubscriptions",
              defaultMessage: [{
                "type": 0,
                "value": "Edit recurring financial contributions"
              }]
            })
          })
        }), needsConfirmation && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          disabled: isSaving,
          buttonStyle: "warningSecondary",
          buttonSize: "medium",
          onClick: function onClick() {
            return onConfirm(paymentMethod);
          },
          mx: 1,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethod.confirm",
            defaultMessage: [{
              "type": 0,
              "value": "Confirm"
            }]
          })
        }), canRemove && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          disabled: isSaving,
          buttonStyle: "standard",
          buttonSize: "medium",
          onClick: function onClick() {
            return onRemove(paymentMethod);
          },
          mx: 1,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Remove",
            defaultMessage: [{
              "type": 0,
              "value": "Remove"
            }]
          })
        })]
      })]
    })
  });
};

EditPaymentMethod.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditPaymentMethod",
  "props": {
    "collectiveSlug": {
      "required": true,
      "tsType": {
        "name": "string"
      },
      "description": ""
    },
    "isSaving": {
      "required": true,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "needsConfirmation": {
      "required": true,
      "tsType": {
        "name": "boolean"
      },
      "description": ""
    },
    "nbActiveSubscriptions": {
      "required": true,
      "tsType": {
        "name": "number"
      },
      "description": ""
    },
    "paymentMethod": {
      "required": true,
      "tsType": {
        "name": "PaymentMethod"
      },
      "description": ""
    },
    "onConfirm": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(paymentMethod: PaymentMethod) => void",
        "signature": {
          "arguments": [{
            "name": "paymentMethod",
            "type": {
              "name": "PaymentMethod"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    },
    "onRemove": {
      "required": true,
      "tsType": {
        "name": "signature",
        "type": "function",
        "raw": "(paymentMethod: PaymentMethod) => void",
        "signature": {
          "arguments": [{
            "name": "paymentMethod",
            "type": {
              "name": "PaymentMethod"
            }
          }],
          "return": {
            "name": "void"
          }
        }
      },
      "description": ""
    }
  }
};
/* harmony default export */ var edit_collective_EditPaymentMethod = (EditPaymentMethod);

var _StyledFlex = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "EditPaymentMethod___StyledFlex",
  componentId: "sc-1b2006h-0"
})({
  flexGrow: 1
});

var _StyledFlex2 = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "EditPaymentMethod___StyledFlex2",
  componentId: "sc-1b2006h-1"
})({
  minWidth: 230
});
;// CONCATENATED MODULE: ./components/edit-collective/sections/PaymentMethods.js

















var PaymentMethods_templateObject, PaymentMethods_templateObject2, PaymentMethods_templateObject3;



function PaymentMethods_createSuper(Derived) { var hasNativeReflectConstruct = PaymentMethods_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function PaymentMethods_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






























var EditPaymentMethods = /*#__PURE__*/function (_React$Component) {
  inherits_default()(EditPaymentMethods, _React$Component);

  var _super = PaymentMethods_createSuper(EditPaymentMethods);

  function EditPaymentMethods(props) {
    var _this;

    classCallCheck_default()(this, EditPaymentMethods);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "state", {
      showCreditCardForm: false,
      newCreditCardInfo: null,
      bankDetails: null,
      error: null,
      stripe: null,
      stripeElements: null,
      submitting: false,
      removedId: null,
      savingId: null
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "submitNewCreditCard", /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      var data, cardElement, _yield$_this$state$st, token, error, newStripePaymentMethod, newCreditCardInfo, res, _res$data$addCreditCa, paymentMethod, stripeError;

      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              data = get_default()(_this.state, 'newCreditCardInfo.value');

              if (!(!data || !_this.state.stripe)) {
                _context.next = 5;
                break;
              }

              _this.setState({
                error: 'There was a problem initializing the payment form'
              });

              _context.next = 31;
              break;

            case 5:
              if (!data.error) {
                _context.next = 9;
                break;
              }

              _this.setState({
                error: data.error.message
              });

              _context.next = 31;
              break;

            case 9:
              _context.prev = 9;

              _this.setState({
                submitting: true
              });

              cardElement = _this.state.stripeElements.getElement(react_stripe_umd.CardElement);
              _context.next = 14;
              return _this.state.stripe.createToken(cardElement);

            case 14:
              _yield$_this$state$st = _context.sent;
              token = _yield$_this$state$st.token;
              error = _yield$_this$state$st.error;

              if (!error) {
                _context.next = 19;
                break;
              }

              throw error;

            case 19:
              newStripePaymentMethod = (0,lib_stripe/* stripeTokenToPaymentMethod */.kJ)(token);
              newCreditCardInfo = merge_default()(newStripePaymentMethod.data, pick_default()(newStripePaymentMethod, ['token']));
              _context.next = 23;
              return _this.props.createCreditCardEditCollective({
                variables: {
                  creditCardInfo: newCreditCardInfo,
                  name: get_default()(newStripePaymentMethod, 'name'),
                  account: {
                    id: _this.props.data.account.id
                  }
                }
              });

            case 23:
              res = _context.sent;
              _res$data$addCreditCa = res.data.addCreditCard, paymentMethod = _res$data$addCreditCa.paymentMethod, stripeError = _res$data$addCreditCa.stripeError;

              if (stripeError) {
                _this.handleStripeError(paymentMethod, stripeError);
              } else {
                _this.handleSuccess('setup');
              }

              _context.next = 31;
              break;

            case 28:
              _context.prev = 28;
              _context.t0 = _context["catch"](9);

              _this.setState({
                error: _context.t0.message,
                submitting: false
              });

            case 31:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[9, 28]]);
    })));

    defineProperty_default()(assertThisInitialized_default()(_this), "confirmCreditCard", /*#__PURE__*/function () {
      var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(paymentMethod) {
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;

                _this.setState({
                  savingId: paymentMethod.id
                });

                _context2.next = 4;
                return _this.props.confirmCreditCardEditCollective({
                  variables: {
                    paymentMethod: {
                      id: paymentMethod.id
                    }
                  },
                  refetchQueries: [{
                    query: paymentMethodsQuery,
                    variables: {
                      collectiveSlug: _this.props.collectiveSlug
                    },
                    context: helpers/* API_V2_CONTEXT */.T
                  }]
                });

              case 4:
                _context2.next = 9;
                break;

              case 6:
                _context2.prev = 6;
                _context2.t0 = _context2["catch"](0);

                _this.props.addToast({
                  type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                  message: (0,errors/* i18nGraphqlException */.t2)(_this.props.intl, _context2.t0)
                });

              case 9:
                _context2.prev = 9;

                _this.setState({
                  savingId: null
                });

                return _context2.finish(9);

              case 12:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, null, [[0, 6, 9, 12]]);
      }));

      return function (_x) {
        return _ref2.apply(this, arguments);
      };
    }());

    defineProperty_default()(assertThisInitialized_default()(_this), "confirmOrderForPaymentMethod", /*#__PURE__*/function () {
      var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3(paymentMethod) {
        var orderToConfirm, res, stripeError;
        return regenerator_default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;

                _this.setState({
                  savingId: paymentMethod.id
                });

                orderToConfirm = paymentMethod.orders.nodes.find(function (order) {
                  return order.needsConfirmation;
                });
                _context3.next = 5;
                return _this.props.confirmOrder({
                  variables: {
                    order: {
                      id: orderToConfirm.id
                    },
                    refetchQueries: [{
                      query: paymentMethodsQuery,
                      context: helpers/* API_V2_CONTEXT */.T
                    }]
                  }
                });

              case 5:
                res = _context3.sent;
                stripeError = res.data.confirmOrder.stripeError;

                if (!stripeError) {
                  _context3.next = 12;
                  break;
                }

                _context3.next = 10;
                return _this.handleStripeError(paymentMethod, stripeError);

              case 10:
                _context3.next = 13;
                break;

              case 12:
                _this.handleSuccess('payment');

              case 13:
                _context3.next = 18;
                break;

              case 15:
                _context3.prev = 15;
                _context3.t0 = _context3["catch"](0);

                _this.props.addToast({
                  type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                  message: (0,errors/* i18nGraphqlException */.t2)(_this.props.intl, _context3.t0)
                });

              case 18:
                _context3.prev = 18;

                _this.setState({
                  savingId: null
                });

                return _context3.finish(18);

              case 21:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, null, [[0, 15, 18, 21]]);
      }));

      return function (_x2) {
        return _ref3.apply(this, arguments);
      };
    }());

    defineProperty_default()(assertThisInitialized_default()(_this), "handleSuccess", function (successType) {
      _this.props.data.refetch();

      if (successType) {
        var pathname = _this.props.router.asPath.split('?')[0];

        _this.props.router.replace({
          pathname: pathname,
          query: {
            successType: successType
          }
        }, undefined, {
          shallow: true
        });
      }

      _this.setState({
        showCreditCardForm: false,
        error: null,
        newCreditCardInfo: null,
        submitting: false
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "handleStripeError", /*#__PURE__*/function () {
      var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee4(paymentMethod, stripeError) {
        var message, response, newError, stripe, result, _stripe, _result;

        return regenerator_default().wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                message = stripeError.message, response = stripeError.response;

                if (response) {
                  _context4.next = 5;
                  break;
                }

                newError = message;
                _context4.next = 38;
                break;

              case 5:
                if (!response.setupIntent) {
                  _context4.next = 26;
                  break;
                }

                _context4.next = 8;
                return (0,lib_stripe/* getStripe */.d2)();

              case 8:
                stripe = _context4.sent;
                _context4.next = 11;
                return stripe.handleCardSetup(response.setupIntent.client_secret);

              case 11:
                result = _context4.sent;

                if (!result.error) {
                  _context4.next = 16;
                  break;
                }

                newError = result.error.message;
                _context4.next = 24;
                break;

              case 16:
                _context4.prev = 16;
                _context4.next = 19;
                return _this.props.confirmCreditCardEditCollective({
                  variables: {
                    paymentMethod: {
                      id: paymentMethod.id
                    }
                  }
                });

              case 19:
                _context4.next = 24;
                break;

              case 21:
                _context4.prev = 21;
                _context4.t0 = _context4["catch"](16);
                newError = result.error.message;

              case 24:
                _context4.next = 38;
                break;

              case 26:
                if (!response.paymentIntent) {
                  _context4.next = 38;
                  break;
                }

                _context4.next = 29;
                return (0,lib_stripe/* getStripe */.d2)(null, stripeError.account);

              case 29:
                _stripe = _context4.sent;
                _context4.next = 32;
                return _stripe.handleCardAction(response.paymentIntent.client_secret);

              case 32:
                _result = _context4.sent;

                if (!(_result.paymentIntent && _result.paymentIntent.status === 'requires_confirmation')) {
                  _context4.next = 37;
                  break;
                }

                return _context4.abrupt("return", _this.confirmOrderForPaymentMethod(paymentMethod));

              case 37:
                if (_result.error) {
                  newError = _result.error.message;
                }

              case 38:
                if (newError) {
                  _this.props.addToast({
                    type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                    message: (0,errors/* i18nGraphqlException */.t2)(_this.props.intl, newError)
                  });
                } else {
                  _this.handleSuccess(response.setupIntent ? 'setup' : response.paymentIntent ? 'payment' : null);
                }

              case 39:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, null, [[16, 21]]);
      }));

      return function (_x3, _x4) {
        return _ref4.apply(this, arguments);
      };
    }());

    defineProperty_default()(assertThisInitialized_default()(_this), "removePaymentMethod", /*#__PURE__*/function () {
      var _ref5 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee5(paymentMethod) {
        var pmLabel, confirmQuestion;
        return regenerator_default().wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                pmLabel = (0,payment_method_label/* paymentMethodLabel */.uB)(_this.props.intl, paymentMethod, get_default()(_this.props.data, 'Collective.name'));
                confirmQuestion = _this.props.intl.formatMessage(_this.messages['removeConfirm']);

                if (!confirm("".concat(pmLabel, " - ").concat(confirmQuestion))) {
                  _context5.next = 15;
                  break;
                }

                _context5.prev = 3;

                _this.setState({
                  removedId: paymentMethod.id
                });

                _context5.next = 7;
                return _this.props.removePaymentMethod({
                  variables: {
                    id: paymentMethod.legacyId
                  }
                });

              case 7:
                _this.setState({
                  error: null
                });

                _context5.next = 10;
                return _this.props.data.refetch();

              case 10:
                _context5.next = 15;
                break;

              case 12:
                _context5.prev = 12;
                _context5.t0 = _context5["catch"](3);

                _this.showError((0,errors/* getErrorFromGraphqlException */.H1)(_context5.t0));

              case 15:
                _this.setState({
                  removedId: null
                });

              case 16:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, null, [[3, 12]]);
      }));

      return function (_x5) {
        return _ref5.apply(this, arguments);
      };
    }());

    defineProperty_default()(assertThisInitialized_default()(_this), "showError", function (error) {
      _this.setState({
        error: error
      });

      window.scrollTo(0, 0);
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "hasOrdersThatNeedConfirmation", function () {
      return !isEmpty_default()(get_default()(_this.props.data, 'account.paymentMethodsWithPendingConfirmation', []));
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "paymentMethodRequiresConfirmation", function (paymentMethod) {
      var _paymentMethod$orders, _paymentMethod$orders2;

      return (_paymentMethod$orders = paymentMethod.orders) === null || _paymentMethod$orders === void 0 ? void 0 : (_paymentMethod$orders2 = _paymentMethod$orders.nodes) === null || _paymentMethod$orders2 === void 0 ? void 0 : _paymentMethod$orders2.some(function (order) {
        return order.needsConfirmation;
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "dismissSuccess", function () {
      var router = _this.props.router;

      if (_this.props.router.query.successType) {
        var pathname = router.asPath.split('?')[0];

        _this.props.router.replace({
          pathname: pathname,
          query: null
        }, undefined, {
          shallow: true
        });
      }
    });

    _this.messages = (0,lib.defineMessages)({
      removeConfirm: {
        id: "paymentMethods.removeConfirm",
        defaultMessage: [{
          "type": 0,
          "value": "Do you really want to remove this payment method?"
        }]
      }
    });
    return _this;
  }

  createClass_default()(EditPaymentMethods, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.props.loadStripe();
    }
  }, {
    key: "getPaymentMethodsToDisplay",
    value: function getPaymentMethodsToDisplay() {
      var data = this.props.data;
      var paymentMethodsWithPendingConfirmation = get_default()(data, 'account.paymentMethodsWithPendingConfirmation') || [];
      var paymentMethods = (get_default()(data, 'account.paymentMethods') || []).filter(function (pm) {
        return (// Remove payment methods with no balance, unless it's a gift card with a monthly limit
          (pm.balance.valueInCents > 0 || pm.type === payment_methods/* PAYMENT_METHOD_TYPE.GIFTCARD */.td.GIFTCARD && pm.monthlyLimit) && // Remove payment methods with pending confirmation, they'll be displayed at the top
          !paymentMethodsWithPendingConfirmation.some(function (p) {
            return p.id === pm.id;
          })
        );
      });
      return [].concat(toConsumableArray_default()(sortBy_default()(paymentMethodsWithPendingConfirmation, ['type', 'id'])), toConsumableArray_default()(sortBy_default()(paymentMethods, ['type', 'id'])));
    }
  }, {
    key: "renderError",
    value: function renderError(error) {
      if (typeof error === 'string') {
        return error;
      } else if ((0,errors/* isErrorType */.kY)(error, 'PM.Remove.HasActiveSubscriptions')) {
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "errors.PM.Remove.HasActiveSubscriptions",
            defaultMessage: [{
              "type": 0,
              "value": "This payment method cannot be removed because it has active recurring financial contributions."
            }]
          }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: "/".concat(this.props.collectiveSlug, "/manage-contributions"),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              textTransform: "capitalize",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "paymentMethod.editSubscriptions",
                defaultMessage: [{
                  "type": 0,
                  "value": "Edit recurring financial contributions"
                }]
              })
            })
          })]
        });
      } else {
        return error.message;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props$data = this.props.data,
          account = _this$props$data.account,
          loading = _this$props$data.loading;
      var _this$state = this.state,
          showCreditCardForm = _this$state.showCreditCardForm,
          error = _this$state.error,
          submitting = _this$state.submitting,
          removedId = _this$state.removedId,
          savingId = _this$state.savingId;
      var successType = this.props.router.query.successType;
      var paymentMethods = this.getPaymentMethodsToDisplay();
      return loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {}) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        className: "EditPaymentMethods",
        flexDirection: "column",
        pt: 2,
        children: [this.hasOrdersThatNeedConfirmation() && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "warning",
          withIcon: true,
          mb: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "bHYOPb",
            defaultMessage: [{
              "type": 0,
              "value": "You need to confirm at least one of your payment methods."
            }]
          })
        }), successType && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "success",
          display: "flex",
          alignItems: "center",
          withIcon: true,
          mb: 3,
          onClick: function onClick() {
            return _this2.setState({
              successType: null
            });
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            justifyContent: "space-between",
            alignItems: "center",
            flex: "1 1",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
              children: successType === 'payment' ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "Order.Confirm.Success",
                defaultMessage: [{
                  "type": 0,
                  "value": "Your payment method has now been confirmed and the payment successfully went through."
                }]
              }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "hqJi3D",
                defaultMessage: [{
                  "type": 0,
                  "value": "Your payment method has been successfully added."
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonSize: "tiny",
              onClick: this.dismissSuccess,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "TDaF6J",
                defaultMessage: [{
                  "type": 0,
                  "value": "Dismiss"
                }]
              })
            })]
          })
        }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "error",
          withIcon: true,
          mb: 4,
          children: this.renderError(error)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          className: "paymentMethods",
          flexDirection: "column",
          my: 2,
          children: paymentMethods.map(function (pm) {
            var _pm$orders;

            return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
              className: "paymentMethod",
              my: 3,
              p: 3,
              border: "1px solid #dedede",
              borderRadius: 4,
              style: {
                filter: pm.id === removedId ? 'blur(1px)' : 'none'
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditPaymentMethod, {
                collectiveSlug: account.slug,
                isSaving: pm.id === savingId,
                nbActiveSubscriptions: ((_pm$orders = pm.orders) === null || _pm$orders === void 0 ? void 0 : _pm$orders.totalCount) || 0,
                paymentMethod: pm,
                onRemove: function onRemove(pm) {
                  return _this2.removePaymentMethod(pm);
                },
                needsConfirmation: _this2.paymentMethodRequiresConfirmation(pm),
                onConfirm: function onConfirm(pm) {
                  return _this2.confirmOrderForPaymentMethod(pm);
                }
              })
            }, pm.id);
          })
        }), !showCreditCardForm && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          alignItems: "center",
          mx: 3,
          my: 4,
          flexDirection: "column",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            buttonStyle: "standard",
            buttonSize: "large",
            onClick: function onClick() {
              return _this2.setState({
                showCreditCardForm: true
              });
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Add_esm/* Add */.m, {
              size: "1em"
            }), '  ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethods.creditcard.add",
              defaultMessage: [{
                "type": 0,
                "value": "Add a credit card"
              }]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            fontSize: "12px",
            mt: 2,
            color: "black.600",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethods.creditcard.add.info",
              defaultMessage: [{
                "type": 0,
                "value": "For making contributions as "
              }, {
                "type": 1,
                "value": "contributeAs"
              }],
              values: {
                contributeAs: account.name
              }
            })
          })]
        }), showCreditCardForm && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          alignItems: "center",
          flexWrap: "wrap",
          my: 4,
          px: 3,
          py: 1,
          borderRadius: 4,
          border: "1px solid #dedede",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            fontWeight: "bold",
            mr: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethod.add",
              defaultMessage: [{
                "type": 0,
                "value": "New Credit Card"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(_StyledBox, {
            mr: 2,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(NewCreditCardForm/* default */.Z, {
              hasSaveCheckBox: false,
              onChange: function onChange(newCreditCardInfo) {
                return _this2.setState({
                  newCreditCardInfo: newCreditCardInfo,
                  error: null
                });
              },
              onReady: function onReady(_ref6) {
                var stripe = _ref6.stripe,
                    stripeElements = _ref6.stripeElements;
                return _this2.setState({
                  stripe: stripe,
                  stripeElements: stripeElements
                });
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            my: 2,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              mr: 2,
              buttonStyle: "standard",
              buttonSize: "medium",
              onClick: function onClick() {
                return _this2.setState({
                  showCreditCardForm: false,
                  error: null
                });
              },
              disabled: submitting,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "actions.cancel",
                defaultMessage: [{
                  "type": 0,
                  "value": "Cancel"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonStyle: "primary",
              buttonSize: "medium",
              type: "submit",
              onClick: this.submitNewCreditCard,
              disabled: submitting,
              loading: submitting,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "save",
                defaultMessage: [{
                  "type": 0,
                  "value": "Save"
                }]
              })
            })]
          })]
        })]
      });
    }
  }]);

  return EditPaymentMethods;
}(react.Component);

var editPaymentMethodFragment = (0,graphql_tag_lib/* default */.ZP)(PaymentMethods_templateObject || (PaymentMethods_templateObject = taggedTemplateLiteral_default()(["\n  fragment EditPaymentMethodFragment on PaymentMethod {\n    id\n    legacyId\n    name\n    data\n    service\n    type\n    balance {\n      valueInCents\n      currency\n    }\n    expiryDate\n    monthlyLimit {\n      valueInCents\n    }\n  }\n"])));
var paymentMethodsQuery = (0,graphql_tag_lib/* default */.ZP)(PaymentMethods_templateObject2 || (PaymentMethods_templateObject2 = taggedTemplateLiteral_default()(["\n  query EditCollectivePaymentMethods($collectiveSlug: String) {\n    account(slug: $collectiveSlug) {\n      id\n      legacyId\n      type\n      slug\n      name\n      currency\n      isHost\n      settings\n      paymentMethods(type: [CREDITCARD, GIFTCARD, PREPAID]) {\n        id\n        ...EditPaymentMethodFragment\n      }\n      paymentMethodsWithPendingConfirmation {\n        id\n        ...EditPaymentMethodFragment\n        orders(onlyActiveSubscriptions: true, status: [ACTIVE, ERROR, PENDING, REQUIRE_CLIENT_CONFIRMATION]) {\n          totalCount\n          nodes {\n            id\n            legacyId\n            needsConfirmation\n          }\n        }\n      }\n    }\n  }\n  ", "\n"])), editPaymentMethodFragment);
var addPaymentMethodsData = (0,hoc_graphql/* graphql */.B)(paymentMethodsQuery, {
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
});
var addCreateCreditCardMutation = (0,hoc_graphql/* graphql */.B)(UpdatePaymentMethodPopUp/* addCreditCardMutation */.$B, {
  name: 'createCreditCardEditCollective',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
});
var addConfirmCreditCardMutation = (0,hoc_graphql/* graphql */.B)(UpdatePaymentMethodPopUp/* confirmCreditCardMutation */.SF, {
  name: 'confirmCreditCardEditCollective',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
});
var removePaymentMethodMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(PaymentMethods_templateObject3 || (PaymentMethods_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveRemovePaymentMethod($id: Int!) {\n    removePaymentMethod(id: $id) {\n      id\n    }\n  }\n"])));
var addRemovePaymentMethodMutation = (0,hoc_graphql/* graphql */.B)(removePaymentMethodMutation, {
  name: 'removePaymentMethod'
});
var addConfirmOrderMutation = (0,hoc_graphql/* graphql */.B)(confirmOrder.confirmOrderMutation, {
  name: 'confirmOrder',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
});
var PaymentMethods_addGraphql = (0,utils/* compose */.qC)(addPaymentMethodsData, addRemovePaymentMethodMutation, addCreateCreditCardMutation, addConfirmCreditCardMutation, addConfirmOrderMutation);
EditPaymentMethods.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "submitNewCreditCard",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "confirmCreditCard",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "confirmOrderForPaymentMethod",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "successType",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleStripeError",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }, {
      "name": "stripeError",
      "type": null
    }],
    "returns": null
  }, {
    "name": "removePaymentMethod",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "showError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "error",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getPaymentMethodsToDisplay",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "hasOrdersThatNeedConfirmation",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "paymentMethodRequiresConfirmation",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "paymentMethod",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderError",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "error",
      "type": null
    }],
    "returns": null
  }, {
    "name": "dismissSuccess",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditPaymentMethods",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "data": {
      "description": "From graphql query",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "createCreditCardEditCollective": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "confirmCreditCardEditCollective": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "removePaymentMethod": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "confirmOrder": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "loadStripe": {
      "description": "From stripeLoader",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addToast": {
      "description": "from withToast",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "router": {
      "description": "from withRouter",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var PaymentMethods = ((0,injectIntl/* default */.ZP)((0,StripeProvider/* withStripeLoader */.kc)(PaymentMethods_addGraphql((0,ToastProvider/* withToasts */.CP)((0,next_router.withRouter)(EditPaymentMethods))))));

var _StyledBox = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "PaymentMethods___StyledBox",
  componentId: "sc-1535jj0-0"
})({
  flexGrow: 1
});
// EXTERNAL MODULE: ./node_modules/next/dist/compiled/@babel/runtime/helpers/extends.js
var helpers_extends = __webpack_require__(99915);
var extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);
// EXTERNAL MODULE: ./node_modules/dayjs/plugin/utc.js
var utc = __webpack_require__(70178);
var utc_default = /*#__PURE__*/__webpack_require__.n(utc);
// EXTERNAL MODULE: ./lib/transactions.js
var transactions = __webpack_require__(5949);
;// CONCATENATED MODULE: ./components/edit-collective/sections/PaymentReceipts.js








var PaymentReceipts_templateObject;

function PaymentReceipts_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function PaymentReceipts_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? PaymentReceipts_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : PaymentReceipts_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }






















var HostName = (0,styled_components_browser_esm/* default */.ZP)(Text.P).withConfig({
  displayName: "PaymentReceipts__HostName",
  componentId: "sc-1178wi3-0"
})(["margin:0 !important;"]);
dayjs_min_default().extend((utc_default()));
var invoicesQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(PaymentReceipts_templateObject || (PaymentReceipts_templateObject = taggedTemplateLiteral_default()(["\n  query TransactionsDownloadInvoices($fromCollectiveSlug: String!) {\n    allInvoices(fromCollectiveSlug: $fromCollectiveSlug) {\n      slug\n      year\n      month\n      totalAmount\n      totalTransactions\n      currency\n      fromCollective {\n        id\n        slug\n      }\n      host {\n        id\n        slug\n        name\n        imageUrl\n      }\n    }\n  }\n"])));

var filterInvoices = function filterInvoices(allInvoices, filterBy) {
  if (filterBy === 'PAST_12_MONTHS') {
    var twelveMonthsAgo = dayjs_min_default()().subtract(11, 'month');
    return allInvoices.filter(function (i) {
      var dateMonth = dayjs_min_default().utc("".concat(i.year, "-").concat(i.month), 'YYYY-M');
      return dateMonth.isAfter(twelveMonthsAgo);
    });
  }

  return allInvoices.filter(function (i) {
    return i.year === filterBy;
  });
};

var ReceiptsLoadingPlaceholder = function ReceiptsLoadingPlaceholder() {
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexDirection: "column",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      justifyContent: "space-between",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        mr: 3,
        width: "104px",
        height: "24px"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        width: "80%",
        borderStyle: "solid",
        borderColor: "#C4C7CC"
      })]
    }), Array.from({
      length: 3
    }, function (_, index) {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
        my: 3,
        display: "flex",
        alignItems: "center",
        py: 3,
        px: "24px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          borderRadius: "16px",
          width: "48px",
          height: "48px",
          mr: 3
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            mb: 2,
            width: ['164px', '361px'],
            height: "24px"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            width: "115px",
            height: "14px"
          })]
        })]
      }, index);
    })]
  });
};

var NoReceipts = function NoReceipts() {
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
    alignItems: "center",
    justifyContent: "center",
    my: 5,
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCard/* default */.Z, {
      height: "100px",
      padding: "16px 24px",
      display: "flex",
      alignItems: "center",
      justifyContent: "center",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
        fontSize: "15px",
        lineHeight: "24px",
        color: "black.500",
        textAlign: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "paymentReceipt.noReceipts",
          defaultMessage: [{
            "type": 0,
            "value": "No receipts available in this period."
          }]
        })
      })
    })
  });
};

var ReceiptCard = function ReceiptCard(_ref) {
  var props = extends_default()({}, _ref);

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
    my: 3,
    alignItems: "center",
    display: "flex",
    flexDirection: ['column', 'row'],
    justifyContent: "space-between",
    py: 3,
    px: "24px",
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
        collective: props.host,
        borderRadius: "16px",
        mr: 3,
        size: "48px"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(HostName, {
          fontSize: ['13px', '16px'],
          lineHeight: ['20px', '28px'],
          letterSpacing: [null, '-0.16px'],
          color: "black.900",
          fontWeight: "500",
          my: 0,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Fiscalhost",
            defaultMessage: [{
              "type": 0,
              "value": "Fiscal Host"
            }]
          }), ": ", props.host.name]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text/* Span */.Dr, {
          fontSize: ['10px', '15px'],
          lineHeight: ['14px', '21px'],
          letterSpacing: [null, '-0.1px'],
          color: "black.600",
          fontWeight: "400",
          mt: 0,
          children: ["".concat(props.month, "/").concat(props.year), " - ", props.totalTransactions, ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentReceipt.transaction",
            values: {
              n: props.totalTransactions
            },
            defaultMessage: [{
              "type": 6,
              "value": "n",
              "options": {
                "one": {
                  "value": [{
                    "type": 0,
                    "value": "Transaction"
                  }]
                },
                "other": {
                  "value": [{
                    "type": 0,
                    "value": "Transactions"
                  }]
                }
              },
              "offset": 0,
              "pluralType": "cardinal"
            }]
          })]
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      lineHeight: "16px",
      fontSize: "13px",
      width: "142px",
      padding: "4px 16px",
      disabled: props.loadingInvoice,
      mt: 3,
      borderColor: "#C4C7CC",
      onClick: function onClick() {
        props.downloadInvoice({
          fromCollectiveSlug: props.fromCollective.slug,
          toCollectiveSlug: props.host.slug,
          dateFrom: props.dateFrom,
          dateTo: props.dateTo
        });
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "DownloadReceipt",
        defaultMessage: [{
          "type": 0,
          "value": "Download receipt"
        }]
      })
    })]
  });
};

var Receipts = function Receipts(_ref2) {
  var invoices = _ref2.invoices;

  var _useAsyncCall = (0,useAsyncCall/* useAsyncCall */.N)(transactions/* saveInvoice */.US, {
    useErrorToast: true
  }),
      loadingInvoice = _useAsyncCall.loading,
      downloadInvoice = _useAsyncCall.call;

  var byMonthYear = groupBy_default()(invoices, function (invoice) {
    return "".concat(invoice.month, "-").concat(invoice.year);
  });

  return Object.keys(byMonthYear).map(function (monthYear) {
    var dateMonth = dayjs_min_default().utc("".concat(byMonthYear[monthYear][0].year, "-").concat(byMonthYear[monthYear][0].month), 'YYYY-M');
    var dateFrom = dateMonth.toISOString();
    var dateTo = dateMonth.endOf('month').toISOString();

    var _monthYear$split = monthYear.split('-'),
        _monthYear$split2 = slicedToArray_default()(_monthYear$split, 2),
        month = _monthYear$split2[0],
        year = _monthYear$split2[1];

    return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        alignItems: "center",
        justifyContent: "space-between",
        mt: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
          fontSize: "16px",
          lineHeight: "24px",
          color: "black.900",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(lib.FormattedDate, {
            value: new Date(year, month - 1),
            month: "long",
            year: "numeric"
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          width: ['60%', '80%'],
          borderStyle: "solid",
          borderColor: "#C4C7CC"
        })]
      }), byMonthYear[monthYear].map(function (invoice) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(ReceiptCard, PaymentReceipts_objectSpread({}, PaymentReceipts_objectSpread(PaymentReceipts_objectSpread({}, invoice), {}, {
          loadingInvoice: loadingInvoice,
          downloadInvoice: downloadInvoice,
          dateFrom: dateFrom,
          dateTo: dateTo
        })), "".concat(invoice.year, "-").concat(invoice.month, "-").concat(invoice.slug));
      })]
    }, monthYear);
  });
};

var PaymentReceipts = function PaymentReceipts(_ref3) {
  var collective = _ref3.collective;
  var defaultFilter = {
    label: 'Past 12 months',
    value: 'PAST_12_MONTHS'
  };

  var _React$useState = react.useState(defaultFilter),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      activeFilter = _React$useState2[0],
      setActiveFilter = _React$useState2[1];

  var _useQuery = (0,client.useQuery)(invoicesQuery, {
    variables: {
      fromCollectiveSlug: collective.slug
    }
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error;

  var yearsFilter = uniq_default()(data === null || data === void 0 ? void 0 : data.allInvoices.map(function (i) {
    return i.year;
  })).map(function (year) {
    return {
      value: year,
      label: year
    };
  });

  var invoices = data ? filterInvoices(data.allInvoices, activeFilter.value) : [];
  var content = null;

  if (loading) {
    content = /*#__PURE__*/(0,jsx_runtime.jsx)(ReceiptsLoadingPlaceholder, {});
  } else if (invoices.length === 0) {
    content = /*#__PURE__*/(0,jsx_runtime.jsx)(NoReceipts, {});
  } else if (error) {
    content = /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    });
  } else {
    content = /*#__PURE__*/(0,jsx_runtime.jsx)(Receipts, {
      invoices: invoices
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexDirection: "column",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_SettingsSubtitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "paymentReceipts.section.description",
        defaultMessage: [{
          "type": 0,
          "value": "Consolidated receipts for your financial contributions."
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      mt: 4,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "9px",
        lineHeight: "12px",
        fontWeight: "500",
        letterSpacing: "0.06em",
        textTransform: "uppercase",
        color: "black.800",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "paymentReceipts.selectDate.label",
          defaultMessage: [{
            "type": 0,
            "value": "Time period"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
        inputId: "active-filter-set",
        options: [defaultFilter].concat(toConsumableArray_default()(yearsFilter)),
        value: activeFilter,
        width: "184px",
        isLoading: loading,
        fontSize: "12px",
        lineHeight: "18px",
        fontWeight: "400",
        color: "black.800",
        mb: "24px",
        onChange: setActiveFilter,
        isSearchable: false
      }), content]
    })]
  });
};

PaymentReceipts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "PaymentReceipts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "id": {
            "name": "number",
            "required": true
          },
          "currency": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_PaymentReceipts = (PaymentReceipts);
// EXTERNAL MODULE: ./node_modules/lodash/size.js
var size = __webpack_require__(84238);
var size_default = /*#__PURE__*/__webpack_require__.n(size);
// EXTERNAL MODULE: ./node_modules/lodash/filter.js
var filter = __webpack_require__(63105);
var filter_default = /*#__PURE__*/__webpack_require__.n(filter);
// EXTERNAL MODULE: ./lib/constants/moderation-categories.js
var moderation_categories = __webpack_require__(15084);
// EXTERNAL MODULE: ./lib/expenses.js
var expenses = __webpack_require__(45624);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Policies.js









var Policies_templateObject, Policies_templateObject2, Policies_templateObject3;



function Policies_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Policies_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Policies_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Policies_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



























var EXPENSE_POLICY_MAX_LENGTH = 16000; // max in database is ~15,500

var CONTRIBUTION_POLICY_MAX_LENGTH = 3000; // 600 words * 5 characters average length word

var updateFilterCategoriesMutation = (0,graphql_tag_lib/* default */.ZP)(Policies_templateObject || (Policies_templateObject = taggedTemplateLiteral_default()(["\n  mutation UpdateFilterCategories($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      type\n      isActive\n      settings\n    }\n  }\n"])));
var editCollectiveMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Policies_templateObject2 || (Policies_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveMutation($collective: CollectiveInputType!) {\n    editCollective(collective: $collective) {\n      id\n      type\n      isActive\n      settings\n    }\n  }\n"])));
var setPoliciesMutation = (0,graphql_tag_lib/* default */.ZP)(Policies_templateObject3 || (Policies_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation SetPolicies($account: AccountReferenceInput!, $policies: PoliciesInput!) {\n    setPolicies(account: $account, policies: $policies) {\n      id\n      policies {\n        EXPENSE_AUTHOR_CANNOT_APPROVE {\n          enabled\n          amountInCents\n          appliesToHostedCollectives\n          appliesToSingleAdminCollectives\n        }\n        REQUIRE_2FA_FOR_ADMINS\n        COLLECTIVE_MINIMUM_ADMINS {\n          numberOfAdmins\n          applies\n          freeze\n        }\n      }\n    }\n  }\n"])));
var Policies_messages = (0,lib.defineMessages)({
  'rejectCategories.placeholder': {
    id: "editCollective.rejectCategories.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "Choose categories"
    }]
  },
  'contributionPolicy.label': {
    id: "collective.contributionPolicy.label",
    defaultMessage: [{
      "type": 0,
      "value": "Contribution Policy"
    }]
  },
  'contributionPolicy.placeholder': {
    id: "collective.contributionPolicy.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. what types of contributions you will and will not accept."
    }]
  },
  'contributionPolicy.error': {
    id: "collective.contributionPolicy.error",
    defaultMessage: [{
      "type": 0,
      "value": "Contribution policy must contain less than "
    }, {
      "type": 1,
      "value": "maxLength"
    }, {
      "type": 0,
      "value": " characters"
    }]
  },
  'expensePolicy.label': {
    id: "editCollective.menu.expenses",
    defaultMessage: [{
      "type": 0,
      "value": "Expenses Policy"
    }]
  },
  'expensePolicy.placeholder': {
    id: "collective.expensePolicy.placeholder",
    defaultMessage: [{
      "type": 0,
      "value": "E.g. approval criteria, limitations, or required documentation."
    }]
  },
  'expensePolicy.error': {
    id: "collective.expensePolicy.error",
    defaultMessage: [{
      "type": 0,
      "value": "Expense policy must contain less than "
    }, {
      "type": 1,
      "value": "maxLength"
    }, {
      "type": 0,
      "value": " characters"
    }]
  },
  'expensePolicy.allowExpense': {
    id: "collective.expensePolicy.allowExpense",
    defaultMessage: [{
      "type": 0,
      "value": "Only allow expenses to be created by Team Members and Financial Contributors (they may invite expenses from other payees)"
    }]
  },
  'expensePolicy.RECEIPT': {
    id: "collective.expensePolicy.hasReceipt",
    defaultMessage: [{
      "type": 0,
      "value": "Allow receipts"
    }]
  },
  'expensePolicy.GRANT': {
    id: "collective.expensePolicy.hasGrant",
    defaultMessage: [{
      "type": 0,
      "value": "Allow grants"
    }]
  },
  'expensePolicy.INVOICE': {
    id: "collective.expensePolicy.hasInvoice",
    defaultMessage: [{
      "type": 0,
      "value": "Allow invoices"
    }]
  },
  'requiredAdmins.numberOfAdmins': {
    id: "tGmvPD",
    defaultMessage: [{
      "type": 6,
      "value": "admins",
      "options": {
        "=0": {
          "value": [{
            "type": 0,
            "value": "Do not enforce minimum number of admins"
          }]
        },
        "one": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " Admin"
          }]
        },
        "other": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " Admins"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  }
});

var Policies = function Policies(_ref) {
  var _data$account, _data$account3, _data$account3$host, _data$account3$host$p, _formik$values$polici3, _formik$values$polici4, _formik$values$polici5, _formik$values$polici6, _formik$values$polici7, _formik$values$polici8, _formik$values$polici12, _formik$values$polici13, _formik$values$polici14, _formik$values$polici15, _formik$values$polici16, _formik$values$polici17, _formik$values$polici18, _formik$values$polici19, _data$account4, _formik$values$polici20, _formik$values$polici21, _formik$values$polici23, _formik$values$polici24, _formik$values$polici25, _formik$values$polici26, _formik$values$polici27, _formik$values$polici28, _formik$values$polici32, _formik$values$polici33, _formik$values$polici34, _formik$values$polici35, _formik$values$polici36, _formik$values$polici37, _formik$values$polici41, _formik$values$polici42;

  var collective = _ref.collective,
      showOnlyExpensePolicy = _ref.showOnlyExpensePolicy;

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  var _React$useState = react.useState([]),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      selected = _React$useState2[0],
      setSelected = _React$useState2[1];

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast; // GraphQL


  var _useQuery = (0,client.useQuery)(getSettingsQuery, {
    variables: {
      slug: collective.slug
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      loading = _useQuery.loading,
      data = _useQuery.data;

  var _useMutation = (0,client.useMutation)(updateFilterCategoriesMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      updateCategories = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      isSubmittingCategories = _useMutation2$.loading,
      categoriesError = _useMutation2$.error;

  var _useMutation3 = (0,client.useMutation)(editCollectiveMutation),
      _useMutation4 = slicedToArray_default()(_useMutation3, 2),
      updateCollective = _useMutation4[0],
      _useMutation4$ = _useMutation4[1],
      isSubmittingSettings = _useMutation4$.loading,
      settingsError = _useMutation4$.error;

  var _useMutation5 = (0,client.useMutation)(setPoliciesMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation6 = slicedToArray_default()(_useMutation5, 2),
      setPolicies = _useMutation6[0],
      _useMutation6$ = _useMutation6[1],
      isSettingPolicies = _useMutation6$.loading,
      policiesError = _useMutation6$.error;

  var error = categoriesError || settingsError || policiesError; // Data and data handling

  var collectiveContributionFilteringCategories = get_default()(data, 'account.settings.moderation.rejectedCategories', null);

  var collectiveContributionPolicy = get_default()(collective, 'contributionPolicy', null);

  var collectiveExpensePolicy = get_default()(collective, 'expensePolicy', null);

  var collectiveDisableExpenseSubmission = get_default()(collective, 'settings.disablePublicExpenseSubmission', false);

  var expenseTypes = get_default()(collective, 'settings.expenseTypes') || expenses/* DEFAULT_SUPPORTED_EXPENSE_TYPES */.qc;

  var numberOfAdmins = size_default()(filter_default()(collective.members, function (m) {
    return m.role === 'ADMIN';
  }));

  var selectOptions = react.useMemo(function () {
    var optionsArray = Object.entries(moderation_categories/* MODERATION_CATEGORIES */.Q).map(function (_ref2, index) {
      var _ref3 = slicedToArray_default()(_ref2, 2),
          key = _ref3[0],
          value = _ref3[1];

      return {
        id: index,
        value: key,
        label: value
      };
    });
    return optionsArray;
  }, [moderation_categories/* MODERATION_CATEGORIES */.Q]); // Form

  var formik = (0,formik_esm/* useFormik */.TA)({
    initialValues: {
      contributionPolicy: collectiveContributionPolicy || '',
      expensePolicy: collectiveExpensePolicy || '',
      disablePublicExpenseSubmission: collectiveDisableExpenseSubmission || false,
      expenseTypes: expenseTypes,
      policies: (0,utils/* omitDeep */.Cd)((data === null || data === void 0 ? void 0 : (_data$account = data.account) === null || _data$account === void 0 ? void 0 : _data$account.policies) || {}, ['__typename'])
    },
    onSubmit: function onSubmit(values) {
      return asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var contributionPolicy, expensePolicy, disablePublicExpenseSubmission, expenseTypes, policies, newSettings, selectedRejectCategories;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                contributionPolicy = values.contributionPolicy, expensePolicy = values.expensePolicy, disablePublicExpenseSubmission = values.disablePublicExpenseSubmission, expenseTypes = values.expenseTypes, policies = values.policies;
                newSettings = Policies_objectSpread(Policies_objectSpread({}, collective.settings), {}, {
                  disablePublicExpenseSubmission: disablePublicExpenseSubmission
                });

                if (collective.isHost) {
                  newSettings.expenseTypes = expenseTypes;
                }

                _context.next = 5;
                return updateCollective({
                  variables: {
                    collective: {
                      id: collective.id,
                      contributionPolicy: contributionPolicy,
                      expensePolicy: expensePolicy,
                      settings: newSettings
                    }
                  }
                });

              case 5:
                selectedRejectCategories = selected.map(function (option) {
                  return option.value;
                });
                _context.next = 8;
                return Promise.all([updateCategories({
                  variables: {
                    account: {
                      legacyId: collective.id
                    },
                    key: 'moderation',
                    value: {
                      rejectedCategories: selectedRejectCategories
                    }
                  }
                }), setPolicies({
                  variables: {
                    account: {
                      legacyId: collective.id
                    },
                    policies: policies
                  }
                })]);

              case 8:
                addToast({
                  type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                  message: formatMessage({
                    id: "Owy3QB",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Policies updated successfully"
                    }]
                  })
                });

              case 9:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    validate: function validate(values) {
      var errors = {};
      var contributionPolicyText = (0,utils/* stripHTML */.Cb)(values.contributionPolicy);
      var expensePolicyText = (0,utils/* stripHTML */.Cb)(values.expensePolicy);

      if (contributionPolicyText.length > CONTRIBUTION_POLICY_MAX_LENGTH) {
        errors.contributionPolicy = formatMessage(Policies_messages['contributionPolicy.error'], {
          maxLength: CONTRIBUTION_POLICY_MAX_LENGTH
        });
      }

      if (expensePolicyText.length > EXPENSE_POLICY_MAX_LENGTH) {
        errors.expensePolicy = formatMessage(Policies_messages['expensePolicy.error'], {
          maxLength: EXPENSE_POLICY_MAX_LENGTH
        });
      }

      return errors;
    }
  });
  react.useEffect(function () {
    if (collectiveContributionFilteringCategories && isEmpty_default()(selected)) {
      var alreadyPickedCategories = collectiveContributionFilteringCategories.map(function (category) {
        return selectOptions.find(function (option) {
          return option.value === category;
        });
      });
      setSelected(alreadyPickedCategories);
    }
  }, [loading, collectiveContributionFilteringCategories]);
  react.useEffect(function () {
    if (data) {
      var _data$account2;

      formik.setFieldValue('policies', (0,utils/* omitDeep */.Cd)((data === null || data === void 0 ? void 0 : (_data$account2 = data.account) === null || _data$account2 === void 0 ? void 0 : _data$account2.policies) || {}, ['__typename']));
    }
  }, [data]);
  var numberOfAdminsOptions = [0, 2, 3, 4, 5].map(function (n) {
    return {
      value: n,
      label: formatMessage(Policies_messages['requiredAdmins.numberOfAdmins'], {
        admins: n
      })
    };
  });
  var minAdminsApplies = [{
    value: 'NEW_COLLECTIVES',
    label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "SeQW9/",
      defaultMessage: [{
        "type": 0,
        "value": "New Collectives Only"
      }]
    })
  }, {
    value: 'ALL_COLLECTIVES',
    label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "uQguR/",
      defaultMessage: [{
        "type": 0,
        "value": "All Collectives"
      }]
    })
  }];
  var hostAuthorCannotApproveExpensePolicy = data === null || data === void 0 ? void 0 : (_data$account3 = data.account) === null || _data$account3 === void 0 ? void 0 : (_data$account3$host = _data$account3.host) === null || _data$account3$host === void 0 ? void 0 : (_data$account3$host$p = _data$account3$host.policies) === null || _data$account3$host$p === void 0 ? void 0 : _data$account3$host$p['EXPENSE_AUTHOR_CANNOT_APPROVE'];
  var authorCannotApproveExpenseEnforcedByHost = (hostAuthorCannotApproveExpensePolicy === null || hostAuthorCannotApproveExpensePolicy === void 0 ? void 0 : hostAuthorCannotApproveExpensePolicy.enabled) && (hostAuthorCannotApproveExpensePolicy === null || hostAuthorCannotApproveExpensePolicy === void 0 ? void 0 : hostAuthorCannotApproveExpensePolicy.appliesToHostedCollectives);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexDirection: "column",
    children: [error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [!showOnlyExpensePolicy && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          mb: 4,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            name: "contributionPolicy",
            htmlFor: "contributionPolicy",
            error: formik.errors.contributionPolicy,
            disabled: isSubmittingSettings,
            labelProps: {
              mb: 2,
              pt: 2,
              lineHeight: '18px',
              fontWeight: 'bold'
            },
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
              children: formatMessage(Policies_messages['contributionPolicy.label'])
            }),
            children: function children(inputProps) {
              return /*#__PURE__*/(0,jsx_runtime.jsx)(RichTextEditor["default"], {
                withBorders: true,
                showCount: true,
                maxLength: CONTRIBUTION_POLICY_MAX_LENGTH,
                error: formik.errors.contributionPolicy,
                version: "simplified",
                editorMinHeight: "20rem",
                editorMaxHeight: 500,
                id: inputProps.id,
                inputName: inputProps.name,
                onChange: formik.handleChange,
                placeholder: formatMessage(Policies_messages['contributionPolicy.placeholder']),
                defaultValue: formik.values.contributionPolicy,
                fontSize: "14px"
              });
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            lineHeight: "18px",
            color: "black.600",
            mt: 2,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.contributionPolicy.description",
              defaultMessage: [{
                "type": 0,
                "value": "Financial Contributors are manually reviewed by the Open Collective team to check for abuse or spam. Financial Contributors with a good reputation should not be affected by this setting."
              }]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
          name: "expensePolicy",
          htmlFor: "expensePolicy",
          error: formik.errors.expensePolicy,
          disabled: isSubmittingSettings,
          labelProps: {
            mb: 2,
            pt: 2,
            lineHeight: '18px',
            fontWeight: 'bold'
          },
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
            children: formatMessage(Policies_messages['expensePolicy.label'])
          }),
          children: function children(inputProps) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(RichTextEditor["default"], {
              "data-cy": "expense-policy-input",
              withBorders: true,
              showCount: true,
              maxLength: EXPENSE_POLICY_MAX_LENGTH,
              error: formik.errors.expensePolicy,
              version: "simplified",
              editorMinHeight: "20rem",
              editorMaxHeight: 500,
              id: inputProps.id,
              inputName: inputProps.name,
              onChange: formik.handleChange,
              placeholder: formatMessage(Policies_messages['expensePolicy.placeholder']),
              defaultValue: formik.values.expensePolicy,
              fontSize: "14px",
              maxHeight: 600
            });
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          my: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "collective.expensePolicy.description",
            defaultMessage: [{
              "type": 0,
              "value": "It can be daunting to file an expense if you're not sure what's allowed. Provide a clear policy to guide expense submitters."
            }]
          })
        })]
      }), (collective === null || collective === void 0 ? void 0 : collective.isHost) && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.admins.header",
            defaultMessage: [{
              "type": 0,
              "value": "Required Admins"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.admins.description",
            defaultMessage: [{
              "type": 0,
              "value": "Please specify the minimum number of admins a collective needs to have for being accepted by your fiscal host and to accept contributions."
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          gap: "12px 24px",
          mb: 3,
          mt: 2,
          flexDirection: ['column', 'row'],
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            disabled: isSubmittingSettings,
            labelFontSize: "13px",
            labelFontWeight: "700",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "s01/Qi",
              defaultMessage: [{
                "type": 0,
                "value": "Minimum number of admins"
              }]
            }),
            flexGrow: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
              inputId: "numberOfAdmins",
              isSearchable: false,
              options: numberOfAdminsOptions,
              onChange: function onChange(option) {
                if (option.value === 0) {
                  formik.setFieldValue('policies', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies), {}, {
                    COLLECTIVE_MINIMUM_ADMINS: null
                  }));
                } else {
                  formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
                    numberOfAdmins: option.value
                  }));
                }
              },
              value: numberOfAdminsOptions.find(function (option) {
                var _formik$values$polici, _formik$values$polici2;

                return option.value === (((_formik$values$polici = formik.values.policies) === null || _formik$values$polici === void 0 ? void 0 : (_formik$values$polici2 = _formik$values$polici.COLLECTIVE_MINIMUM_ADMINS) === null || _formik$values$polici2 === void 0 ? void 0 : _formik$values$polici2.numberOfAdmins) || 0);
              })
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            disabled: isSubmittingSettings,
            labelFontSize: "13px",
            labelFontWeight: "700",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "8F65mn",
              defaultMessage: [{
                "type": 0,
                "value": "Whom does this apply to"
              }]
            }),
            flexGrow: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
              inputId: "applies",
              isSearchable: false,
              options: minAdminsApplies,
              onChange: function onChange(option) {
                return formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
                  applies: option.value
                }));
              },
              disabled: true,
              value: minAdminsApplies[0]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
          name: "minAdminsFreeze",
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FcYV6Y",
            defaultMessage: [{
              "type": 0,
              "value": "Freeze collectives that don’t meet the minimum requirement"
            }]
          }),
          onChange: function onChange(_ref4) {
            var checked = _ref4.checked;
            formik.setFieldValue('policies.COLLECTIVE_MINIMUM_ADMINS', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies.COLLECTIVE_MINIMUM_ADMINS), {}, {
              freeze: checked
            }));
          },
          checked: Boolean((_formik$values$polici3 = formik.values.policies) === null || _formik$values$polici3 === void 0 ? void 0 : (_formik$values$polici4 = _formik$values$polici3.COLLECTIVE_MINIMUM_ADMINS) === null || _formik$values$polici4 === void 0 ? void 0 : _formik$values$polici4.freeze)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          ml: "2.2rem",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "mp9gR3",
            defaultMessage: [{
              "type": 0,
              "value": "Freezing the collective will prevent them from accepting and distributing contributions till they meet the requirements. This is a security measure to make sure the admins are within their rights. Read More."
            }]
          })
        }), ((_formik$values$polici5 = formik.values.policies) === null || _formik$values$polici5 === void 0 ? void 0 : (_formik$values$polici6 = _formik$values$polici5.COLLECTIVE_MINIMUM_ADMINS) === null || _formik$values$polici6 === void 0 ? void 0 : _formik$values$polici6.applies) === 'ALL_COLLECTIVES' && ((_formik$values$polici7 = formik.values.policies) === null || _formik$values$polici7 === void 0 ? void 0 : (_formik$values$polici8 = _formik$values$polici7.COLLECTIVE_MINIMUM_ADMINS) === null || _formik$values$polici8 === void 0 ? void 0 : _formik$values$polici8.freeze) && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "warning",
          mt: 2,
          fontSize: "13px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "amI2+/",
            defaultMessage: [{
              "type": 0,
              "value": "Some collectives hosted by you may not fulfill the minimum admin requirements. If you choose to apply the setting to all Collectives, the ones that don't comply will be frozen until they meet the minimum requirements for admins."
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.expenseApprovalsPolicy.header",
            defaultMessage: [{
              "type": 0,
              "value": "Expense approvals"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
          name: "authorCannotApproveExpense",
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.expenseApprovalsPolicy.authorCannotApprove",
            defaultMessage: [{
              "type": 0,
              "value": "Admins cannot approve their own expenses. With this feature turned on, admins will need another admin to approve their expenses"
            }]
          }),
          onChange: function onChange() {
            var _formik$values$polici9, _formik$values$polici10, _formik$values$polici11;

            return formik.setFieldValue('policies', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies), {}, defineProperty_default()({}, 'EXPENSE_AUTHOR_CANNOT_APPROVE', Policies_objectSpread(Policies_objectSpread({}, (_formik$values$polici9 = formik.values.policies) === null || _formik$values$polici9 === void 0 ? void 0 : _formik$values$polici9['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
              enabled: !((_formik$values$polici10 = formik.values.policies) !== null && _formik$values$polici10 !== void 0 && (_formik$values$polici11 = _formik$values$polici10['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici11 !== void 0 && _formik$values$polici11.enabled),
              appliesToHostedCollectives: false,
              appliesToSingleAdminCollectives: false,
              amountInCents: 0
            }))));
          },
          checked: authorCannotApproveExpenseEnforcedByHost || Boolean((_formik$values$polici12 = formik.values.policies) === null || _formik$values$polici12 === void 0 ? void 0 : (_formik$values$polici13 = _formik$values$polici12['EXPENSE_AUTHOR_CANNOT_APPROVE']) === null || _formik$values$polici13 === void 0 ? void 0 : _formik$values$polici13.enabled),
          disabled: isSettingPolicies || numberOfAdmins < 2 && Boolean(!((_formik$values$polici14 = formik.values.policies) !== null && _formik$values$polici14 !== void 0 && (_formik$values$polici15 = _formik$values$polici14['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici15 !== void 0 && _formik$values$polici15.enabled)) || authorCannotApproveExpenseEnforcedByHost
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          ml: "2.2rem",
          mt: "1rem",
          alignItems: "center",
          color: !((_formik$values$polici16 = formik.values.policies) !== null && _formik$values$polici16 !== void 0 && (_formik$values$polici17 = _formik$values$polici16['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici17 !== void 0 && _formik$values$polici17.enabled) ? 'black.600' : undefined,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            mr: "2rem",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "8bP95s",
              defaultMessage: [{
                "type": 0,
                "value": "Enforce for expenses above:"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputAmount/* default */.Z, {
            maxWidth: "11em",
            disabled: isSettingPolicies || authorCannotApproveExpenseEnforcedByHost || !((_formik$values$polici18 = formik.values.policies) !== null && _formik$values$polici18 !== void 0 && (_formik$values$polici19 = _formik$values$polici18['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici19 !== void 0 && _formik$values$polici19.enabled),
            currency: data === null || data === void 0 ? void 0 : (_data$account4 = data.account) === null || _data$account4 === void 0 ? void 0 : _data$account4.currency,
            currencyDisplay: "CODE",
            placeholder: "0",
            value: authorCannotApproveExpenseEnforcedByHost ? hostAuthorCannotApproveExpensePolicy.amountInCents : (_formik$values$polici20 = formik.values.policies) === null || _formik$values$polici20 === void 0 ? void 0 : (_formik$values$polici21 = _formik$values$polici20['EXPENSE_AUTHOR_CANNOT_APPROVE']) === null || _formik$values$polici21 === void 0 ? void 0 : _formik$values$polici21.amountInCents,
            onChange: function onChange(value) {
              var _formik$values$polici22;

              return formik.setFieldValue('policies', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies), {}, defineProperty_default()({}, 'EXPENSE_AUTHOR_CANNOT_APPROVE', Policies_objectSpread(Policies_objectSpread({}, (_formik$values$polici22 = formik.values.policies) === null || _formik$values$polici22 === void 0 ? void 0 : _formik$values$polici22['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                amountInCents: value
              }))));
            }
          })]
        }), (collective === null || collective === void 0 ? void 0 : collective.isHost) && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            ml: "2.2rem",
            mt: "1rem",
            color: !((_formik$values$polici23 = formik.values.policies) !== null && _formik$values$polici23 !== void 0 && (_formik$values$polici24 = _formik$values$polici23['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici24 !== void 0 && _formik$values$polici24.enabled) ? 'black.600' : undefined,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
              name: "authorCannotApproveExpense.appliesToHostedCollectives",
              label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.appliesToHostedCollectives",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enforce this policy on collectives hosted by you."
                }]
              }),
              checked: (_formik$values$polici25 = formik.values.policies) === null || _formik$values$polici25 === void 0 ? void 0 : (_formik$values$polici26 = _formik$values$polici25['EXPENSE_AUTHOR_CANNOT_APPROVE']) === null || _formik$values$polici26 === void 0 ? void 0 : _formik$values$polici26.appliesToHostedCollectives,
              disabled: isSettingPolicies || !((_formik$values$polici27 = formik.values.policies) !== null && _formik$values$polici27 !== void 0 && (_formik$values$polici28 = _formik$values$polici27['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici28 !== void 0 && _formik$values$polici28.enabled),
              onChange: function onChange() {
                var _formik$values$polici29, _formik$values$polici30, _formik$values$polici31;

                return formik.setFieldValue('policies', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies), {}, defineProperty_default()({}, 'EXPENSE_AUTHOR_CANNOT_APPROVE', Policies_objectSpread(Policies_objectSpread({}, (_formik$values$polici29 = formik.values.policies) === null || _formik$values$polici29 === void 0 ? void 0 : _formik$values$polici29['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                  appliesToHostedCollectives: !((_formik$values$polici30 = formik.values.policies) !== null && _formik$values$polici30 !== void 0 && (_formik$values$polici31 = _formik$values$polici30['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici31 !== void 0 && _formik$values$polici31.appliesToHostedCollectives),
                  appliesToSingleAdminCollectives: false
                }))));
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            ml: "2.2rem",
            mt: "1rem",
            color: !((_formik$values$polici32 = formik.values.policies) !== null && _formik$values$polici32 !== void 0 && (_formik$values$polici33 = _formik$values$polici32['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici33 !== void 0 && _formik$values$polici33.appliesToHostedCollectives) ? 'black.600' : undefined,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
              name: "authorCannotApproveExpense.appliesToSingleAdminCollectives",
              label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.appliesToSingleAdminCollectives",
                defaultMessage: [{
                  "type": 0,
                  "value": "Enforce this policy on collectives with a single admin."
                }]
              }),
              checked: (_formik$values$polici34 = formik.values.policies) === null || _formik$values$polici34 === void 0 ? void 0 : (_formik$values$polici35 = _formik$values$polici34['EXPENSE_AUTHOR_CANNOT_APPROVE']) === null || _formik$values$polici35 === void 0 ? void 0 : _formik$values$polici35.appliesToSingleAdminCollectives,
              disabled: isSettingPolicies || !((_formik$values$polici36 = formik.values.policies) !== null && _formik$values$polici36 !== void 0 && (_formik$values$polici37 = _formik$values$polici36['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici37 !== void 0 && _formik$values$polici37.appliesToHostedCollectives),
              onChange: function onChange() {
                var _formik$values$polici38, _formik$values$polici39, _formik$values$polici40;

                return formik.setFieldValue('policies', Policies_objectSpread(Policies_objectSpread({}, formik.values.policies), {}, defineProperty_default()({}, 'EXPENSE_AUTHOR_CANNOT_APPROVE', Policies_objectSpread(Policies_objectSpread({}, (_formik$values$polici38 = formik.values.policies) === null || _formik$values$polici38 === void 0 ? void 0 : _formik$values$polici38['EXPENSE_AUTHOR_CANNOT_APPROVE']), {}, {
                  appliesToSingleAdminCollectives: !((_formik$values$polici39 = formik.values.policies) !== null && _formik$values$polici39 !== void 0 && (_formik$values$polici40 = _formik$values$polici39['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici40 !== void 0 && _formik$values$polici40.appliesToSingleAdminCollectives)
                }))));
              }
            })
          })]
        }), numberOfAdmins < 2 && Boolean(!((_formik$values$polici41 = formik.values.policies) !== null && _formik$values$polici41 !== void 0 && (_formik$values$polici42 = _formik$values$polici41['EXPENSE_AUTHOR_CANNOT_APPROVE']) !== null && _formik$values$polici42 !== void 0 && _formik$values$polici42.enabled)) && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "14px",
          lineHeight: "18px",
          color: "black.600",
          ml: "2.2rem",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.expenseApprovalsPolicy.authorCannotApprove.minAdminRequired",
            defaultMessage: [{
              "type": 0,
              "value": "You need to have at least two admins to enable this policy."
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
        mt: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
          name: "allow-expense-submission",
          label: formatMessage(Policies_messages['expensePolicy.allowExpense']),
          onChange: function onChange() {
            return formik.setFieldValue('disablePublicExpenseSubmission', !formik.values.disablePublicExpenseSubmission);
          },
          defaultChecked: Boolean(formik.values.disablePublicExpenseSubmission)
        })
      }), collective.isHost && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "7oAuzt",
            defaultMessage: [{
              "type": 0,
              "value": "Expense types"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.expenseTypes.description",
            defaultMessage: [{
              "type": 0,
              "value": "Specify the types of expenses allowed for all the collectives you're hosting. If you wish to customize these options for specific collectives, head to the "
            }, {
              "type": 8,
              "value": "HostedCollectivesLink",
              "children": [{
                "type": 0,
                "value": "Hosted Collectives"
              }]
            }, {
              "type": 0,
              "value": " section."
            }],
            values: {
              HostedCollectivesLink: (0,I18nFormatters/* getI18nLink */.fw)({
                as: Link/* default */.Z,
                href: "/".concat(collective.slug, "/admin/hosted-collectives")
              })
            }
          })
        }), ['RECEIPT', 'INVOICE', 'GRANT'].map(function (type) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
            name: "allow-".concat(type, "-submission"),
            label: formatMessage(Policies_messages["expensePolicy.".concat(type)]),
            checked: Boolean(formik.values.expenseTypes[type]),
            onChange: function onChange() {
              return formik.setFieldValue('expenseTypes', Policies_objectSpread(Policies_objectSpread({}, formik.values.expenseTypes), {}, defineProperty_default()({}, type, !formik.values.expenseTypes[type])));
            }
          }, type);
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          mt: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.rejectCategories.header",
            defaultMessage: [{
              "type": 0,
              "value": "Rejected categories"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "editCollective.rejectCategories.description",
            defaultMessage: [{
              "type": 0,
              "value": "Specify any categories of contributor that you do not wish to accept money from, to automatically prevent these types of contributions. (You can also reject contributions individually using the button on a specific unwanted transaction)"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
          inputId: "policy-select",
          isSearchable: false,
          isLoading: loading,
          placeholder: formatMessage(Policies_messages['rejectCategories.placeholder']),
          minWidth: 300,
          maxWidth: 600,
          options: selectOptions,
          value: selected,
          onChange: function onChange(selectedOptions) {
            return setSelected(selectedOptions);
          },
          isMulti: true
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 5,
        mb: 3,
        alignItems: "center",
        justifyContent: "center",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          "data-cy": "submit-policy-btn",
          buttonStyle: "primary",
          mx: 2,
          minWidth: 200,
          buttonSize: "medium",
          loading: isSubmittingSettings || isSubmittingCategories,
          type: "submit",
          onSubmit: formik.handleSubmit,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "save",
            defaultMessage: [{
              "type": 0,
              "value": "Save"
            }]
          })
        })
      })]
    })]
  });
};

Policies.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Policies",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "settings": {
            "name": "object",
            "required": false
          },
          "id": {
            "name": "number",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          },
          "members": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "role": {
                  "name": "string",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "showOnlyExpensePolicy": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_Policies = (Policies);
// EXTERNAL MODULE: ./node_modules/lodash/has.js
var has = __webpack_require__(18721);
var has_default = /*#__PURE__*/__webpack_require__.n(has);
// EXTERNAL MODULE: ./lib/allowed-features.js
var allowed_features = __webpack_require__(99708);
// EXTERNAL MODULE: ./node_modules/lodash/findLast.js
var findLast = __webpack_require__(30988);
var findLast_default = /*#__PURE__*/__webpack_require__.n(findLast);
// EXTERNAL MODULE: ./lib/constants/payout-method.js
var payout_method = __webpack_require__(56508);
// EXTERNAL MODULE: ./components/expenses/PayoutBankInformationForm.js
var PayoutBankInformationForm = __webpack_require__(38884);
// EXTERNAL MODULE: ./components/edit-collective/utils.js
var edit_collective_utils = __webpack_require__(46217);
;// CONCATENATED MODULE: ./components/edit-collective/UpdateBankDetailsForm.js








function UpdateBankDetailsForm_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function UpdateBankDetailsForm_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? UpdateBankDetailsForm_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : UpdateBankDetailsForm_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function UpdateBankDetailsForm_createSuper(Derived) { var hasNativeReflectConstruct = UpdateBankDetailsForm_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function UpdateBankDetailsForm_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }












var List = styled_components_browser_esm/* default.ul.withConfig */.ZP.ul.withConfig({
  displayName: "UpdateBankDetailsForm__List",
  componentId: "sc-1a0b0bq-0"
})(["margin:0;padding:0;position:relative;list-style:none;"]);

var UpdateBankDetailsForm = /*#__PURE__*/function (_React$Component) {
  inherits_default()(UpdateBankDetailsForm, _React$Component);

  var _super = UpdateBankDetailsForm_createSuper(UpdateBankDetailsForm);

  function UpdateBankDetailsForm(props) {
    var _this;

    classCallCheck_default()(this, UpdateBankDetailsForm);

    _this = _super.call(this, props);
    _this.state = {
      form: {
        instructions: props.value
      }
    };
    _this.onChange = _this.onChange.bind(assertThisInitialized_default()(_this));
    _this.messages = (0,lib.defineMessages)({
      'bankaccount.instructions.label': {
        id: "paymentMethods.manual.instructions",
        defaultMessage: [{
          "type": 0,
          "value": "Bank transfer instructions"
        }]
      }
    });
    return _this;
  }

  createClass_default()(UpdateBankDetailsForm, [{
    key: "onChange",
    value: function onChange(field, value) {
      var _this2 = this;

      this.setState(function (state) {
        return {
          form: UpdateBankDetailsForm_objectSpread(UpdateBankDetailsForm_objectSpread({}, state.form), {}, defineProperty_default()({}, field, value))
        };
      }, function () {
        return _this2.props.onChange(_this2.state.form);
      });
    }
  }, {
    key: "renderInstructions",
    value: function renderInstructions() {
      var formatValues = {
        account: this.props.bankAccount ? (0,edit_collective_utils/* formatAccountDetails */.H)(this.props.bankAccount) : '',
        reference: '76400',
        OrderId: '76400',
        amount: '$30',
        collective: 'acme'
      };
      return (0,payment_method_utils/* formatManualInstructions */.U8)(this.state.form.instructions, formatValues);
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var _this$props = this.props,
          intl = _this$props.intl,
          value = _this$props.value,
          error = _this$props.error,
          useStructuredForm = _this$props.useStructuredForm,
          bankAccount = _this$props.bankAccount;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          as: "fieldset",
          border: "none",
          width: 1,
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: ['column-reverse', 'row'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              mb: 3,
              flexGrow: 1,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, {
                label: intl.formatMessage(this.messages['bankaccount.instructions.label']),
                htmlFor: "instructions",
                width: "100%",
                height: 400,
                onChange: function onChange(e) {
                  return _this3.onChange('instructions', e.target.value);
                },
                defaultValue: value
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              fontSize: "1.4rem",
              pl: [0, 3],
              width: [1, 0.5],
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "bankaccount.instructions.variables",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Financial contributors will receive these instructions when they select bank transfer as the payment method. You can use the following variables (like blanks that gets filled in):"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)(List, {
                children: [useStructuredForm && (bankAccount === null || bankAccount === void 0 ? void 0 : bankAccount.currency) && /*#__PURE__*/(0,jsx_runtime.jsxs)("li", {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("code", {
                    children: "{account}"
                  }), ":", ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "bankaccount.instructions.account",
                    defaultMessage: [{
                      "type": 0,
                      "value": "The bank account details you added above."
                    }]
                  })]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)("li", {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("code", {
                    children: "{amount}"
                  }), ":", ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "bankaccount.instructions.amount",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Total amount the payer should transfer."
                    }]
                  })]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)("li", {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("code", {
                    children: "{collective}"
                  }), ":", ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "bankaccount.instructions.collective",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Collective to receive the funds. If you only have one Collective, you might not need to include this."
                    }]
                  })]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)("li", {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("code", {
                    children: "{reference}"
                  }), ":", ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "bankaccount.instructions.reference",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Unique ID code, to confirm receipt of funds."
                    }]
                  })]
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "bankaccount.instructions.preview",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Preview:"
                    }]
                  })
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("pre", {
                  style: {
                    whiteSpace: 'pre-wrap'
                  },
                  children: this.renderInstructions()
                })]
              })]
            })]
          })
        }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          display: "block",
          color: "red.500",
          pt: 2,
          fontSize: "10px",
          children: error
        })]
      });
    }
  }]);

  return UpdateBankDetailsForm;
}(react.Component);

UpdateBankDetailsForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "onChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "field",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderInstructions",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "UpdateBankDetailsForm",
  "props": {
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "profileType": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "error": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "useStructuredForm": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "bankAccount": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_UpdateBankDetailsForm = ((0,injectIntl/* default */.ZP)(UpdateBankDetailsForm));
;// CONCATENATED MODULE: ./components/edit-collective/sections/BankTransfer.js








var BankTransfer_templateObject, BankTransfer_templateObject2, BankTransfer_templateObject3, BankTransfer_templateObject4;



function BankTransfer_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function BankTransfer_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? BankTransfer_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : BankTransfer_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }






















var hostQuery = (0,graphql_tag_lib/* default */.ZP)(BankTransfer_templateObject || (BankTransfer_templateObject = taggedTemplateLiteral_default()(["\n  query EditCollectiveBankTransferHost($slug: String) {\n    host(slug: $slug) {\n      id\n      slug\n      legacyId\n      currency\n      settings\n      connectedAccounts {\n        id\n        service\n      }\n      plan {\n        id\n        hostedCollectives\n        manualPayments\n        name\n      }\n      payoutMethods {\n        id\n        name\n        data\n        type\n      }\n    }\n  }\n"])));
var createPayoutMethodMutation = (0,graphql_tag_lib/* default */.ZP)(BankTransfer_templateObject2 || (BankTransfer_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveBankTransferCreatePayoutMethod(\n    $payoutMethod: PayoutMethodInput!\n    $account: AccountReferenceInput!\n  ) {\n    createPayoutMethod(payoutMethod: $payoutMethod, account: $account) {\n      data\n      id\n      name\n      type\n    }\n  }\n"])));
var removePayoutMethodMutation = (0,graphql_tag_lib/* default */.ZP)(BankTransfer_templateObject3 || (BankTransfer_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveBankTransferRemovePayoutMethod($payoutMethodId: String!) {\n    removePayoutMethod(payoutMethodId: $payoutMethodId) {\n      id\n    }\n  }\n"])));
var editBankTransferMutation = (0,graphql_tag_lib/* default */.ZP)(BankTransfer_templateObject4 || (BankTransfer_templateObject4 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveBankTransfer($account: AccountReferenceInput!, $key: AccountSettingsKey!, $value: JSON!) {\n    editAccountSetting(account: $account, key: $key, value: $value) {\n      id\n      settings\n    }\n  }\n"])));

var renderBankInstructions = function renderBankInstructions(instructions, bankAccountInfo) {
  var formatValues = {
    account: bankAccountInfo ? (0,edit_collective_utils/* formatAccountDetails */.H)(bankAccountInfo) : '',
    reference: '76400',
    OrderId: '76400',
    amount: '$30',
    collective: 'acme'
  };
  return (0,payment_method_utils/* formatManualInstructions */.U8)(instructions, formatValues);
};

var BankTransfer = function BankTransfer(props) {
  var _data$host$settings, _data$host$settings$p, _data$host$settings$p2, _existingPayoutMethod, _data$host$connectedA, _data$host$connectedA2, _data$host;

  var _useQuery = (0,client.useQuery)(hostQuery, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      slug: props.collectiveSlug
    }
  }),
      loading = _useQuery.loading,
      data = _useQuery.data;

  var _useMutation = (0,client.useMutation)(createPayoutMethodMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      createPayoutMethod = _useMutation2[0];

  var _useMutation3 = (0,client.useMutation)(removePayoutMethodMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation4 = slicedToArray_default()(_useMutation3, 1),
      removePayoutMethod = _useMutation4[0];

  var _useMutation5 = (0,client.useMutation)(editBankTransferMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation6 = slicedToArray_default()(_useMutation5, 1),
      editBankTransfer = _useMutation6[0];

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showForm = _React$useState2[0],
      setShowForm = _React$useState2[1];

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      showRemoveBankConfirmationModal = _React$useState4[0],
      setShowRemoveBankConfirmationModal = _React$useState4[1];

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
  }

  var existingManualPaymentMethod = !!get_default()(data.host, 'settings.paymentMethods.manual');
  var showEditManualPaymentMethod = !showForm && data.host;
  var existingPayoutMethod = data.host.payoutMethods.find(function (pm) {
    return pm.data.isManualBankTransfer;
  });
  var useStructuredForm = !existingManualPaymentMethod || existingManualPaymentMethod && existingPayoutMethod ? true : false;
  var instructions = ((_data$host$settings = data.host.settings) === null || _data$host$settings === void 0 ? void 0 : (_data$host$settings$p = _data$host$settings.paymentMethods) === null || _data$host$settings$p === void 0 ? void 0 : (_data$host$settings$p2 = _data$host$settings$p.manual) === null || _data$host$settings$p2 === void 0 ? void 0 : _data$host$settings$p2.instructions) || payout_method/* BANK_TRANSFER_DEFAULT_INSTRUCTIONS */.kD; // Fix currency if the existing payout method already matches the collective currency
  // or if it was already defined by Stripe

  var existingPayoutMethodMatchesCurrency = (existingPayoutMethod === null || existingPayoutMethod === void 0 ? void 0 : (_existingPayoutMethod = existingPayoutMethod.data) === null || _existingPayoutMethod === void 0 ? void 0 : _existingPayoutMethod.currency) === data.host.currency;
  var isConnectedToStripe = (_data$host$connectedA = data.host.connectedAccounts) === null || _data$host$connectedA === void 0 ? void 0 : (_data$host$connectedA2 = _data$host$connectedA.find) === null || _data$host$connectedA2 === void 0 ? void 0 : _data$host$connectedA2.call(_data$host$connectedA, function (ca) {
    return ca.service === 'stripe';
  });
  var fixedCurrency = useStructuredForm && (existingPayoutMethodMatchesCurrency || isConnectedToStripe) && data.host.currency;

  var initialValues = BankTransfer_objectSpread(BankTransfer_objectSpread({}, existingPayoutMethod || {
    data: {
      currency: fixedCurrency || data.host.currency
    }
  }), {}, {
    instructions: instructions
  });

  var latestBankAccount = findLast_default()(data === null || data === void 0 ? void 0 : (_data$host = data.host) === null || _data$host === void 0 ? void 0 : _data$host.payoutMethods, function (payoutMethod) {
    return payoutMethod.type === payout_method/* PayoutMethodType.BANK_ACCOUNT */.Nk.BANK_ACCOUNT;
  });

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    className: "EditPaymentMethods",
    flexDirection: "column",
    children: [showEditManualPaymentMethod && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "editCollective.receivingMoney.bankTransfers",
          defaultMessage: [{
            "type": 0,
            "value": "Bank Transfers"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          fontSize: "12px",
          mt: 2,
          color: "black.600",
          textAlign: "left",
          children: data.host.plan.manualPayments ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethods.manual.add.info",
            defaultMessage: [{
              "type": 0,
              "value": "Define instructions for contributions via bank transfer. When funds arrive, you can mark them as confirmed to credit the budget balance."
            }]
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethods.manual.upgradePlan",
            defaultMessage: [{
              "type": 0,
              "value": "Subscribe to our special plans for hosts"
            }]
          })
        })
      }), existingManualPaymentMethod && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        pt: 2,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          fontSize: "12px",
          mt: 2,
          mb: 2,
          color: "black.600",
          textAlign: "left",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "13qBPb",
            defaultMessage: [{
              "type": 0,
              "value": "Preview of bank transfer instructions"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("pre", {
          style: {
            whiteSpace: 'pre-wrap'
          },
          children: renderBankInstructions(instructions, latestBankAccount === null || latestBankAccount === void 0 ? void 0 : latestBankAccount.data)
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        alignItems: "center",
        my: 2,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "standard",
          buttonSize: "small",
          disabled: !data.host.plan.manualPayments,
          onClick: function onClick() {
            setShowForm(true);
            props.hideTopsection(true);
          },
          children: existingManualPaymentMethod ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "paymentMethods.manual.edit",
            defaultMessage: [{
              "type": 0,
              "value": "Edit bank details"
            }]
          }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Add_esm/* Add */.m, {
              size: "1em"
            }), '  ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethods.manual.add",
              defaultMessage: [{
                "type": 0,
                "value": "Set bank details"
              }]
            })]
          })
        }), ' ', existingManualPaymentMethod && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          mt: [2, 0],
          buttonStyle: "standard",
          buttonSize: "small",
          disabled: !data.host.plan.manualPayments,
          onClick: function onClick() {
            setShowRemoveBankConfirmationModal(true);
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "D0TAWz",
            defaultMessage: [{
              "type": 0,
              "value": "Remove bank details"
            }]
          })
        })]
      })]
    }), showForm && /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
      initialValues: initialValues,
      onSubmit: /*#__PURE__*/function () {
        var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values, _ref) {
          var setSubmitting, data, instructions;
          return regenerator_default().wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  setSubmitting = _ref.setSubmitting;
                  data = values.data, instructions = values.instructions;

                  if (!(data !== null && data !== void 0 && data.currency && data !== null && data !== void 0 && data.type)) {
                    _context.next = 5;
                    break;
                  }

                  _context.next = 5;
                  return createPayoutMethod({
                    variables: {
                      payoutMethod: {
                        data: BankTransfer_objectSpread(BankTransfer_objectSpread({}, data), {}, {
                          isManualBankTransfer: true
                        }),
                        type: 'BANK_ACCOUNT'
                      },
                      account: {
                        slug: props.collectiveSlug
                      }
                    }
                  });

                case 5:
                  _context.next = 7;
                  return editBankTransfer({
                    variables: {
                      key: 'paymentMethods.manual.instructions',
                      value: instructions,
                      account: {
                        slug: props.collectiveSlug
                      }
                    },
                    refetchQueries: [{
                      query: hostQuery,
                      context: helpers/* API_V2_CONTEXT */.T,
                      variables: {
                        slug: props.collectiveSlug
                      }
                    }],
                    awaitRefetchQueries: true
                  });

                case 7:
                  setSubmitting(false);
                  setShowForm(false);
                  props.hideTopsection(false);

                case 10:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee);
        }));

        return function (_x, _x2) {
          return _ref2.apply(this, arguments);
        };
      }(),
      children: function children(_ref3) {
        var handleSubmit = _ref3.handleSubmit,
            isSubmitting = _ref3.isSubmitting,
            setFieldValue = _ref3.setFieldValue,
            values = _ref3.values;
        return /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
          onSubmit: handleSubmit,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethods.manual.HowDoesItWork",
              defaultMessage: [{
                "type": 0,
                "value": "How does it work?"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: ['column', 'row'],
            alignItems: ['center', 'start'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              mr: 2,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "paymentMethod.manual.edit.description",
                defaultMessage: [{
                  "type": 0,
                  "value": "Contributors can choose \"Bank Transfer\" as a payment method at checkout and instructions will be automatically emailed to them. Once received, you can mark the transaction as confirmed to credit the budget on Open Collective."
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
              alt: "",
              src: "/static/images/ManualPaymentMethod-BankTransfer.png",
              width: 350,
              height: 168
            })]
          }), useStructuredForm && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
              mt: 4,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "paymentMethods.manual.bankInfo.title",
                defaultMessage: [{
                  "type": 0,
                  "value": "Add your bank account information"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
              mr: 2,
              flexDirection: "column",
              width: [1, 0.5],
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(PayoutBankInformationForm/* default */.Z, {
                getFieldName: function getFieldName(string) {
                  return string;
                },
                fixedCurrency: fixedCurrency,
                ignoreBlockedCurrencies: false,
                isNew: true,
                optional: true
              })
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
            mt: 4,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "paymentMethods.manual.instructions.title",
              defaultMessage: [{
                "type": 0,
                "value": "Define instructions"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            mr: 2,
            flexGrow: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_UpdateBankDetailsForm, {
              value: instructions,
              onChange: function onChange(_ref4) {
                var instructions = _ref4.instructions;
                return setFieldValue('instructions', instructions);
              },
              useStructuredForm: useStructuredForm,
              bankAccount: values.data
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            my: 3,
            textAlign: ['center', 'left'],
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              mr: 2,
              buttonStyle: "standard",
              buttonSize: "medium",
              onClick: function onClick() {
                setShowForm(false);
                props.hideTopsection(false);
              },
              disabled: isSubmitting,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "actions.cancel",
                defaultMessage: [{
                  "type": 0,
                  "value": "Cancel"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              buttonStyle: "primary",
              buttonSize: "medium",
              type: "submit",
              disabled: isSubmitting,
              loading: isSubmitting,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "save",
                defaultMessage: [{
                  "type": 0,
                  "value": "Save"
                }]
              })
            })]
          })]
        });
      }
    }), showRemoveBankConfirmationModal && /*#__PURE__*/(0,jsx_runtime.jsx)(ConfirmationModal/* default */.Z, {
      width: "100%",
      maxWidth: "570px",
      onClose: function onClose() {
        setShowRemoveBankConfirmationModal(false);
      },
      header: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "GW8+0X",
        defaultMessage: [{
          "type": 0,
          "value": "Remove Bank Account"
        }]
      }),
      continueHandler: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
        var paymentMethods, modifiedPaymentMethods;
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                paymentMethods = get_default()(data.host, 'settings.paymentMethods');
                modifiedPaymentMethods = omit_default()(paymentMethods, 'manual');

                if (!latestBankAccount) {
                  _context2.next = 5;
                  break;
                }

                _context2.next = 5;
                return removePayoutMethod({
                  variables: {
                    payoutMethodId: latestBankAccount.id
                  }
                });

              case 5:
                _context2.next = 7;
                return editBankTransfer({
                  variables: {
                    key: 'paymentMethods',
                    value: modifiedPaymentMethods,
                    account: {
                      slug: props.collectiveSlug
                    }
                  },
                  refetchQueries: [{
                    query: hostQuery,
                    context: helpers/* API_V2_CONTEXT */.T,
                    variables: {
                      slug: props.collectiveSlug
                    }
                  }],
                  awaitRefetchQueries: true
                });

              case 7:
                setShowRemoveBankConfirmationModal(false);

              case 8:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      })),
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "14px",
        lineHeight: "18px",
        mt: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "kNxL0S",
          defaultMessage: [{
            "type": 0,
            "value": "Are you sure you want to remove bank account details?"
          }]
        })
      })
    })]
  });
};

BankTransfer.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "BankTransfer",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_BankTransfer = ((0,injectIntl/* default */.ZP)(BankTransfer));
;// CONCATENATED MODULE: ./components/edit-collective/sections/ReceivingMoney.js









function ReceivingMoney_createSuper(Derived) { var hasNativeReflectConstruct = ReceivingMoney_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function ReceivingMoney_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }









var ReceivingMoney_USER = constants_collectives/* CollectiveType.USER */.eV.USER;

var ReceivingMoney = /*#__PURE__*/function (_React$Component) {
  inherits_default()(ReceivingMoney, _React$Component);

  var _super = ReceivingMoney_createSuper(ReceivingMoney);

  function ReceivingMoney() {
    var _this;

    classCallCheck_default()(this, ReceivingMoney);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    defineProperty_default()(assertThisInitialized_default()(_this), "state", {
      hideTopsection: false
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "hideTopsection", function (value) {
      _this.setState({
        hideTopsection: value
      });
    });

    return _this;
  }

  createClass_default()(ReceivingMoney, [{
    key: "render",
    value: function render() {
      var services = ['stripe'];

      if ((0,allowed_features/* default */.ZP)(this.props.collective, allowed_features/* FEATURES.PAYPAL_DONATIONS */.h6.PAYPAL_DONATIONS)) {
        services.push('paypal');
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [!this.state.hideTopsection && /*#__PURE__*/(0,jsx_runtime.jsx)(sections_ConnectedAccounts, {
          collective: this.props.collective,
          connectedAccounts: this.props.collective.connectedAccounts,
          services: services,
          variation: "RECEIVING"
        }), (this.props.collective.type !== ReceivingMoney_USER || has_default()(this.props.collective, 'data.settings.paymentMethods.manual')) && /*#__PURE__*/(0,jsx_runtime.jsx)(sections_BankTransfer, {
          collectiveSlug: this.props.collective.slug,
          hideTopsection: this.hideTopsection
        })]
      });
    }
  }]);

  return ReceivingMoney;
}(react.Component);

ReceivingMoney.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "hideTopsection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "ReceivingMoney",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_ReceivingMoney = ((0,injectIntl/* default */.ZP)(ReceivingMoney));
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/ExternalLink/ExternalLink.esm.js
var ExternalLink_esm = __webpack_require__(31492);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Security.js







var Security_templateObject, Security_templateObject2;



function Security_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Security_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Security_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Security_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
























var accountQuery = (0,graphql_tag_lib/* default */.ZP)(Security_templateObject || (Security_templateObject = taggedTemplateLiteral_default()(["\n  query Account($slug: String) {\n    account(slug: $slug) {\n      id\n      slug\n      name\n      isHost\n      settings\n      currency\n      policies {\n        REQUIRE_2FA_FOR_ADMINS\n      }\n    }\n  }\n"])));
var updateSecuritySettingsMutation = (0,graphql_tag_lib/* default */.ZP)(Security_templateObject2 || (Security_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation UpdateSecuritySettings(\n    $account: AccountReferenceInput!\n    $payoutsTwoFactorAuth: JSON!\n    $require2FAForAdmins: Boolean!\n  ) {\n    editAccountSetting(account: $account, key: \"payoutsTwoFactorAuth\", value: $payoutsTwoFactorAuth) {\n      id\n      settings\n    }\n    setPolicies(account: $account, policies: { REQUIRE_2FA_FOR_ADMINS: $require2FAForAdmins }) {\n      id\n      policies {\n        REQUIRE_2FA_FOR_ADMINS\n      }\n    }\n  }\n"])));
var CheckboxContainer = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "Security__CheckboxContainer",
  componentId: "sc-mvslh4-0"
})(["display:flex;align-items:center;cursor:pointer;padding:16px;border:1px solid #dcdee0;font-weight:normal;transition:box-shadow 0.3s;border-radius:8px;", " &:hover{box-shadow:0px 4px 12px rgba(20,20,20,0.1);}"], index_esm/* margin */.e6);

var getInitialValues = function getInitialValues(account) {
  return {
    require2FAForAdmins: get_default()(account, 'policies.REQUIRE_2FA_FOR_ADMINS', false),
    payoutsTwoFactorAuth: {
      enabled: get_default()(account, 'settings.payoutsTwoFactorAuth.enabled', false),
      rollingLimit: get_default()(account, 'settings.payoutsTwoFactorAuth.rollingLimit', 1000000)
    }
  };
};

var Security = function Security(_ref) {
  var collective = _ref.collective;
  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useQuery = (0,client.useQuery)(accountQuery, {
    variables: {
      slug: collective.slug
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading;

  var _useMutation = (0,client.useMutation)(updateSecuritySettingsMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      updateSecuritySettings = _useMutation2[0],
      submitting = _useMutation2[1].loading;

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 300
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
    enableReinitialize: true,
    initialValues: getInitialValues(data.account),
    onSubmit: /*#__PURE__*/function () {
      var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return updateSecuritySettings({
                  variables: Security_objectSpread({
                    account: pick_default()(data.account, ['id'])
                  }, values)
                });

              case 3:
                addToast({
                  type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                  message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "Settings.Updated",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Settings updated."
                    }]
                  })
                });
                _context.next = 9;
                break;

              case 6:
                _context.prev = 6;
                _context.t0 = _context["catch"](0);
                addToast({
                  type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                  title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "Settings.Updated.Fail",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Update failed."
                    }]
                  }),
                  message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
                });

              case 9:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[0, 6]]);
      }));

      return function (_x) {
        return _ref2.apply(this, arguments);
      };
    }(),
    children: function children(_ref3) {
      var handleSubmit = _ref3.handleSubmit,
          setFieldValue = _ref3.setFieldValue,
          values = _ref3.values,
          dirty = _ref3.dirty;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
        onSubmit: handleSubmit,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "TwoFactorAuth",
            defaultMessage: [{
              "type": 0,
              "value": "Two-factor authentication"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          mb: "26px",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            color: "black.700",
            fontSize: "14px",
            lineHeight: "20px",
            mb: 24,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "TwoFactorAuth.Setup.FiscalHost.Info",
              defaultMessage: [{
                "type": 0,
                "value": "Two-factor authentication (2FA) adds an extra layer of security when logging in. For Fiscal Hosts or Collectives that manage their own funds, 2FA helps ensure payouts are secure."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(CheckboxContainer, {
            htmlFor: "enable-enforce-2fa-checkbox",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              width: "32px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
                inputId: "enable-enforce-2fa-checkbox",
                name: "enable-enforce-2fa",
                fontSize: "14px",
                checked: values.require2FAForAdmins,
                width: "auto",
                onChange: function onChange() {
                  return setFieldValue('require2FAForAdmins', !values.require2FAForAdmins);
                }
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              flex: "1 1",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                fontSize: "16px",
                lineHeight: "24px",
                fontWeight: "700",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "/EO1Lu",
                  defaultMessage: [{
                    "type": 0,
                    "value": "All "
                  }, {
                    "type": 1,
                    "value": "account"
                  }, {
                    "type": 0,
                    "value": " admins must have 2FA"
                  }],
                  values: {
                    account: data.account.name
                  }
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                mt: "5px",
                color: "black.700",
                fontSize: "14px",
                lineHeight: "20px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "ixSLWY",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Checking this will require all admins of your team to activate a two-factor authentication to perform admin tasks like payouts."
                  }]
                })
              })]
            })]
          })]
        }), data.account.isHost && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H4, {
            htmlFor: "rollingLimit",
            mb: "16px",
            fontSize: "16px",
            lineHeight: "24px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "editCollective.rollingLimit.label",
              defaultMessage: [{
                "type": 0,
                "value": "Rolling payout limit"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(CheckboxContainer, {
            htmlFor: "enable-rolling-limit-checkbox",
            mb: 24,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              width: "32px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
                inputId: "enable-rolling-limit-checkbox",
                name: "enable-rolling-limit",
                checked: values.payoutsTwoFactorAuth.enabled,
                width: "auto",
                onChange: function onChange() {
                  return setFieldValue('payoutsTwoFactorAuth.enabled', !values.payoutsTwoFactorAuth.enabled);
                }
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
              flex: "1 1",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                fontSize: "16px",
                lineHeight: "24px",
                fontWeight: "700",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "2u8jmQ",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Enable rolling limit 2FA for payouts"
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                mt: "5px",
                color: "black.700",
                fontSize: "14px",
                lineHeight: "20px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "S6+1h1",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Admins will be asked to authenticate with 2FA code when they make the first payment after turning it on, and again once they've hit the rolling limit."
                  }]
                })
              })]
            })]
          }), values.payoutsTwoFactorAuth.enabled && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            name: "rollingLimit",
            htmlFor: "rollingLimit",
            disabled: loading,
            mr: "24px",
            children: function children(inputProps) {
              return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputAmount/* default */.Z, Security_objectSpread(Security_objectSpread({}, inputProps), {}, {
                currency: data.account.currency,
                type: "number",
                fontSize: "14px",
                value: values.payoutsTwoFactorAuth.rollingLimit,
                onChange: function onChange(value) {
                  return setFieldValue('payoutsTwoFactorAuth.rollingLimit', value);
                },
                min: 100,
                precision: 2,
                disabled: !values.payoutsTwoFactorAuth.enabled,
                px: "2px",
                placeholder: intl.formatMessage({
                  id: "collective.contributionPolicy.placeholder",
                  defaultMessage: [{
                    "type": 0,
                    "value": "E.g. what types of contributions you will and will not accept."
                  }]
                })
              }));
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: 26,
          fontWeight: "500",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
            openInNewTab: true,
            href: data.account.isHost ? 'https://docs.opencollective.com/help/fiscal-hosts/payouts/two-factor-authentication-for-payouts' : 'https://docs.opencollective.com/help/product/two-factor-authentication',
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "E+Bll1",
                defaultMessage: [{
                  "type": 0,
                  "value": "Read the documentation about 2FA"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              ml: "6px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(ExternalLink_esm/* ExternalLink */.d, {
                size: "1.1em",
                strokeWidth: 2,
                style: {
                  marginBottom: 3
                }
              })
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          borderColor: "black.400",
          my: 4
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            buttonStyle: "primary",
            minWidth: 100,
            type: "submit",
            loading: submitting,
            disabled: !dirty,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })
        })]
      });
    }
  });
};

Security.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Security",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_Security = (Security);
;// CONCATENATED MODULE: ./components/edit-collective/sections/SendingMoney.js










var SendingMoney_templateObject;



function SendingMoney_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function SendingMoney_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? SendingMoney_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : SendingMoney_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function SendingMoney_createSuper(Derived) { var hasNativeReflectConstruct = SendingMoney_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function SendingMoney_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }














var SendingMoney = /*#__PURE__*/function (_React$Component) {
  inherits_default()(SendingMoney, _React$Component);

  var _super = SendingMoney_createSuper(SendingMoney);

  function SendingMoney(props) {
    var _this;

    classCallCheck_default()(this, SendingMoney);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "togglePaypal", /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;

              _this.setState({
                isSubmitting: true
              });

              _context.next = 4;
              return _this.props.editCollectiveSettings({
                variables: {
                  id: _this.props.collective.id,
                  settings: SendingMoney_objectSpread(SendingMoney_objectSpread({}, _this.props.collective.settings), {}, {
                    disablePaypalPayouts: !_this.props.collective.settings.disablePaypalPayouts
                  })
                }
              });

            case 4:
              _this.setState({
                isSubmitting: false
              });

              _context.next = 10;
              break;

            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);

              _this.setState({
                error: _context.t0.toString()
              });

            case 10:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 7]]);
    })));

    _this.state = {
      error: null,
      isSubmitting: false
    };
    return _this;
  }

  createClass_default()(SendingMoney, [{
    key: "render",
    value: function render() {
      var _this$props$collectiv, _this$props$collectiv2, _this$props$collectiv3;

      var services = ['transferwise'];

      if ((0,allowed_features/* default */.ZP)(this.props.collective, allowed_features/* FEATURES.PAYPAL_PAYOUTS */.h6.PAYPAL_PAYOUTS)) {
        services.push('paypal');
      }

      if ((0,allowed_features/* default */.ZP)(this.props.collective, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS) && ['opensource', 'foundation', 'opencollective'].includes(this.props.collective.slug)) {
        services.push('privacy');
      }

      var paypalConnectButton;

      if ((_this$props$collectiv = this.props.collective.settings) !== null && _this$props$collectiv !== void 0 && _this$props$collectiv.disablePaypalPayouts) {
        paypalConnectButton = /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.paypalEnable.button",
          defaultMessage: [{
            "type": 0,
            "value": "Enable PayPal"
          }]
        });
      } else {
        paypalConnectButton = /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "collective.paypalDisable.button",
          defaultMessage: [{
            "type": 0,
            "value": "Disable PayPal"
          }]
        });
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_ConnectedAccounts, {
          collective: this.props.collective,
          connectedAccounts: this.props.collective.connectedAccounts,
          services: services
        }), !services.includes('paypal') && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "PayoutMethod.Type.Paypal",
              defaultMessage: [{
                "type": 0,
                "value": "PayPal"
              }]
            })
          }), !((_this$props$collectiv2 = this.props.collective.settings) !== null && _this$props$collectiv2 !== void 0 && _this$props$collectiv2.disablePaypalPayouts) && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            mb: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.sendMoney.paypalEnabled.description",
              defaultMessage: [{
                "type": 0,
                "value": "PayPal Payouts are active. Contributors can request Expenses to be paid with PayPal."
              }]
            })
          }), ((_this$props$collectiv3 = this.props.collective.settings) === null || _this$props$collectiv3 === void 0 ? void 0 : _this$props$collectiv3.disablePaypalPayouts) && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            mb: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "collective.sendMoney.paypalDisabled.description",
              defaultMessage: [{
                "type": 0,
                "value": "PayPal Payouts are disabled. Contributors are not able to request Expenses to be paid with PayPal."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            loading: this.state.isSubmitting,
            onClick: this.togglePaypal,
            mt: 2,
            type: "submit",
            maxWidth: 200,
            children: paypalConnectButton
          }), this.state.error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "error",
            withIcon: true,
            my: 3,
            children: this.state.error
          })]
        })]
      });
    }
  }]);

  return SendingMoney;
}(react.Component);

var SendingMoney_editCollectiveSettingsMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(SendingMoney_templateObject || (SendingMoney_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveSettings($id: Int!, $settings: JSON) {\n    editCollective(collective: { id: $id, settings: $settings }) {\n      id\n      settings\n    }\n  }\n"])));
var SendingMoney_addEditCollectiveSettingsMutation = (0,hoc_graphql/* graphql */.B)(SendingMoney_editCollectiveSettingsMutation, {
  name: 'editCollectiveSettings'
});
SendingMoney.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "togglePaypal",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }],
  "displayName": "SendingMoney",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "editCollectiveSettings": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_SendingMoney = ((0,injectIntl/* default */.ZP)(SendingMoney_addEditCollectiveSettingsMutation(SendingMoney)));
// EXTERNAL MODULE: ./components/contribute-cards/AdminContributeCardsContainer.js + 1 modules
var AdminContributeCardsContainer = __webpack_require__(82150);
// EXTERNAL MODULE: ./components/contribute-cards/ContributeTier.js + 1 modules
var ContributeTier = __webpack_require__(62686);
// EXTERNAL MODULE: ./components/edit-collective/tiers/EditTierModal.js + 2 modules
var EditTierModal = __webpack_require__(66981);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Tickets.js














var prepareCards = function prepareCards(collective, sortedTiers) {
  return sortedTiers.map(function (tier) {
    return {
      key: tier.id,
      Component: ContributeTier/* default */.Z,
      componentProps: {
        collective: collective,
        tier: tier,
        hideContributors: true,
        hideCTA: true
      }
    };
  });
};

var CardsContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Grid */.rj).attrs({
  justifyItems: 'center',
  gridGap: '30px',
  gridTemplateColumns: ['repeat(auto-fit, minmax(280px, 1fr))'],
  gridAutoRows: ['1fr']
}).withConfig({
  displayName: "Tickets__CardsContainer",
  componentId: "sc-sgjjus-0"
})(["& > *{padding:0;}"]);
/**
 * A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready
 * to replace the old tiers form.
 */

var Tickets = function Tickets(_ref) {
  var collective = _ref.collective;
  var variables = {
    accountSlug: collective.slug
  };

  var _useQuery = (0,client.useQuery)(EditTierModal/* listTierQuery */.L5, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error,
      refetch = _useQuery.refetch;

  var tiers = sortBy_default()(get_default()(data, 'account.tiers.nodes', []), 'legacyId');

  var tickets = tiers.filter(function (tier) {
    return tier.type === 'TICKET';
  });
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
    my: 4,
    children: loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
      height: 500,
      width: "100%"
    }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
      error: error
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(AdminContributeCardsContainer["default"], {
      collective: collective,
      cards: prepareCards(collective, tickets),
      CardsContainer: CardsContainer,
      useTierModals: true,
      enableReordering: false,
      createNewType: "TICKET",
      onTierUpdate: function onTierUpdate() {
        return refetch();
      }
    })
  });
};

Tickets.__docgenInfo = {
  "description": "A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready\nto replace the old tiers form.",
  "methods": [],
  "displayName": "Tickets",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "id": {
            "name": "number",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_Tickets = (Tickets);
// EXTERNAL MODULE: ./node_modules/@apollo/client/react/components/Mutation.js
var Mutation = __webpack_require__(32493);
// EXTERNAL MODULE: ./components/contribute-cards/ContributeCrypto.js
var ContributeCrypto = __webpack_require__(9881);
// EXTERNAL MODULE: ./components/contribute-cards/ContributeCustom.js
var ContributeCustom = __webpack_require__(35744);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Tiers.js






















 // TODO Make this a common function with the contribute section




var getFinancialContributions = function getFinancialContributions(collective, sortedTiers) {
  var hasCustomContribution = !get_default()(collective, 'settings.disableCustomContributions', false);

  var hasCryptoContribution = !get_default()(collective, 'settings.disableCryptoContributions', true) && get_default()(collective, 'host.settings.cryptoEnabled', false);

  var waysToContribute = [];
  sortedTiers.forEach(function (tier) {
    if (tier === 'custom') {
      if (hasCustomContribution) {
        waysToContribute.push({
          key: 'custom',
          Component: ContributeCustom/* default */.Z,
          componentProps: {
            collective: collective,
            hideContributors: true,
            hideCTA: true
          }
        });
      }

      if (hasCryptoContribution) {
        waysToContribute.push({
          key: 'crypto',
          Component: ContributeCrypto/* default */.Z,
          componentProps: {
            collective: collective,
            hideContributors: true,
            // for the MVP we shall not display the financial contributors for crypto
            hideCTA: true
          }
        });
      }
    } else {
      waysToContribute.push({
        key: tier.id,
        Component: ContributeTier/* default */.Z,
        componentProps: {
          collective: collective,
          tier: tier,
          hideContributors: true,
          hideCTA: true
        }
      });
    }
  });
  return waysToContribute;
};

var Tiers_CardsContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Grid */.rj).attrs({
  justifyItems: 'center',
  gridGap: '30px',
  gridTemplateColumns: ['repeat(auto-fit, minmax(280px, 1fr))'],
  gridAutoRows: ['1fr']
}).withConfig({
  displayName: "Tiers__CardsContainer",
  componentId: "sc-vn3yy8-0"
})(["& > *{padding:0;}"]);
/**
 * A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready
 * to replace the old tiers form.
 */

var Tiers = function Tiers(_ref) {
  var collective = _ref.collective;
  var variables = {
    accountSlug: collective.slug
  };

  var _useQuery = (0,client.useQuery)(EditTierModal/* listTierQuery */.L5, {
    variables: variables,
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading,
      error = _useQuery.error,
      refetch = _useQuery.refetch;

  var tiers = sortBy_default()(get_default()(data, 'account.tiers.nodes', []), 'legacyId');

  var filteredTiers = collective.type === 'EVENT' ? tiers.filter(function (tier) {
    return tier.type !== 'TICKET';
  }) : tiers; // Events have their tickets displayed in the "Tickets" section

  var intl = (0,useIntl/* default */.Z)();

  var cryptoContributionsEnabledByHost = get_default()(collective, 'host.settings.cryptoEnabled', false);

  var hasCryptoContributionsDisabled = get_default()(collective, 'settings.disableCryptoContributions', true);

  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
      gridTemplateColumns: ['1fr', '172px 1fr'],
      gridGap: 62,
      mt: 34,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
          src: "/static/images/tiers-graphic.png",
          alt: "",
          width: 172,
          height: 145,
          layout: "fixed"
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        ml: 2,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Strong */.cK, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "RHApk3",
              defaultMessage: [{
                "type": 0,
                "value": "About contribution tiers"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("br", {}), /*#__PURE__*/(0,jsx_runtime.jsx)("br", {}), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "LdgLV7",
              defaultMessage: [{
                "type": 0,
                "value": "You can provide perks or rewards for your tiers, have a set membership fee, or create categories for your contributors. Tiers can be limited to an amount or frequency (one time, monthly, yearly), or allowed to be flexibly set by contributors."
              }]
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
            href: "https://docs.opencollective.com/help/collectives/collective-settings/tiers-goals",
            openInNewTab: true,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "108gPp",
              defaultMessage: [{
                "type": 0,
                "value": "Learn more about tiers"
              }]
            }), "."]
          })
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      my: 4,
      borderColor: "black.300"
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      my: 4,
      children: loading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 500,
        width: "100%"
      }) : error ? /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBoxGraphqlError/* default */.Z, {
        error: error
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mb: 4,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            lineHeight: "20x",
            mb: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "J/LnMZ",
              defaultMessage: [{
                "type": 0,
                "value": "The custom contribution adds a default tier on your collective that doesn't enforce any minimum amount or interval. This is the easiest way for people to contribute to your Collective, but it cannot be customized."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Mutation/* Mutation */.m, {
            mutation: mutations_editAccountSettingsMutation,
            refetchQueries: [{
              query: collectiveSettingsV1Query,
              variables: {
                slug: collective.slug
              }
            }],
            awaitRefetchQueries: true,
            children: function children(editSettings, _ref2) {
              var loading = _ref2.loading;
              return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
                name: "custom-contributions",
                label: intl.formatMessage({
                  id: "tier.customContributions.label",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Enable flexible contributions"
                  }]
                }),
                defaultChecked: !get_default()(collective, 'settings.disableCustomContributions', false),
                width: "auto",
                isLoading: loading,
                onChange: function onChange(_ref3) {
                  var target = _ref3.target;
                  editSettings({
                    variables: {
                      account: {
                        legacyId: collective.id
                      },
                      key: 'disableCustomContributions',
                      value: !target.value
                    },
                    context: helpers/* API_V2_CONTEXT */.T
                  });
                }
              });
            }
          })]
        }), cryptoContributionsEnabledByHost && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mb: 4,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
            my: 4,
            borderColor: "black.300"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            lineHeight: "20x",
            mb: 3,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Tiers.CryptoTierDescription",
              defaultMessage: [{
                "type": 0,
                "value": "Enabling this will enable support for donations with Cryptocurrencies such as Bitcoin or Ethereum."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Mutation/* Mutation */.m, {
            mutation: mutations_editAccountSettingsMutation,
            refetchQueries: [{
              query: collectiveSettingsV1Query,
              variables: {
                slug: collective.slug
              }
            }],
            awaitRefetchQueries: true,
            children: function children(editSettings, _ref4) {
              var loading = _ref4.loading;
              return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledCheckbox/* default */.Z, {
                name: "crypto-contributions",
                label: intl.formatMessage({
                  id: "tier.cryptoContributions.label",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Enable Crypto contributions"
                  }]
                }),
                defaultChecked: !hasCryptoContributionsDisabled,
                width: "auto",
                isLoading: loading,
                onChange: function onChange(_ref5) {
                  var target = _ref5.target;
                  editSettings({
                    variables: {
                      account: {
                        legacyId: collective.id
                      },
                      key: 'disableCryptoContributions',
                      value: !target.value
                    },
                    context: helpers/* API_V2_CONTEXT */.T
                  });
                }
              });
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(AdminContributeCardsContainer["default"], {
          collective: collective,
          cards: getFinancialContributions(collective, filteredTiers),
          CardsContainer: Tiers_CardsContainer,
          useTierModals: true,
          enableReordering: false,
          onTierUpdate: function onTierUpdate() {
            return refetch();
          }
        })]
      })
    })]
  });
};

Tiers.__docgenInfo = {
  "description": "A revamp of `components/edit-collective/sections/Tiers.js`. Meant to be renamed once we'll be ready\nto replace the old tiers form.",
  "methods": [],
  "displayName": "Tiers",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "type": {
            "name": "string",
            "required": true
          },
          "id": {
            "name": "number",
            "required": true
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_Tiers = (Tiers);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Download/Download.esm.js
var Download_esm = __webpack_require__(71387);
// EXTERNAL MODULE: ./node_modules/qrcode.react/lib/esm/index.js
var esm = __webpack_require__(84059);
// EXTERNAL MODULE: ./node_modules/speakeasy/index.js
var speakeasy = __webpack_require__(16881);
// EXTERNAL MODULE: ./components/PasswordStrengthBar.tsx
var PasswordStrengthBar = __webpack_require__(8634);
;// CONCATENATED MODULE: ./components/edit-collective/sections/UserSecurity.js











var UserSecurity_templateObject, UserSecurity_templateObject2, UserSecurity_templateObject3, UserSecurity_templateObject4;

function UserSecurity_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function UserSecurity_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? UserSecurity_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : UserSecurity_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



function UserSecurity_createSuper(Derived) { var hasNativeReflectConstruct = UserSecurity_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function UserSecurity_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



































var UserSecurity_messages = (0,lib.defineMessages)({
  errorWrongLength: {
    id: "TwoFactorAuth.Setup.Form.ErrorLength",
    defaultMessage: [{
      "type": 0,
      "value": "Incorrect code length. Please re-enter your 6-digit code."
    }]
  },
  errorWrongFormat: {
    id: "TwoFactorAuth.Setup.Form.ErrorFormat",
    defaultMessage: [{
      "type": 0,
      "value": "Incorrect code format. Please enter only numbers."
    }]
  },
  inputLabel: {
    id: "TwoFactorAuth.Setup.Form.InputLabel",
    defaultMessage: [{
      "type": 0,
      "value": "Please enter your 6-digit code without any dashes."
    }]
  }
});

var content = function content() {
  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "12px",
      lineHeight: "18px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "TwoFactorAuth.Setup.AppInfo",
        defaultMessage: [{
          "type": 0,
          "value": "You can use 2FA apps such as Google Authenticator, Authy, 1Password, LastPass, or Microsoft Authenticator to scan the QR code."
        }]
      })
    })
  });
};

var TokenBox = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "UserSecurity__TokenBox",
  componentId: "sc-7kexzp-0"
})(["overflow-wrap:break-word;word-wrap:break-word;"]);
var Code = styled_components_browser_esm/* default.code.withConfig */.ZP.code.withConfig({
  displayName: "UserSecurity__Code",
  componentId: "sc-7kexzp-1"
})(["background:", ";color:", ";word-break:break-all;display:block;margin-top:8px;font-weight:400;font-size:14px;line-height:20px;color:#4d4f51;max-width:350px;"], function (props) {
  return props.theme.colors.black[100];
}, function (props) {
  return props.theme.colors.black[700];
});

var UserSecurity = /*#__PURE__*/function (_React$Component) {
  inherits_default()(UserSecurity, _React$Component);

  var _super = UserSecurity_createSuper(UserSecurity);

  function UserSecurity(props) {
    var _this;

    classCallCheck_default()(this, UserSecurity);

    _this = _super.call(this, props);
    _this.state = {
      error: null,
      disablingTwoFactorAuth: false,
      disableError: null,
      recoveryCodes: null,
      enablingTwoFactorAuth: false,
      showRecoveryCodesModal: false,

      /* Password management state */
      passwordLoading: false,
      passwordError: null,
      currentPassword: '',
      password: '',
      passwordKey: 1,
      passwordScore: null
    };
    _this.enableTwoFactorAuth = _this.enableTwoFactorAuth.bind(assertThisInitialized_default()(_this));
    _this.disableTwoFactorAuth = _this.disableTwoFactorAuth.bind(assertThisInitialized_default()(_this));
    _this.setPassword = _this.setPassword.bind(assertThisInitialized_default()(_this));
    return _this;
  }

  createClass_default()(UserSecurity, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      // speakeasy options object does not add issuer as expected so we add it ourselves to the otp url
      // do not use URLParams from universal-url or the web API to encode the issuer
      // see https://github.com/opencollective/opencollective-frontend/pull/4520#discussion_r447690237 for discussion
      var issuer;

      if (window.location.hostname === 'localhost') {
        issuer = '&issuer=Open%20Collective%20Local';
      } else if (window.location.hostname === 'staging.opencollective.com') {
        issuer = '&issuer=Open%20Collective%20Staging';
      } else {
        issuer = '&issuer=Open%20Collective';
      }

      var options = {
        name: this.props.LoggedInUser.email,
        length: 64
      };
      var secret = speakeasy.generateSecret(options);
      var otpAuthUrl = secret.otpauth_url + issuer;
      this.setState({
        secret: secret,
        base32: secret.base32,
        otpAuthUrl: otpAuthUrl
      });
    }
  }, {
    key: "enableTwoFactorAuth",
    value: function () {
      var _enableTwoFactorAuth = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
        var _this2 = this;

        var twoFactorAuthenticatorCode, verified, account, errorMsg;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                // verify QR code
                twoFactorAuthenticatorCode = values.twoFactorAuthenticatorCode;
                verified = speakeasy.totp.verify({
                  secret: this.state.base32,
                  encoding: 'base32',
                  token: twoFactorAuthenticatorCode,
                  window: 2
                }); // if not verified, ask the user to try again

                if (!verified) {
                  this.setState({
                    error: '2FA token not verified. Please try again.'
                  });
                } // if ok, send secret to backend


                if (!verified) {
                  _context.next = 9;
                  break;
                }

                account = {
                  id: this.props.data.individual.id
                };
                _context.next = 8;
                return this.props.addTwoFactorAuthTokenToIndividual({
                  variables: {
                    account: account,
                    token: this.state.base32
                  }
                }).then(function (data) {
                  _this2.setState({
                    recoveryCodes: get_default()(data, 'data.addTwoFactorAuthTokenToIndividual.recoveryCodes')
                  });
                }).then(function () {
                  _this2.props.refetchLoggedInUser(); // No need to await

                });

              case 8:
                this.setState({
                  error: null,
                  enablingTwoFactorAuth: true
                });

              case 9:
                _context.next = 15;
                break;

              case 11:
                _context.prev = 11;
                _context.t0 = _context["catch"](0);
                errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;
                this.setState({
                  error: errorMsg
                });

              case 15:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[0, 11]]);
      }));

      function enableTwoFactorAuth(_x) {
        return _enableTwoFactorAuth.apply(this, arguments);
      }

      return enableTwoFactorAuth;
    }()
  }, {
    key: "disableTwoFactorAuth",
    value: function () {
      var _disableTwoFactorAuth = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(values) {
        var twoFactorAuthenticatorCode, account, errorMsg;
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                twoFactorAuthenticatorCode = values.twoFactorAuthenticatorCode;
                account = {
                  id: this.props.data.individual.id
                };
                _context2.next = 5;
                return this.props.removeTwoFactorAuthTokenFromIndividual({
                  variables: {
                    account: account,
                    code: twoFactorAuthenticatorCode
                  }
                });

              case 5:
                this.props.refetchLoggedInUser(); // No need to await

                this.setState({
                  disablingTwoFactorAuth: false,
                  error: null
                });
                _context2.next = 13;
                break;

              case 9:
                _context2.prev = 9;
                _context2.t0 = _context2["catch"](0);
                errorMsg = (0,errors/* getErrorFromGraphqlException */.H1)(_context2.t0).message;
                this.setState({
                  disableError: errorMsg
                });

              case 13:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[0, 9]]);
      }));

      function disableTwoFactorAuth(_x2) {
        return _disableTwoFactorAuth.apply(this, arguments);
      }

      return disableTwoFactorAuth;
    }()
  }, {
    key: "setPassword",
    value: function () {
      var _setPassword = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3() {
        var _this$state, password, passwordKey, currentPassword, passwordScore, result;

        return regenerator_default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _this$state = this.state, password = _this$state.password, passwordKey = _this$state.passwordKey, currentPassword = _this$state.currentPassword, passwordScore = _this$state.passwordScore;

                if (!(password === currentPassword)) {
                  _context3.next = 4;
                  break;
                }

                this.setState({
                  passwordError: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "HhwRys",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Password can't be the same as current password"
                    }]
                  })
                });
                return _context3.abrupt("return");

              case 4:
                if (!(passwordScore <= 1)) {
                  _context3.next = 7;
                  break;
                }

                this.setState({
                  passwordError: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "C2rcD0",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Password is too weak. Try to use more characters or use a password manager to generate a strong one."
                    }]
                  })
                });
                return _context3.abrupt("return");

              case 7:
                _context3.prev = 7;
                this.setState({
                  passwordLoading: true
                });
                _context3.next = 11;
                return this.props.setPassword({
                  variables: {
                    password: password,
                    currentPassword: currentPassword
                  }
                });

              case 11:
                result = _context3.sent;

                if (!result.data.setPassword.token) {
                  _context3.next = 15;
                  break;
                }

                _context3.next = 15;
                return this.props.login(result.data.setPassword.token);

              case 15:
                _context3.next = 17;
                return this.props.refetchLoggedInUser();

              case 17:
                this.setState({
                  currentPassword: '',
                  password: '',
                  passwordError: null,
                  passwordScore: null,
                  passwordLoading: false,
                  passwordKey: Number(passwordKey) + 1
                });
                this.props.addToast({
                  type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                  message: this.props.LoggedInUser.hasPassword ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "6oGOC9",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Password successfully updated"
                    }]
                  }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "cLP25w",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Password successfully set"
                    }]
                  })
                });
                _context3.next = 24;
                break;

              case 21:
                _context3.prev = 21;
                _context3.t0 = _context3["catch"](7);
                this.setState({
                  passwordError: _context3.t0.message,
                  passwordLoading: false
                });

              case 24:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this, [[7, 21]]);
      }));

      function setPassword() {
        return _setPassword.apply(this, arguments);
      }

      return setPassword;
    }()
  }, {
    key: "renderPasswordManagement",
    value: function renderPasswordManagement() {
      var _this3 = this;

      var LoggedInUser = this.props.LoggedInUser;
      var _this$state2 = this.state,
          password = _this$state2.password,
          passwordError = _this$state2.passwordError,
          passwordLoading = _this$state2.passwordLoading,
          passwordKey = _this$state2.passwordKey,
          currentPassword = _this$state2.currentPassword;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
          fontSize: "18px",
          fontWeight: "700",
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Password",
            defaultMessage: [{
              "type": 0,
              "value": "Password"
            }]
          })
        }), passwordError && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "error",
          withIcon: true,
          my: 2,
          "data-cy": "password-error",
          children: passwordError
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          mb: "4",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            py: 2,
            mb: 2,
            children: LoggedInUser.hasPassword ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Password.Change.Info",
              defaultMessage: [{
                "type": 0,
                "value": "You already have a password set, you can change it using the following form."
              }]
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Password.Set.Info",
              defaultMessage: [{
                "type": 0,
                "value": "Setting a password is optional but can be useful if you're using a password manager."
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
            style: {
              display: 'none'
            },
            id: "email",
            autoComplete: "email",
            name: "email",
            value: LoggedInUser.email,
            type: "email"
          }), LoggedInUser.hasPassword && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "GretYf",
              defaultMessage: [{
                "type": 0,
                "value": "Current Password"
              }]
            }),
            labelFontWeight: "bold",
            htmlFor: "current-password",
            mb: 2,
            width: "100%",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
              fontSize: "14px",
              id: "current-password",
              autoComplete: "current-password",
              name: "current-password",
              type: "password",
              required: true,
              onChange: function onChange(e) {
                _this3.setState({
                  passwordError: null,
                  currentPassword: e.target.value
                });
              }
            }, "current-password-".concat(passwordKey))
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Ev6SEF",
              defaultMessage: [{
                "type": 0,
                "value": "New Password"
              }]
            }),
            labelFontWeight: "bold",
            htmlFor: "new-password",
            mt: 2,
            mb: 2,
            width: "100%",
            hint: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "qaIW32",
              defaultMessage: [{
                "type": 0,
                "value": "Strong password recommended. Short or weak one restricted. "
              }, {
                "type": 8,
                "value": "link",
                "children": [{
                  "type": 0,
                  "value": "The strength of a password is a function of length, complexity, and unpredictability."
                }]
              }],
              values: {
                link: (0,I18nFormatters/* getI18nLink */.fw)({
                  href: 'https://en.wikipedia.org/wiki/Password_strength',
                  openInNewTab: true
                })
              }
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
              fontSize: "14px",
              id: "new-password",
              autoComplete: "new-password",
              type: "password",
              required: true,
              onChange: function onChange(e) {
                _this3.setState({
                  passwordError: null,
                  password: e.target.value
                });
              }
            }, "current-password-".concat(passwordKey))
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            "data-cy": "password-strength-bar",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(PasswordStrengthBar/* PasswordStrengthBar */._, {
              password: password,
              onChangeScore: function onChangeScore(passwordScore) {
                _this3.setState({
                  passwordScore: passwordScore
                });
              }
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            my: 2,
            minWidth: 140,
            loading: passwordLoading,
            disabled: !password || LoggedInUser.hasPassword && !currentPassword,
            onClick: this.setPassword,
            children: LoggedInUser.hasPassword ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Security.UpdatePassword.Button",
              defaultMessage: [{
                "type": 0,
                "value": "Update Password"
              }]
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Security.SetPassword.Button",
              defaultMessage: [{
                "type": 0,
                "value": "Set Password"
              }]
            })
          })]
        })]
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var _this$props = this.props,
          intl = _this$props.intl,
          data = _this$props.data;
      var _this$state3 = this.state,
          error = _this$state3.error,
          disableError = _this$state3.disableError,
          secret = _this$state3.secret,
          base32 = _this$state3.base32,
          otpAuthUrl = _this$state3.otpAuthUrl,
          disablingTwoFactorAuth = _this$state3.disablingTwoFactorAuth,
          enablingTwoFactorAuth = _this$state3.enablingTwoFactorAuth,
          recoveryCodes = _this$state3.recoveryCodes,
          showRecoveryCodesModal = _this$state3.showRecoveryCodesModal;
      var loading = data.loading;

      if (loading) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
      }

      var account = get_default()(data, 'individual', null);

      var doesAccountAlreadyHave2FA = get_default()(account, 'hasTwoFactorAuth', false);

      var initialSetupFormValues = {
        twoFactorAuthenticatorCode: ''
      };
      var initialDisableFormValues = {
        twoFactorAuthenticatorCode: ''
      };

      var validate = function validate(values) {
        var errors = {};

        if (values.twoFactorAuthenticatorCode.toString().length !== 6) {
          errors.twoFactorAuthenticatorCode = intl.formatMessage(UserSecurity_messages.errorWrongLength);
        }

        return errors;
      };

      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        children: [this.renderPasswordManagement(), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
          fontSize: "18px",
          fontWeight: "700",
          mb: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "TwoFactorAuth",
            defaultMessage: [{
              "type": 0,
              "value": "Two-factor authentication"
            }]
          })
        }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "error",
          withIcon: true,
          my: 2,
          "data-cy": "add-two-factor-auth-error",
          children: error
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexDirection: "column",
          children: doesAccountAlreadyHave2FA && !enablingTwoFactorAuth ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "TwoFactorAuth.Setup.Info",
                defaultMessage: [{
                  "type": 0,
                  "value": "Two-factor authentication adds an extra layer of security for your account when logging in or performing admin actions."
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
              display: "flex",
              flexWrap: "wrap",
              alignItems: "center",
              justifyContent: "center",
              my: "32px",
              p: "36px",
              maxWidth: "496px",
              "data-cy": "add-two-factor-auth-success",
              padding: "36px",
              borderWidth: "2px",
              borderColor: "green.500",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                flex: "0 0 183px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Image/* default */.Z, {
                  src: "/static/images/lock-green.png",
                  width: "183px",
                  height: "183px",
                  alt: ""
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                flex: "1 1 223px",
                pr: "9px",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                  fontSize: "20px",
                  fontWeight: "500",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "TwoFactorAuth.Setup.AlreadyAdded",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Two-factor authentication (2FA) is enabled on this account. Well done! 🎉"
                    }]
                  })
                })
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                my: 1,
                minWidth: 140,
                buttonStyle: 'danger',
                onClick: function onClick() {
                  return _this4.setState({
                    disablingTwoFactorAuth: true
                  });
                },
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "TwoFactorAuth.Disable.Button",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Disable 2FA"
                  }]
                })
              }), disablingTwoFactorAuth && /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
                validate: validate,
                initialValues: initialDisableFormValues,
                onSubmit: this.disableTwoFactorAuth,
                children: function children(formik) {
                  var values = formik.values,
                      errors = formik.errors,
                      touched = formik.touched,
                      handleSubmit = formik.handleSubmit,
                      isSubmitting = formik.isSubmitting;
                  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
                    width: "570px",
                    onClose: function onClose() {
                      return _this4.setState({
                        disablingTwoFactorAuth: false
                      });
                    },
                    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                        id: "TwoFactorAuth.Disable.Header",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Are you sure you want to remove two-factor authentication from your account?"
                        }]
                      })
                    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
                      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
                        type: "warning",
                        withIcon: true,
                        my: 3,
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "TwoFactorAuth.Disable.Warning",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Removing 2FA from your account can make it less secure."
                          }]
                        })
                      }), disableError && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
                        type: "error",
                        withIcon: true,
                        mb: 3,
                        children: disableError
                      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "TwoFactorAuth.Disable.Info",
                          defaultMessage: [{
                            "type": 0,
                            "value": "If you would like to remove 2FA from your account, you will need to enter the code from your authenticator app one more time."
                          }]
                        })
                      }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Form */.l0, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
                          name: "twoFactorAuthenticatorCode",
                          htmlFor: "twoFactorAuthenticatorCode",
                          error: touched.twoFactorAuthenticatorCode && errors.twoFactorAuthenticatorCode,
                          label: intl.formatMessage(UserSecurity_messages.inputLabel),
                          value: values.twoFactorAuthenticatorCode,
                          required: true,
                          mt: 2,
                          mb: 3,
                          children: function children(inputProps) {
                            return /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Field */.gN, UserSecurity_objectSpread(UserSecurity_objectSpread({
                              as: StyledInput/* default */.ZP
                            }, inputProps), {}, {
                              width: 240,
                              minHeight: 75,
                              fontSize: "20px",
                              autoComplete: "off",
                              placeholder: "123456",
                              pattern: "[0-9]{6}",
                              inputMode: "numeric",
                              autoFocus: true
                            }));
                          }
                        })
                      })]
                    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
                      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
                        display: "flex",
                        justifyContent: "flex-end",
                        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                          mx: 20,
                          onClick: function onClick() {
                            return _this4.setState({
                              disablingTwoFactorAuth: false
                            });
                          },
                          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                            id: "actions.cancel",
                            defaultMessage: [{
                              "type": 0,
                              "value": "Cancel"
                            }]
                          })
                        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                          buttonStyle: "danger",
                          loading: isSubmitting,
                          onClick: handleSubmit,
                          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                            id: "actions.continue",
                            defaultMessage: [{
                              "type": 0,
                              "value": "Continue"
                            }]
                          })
                        })]
                      })
                    })]
                  });
                }
              })]
            })]
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment, {
            children: recoveryCodes ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "TwoFactorAuth.Setup.RecoveryCodes.Info",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Recovery codes are used to access your account in case you can't access it with your authenticator app (for example, if you have lost your phone). Each code can only be used once. Save your 2FA recovery codes in a safe place, like a password manager app."
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
                    alignItems: "center",
                    mt: 3,
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
                      fontSize: "18px",
                      mr: 1,
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                        id: "TwoFactorAuth.Setup.StepThree",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Step three: save your recovery codes"
                        }]
                      })
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                    maxWidth: 480,
                    border: "2px solid black",
                    borderRadius: 8,
                    my: 3,
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
                      gridTemplateColumns: ['1fr', '1fr 1fr'],
                      p: "32px",
                      gridGap: "16px",
                      "data-cy": "recovery-codes-container",
                      children: recoveryCodes.map(function (code) {
                        return /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                          fontSize: "16px",
                          fontWeight: "700",
                          m: "0 16px 16px 0",
                          children: code
                        }, code);
                      })
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                      justifyContent: ['center', 'left'],
                      mb: 4,
                      gap: "16px",
                      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                        minWidth: "148px",
                        buttonStyle: "primary",
                        onClick: function onClick() {
                          return _this4.setState({
                            showRecoveryCodesModal: true
                          });
                        },
                        loading: showRecoveryCodesModal,
                        "data-cy": "add-two-factor-auth-confirm-recovery-codes-button",
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "TwoFactorAuth.Setup.Form.FinishSetup",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Finish setup"
                          }]
                        })
                      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
                        onClick: function onClick() {
                          return (0,FileSaver_min.saveAs)(new Blob([recoveryCodes.join('\n')], {
                            type: 'text/plain;charset=utf-8'
                          }), 'opencollective-recovery-codes.txt');
                        },
                        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "TvWROv",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Download codes"
                          }]
                        }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(Download_esm/* Download */.U, {
                          size: "1em"
                        })]
                      })]
                    })
                  })]
                })
              }), showRecoveryCodesModal && /*#__PURE__*/(0,jsx_runtime.jsx)(ConfirmationModal/* default */.Z, {
                isDanger: true,
                type: "confirm",
                onClose: function onClose() {
                  return _this4.setState({
                    showRecoveryCodesModal: false
                  });
                },
                continueHandler: function continueHandler() {
                  return _this4.setState({
                    recoveryCodes: null,
                    enablingTwoFactorAuth: false,
                    showRecoveryCodesModal: false
                  });
                },
                header: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "TwoFactorAuth.Setup.RecoveryCodes.ConfirmationModal.Header",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Are you sure?"
                  }]
                }),
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "TwoFactorAuth.Setup.RecoveryCodes.ConfirmationModal.Body",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Once you click 'Confirm', you will no longer have access to your recovery codes."
                  }]
                })
              })]
            }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "TwoFactorAuth.Setup.Info",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Two-factor authentication adds an extra layer of security for your account when logging in or performing admin actions."
                  }]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                    alignItems: "center",
                    mt: 3,
                    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
                      fontSize: "18px",
                      fontWeight: "700",
                      mr: 1,
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                        id: "TwoFactorAuth.Setup.StepOne",
                        defaultMessage: [{
                          "type": 0,
                          "value": "Step one: scan this QR code with an authenticator app"
                        }]
                      })
                    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
                      content: content,
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Info_esm/* Info */.k, {
                        size: 16
                      })
                    })]
                  }), secret ? /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                    flexDirection: "column",
                    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(esm/* default */.ZP, {
                      value: otpAuthUrl,
                      renderAs: "svg",
                      size: 256,
                      level: "L",
                      includeMargin: true,
                      "data-cy": "qr-code"
                    }), /*#__PURE__*/(0,jsx_runtime.jsx)(TokenBox, {
                      "data-cy": "manual-entry-2fa-token",
                      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
                        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                          id: "TwoFactorAuth.Setup.ManualEntry",
                          defaultMessage: [{
                            "type": 0,
                            "value": "Manual entry: "
                          }, {
                            "type": 1,
                            "value": "token"
                          }],
                          values: {
                            token: /*#__PURE__*/(0,jsx_runtime.jsx)(Code, {
                              children: base32
                            })
                          }
                        })
                      })
                    })]
                  }) : /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
                    height: 256,
                    width: 256
                  })]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
                  mt: 3,
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H3, {
                    fontSize: "18px",
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "TwoFactorAuth.Setup.StepTwo",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Step two: enter the code from your authentication app"
                      }]
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
                      validate: validate,
                      initialValues: initialSetupFormValues,
                      onSubmit: this.enableTwoFactorAuth,
                      children: function children(formik) {
                        var values = formik.values,
                            handleSubmit = formik.handleSubmit,
                            errors = formik.errors,
                            touched = formik.touched,
                            isSubmitting = formik.isSubmitting;
                        return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
                          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
                            name: "twoFactorAuthenticatorCode",
                            htmlFor: "twoFactorAuthenticatorCode",
                            error: touched.twoFactorAuthenticatorCode && errors.twoFactorAuthenticatorCode,
                            label: intl.formatMessage(UserSecurity_messages.inputLabel),
                            value: values.twoFactorAuthenticatorCode,
                            required: true,
                            mt: 2,
                            mb: 3,
                            children: function children(inputProps) {
                              return /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Field */.gN, UserSecurity_objectSpread(UserSecurity_objectSpread({
                                as: StyledInput/* default */.ZP
                              }, inputProps), {}, {
                                width: 240,
                                minHeight: 60,
                                fontSize: "20px",
                                lineHeight: "28px",
                                placeholder: "123456",
                                pattern: "[0-9]{6}",
                                inputMode: "numeric",
                                minLength: 6,
                                maxLength: 6,
                                "data-cy": "add-two-factor-auth-totp-code-field"
                              }));
                            }
                          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
                            justifyContent: ['center', 'left'],
                            mb: 4,
                            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                              fontSize: "13px",
                              minWidth: "148px",
                              minHeight: "36px",
                              buttonStyle: "primary",
                              type: "submit",
                              onSubmit: handleSubmit,
                              loading: isSubmitting,
                              disabled: values.twoFactorAuthenticatorCode.length < 6,
                              "data-cy": "add-two-factor-auth-totp-code-button",
                              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                                id: "TwoFactorAuth.Setup.Form.VerifyButton",
                                defaultMessage: [{
                                  "type": 0,
                                  "value": "Verify & see recovery codes"
                                }]
                              })
                            })
                          })]
                        });
                      }
                    })
                  })]
                })]
              })]
            })
          })
        })]
      });
    }
  }]);

  return UserSecurity;
}(react.Component);

var addTwoFactorAuthToIndividualMutation = (0,graphql_tag_lib/* default */.ZP)(UserSecurity_templateObject || (UserSecurity_templateObject = taggedTemplateLiteral_default()(["\n  mutation AddTwoFactorAuthToIndividual($account: AccountReferenceInput!, $token: String!) {\n    addTwoFactorAuthTokenToIndividual(account: $account, token: $token) {\n      account {\n        id\n        hasTwoFactorAuth\n      }\n      recoveryCodes\n    }\n  }\n"])));
var removeTwoFactorAuthFromIndividualMutation = (0,graphql_tag_lib/* default */.ZP)(UserSecurity_templateObject2 || (UserSecurity_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation RemoveTwoFactorAuthFromIndividual($account: AccountReferenceInput!, $code: String!) {\n    removeTwoFactorAuthTokenFromIndividual(account: $account, code: $code) {\n      id\n      hasTwoFactorAuth\n    }\n  }\n"])));
var accountHasTwoFactorAuthQuery = (0,graphql_tag_lib/* default */.ZP)(UserSecurity_templateObject3 || (UserSecurity_templateObject3 = taggedTemplateLiteral_default()(["\n  query AccountHasTwoFactorAuth($slug: String) {\n    individual(slug: $slug) {\n      id\n      slug\n      name\n      type\n      id\n      slug\n      name\n      type\n      hasTwoFactorAuth\n    }\n  }\n"])));
var setPasswordMutation = (0,graphql_tag_lib/* default */.ZP)(UserSecurity_templateObject4 || (UserSecurity_templateObject4 = taggedTemplateLiteral_default()(["\n  mutation SetPassword($password: String!, $currentPassword: String) {\n    setPassword(password: $password, currentPassword: $currentPassword) {\n      individual {\n        id\n        hasPassword\n      }\n      token\n    }\n  }\n"])));
var UserSecurity_addGraphql = (0,utils/* compose */.qC)((0,hoc_graphql/* graphql */.B)(setPasswordMutation, {
  name: 'setPassword',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
}), (0,hoc_graphql/* graphql */.B)(addTwoFactorAuthToIndividualMutation, {
  name: 'addTwoFactorAuthTokenToIndividual',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
}), (0,hoc_graphql/* graphql */.B)(removeTwoFactorAuthFromIndividualMutation, {
  name: 'removeTwoFactorAuthTokenFromIndividual',
  options: {
    context: helpers/* API_V2_CONTEXT */.T
  }
}), (0,hoc_graphql/* graphql */.B)(accountHasTwoFactorAuthQuery, {
  options: function options(props) {
    return {
      context: helpers/* API_V2_CONTEXT */.T,
      variables: {
        slug: props.slug
      }
    };
  }
}));
UserSecurity.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "enableTwoFactorAuth",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "values",
      "type": null
    }],
    "returns": null
  }, {
    "name": "disableTwoFactorAuth",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "values",
      "type": null
    }],
    "returns": null
  }, {
    "name": "setPassword",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderPasswordManagement",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "UserSecurity",
  "props": {
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "setPassword": {
      "description": "From graphql query",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "addTwoFactorAuthTokenToIndividual": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "removeTwoFactorAuthTokenFromIndividual": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "From withUser",
      "type": {
        "name": "shape",
        "value": {
          "isRoot": {
            "name": "bool",
            "required": true
          },
          "hasPassword": {
            "name": "bool",
            "required": true
          },
          "hasRole": {
            "name": "func",
            "required": true
          },
          "email": {
            "name": "string",
            "required": true
          }
        }
      },
      "required": false
    },
    "login": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "refetchLoggedInUser": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "individual": {
            "name": "object",
            "required": false
          },
          "loading": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    },
    "addToast": {
      "description": "From withToasts",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "slug": {
      "description": "From parent component",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_UserSecurity = ((0,injectIntl/* default */.ZP)((0,ToastProvider/* withToasts */.CP)((0,UserProvider/* withUser */.ns)(UserSecurity_addGraphql(UserSecurity)))));
// EXTERNAL MODULE: ./components/Collapse.tsx
var Collapse = __webpack_require__(90175);
// EXTERNAL MODULE: ./components/HTMLContent.js
var HTMLContent = __webpack_require__(74770);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/Copy/Copy.esm.js
var Copy_esm = __webpack_require__(51694);
// EXTERNAL MODULE: ./node_modules/react-popper/lib/esm/Manager.js
var Manager = __webpack_require__(81385);
// EXTERNAL MODULE: ./node_modules/react-popper/lib/esm/Reference.js
var Reference = __webpack_require__(63351);
// EXTERNAL MODULE: ./node_modules/react-popper/lib/esm/Popper.js
var Popper = __webpack_require__(74688);
// EXTERNAL MODULE: ./components/icons/CustomStyledIcon.js
var CustomStyledIcon = __webpack_require__(50333);
;// CONCATENATED MODULE: ./components/icons/DismissIcon.js


function DismissIcon_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function DismissIcon_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? DismissIcon_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : DismissIcon_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





var DismissIcon = function DismissIcon(props) {
  return /*#__PURE__*/(0,jsx_runtime.jsx)(CustomStyledIcon/* default */.Z, DismissIcon_objectSpread(DismissIcon_objectSpread({
    width: "14",
    height: "14",
    viewBox: "0 0 14 14",
    fill: "none"
  }, props), {}, {
    children: /*#__PURE__*/(0,jsx_runtime.jsx)("path", {
      d: "M0.586873 0.814096L0.678557 0.706658C1.01473 0.366575 1.54079 0.335658 1.91149 0.613908L2.01769 0.706658L6.99998 5.64487L12.0502 0.613882C12.42 0.23979 13.0195 0.23979 13.3893 0.613882C13.7591 0.987973 13.7591 1.5945 13.3893 1.96859L8.33954 7.00001L13.2831 11.9386C13.6193 12.2787 13.6499 12.8109 13.3748 13.1859L13.2831 13.2933C12.9469 13.6334 12.4209 13.6643 12.0502 13.3861L11.944 13.2933L6.99998 8.35515L1.94977 13.3861C1.57998 13.7602 0.98043 13.7602 0.610638 13.3861C0.240847 13.012 0.240847 12.4055 0.610638 12.0314L5.66042 7.00001L0.678557 2.06136C0.342382 1.72128 0.311821 1.18911 0.586873 0.814096Z",
      fill: "#141414"
    })
  }));
};

DismissIcon.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DismissIcon",
  "props": {
    "size": {
      "description": "",
      "type": {
        "name": "union",
        "value": [{
          "name": "string"
        }, {
          "name": "number"
        }]
      },
      "required": false
    }
  }
};
/* harmony default export */ var icons_DismissIcon = (DismissIcon);
;// CONCATENATED MODULE: ./components/edit-collective/DeleteVirtualCardModal.js





var DeleteVirtualCardModal_excluded = ["virtualCard", "onSuccess", "onClose", "onDeleteRefetchQuery"];

var DeleteVirtualCardModal_templateObject;



function DeleteVirtualCardModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function DeleteVirtualCardModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? DeleteVirtualCardModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : DeleteVirtualCardModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }













var deleteVirtualCardMutation = (0,graphql_tag_lib/* default */.ZP)(DeleteVirtualCardModal_templateObject || (DeleteVirtualCardModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation deleteVirtualCard($virtualCard: VirtualCardReferenceInput!) {\n    deleteVirtualCard(virtualCard: $virtualCard)\n  }\n"])));

var DeleteVirtualCardModal = function DeleteVirtualCardModal(_ref) {
  var virtualCard = _ref.virtualCard,
      onSuccess = _ref.onSuccess,
      onClose = _ref.onClose,
      onDeleteRefetchQuery = _ref.onDeleteRefetchQuery,
      modalProps = objectWithoutProperties_default()(_ref, DeleteVirtualCardModal_excluded);

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var refetchOptions = onDeleteRefetchQuery ? {
    refetchQueries: [onDeleteRefetchQuery],
    awaitRefetchQueries: true
  } : {};

  var _useMutation = (0,client.useMutation)(deleteVirtualCardMutation, DeleteVirtualCardModal_objectSpread({
    context: helpers/* API_V2_CONTEXT */.T
  }, refetchOptions)),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      deleteVirtualCard = _useMutation2[0],
      isBusy = _useMutation2[1].loading;

  var formik = (0,formik_esm/* useFormik */.TA)({
    initialValues: {},
    onSubmit: function onSubmit() {
      return asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return deleteVirtualCard({
                  variables: {
                    virtualCard: {
                      id: virtualCard.id
                    }
                  }
                });

              case 3:
                _context.next = 9;
                break;

              case 5:
                _context.prev = 5;
                _context.t0 = _context["catch"](0);
                addToast({
                  type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                  message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "qYxNsK",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Error deleting virtual card: "
                    }, {
                      "type": 1,
                      "value": "error"
                    }],
                    values: {
                      error: _context.t0.message
                    }
                  })
                });
                return _context.abrupt("return");

              case 9:
                onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess( /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "+RvjCt",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Card successfully deleted"
                  }]
                }));
                handleClose();

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[0, 5]]);
      }))();
    }
  });

  var handleClose = function handleClose() {
    onClose === null || onClose === void 0 ? void 0 : onClose();
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* default */.ZP, DeleteVirtualCardModal_objectSpread(DeleteVirtualCardModal_objectSpread({
    width: "382px",
    onClose: handleClose,
    trapFocus: true
  }, modalProps), {}, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)("form", {
      onSubmit: formik.handleSubmit,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        onClose: handleClose,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "7nrRJ/",
          defaultMessage: [{
            "type": 0,
            "value": "Delete virtual card"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalBody */.fe, {
        pt: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "TffQlZ",
            defaultMessage: [{
              "type": 0,
              "value": "You are about to delete the virtual card, are you sure you want to continue ?"
            }]
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        isFullWidth: true,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            my: 1,
            minWidth: 140,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isBusy,
            type: "submit",
            textTransform: "capitalize",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.delete",
              defaultMessage: [{
                "type": 0,
                "value": "Delete"
              }]
            })
          })
        })
      })]
    })
  }));
};

DeleteVirtualCardModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "DeleteVirtualCardModal",
  "props": {
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onSuccess": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onDeleteRefetchQuery": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "virtualCard": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};

/** @component */
/* harmony default export */ var edit_collective_DeleteVirtualCardModal = (DeleteVirtualCardModal);
// EXTERNAL MODULE: ./components/edit-collective/EditVirtualCardModal.tsx + 1 modules
var EditVirtualCardModal = __webpack_require__(99967);
;// CONCATENATED MODULE: ./components/edit-collective/VirtualCard.js





var VirtualCard_templateObject, VirtualCard_templateObject2;

function VirtualCard_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function VirtualCard_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? VirtualCard_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : VirtualCard_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



/* eslint-disable camelcase */


























var CardContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "VirtualCard__CardContainer",
  componentId: "sc-1gxxp85-0"
})(["border:1px solid #dcdee0;border-radius:12px;background:#050505;position:relative;color:#fff;overflow:hidden;transition:box-shadow 400ms ease-in-out,transform 500ms ease;box-shadow:0px 0px 4px rgba(20,20,20,0);:hover{box-shadow:0px 8px 12px rgba(20,20,20,0.16);transform:translate(0,-4px);}> div{z-index:1;}> div:first-child{position:absolute;top:0px;left:0px;height:100%;width:100%;background:linear-gradient(to right,#f7f8fa23,#f7f8fa16);clip-path:ellipse(102% 102% at 0px 100%);}"]);
var Action = styled_components_browser_esm/* default.button.withConfig */.ZP.button.withConfig({
  displayName: "VirtualCard__Action",
  componentId: "sc-1gxxp85-1"
})(["", " cursor:pointer;line-height:16px;font-size:14px;font-weight:500;border:none;background:transparent;outline:none;text-align:inherit;color:", ";:hover{color:", ";}&[disabled]{color:", ";}"], index_esm/* margin */.e6, function (props) {
  var _props$theme$colors$p;

  return ((_props$theme$colors$p = props.theme.colors[props.color]) === null || _props$theme$colors$p === void 0 ? void 0 : _props$theme$colors$p[500]) || props.color || props.theme.colors.black[900];
}, function (props) {
  var _props$theme$colors$p2;

  return ((_props$theme$colors$p2 = props.theme.colors[props.color]) === null || _props$theme$colors$p2 === void 0 ? void 0 : _props$theme$colors$p2[300]) || props.color || props.theme.colors.black[700];
}, function (props) {
  var _props$theme$colors$p3;

  return ((_props$theme$colors$p3 = props.theme.colors[props.color]) === null || _props$theme$colors$p3 === void 0 ? void 0 : _props$theme$colors$p3[200]) || props.color || props.theme.colors.black[600];
});
var VirtualCard_Arrow = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "VirtualCard__Arrow",
  componentId: "sc-1gxxp85-2"
})(["position:absolute;width:8px;height:8px;background:inherit;visibility:hidden;bottom:4px;::before{position:absolute;width:8px;height:8px;background:inherit;}::before{visibility:visible;content:'';transform:rotate(45deg);}"]);
var StateLabel = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "VirtualCard__StateLabel",
  componentId: "sc-1gxxp85-3"
})(["align-self:center;padding:2px 6px;border-radius:4px;background:", ";color:", ";font-size:12px;font-weight:700;line-height:16px;letter-spacing:0.06em;text-transform:uppercase;"], function (props) {
  return props.isActive ? props.theme.colors.green[100] : props.theme.colors.black[100];
}, function (props) {
  return props.isActive ? props.theme.colors.green[600] : props.theme.colors.black[500];
});
var pauseCardMutation = (0,graphql_tag_lib/* default */.ZP)(VirtualCard_templateObject || (VirtualCard_templateObject = taggedTemplateLiteral_default()(["\n  mutation PauseVirtualCard($virtualCard: VirtualCardReferenceInput!) {\n    pauseVirtualCard(virtualCard: $virtualCard) {\n      id\n      data\n    }\n  }\n"])));
var resumeCardMutation = (0,graphql_tag_lib/* default */.ZP)(VirtualCard_templateObject2 || (VirtualCard_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation ResumeVirtualCard($virtualCard: VirtualCardReferenceInput!) {\n    resumeVirtualCard(virtualCard: $virtualCard) {\n      id\n      data\n    }\n  }\n"])));

var ActionsButton = function ActionsButton(props) {
  var wrapperRef = react.useRef();
  var arrowRef = react.useRef();

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      displayActions = _React$useState2[0],
      setDisplayActions = _React$useState2[1];

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      showConfirmationModal = _React$useState4[0],
      setShowConfirmationModal = _React$useState4[1];

  var _React$useState5 = react.useState(false),
      _React$useState6 = slicedToArray_default()(_React$useState5, 2),
      isEditingVirtualCard = _React$useState6[0],
      setIsEditingVirtualCard = _React$useState6[1];

  var _React$useState7 = react.useState(false),
      _React$useState8 = slicedToArray_default()(_React$useState7, 2),
      isDeletingVirtualCard = _React$useState8[0],
      setIsDeletingVirtualCard = _React$useState8[1];

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var virtualCard = props.virtualCard,
      host = props.host,
      canEditVirtualCard = props.canEditVirtualCard,
      canDeleteVirtualCard = props.canDeleteVirtualCard,
      confirmOnPauseCard = props.confirmOnPauseCard;
  var handleActionSuccess = react.useCallback(function (message) {
    setIsEditingVirtualCard(false);
    setIsDeletingVirtualCard(false);
    addToast({
      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
      message: message
    });
  }, [addToast]);
  (0,useGlobalBlur/* default */.Z)(wrapperRef, function (outside) {
    if (outside) {
      setDisplayActions(false);
    }
  });

  var _useMutation = (0,client.useMutation)(pauseCardMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      pauseCard = _useMutation2[0],
      pauseLoading = _useMutation2[1].loading;

  var _useMutation3 = (0,client.useMutation)(resumeCardMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation4 = slicedToArray_default()(_useMutation3, 2),
      resumeCard = _useMutation4[0],
      resumeLoading = _useMutation4[1].loading;

  var isActive = virtualCard.data.status === 'active' || virtualCard.data.state === 'OPEN';

  var handlePauseUnpause = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;

              if (!isActive) {
                _context.next = 6;
                break;
              }

              _context.next = 4;
              return pauseCard({
                variables: {
                  virtualCard: {
                    id: virtualCard.id
                  }
                }
              });

            case 4:
              _context.next = 8;
              break;

            case 6:
              _context.next = 8;
              return resumeCard({
                variables: {
                  virtualCard: {
                    id: virtualCard.id
                  }
                }
              });

            case 8:
              handleActionSuccess();
              _context.next = 14;
              break;

            case 11:
              _context.prev = 11;
              _context.t0 = _context["catch"](0);
              props.onError(_context.t0);

            case 14:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 11]]);
    }));

    return function handlePauseUnpause() {
      return _ref.apply(this, arguments);
    };
  }();

  var isLoading = pauseLoading || resumeLoading;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    ref: wrapperRef,
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Manager/* Manager */.dK, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Reference/* Reference */.s, {
        children: function children(_ref2) {
          var ref = _ref2.ref;
          return /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
            ref: ref,
            onClick: function onClick() {
              return setDisplayActions(true);
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "CollectivePage.NavBar.ActionMenu.Actions",
              defaultMessage: [{
                "type": 0,
                "value": "Actions"
              }]
            })
          });
        }
      }), displayActions && /*#__PURE__*/(0,jsx_runtime.jsx)(Popper/* Popper */.r, {
        placement: "bottom",
        modifiers: [{
          name: 'arrow',
          options: {
            element: arrowRef
          }
        }],
        children: function children(_ref3) {
          var placement = _ref3.placement,
              ref = _ref3.ref,
              style = _ref3.style,
              arrowProps = _ref3.arrowProps;
          return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            "data-placement": placement,
            ref: ref,
            style: VirtualCard_objectSpread({}, style),
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
              m: 1,
              mb: 2,
              overflow: "auto",
              overflowY: "auto",
              padding: "12px 15px",
              width: "180px",
              borderWidth: "0px",
              boxShadow: "0px 8px 12px rgba(20, 20, 20, 0.16)",
              children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                flexDirection: "column",
                fontSize: "13px",
                lineHeight: "16px",
                fontWeight: "500",
                children: [virtualCard.provider === 'STRIPE' && /*#__PURE__*/(0,jsx_runtime.jsxs)(Action, {
                  onClick: function onClick() {
                    return confirmOnPauseCard && isActive ? setShowConfirmationModal(true) : handlePauseUnpause();
                  },
                  disabled: isLoading,
                  children: [isActive ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "VirtualCards.PauseCard",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Pause Card"
                    }]
                  }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "VirtualCards.ResumeCard",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Resume Card"
                    }]
                  }), ' ', isLoading && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSpinner/* default */.Z, {
                    size: "0.9em",
                    mb: "2px"
                  })]
                }), canDeleteVirtualCard && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
                    borderColor: "black.300",
                    mt: 2,
                    mb: 2
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
                    onClick: function onClick() {
                      return setIsDeletingVirtualCard(true);
                    },
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "mLx6pg",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Delete Card"
                      }]
                    })
                  })]
                }), canEditVirtualCard && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
                    borderColor: "black.300",
                    mt: 2,
                    mb: 2
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
                    onClick: function onClick() {
                      return setIsEditingVirtualCard(true);
                    },
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "ILnhs8",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Edit Card Details"
                      }]
                    })
                  })]
                })]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(VirtualCard_Arrow, VirtualCard_objectSpread({
                ref: arrowRef
              }, arrowProps))]
            })
          });
        }
      })]
    }), showConfirmationModal && /*#__PURE__*/(0,jsx_runtime.jsx)(ConfirmationModal/* default */.Z, {
      isDanger: true,
      type: "confirm",
      header: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "f9PwAQ",
        defaultMessage: [{
          "type": 0,
          "value": "Pause Virtual Card"
        }]
      }),
      continueLabel: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "VirtualCards.PauseCard",
        defaultMessage: [{
          "type": 0,
          "value": "Pause Card"
        }]
      }),
      onClose: function onClose() {
        return setShowConfirmationModal(false);
      },
      continueHandler: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return handlePauseUnpause();

              case 2:
                setShowConfirmationModal(false);

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      })),
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "6VPa5L",
          defaultMessage: [{
            "type": 0,
            "value": "This will pause the virtual card. To unpause, you will need to contact the host."
          }]
        })
      })
    }), isEditingVirtualCard && /*#__PURE__*/(0,jsx_runtime.jsx)(EditVirtualCardModal/* default */.Z, {
      host: host,
      onSuccess: handleActionSuccess,
      onClose: function onClose() {
        return setIsEditingVirtualCard(false);
      },
      virtualCard: virtualCard
    }), isDeletingVirtualCard && /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_DeleteVirtualCardModal, {
      host: host,
      onSuccess: handleActionSuccess,
      onDeleteRefetchQuery: props.onDeleteRefetchQuery,
      onClose: function onClose() {
        return setIsDeletingVirtualCard(false);
      },
      virtualCard: virtualCard
    })]
  });
};

var getLimitIntervalString = function getLimitIntervalString(spendingLimitInterval) {
  switch (spendingLimitInterval) {
    case graphql/* VirtualCardLimitInterval.DAILY */.nV.DAILY:
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["/", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "aVqg31",
          defaultMessage: [{
            "type": 0,
            "value": "day"
          }]
        })]
      });

    case graphql/* VirtualCardLimitInterval.WEEKLY */.nV.WEEKLY:
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["/", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "ZqbBGv",
          defaultMessage: [{
            "type": 0,
            "value": "wk"
          }]
        })]
      });

    case graphql/* VirtualCardLimitInterval.MONTHLY */.nV.MONTHLY:
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["/", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Frequency.Monthly.Short",
          defaultMessage: [{
            "type": 0,
            "value": "mo"
          }]
        })]
      });

    case graphql/* VirtualCardLimitInterval.YEARLY */.nV.YEARLY:
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["/", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Frequency.Yearly.Short",
          defaultMessage: [{
            "type": 0,
            "value": "yr"
          }]
        })]
      });

    default:
      return null;
  }
};

var getLimitString = function getLimitString(_ref5) {
  var spendingLimitAmount = _ref5.spendingLimitAmount,
      spendingLimitInterval = _ref5.spendingLimitInterval,
      spendingLimitRenewsOn = _ref5.spendingLimitRenewsOn,
      remainingLimit = _ref5.remainingLimit,
      currency = _ref5.currency,
      locale = _ref5.locale;

  if (!spendingLimitAmount) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "VirtualCards.NoLimit",
      defaultMessage: [{
        "type": 0,
        "value": "No Limit"
      }]
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment, {
    children: spendingLimitInterval === graphql/* VirtualCardLimitInterval.PER_AUTHORIZATION */.nV.PER_AUTHORIZATION ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "VirtualCards.LimitedToPerAuthorization",
      defaultMessage: [{
        "type": 0,
        "value": "Limited to "
      }, {
        "type": 1,
        "value": "limit"
      }, {
        "type": 0,
        "value": " per authorization"
      }],
      values: {
        limit: (0,currency_utils/* formatCurrency */.xG)(spendingLimitAmount, currency, {
          locale: locale
        })
      }
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "VirtualCards.AvailableOfLimit",
        defaultMessage: [{
          "type": 0,
          "value": "Avl. "
        }, {
          "type": 1,
          "value": "available"
        }, {
          "type": 0,
          "value": " of "
        }, {
          "type": 1,
          "value": "limit"
        }, {
          "type": 1,
          "value": "interval"
        }],
        values: {
          available: (0,currency_utils/* formatCurrency */.xG)(remainingLimit, currency, {
            locale: locale
          }),
          limit: (0,currency_utils/* formatCurrency */.xG)(spendingLimitAmount, currency, {
            locale: locale
          }),
          interval: getLimitIntervalString(spendingLimitInterval)
        }
      }), spendingLimitInterval === graphql/* VirtualCardLimitInterval.ALL_TIME */.nV.ALL_TIME ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["\xA0\u2022\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "VirtualCards.LimitDoesNotRenew",
          defaultMessage: [{
            "type": 0,
            "value": "Limit does not renew"
          }]
        })]
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: ["\xA0\u2022\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "tARVTJ",
          defaultMessage: [{
            "type": 0,
            "value": "Renews on "
          }, {
            "type": 3,
            "value": "renewsOnDate",
            "style": "medium"
          }],
          values: {
            renewsOnDate: new Date(spendingLimitRenewsOn)
          }
        })]
      })]
    })
  });
};

var VirtualCard = function VirtualCard(props) {
  var _React$useState9 = react.useState(false),
      _React$useState10 = slicedToArray_default()(_React$useState9, 2),
      displayDetails = _React$useState10[0],
      setDisplayDetails = _React$useState10[1];

  var intl = (0,useIntl/* default */.Z)();

  var _useToasts2 = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts2.addToast;

  var virtualCard = props.virtualCard;
  var isActive = virtualCard.data.state === 'OPEN' || virtualCard.data.status === 'active';
  var name = virtualCard.name || '';
  var cardNumber = "****  ****  ****  ".concat(virtualCard.last4);

  var handleCopy = function handleCopy(value) {
    return function () {
      navigator.clipboard.writeText(value);
      addToast({
        type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
        message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Clipboard.Copied",
          defaultMessage: [{
            "type": 0,
            "value": "Copied!"
          }]
        })
      });
    };
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(CardContainer, {
    width: "366px",
    height: "248px",
    flexDirection: "column",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {}), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      flexGrow: 1,
      m: "24px 24px 0 24px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "500",
        justifyContent: "space-between",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          children: name
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StateLabel, {
          isActive: isActive,
          children: (virtualCard.data.state || virtualCard.data.status).toUpperCase()
        })]
      }), displayDetails ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          mt: "27px",
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: [virtualCard.privateData.cardNumber.replace(/\d{4}(?=.)/g, '$& '), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
            color: "black",
            ml: 2,
            onClick: handleCopy(virtualCard.privateData.cardNumber),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Copy_esm/* Copy */.C, {
              size: "18px"
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
          fontSize: "12px",
          fontWeight: "500",
          lineHeight: "16px",
          textTransform: "uppercase",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "VirtualCards.CardNumber",
            defaultMessage: [{
              "type": 0,
              "value": "Card Number"
            }]
          }), ' ']
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            mt: "19px",
            mr: 4,
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              fontSize: "18px",
              fontWeight: "700",
              lineHeight: "26px",
              children: [// expireDate should be removed once https://github.com/opencollective/opencollective-api/pull/7307 is deployed to production
              virtualCard.privateData.expireDate || virtualCard.privateData.expiryDate, /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
                color: "black",
                ml: 2,
                onClick: // expireDate should be removed once https://github.com/opencollective/opencollective-api/pull/7307 is deployed to production
                handleCopy(virtualCard.privateData.expireDate || virtualCard.privateData.expiryDate),
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Copy_esm/* Copy */.C, {
                  size: "18px"
                })
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              fontSize: "12px",
              fontWeight: "500",
              lineHeight: "16px",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "VirtualCards.ExpireDate",
                defaultMessage: [{
                  "type": 0,
                  "value": "MM/YYYY"
                }]
              }), ' ']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            mt: "19px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              fontSize: "18px",
              fontWeight: "700",
              lineHeight: "26px",
              children: [virtualCard.privateData.cvv, /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
                color: "black",
                ml: 2,
                onClick: handleCopy(virtualCard.privateData.cvv),
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                  position: "relative",
                  display: "inline-block",
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(Copy_esm/* Copy */.C, {
                    size: "18px"
                  })
                })
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              fontSize: "12px",
              fontWeight: "500",
              lineHeight: "16px",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "VirtualCards.CVV",
                defaultMessage: [{
                  "type": 0,
                  "value": "CVV"
                }]
              }), ' ']
            })]
          })]
        })]
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: "18px",
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          letterSpacing: "0",
          children: cardNumber
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mt: "8px",
          fontSize: "13px",
          fontWeight: "500",
          lineHeight: "20px",
          letterSpacing: "0",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
            href: "/".concat(virtualCard.account.slug),
            color: "white.full",
            hoverColor: "white.transparent.72",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
              collective: virtualCard.account,
              radius: "20px",
              display: "inline-block",
              mr: 2,
              verticalAlign: "middle"
            }), ' ', virtualCard.account.name]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: "16px",
          fontSize: "11px",
          fontWeight: "400",
          lineHeight: "16px",
          letterSpacing: "0",
          children: getLimitString(VirtualCard_objectSpread(VirtualCard_objectSpread({}, virtualCard), {}, {
            locale: intl.locale
          }))
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: "8px",
          fontSize: "11px",
          fontWeight: "400",
          lineHeight: "16px",
          letterSpacing: "0",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "VirtualCards.AssignedOnDateTo",
            defaultMessage: [{
              "type": 0,
              "value": "Assigned on "
            }, {
              "type": 3,
              "value": "createdAt",
              "style": "medium"
            }, {
              "type": 0,
              "value": " to "
            }, {
              "type": 1,
              "value": "assignedTo"
            }],
            values: {
              createdAt: new Date(virtualCard.createdAt),
              assignedTo: /*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
                href: "/".concat(virtualCard.assignee.slug),
                color: "white.full",
                hoverColor: "white.transparent.72",
                fontWeight: "700",
                children: virtualCard.assignee.name
              })
            }
          })
        })]
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      backgroundColor: "#fff",
      color: "black.900",
      minHeight: "48px",
      px: "24px",
      justifyContent: 'space-between',
      alignItems: "center",
      shrink: 0,
      children: [(props.canEditVirtualCard || props.canPauseOrResumeVirtualCard || props.canDeleteVirtualCard) && /*#__PURE__*/(0,jsx_runtime.jsx)(ActionsButton, {
        virtualCard: virtualCard,
        host: props.host,
        onError: function onError(error) {
          return addToast({
            type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
            message: (0,errors/* i18nGraphqlException */.t2)(intl, error)
          });
        },
        onDeleteRefetchQuery: props.onDeleteRefetchQuery,
        confirmOnPauseCard: props.confirmOnPauseCard,
        canEditVirtualCard: props.canEditVirtualCard,
        canDeleteVirtualCard: props.canDeleteVirtualCard
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Action, {
        onClick: function onClick() {
          return setDisplayDetails(!displayDetails);
        },
        children: displayDetails ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "closeDetails",
            defaultMessage: [{
              "type": 0,
              "value": "Close Details"
            }]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(icons_DismissIcon, {
            height: "12px",
            width: "12px",
            ml: 2,
            mb: "2px"
          })]
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "VirtualCards.DisplayDetails",
            defaultMessage: [{
              "type": 0,
              "value": "View Card Details"
            }]
          }), "\xA0\u2192"]
        })
      })]
    })]
  });
};

VirtualCard.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCard",
  "props": {
    "canEditVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canPauseOrResumeVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "canDeleteVirtualCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "virtualCard": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "last4": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "data": {
            "name": "object",
            "required": false
          },
          "privateData": {
            "name": "object",
            "required": false
          },
          "provider": {
            "name": "string",
            "required": false
          },
          "spendingLimitAmount": {
            "name": "number",
            "required": false
          },
          "spendingLimitInterval": {
            "name": "string",
            "required": false
          },
          "spendingLimitRenewsOn": {
            "name": "string",
            "required": false
          },
          "remainingLimit": {
            "name": "number",
            "required": false
          },
          "currency": {
            "name": "string",
            "required": false
          },
          "createdAt": {
            "name": "string",
            "required": false
          },
          "assignee": {
            "name": "shape",
            "value": {
              "name": {
                "name": "string",
                "required": false
              },
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": false
              },
              "imageUrl": {
                "name": "string",
                "required": false
              },
              "name": {
                "name": "string",
                "required": false
              },
              "slug": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "confirmOnPauseCard": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onDeleteRefetchQuery": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var edit_collective_VirtualCard = (VirtualCard);
// EXTERNAL MODULE: ./components/RequestVirtualCardBtn.js + 1 modules
var RequestVirtualCardBtn = __webpack_require__(59924);
// EXTERNAL MODULE: ./node_modules/lodash/uniqBy.js
var uniqBy = __webpack_require__(45578);
var uniqBy_default = /*#__PURE__*/__webpack_require__.n(uniqBy);
;// CONCATENATED MODULE: ./components/edit-collective/sections/virtual-cards/filters/CollectiveFilter.js









var CollectiveFilter = function CollectiveFilter(_ref) {
  var _onChange = _ref.onChange,
      virtualCardCollectives = _ref.virtualCardCollectives;
  var router = (0,next_router.useRouter)();
  var collectiveAccountIds = router.query.collectiveAccountIds;

  var getAllCollectives = function getAllCollectives() {
    return sortBy_default()(uniqBy_default()(virtualCardCollectives, 'legacyId'), 'name').map(function (collective) {
      var label = collective.parentAccount ? "".concat(collective.parentAccount.name, " - ").concat(collective.name) : collective.name;
      return {
        label: label,
        value: String(collective.legacyId)
      };
    });
  };

  var findCollectiveFilters = function findCollectiveFilters() {
    return collectiveAccountIds === null || collectiveAccountIds === void 0 ? void 0 : collectiveAccountIds.split(',').map(function (collectiveAccountId) {
      return find_default()(getAllCollectives(), {
        value: collectiveAccountId
      });
    });
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
      inputId: "virtual-card-collective-picker",
      isMulti: true,
      useCompactMode: true,
      options: getAllCollectives(),
      value: findCollectiveFilters(),
      onChange: function onChange(selectedValues) {
        var selectedValuesString = '';
        selectedValues === null || selectedValues === void 0 ? void 0 : selectedValues.forEach(function (selectedValue) {
          return selectedValuesString = "".concat(selectedValue.value, ",").concat(selectedValuesString);
        });

        _onChange(selectedValuesString.slice(0, -1));
      }
    })
  });
};

CollectiveFilter.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveFilter",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "virtualCardCollectives": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ var filters_CollectiveFilter = (CollectiveFilter);
;// CONCATENATED MODULE: ./components/edit-collective/sections/virtual-cards/VirtualCardFilters.js



function VirtualCardFilters_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function VirtualCardFilters_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? VirtualCardFilters_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : VirtualCardFilters_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }













var FilterContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "VirtualCardFilters__FilterContainer",
  componentId: "sc-o5thlk-0"
})(["margin-bottom:8px;"]);
var VirtualCardFilters_FilterLabel = styled_components_browser_esm/* default.label.withConfig */.ZP.label.withConfig({
  displayName: "VirtualCardFilters__FilterLabel",
  componentId: "sc-o5thlk-1"
})(["font-weight:600;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#9d9fa3;"]);

var VirtualCardFilters = function VirtualCardFilters(_ref) {
  var filters = _ref.filters,
      _onChange = _ref.onChange,
      isCollectiveFilter = _ref.isCollectiveFilter,
      virtualCardCollectives = _ref.virtualCardCollectives,
      collective = _ref.collective,
      host = _ref.host,
      displayPeriodFilter = _ref.displayPeriodFilter;

  var allowRequestVirtualCard = get_default()(host, 'settings.virtualcards.requestcard');

  var getFilterProps = function getFilterProps(name, valueModifier) {
    return {
      inputId: "virtual-cards-filter-".concat(name),
      value: filters === null || filters === void 0 ? void 0 : filters[name],
      onChange: function onChange(value) {
        var preparedValue = valueModifier ? valueModifier(value) : value;

        _onChange(VirtualCardFilters_objectSpread(VirtualCardFilters_objectSpread({}, filters), {}, defineProperty_default()({}, name, value === 'ALL' ? null : preparedValue)));
      }
    };
  };

  var filterWidth;

  if (allowRequestVirtualCard && displayPeriodFilter) {
    filterWidth = 0.22;
  } else if (allowRequestVirtualCard || displayPeriodFilter) {
    filterWidth = 0.32;
  } else {
    filterWidth = 0.48;
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    children: [isCollectiveFilter && /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
      mr: [0, '8px'],
      mb: ['8px', 0],
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(VirtualCardFilters_FilterLabel, {
        htmlFor: "virtual-card-filter-collective",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Collective",
          defaultMessage: [{
            "type": 0,
            "value": "Collective"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(filters_CollectiveFilter, VirtualCardFilters_objectSpread(VirtualCardFilters_objectSpread({}, getFilterProps('collectiveAccountIds')), {}, {
        virtualCardCollectives: virtualCardCollectives
      }))]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      children: [displayPeriodFilter && /*#__PURE__*/(0,jsx_runtime.jsxs)(FilterContainer, {
        mr: [0, '8px'],
        mb: ['8px', 0],
        width: [1, filterWidth],
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(VirtualCardFilters_FilterLabel, {
          htmlFor: "virtual-card-filter-period",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Period",
            defaultMessage: [{
              "type": 0,
              "value": "Period"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(PeriodFilter/* default */.Z, VirtualCardFilters_objectSpread({}, getFilterProps('period', date_utils/* encodeDateInterval */.EB)))]
      }), allowRequestVirtualCard && collective.isApproved && /*#__PURE__*/(0,jsx_runtime.jsx)(RequestVirtualCardBtn/* default */.Z, {
        collective: collective,
        host: host,
        children: function children(btnProps) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, VirtualCardFilters_objectSpread(VirtualCardFilters_objectSpread({
            m: 3
          }, btnProps), {}, {
            width: [1, 1 / 4],
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "VirtualCards.RequestCardButton",
              defaultMessage: [{
                "type": 0,
                "value": "Request card"
              }]
            })
          }));
        }
      })]
    })]
  });
};

VirtualCardFilters.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCardFilters",
  "props": {
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "filters": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "virtualCardCollectives": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    },
    "isCollectiveFilter": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "displayPeriodFilter": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var virtual_cards_VirtualCardFilters = (/*#__PURE__*/react.memo(VirtualCardFilters));
;// CONCATENATED MODULE: ./components/edit-collective/sections/virtual-cards/VirtualCards.js





var VirtualCards_templateObject;

function VirtualCards_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function VirtualCards_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? VirtualCards_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : VirtualCards_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



















var virtualCardsQuery = (0,graphql_tag_lib/* default */.ZP)(VirtualCards_templateObject || (VirtualCards_templateObject = taggedTemplateLiteral_default()(["\n  query AccountVirtualCards(\n    $slug: String\n    $limit: Int!\n    $offset: Int!\n    $state: String\n    $merchantAccount: AccountReferenceInput\n    $dateFrom: DateTime\n    $dateTo: DateTime\n  ) {\n    account(slug: $slug) {\n      id\n      legacyId\n      slug\n      type\n      name\n      imageUrl\n      ... on AccountWithHost {\n        host {\n          legacyId\n          slug\n          id\n          type\n          name\n          imageUrl\n          settings\n        }\n      }\n      virtualCards(\n        limit: $limit\n        offset: $offset\n        state: $state\n        merchantAccount: $merchantAccount\n        dateFrom: $dateFrom\n        dateTo: $dateTo\n      ) {\n        totalCount\n        limit\n        offset\n        nodes {\n          id\n          name\n          last4\n          data\n          currency\n          provider\n          privateData\n          createdAt\n          spendingLimitAmount\n          spendingLimitInterval\n          spendingLimitRenewsOn\n          remainingLimit\n          account {\n            id\n            slug\n            name\n            imageUrl\n          }\n          assignee {\n            id\n            name\n            slug\n            imageUrl\n          }\n        }\n      }\n      virtualCardMerchants {\n        nodes {\n          id\n          type\n          slug\n          name\n          currency\n          location {\n            id\n            address\n            country\n          }\n          imageUrl(height: 64)\n        }\n      }\n    }\n  }\n"])));
var VIRTUAL_CARDS_PER_PAGE = 6;

var VirtualCards = function VirtualCards(props) {
  var _props$collective$hos, _props$collective$hos2, _props$collective$hos3, _props$collective$hos4, _props$collective$hos5, _props$collective$hos6;

  var router = (0,next_router.useRouter)();

  var routerQuery = omit_default()(router.query, ['slug', 'section']);

  var offset = parseInt(routerQuery.offset) || 0;
  var state = routerQuery.state,
      merchant = routerQuery.merchant,
      period = routerQuery.period;

  var _parseDateInterval = (0,date_utils/* parseDateInterval */.dr)(period),
      dateFrom = _parseDateInterval.from,
      dateTo = _parseDateInterval.to;

  var _useQuery = (0,client.useQuery)(virtualCardsQuery, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      slug: props.collective.slug,
      limit: VIRTUAL_CARDS_PER_PAGE,
      offset: offset,
      state: state,
      merchantAccount: {
        slug: merchant
      },
      dateFrom: dateFrom,
      dateTo: dateTo
    }
  }),
      loading = _useQuery.loading,
      data = _useQuery.data;

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
  }

  var handleUpdateFilters = function handleUpdateFilters(queryParams) {
    return router.push({
      pathname: "/".concat(props.collective.slug, "/admin/virtual-cards"),
      query: omitBy_default()(VirtualCards_objectSpread(VirtualCards_objectSpread({}, routerQuery), queryParams), function (value) {
        return !value;
      })
    });
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    width: ['366px', '764px'],
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "VirtualCards.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Use a virtual card to spend from your collective's budget. You can request multiple cards (review the host's policy to see how many). Your fiscal host will create the card for you and assign it a limit and a merchant. You will be notified by email once the card is assigned. "
          }, {
            "type": 8,
            "value": "learnMoreLink",
            "children": [{
              "type": 0,
              "value": "Learn more"
            }]
          }],
          values: {
            learnMoreLink: (0,I18nFormatters/* getI18nLink */.fw)({
              href: 'https://docs.opencollective.com/help/expenses-and-getting-paid/virtual-cards',
              openInNewTabNoFollow: true
            })
          }
        })
      }), ((_props$collective$hos = props.collective.host) === null || _props$collective$hos === void 0 ? void 0 : (_props$collective$hos2 = _props$collective$hos.settings) === null || _props$collective$hos2 === void 0 ? void 0 : (_props$collective$hos3 = _props$collective$hos2.virtualcards) === null || _props$collective$hos3 === void 0 ? void 0 : _props$collective$hos3.policy) && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        mt: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Collapse/* default */.Z, {
          title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "VirtualCards.Policy.Reminder",
            defaultMessage: [{
              "type": 1,
              "value": "hostName"
            }, {
              "type": 0,
              "value": " Virtual Card use Policy"
            }],
            values: {
              hostName: props.collective.host.name
            }
          }),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(HTMLContent/* default */.Z, {
            content: (_props$collective$hos4 = props.collective.host) === null || _props$collective$hos4 === void 0 ? void 0 : (_props$collective$hos5 = _props$collective$hos4.settings) === null || _props$collective$hos5 === void 0 ? void 0 : (_props$collective$hos6 = _props$collective$hos5.virtualcards) === null || _props$collective$hos6 === void 0 ? void 0 : _props$collective$hos6.policy
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 3,
        flexDirection: ['row', 'column'],
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(virtual_cards_VirtualCardFilters, {
          filters: routerQuery,
          collective: props.collective,
          host: props.collective.host,
          virtualCardMerchants: data.account.virtualCardMerchants.nodes,
          onChange: function onChange(queryParams) {
            return handleUpdateFilters(VirtualCards_objectSpread(VirtualCards_objectSpread({}, queryParams), {}, {
              offset: null
            }));
          },
          displayPeriodFilter: true
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
      mt: 4,
      gridTemplateColumns: ['100%', '366px 366px'],
      gridGap: "32px 24px",
      children: data.account.virtualCards.nodes.map(function (virtualCard) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_VirtualCard, {
          host: data.account.host,
          canEditVirtualCard: virtualCard.data.status === 'active',
          canPauseOrResumeVirtualCard: true,
          canDeleteVirtualCard: true,
          confirmOnPauseCard: props.collective.type === constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE,
          virtualCard: virtualCard,
          onDeleteRefetchQuery: "AccountVirtualCards"
        }, virtualCard.id);
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      mt: 5,
      justifyContent: "center",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
        route: "/".concat(props.collective.slug, "/admin/virtual-cards"),
        total: data.account.virtualCards.totalCount,
        limit: VIRTUAL_CARDS_PER_PAGE,
        offset: offset,
        ignoredQueryParams: ['slug', 'section']
      })
    })]
  });
};

VirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "VirtualCards",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "virtualCards": {
            "name": "object",
            "required": false
          },
          "virtualCardMerchants": {
            "name": "array",
            "required": false
          },
          "host": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var virtual_cards_VirtualCards = (VirtualCards);
// EXTERNAL MODULE: ./node_modules/lodash/difference.js
var difference = __webpack_require__(91966);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/Close/Close.esm.js
var Close_esm = __webpack_require__(58410);
// EXTERNAL MODULE: ./node_modules/validator/index.js
var validator = __webpack_require__(48966);
;// CONCATENATED MODULE: ./lib/constants/notificationEvents.js
// Webhook notification events
var WebhookEvents = {
  ALL: 'all',
  CONNECTED_ACCOUNT_CREATED: 'connected_account.created',
  COLLECTIVE_APPLY: 'collective.apply',
  COLLECTIVE_APPROVED: 'collective.approved',
  COLLECTIVE_CREATED: 'collective.created',
  COLLECTIVE_COMMENT_CREATED: 'collective.comment.created',
  COLLECTIVE_EXPENSE_CREATED: 'collective.expense.created',
  COLLECTIVE_EXPENSE_DELETED: 'collective.expense.deleted',
  COLLECTIVE_EXPENSE_UPDATED: 'collective.expense.updated',
  COLLECTIVE_EXPENSE_REJECTED: 'collective.expense.rejected',
  COLLECTIVE_EXPENSE_APPROVED: 'collective.expense.approved',
  COLLECTIVE_EXPENSE_PAID: 'collective.expense.paid',
  COLLECTIVE_MEMBER_CREATED: 'collective.member.created',
  COLLECTIVE_TRANSACTION_CREATED: 'collective.transaction.created',
  COLLECTIVE_UPDATE_CREATED: 'collective.update.created',
  COLLECTIVE_UPDATE_PUBLISHED: 'collective.update.published',
  SUBSCRIPTION_CANCELED: 'subscription.canceled',
  TICKET_CONFIRMED: 'ticket.confirmed'
};
var WebhookEventsList = Object.values(WebhookEvents).sort();
;// CONCATENATED MODULE: ./lib/i18n/webhook-event-type.js


var webhook_event_type_defineMessages;



var webhook_event_type_TypesI18n = (0,lib.defineMessages)((webhook_event_type_defineMessages = {}, defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.ALL, {
  id: "WebhookEvents.All",
  defaultMessage: [{
    "type": 0,
    "value": "All"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.CONNECTED_ACCOUNT_CREATED, {
  id: "WebhookEvents.CONNECTED_ACCOUNT_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "Connected account added"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_APPLY, {
  id: "WebhookEvents.COLLECTIVE_APPLY",
  defaultMessage: [{
    "type": 0,
    "value": "New collective application"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_APPROVED, {
  id: "WebhookEvents.COLLECTIVE_APPROVED",
  defaultMessage: [{
    "type": 0,
    "value": "Collective application approved"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_CREATED, {
  id: "WebhookEvents.COLLECTIVE_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "Collective created"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_COMMENT_CREATED, {
  id: "WebhookEvents.COLLECTIVE_COMMENT_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "New comment"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_CREATED, {
  id: "WebhookEvents.COLLECTIVE_EXPENSE_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "New expenses"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_DELETED, {
  id: "KYXMJ6",
  defaultMessage: [{
    "type": 0,
    "value": "Expense deleted"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_UPDATED, {
  id: "Expense.Activity.Updated",
  defaultMessage: [{
    "type": 0,
    "value": "Expense updated"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_REJECTED, {
  id: "Expense.Activity.Rejected",
  defaultMessage: [{
    "type": 0,
    "value": "Expense rejected"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_APPROVED, {
  id: "Expense.Activity.Approved",
  defaultMessage: [{
    "type": 0,
    "value": "Expense approved"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_EXPENSE_PAID, {
  id: "Expense.Activity.Paid",
  defaultMessage: [{
    "type": 0,
    "value": "Expense paid"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_MEMBER_CREATED, {
  id: "WebhookEvents.COLLECTIVE_MEMBER_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "New member"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_TRANSACTION_CREATED, {
  id: "WebhookEvents.COLLECTIVE_TRANSACTION_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "New transaction"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_UPDATE_CREATED, {
  id: "WebhookEvents.COLLECTIVE_UPDATE_CREATED",
  defaultMessage: [{
    "type": 0,
    "value": "New update drafted"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED, {
  id: "connectedAccounts.twitter.updatePublished.toggle.label",
  defaultMessage: [{
    "type": 0,
    "value": "Update published"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.SUBSCRIPTION_CANCELED, {
  id: "p9V1Z4",
  defaultMessage: [{
    "type": 0,
    "value": "Recurring contribution cancelled"
  }]
}), defineProperty_default()(webhook_event_type_defineMessages, WebhookEvents.TICKET_CONFIRMED, {
  id: "WebhookEvents.TICKET_CONFIRMED",
  defaultMessage: [{
    "type": 0,
    "value": "Ticket confirmed"
  }]
}), webhook_event_type_defineMessages));
/**
 * Translate the webhook event
 *
 * @param {object} `intl` - see `injectIntl`
 * @param {string} `type`
 */

var i18nWebhookEventType = function i18nWebhookEventType(intl, type) {
  var i18nMsg = webhook_event_type_TypesI18n[type];
  return i18nMsg ? intl.formatMessage(i18nMsg) : type;
};
;// CONCATENATED MODULE: ./components/edit-collective/sections/WebhookActivityInfoModal.js


var WebhookActivityInfoModal_excluded = ["activity"];

var _objectSpread2;

function WebhookActivityInfoModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function WebhookActivityInfoModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? WebhookActivityInfoModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : WebhookActivityInfoModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }











var getFakeActivity = function getFakeActivity(type, data) {
  return {
    createdAt: '2022-07-18T10:30:44.479Z',
    id: 309906,
    CollectiveId: 16658,
    type: type,
    data: data
  };
};

var getFakeIndividual = function getFakeIndividual() {
  return {
    id: 4469,
    type: 'USER',
    slug: 'betree',
    name: 'Benjamin',
    twitterHandle: 'Betree83',
    githubHandle: 'Betree',
    repositoryUrl: 'https://github.com/Betree',
    image: 'https://opencollective-staging.s3.us-west-1.amazonaws.com/550ac070-e0f8-11e9-9d4c-e9c71c24ba70.jpg'
  };
};

var getFakeCollective = function getFakeCollective() {
  return {
    id: 16658,
    type: 'COLLECTIVE',
    slug: 'captainfact_io',
    name: 'CaptainFact',
    twitterHandle: null,
    githubHandle: 'test',
    repositoryUrl: 'https://github.com/CaptainFact',
    image: 'https://opencollective-staging.s3.us-west-1.amazonaws.com/10dd8f00-54c8-11eb-bfdc-17c9ddbead53.png'
  };
};

var getFakeTransaction = function getFakeTransaction() {
  return {
    id: 233159,
    kind: 'CONTRIBUTION',
    type: 'CREDIT',
    uuid: 'a6a00550-95c4-48b2-bb32-ceb185232725',
    group: '9268b46d-74e7-4360-ac99-9413f78bb73e',
    amount: 4198,
    isDebt: false,
    OrderId: 50684,
    currency: 'EUR',
    isRefund: false,
    ExpenseId: null,
    createdAt: '2022-07-18T10:30:14.942Z',
    taxAmount: null,
    description: 'Monthly financial contribution to CaptainFact (Fixed recurring)',
    CollectiveId: 16658,
    hostCurrency: 'EUR',
    CreatedByUserId: 4829,
    FromCollectiveId: 4469,
    amountInHostCurrency: 4198,
    hostFeeInHostCurrency: 0,
    netAmountInHostCurrency: 4033,
    platformFeeInHostCurrency: 0,
    UsingGiftCardFromCollectiveId: null,
    netAmountInCollectiveCurrency: 4033,
    amountSentToHostInHostCurrency: 4033,
    paymentProcessorFeeInHostCurrency: -165,
    formattedAmount: '€41.98',
    formattedAmountWithInterval: '€41.98'
  };
}; // All expenses have the same payload format


var getFakeExpenseEventActivity = function getFakeExpenseEventActivity(type) {
  return getFakeActivity(type, {
    expense: {
      id: 9214,
      description: 'Food for the team retreat',
      amount: 5500,
      currency: 'USD',
      formattedAmount: '$55.00',
      formattedAmountWithInterval: '$55.00'
    },
    fromCollective: getFakeIndividual(),
    collective: getFakeCollective()
  });
};

var getFakeMember = function getFakeMember() {
  return {
    role: 'BACKER',
    description: null,
    since: '2022-07-18T10:30:14.985Z',
    memberCollective: {
      id: 4469,
      type: 'USER',
      slug: 'betree',
      name: 'Ben',
      company: '@CaptainFact_io @opencollective',
      website: 'https://benjamin.piouffle.com',
      twitterHandle: 'Betree83',
      githubHandle: 'Betree',
      repositoryUrl: 'https://github.com/Betree',
      description: 'Developer and civic tech enthusiast !',
      previewImage: 'https://res.cloudinary.com/opencollective/image/fetch/c_thumb,g_face,h_48,r_max,w_48,bo_3px_solid_white/c_thumb,h_48,r_max,w_48,bo_2px_solid_rgb:66C71A/e_trim/f_jpg/https%3A%2F%2Fopencollective-staging.s3.us-west-1.amazonaws.com%2F550ac070-e0f8-11e9-9d4c-e9c71c24ba70.jpg'
    }
  };
};

var getFakeOrder = function getFakeOrder() {
  return {
    id: 50684,
    totalAmount: 4198,
    currency: 'EUR',
    description: 'Monthly financial contribution to CaptainFact (Fixed recurring)',
    interval: 'month',
    createdAt: '2022-07-18T10:30:09.855Z',
    quantity: 1,
    formattedAmount: '€41.98',
    formattedAmountWithInterval: '€41.98 / month'
  };
};

var ExpenseEvents = [WebhookEvents.COLLECTIVE_EXPENSE_PAID, WebhookEvents.COLLECTIVE_EXPENSE_CREATED, WebhookEvents.COLLECTIVE_EXPENSE_APPROVED, WebhookEvents.COLLECTIVE_EXPENSE_DELETED, WebhookEvents.COLLECTIVE_EXPENSE_REJECTED, WebhookEvents.COLLECTIVE_EXPENSE_UPDATED];

var WebhookEventInfo = WebhookActivityInfoModal_objectSpread(WebhookActivityInfoModal_objectSpread({}, ExpenseEvents.reduce(function (acc, type) {
  acc[type] = function () {
    return getFakeExpenseEventActivity(type);
  };

  return acc;
}, {})), {}, (_objectSpread2 = {}, defineProperty_default()(_objectSpread2, WebhookEvents.COLLECTIVE_TRANSACTION_CREATED, function () {
  return getFakeActivity(WebhookEvents.COLLECTIVE_TRANSACTION_CREATED, {
    fromCollective: getFakeIndividual(),
    collective: getFakeCollective(),
    transaction: getFakeTransaction()
  });
}), defineProperty_default()(_objectSpread2, WebhookEvents.COLLECTIVE_MEMBER_CREATED, function () {
  return getFakeActivity(WebhookEvents.COLLECTIVE_MEMBER_CREATED, {
    member: getFakeMember(),
    order: getFakeOrder()
  });
}), defineProperty_default()(_objectSpread2, WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED, function () {
  return getFakeActivity(WebhookEvents.COLLECTIVE_UPDATE_PUBLISHED, {
    update: {
      html: '<div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Paria sunt igitur. Atque ab his initiis profecti omnium virtutum et originem et progressionem persecuti sunt. Non igitur de improbo, sed de callido improbo quaerimus, qualis Q. Si quidem, inquit, tollerem, sed relinquo. Non quam nostram quidem, inquit Pomponius iocans; <strong>Quantum Aristoxeni ingenium consumptum videmus in musicis?</strong><br /><br /></div><div><strong><br />Praeteritis, inquit, gaudeo.</strong> Aliter enim explicari, quod quaeritur, non potest. Hic nihil fuit, quod quaereremus. Hinc ceteri particulas arripere conati suam quisque videro voluit afferre sententiam. <strong>Nam, ut sint illa vendibiliora, haec uberiora certe sunt.</strong> Respondent extrema primis, media utrisque, omnia omnibus. Quamvis enim depravatae non sint, pravae tamen esse possunt. <em>Iam id ipsum absurdum, maximum malum neglegi.</em> <em>Expectoque quid ad id, quod quaerebam, respondeas.</em> Nec vero alia sunt quaerenda contra Carneadeam illam sententiam. Quid ei reliquisti, nisi te, quoquo modo loqueretur, intellegere, quid diceret? Si enim ad populum me vocas, eum. <br /><br /></div><div><br />Duo Reges: constructio interrete. <em>Sed ad rem redeamus;</em> Hinc ceteri particulas arripere conati suam quisque videro voluit afferre sententiam. Aperiendum est igitur, quid sit voluptas; Oratio me istius philosophi non offendit; <em>Itaque ab his ordiamur.</em></div>',
      title: 'Duo Reges: constructio interrete',
      slug: 'duo-reges-constructio-interrete',
      isPrivate: false
    }
  });
}), _objectSpread2));

var hasWebhookEventInfo = function hasWebhookEventInfo(event) {
  return Boolean(WebhookEventInfo[event]);
};
var WebhookActivityInfoModal_CodeContainer = styled_components_browser_esm/* default.pre.withConfig */.ZP.pre.withConfig({
  displayName: "WebhookActivityInfoModal__CodeContainer",
  componentId: "sc-1wy9bxr-0"
})(["max-width:500px;max-height:800px;overflow:auto;"]);

var WebhookActivityInfoModal = function WebhookActivityInfoModal(_ref) {
  var activity = _ref.activity,
      props = objectWithoutProperties_default()(_ref, WebhookActivityInfoModal_excluded);

  var intl = (0,useIntl/* default */.Z)();
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, WebhookActivityInfoModal_objectSpread(WebhookActivityInfoModal_objectSpread({}, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "NSE1N3",
        defaultMessage: [{
          "type": 0,
          "value": "Details for the \""
        }, {
          "type": 1,
          "value": "event"
        }, {
          "type": 0,
          "value": "\" webhook event"
        }],
        values: {
          event: i18nWebhookEventType(intl, activity)
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
      mt: 4,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        mb: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "dwABvu",
          defaultMessage: [{
            "type": 0,
            "value": "Sample payload:"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(WebhookActivityInfoModal_CodeContainer, {
        children: JSON.stringify(WebhookEventInfo[activity](), null, 2)
      })]
    })]
  }));
};

WebhookActivityInfoModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "WebhookActivityInfoModal",
  "props": {
    "activity": {
      "description": "",
      "type": {
        "name": "enum",
        "computed": true,
        "value": "Object.values(WebhookEvents)"
      },
      "required": true
    },
    "onClose": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_WebhookActivityInfoModal = (WebhookActivityInfoModal);
;// CONCATENATED MODULE: ./components/edit-collective/sections/Webhooks.js















var Webhooks_templateObject, Webhooks_templateObject2;

function Webhooks_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Webhooks_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Webhooks_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Webhooks_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



function Webhooks_createSuper(Derived) { var hasNativeReflectConstruct = Webhooks_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function Webhooks_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



























var EMPTY_WEBHOOKS = [];

var Webhooks = /*#__PURE__*/function (_React$Component) {
  inherits_default()(Webhooks, _React$Component);

  var _super = Webhooks_createSuper(Webhooks);

  function Webhooks(_props) {
    var _this;

    classCallCheck_default()(this, Webhooks);

    _this = _super.call(this, _props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getWebhooksFromProps", function (props) {
      return get_default()(props, 'data.Collective.notifications', EMPTY_WEBHOOKS);
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "validateWebhookUrl", function (value) {
      return (0,validator.isURL)(value);
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "cleanWebhookUrl", function (value) {
      return value ? value.trim().replace(/https?:\/\//, '') : '';
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "getEventTypes", (0,memoize_one_esm/* default */.Z)(function (collectiveType, isHost) {
      var removeList = [];

      if (collectiveType !== constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE) {
        removeList.push('collective.comment.created', 'collective.expense.created', 'collective.expense.deleted', 'collective.expense.updated', 'collective.expense.rejected', 'collective.expense.approved', 'collective.expense.paid', 'collective.monthly', 'collective.transaction.created', 'collective.transaction.paid', 'collective.update.created', 'collective.update.published');
      }

      if (collectiveType !== constants_collectives/* CollectiveType.ORGANIZATION */.eV.ORGANIZATION) {
        removeList.push('organization.collective.created', 'user.created');
      }

      if (collectiveType !== constants_collectives/* CollectiveType.EVENT */.eV.EVENT) {
        removeList.push('ticket.confirmed');
      }

      if (!isHost) {
        removeList.push('collective.apply', 'collective.approved', 'collective.created');
      }

      return difference_default()(WebhookEventsList, removeList);
    }));

    defineProperty_default()(assertThisInitialized_default()(_this), "editWebhook", function (index, fieldname, value) {
      var _this$state = _this.state,
          webhooks = _this$state.webhooks,
          status = _this$state.status;
      var newStatus = status;

      if (fieldname === 'webhookUrl') {
        var cleanValue = _this.cleanWebhookUrl(value);

        webhooks[index][fieldname] = cleanValue;
        var isValid = webhooks.every(function (webhook) {
          return _this.validateWebhookUrl(webhook.webhookUrl);
        });
        newStatus = isValid ? null : 'invalid';
      } else {
        webhooks[index][fieldname] = value;
      }

      _this.setState({
        webhooks: webhooks,
        modified: true,
        status: newStatus
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "addWebhook", function () {
      var webhooks = _this.state.webhooks;
      webhooks.push({
        webhookUrl: '',
        type: 'all'
      });

      _this.setState({
        webhooks: webhooks,
        modified: true,
        status: 'invalid'
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "removeWebhook", function (index) {
      var webhooks = _this.state.webhooks;

      if (index < 0 || index > webhooks.length) {
        return;
      }

      webhooks.splice(index, 1);

      _this.setState({
        webhooks: webhooks,
        modified: true
      });
    });

    defineProperty_default()(assertThisInitialized_default()(_this), "handleSubmit", /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      var webhooks, notifications, result, message;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _this.setState({
                status: 'loading'
              });

              webhooks = _this.state.webhooks;
              notifications = webhooks.map(function (webhook) {
                return pick_default()(webhook, ['type', 'webhookUrl', 'id']);
              });
              _context.prev = 3;
              _context.next = 6;
              return _this.props.editWebhooks({
                collectiveId: _this.props.data.Collective.id,
                notifications: notifications
              });

            case 6:
              result = _context.sent;

              _this.setState({
                modified: false,
                status: 'saved',
                webhooks: cloneDeep_default()(result.data.editWebhooks)
              });

              setTimeout(function () {
                _this.setState({
                  status: null
                });
              }, 3000);
              _context.next = 15;
              break;

            case 11:
              _context.prev = 11;
              _context.t0 = _context["catch"](3);
              message = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0).message;

              _this.setState({
                status: 'error',
                error: message
              });

            case 15:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[3, 11]]);
    })));

    defineProperty_default()(assertThisInitialized_default()(_this), "renderWebhook", function (webhook, index) {
      var _this$props = _this.props,
          intl = _this$props.intl,
          data = _this$props.data;
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        py: 4,
        width: [0.9, 1],
        mx: ['auto', 0],
        px: [0, 3, 0],
        flexWrap: "wrap",
        flexDirection: "row-reverse",
        justifyContent: "space-between",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          my: [0, 3],
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
            width: 1,
            py: 1,
            px: 3,
            buttonSize: "small",
            buttonStyle: "standard",
            onClick: function onClick() {
              return _this.removeWebhook(index);
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Close_esm/* Close */.x, {
              size: "1.2em"
            }), '  ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "webhooks.remove",
              defaultMessage: [{
                "type": 0,
                "value": "Remove webhook"
              }]
            })]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          width: [1, 0.75],
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            mb: 4,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
              fontSize: "14px",
              mb: 1,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "webhooks.url.label",
                defaultMessage: [{
                  "type": 0,
                  "value": "URL"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputGroup/* default */.Z, {
              type: "type",
              name: "webhookUrl",
              prepend: "https://",
              error: !_this.validateWebhookUrl(webhook.webhookUrl),
              value: _this.cleanWebhookUrl(webhook.webhookUrl),
              onChange: function onChange(_ref2) {
                var target = _ref2.target;
                return _this.editWebhook(index, 'webhookUrl', target.value);
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
              fontSize: "14px",
              mb: 1,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "ZmlNQ3",
                defaultMessage: [{
                  "type": 0,
                  "value": "Activity"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              alignItems: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
                minWidth: 300,
                isSearchable: false,
                inputId: "event-type-select",
                options: _this.getEventTypes(data.Collective.type, data.Collective.isHost).map(function (eventType) {
                  return {
                    label: i18nWebhookEventType(intl, eventType),
                    value: eventType
                  };
                }),
                value: {
                  label: i18nWebhookEventType(intl, webhook.type),
                  value: webhook.type
                },
                onChange: function onChange(_ref3) {
                  var value = _ref3.value;
                  return _this.editWebhook(index, 'type', value);
                }
              }), hasWebhookEventInfo(webhook.type) && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                buttonSize: "tiny",
                isBorderless: true,
                title: intl.formatMessage({
                  id: "moreInfo",
                  defaultMessage: [{
                    "type": 0,
                    "value": "More info"
                  }]
                }),
                onClick: function onClick() {
                  return _this.setState({
                    moreInfoModal: webhook.type
                  });
                },
                ml: 2,
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(InfoCircle_esm/* InfoCircle */.Z, {
                  size: 24,
                  color: "#a3a3a3"
                })
              })]
            })]
          }), _this.state.moreInfoModal && /*#__PURE__*/(0,jsx_runtime.jsx)(sections_WebhookActivityInfoModal, {
            activity: _this.state.moreInfoModal,
            onClose: function onClose() {
              return _this.setState({
                moreInfoModal: null
              });
            }
          })]
        })]
      }, index);
    });

    _this.state = {
      moreInfoModal: null,
      modified: false,
      webhooks: cloneDeep_default()(_this.getWebhooksFromProps(_props)),
      isLoaded: false,
      status: null,
      error: ''
    };
    return _this;
  }

  createClass_default()(Webhooks, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(oldProps) {
      if (this.getWebhooksFromProps(oldProps) !== this.getWebhooksFromProps(this.props)) {
        this.setState({
          webhooks: cloneDeep_default()(this.getWebhooksFromProps(this.props))
        });
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$state2 = this.state,
          webhooks = _this$state2.webhooks,
          status = _this$state2.status,
          error = _this$state2.error;
      var data = this.props.data;
      var webhooksCount = webhooks.length;

      if (data.loading) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
      }

      return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "14px",
          lineHeight: "18px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "gN829M",
            defaultMessage: [{
              "type": 0,
              "value": "You can use Webhooks to build custom integrations with Open Collective. Slack and Discord webhooks are natively supported. You can also integrate them with tools like Zapier, IFTTT, or Huginn. Learn more about this from "
            }, {
              "type": 8,
              "value": "DocLink",
              "children": [{
                "type": 0,
                "value": "the documentation"
              }]
            }, {
              "type": 0,
              "value": " or see how you can go further using our "
            }, {
              "type": 8,
              "value": "GraphqlAPILink",
              "children": [{
                "type": 0,
                "value": "public GraphQL API"
              }]
            }, {
              "type": 0,
              "value": "."
            }],
            values: {
              GraphqlAPILink: (0,I18nFormatters/* getI18nLink */.fw)({
                href: 'https://docs.opencollective.com/help/contributing/development/api#graphql-api',
                openInNewTab: true
              }),
              DocLink: (0,I18nFormatters/* getI18nLink */.fw)({
                href: 'https://docs.opencollective.com/help/collectives/collective-settings/integrations#webhooks-generic-slack-discord',
                openInNewTab: true
              })
            }
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          children: webhooks.map(this.renderWebhook)
        }), webhooksCount > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          borderColor: "black.300"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          width: [0.9, 0.75],
          mx: ['auto', 0],
          my: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(_StyledStyledButton, {
            width: 1,
            px: [0, 3, 0],
            borderRadius: 6,
            buttonSize: "medium",
            buttonStyle: "standard",
            onClick: function onClick() {
              return _this2.addWebhook();
            },
            $_css: 'border-style: dashed',
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Add_esm/* Add */.m, {
              size: "1.2em"
            }), '  ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "M3IHfl",
              defaultMessage: [{
                "type": 0,
                "value": "Add "
              }, {
                "type": 5,
                "value": "existingWebhooksCount",
                "options": {
                  "0": {
                    "value": [{
                      "type": 0,
                      "value": "your first"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "another"
                    }]
                  }
                }
              }, {
                "type": 0,
                "value": " webhook"
              }],
              values: {
                existingWebhooksCount: webhooksCount
              }
            })]
          })
        }), status === 'error' && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          my: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "error",
            children: error
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mr: 3,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            px: 4,
            buttonSize: "medium",
            buttonStyle: "primary",
            onClick: this.handleSubmit,
            loading: status === 'loading',
            disabled: data.loading || !this.state.modified || status === 'invalid',
            children: status === 'saved' ? /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              textTransform: "capitalize",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "saved",
                defaultMessage: [{
                  "type": 0,
                  "value": "Saved"
                }]
              })
            }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "webhooks.save",
              defaultMessage: [{
                "type": 0,
                "value": "Save "
              }, {
                "type": 1,
                "value": "count"
              }, {
                "type": 0,
                "value": " webhooks"
              }],
              values: {
                count: webhooksCount
              }
            })
          })
        })]
      });
    }
  }]);

  return Webhooks;
}(react.Component);

var editCollectiveWebhooksQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Webhooks_templateObject || (Webhooks_templateObject = taggedTemplateLiteral_default()(["\n  query EditCollectiveWebhooks($collectiveSlug: String) {\n    Collective(slug: $collectiveSlug) {\n      id\n      type\n      slug\n      isHost\n      notifications(channel: \"webhook\") {\n        id\n        type\n        active\n        webhookUrl\n      }\n    }\n  }\n"])));
var editCollectiveWebhooksMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(Webhooks_templateObject2 || (Webhooks_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditCollectiveWebhooks($collectiveId: Int!, $notifications: [NotificationInputType]) {\n    editWebhooks(collectiveId: $collectiveId, notifications: $notifications) {\n      id\n      type\n      active\n      webhookUrl\n    }\n  }\n"])));
var addEditCollectiveWebhooksData = (0,hoc_graphql/* graphql */.B)(editCollectiveWebhooksQuery);
var editEditCollectiveWebhooksMutation = (0,hoc_graphql/* graphql */.B)(editCollectiveWebhooksMutation, {
  props: function props(_ref4) {
    var mutate = _ref4.mutate,
        ownProps = _ref4.ownProps;
    return {
      editWebhooks: function editWebhooks(variables) {
        return mutate({
          variables: variables,
          update: function update(cache, _ref5) {
            var editWebhooks = _ref5.data.editWebhooks;

            var _cache$readQuery = cache.readQuery({
              query: editCollectiveWebhooksQuery,
              variables: {
                collectiveSlug: ownProps.collectiveSlug
              }
            }),
                Collective = _cache$readQuery.Collective;

            cache.writeQuery({
              query: editCollectiveWebhooksQuery,
              data: {
                Collective: Webhooks_objectSpread(Webhooks_objectSpread({}, Collective), {}, {
                  notifications: editWebhooks
                })
              }
            });
          }
        });
      }
    };
  }
});
var Webhooks_addGraphql = (0,utils/* compose */.qC)(addEditCollectiveWebhooksData, editEditCollectiveWebhooksMutation);
Webhooks.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getWebhooksFromProps",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "props",
      "type": null
    }],
    "returns": null
  }, {
    "name": "validateWebhookUrl",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "cleanWebhookUrl",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "editWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }, {
      "name": "fieldname",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "addWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "removeWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "index",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "renderWebhook",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "webhook",
      "type": null
    }, {
      "name": "index",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "Webhooks",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    },
    "editWebhooks": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "data": {
      "description": "From graphql query",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "intl": {
      "description": "From intl",
      "type": {
        "name": "object"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_Webhooks = ((0,injectIntl/* default */.ZP)(Webhooks_addGraphql(Webhooks)));

var _StyledStyledButton = (0,styled_components_browser_esm/* default */.ZP)(StyledButton/* default */.Z).withConfig({
  displayName: "Webhooks___StyledStyledButton",
  componentId: "sc-9r3b0d-0"
})(["", ""], function (p) {
  return p.$_css;
});
;// CONCATENATED MODULE: ./components/edit-collective/EditUserEmailForm.js











var EditUserEmailForm_templateObject, EditUserEmailForm_templateObject2;



function EditUserEmailForm_createSuper(Derived) { var hasNativeReflectConstruct = EditUserEmailForm_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function EditUserEmailForm_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var EditUserEmailForm = /*#__PURE__*/function (_React$Component) {
  inherits_default()(EditUserEmailForm, _React$Component);

  var _super = EditUserEmailForm_createSuper(EditUserEmailForm);

  function EditUserEmailForm() {
    var _this;

    classCallCheck_default()(this, EditUserEmailForm);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    defineProperty_default()(assertThisInitialized_default()(_this), "state", {
      step: 'initial',
      newEmail: null,
      error: null,
      isSubmitting: false,
      isResendingConfirmation: false,
      isTouched: false
    });

    return _this;
  }

  createClass_default()(EditUserEmailForm, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.loadInitialState();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(oldProps) {
      if (oldProps.data.LoggedInUser !== this.props.data.LoggedInUser) {
        this.loadInitialState();
      }
    }
  }, {
    key: "loadInitialState",
    value: function loadInitialState() {
      var LoggedInUser = this.props.data.LoggedInUser;

      if (!LoggedInUser) {
        return;
      }

      this.setState({
        step: LoggedInUser.emailWaitingForValidation ? 'success' : 'initial',
        newEmail: LoggedInUser.emailWaitingForValidation
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          data = _this$props.data,
          updateUserEmail = _this$props.updateUserEmail;
      var loading = data.loading,
          _data$LoggedInUser = data.LoggedInUser,
          LoggedInUser = _data$LoggedInUser === void 0 ? {
        email: ''
      } : _data$LoggedInUser;
      var _this$state = this.state,
          step = _this$state.step,
          newEmail = _this$state.newEmail,
          error = _this$state.error,
          isSubmitting = _this$state.isSubmitting,
          isResendingConfirmation = _this$state.isResendingConfirmation,
          isTouched = _this$state.isTouched;
      var isValid = newEmail && (0,validator.isEmail)(newEmail);
      var isDone = step === 'already-sent' || step === 'success';
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        mb: 50,
        "data-cy": "EditUserEmailForm",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "User.EmailAddress",
            defaultMessage: [{
              "type": 0,
              "value": "Email address"
            }]
          })
        }), LoggedInUser ? /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
            name: "email",
            type: "email",
            value: isNil_default()(newEmail) ? LoggedInUser.email : newEmail,
            mr: 3,
            my: 2,
            disabled: !data.LoggedInUser || loading,
            onChange: function onChange(e) {
              _this2.setState({
                step: 'form',
                error: null,
                newEmail: e.target.value,
                isTouched: true
              });
            },
            onBlur: function onBlur() {
              if (newEmail && !isValid) {
                _this2.setState({
                  error: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "error.email.invalid",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Invalid email address"
                    }]
                  })
                });
              }
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            my: 2,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              minWidth: 180,
              disabled: !isTouched || !newEmail || !isValid || isDone,
              loading: isSubmitting,
              mr: 2,
              onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
                var _yield$updateUserEmai, _data;

                return regenerator_default().wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        _this2.setState({
                          isSubmitting: true
                        });

                        _context.prev = 1;
                        _context.next = 4;
                        return updateUserEmail({
                          variables: {
                            email: newEmail
                          }
                        });

                      case 4:
                        _yield$updateUserEmai = _context.sent;
                        _data = _yield$updateUserEmai.data;

                        _this2.setState({
                          step: LoggedInUser.email === newEmail ? 'initial' : 'success',
                          error: null,
                          newEmail: _data.updateUserEmail.emailWaitingForValidation || LoggedInUser.email,
                          isSubmitting: false,
                          isTouched: false
                        });

                        _context.next = 12;
                        break;

                      case 9:
                        _context.prev = 9;
                        _context.t0 = _context["catch"](1);

                        _this2.setState({
                          error: _context.t0.message,
                          isSubmitting: false
                        });

                      case 12:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee, null, [[1, 9]]);
              })),
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "EditUserEmailForm.submit",
                defaultMessage: [{
                  "type": 0,
                  "value": "Confirm new email"
                }]
              })
            }), isDone && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              minWidth: 180,
              disabled: step === 'already-sent',
              loading: isResendingConfirmation,
              onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
                return regenerator_default().wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        _this2.setState({
                          isResendingConfirmation: true
                        });

                        _context2.prev = 1;
                        _context2.next = 4;
                        return updateUserEmail({
                          variables: {
                            email: newEmail
                          }
                        });

                      case 4:
                        _this2.setState({
                          isResendingConfirmation: false,
                          step: 'already-sent',
                          error: null
                        });

                        _context2.next = 10;
                        break;

                      case 7:
                        _context2.prev = 7;
                        _context2.t0 = _context2["catch"](1);

                        _this2.setState({
                          error: _context2.t0.message,
                          isResendingConfirmation: false
                        });

                      case 10:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2, null, [[1, 7]]);
              })),
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "EditUserEmailForm.reSend",
                defaultMessage: [{
                  "type": 0,
                  "value": "Re-send confirmation"
                }]
              })
            })]
          })]
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 63
        }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          p: 2,
          color: "red.500",
          fontSize: "12px",
          children: error
        }), isDone && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            display: "inline-block",
            type: "success",
            fontSize: "12px",
            withIcon: true,
            mt: 2,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "EditUserEmailForm.success",
              defaultMessage: [{
                "type": 0,
                "value": "An email with a confirmation link has been sent to "
              }, {
                "type": 1,
                "value": "email"
              }, {
                "type": 0,
                "value": ". Please click the link to validate your email address."
              }],
              values: {
                email: /*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
                  children: newEmail
                })
              }
            })
          })
        })]
      });
    }
  }]);

  return EditUserEmailForm;
}(react.Component);

var loggedInUserEmailQuery = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(EditUserEmailForm_templateObject || (EditUserEmailForm_templateObject = taggedTemplateLiteral_default()(["\n  query LoggedInUserEmail {\n    LoggedInUser {\n      id\n      email\n      emailWaitingForValidation\n    }\n  }\n"])));
var addLoggedInUserEmailData = (0,hoc_graphql/* graphql */.B)(loggedInUserEmailQuery, {
  options: {
    fetchPolicy: 'network-only'
  }
});
var updateUserEmailMutation = (0,helpers/* gqlV1 */.N)
/* GraphQL */
(EditUserEmailForm_templateObject2 || (EditUserEmailForm_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation UpdateUserEmail($email: String!) {\n    updateUserEmail(email: $email) {\n      id\n      email\n      emailWaitingForValidation\n    }\n  }\n"])));
var addUpdateUserEmailMutation = (0,hoc_graphql/* graphql */.B)(updateUserEmailMutation, {
  name: 'updateUserEmail'
});
EditUserEmailForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "loadInitialState",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditUserEmailForm",
  "props": {
    "updateUserEmail": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "loading": {
            "name": "bool",
            "required": false
          },
          "LoggedInUser": {
            "name": "shape",
            "value": {
              "email": {
                "name": "string",
                "required": true
              },
              "emailWaitingForValidation": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "updateUserEmail": {
            "name": "shape",
            "value": {
              "emailWaitingForValidation": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var edit_collective_EditUserEmailForm = (addUpdateUserEmailMutation(addLoggedInUserEmailData(EditUserEmailForm)));
// EXTERNAL MODULE: ./components/edit-collective/SocialLinksFormField.tsx
var SocialLinksFormField = __webpack_require__(4496);
;// CONCATENATED MODULE: ./components/edit-collective/Form.js
















function Form_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function Form_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? Form_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : Form_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function Form_createSuper(Derived) { var hasNativeReflectConstruct = Form_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }

function Form_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



























 // Actions



 // Sections




















 // Other Components





var Form_COLLECTIVE = constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE,
    Form_FUND = constants_collectives/* CollectiveType.FUND */.eV.FUND,
    Form_PROJECT = constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT,
    Form_EVENT = constants_collectives/* CollectiveType.EVENT */.eV.EVENT,
    Form_ORGANIZATION = constants_collectives/* CollectiveType.ORGANIZATION */.eV.ORGANIZATION,
    Form_USER = constants_collectives/* CollectiveType.USER */.eV.USER;

var EditCollectiveForm = /*#__PURE__*/function (_React$Component) {
  inherits_default()(EditCollectiveForm, _React$Component);

  var _super = Form_createSuper(EditCollectiveForm);

  function EditCollectiveForm(props) {
    var _this;

    classCallCheck_default()(this, EditCollectiveForm);

    _this = _super.call(this, props);

    defineProperty_default()(assertThisInitialized_default()(_this), "getApplicableTaxesFields", function () {
      var intl = _this.props.intl;
      var collective = _this.state.collective;
      var fields = [];

      var country = get_default()(collective, 'location.country') || get_default()(collective.host, 'location.country');

      var taxes = (0,dist.getApplicableTaxesForCountry)(country);

      if (taxes.includes(dist.TaxType.VAT)) {
        var getVATOptions = function getVATOptions() {
          var options = [{
            value: '',
            label: intl.formatMessage(_this.messages['VAT.None'])
          }, {
            value: VAT_OPTIONS.HOST,
            label: intl.formatMessage(_this.messages['VAT.Host'])
          }];
          return collective.isHost ? options : [].concat(options, [{
            value: VAT_OPTIONS.OWN,
            label: intl.formatMessage(_this.messages['VAT.Own'])
          }]);
        };

        fields.push({
          name: 'VAT',
          type: 'select',
          defaultValue: get_default()(collective, 'settings.VAT.type') || VAT_OPTIONS.HOST,
          when: function when() {
            return collective.isHost || constants_collectives/* AccountTypesWithHost.includes */.Zs.includes(collective.type);
          },
          options: getVATOptions()
        }, {
          name: 'VAT-number',
          type: 'string',
          placeholder: 'FRXX999999999',
          defaultValue: get_default()(collective, 'settings.VAT.number'),
          when: function when() {
            var collective = _this.state.collective;

            if (collective.type === Form_COLLECTIVE || collective.type === Form_EVENT) {
              // Collectives can set a VAT number if configured
              return get_default()(collective, 'settings.VAT.type') === VAT_OPTIONS.OWN;
            } else {
              return true;
            }
          }
        });
      } else if (taxes.includes(dist.TaxType.GST) && collective.isHost) {
        fields.push({
          name: 'GST-number',
          type: 'string',
          placeholder: '9429037631147',
          defaultValue: get_default()(collective, 'settings.GST.number')
        });
      }

      return fields;
    });

    _this.state = Form_objectSpread({}, _this.getStateFromProps(props));
    _this.handleSubmit = _this.handleSubmit.bind(assertThisInitialized_default()(_this));
    _this.handleChange = _this.handleChange.bind(assertThisInitialized_default()(_this));
    var _collective = _this.state.collective;
    _this.messages = (0,lib.defineMessages)({
      loading: {
        id: "loading",
        defaultMessage: [{
          "type": 0,
          "value": "loading"
        }]
      },
      save: {
        id: "save",
        defaultMessage: [{
          "type": 0,
          "value": "Save"
        }]
      },
      saved: {
        id: "saved",
        defaultMessage: [{
          "type": 0,
          "value": "Saved"
        }]
      },
      'event.create.btn': {
        id: "event.create.btn",
        defaultMessage: [{
          "type": 0,
          "value": "Create Event"
        }]
      },
      'slug.label': {
        id: "collective.changeUrl.label",
        defaultMessage: [{
          "type": 0,
          "value": "URL slug"
        }]
      },
      'type.label': {
        id: "collective.type.label",
        defaultMessage: [{
          "type": 0,
          "value": "Type"
        }]
      },
      'name.label': {
        id: "Fields.displayName",
        defaultMessage: [{
          "type": 0,
          "value": "Display name"
        }]
      },
      'name.description': {
        id: "Fields.name.description",
        defaultMessage: [{
          "type": 0,
          "value": "Display names are public and used wherever this profile appears publicly, like contributions, comments on updates, public info on expenses, etc."
        }]
      },
      legalName: {
        id: "LegalName",
        defaultMessage: [{
          "type": 0,
          "value": "Legal Name"
        }]
      },
      'legalName.description': {
        id: "editCollective.legalName.description",
        defaultMessage: [{
          "type": 0,
          "value": "Legal names are private and used in receipts, tax forms, payment details on expenses, and other non-public contexts. Legal names are only visible to admins."
        }]
      },
      optional: {
        id: "OptionalFieldLabel",
        defaultMessage: [{
          "type": 1,
          "value": "field"
        }, {
          "type": 0,
          "value": " (optional)"
        }]
      },
      examples: {
        id: "examples",
        defaultMessage: [{
          "type": 0,
          "value": "e.g., "
        }, {
          "type": 1,
          "value": "examples"
        }]
      },
      'tags.label': {
        id: "Tags",
        defaultMessage: [{
          "type": 0,
          "value": "Tags"
        }]
      },
      'tos.label': {
        id: "host.tos",
        defaultMessage: [{
          "type": 0,
          "value": "Terms of fiscal hosting"
        }]
      },
      'tos.description': {
        id: "collective.tos.description",
        defaultMessage: [{
          "type": 0,
          "value": "Link to the terms under which this Host collects and holds funds."
        }]
      },
      'tags.description': {
        id: "collective.tags.edit.description",
        defaultMessage: [{
          "type": 0,
          "value": "Help people find you"
        }]
      },
      'tags.input.placeholder': {
        id: "collective.tags.input.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "+ Add tags"
        }]
      },
      'company.label': {
        id: "collective.company.label",
        defaultMessage: [{
          "type": 0,
          "value": "company"
        }]
      },
      'company.description': {
        id: "collective.company.description",
        defaultMessage: [{
          "type": 0,
          "value": "Start with @ to reference an organization (e.g., @airbnb)"
        }]
      },
      'amount.label': {
        id: "Fields.amount",
        defaultMessage: [{
          "type": 0,
          "value": "Amount"
        }]
      },
      'description.label': {
        id: "collective.description.label",
        defaultMessage: [{
          "type": 0,
          "value": "Short description"
        }]
      },
      'expensePolicy.label': {
        id: "editCollective.menu.expenses",
        defaultMessage: [{
          "type": 0,
          "value": "Expenses Policy"
        }]
      },
      'expensePolicy.description': {
        id: "collective.expensePolicy.description",
        defaultMessage: [{
          "type": 0,
          "value": "It can be daunting to file an expense if you're not sure what's allowed. Provide a clear policy to guide expense submitters."
        }]
      },
      'expensePolicy.placeholder': {
        id: "collective.expensePolicy.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "E.g. approval criteria, limitations, or required documentation."
        }]
      },
      'startsAt.label': {
        id: "startDateAndTime",
        defaultMessage: [{
          "type": 0,
          "value": "start date and time"
        }]
      },
      'endsAt.label': {
        id: "event.endsAt.label",
        defaultMessage: [{
          "type": 0,
          "value": "end date and time"
        }]
      },
      'image.label': {
        id: "collective.image.label",
        defaultMessage: [{
          "type": 0,
          "value": "Avatar"
        }]
      },
      'backgroundImage.label': {
        id: "collective.backgroundImage.label",
        defaultMessage: [{
          "type": 0,
          "value": "Cover image"
        }]
      },
      'website.label': {
        id: "Fields.website",
        defaultMessage: [{
          "type": 0,
          "value": "Website"
        }]
      },
      'application.label': {
        id: "collective.application.label",
        defaultMessage: [{
          "type": 0,
          "value": "Open to Applications"
        }]
      },
      'application.description': {
        id: "collective.application.description",
        defaultMessage: [{
          "type": 0,
          "value": "Enable new Collectives to apply to join your Fiscal Host"
        }]
      },
      'application.message.label': {
        id: "application.message.label",
        defaultMessage: [{
          "type": 0,
          "value": "Application instructions"
        }]
      },
      'application.message.description': {
        id: "application.message.description",
        defaultMessage: [{
          "type": 0,
          "value": "These instructions appear above the text box that applicants see (1000 characters max)"
        }]
      },
      'application.message.defaultValue': {
        id: "ApplyToHost.DefaultMessage",
        defaultMessage: [{
          "type": 0,
          "value": "Explain what information applicants should submit for your review (plain text, 3000 characters max), or direct them to an external application form."
        }]
      },
      'hostFeePercent.label': {
        id: "HostFee",
        defaultMessage: [{
          "type": 0,
          "value": "Host fee"
        }]
      },
      'hostFeePercent.description': {
        id: "collective.hostFeePercent.description",
        defaultMessage: [{
          "type": 0,
          "value": "Fee on financial contributions to Collectives you fiscally host."
        }]
      },
      'hostFeePercent.warning': {
        id: "collective.hostFeePercent.warning",
        defaultMessage: [{
          "type": 0,
          "value": "Open Collective will charge 15% of your Host Fee revenue as its Platform Fee."
        }]
      },
      'hostFeePercent.warning2': {
        id: "newPricing.tab.hostFeeChargeExample",
        defaultMessage: [{
          "type": 0,
          "value": "If your Host fee is 10% and your Collectives bring in $1,000, your Platform fee will be $15. If you host fee is 0%, your Platform fee will be 0."
        }]
      },
      'location.label': {
        id: "SectionLocation.Title",
        defaultMessage: [{
          "type": 0,
          "value": "Location"
        }]
      },
      'country.label': {
        id: "collective.country.label",
        defaultMessage: [{
          "type": 0,
          "value": "Country"
        }]
      },
      'currency.label': {
        id: "Currency",
        defaultMessage: [{
          "type": 0,
          "value": "Currency"
        }]
      },
      'currency.placeholder': {
        id: "collective.currency.placeholder",
        defaultMessage: [{
          "type": 0,
          "value": "Select currency"
        }]
      },
      'address.label': {
        id: "collective.address.label",
        defaultMessage: [{
          "type": 0,
          "value": "Address"
        }]
      },
      'VAT.label': {
        id: "EditCollective.VAT",
        defaultMessage: [{
          "type": 0,
          "value": "VAT settings"
        }]
      },
      'VAT.description': {
        id: "EditCollective.VAT.Description",
        defaultMessage: [{
          "type": 0,
          "value": "European Value Added Tax"
        }]
      },
      'VAT.None': {
        id: "EditCollective.VAT.None",
        defaultMessage: [{
          "type": 0,
          "value": "Not subject to VAT"
        }]
      },
      'VAT.Host': {
        id: "EditCollective.VAT.Host",
        defaultMessage: [{
          "type": 0,
          "value": "Use the host VAT settings"
        }]
      },
      'VAT.Own': {
        id: "EditCollective.VAT.Own",
        defaultMessage: [{
          "type": 0,
          "value": "Use my own VAT number"
        }]
      },
      'VAT-number.label': {
        id: "EditCollective.VATNumber",
        defaultMessage: [{
          "type": 0,
          "value": "VAT number"
        }]
      },
      'VAT-number.description': {
        id: "EditCollective.VATNumber.Description",
        defaultMessage: [{
          "type": 0,
          "value": "Your European Value Added Tax (VAT) number"
        }]
      },
      'GST-number.label': {
        id: "EditCollective.GSTNumber",
        defaultMessage: [{
          "type": 0,
          "value": "GST number"
        }]
      },
      'privateInstructions.label': {
        id: "event.privateInstructions.label",
        defaultMessage: [{
          "type": 0,
          "value": "Private instructions"
        }]
      },
      privateInstructionsDescription: {
        id: "event.privateInstructions.description",
        defaultMessage: [{
          "type": 0,
          "value": "These instructions will be provided by email to the participants."
        }]
      },
      inValidDateError: {
        id: "6DCLcI",
        defaultMessage: [{
          "type": 0,
          "value": "Please enter a valid date"
        }]
      }
    });
    _collective.backgroundImage = _collective.backgroundImage || constants_collectives/* defaultBackgroundImage */.am[_collective.type];
    return _this;
  }

  createClass_default()(EditCollectiveForm, [{
    key: "getStateFromProps",
    value: function getStateFromProps(props) {
      var collective = Form_objectSpread({}, props.collective || {});

      collective.slug = collective.slug ? collective.slug.replace(/.*\//, '') : '';
      collective.tos = get_default()(collective, 'settings.tos'); // TODO Remove this once tier legacy is removed

      var tiers = collective.tiers && collective.tiers.filter(function (tier) {
        return tier.type !== tiers_types/* TierTypes.TICKET */.x$.TICKET;
      });
      var tickets = collective.tiers && collective.tiers.filter(function (tier) {
        return tier.type === tiers_types/* TierTypes.TICKET */.x$.TICKET;
      });
      return {
        modified: false,
        collective: collective,
        tiers: tiers.length === 0 ? [] : tiers,
        tickets: tickets.length === 0 ? [] : tickets,
        validStartDate: true,
        validEndDate: true,
        isValidSocialLinks: true
      };
    }
  }, {
    key: "handleChange",
    value: function handleChange(fieldname, value) {
      var _this2 = this;

      this.setState(function (state) {
        var collective = cloneDeep_default()(state.collective); // GraphQL schema has address embedded within location
        // mutation expects { location: { address: '' } }


        if (['address', 'country'].includes(fieldname)) {
          collective.location[fieldname] = value;
        } else if (fieldname === 'VAT') {
          set_default()(collective, 'settings.VAT.type', value);
        } else if (fieldname === 'VAT-number') {
          set_default()(collective, 'settings.VAT.number', value);
        } else if (fieldname === 'GST-number') {
          if (!value) {
            set_default()(collective, 'settings.GST', null);
          } else {
            set_default()(collective, 'settings.GST.number', value);
          }
        } else if (fieldname === 'application') {
          set_default()(collective, 'settings.apply', value);
        } else if (fieldname === 'application.message') {
          set_default()(collective, 'settings.applyMessage', value);
        } else if (fieldname === 'startsAt' && collective.type === Form_EVENT) {
          var isValid = dayjs_min_default()(value).isValid();

          _this2.setState({
            validStartDate: isValid
          });

          if (isValid) {
            collective[fieldname] = (0,date_utils/* convertDateToApiUtc */.Zz)(value, collective.timezone);
          }
        } else if (fieldname === 'endsAt' && collective.type === Form_EVENT) {
          var _isValid = dayjs_min_default()(value).isValid();

          _this2.setState({
            validEndDate: _isValid
          });

          if (_isValid) {
            collective[fieldname] = (0,date_utils/* convertDateToApiUtc */.Zz)(value, collective.timezone);
          }
        } else if (fieldname === 'timezone' && collective.type === Form_EVENT) {
          if (value) {
            var timezone = collective.timezone;
            var startsAt = collective.startsAt;
            var endsAt = collective.endsAt;
            collective.startsAt = (0,date_utils/* convertDateToApiUtc */.Zz)((0,date_utils/* convertDateFromApiUtc */.cq)(startsAt, timezone), value);
            collective.endsAt = (0,date_utils/* convertDateToApiUtc */.Zz)((0,date_utils/* convertDateFromApiUtc */.cq)(endsAt, timezone), value);
            collective.timezone = value;
          }
        } else if (fieldname === 'socialLinks') {
          var _value$filter;

          var _isValid2 = (value === null || value === void 0 ? void 0 : (_value$filter = value.filter(function (l) {
            return !(0,utils/* isValidUrl */.jv)(l.url);
          })) === null || _value$filter === void 0 ? void 0 : _value$filter.length) === 0;

          _this2.setState({
            isValidSocialLinks: _isValid2
          });

          set_default()(collective, 'socialLinks', value);
        } else {
          set_default()(collective, fieldname, value);
        }

        return {
          collective: collective,
          modified: true
        };
      });
    }
  }, {
    key: "handleSubmit",
    value: function () {
      var _handleSubmit = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var collective;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                collective = Form_objectSpread({}, this.state.collective); // Add Tiers and Tickets

                collective.tiers = [];

                if (find_default()(this.state.tiers, 'name')) {
                  collective.tiers = toConsumableArray_default()(this.state.tiers);
                }

                if (find_default()(this.state.tickets, 'name')) {
                  collective.tiers = [].concat(toConsumableArray_default()(collective.tiers), toConsumableArray_default()(this.state.tickets));
                }

                this.props.onSubmit(collective);
                this.setState({
                  modified: false
                });

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function handleSubmit() {
        return _handleSubmit.apply(this, arguments);
      }

      return handleSubmit;
    }()
  }, {
    key: "getFieldDefaultValue",
    value: function getFieldDefaultValue(field) {
      if (field.defaultValue !== undefined) {
        return field.defaultValue;
      } else if (['address', 'country'].includes(field.name)) {
        return get_default()(this.state.collective.location, field.name);
      }

      return this.state.collective[field.name];
    }
  }, {
    key: "getMenuSelectedSection",
    value: function getMenuSelectedSection(section) {
      if (['gift-cards-create', 'gift-cards-send', 'gift-cards'].includes(section)) {
        return ALL_SECTIONS.GIFT_CARDS;
      } else {
        return section;
      }
    }
  }, {
    key: "renderSection",
    value: function renderSection(section) {
      var _this$props = this.props,
          collective = _this$props.collective,
          LoggedInUser = _this$props.LoggedInUser;

      switch (section) {
        case ALL_SECTIONS.INFO:
          return null;

        case ALL_SECTIONS.COLLECTIVE_GOALS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_CollectiveGoals, {
            collective: collective,
            currency: collective.currency
          });

        case ALL_SECTIONS.COLLECTIVE_PAGE:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_EditCollectivePage, {
            collective: collective
          });

        case ALL_SECTIONS.CONNECTED_ACCOUNTS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_ConnectedAccounts, {
            collective: collective,
            connectedAccounts: collective.connectedAccounts
          });

        case ALL_SECTIONS.EXPENSES:
          return null;

        case ALL_SECTIONS.EXPORT:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Export, {
            collective: collective
          });

        case ALL_SECTIONS.HOST:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Host, {
            collective: collective,
            LoggedInUser: LoggedInUser,
            editCollectiveMutation: this.props.onSubmit
          });

        case ALL_SECTIONS.PAYMENT_METHODS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(PaymentMethods, {
            collectiveSlug: collective.slug
          });

        case ALL_SECTIONS.TIERS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Tiers, {
            collective: collective,
            types: ['TIER', 'MEMBERSHIP', 'SERVICE', 'PRODUCT', 'DONATION']
          });

        case ALL_SECTIONS.TICKETS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Tickets, {
            collective: collective
          });

        case ALL_SECTIONS.GIFT_CARDS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_GiftCards, {
            collectiveId: collective.id,
            collectiveSlug: collective.slug
          });

        case 'gift-cards-create':
        case 'gift-cards-send':
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            mt: 3,
            flexDirection: "column",
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              mb: 4,
              pb: 4,
              borderBottom: "1px solid #E8E9EB",
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
              flexWrap: "wrap",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                href: "/".concat(collective.slug, "/admin/gift-cards"),
                children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
                  "data-cy": "back-to-giftcards-list",
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(ArrowBack_esm/* ArrowBack */.x, {
                    size: "1em"
                  }), ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "giftCards.returnToEdit",
                    defaultMessage: [{
                      "type": 0,
                      "value": "Back to Gift Cards list"
                    }]
                  })]
                })
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
                href: "https://docs.opencollective.com/help/financial-contributors/organizations/gift-cards#faq",
                openInNewTab: true,
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(InfoCircle_esm/* InfoCircle */.Z, {
                  size: "1em"
                }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "Giftcard.learnMore",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Learn more about Gift Cards"
                  }]
                })]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_CreateGiftCardsForm, {
              collectiveId: collective.id,
              collectiveSlug: collective.slug,
              collectiveSettings: collective.settings,
              currency: collective.currency
            })]
          });

        case ALL_SECTIONS.WEBHOOKS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Webhooks, {
            collectiveSlug: collective.slug
          });

        case ALL_SECTIONS.AUTHORIZED_APPS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(AuthorizedApps, {});

        case ALL_SECTIONS.FOR_DEVELOPERS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_ForDevelopers, {
            account: collective
          });

        case ALL_SECTIONS.ACTIVITY_LOG:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(ActivityLog/* default */.Z, {
            accountSlug: collective.slug
          });

        case ALL_SECTIONS.ADVANCED:
          return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            children: [collective.type === Form_USER && /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_EditUserEmailForm, {}), [Form_COLLECTIVE, Form_FUND, Form_PROJECT, Form_EVENT].includes(collective.type) && /*#__PURE__*/(0,jsx_runtime.jsx)(actions_EmptyBalance, {
              collective: collective,
              LoggedInUser: LoggedInUser
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Archive, {
              collective: collective
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Delete, {
              collective: collective
            })]
          });
        // Fiscal Hosts

        case ALL_SECTIONS.FISCAL_HOSTING:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_FiscalHosting, {
            collective: collective,
            LoggedInUser: LoggedInUser
          });

        case ALL_SECTIONS.RECEIVING_MONEY:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_ReceivingMoney, {
            collective: collective
          });

        case ALL_SECTIONS.PENDING_ORDERS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(OrdersWithData/* default */.Z, {
            accountSlug: collective.slug,
            status: order_status/* ORDER_STATUS.PENDING */.D.PENDING,
            title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "PendingBankTransfers",
              defaultMessage: [{
                "type": 0,
                "value": "Pending bank transfers"
              }]
            }),
            showPlatformTip: true
          });

        case ALL_SECTIONS.SENDING_MONEY:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SendingMoney, {
            collective: collective
          });

        case ALL_SECTIONS.SECURITY:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Security, {
            collective: collective
          });
        // 2FA

        case ALL_SECTIONS.USER_SECURITY:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_UserSecurity, {
            slug: collective.slug
          });
        // Payment Receipts

        case ALL_SECTIONS.PAYMENT_RECEIPTS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_PaymentReceipts, {
            collective: collective
          });
        // Policies and moderation

        case ALL_SECTIONS.POLICIES:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_Policies, {
            collective: collective
          });
        // Policies and moderation

        case ALL_SECTIONS.CUSTOM_EMAIL:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(sections_CustomMessage, {
            collective: collective
          });

        case ALL_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(HostVirtualCardsSettings, {
            collective: collective
          });

        case ALL_SECTIONS.VIRTUAL_CARDS:
          return /*#__PURE__*/(0,jsx_runtime.jsx)(virtual_cards_VirtualCards, {
            collective: collective
          });

        default:
          return null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$state$collectiv,
          _this3 = this,
          _this$state$collectiv2;

      var _this$props2 = this.props,
          collective = _this$props2.collective,
          status = _this$props2.status,
          intl = _this$props2.intl,
          router = _this$props2.router;

      var section = this.props.section || get_default()(router, 'query.section', 'info');

      var isNew = !(collective && collective.id);
      var submitBtnMessageId = isNew ? 'event.create.btn' : 'save';

      if (['loading', 'saved'].includes(status)) {
        submitBtnMessageId = status;
      }

      var isEvent = collective.type === Form_EVENT;
      var isUser = collective.type === Form_USER;
      var currencyOptions = currency/* Currency.map */.F.map(function (c) {
        return {
          value: c,
          label: c
        };
      });
      var submitBtnLabel = this.messages[submitBtnMessageId] && intl.formatMessage(this.messages[submitBtnMessageId]);
      this.fields = {
        info: [{
          name: 'name',
          placeholder: '',
          maxLength: 255
        }, {
          name: 'legalName',
          label: intl.formatMessage(this.messages.optional, {
            field: intl.formatMessage(this.messages.legalName)
          }),
          placeholder: intl.formatMessage(this.messages.examples, {
            examples: isUser ? 'Maria Garcia' : 'Salesforce, Inc., Airbnb, Inc.'
          }),
          maxLength: 255,
          when: function when() {
            return isUser || collective.type === Form_ORGANIZATION || collective.isHost;
          },
          isPrivate: true
        }, {
          name: 'company',
          placeholder: '',
          maxLength: 255,
          when: function when() {
            return isUser;
          }
        }, {
          name: 'description',
          type: 'text',
          maxLength: 255,
          placeholder: ''
        }, {
          name: 'slug',
          pre: 'https://opencollective.com/',
          placeholder: '',
          when: function when() {
            return collective.type !== Form_EVENT;
          }
        }, {
          name: 'address',
          placeholder: '',
          maxLength: 255,
          type: 'textarea',
          when: function when() {
            return collective.type !== Form_EVENT;
          } // TODO: Use structured here to be consistent with other places

        }, {
          name: 'country',
          type: 'country',
          placeholder: 'Select country',
          when: function when() {
            return collective.type !== Form_EVENT;
          }
        }, {
          name: 'startsAt',
          type: 'datetime-local',
          defaultValue: dayjs_min_default()(collective.startsAt).tz(collective.timezone).format('YYYY-MM-DDTHH:mm'),
          when: function when() {
            return collective.type === Form_EVENT;
          },
          error: !this.state.validStartDate ? intl.formatMessage(this.messages.inValidDateError) : null,
          required: true
        }, {
          name: 'endsAt',
          type: 'datetime-local',
          defaultValue: dayjs_min_default()(collective.endsAt).tz(collective.timezone).format('YYYY-MM-DDTHH:mm'),
          when: function when() {
            return collective.type === Form_EVENT;
          },
          error: !this.state.validEndDate ? intl.formatMessage(this.messages.inValidDateError) : null,
          required: true
        }, {
          name: 'timezone',
          type: 'TimezonePicker',
          when: function when() {
            return collective.type === Form_EVENT;
          }
        }, {
          name: 'location',
          placeholder: '',
          type: 'location',
          when: function when() {
            return collective.type === Form_EVENT;
          }
        }, {
          name: 'privateInstructions',
          description: intl.formatMessage(this.messages.privateInstructionsDescription),
          type: 'textarea',
          maxLength: 10000,
          when: function when() {
            return collective.type === Form_EVENT;
          }
        }, {
          name: 'currency',
          type: 'select',
          defaultValue: get_default()(this.state.collective, 'currency'),
          options: currencyOptions,
          description: [Form_COLLECTIVE, Form_FUND].includes(collective.type) && collective.isActive || collective.isHost ? intl.formatMessage({
            id: "collective.currency.warning",
            defaultMessage: [{
              "type": 0,
              "value": "Active Collectives, Funds and Fiscal Hosts can't edit their currency. Contact "
            }, {
              "type": 8,
              "value": "SupportLink",
              "children": [{
                "type": 0,
                "value": "support"
              }]
            }, {
              "type": 0,
              "value": " if this is an issue."
            }]
          }, {
            SupportLink: I18nFormatters/* I18nSupportLink */.wl
          }) : null,
          when: function when() {
            return ![Form_EVENT, Form_PROJECT].includes(collective.type);
          },
          // Active Collectives, Funds and Fiscal Hosts can't edit their currency.
          disabled: [Form_COLLECTIVE, Form_FUND].includes(collective.type) && collective.isActive || collective.isHost ? true : false
        }].concat(toConsumableArray_default()(this.getApplicableTaxesFields()), [{
          name: 'tags',
          maxLength: 128,
          type: 'collective-tags',
          placeholder: intl.formatMessage(this.messages['tags.input.placeholder']),
          when: function when() {
            return ![Form_EVENT, Form_PROJECT, Form_FUND].includes(collective.type);
          }
        }]),
        'fiscal-hosting': [{
          name: 'application',
          className: 'horizontal',
          type: 'switch',
          defaultValue: get_default()(this.state.collective, 'settings.apply'),
          when: function when() {
            return collective.isHost && (collective.type === Form_ORGANIZATION || collective.settings.apply);
          }
        }, {
          name: 'application.message',
          className: 'horizontal',
          type: 'textarea',
          defaultValue: get_default()(this.state.collective, 'settings.applyMessage'),
          placeholder: intl.formatMessage(this.messages['application.message.defaultValue']),
          disabled: !((_this$state$collectiv = this.state.collective.settings) !== null && _this$state$collectiv !== void 0 && _this$state$collectiv.apply),
          maxLength: 1000,
          when: function when() {
            return collective.isHost && (collective.type === Form_ORGANIZATION || collective.settings.apply);
          }
        }, {
          name: 'hostFeePercent',
          type: 'number',
          className: 'horizontal',
          step: '0.01',
          post: '%',
          defaultValue: get_default()(this.state.collective, 'hostFeePercent'),
          when: function when() {
            return collective.isHost && (collective.type === Form_ORGANIZATION || collective.hostFeePercent !== 0);
          }
        }, {
          name: 'tos',
          type: 'text',
          placeholder: '',
          className: 'horizontal',
          defaultValue: get_default()(this.state.collective, 'settings.tos'),
          when: function when() {
            return collective.isHost && (collective.type === Form_ORGANIZATION || collective.settings.tos);
          }
        }]
      };
      Object.keys(this.fields).map(function (fieldname) {
        _this3.fields[fieldname] = _this3.fields[fieldname].map(function (field) {
          if (_this3.messages["".concat(field.name, ".label")]) {
            field.label = intl.formatMessage(_this3.messages["".concat(field.name, ".label")]);
          }

          if (_this3.messages["".concat(field.name, ".description")]) {
            field.description = intl.formatMessage(_this3.messages["".concat(field.name, ".description")], collective);
          }

          if (_this3.messages["".concat(field.name, ".placeholder")]) {
            field.placeholder = intl.formatMessage(_this3.messages["".concat(field.name, ".placeholder")]);
          }

          if (field.name === 'hostFeePercent' && collective.plan.name.includes('2021')) {
            field.description += " ";
            field.description += intl.formatMessage(_this3.messages["".concat(field.name, ".warning")], collective);
            field.description += " ";
            field.description += intl.formatMessage(_this3.messages["".concat(field.name, ".warning2")], collective);
          }

          return field;
        });
      });
      var fields = (this.fields[section] || []).filter(function (field) {
        return !field.when || field.when();
      });
      return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Form_StyledFlex, {
            flexDirection: "column",
            children: [fields && fields.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              className: "FormInputs",
              children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                className: "inputs",
                children: [fields.map(function (field) {
                  return /*#__PURE__*/(0,jsx_runtime.jsx)(InputField/* default */.Z, {
                    className: field.className,
                    defaultValue: _this3.getFieldDefaultValue(field),
                    validate: field.validate,
                    ref: field.name,
                    name: field.name,
                    label: field.label,
                    description: field.description,
                    options: field.options,
                    placeholder: field.placeholder,
                    type: field.type,
                    pre: field.pre,
                    post: field.post,
                    context: _this3.state.collective,
                    error: field.error,
                    onChange: function onChange(value) {
                      return _this3.handleChange(field.name, value);
                    },
                    onKeyDown: function onKeyDown(event) {
                      if ((field.name === 'startsAt' || field.name === 'endsAt') && event.key === 'Backspace') {
                        event.preventDefault();
                      }
                    },
                    disabled: field.disabled,
                    maxLength: field.maxLength,
                    isPrivate: field.isPrivate,
                    step: field.step,
                    min: field.min,
                    overflow: "hidden",
                    required: field.required
                  }, field.name);
                }), section === 'info' && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
                  p: 1,
                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                    my: "5px",
                    fontWeight: 700,
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                      id: "3bLmoU",
                      defaultMessage: [{
                        "type": 0,
                        "value": "Social Links"
                      }]
                    })
                  }), /*#__PURE__*/(0,jsx_runtime.jsx)(SocialLinksFormField/* default */.Z, {
                    value: (_this$state$collectiv2 = this.state.collective) === null || _this$state$collectiv2 === void 0 ? void 0 : _this$state$collectiv2.socialLinks,
                    touched: this.state.modified,
                    onChange: function onChange(value) {
                      return _this3.handleChange('socialLinks', value);
                    }
                  })]
                })]
              })
            }), fields && fields.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
              className: "actions",
              margin: "5rem auto 1rem",
              textAlign: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
                buttonStyle: "primary",
                type: "submit",
                onClick: this.handleSubmit,
                "data-cy": "collective-save",
                disabled: status === 'loading' || !this.state.modified || !this.state.validStartDate || !this.state.validEndDate || !this.state.isValidSocialLinks,
                children: submitBtnLabel
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
                className: "backToProfile",
                fontSize: "1.3rem",
                margin: "1rem",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
                  "data-cy": "edit-collective-back-to-profile",
                  href: isEvent ? "/".concat(collective.parentCollective.slug, "/events/").concat(collective.slug) : "/".concat(collective.slug),
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                    id: "QxN1ZU",
                    defaultMessage: [{
                      "type": 0,
                      "value": "View profile page"
                    }]
                  })
                })
              })]
            }), this.renderSection(section)]
          })
        })
      });
    }
  }]);

  return EditCollectiveForm;
}(react.Component);

EditCollectiveForm.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getStateFromProps",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "props",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleChange",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "fieldname",
      "type": null
    }, {
      "name": "value",
      "type": null
    }],
    "returns": null
  }, {
    "name": "handleSubmit",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "getFieldDefaultValue",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "field",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getMenuSelectedSection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "section",
      "type": null
    }],
    "returns": null
  }, {
    "name": "renderSection",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "section",
      "type": null
    }],
    "returns": null
  }, {
    "name": "getApplicableTaxesFields",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }],
  "displayName": "EditCollectiveForm",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "host": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "status": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "onSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "query": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var Form = ((0,next_router.withRouter)((0,injectIntl/* default */.ZP)(EditCollectiveForm)));

var Form_StyledFlex = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "Form___StyledFlex",
  componentId: "sc-u24m69-0"
})({
  flexGrow: 10,
  flexBasis: 600
});
;// CONCATENATED MODULE: ./components/admin-panel/sections/AccountSettings.js








function AccountSettings_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function AccountSettings_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? AccountSettings_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : AccountSettings_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }


















var AccountSettings = function AccountSettings(_ref) {
  var account = _ref.account,
      section = _ref.section;

  var _useLoggedInUser = (0,useLoggedInUser/* default */.Z)(),
      LoggedInUser = _useLoggedInUser.LoggedInUser,
      refetchLoggedInUser = _useLoggedInUser.refetchLoggedInUser;

  var router = (0,next_router.useRouter)();

  var _React$useState = react.useState({
    status: undefined,
    result: undefined
  }),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      state = _React$useState2[0],
      setState = _React$useState2[1];

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useQuery = (0,client.useQuery)(queries/* editCollectivePageQuery */.cd, {
    variables: {
      slug: account.slug
    },
    fetchPolicy: 'network-only',
    skip: !LoggedInUser
  }),
      data = _useQuery.data,
      loading = _useQuery.loading;

  var collective = data === null || data === void 0 ? void 0 : data.Collective;

  var _useMutation = (0,client.useMutation)(mutations/* editCollectiveMutation */.S),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      editCollective = _useMutation2[0];

  var handleEditCollective = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(updatedCollective) {
      var collective, collectiveFields, CollectiveInputType, response, _updatedCollective, currentSlug, _getErrorFromGraphqlE, errorMsg;

      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              collective = AccountSettings_objectSpread({}, updatedCollective);

              if (typeof collective.tags === 'string') {
                collective.tags = collective.tags.split(',').map(function (t) {
                  return t.trim();
                });
              }

              if (collective.backgroundImage === constants_collectives/* defaultBackgroundImage */.am[collective.type]) {
                delete collective.backgroundImage;
              }

              collective.settings = AccountSettings_objectSpread(AccountSettings_objectSpread({}, collective.settings), {}, {
                tos: collective.tos
              });
              delete collective.tos;
              collectiveFields = ['id', 'type', 'slug', 'name', 'legalName', 'company', 'description', 'longDescription', 'tags', 'expensePolicy', 'website', 'twitterHandle', 'repositoryUrl', 'socialLinks', 'location', 'privateInstructions', 'startsAt', 'endsAt', 'timezone', 'currency', 'quantity', 'ParentCollectiveId', 'HostCollectiveId', 'image', 'backgroundImage', 'hostFeePercent', 'isActive'];

              if (![ALL_SECTIONS.TIERS, ALL_SECTIONS.TICKETS].includes(section)) {
                collectiveFields.push('settings');
              }

              CollectiveInputType = pick_default()(collective, collectiveFields);

              if (isArray_default()(collective.tiers)) {
                CollectiveInputType.tiers = collective.tiers.map(function (tier) {
                  return pick_default()(tier, ['id', 'type', 'name', 'description', 'longDescription', 'useStandalonePage', 'amount', 'amountType', 'interval', 'maxQuantity', 'presets', 'minimumAmount', 'goal', 'button', 'invoiceTemplate', 'singleTicket']);
                });
              }

              if (isArray_default()(collective.socialLinks)) {
                CollectiveInputType.socialLinks = collective.socialLinks.map(function (sl) {
                  return omit_default()(sl, '__typename');
                });
              }

              if (collective.location === null) {
                CollectiveInputType.location = null;
              } else {
                CollectiveInputType.location = pick_default()(collective.location, ['name', 'address', 'lat', 'long', 'country']);
              }

              setState(AccountSettings_objectSpread(AccountSettings_objectSpread({}, state), {}, {
                status: 'loading'
              }));
              _context.prev = 12;
              _context.next = 15;
              return editCollective({
                variables: {
                  collective: CollectiveInputType
                },
                // It's heavy, but we need to refetch the information of the account after a mutation as fundamental
                // properties like its name or whether it's a fiscal host can change.
                refetchQueries: [{
                  query: adminPanelQuery,
                  variables: {
                    slug: account.slug
                  },
                  context: helpers/* API_V2_CONTEXT */.T
                }]
              });

            case 15:
              response = _context.sent;
              _updatedCollective = response.data.editCollective;
              setState(AccountSettings_objectSpread(AccountSettings_objectSpread({}, state), {}, {
                status: 'saved',
                result: {
                  error: null
                }
              }));
              currentSlug = router.query.slug;

              if (!(currentSlug !== _updatedCollective.slug)) {
                _context.next = 25;
                break;
              }

              router.replace({
                pathname: "/".concat(_updatedCollective.slug, "/admin"),
                query: AccountSettings_objectSpread({}, router.query)
              });
              _context.next = 23;
              return refetchLoggedInUser();

            case 23:
              _context.next = 26;
              break;

            case 25:
              setTimeout(function () {
                setState(AccountSettings_objectSpread(AccountSettings_objectSpread({}, state), {}, {
                  status: null
                }));
              }, 3000);

            case 26:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "Settings.Updated",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Settings updated."
                  }]
                })
              });
              _context.next = 34;
              break;

            case 29:
              _context.prev = 29;
              _context.t0 = _context["catch"](12);
              errorMsg = ((_getErrorFromGraphqlE = (0,errors/* getErrorFromGraphqlException */.H1)(_context.t0)) === null || _getErrorFromGraphqlE === void 0 ? void 0 : _getErrorFromGraphqlE.message) || /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "Settings.Updated.Fail",
                defaultMessage: [{
                  "type": 0,
                  "value": "Update failed."
                }]
              });
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                message: errorMsg
              });
              setState(AccountSettings_objectSpread(AccountSettings_objectSpread({}, state), {}, {
                status: null,
                result: {
                  error: errorMsg
                }
              }));

            case 34:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[12, 29]]);
    }));

    return function handleEditCollective(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
  } else if (!collective) {
    return null;
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(Form, {
    collective: collective,
    host: account === null || account === void 0 ? void 0 : account.host,
    LoggedInUser: LoggedInUser,
    onSubmit: handleEditCollective,
    status: state.status,
    section: section
  });
};

AccountSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AccountSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_AccountSettings = (AccountSettings);
;// CONCATENATED MODULE: ./components/admin-panel/sections/FinancialContributions.js




var FinancialContributions = function FinancialContributions(_ref) {
  var hostSlug = _ref.hostSlug;
  return /*#__PURE__*/(0,jsx_runtime.jsx)(OrdersWithData/* default */.Z, {
    accountSlug: hostSlug,
    showPlatformTip: true
  });
};

FinancialContributions.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FinancialContributions",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_FinancialContributions = (FinancialContributions);
// EXTERNAL MODULE: ./components/edit-collective/AssignVirtualCardModal.js + 1 modules
var AssignVirtualCardModal = __webpack_require__(64677);
;// CONCATENATED MODULE: ./components/admin-panel/sections/HostVirtualCards.js






var HostVirtualCards_templateObject;

function HostVirtualCards_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function HostVirtualCards_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? HostVirtualCards_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : HostVirtualCards_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }




















var hostVirtualCardsQuery = (0,graphql_tag_lib/* default */.ZP)(HostVirtualCards_templateObject || (HostVirtualCards_templateObject = taggedTemplateLiteral_default()(["\n  query HostedVirtualCards(\n    $slug: String\n    $limit: Int!\n    $offset: Int!\n    $state: String\n    $merchantAccount: AccountReferenceInput\n    $collectiveAccountIds: [AccountReferenceInput]\n  ) {\n    host(slug: $slug) {\n      id\n      legacyId\n      slug\n      name\n      imageUrl\n      currency\n      settings\n      hostedVirtualCards(\n        limit: $limit\n        offset: $offset\n        state: $state\n        merchantAccount: $merchantAccount\n        collectiveAccountIds: $collectiveAccountIds\n      ) {\n        totalCount\n        limit\n        offset\n        nodes {\n          id\n          name\n          last4\n          data\n          privateData\n          provider\n          spendingLimitAmount\n          spendingLimitInterval\n          spendingLimitRenewsOn\n          remainingLimit\n          currency\n          createdAt\n          account {\n            id\n            name\n            slug\n            imageUrl\n          }\n          assignee {\n            id\n            name\n            slug\n            imageUrl\n          }\n        }\n      }\n      hostedVirtualCardMerchants {\n        nodes {\n          id\n          type\n          slug\n          name\n          currency\n          location {\n            id\n            address\n            country\n          }\n          imageUrl(height: 64)\n        }\n      }\n      hostedVirtualCardCollectives {\n        totalCount\n        limit\n        offset\n        nodes {\n          id\n          slug\n          name\n          legacyId\n          imageUrl(height: 64)\n          ... on AccountWithParent {\n            parentAccount: parent {\n              id\n              slug\n              name\n              legacyId\n              imageUrl(height: 64)\n            }\n          }\n        }\n      }\n    }\n  }\n"])));
var AddCardPlaceholder = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "HostVirtualCards__AddCardPlaceholder",
  componentId: "sc-t74hwv-0"
})(["border-radius:20px;", ""], function (props) {
  return "border: 1px dashed ".concat(props.theme.colors.primary[500], ";");
});
var HostVirtualCards_VIRTUAL_CARDS_PER_PAGE = 6;

var HostVirtualCards_HostVirtualCards = function HostVirtualCards(props) {
  var router = (0,next_router.useRouter)();

  var routerQuery = omit_default()(router.query, ['slug', 'section']);

  var offset = parseInt(routerQuery.offset) || 0;
  var state = routerQuery.state,
      merchant = routerQuery.merchant,
      collectiveAccountIds = routerQuery.collectiveAccountIds;

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _useQuery = (0,client.useQuery)(hostVirtualCardsQuery, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      slug: props.hostSlug,
      limit: HostVirtualCards_VIRTUAL_CARDS_PER_PAGE,
      offset: offset,
      state: state,
      merchantAccount: {
        slug: merchant
      },
      collectiveAccountIds: collectiveAccountIds ? collectiveAccountIds.split(',').map(function (collectiveAccountId) {
        return {
          legacyId: parseInt(collectiveAccountId)
        };
      }) : undefined
    }
  }),
      loading = _useQuery.loading,
      data = _useQuery.data,
      refetch = _useQuery.refetch;

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      displayAssignCardModal = _React$useState2[0],
      setAssignCardModalDisplay = _React$useState2[1];

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      displayCreateVirtualCardModal = _React$useState4[0],
      setCreateVirtualCardModalDisplay = _React$useState4[1];

  var handleUpdateFilters = function handleUpdateFilters(queryParams) {
    return router.push({
      pathname: "/".concat(props.hostSlug, "/admin/host-virtual-cards"),
      query: omitBy_default()(HostVirtualCards_objectSpread(HostVirtualCards_objectSpread({}, routerQuery), queryParams), function (value) {
        return !value;
      })
    }, null, {
      scroll: false
    });
  };

  var handleAssignCardSuccess = function handleAssignCardSuccess(message) {
    addToast({
      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
      message: message || /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "Host.VirtualCards.AssignCard.Success",
        defaultMessage: [{
          "type": 0,
          "value": "Card successfully assigned"
        }]
      })
    });
    setAssignCardModalDisplay(false);
    refetch();
  };

  var handleCreateVirtualCardSuccess = function handleCreateVirtualCardSuccess(message) {
    addToast({
      type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
      message: message || /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "5O/mlD",
        defaultMessage: [{
          "type": 0,
          "value": "Virtual card successfully created"
        }]
      })
    });
    setCreateVirtualCardModalDisplay(false);
    refetch();
  };

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "24px",
        fontWeight: "700",
        lineHeight: "32px",
        mb: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "VirtualCards.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Virtual Cards"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Host.VirtualCards.List.Description",
          defaultMessage: [{
            "type": 0,
            "value": "Make payments easier by creating virtual cards. One Collective can have multiple virtual cards. "
          }, {
            "type": 8,
            "value": "learnMoreLink",
            "children": [{
              "type": 0,
              "value": "Learn more"
            }]
          }],
          values: {
            learnMoreLink: (0,I18nFormatters/* getI18nLink */.fw)({
              href: 'https://docs.opencollective.com/help/fiscal-hosts/virtual-cards',
              openInNewTabNoFollow: true
            })
          }
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        mt: 3,
        flexDirection: ['row', 'column'],
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(virtual_cards_VirtualCardFilters, {
          isCollectiveFilter: true,
          filters: routerQuery,
          collective: data.host,
          virtualCardMerchants: data.host.hostedVirtualCardMerchants.nodes,
          virtualCardCollectives: data.host.hostedVirtualCardCollectives.nodes,
          onChange: function onChange(queryParams) {
            return handleUpdateFilters(HostVirtualCards_objectSpread(HostVirtualCards_objectSpread({}, queryParams), {}, {
              offset: null
            }));
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
      mt: 4,
      gridTemplateColumns: ['100%', '366px 366px'],
      gridGap: "32px 24px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(AddCardPlaceholder, {
        width: "366px",
        height: "248px",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "column",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          my: 1,
          px: 14,
          py: 10,
          buttonStyle: "primary",
          buttonSize: "medium",
          "data-cy": "confirmation-modal-continue",
          onClick: function onClick() {
            return setCreateVirtualCardModalDisplay(true);
          },
          children: "+"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mt: "10px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "FRM4fb",
            defaultMessage: [{
              "type": 0,
              "value": "Create virtual card"
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(AddCardPlaceholder, {
        width: "366px",
        height: "248px",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "column",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          my: 1,
          px: 14,
          py: 10,
          buttonStyle: "primary",
          buttonSize: "medium",
          "data-cy": "confirmation-modal-continue",
          onClick: function onClick() {
            return setAssignCardModalDisplay(true);
          },
          children: "+"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mt: "10px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Host.VirtualCards.AssignCard",
            defaultMessage: [{
              "type": 0,
              "value": "Assign Card"
            }]
          })
        })]
      }), data.host.hostedVirtualCards.nodes.map(function (vc) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(edit_collective_VirtualCard, {
          host: data.host,
          virtualCard: vc,
          canEditVirtualCard: true,
          canPauseOrResumeVirtualCard: true,
          canDeleteVirtualCard: true,
          onDeleteRefetchQuery: "HostedVirtualCards"
        }, vc.id);
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      mt: 5,
      alignItems: "center",
      flexDirection: "column",
      justifyContent: "center",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Pagination/* default */.Z, {
        route: "/".concat(data.host.slug, "/admin/host-virtual-cards"),
        total: data.host.hostedVirtualCards.totalCount,
        limit: HostVirtualCards_VIRTUAL_CARDS_PER_PAGE,
        offset: offset,
        ignoredQueryParams: ['slug', 'section']
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
        mt: 1,
        fontSize: "12px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "TotalItems",
          defaultMessage: [{
            "type": 0,
            "value": "Total Items"
          }]
        }), ": ", data.host.hostedVirtualCards.totalCount]
      })]
    }), displayAssignCardModal && /*#__PURE__*/(0,jsx_runtime.jsx)(AssignVirtualCardModal/* default */.Z, {
      host: data.host,
      onSuccess: handleAssignCardSuccess,
      onClose: function onClose() {
        setAssignCardModalDisplay(false);
      }
    }), displayCreateVirtualCardModal && /*#__PURE__*/(0,jsx_runtime.jsx)(EditVirtualCardModal/* default */.Z, {
      host: data.host,
      onSuccess: handleCreateVirtualCardSuccess,
      onClose: function onClose() {
        setCreateVirtualCardModalDisplay(false);
      }
    })]
  });
};

HostVirtualCards_HostVirtualCards.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "HostVirtualCards",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "hideTopsection": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_HostVirtualCards = (HostVirtualCards_HostVirtualCards);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/Plus/Plus.esm.js
var Plus_esm = __webpack_require__(67273);
// EXTERNAL MODULE: ./node_modules/@styled-icons/boxicons-regular/Trash/Trash.esm.js
var Trash_esm = __webpack_require__(24834);
// EXTERNAL MODULE: ./components/collective-page/graphql/mutations.js
var graphql_mutations = __webpack_require__(8914);
;// CONCATENATED MODULE: ./components/admin-panel/sections/ReceiptTemplateForm.js












var ReceiptTemplateForm = function ReceiptTemplateForm(_ref) {
  var showTipForDefaultTitle = _ref.showTipForDefaultTitle,
      value = _ref.value,
      _onChange = _ref.onChange,
      placeholders = _ref.placeholders,
      template = _ref.template;

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showPreview = _React$useState2[0],
      setShowPreview = _React$useState2[1];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
      htmlFor: "receipt-title-".concat(template),
      color: "black.800",
      fontSize: "16px",
      fontWeight: 700,
      lineHeight: "24px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "tOMmos",
        defaultMessage: [{
          "type": 0,
          "value": "Receipt title"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, {
      id: "receipt-title-".concat(template),
      placeholder: placeholders.title,
      defaultValue: value.title,
      onChange: function onChange(e) {
        return _onChange(e.target.value, null);
      },
      width: "100%",
      maxWidth: 414,
      mt: "6px"
    }), showTipForDefaultTitle && /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      mt: "6px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "DsfNxu",
        defaultMessage: [{
          "type": 0,
          "value": "Keep this field empty to use the default title: "
        }, {
          "type": 1,
          "value": "receiptTitlePlaceholder"
        }, {
          "type": 0,
          "value": "."
        }],
        values: {
          receiptTitlePlaceholder: placeholders.title
        }
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      justifyContent: "space-between",
      flexDirection: ['column', 'row'],
      pt: "26px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Label */.__, {
        htmlFor: "custom-message-".concat(template),
        color: "black.800",
        fontSize: "16px",
        fontWeight: 700,
        lineHeight: "24px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "+jDZdn",
          defaultMessage: [{
            "type": 0,
            "value": "Custom Message"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        buttonStyle: "secondary",
        buttonSize: "tiny",
        maxWidth: "78px",
        pt: "4px",
        pb: "4px",
        pl: "14px",
        pr: "14px",
        height: "24px",
        onClick: function onClick() {
          return setShowPreview(true);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          fontSize: "13px",
          fontWeight: 500,
          lineHeight: "16px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "TJo5E6",
            defaultMessage: [{
              "type": 0,
              "value": "Preview"
            }]
          })
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTextarea/* default */.Z, {
      id: "custom-message-".concat(template),
      placeholder: placeholders.info,
      defaultValue: value.info,
      onChange: function onChange(e) {
        return _onChange(null, e.target.value);
      },
      width: "100%",
      height: "150px",
      fontSize: "13px",
      mt: "14px",
      mb: "23px"
    }), showPreview && /*#__PURE__*/(0,jsx_runtime.jsx)(components_PreviewModal, {
      heading: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "F21ZZ6",
        defaultMessage: [{
          "type": 0,
          "value": "Receipt Preview"
        }]
      }),
      onClose: function onClose() {
        return setShowPreview(false);
      },
      previewImage: "/static/images/invoice-title-preview.jpg",
      imgHeight: "548.6px",
      imgWidth: "667px"
    })]
  });
};

ReceiptTemplateForm.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ReceiptTemplateForm",
  "props": {
    "showTipForDefaultTitle": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "value": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "title": {
            "name": "string",
            "required": false
          },
          "info": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": true
    },
    "onChange": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "placeholders": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "template": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_ReceiptTemplateForm = (ReceiptTemplateForm);
;// CONCATENATED MODULE: ./components/admin-panel/sections/InvoicesReceipts.js




function InvoicesReceipts_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function InvoicesReceipts_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? InvoicesReceipts_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : InvoicesReceipts_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





















var InvoicesReceipts_messages = (0,lib.defineMessages)({
  extraInfoPlaceholder: {
    id: "EditHostInvoice.extraInfoPlaceholder",
    defaultMessage: [{
      "type": 0,
      "value": "Add any other text to appear on payment receipts, such as your organization's tax ID number, info about tax deductibility of contributions, or a custom thank you message."
    }]
  }
});
var BILL_TO_OPTIONS = [{
  value: 'host',
  label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
    id: "OgbGHX",
    defaultMessage: [{
      "type": 1,
      "value": "value"
    }, {
      "type": 0,
      "value": " (default)"
    }],
    values: {
      value: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "Member.Role.HOST",
        defaultMessage: [{
          "type": 0,
          "value": "Host"
        }]
      })
    }
  })
}, {
  value: 'collective',
  label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
    id: "Collective",
    defaultMessage: [{
      "type": 0,
      "value": "Collective"
    }]
  })
}];

var InvoicesReceipts = function InvoicesReceipts(_ref) {
  var collective = _ref.collective;
  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast; // For invoice Title


  var defaultReceiptTitlePlaceholder = 'Payment Receipt';

  var defaultReceiptTitle = get_default()(collective.settings, 'invoice.templates.default.title');

  var defaultAlternativeReceiptTitle = get_default()(collective.settings, 'invoice.templates.alternative.title', null);

  var _useMutation = (0,client.useMutation)(graphql_mutations/* editCollectiveSettingsMutation */.U0),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      setSettings = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      loading = _useMutation2$.loading,
      error = _useMutation2$.error,
      data = _useMutation2$.data;

  var _React$useState = react.useState(defaultReceiptTitle),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      receiptTitle = _React$useState2[0],
      setReceiptTitle = _React$useState2[1];

  var _React$useState3 = react.useState(defaultAlternativeReceiptTitle),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      alternativeReceiptTitle = _React$useState4[0],
      setAlternativeReceiptTitle = _React$useState4[1];

  var _React$useState5 = react.useState(defaultAlternativeReceiptTitle !== null),
      _React$useState6 = slicedToArray_default()(_React$useState5, 2),
      showAlternativeReceiptsSection = _React$useState6[0],
      setShowAlternativeReceiptsSection = _React$useState6[1];

  var _React$useState7 = react.useState(false),
      _React$useState8 = slicedToArray_default()(_React$useState7, 2),
      isFieldChanged = _React$useState8[0],
      setIsFieldChanged = _React$useState8[1];

  var isSaved = get_default()(data, 'editCollective.settings.invoice.templates.default.title') === receiptTitle && get_default()(data, 'editCollective.settings.invoice.templates.alternative.title', null) === alternativeReceiptTitle; // For invoice extra info

  var defaultInfo = get_default()(collective.settings, 'invoice.templates.default.info');

  var defaultAlternativeInfo = get_default()(collective.settings, 'invoice.templates.alternative.info');

  var _React$useState9 = react.useState(defaultInfo),
      _React$useState10 = slicedToArray_default()(_React$useState9, 2),
      info = _React$useState10[0],
      setInfo = _React$useState10[1];

  var _React$useState11 = react.useState(defaultAlternativeInfo),
      _React$useState12 = slicedToArray_default()(_React$useState11, 2),
      alternativeInfo = _React$useState12[0],
      setAlternativeInfo = _React$useState12[1];

  var infoIsSaved = get_default()(data, 'editCollective.settings.invoice.templates.default.info') === info && get_default()(data, 'editCollective.settings.invoice.templates.alternative.info') === alternativeInfo; // For Bill To

  var getBillToOption = function getBillToOption(value) {
    return BILL_TO_OPTIONS.find(function (option) {
      return option.value === value;
    }) || BILL_TO_OPTIONS[0];
  };

  var getInExpenseTemplate = function getInExpenseTemplate(account, field) {
    return get_default()(account, "settings.invoice.expenseTemplates.default.".concat(field));
  };

  var _React$useState13 = react.useState(getInExpenseTemplate(collective, 'billTo')),
      _React$useState14 = slicedToArray_default()(_React$useState13, 2),
      billTo = _React$useState14[0],
      setBillTo = _React$useState14[1];

  var billToIsSaved = getInExpenseTemplate(collective, 'billTo') === billTo;

  var deleteAlternativeReceipt = function deleteAlternativeReceipt() {
    setAlternativeReceiptTitle(null);
    setAlternativeInfo(null);
    setShowAlternativeReceiptsSection(false);
    setIsFieldChanged(true);
  };

  var getInvoiceTemplatesObj = function getInvoiceTemplatesObj() {
    var templates = {
      "default": {
        title: receiptTitle,
        info: info
      }
    };
    var expenseTemplates = {
      "default": {
        billTo: billTo
      }
    };

    if (alternativeReceiptTitle || alternativeInfo) {
      templates.alternative = {
        title: alternativeReceiptTitle,
        info: alternativeInfo
      };
    }

    return {
      templates: templates,
      expenseTemplates: expenseTemplates
    };
  };

  var onChangeDefault = function onChangeDefault(title, info) {
    if (title) {
      setReceiptTitle(title === '' ? defaultReceiptTitlePlaceholder : title);
    }

    if (info) {
      setInfo(info);
    }

    setIsFieldChanged(true);
  };

  var onChangeAlternate = function onChangeAlternate(title, info) {
    if (title) {
      setAlternativeReceiptTitle(title);
    }

    if (info) {
      setAlternativeInfo(info);
    }

    setIsFieldChanged(true);
  };

  var _onChange = function onChange(value, stateFunction) {
    stateFunction(value);
    setIsFieldChanged(true);
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.H2, {
      mb: 3,
      fontSize: "24px",
      lineHeight: "32px",
      fontWeight: "700",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "becomeASponsor.invoiceReceipts",
        defaultMessage: [{
          "type": 0,
          "value": "Invoices & Receipts"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      mb: 4,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "Expenses",
          defaultMessage: [{
            "type": 0,
            "value": "Expenses"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputField/* default */.Z, {
        name: "expense-bill-to-select",
        labelProps: {
          fontSize: '16px',
          fontWeight: '700',
          lineHeight: '24px',
          color: 'black.800'
        },
        label: intl.formatMessage({
          id: "izhuHE",
          defaultMessage: [{
            "type": 0,
            "value": "Bill To"
          }]
        }),
        hint: intl.formatMessage({
          id: "yMFA0e",
          defaultMessage: [{
            "type": 0,
            "value": "Set this to \"Collective\" to use the collective info for generated invoices' \"Bill To\" section. You need to make sure that this pattern is legal under your jurisdiction."
          }]
        }),
        children: function children(_ref2) {
          var id = _ref2.id;
          return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
            inputId: id,
            options: BILL_TO_OPTIONS,
            value: getBillToOption(billTo),
            onChange: function onChange(_ref3) {
              var value = _ref3.value;
              return _onChange(value, setBillTo);
            }
          });
        }
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "financialContributions",
        defaultMessage: [{
          "type": 0,
          "value": "Financial contributions"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      pb: "26px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "EditHostInvoice.Receipt.Instructions",
        defaultMessage: [{
          "type": 0,
          "value": "You can customize the title (and add custom text) on automatically generated receipts for financial contributions to your Collective(s), e.g., 'donation receipt' or 'tax receipt' or a phrase appropriate for your legal entity type, language, and location. Keep this field empty to use the default title:"
        }]
      }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)("i", {
        children: defaultReceiptTitlePlaceholder
      }), "."]
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "error",
      fontSize: "14px",
      withIcon: true,
      mb: 3,
      children: (0,errors/* i18nGraphqlException */.t2)(intl, error)
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexWrap: "wrap",
      flexDirection: "column",
      width: "100%",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(sections_ReceiptTemplateForm, {
        defaultTemplate: true,
        value: {
          title: defaultReceiptTitlePlaceholder === receiptTitle || receiptTitle === null ? null : receiptTitle,
          info: info
        },
        placeholders: {
          title: defaultReceiptTitlePlaceholder,
          info: intl.formatMessage(InvoicesReceipts_messages.extraInfoPlaceholder)
        },
        onChange: onChangeDefault
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_SettingsSectionTitle, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "CJtvlX",
          defaultMessage: [{
            "type": 0,
            "value": "Alternative receipt template"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "MNi3fa",
          defaultMessage: [{
            "type": 0,
            "value": "You can create an additional receipt for you to use as a non-tax-deductible payments for cases like event tickets, merch, or services."
          }]
        })
      }), !showAlternativeReceiptsSection && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        buttonStyle: "secondary",
        mt: "24px",
        mb: "24px",
        maxWidth: 209,
        pt: "7px",
        pb: "7px",
        pl: "18px",
        pr: "16px",
        onClick: function onClick() {
          return setShowAlternativeReceiptsSection(true);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          fontSize: "14px",
          fontWeight: 500,
          lineHeight: "18px",
          color: "#1869F5",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            pr: "10px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Plus_esm/* Plus */.v, {
              size: 17
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "7It+w9",
            defaultMessage: [{
              "type": 0,
              "value": "Add alternative receipt"
            }]
          })]
        })
      }), showAlternativeReceiptsSection && /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
        mt: "26px",
        mb: "24px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          flexWrap: "wrap",
          flexDirection: "column",
          width: "100%",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(sections_ReceiptTemplateForm, {
            value: {
              title: alternativeReceiptTitle,
              info: alternativeInfo
            },
            placeholders: {
              title: 'Custom Receipt',
              info: intl.formatMessage(InvoicesReceipts_messages.extraInfoPlaceholder)
            },
            onChange: onChangeAlternate
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "danger",
          borderColor: "#CC2955",
          backgroundColor: "white",
          background: "none",
          mt: "24px",
          maxWidth: 225,
          pt: "7px",
          pb: "7px",
          pl: "18px",
          pr: "16px",
          onClick: function onClick() {
            return deleteAlternativeReceipt();
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text/* Span */.Dr, {
            display: "flex",
            fontSize: "14px",
            fontWeight: 500,
            lineHeight: "18px",
            color: "#CC2955",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
              pr: "10px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(Trash_esm/* Trash */.r, {
                size: 17
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "aXAB2R",
              defaultMessage: [{
                "type": 0,
                "value": "Delete alternative receipt"
              }]
            })]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        borderColor: "#C3C6CB"
      }), showAlternativeReceiptsSection && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        type: "info",
        mt: "24px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
          fontSize: "13px",
          fontWeight: 400,
          lineHeight: "20px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "nYrU4E",
            defaultMessage: [{
              "type": 0,
              "value": "Please advise your Collectives to select the correct receipt setting for any tiers where the alternative receipt should be used, or manage related contributions through the Add Funds process, where you as the Host Admin can select the correct receipt."
            }]
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
        buttonStyle: "primary",
        mt: "24px",
        maxWidth: 200,
        loading: loading,
        disabled: !isFieldChanged,
        onClick: function onClick() {
          setSettings({
            variables: {
              id: collective.legacyId,
              settings: InvoicesReceipts_objectSpread(InvoicesReceipts_objectSpread({}, collective.settings), {}, {
                invoice: getInvoiceTemplatesObj()
              })
            }
          });
          setIsFieldChanged(false);
          addToast({
            type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
            message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "6P4LG/",
              defaultMessage: [{
                "type": 0,
                "value": "Invoices updated successfully"
              }]
            })
          });
        },
        children: isSaved && infoIsSaved && billToIsSaved ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "saved",
          defaultMessage: [{
            "type": 0,
            "value": "Saved"
          }]
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "save",
          defaultMessage: [{
            "type": 0,
            "value": "Save"
          }]
        })
      })]
    })]
  });
};

InvoicesReceipts.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "InvoicesReceipts",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "legacyId": {
            "name": "number",
            "required": true
          },
          "settings": {
            "name": "object",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ var sections_InvoicesReceipts = (InvoicesReceipts);
// EXTERNAL MODULE: ./node_modules/lodash/compact.js
var compact = __webpack_require__(39693);
var compact_default = /*#__PURE__*/__webpack_require__.n(compact);
// EXTERNAL MODULE: ./components/StyledTag.js
var StyledTag = __webpack_require__(36422);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/ChevronDown/ChevronDown.esm.js
var ChevronDown_esm = __webpack_require__(10090);
// EXTERNAL MODULE: ./node_modules/@styled-icons/feather/ChevronUp/ChevronUp.esm.js
var ChevronUp_esm = __webpack_require__(21185);
// EXTERNAL MODULE: ./lib/constants/activities.ts
var activities = __webpack_require__(70756);
;// CONCATENATED MODULE: ./lib/i18n/activities-classes.js

var ActivityClassesI18N = (0,lib.defineMessages)({
  'collectives.title': {
    id: "collectives.title",
    defaultMessage: [{
      "type": 0,
      "value": "Main collective activity"
    }]
  },
  'collectives.description': {
    id: "collectives.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a new collective applies for fiscal hosting or is approved. Also get updates when new members are added to the collectives or when a new social media account is connected."
    }]
  },
  'expenses.title': {
    id: "Expenses",
    defaultMessage: [{
      "type": 0,
      "value": "Expenses"
    }]
  },
  'expenses.description': {
    id: "expenses.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails of new submissions, and all expense activity."
    }]
  },
  'contributions.title': {
    id: "Contributions",
    defaultMessage: [{
      "type": 0,
      "value": "Contributions"
    }]
  },
  'contributions.description': {
    id: "contributions.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when new contributions come through and other contribution-related notifications."
    }]
  },
  'activitiesUpdates.title': {
    id: "activitiesUpdates.title",
    defaultMessage: [{
      "type": 0,
      "value": "Activities and Updates"
    }]
  },
  'activitiesUpdates.description': {
    id: "activitiesUpdates.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a new update is published or comments are added to a conversation."
    }]
  },
  'virtualCards.title': {
    id: "VirtualCards.Title",
    defaultMessage: [{
      "type": 0,
      "value": "Virtual Cards"
    }]
  },
  'virtualCards.description': {
    id: "virtualCards.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when virtual cards are requested, assigned and when a charge is declined or it is missing its receipt."
    }]
  },
  'fundsEvents.title': {
    id: "fundsEvents.title",
    defaultMessage: [{
      "type": 0,
      "value": "Funds and Events"
    }]
  },
  'fundsEvents.description': {
    id: "fundsEvents.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive emails when a fund or event is created, for tickets confirmations and events reminders."
    }]
  },
  'reports.title': {
    id: "reports.title",
    defaultMessage: [{
      "type": 0,
      "value": "Monthly reports"
    }]
  },
  'reports.description': {
    id: "reports.description",
    defaultMessage: [{
      "type": 0,
      "value": "Receive monthly reports sent by collectives"
    }]
  }
});
;// CONCATENATED MODULE: ./components/admin-panel/sections/NotificationsSettings/fragments.js


var fragments_templateObject;


var accountActivitySubscriptionsFragment = (0,graphql_tag_lib/* default */.ZP)(fragments_templateObject || (fragments_templateObject = taggedTemplateLiteral_default()(["\n  fragment AccountActivitySubscriptionsFields on Account {\n    id\n    name\n    slug\n    type\n    imageUrl\n    activitySubscriptions(channel: email) {\n      id\n      channel\n      type\n      active\n    }\n  }\n"])));
;// CONCATENATED MODULE: ./components/admin-panel/sections/NotificationsSettings/ActivitySwitch.js




var ActivitySwitch_templateObject, ActivitySwitch_templateObject2;
















var refetchEmailNotificationQuery = (0,graphql_tag_lib/* default */.ZP)(ActivitySwitch_templateObject || (ActivitySwitch_templateObject = taggedTemplateLiteral_default()(["\n  query NotificationsSettingsRefetchQuery($id: String!) {\n    account(id: $id) {\n      id\n      ...AccountActivitySubscriptionsFields\n    }\n  }\n  ", "\n"])), accountActivitySubscriptionsFragment);
var setEmailNotificationMutation = (0,graphql_tag_lib/* default */.ZP)(ActivitySwitch_templateObject2 || (ActivitySwitch_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation SetEmailNotification($type: ActivityAndClassesType!, $account: AccountReferenceInput, $active: Boolean!) {\n    setEmailNotification(type: $type, account: $account, active: $active) {\n      id\n    }\n  }\n"])));

var ActivitySwitch = function ActivitySwitch(_ref) {
  var _account$activitySubs, _account$activitySubs2;

  var account = _ref.account,
      activityType = _ref.activityType;

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var intl = (0,useIntl/* default */.Z)();
  var existingSetting = (_account$activitySubs = account.activitySubscriptions) === null || _account$activitySubs === void 0 ? void 0 : _account$activitySubs.find(function (notification) {
    return activities/* ActivityClasses */.oD[activityType] === notification.type || notification.type === activities/* ActivityTypes.ACTIVITY_ALL */.II.ACTIVITY_ALL;
  });
  var isResetingSettings = activityType === 'ACTIVITY_ALL' && ((_account$activitySubs2 = account.activitySubscriptions) === null || _account$activitySubs2 === void 0 ? void 0 : _account$activitySubs2.filter(function (notification) {
    return notification.type !== activities/* ActivityTypes.ACTIVITY_ALL */.II.ACTIVITY_ALL;
  }).map(function (notification) {
    return ActivityClassesI18N["".concat(notification.type, ".title")] ? intl.formatMessage(ActivityClassesI18N["".concat(notification.type, ".title")]) : notification.type;
  }));

  var _React$useState = react.useState(existingSetting ? existingSetting.active : true),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      isSubscribed = _React$useState2[0],
      setSubscribed = _React$useState2[1];

  var isOverridedByAll = activityType !== 'ACTIVITY_ALL' && (existingSetting === null || existingSetting === void 0 ? void 0 : existingSetting.type) === activities/* ActivityTypes.ACTIVITY_ALL */.II.ACTIVITY_ALL;

  var _useMutation = (0,client.useMutation)(setEmailNotificationMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    refetchQueries: [{
      query: refetchEmailNotificationQuery,
      variables: {
        id: account.id
      },
      context: helpers/* API_V2_CONTEXT */.T
    }]
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 1),
      setEmailNotification = _useMutation2[0];

  var handleToggle = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(variables) {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              setSubscribed(variables.active);
              _context.next = 4;
              return setEmailNotification({
                variables: variables
              });

            case 4:
              _context.next = 9;
              break;

            case 6:
              _context.prev = 6;
              _context.t0 = _context["catch"](0);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "NotificationsSettings.ToggleError",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Error updating activity "
                  }, {
                    "type": 1,
                    "value": "activity"
                  }, {
                    "type": 0,
                    "value": ": "
                  }, {
                    "type": 1,
                    "value": "error"
                  }],
                  values: {
                    activity: activityType,
                    error: _context.t0.message
                  }
                })
              });

            case 9:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 6]]);
    }));

    return function handleToggle(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    alignItems: "center",
    children: [(isResetingSettings === null || isResetingSettings === void 0 ? void 0 : isResetingSettings.length) > 0 ? /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
      content: function content() {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "NotificationsSettings.ToggleResetSettings",
          defaultMessage: [{
            "type": 0,
            "value": "By toggling this setting, you're also reseting previously set options for: "
          }, {
            "type": 1,
            "value": "activities"
          }],
          values: {
            activities: isResetingSettings.join(', ')
          }
        });
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Info_esm/* Info */.k, {
        size: 16
      })
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      width: "16px"
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(InputSwitch/* default */.Z, {
      name: "".concat(activityType, "-switch"),
      checked: isSubscribed,
      disabled: isOverridedByAll,
      onChange: function onChange(event) {
        return handleToggle({
          type: activityType,
          account: {
            id: account.id
          },
          active: event.target.checked
        });
      }
    })]
  });
};

ActivitySwitch.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ActivitySwitch",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "imageUrl": {
            "name": "string",
            "required": false
          },
          "activitySubscriptions": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "type": {
                  "name": "string",
                  "required": false
                },
                "active": {
                  "name": "bool",
                  "required": false
                }
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "activityType": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    }
  }
};
/* harmony default export */ var NotificationsSettings_ActivitySwitch = (ActivitySwitch);
;// CONCATENATED MODULE: ./components/admin-panel/sections/NotificationsSettings/CollectiveSettings.js



var CollectiveSettings_excluded = ["account", "advancedSettings", "big", "roleLabel"];

function CollectiveSettings_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function CollectiveSettings_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? CollectiveSettings_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : CollectiveSettings_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

















var CollectiveSettings = function CollectiveSettings(_ref) {
  var account = _ref.account,
      advancedSettings = _ref.advancedSettings,
      big = _ref.big,
      roleLabel = _ref.roleLabel,
      boxProps = objectWithoutProperties_default()(_ref, CollectiveSettings_excluded);

  var intl = (0,useIntl/* default */.Z)();

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      displayAdvancedSettings = _React$useState2[0],
      setDisplayAdvancedSettings = _React$useState2[1];

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, CollectiveSettings_objectSpread(CollectiveSettings_objectSpread({}, boxProps), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      justifyContent: "space-between",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
        alignItems: "center",
        children: big ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
            collective: account,
            radius: 48,
            mr: 3
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            fontSize: "16px",
            lineHeight: "24px",
            fontWeight: "500",
            children: [account.name, /*#__PURE__*/(0,jsx_runtime.jsx)("br", {}), /*#__PURE__*/(0,jsx_runtime.jsx)(Text/* Span */.Dr, {
              fontSize: "14px",
              lineHeight: "20px",
              color: "black.600",
              children: roleLabel
            })]
          })]
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(StyledTag/* default */.Z, {
            variant: "rounded",
            fontSize: "11px",
            lineHeight: "16px",
            backgroundColor: "black.50",
            border: "1px solid #C3C6CB",
            mr: 2,
            p: "4px 8px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
              collective: account,
              radius: 16,
              mr: "6px"
            }), account.name]
          }), account.host && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
            children: ["(", account.host.totalHostedCollectives, ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "PEfD6k",
              defaultMessage: [{
                "type": 6,
                "value": "count",
                "options": {
                  "one": {
                    "value": [{
                      "type": 0,
                      "value": "collective"
                    }]
                  },
                  "other": {
                    "value": [{
                      "type": 0,
                      "value": "collectives"
                    }]
                  }
                },
                "offset": 0,
                "pluralType": "cardinal"
              }],
              values: {
                count: account.host.totalHostedCollectives
              }
            }), ")"]
          })]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        children: [advancedSettings && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
          buttonStyle: "secondary",
          buttonSize: "tiny",
          isBorderless: true,
          mr: 2,
          display: ['none', 'block'],
          onClick: function onClick() {
            return setDisplayAdvancedSettings(!displayAdvancedSettings);
          },
          children: [displayAdvancedSettings ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "AdvancedSettings.Hide",
            defaultMessage: [{
              "type": 0,
              "value": "Hide advanced settings"
            }]
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "AdvancedSettings.Show",
            defaultMessage: [{
              "type": 0,
              "value": "Show advanced settings"
            }]
          }), displayAdvancedSettings ? /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronUp_esm/* ChevronUp */.K, {
            size: "1em"
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronDown_esm/* ChevronDown */._, {
            size: "1em"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationsSettings_ActivitySwitch, {
          account: account,
          activityType: "ACTIVITY_ALL"
        })]
      })]
    }), advancedSettings && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledButton/* default */.Z, {
      buttonStyle: "secondary",
      buttonSize: "tiny",
      isBorderless: true,
      mt: 2,
      display: ['block', 'none'],
      onClick: function onClick() {
        return setDisplayAdvancedSettings(!displayAdvancedSettings);
      },
      children: [displayAdvancedSettings ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "AdvancedSettings.Hide",
        defaultMessage: [{
          "type": 0,
          "value": "Hide advanced settings"
        }]
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "AdvancedSettings.Show",
        defaultMessage: [{
          "type": 0,
          "value": "Show advanced settings"
        }]
      }), displayAdvancedSettings ? /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronUp_esm/* ChevronUp */.K, {
        size: "1em"
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(ChevronDown_esm/* ChevronDown */._, {
        size: "1em"
      })]
    }), big && displayAdvancedSettings && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      width: "100%",
      my: 3
    }), advancedSettings && displayAdvancedSettings && Object.keys(activities/* ActivityClasses */.oD).map(function (activity) {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          mt: 3,
          alignItems: "center",
          justifyContent: "space-between",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            fontWeight: "500",
            lineHeight: "20px",
            children: intl.formatMessage(ActivityClassesI18N["".concat(activities/* ActivityClasses */.oD[activity], ".title")])
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationsSettings_ActivitySwitch, {
            account: account,
            activityType: activity
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          mt: "2",
          fontSize: "12px",
          color: "black.700",
          lineHeight: "18px",
          letterSpacing: "0px",
          children: intl.formatMessage(ActivityClassesI18N["".concat(activities/* ActivityClasses */.oD[activity], ".description")])
        })]
      }, activity);
    }), advancedSettings && !big && /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
      width: "100%",
      mt: displayAdvancedSettings ? 4 : 3,
      borderStyle: "dashed"
    })]
  }));
};

CollectiveSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "CollectiveSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "slug": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "imageUrl": {
            "name": "string",
            "required": false
          },
          "activitySubscriptions": {
            "name": "arrayOf",
            "value": {
              "name": "shape",
              "value": {
                "type": {
                  "name": "string",
                  "required": false
                },
                "active": {
                  "name": "bool",
                  "required": false
                }
              }
            },
            "required": false
          },
          "host": {
            "name": "shape",
            "value": {
              "totalHostedCollectives": {
                "name": "number",
                "required": false
              }
            },
            "required": false
          }
        }
      },
      "required": false
    },
    "advancedSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "big": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "roleLabel": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
/* harmony default export */ var NotificationsSettings_CollectiveSettings = (CollectiveSettings);
;// CONCATENATED MODULE: ./components/admin-panel/sections/NotificationsSettings/GroupView.js











var CollectiveContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "GroupView__CollectiveContainer",
  componentId: "sc-1vwu708-0"
})(["border:1px solid rgba(50,51,52,0.1);"]);

var GroupView = function GroupView(_ref) {
  var accounts = _ref.accounts,
      title = _ref.title,
      advancedSettings = _ref.advancedSettings,
      roleLabel = _ref.roleLabel;
  var router = (0,next_router.useRouter)(); // Return user to parent /user/admin/notifications page by removing the group name from the end of the URL

  var handleBack = function handleBack() {
    return router.push("/".concat(router.asPath.split('/').slice(1, 4).join('/')));
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
      color: "blue.800",
      fontSize: "13px",
      fontWeight: "500",
      lineHeight: "16px",
      mb: 4,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_StyledLink/* default */.Z, {
        textDecoration: "underline",
        color: "inherit",
        onClick: handleBack,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "NotificationsSettings.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Notification Settings"
          }]
        })
      }), ' ', "> ", title]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "24px",
      fontWeight: "700",
      lineHeight: "32px",
      mb: 3,
      children: title
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      lineHeight: "20px",
      letterSpacing: "0px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "NotificationsSettings.Descripion",
        defaultMessage: [{
          "type": 0,
          "value": "We will always let you know about important changes, but you can customize other settings here. Manage email notifications for your individual profile as well as the collectives and organizations you are part of."
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      mt: 4,
      flexDirection: "column",
      children: accounts.map(function (account) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(CollectiveContainer, {
          mb: 24,
          p: 24,
          flexDirection: "column",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationsSettings_CollectiveSettings, {
            account: account,
            advancedSettings: advancedSettings,
            roleLabel: roleLabel,
            big: true
          })
        }, account.id);
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
      onClick: handleBack,
      children: "Back"
    })]
  });
};

GroupView.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "GroupView",
  "props": {
    "accounts": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "shape",
          "value": {
            "id": {
              "name": "string",
              "required": false
            },
            "name": {
              "name": "string",
              "required": false
            },
            "slug": {
              "name": "string",
              "required": false
            },
            "type": {
              "name": "string",
              "required": false
            },
            "imageUrl": {
              "name": "string",
              "required": false
            },
            "activitySubscriptions": {
              "name": "arrayOf",
              "value": {
                "name": "shape",
                "value": {
                  "type": {
                    "name": "string",
                    "required": false
                  },
                  "active": {
                    "name": "bool",
                    "required": false
                  }
                }
              },
              "required": false
            },
            "host": {
              "name": "shape",
              "value": {
                "totalHostedCollectives": {
                  "name": "number",
                  "required": false
                }
              },
              "required": false
            }
          }
        }
      },
      "required": false
    },
    "title": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "roleLabel": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "advancedSettings": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    }
  }
};
/* harmony default export */ var NotificationsSettings_GroupView = (GroupView);
;// CONCATENATED MODULE: ./components/admin-panel/sections/NotificationsSettings/index.js






var NotificationsSettings_excluded = ["accounts", "group", "title"];

var NotificationsSettings_templateObject, NotificationsSettings_templateObject2;

function NotificationsSettings_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function NotificationsSettings_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? NotificationsSettings_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : NotificationsSettings_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





















var GROUP_VIEWS = {
  COLLECTIVES: 'collectives',
  ORGANIZATIONS: 'organizations',
  BACKED: 'backed'
};
var NecessaryNotificationsList = styled_components_browser_esm/* default.ul.withConfig */.ZP.ul.withConfig({
  displayName: "NotificationsSettings__NecessaryNotificationsList",
  componentId: "sc-1sxbsf9-0"
})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));grid-gap:12px 24px;font-size:13px;font-weight:500;line-height:20px;"]);
var userActivitySubscriptionsQuery = (0,graphql_tag_lib/* default */.ZP)(NotificationsSettings_templateObject || (NotificationsSettings_templateObject = taggedTemplateLiteral_default()(["\n  query ActivitySubscriptionsSettingsQuery($id: String!) {\n    account(id: $id) {\n      id\n      ... on Individual {\n        newsletterOptIn\n      }\n      memberOf(role: [ADMIN], accountType: [COLLECTIVE, FUND, ORGANIZATION], isArchived: false) {\n        nodes {\n          id\n          account {\n            id\n            ...AccountActivitySubscriptionsFields\n            ... on Organization {\n              host {\n                id\n                totalHostedCollectives\n              }\n            }\n          }\n        }\n      }\n      backerOf: memberOf(\n        role: [BACKER]\n        accountType: [COLLECTIVE, ORGANIZATION, EVENT, FUND, PROJECT]\n        isArchived: false\n      ) {\n        nodes {\n          id\n          account {\n            id\n            ...AccountActivitySubscriptionsFields\n          }\n        }\n      }\n    }\n  }\n  ", "\n"])), accountActivitySubscriptionsFragment);
var setNewsletterOptInMutation = (0,graphql_tag_lib/* default */.ZP)(NotificationsSettings_templateObject2 || (NotificationsSettings_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation SetNewsletterOptIn($newsletterOptIn: Boolean!) {\n    setNewsletterOptIn(newsletterOptIn: $newsletterOptIn) {\n      id\n      ... on Individual {\n        newsletterOptIn\n      }\n    }\n  }\n"])));

var GroupSettings = function GroupSettings(_ref) {
  var accounts = _ref.accounts,
      group = _ref.group,
      title = _ref.title,
      boxProps = objectWithoutProperties_default()(_ref, NotificationsSettings_excluded);

  var router = (0,next_router.useRouter)();

  var handleGroupSettings = function handleGroupSettings() {
    return router.push("".concat(router.asPath, "/").concat(group));
  };

  var activitySubscriptions = compact_default()(flatten_default()(accounts.map(function (account) {
    return account.activitySubscriptions;
  })));

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, NotificationsSettings_objectSpread(NotificationsSettings_objectSpread({}, boxProps), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      justifyContent: "space-between",
      children: [title, /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "12px",
        lineHeight: "18px",
        color: "black.700",
        display: ['none', 'block'],
        children: activitySubscriptions.length === 0 ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "GroupSettings.NoActivitySubscriptions",
          defaultMessage: [{
            "type": 0,
            "value": "You are receiving all notifications"
          }]
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "GroupSettings.SomeActivitySubscriptions",
          defaultMessage: [{
            "type": 0,
            "value": "Some notifications are turned off"
          }]
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      mt: 3,
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        alignItems: ['flex-start', 'center'],
        justifyContent: "space-between",
        flexWrap: "wrap",
        gap: "8px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          alignItems: "center",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledTag/* default */.Z, {
            variant: "rounded",
            fontSize: "11px",
            lineHeight: "16px",
            backgroundColor: "black.50",
            border: "1px solid #C3C6CB",
            mr: 2,
            p: "4px 8px",
            children: accounts.slice(0, 5).map(function (account) {
              return /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
                collective: account,
                radius: 16,
                mr: "6px"
              }, account.id);
            })
          }), accounts.length - 5 > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            fontSize: "14px",
            lineHeight: "20px",
            color: "black.700",
            children: ["(", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "nMore",
              defaultMessage: [{
                "type": 1,
                "value": "n"
              }, {
                "type": 0,
                "value": " more"
              }],
              values: {
                n: accounts.length - 5
              }
            }), ")"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          buttonStyle: "primary",
          buttonSize: "tiny",
          onClick: handleGroupSettings,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "GroupSettings.Show",
            defaultMessage: [{
              "type": 0,
              "value": "Show group settings"
            }]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        display: ['block', 'none'],
        mt: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "12px",
          lineHeight: "18px",
          color: "black.700",
          children: activitySubscriptions.length === 0 ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "GroupSettings.NoActivitySubscriptions",
            defaultMessage: [{
              "type": 0,
              "value": "You are receiving all notifications"
            }]
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "GroupSettings.SomeActivitySubscriptions",
            defaultMessage: [{
              "type": 0,
              "value": "Some notifications are turned off"
            }]
          })
        })
      })]
    })]
  }));
};

var NotificationsSettings = function NotificationsSettings(_ref2) {
  var _data$account;

  var account = _ref2.account,
      subpath = _ref2.subpath;

  var _useQuery = (0,client.useQuery)(userActivitySubscriptionsQuery, {
    variables: {
      id: account.id
    },
    context: helpers/* API_V2_CONTEXT */.T
  }),
      data = _useQuery.data,
      loading = _useQuery.loading;

  var _useMutation = (0,client.useMutation)(setNewsletterOptInMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      setNewsletterOptIn = _useMutation2[0],
      setNewsletterOptInLoading = _useMutation2[1].loading;

  var accounts = (data === null || data === void 0 ? void 0 : data.account.memberOf.nodes.map(function (member) {
    return member.account;
  })) || [];
  var hosts = accounts === null || accounts === void 0 ? void 0 : accounts.filter(function (a) {
    return !!a.host;
  });
  var orgs = accounts === null || accounts === void 0 ? void 0 : accounts.filter(function (a) {
    return a.type === 'ORGANIZATION' && !a.host;
  });
  var collectives = accounts === null || accounts === void 0 ? void 0 : accounts.filter(function (a) {
    return a.type === 'COLLECTIVE';
  });
  var backedAccounts = (data === null || data === void 0 ? void 0 : data.account.backerOf.nodes.map(function (member) {
    return member.account;
  }) // Remove accounts already listed in the advanced settings section
  .filter(function (backedAccount) {
    return !accounts.some(function (account) {
      return account.id === backedAccount.id;
    });
  })) || [];
  var view = subpath === null || subpath === void 0 ? void 0 : subpath[0];

  if (Object.values(GROUP_VIEWS).includes(view)) {
    var _titles, _accountGroups;

    var titles = (_titles = {}, defineProperty_default()(_titles, GROUP_VIEWS.COLLECTIVES, /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "NotificationsSettings.Activity.List.CollectivesSubtitle",
      defaultMessage: [{
        "type": 0,
        "value": "Collectives you manage"
      }]
    })), defineProperty_default()(_titles, GROUP_VIEWS.ORGANIZATIONS, /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "NotificationsSettings.Activity.List.OrganizationsSubtitle",
      defaultMessage: [{
        "type": 0,
        "value": "Organizations you manage"
      }]
    })), defineProperty_default()(_titles, GROUP_VIEWS.BACKED, /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "NotificationsSettings.Updates.CollectivesSupported",
      defaultMessage: [{
        "type": 0,
        "value": "Collectives you support"
      }]
    })), _titles);
    var accountGroups = (_accountGroups = {}, defineProperty_default()(_accountGroups, GROUP_VIEWS.COLLECTIVES, collectives), defineProperty_default()(_accountGroups, GROUP_VIEWS.ORGANIZATIONS, orgs), defineProperty_default()(_accountGroups, GROUP_VIEWS.BACKED, backedAccounts), _accountGroups);
    var roleLabel = view === GROUP_VIEWS.BACKED ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "NotificationSettings.Label.Backer",
      defaultMessage: [{
        "type": 0,
        "value": "Backer"
      }]
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "AdminPanel.button",
      defaultMessage: [{
        "type": 0,
        "value": "Admin"
      }]
    });
    return /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationsSettings_GroupView, {
      accounts: accountGroups[view],
      title: titles[view],
      advancedSettings: view !== GROUP_VIEWS.BACKED,
      roleLabel: roleLabel
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      fontSize: "24px",
      fontWeight: "700",
      lineHeight: "32px",
      mb: 3,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "NotificationsSettings.Title",
        defaultMessage: [{
          "type": 0,
          "value": "Notification Settings"
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
      lineHeight: "20px",
      letterSpacing: "0px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "NotificationsSettings.Descripion",
        defaultMessage: [{
          "type": 0,
          "value": "We will always let you know about important changes, but you can customize other settings here. Manage email notifications for your individual profile as well as the collectives and organizations you are part of."
        }]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
      mt: 4,
      p: "24px",
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "18px",
        fontWeight: "700",
        lineHeight: "26px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "NotificationsSettings.NecessaryNotifications.Title",
          defaultMessage: [{
            "type": 0,
            "value": "Necessary notifications"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        lineHeight: "20px",
        letterSpacing: "0px",
        mt: 2,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "NotificationsSettings.NecessaryNotifications.Description",
          defaultMessage: [{
            "type": 0,
            "value": "There are some notifications we are required to send you, and they can't be opted out of."
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        my: "24px"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(NecessaryNotificationsList, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.ToSUpdates",
            defaultMessage: [{
              "type": 0,
              "value": "Updates on our terms of service"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.MagicLink",
            defaultMessage: [{
              "type": 0,
              "value": "Magic link login"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.EmailUpdate",
            defaultMessage: [{
              "type": 0,
              "value": "Email address update"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.HostMessages",
            defaultMessage: [{
              "type": 0,
              "value": "Communications from your hosts"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.Receipts",
            defaultMessage: [{
              "type": 0,
              "value": "Receipts of your contributions"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.PaymentIssues",
            defaultMessage: [{
              "type": 0,
              "value": "Payment and payment method issues"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.NecessaryNotifications.Expenses",
            defaultMessage: [{
              "type": 0,
              "value": "Recurring and requested expenses"
            }]
          })
        })]
      })]
    }), loading ? /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        mt: 4,
        width: "100%",
        height: 300,
        borderRadius: "8px"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        mt: 4,
        width: "100%",
        height: 200,
        borderRadius: "8px"
      })]
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [accounts.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
        mt: 4,
        p: "24px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.Activity.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Notifications regarding your activity"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          lineHeight: "20px",
          letterSpacing: "0px",
          mt: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.Activity.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Notification settings about the profiles you administer."
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          my: "24px"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.Activity.List.Title",
            defaultMessage: [{
              "type": 0,
              "value": "What you are following:"
            }]
          })
        }), hosts.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mt: 3,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "NotificationsSettings.Activity.List.HostSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Collective you host"
              }]
            }), ' ', /*#__PURE__*/(0,jsx_runtime.jsxs)(Text/* Span */.Dr, {
              fontSize: "14px",
              fontWeight: "400",
              lineHeight: "20px",
              color: "black.700",
              children: ["(", hosts.length || 0, ")"]
            })]
          }), hosts.map(function (a) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationsSettings_CollectiveSettings, {
              account: a,
              advancedSettings: true,
              mt: 3
            }, a.id);
          })]
        }), collectives.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(GroupSettings, {
          title: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "NotificationsSettings.Activity.List.CollectivesSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives you manage"
              }]
            })
          }),
          accounts: collectives,
          group: GROUP_VIEWS.COLLECTIVES,
          mt: 4
        }), orgs.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(GroupSettings, {
          title: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "NotificationsSettings.Activity.List.OrganizationsSubtitle",
              defaultMessage: [{
                "type": 0,
                "value": "Organizations you manage"
              }]
            })
          }),
          accounts: orgs,
          group: GROUP_VIEWS.ORGANIZATIONS,
          mt: 4
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledCard/* default */.Z, {
        mt: 4,
        p: "24px",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "18px",
          fontWeight: "700",
          lineHeight: "26px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.Updates.Title",
            defaultMessage: [{
              "type": 0,
              "value": "Updates about the platform and Collectives you support"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          lineHeight: "20px",
          letterSpacing: "0px",
          mt: 2,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "NotificationsSettings.Updates.Description",
            defaultMessage: [{
              "type": 0,
              "value": "Notifications about us, news we want to share with you related to our activities and the development of the platform."
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
          my: "24px"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mt: 3,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            alignItems: "center",
            justifyContent: "space-between",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontSize: "15px",
              fontWeight: "500",
              lineHeight: "22px",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "NotificationsSettings.Updates.Newsletter",
                defaultMessage: [{
                  "type": 0,
                  "value": "Receive the Open Collective newsletter (monthly)"
                }]
              })
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(InputSwitch/* default */.Z, {
              name: "newsletter-switch",
              checked: data === null || data === void 0 ? void 0 : (_data$account = data.account) === null || _data$account === void 0 ? void 0 : _data$account.newsletterOptIn,
              isLoading: setNewsletterOptInLoading,
              onChange: function onChange(event) {
                return setNewsletterOptIn({
                  variables: {
                    newsletterOptIn: event.target.checked
                  }
                });
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
            width: "100%",
            mt: 3,
            borderStyle: "dashed"
          })]
        }), backedAccounts.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(GroupSettings, {
          title: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "15px",
            fontWeight: "500",
            lineHeight: "22px",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "NotificationsSettings.Updates.CollectivesSupported",
              defaultMessage: [{
                "type": 0,
                "value": "Collectives you support"
              }]
            })
          }),
          accounts: backedAccounts,
          group: GROUP_VIEWS.BACKED,
          mt: 3
        })]
      })]
    })]
  });
};

NotificationsSettings.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "NotificationsSettings",
  "props": {
    "account": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "id": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    },
    "subpath": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var sections_NotificationsSettings = (NotificationsSettings);
;// CONCATENATED MODULE: ./components/admin-panel/sections/PendingContributions.js






var PendingContributions_FinancialContributions = function FinancialContributions(_ref) {
  var hostSlug = _ref.hostSlug;
  return /*#__PURE__*/(0,jsx_runtime.jsx)(OrdersWithData/* default */.Z, {
    status: order_status/* ORDER_STATUS.PENDING */.D.PENDING,
    accountSlug: hostSlug,
    title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "PendingContributions",
      defaultMessage: [{
        "type": 0,
        "value": "Pending Contributions"
      }]
    }),
    showPlatformTip: true,
    canCreatePendingOrder: true
  });
};

PendingContributions_FinancialContributions.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "FinancialContributions",
  "props": {
    "hostSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": true
    }
  }
};
/* harmony default export */ var PendingContributions = (PendingContributions_FinancialContributions);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/Edit/Edit.esm.js
var Edit_esm = __webpack_require__(35208);
// EXTERNAL MODULE: ./lib/i18n/member-role.js
var member_role = __webpack_require__(66465);
// EXTERNAL MODULE: ./node_modules/@styled-icons/material/Delete/Delete.esm.js
var Delete_esm = __webpack_require__(17494);
// EXTERNAL MODULE: ./components/MemberRoleDescription.js
var MemberRoleDescription = __webpack_require__(10878);
;// CONCATENATED MODULE: ./components/edit-collective/sections/team/MemberForm.js




function MemberForm_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function MemberForm_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? MemberForm_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : MemberForm_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



















var MemberContainer = (0,styled_components_browser_esm/* default */.ZP)(Container/* default */.Z).withConfig({
  displayName: "MemberForm__MemberContainer",
  componentId: "sc-1n51ikg-0"
})(["border:1px solid #dcdee0;border-radius:10px;max-width:250px;padding:16px;"]);
var memberFormMessages = (0,lib.defineMessages)({
  roleLabel: {
    id: "members.role.label",
    defaultMessage: [{
      "type": 0,
      "value": "Role"
    }]
  },
  sinceLabel: {
    id: "user.since.label",
    defaultMessage: [{
      "type": 0,
      "value": "Since"
    }]
  },
  descriptionLabel: {
    id: "Fields.description",
    defaultMessage: [{
      "type": 0,
      "value": "Description"
    }]
  },
  inValidDateError: {
    id: "6DCLcI",
    defaultMessage: [{
      "type": 0,
      "value": "Please enter a valid date"
    }]
  }
});

var MemberForm = function MemberForm(props) {
  var intl = props.intl,
      member = props.member,
      collectiveImg = props.collectiveImg,
      bindSubmitForm = props.bindSubmitForm,
      triggerSubmit = props.triggerSubmit;

  var _React$useState = react.useState((member === null || member === void 0 ? void 0 : member.role) || roles/* default.ADMIN */.Z.ADMIN),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      memberRole = _React$useState2[0],
      setMemberRole = _React$useState2[1];

  var memberCollective = member && (member.account || member.memberAccount);
  var initialValues = {
    description: get_default()(member, 'description') || '',
    role: get_default()(member, 'role') || roles/* default.ADMIN */.Z.ADMIN,
    since: get_default()(member, 'since') ? dayjs_min_default()(get_default()(member, 'since')).format('YYYY-MM-DD') : dayjs_min_default()(new Date()).format('YYYY-MM-DD')
  };

  var submit = function submit(values) {
    triggerSubmit(MemberForm_objectSpread(MemberForm_objectSpread({}, values), {}, {
      since: dayjs_min_default()(values.since).toISOString()
    }));
  };

  var getOptions = function getOptions(arr) {
    return arr.map(function (key) {
      return {
        value: key,
        label: (0,member_role/* default */.Z)(intl, key)
      };
    });
  };

  var validate = function validate(values) {
    var errors = {};

    if (!dayjs_min_default()(values.since).isValid()) {
      errors.since = intl.formatMessage(memberFormMessages.inValidDateError);
    }

    return errors;
  };

  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
    flexDirection: "column",
    justifyContent: "center",
    children: [member && /*#__PURE__*/(0,jsx_runtime.jsx)(MemberContainer, {
      mb: 2,
      mt: 2,
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          position: "relative",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
            src: get_default()(memberCollective, 'imageUrl'),
            radius: 48
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
            mt: 13,
            position: "absolute",
            bottom: "-10%",
            right: "-10%",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
              type: constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE,
              backgroundColor: "#ffffff",
              src: collectiveImg,
              radius: 20
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
          mx: 10,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "16px",
            lineHeight: "24px",
            fontWeight: 500,
            children: get_default()(memberCollective, 'name')
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "13px",
            lineHeight: "20px",
            color: "#4E5052",
            fontWeight: 400,
            children: (0,member_role/* default */.Z)(intl, get_default()(member, 'role'))
          })]
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(formik_esm/* Formik */.J9, {
      validate: validate,
      initialValues: initialValues,
      onSubmit: submit,
      validateOnChange: true,
      children: function children(formik) {
        var submitForm = formik.submitForm;
        bindSubmitForm(submitForm);
        return /*#__PURE__*/(0,jsx_runtime.jsxs)(formik_esm/* Form */.l0, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
            name: "role",
            htmlFor: "memberForm-role",
            label: /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
              fontWeight: "bold",
              children: [" ", intl.formatMessage(memberFormMessages.roleLabel), " "]
            }),
            mt: 3,
            children: function children(_ref) {
              var form = _ref.form,
                  field = _ref.field;
              return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledSelect/* default */.ZP, {
                  inputId: field.id,
                  error: field.error,
                  defaultValue: getOptions([memberRole])[0],
                  onBlur: function onBlur() {
                    return form.setFieldTouched(field.name, true);
                  },
                  onChange: function onChange(_ref2) {
                    var value = _ref2.value;
                    form.setFieldValue(field.name, value);
                    setMemberRole(value);
                  },
                  options: getOptions([roles/* default.ADMIN */.Z.ADMIN, roles/* default.MEMBER */.Z.MEMBER, roles/* default.ACCOUNTANT */.Z.ACCOUNTANT])
                }), (0,MemberRoleDescription/* hasRoleDescription */.T)(memberRole) && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
                  mb: 3,
                  children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
                    mx: 1,
                    mt: 1,
                    fontSize: "12px",
                    color: "black.600",
                    fontStyle: "italic",
                    children: /*#__PURE__*/(0,jsx_runtime.jsx)(MemberRoleDescription/* default */.Z, {
                      role: memberRole
                    })
                  })
                })]
              });
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
            name: "description",
            htmlFor: "memberForm-description",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontWeight: "bold",
              children: intl.formatMessage(memberFormMessages.descriptionLabel)
            }),
            mt: 3,
            children: function children(_ref3) {
              var field = _ref3.field;
              return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, MemberForm_objectSpread({}, field));
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInputFormikField/* default */.Z, {
            name: "since",
            htmlFor: "memberForm-since",
            inputType: "date",
            label: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              fontWeight: "bold",
              children: intl.formatMessage(memberFormMessages.sinceLabel)
            }),
            mt: 3,
            children: function children(_ref4) {
              var form = _ref4.form,
                  field = _ref4.field;
              return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledInput/* default */.ZP, MemberForm_objectSpread(MemberForm_objectSpread({}, field), {}, {
                required: true,
                onChange: function onChange(event) {
                  if (event.target.value) {
                    form.setFieldValue(field.name, event.target.value);
                  }
                },
                value: field.value
              }));
            }
          })]
        });
      }
    })]
  });
};

MemberForm.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MemberForm",
  "props": {
    "bindSubmitForm": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collectiveImg": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "member": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "triggerSubmit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var team_MemberForm = ((0,injectIntl/* default */.ZP)(MemberForm));
;// CONCATENATED MODULE: ./components/edit-collective/sections/team/queries.ts


var team_queries_templateObject, queries_templateObject2;


var memberFieldsFragment = (0,graphql_tag_lib/* default */.ZP)(team_queries_templateObject || (team_queries_templateObject = taggedTemplateLiteral_default()(["\n  fragment MemberFields on Member {\n    id\n    role\n    since\n    createdAt\n    description\n    inherited\n    account {\n      id\n      name\n      slug\n      type\n      imageUrl(height: 64)\n      ... on Individual {\n        email\n      }\n    }\n  }\n"])));
var teamSectionQuery = (0,graphql_tag_lib/* default */.ZP)(queries_templateObject2 || (queries_templateObject2 = taggedTemplateLiteral_default()(["\n  query TeamSection($collectiveSlug: String!, $account: AccountReferenceInput!) {\n    account(slug: $collectiveSlug) {\n      id\n      isFrozen\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n          type\n          name\n        }\n      }\n      ... on AccountWithHost {\n        host {\n          id\n          slug\n          name\n          features {\n            id\n            CONTACT_FORM\n          }\n        }\n      }\n      members(role: [ADMIN, MEMBER, ACCOUNTANT], limit: 100) {\n        nodes {\n          id\n          ...MemberFields\n        }\n      }\n      childrenAccounts {\n        nodes {\n          id\n          slug\n          type\n          name\n          members(includeInherited: false, role: [ADMIN, MEMBER, ACCOUNTANT], limit: 100) {\n            nodes {\n              id\n              ...MemberFields\n            }\n          }\n        }\n      }\n    }\n    memberInvitations(account: $account) {\n      id\n      role\n      since\n      createdAt\n      description\n      account: memberAccount {\n        id\n        name\n        slug\n        type\n        imageUrl(height: 64)\n        ... on Individual {\n          email\n        }\n      }\n    }\n  }\n  ", "\n"])), memberFieldsFragment);
;// CONCATENATED MODULE: ./components/edit-collective/sections/team/EditMemberModal.js






var EditMemberModal_templateObject, EditMemberModal_templateObject2, EditMemberModal_templateObject3;

function EditMemberModal_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function EditMemberModal_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? EditMemberModal_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : EditMemberModal_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





















var editMemberMutation = (0,graphql_tag_lib/* default */.ZP)(EditMemberModal_templateObject || (EditMemberModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation EditMember(\n    $memberAccount: AccountReferenceInput!\n    $account: AccountReferenceInput!\n    $role: MemberRole\n    $description: String\n    $since: DateTime\n  ) {\n    editMember(\n      memberAccount: $memberAccount\n      account: $account\n      role: $role\n      description: $description\n      since: $since\n    ) {\n      id\n      role\n      description\n      since\n    }\n  }\n"])));
var editMemberInvitationMutation = (0,graphql_tag_lib/* default */.ZP)(EditMemberModal_templateObject2 || (EditMemberModal_templateObject2 = taggedTemplateLiteral_default()(["\n  mutation EditMemberInvitation(\n    $memberAccount: AccountReferenceInput!\n    $account: AccountReferenceInput!\n    $role: MemberRole\n    $description: String\n    $since: DateTime\n  ) {\n    editMemberInvitation(\n      memberAccount: $memberAccount\n      account: $account\n      role: $role\n      description: $description\n      since: $since\n    ) {\n      id\n      role\n      description\n      since\n    }\n  }\n"])));
var removeMemberMutation = (0,graphql_tag_lib/* default */.ZP)(EditMemberModal_templateObject3 || (EditMemberModal_templateObject3 = taggedTemplateLiteral_default()(["\n  mutation RemoveMember(\n    $memberAccount: AccountReferenceInput!\n    $account: AccountReferenceInput!\n    $role: MemberRole!\n    $isInvitation: Boolean\n  ) {\n    removeMember(memberAccount: $memberAccount, account: $account, role: $role, isInvitation: $isInvitation)\n  }\n"])));

var EditMemberModal = function EditMemberModal(props) {
  var intl = props.intl,
      member = props.member,
      collective = props.collective,
      canRemove = props.canRemove,
      isLastAdmin = props.isLastAdmin,
      cancelHandler = props.cancelHandler,
      onEdit = props.onEdit;

  var _useLoggedInUser = (0,useLoggedInUser/* default */.Z)(),
      LoggedInUser = _useLoggedInUser.LoggedInUser,
      refetchLoggedInUser = _useLoggedInUser.refetchLoggedInUser;

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var isInvitation = get_default()(member, '__typename') === 'MemberInvitation';
  var messages = (0,lib.defineMessages)({
    cantRemoveLast: {
      id: "members.remove.cantRemoveLast",
      defaultMessage: [{
        "type": 0,
        "value": "The last admin cannot be removed. Please add another admin first."
      }]
    },
    removeConfirm: {
      id: "members.remove.confirm",
      defaultMessage: [{
        "type": 0,
        "value": "Do you really want to remove "
      }, {
        "type": 1,
        "value": "name"
      }, {
        "type": 0,
        "value": " @"
      }, {
        "type": 1,
        "value": "slug"
      }, {
        "type": 0,
        "value": " "
      }, {
        "type": 5,
        "value": "hasEmail",
        "options": {
          "1": {
            "value": [{
              "type": 0,
              "value": "("
            }, {
              "type": 1,
              "value": "email"
            }, {
              "type": 0,
              "value": ")"
            }]
          },
          "other": {
            "value": []
          }
        }
      }, {
        "type": 0,
        "value": "?"
      }]
    }
  });

  var _useMutation = (0,client.useMutation)(editMemberMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      editMemberAccount = _useMutation2[0],
      isEditingMember = _useMutation2[1].loading;

  var _useMutation3 = (0,client.useMutation)(editMemberInvitationMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation4 = slicedToArray_default()(_useMutation3, 2),
      editMemberInvitationAccount = _useMutation4[0],
      isEditingMemberInvitation = _useMutation4[1].loading;

  var _useMutation5 = (0,client.useMutation)(removeMemberMutation, {
    context: helpers/* API_V2_CONTEXT */.T,
    refetchQueries: [{
      query: teamSectionQuery,
      context: helpers/* API_V2_CONTEXT */.T,
      variables: {
        collectiveSlug: get_default()(collective, 'slug'),
        account: {
          slug: get_default()(collective, 'slug')
        }
      }
    }],
    awaitRefetchQueries: true
  }),
      _useMutation6 = slicedToArray_default()(_useMutation5, 2),
      removeMemberAccount = _useMutation6[0],
      isRemovingMember = _useMutation6[1].loading;

  var submitMemberForm = null;

  var bindSubmitForm = function bindSubmitForm(submitForm) {
    submitMemberForm = submitForm;
  };

  var handleEditMemberMutation = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
      var description, role, since;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              description = values.description, role = values.role, since = values.since;
              _context.prev = 1;
              _context.next = 4;
              return editMemberAccount({
                variables: {
                  memberAccount: {
                    slug: get_default()(member.account, 'slug')
                  },
                  account: {
                    slug: get_default()(collective, 'slug')
                  },
                  description: description,
                  role: role,
                  since: since
                }
              });

            case 4:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.edit.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Member updated successfully."
                  }]
                })
              });

              if (!(get_default()(member, 'account.slug') === get_default()(LoggedInUser, 'collective.slug'))) {
                _context.next = 8;
                break;
              }

              _context.next = 8;
              return refetchLoggedInUser();

            case 8:
              onEdit === null || onEdit === void 0 ? void 0 : onEdit();
              cancelHandler();
              _context.next = 15;
              break;

            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](1);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.edit.error",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Failed to update member."
                  }]
                }),
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0),
                variant: 'light'
              });

            case 15:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[1, 12]]);
    }));

    return function handleEditMemberMutation(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleEditMemberInvitationMutation = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(values) {
      var description, role, since;
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              description = values.description, role = values.role, since = values.since;
              _context2.prev = 1;
              _context2.next = 4;
              return editMemberInvitationAccount({
                variables: {
                  memberAccount: {
                    slug: get_default()(member, 'memberAccount.slug')
                  },
                  account: {
                    slug: get_default()(collective, 'slug')
                  },
                  description: description,
                  role: role,
                  since: since
                }
              });

            case 4:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.memberInvitation.edit.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Member invitation updated successfully."
                  }]
                })
              });
              onEdit === null || onEdit === void 0 ? void 0 : onEdit();
              cancelHandler();
              _context2.next = 12;
              break;

            case 9:
              _context2.prev = 9;
              _context2.t0 = _context2["catch"](1);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                title: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.memberInvitation.edit.error",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Failed to update member invitation."
                  }]
                }),
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context2.t0)
              });

            case 12:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[1, 9]]);
    }));

    return function handleEditMemberInvitationMutation(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  var confirmRemoveMember = function confirmRemoveMember(memberEntry) {
    var account = memberEntry.account || memberEntry.memberAccount;
    return window.confirm(intl.formatMessage(messages.removeConfirm, EditMemberModal_objectSpread(EditMemberModal_objectSpread({}, account), {}, {
      hasEmail: Number(account.email)
    })));
  };

  var handleRemoveMemberMutation = /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3() {
      return regenerator_default().wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              if (!confirmRemoveMember(member)) {
                _context3.next = 19;
                break;
              }

              _context3.prev = 1;
              _context3.next = 4;
              return removeMemberAccount({
                variables: {
                  memberAccount: {
                    slug: get_default()(member, 'account.slug') || get_default()(member, 'memberAccount.slug')
                  },
                  account: {
                    slug: get_default()(collective, 'slug')
                  },
                  role: get_default()(member, 'role'),
                  isInvitation: isInvitation
                }
              });

            case 4:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: isInvitation ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.memberInvitation.remove.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Member invitation removed successfully."
                  }]
                }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.remove.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Member removed successfully."
                  }]
                })
              });

              if (!(get_default()(member, 'account.slug') === get_default()(LoggedInUser, 'collective.slug'))) {
                _context3.next = 10;
                break;
              }

              _context3.next = 8;
              return props.router.push({
                pathname: "/".concat(get_default()(collective, 'slug'))
              });

            case 8:
              _context3.next = 10;
              return refetchLoggedInUser();

            case 10:
              onEdit === null || onEdit === void 0 ? void 0 : onEdit();
              cancelHandler();
              _context3.next = 17;
              break;

            case 14:
              _context3.prev = 14;
              _context3.t0 = _context3["catch"](1);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                title: isInvitation ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.remove.error",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Failed to remove member."
                  }]
                }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.memberInvitation.remove.error",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Failed to remove member invitation."
                  }]
                }),
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context3.t0)
              });

            case 17:
              _context3.next = 20;
              break;

            case 19:
              cancelHandler();

            case 20:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[1, 14]]);
    }));

    return function handleRemoveMemberMutation() {
      return _ref3.apply(this, arguments);
    };
  }();

  var handleSubmitForm = function handleSubmitForm() {
    if (submitMemberForm) {
      submitMemberForm();
    }
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: 688,
      onClose: cancelHandler,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "editTeam.member.edit",
          defaultMessage: [{
            "type": 0,
            "value": "Edit Team Member"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(team_MemberForm, {
          intl: intl,
          collectiveImg: get_default()(collective, 'imageUrl'),
          member: member,
          bindSubmitForm: bindSubmitForm,
          triggerSubmit: isInvitation ? handleEditMemberInvitationMutation : handleEditMemberMutation
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          justifyContent: "flex-end",
          children: isLastAdmin && member.role === roles/* default.ADMIN */.Z.ADMIN ? /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
            place: "bottom",
            content: function content() {
              return intl.formatMessage(messages.cantRemoveLast);
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
              mt: 4,
              disabled: true,
              buttonSize: "tiny",
              buttonStyle: "dangerSecondary",
              "data-cy": "remove-member",
              onClick: handleRemoveMemberMutation,
              children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
                alignItems: "center",
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Delete_esm/* Delete */.H, {
                  height: 25
                }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "Remove",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Remove"
                  }]
                })]
              })
            })
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mt: 4,
            disabled: !canRemove,
            buttonSize: "tiny",
            buttonStyle: "dangerSecondary",
            "data-cy": "remove-member",
            onClick: handleRemoveMemberMutation,
            loading: isRemovingMember,
            children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
              alignItems: "center",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Delete_esm/* Delete */.H, {
                height: 25
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "Remove",
                defaultMessage: [{
                  "type": 0,
                  "value": "Remove"
                }]
              })]
            })
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        mt: 5,
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            my: 1,
            autoFocus: true,
            onClick: cancelHandler,
            disabled: isEditingMember || isEditingMemberInvitation || isRemovingMember,
            "data-cy": "confirmation-modal-cancel",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            my: 1,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isEditingMember || isEditingMemberInvitation,
            disabled: isRemovingMember,
            onClick: handleSubmitForm,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })
      })]
    })
  });
};

EditMemberModal.defaultProps = {
  canRemove: true
};
EditMemberModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "EditMemberModal",
  "props": {
    "canRemove": {
      "defaultValue": {
        "value": "true",
        "computed": false
      },
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "cancelHandler": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "onEdit": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "isLastAdmin": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "member": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ var team_EditMemberModal = ((0,next_router.withRouter)(EditMemberModal));
;// CONCATENATED MODULE: ./components/edit-collective/sections/team/InviteMemberModal.js





var InviteMemberModal_templateObject;



















var inviteMemberMutation = (0,graphql_tag_lib/* default */.ZP)(InviteMemberModal_templateObject || (InviteMemberModal_templateObject = taggedTemplateLiteral_default()(["\n  mutation InviteMember(\n    $memberAccount: AccountReferenceInput!\n    $account: AccountReferenceInput!\n    $role: MemberRole!\n    $description: String\n    $since: DateTime\n  ) {\n    inviteMember(\n      memberAccount: $memberAccount\n      account: $account\n      role: $role\n      description: $description\n      since: $since\n    ) {\n      id\n      role\n      description\n      since\n    }\n  }\n"])));

var InviteMemberModal = function InviteMemberModal(props) {
  var intl = props.intl,
      collective = props.collective,
      membersIds = props.membersIds,
      cancelHandler = props.cancelHandler;

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  var _React$useState = react.useState(null),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      member = _React$useState2[0],
      setMember = _React$useState2[1];

  var mutationOptions = {
    context: helpers/* API_V2_CONTEXT */.T,
    refetchQueries: [{
      query: teamSectionQuery,
      context: helpers/* API_V2_CONTEXT */.T,
      variables: {
        collectiveSlug: get_default()(collective, 'slug'),
        account: {
          slug: get_default()(collective, 'slug')
        }
      }
    }],
    awaitRefetchQueries: true
  };

  var _useMutation = (0,client.useMutation)(inviteMemberMutation, mutationOptions),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      inviteMemberAccount = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      isInviting = _useMutation2$.loading,
      inviteError = _useMutation2$.error;

  var submitMemberForm = null;

  var bindSubmitForm = function bindSubmitForm(submitForm) {
    submitMemberForm = submitForm;
  };

  var handleInviteMemberMutation = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(values) {
      var description, role, since;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              description = values.description, role = values.role, since = values.since;
              _context.prev = 1;
              _context.next = 4;
              return inviteMemberAccount({
                variables: {
                  memberAccount: {
                    slug: get_default()(member, 'slug')
                  },
                  account: {
                    slug: get_default()(collective, 'slug')
                  },
                  description: description,
                  role: role,
                  since: since,
                  isInvitee: true
                }
              });

            case 4:
              addToast({
                type: ToastProvider/* TOAST_TYPE.SUCCESS */["do"].SUCCESS,
                message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.invite.success",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Member invited successfully."
                  }]
                })
              });
              cancelHandler();
              _context.next = 11;
              break;

            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](1);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                message: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                  id: "editTeam.member.invite.error",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Failed to invite member."
                  }]
                })
              });

            case 11:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[1, 8]]);
    }));

    return function handleInviteMemberMutation(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var handleSubmitForm = function handleSubmitForm() {
    if (submitMemberForm) {
      submitMemberForm();
    }
  };

  return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* default */.ZP, {
      width: 688,
      onClose: cancelHandler,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalHeader */.xB, {
        mb: 4,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "editTeam.member.invite",
          defaultMessage: [{
            "type": 0,
            "value": "Invite Team Member"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(StyledModal/* ModalBody */.fe, {
        children: [inviteError && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          alignItems: "center",
          justifyContent: "center",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
            type: "error",
            withIcon: true,
            m: [1, 3],
            "data-cy": "cof-error-message",
            children: inviteError.message
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
          m: 1,
          flexDirection: "column",
          mb: 2,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
            fontSize: "14px",
            lineHeight: "20px",
            fontWeight: 700,
            mb: 1,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "Tags.USER",
              defaultMessage: [{
                "type": 0,
                "value": "User"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CollectivePickerAsync/* default */.Z, {
            inputId: "member-collective-picker",
            creatable: true,
            width: "100%",
            minWidth: 325,
            onChange: function onChange(option) {
              return setMember(option.value);
            },
            isDisabled: Boolean(member),
            types: [constants_collectives/* CollectiveType.USER */.eV.USER],
            filterResults: function filterResults(collectives) {
              return collectives.filter(function (c) {
                return !membersIds.includes(c.id);
              });
            },
            "data-cy": "member-collective-picker"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(team_MemberForm, {
          intl: intl,
          collectiveImg: get_default()(collective, 'imageUrl'),
          bindSubmitForm: bindSubmitForm,
          triggerSubmit: handleInviteMemberMutation
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledModal/* ModalFooter */.mz, {
        mt: 6,
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
          display: "flex",
          justifyContent: ['center', 'flex-end'],
          flexWrap: "Wrap",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            mx: 20,
            my: 1,
            autoFocus: true,
            minWidth: 140,
            onClick: cancelHandler,
            disabled: isInviting,
            "data-cy": "confirmation-modal-cancel",
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "actions.cancel",
              defaultMessage: [{
                "type": 0,
                "value": "Cancel"
              }]
            })
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
            my: 1,
            minWidth: 140,
            buttonStyle: "primary",
            "data-cy": "confirmation-modal-continue",
            loading: isInviting,
            onClick: handleSubmitForm,
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "save",
              defaultMessage: [{
                "type": 0,
                "value": "Save"
              }]
            })
          })]
        })
      })]
    })
  });
};

InviteMemberModal.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "InviteMemberModal",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "cancelHandler": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "intl": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "membersIds": {
      "description": "",
      "type": {
        "name": "array"
      },
      "required": false
    }
  }
};
/* harmony default export */ var team_InviteMemberModal = (InviteMemberModal);
;// CONCATENATED MODULE: ./components/edit-collective/sections/team/ResendMemberInviteBtn.js














var ResendMemberInviteBtn = function ResendMemberInviteBtn(_ref) {
  var _data$inviteMember;

  var member = _ref.member,
      collective = _ref.collective;

  var _useMutation = (0,client.useMutation)(inviteMemberMutation, {
    context: helpers/* API_V2_CONTEXT */.T
  }),
      _useMutation2 = slicedToArray_default()(_useMutation, 2),
      inviteMember = _useMutation2[0],
      _useMutation2$ = _useMutation2[1],
      loading = _useMutation2$.loading,
      error = _useMutation2$.error,
      data = _useMutation2$.data;

  var success = !error && (data === null || data === void 0 ? void 0 : (_data$inviteMember = data.inviteMember) === null || _data$inviteMember === void 0 ? void 0 : _data$inviteMember.id);
  var intl = (0,useIntl/* default */.Z)();

  var _useToasts = (0,ToastProvider/* useToasts */.e1)(),
      addToast = _useToasts.addToast;

  return /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
    buttonStyle: success ? 'successSecondary' : 'standard',
    buttonSize: "tiny",
    mr: 1,
    loading: loading,
    disabled: success,
    "data-cy": "resend-invite-btn",
    onClick: /*#__PURE__*/asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return inviteMember({
                variables: {
                  memberAccount: {
                    id: member.account.id
                  },
                  account: {
                    legacyId: (0,collective_lib/* getLegacyIdForCollective */.Cl)(collective)
                  },
                  role: member.role
                }
              });

            case 3:
              _context.next = 8;
              break;

            case 5:
              _context.prev = 5;
              _context.t0 = _context["catch"](0);
              addToast({
                type: ToastProvider/* TOAST_TYPE.ERROR */["do"].ERROR,
                title: intl.formatMessage({
                  id: "mGnvLd",
                  defaultMessage: [{
                    "type": 0,
                    "value": "Cannot send member invitation"
                  }]
                }),
                message: (0,errors/* i18nGraphqlException */.t2)(intl, _context.t0)
              });

            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 5]]);
    })),
    children: success ? /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "ResendInviteSuccessful",
      defaultMessage: [{
        "type": 0,
        "value": "Invite sent"
      }]
    }) : /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "ResendInvite",
      defaultMessage: [{
        "type": 0,
        "value": "Resend invite"
      }]
    })
  });
};

ResendMemberInviteBtn.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ResendMemberInviteBtn",
  "props": {
    "collective": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": true
    },
    "member": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "role": {
            "name": "string",
            "required": false
          },
          "account": {
            "name": "shape",
            "value": {
              "id": {
                "name": "string",
                "required": true
              }
            },
            "required": true
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var team_ResendMemberInviteBtn = (ResendMemberInviteBtn);
;// CONCATENATED MODULE: ./components/admin-panel/sections/Team.tsx




































var Team_MemberContainer = (0,styled_components_browser_esm/* default */.ZP)(Container/* default */.Z).withConfig({
  displayName: "Team__MemberContainer",
  componentId: "sc-h5dpn4-0"
})(["display:block;min-width:164px;background:white;width:170px;height:270px;border-radius:8px;border:1px solid #c0c5cc;"]);
var InviteNewCard = (0,styled_components_browser_esm/* default */.ZP)(Team_MemberContainer).withConfig({
  displayName: "Team__InviteNewCard",
  componentId: "sc-h5dpn4-1"
})(["border:1px dashed #c0c5cc;cursor:pointer;"]);
/** A container to center the logo above a horizontal bar */

var MemberLogoContainer = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "Team__MemberLogoContainer",
  componentId: "sc-h5dpn4-2"
})(["display:flex;justify-content:center;align-items:center;width:100%;border-top:1px solid #e6e8eb;"]);

var MemberCard = function MemberCard(_ref) {
  var _account$host, _account$host$policie, _account$host$policie2, _account$parent;

  var member = _ref.member,
      account = _ref.account,
      index = _ref.index,
      nbAdmins = _ref.nbAdmins,
      refetch = _ref.refetch;
  var intl = (0,useIntl/* default */.Z)();

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      showEditModal = _React$useState2[0],
      setShowEditModal = _React$useState2[1];

  var isInvitation = member.__typename === 'MemberInvitation';
  var isInherited = member.inherited;
  var memberCollective = member.account;
  var collectiveId = memberCollective.id;
  var memberKey = member.id ? "member-".concat(member.id) : "collective-".concat(collectiveId);
  var isAdmin = member.role === roles/* default.ADMIN */.Z.ADMIN;
  var isLastAdmin = isAdmin && member.id && nbAdmins <= (((_account$host = account.host) === null || _account$host === void 0 ? void 0 : (_account$host$policie = _account$host.policies) === null || _account$host$policie === void 0 ? void 0 : (_account$host$policie2 = _account$host$policie.COLLECTIVE_MINIMUM_ADMINS) === null || _account$host$policie2 === void 0 ? void 0 : _account$host$policie2.numberOfAdmins) || 1);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(Team_MemberContainer, {
    position: "relative",
    "data-cy": "member-".concat(index),
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
      position: "absolute",
      top: "1rem",
      right: "1rem",
      children: [showEditModal && /*#__PURE__*/(0,jsx_runtime.jsx)(team_EditMemberModal, {
        intl: intl,
        member: member,
        collective: account,
        cancelHandler: function cancelHandler() {
          return setShowEditModal(false);
        },
        onEdit: refetch,
        isLastAdmin: isLastAdmin,
        canRemove: !isLastAdmin
      }, "member-edit-modal-".concat(index, "-").concat(memberKey)), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
        noTooltip: !isInherited,
        content: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "MemberEdit.Disable.Inherited",
          defaultMessage: [{
            "type": 0,
            "value": "This member is inherited from "
          }, {
            "type": 1,
            "value": "parentCollectiveName"
          }, {
            "type": 0,
            "value": " and cannot be removed."
          }],
          values: {
            parentCollectiveName: (_account$parent = account.parent) === null || _account$parent === void 0 ? void 0 : _account$parent.name
          }
        }),
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledRoundButton/* default */.Z, {
          onClick: function onClick() {
            return setShowEditModal(true);
          },
          size: 26,
          disabled: isInherited,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Edit_esm/* Edit */.I, {
            height: 16
          })
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      flexDirection: "column",
      alignItems: "center",
      mb: 2,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MemberLogoContainer, {
        mt: 50,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
          mt: -28,
          src: get_default()(memberCollective, 'imageUrl'),
          radius: 56
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "14px",
        lineHeight: "20px",
        m: 2,
        textAlign: "center",
        children: get_default()(memberCollective, 'name')
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTag/* default */.Z, {
        textTransform: "uppercase",
        display: "block",
        mb: 2,
        closeButtonProps: false,
        children: (0,member_role/* default */.Z)(intl, get_default()(member, 'role'))
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
        fontSize: "10px",
        lineHeight: "14px",
        fontWeight: 400,
        color: "#9D9FA3",
        mb: 2,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "user.since.label",
          defaultMessage: [{
            "type": 0,
            "value": "Since"
          }]
        }), ":", ' ', /*#__PURE__*/(0,jsx_runtime.jsx)(lib.FormattedDate, {
          value: get_default()(member, 'since')
        })]
      }), !isInvitation && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mb: 4,
        overflow: "hidden",
        height: 32,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
          fontSize: "11px",
          lineHeight: "16px",
          mx: 2,
          fontWeight: 400,
          children: truncate_default()(get_default()(member, 'description'), {
            length: 30
          })
        })
      }), isInvitation && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
          mb: 4,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTooltip/* default */.Z, {
            content: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
              id: "members.pending.details",
              defaultMessage: [{
                "type": 0,
                "value": "This person has not accepted their invitation yet"
              }]
            }),
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledTag/* default */.Z, {
              "data-cy": "member-pending-tag",
              textTransform: "uppercase",
              display: "block",
              type: "info",
              closeButtonProps: false,
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "Pending",
                defaultMessage: [{
                  "type": 0,
                  "value": "Pending"
                }]
              })
            })
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(team_ResendMemberInviteBtn, {
          member: member,
          collective: account
        })]
      })]
    })]
  }, "member-".concat(index, "-").concat(memberKey, "-").concat(account.id));
};

var ChildrenCollectiveSection = function ChildrenCollectiveSection(_ref2) {
  var account = _ref2.account,
      refetch = _ref2.refetch;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "16px",
        mt: 4,
        children: account.name
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Grid */.rj, {
      mt: 3,
      gridGap: 20,
      gridTemplateColumns: "repeat(auto-fill, 164px)",
      flexGrow: "1",
      gap: "2px",
      justifyContent: ['center', null, 'start'],
      children: account.members.nodes.map(function (m, idx) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(MemberCard, {
          index: idx,
          member: m,
          account: account,
          refetch: refetch
        }, "".concat(m.id, "-").concat(account.id));
      })
    })]
  });
};

var Team = function Team(props) {
  var _data$account, _data$account2, _data$account3, _data$account3$member, _data$account4, _data$account4$childr, _data$account4$childr2, _host$policies, _host$policies$COLLEC, _host$policies2, _host$policies3;

  var _React$useState3 = react.useState(false),
      _React$useState4 = slicedToArray_default()(_React$useState3, 2),
      showInviteModal = _React$useState4[0],
      setShowInviteModal = _React$useState4[1];

  var intl = (0,useIntl/* default */.Z)();

  var _useQuery = (0,client.useQuery)(teamSectionQuery, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      collectiveSlug: props.account.slug,
      account: {
        slug: props.account.slug
      }
    }
  }),
      loading = _useQuery.loading,
      data = _useQuery.data,
      refetch = _useQuery.refetch,
      error = _useQuery.error;

  if (loading) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Loading/* default */.Z, {});
  } else if (error) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "error",
      withIcon: true,
      fontSize: "13px",
      children: (0,errors/* i18nGraphqlException */.t2)(intl, error)
    });
  } else if (data !== null && data !== void 0 && (_data$account = data.account) !== null && _data$account !== void 0 && _data$account.isFrozen) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(MessageBox/* default */.Z, {
      type: "warning",
      fontSize: "13px",
      withIcon: true,
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "jcAKng",
        defaultMessage: [{
          "type": 0,
          "value": "This account is currently frozen, its team members therefore cannot be edited."
        }]
      }), ' ', (0,allowed_features/* isFeatureEnabled */.cr)(data.account.host, allowed_features/* FEATURES.CONTACT_FORM */.h6.CONTACT_FORM) && /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "KxBiJC",
        defaultMessage: [{
          "type": 0,
          "value": "Please "
        }, {
          "type": 8,
          "value": "ContactLink",
          "children": [{
            "type": 0,
            "value": "contact"
          }]
        }, {
          "type": 0,
          "value": " your fiscal host for more details."
        }],
        values: {
          ContactLink: (0,I18nFormatters/* getI18nLink */.fw)({
            href: "".concat((0,url_helpers/* getCollectivePageRoute */.x0)(data.account.host), "/contact")
          })
        }
      })]
    });
  }

  var host = data === null || data === void 0 ? void 0 : (_data$account2 = data.account) === null || _data$account2 === void 0 ? void 0 : _data$account2.host;
  var members = [].concat(toConsumableArray_default()((data === null || data === void 0 ? void 0 : (_data$account3 = data.account) === null || _data$account3 === void 0 ? void 0 : (_data$account3$member = _data$account3.members) === null || _data$account3$member === void 0 ? void 0 : _data$account3$member.nodes) || []), toConsumableArray_default()((data === null || data === void 0 ? void 0 : data.memberInvitations) || []));
  var nbAdmins = members.filter(function (m) {
    return m.role === roles/* default.ADMIN */.Z.ADMIN && m.id;
  }).length;
  var childrenAccountsWithMembers = (data === null || data === void 0 ? void 0 : (_data$account4 = data.account) === null || _data$account4 === void 0 ? void 0 : (_data$account4$childr = _data$account4.childrenAccounts) === null || _data$account4$childr === void 0 ? void 0 : (_data$account4$childr2 = _data$account4$childr.nodes) === null || _data$account4$childr2 === void 0 ? void 0 : _data$account4$childr2.filter(function (child) {
    var _child$members, _child$members$nodes;

    return ((_child$members = child.members) === null || _child$members === void 0 ? void 0 : (_child$members$nodes = _child$members.nodes) === null || _child$members$nodes === void 0 ? void 0 : _child$members$nodes.length) > 0;
  })) || [];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "24px",
        fontWeight: "700",
        lineHeight: "32px",
        mb: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "ContributorsFilter.Core",
          defaultMessage: [{
            "type": 0,
            "value": "Team"
          }]
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
      children: [[constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE, constants_collectives/* CollectiveType.FUND */.eV.FUND].includes(props.account.type) && Boolean(host === null || host === void 0 ? void 0 : (_host$policies = host.policies) === null || _host$policies === void 0 ? void 0 : (_host$policies$COLLEC = _host$policies.COLLECTIVE_MINIMUM_ADMINS) === null || _host$policies$COLLEC === void 0 ? void 0 : _host$policies$COLLEC.numberOfAdmins) && /*#__PURE__*/(0,jsx_runtime.jsxs)(Text.P, {
        lineHeight: "20px",
        letterSpacing: "normal",
        mt: 3,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "XW00me",
          defaultMessage: [{
            "type": 0,
            "value": "Your host requires that Collectives have "
          }, {
            "type": 6,
            "value": "numberOfAdmins",
            "options": {
              "one": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " active administrator"
                }]
              },
              "other": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " active administrators"
                }]
              }
            },
            "offset": 0,
            "pluralType": "cardinal"
          }, {
            "type": 0,
            "value": "."
          }],
          values: host.policies.COLLECTIVE_MINIMUM_ADMINS
        }), (host === null || host === void 0 ? void 0 : (_host$policies2 = host.policies) === null || _host$policies2 === void 0 ? void 0 : _host$policies2.COLLECTIVE_MINIMUM_ADMINS.freeze) && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: ["\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "kOVj5R",
            defaultMessage: [{
              "type": 0,
              "value": "In case of a shortfall, your collective will be frozen until the minimum required administrators are added."
            }],
            values: host.policies.COLLECTIVE_MINIMUM_ADMINS
          })]
        })]
      }), (host === null || host === void 0 ? void 0 : (_host$policies3 = host.policies) === null || _host$policies3 === void 0 ? void 0 : _host$policies3.COLLECTIVE_MINIMUM_ADMINS) && nbAdmins < host.policies.COLLECTIVE_MINIMUM_ADMINS.numberOfAdmins && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
        type: "error",
        my: 3,
        fontSize: "13px",
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "vuvLi/",
          defaultMessage: [{
            "type": 0,
            "value": "Your collective doesn’t meet the requirements of having a minimum of "
          }, {
            "type": 6,
            "value": "numberOfAdmins",
            "options": {
              "one": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " administrator"
                }]
              },
              "other": {
                "value": [{
                  "type": 7
                }, {
                  "type": 0,
                  "value": " administrators"
                }]
              }
            },
            "offset": 0,
            "pluralType": "cardinal"
          }, {
            "type": 0,
            "value": ". Add more administrators to comply with your host’s policy."
          }],
          values: host.policies.COLLECTIVE_MINIMUM_ADMINS
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(StyledHr/* default */.Z, {
        mt: 3,
        borderColor: "black.200",
        flex: "1 1"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        as: "ul",
        fontSize: "14px",
        lineHeight: "18px",
        mt: 4,
        children: [roles/* default.ADMIN */.Z.ADMIN, roles/* default.MEMBER */.Z.MEMBER, roles/* default.ACCOUNTANT */.Z.ACCOUNTANT].map(function (role) {
          return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
            as: "li",
            mb: 2,
            children: (0,MemberRoleDescription/* default */.Z)({
              role: role
            })
          }, role);
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
      mt: 4,
      gridGap: 20,
      gridTemplateColumns: "repeat(auto-fill, 164px)",
      flexGrow: "1",
      gap: "2px",
      justifyContent: ['center', null, 'start'],
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(InviteNewCard, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
          alignItems: "center",
          justifyContent: "center",
          height: "100%",
          onClick: function onClick() {
            return setShowInviteModal(true);
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
            flexDirection: "column",
            justifyContent: "center",
            alignItems: "center",
            height: "100%",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(StyledRoundButton/* default */.Z, {
              "data-cy": "invite-member-btn",
              buttonStyle: "dark",
              fontSize: 25,
              children: "+"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
              mt: 3,
              color: "black.700",
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
                id: "editTeam.member.invite",
                defaultMessage: [{
                  "type": 0,
                  "value": "Invite Team Member"
                }]
              })
            })]
          })
        })
      }), members.map(function (m, idx) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(MemberCard, {
          index: idx,
          member: m,
          account: props.account,
          nbAdmins: nbAdmins,
          refetch: refetch
        }, "".concat(m.id, "-").concat(props.account.id));
      })]
    }), childrenAccountsWithMembers.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        fontSize: "18px",
        fontWeight: "700",
        lineHeight: "32px",
        mt: 5,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "OtherAdmins",
          defaultMessage: [{
            "type": 0,
            "value": "Other Admins"
          }]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.P, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
          id: "068S+6",
          defaultMessage: [{
            "type": 0,
            "value": "This collective has Events and Projects that hold members with privileged access roles outside your admin team."
          }]
        })
      }), childrenAccountsWithMembers.map(function (child) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)(ChildrenCollectiveSection, {
          account: child,
          refetch: refetch
        }, child.id);
      })]
    }), error && /*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
      type: "error",
      withIcon: true,
      my: 3,
      children: error.message
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Flex */.kC, {
      justifyContent: "center",
      flexWrap: "wrap",
      mt: 5,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
        href: "/".concat(props.account.slug),
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(StyledButton/* default */.Z, {
          mx: 2,
          minWidth: 200,
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "ViewCollectivePage",
            defaultMessage: [{
              "type": 0,
              "value": "View Profile page"
            }]
          })
        })
      })
    }), showInviteModal && /*#__PURE__*/(0,jsx_runtime.jsx)(team_InviteMemberModal, {
      intl: intl,
      collective: props.account,
      membersIds: members.map(function (m) {
        return m.id;
      }),
      cancelHandler: function cancelHandler() {
        return setShowInviteModal(false);
      }
    })]
  });
};

Team.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Team"
};
/* harmony default export */ var sections_Team = (Team);
;// CONCATENATED MODULE: ./components/admin-panel/AdminPanelSection.js



var _ADMIN_PANEL_SECTIONS;























var ADMIN_PANEL_SECTIONS = (_ADMIN_PANEL_SECTIONS = {}, defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.HOSTED_COLLECTIVES, host_dashboard_HostDashboardHostedCollectives), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.FINANCIAL_CONTRIBUTIONS, sections_FinancialContributions), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.PENDING_CONTRIBUTIONS, PendingContributions), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.EXPENSES, host_dashboard_HostDashboardExpenses), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.PENDING_APPLICATIONS, applications_PendingApplications), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.REPORTS, host_dashboard_HostDashboardReports), defineProperty_default()(_ADMIN_PANEL_SECTIONS, HOST_DASHBOARD_SECTIONS.HOST_VIRTUAL_CARDS, sections_HostVirtualCards), defineProperty_default()(_ADMIN_PANEL_SECTIONS, COLLECTIVE_SECTIONS.NOTIFICATIONS, sections_NotificationsSettings), defineProperty_default()(_ADMIN_PANEL_SECTIONS, COLLECTIVE_SECTIONS.TEAM, sections_Team), _ADMIN_PANEL_SECTIONS);

var FISCAL_HOST_SETTINGS_SECTIONS = defineProperty_default()({}, FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS, sections_InvoicesReceipts);

var AdminPanelSection_Title = (0,styled_components_browser_esm/* default */.ZP)(Text.H2).withConfig({
  displayName: "AdminPanelSection__Title",
  componentId: "sc-1bhvncb-0"
})(["font-size:24px;font-weight:700;line-height:32px;"]);

var AdminPanelSection = function AdminPanelSection(_ref) {
  var collective = _ref.collective,
      isLoading = _ref.isLoading,
      section = _ref.section,
      subpath = _ref.subpath;

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  if (isLoading) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 26,
        mb: 4,
        maxWidth: 500
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 300
      })]
    });
  }

  var AdminSectionComponent = ADMIN_PANEL_SECTIONS[section];

  if (AdminSectionComponent) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      width: "100%",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(AdminSectionComponent, {
        account: collective,
        hostSlug: collective.slug,
        subpath: subpath,
        isNewAdmin: true
      })
    });
  } // Fiscal Host Settings


  var FiscalHostSettingsComponent = FISCAL_HOST_SETTINGS_SECTIONS[section];

  if (FiscalHostSettingsComponent) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
      width: "100%",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(FiscalHostSettingsComponent, {
        collective: collective
      })
    });
  } // Form


  if (values_default()(LEGACY_COLLECTIVE_SETTINGS_SECTIONS).includes(section)) {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(Container/* default */.Z, {
      width: "100%",
      children: [SECTION_LABELS[section] && /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
        mb: 3,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(AdminPanelSection_Title, {
          children: formatMessage(SECTION_LABELS[section])
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(sections_AccountSettings, {
        account: collective,
        section: section
      })]
    });
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(Container/* default */.Z, {
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(NotFound/* default */.Z, {})
  });
};

AdminPanelSection.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelSection",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "subpath": {
      "description": "",
      "type": {
        "name": "arrayOf",
        "value": {
          "name": "string"
        }
      },
      "required": false
    },
    "collective": {
      "description": "The account. Can be null if isLoading is true",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": true
          },
          "name": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var admin_panel_AdminPanelSection = (AdminPanelSection);
;// CONCATENATED MODULE: ./components/host-dashboard/constants.js
var HOST_SECTIONS = {
  EXPENSES: 'expenses',
  HOSTED_COLLECTIVES: 'hosted-collectives',
  PENDING_APPLICATIONS: 'pending-applications',
  REPORTS: 'reports',
  FINANCIAL_CONTRIBUTIONS: 'orders'
};
;// CONCATENATED MODULE: ./components/admin-panel/MenuComponents.js



var MenuComponents_excluded = ["if", "children"];

function MenuComponents_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function MenuComponents_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? MenuComponents_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : MenuComponents_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }












var MenuLinkContainer = styled_components_browser_esm/* default.li.withConfig */.ZP.li.withConfig({
  displayName: "MenuComponents__MenuLinkContainer",
  componentId: "sc-v2ensl-0"
})(["margin:4px -8px 0px;a,", "{display:flex;justify-content:space-between;font-weight:500;font-size:13px;line-height:16px;line-height:22px;padding:4px 12px;border-radius:100px;cursor:pointer;color:", ";&:hover{color:", ";}", " ", "}"], components_StyledLink/* default */.Z, function (props) {
  return props.theme.colors.black[700];
}, function (props) {
  return props.theme.colors.primary[700];
}, function (props) {
  return props.isSelected && (0,styled_components_browser_esm/* css */.iv)(["background:", ";color:", ";font-weight:700;font-size:14px;"], function (props) {
    return props.theme.colors.primary[50];
  }, function (props) {
    return props.theme.colors.primary[700];
  });
}, function (props) {
  return props.isStrong && (0,styled_components_browser_esm/* css */.iv)(["font-weight:700;font-size:15px;line-height:22px;"]);
});
var MenuLink = function MenuLink(_ref) {
  var collective = _ref.collective,
      section = _ref.section,
      children = _ref.children,
      onClick = _ref.onClick,
      isSelected = _ref.isSelected,
      isStrong = _ref.isStrong,
      conditional = _ref["if"],
      isBeta = _ref.isBeta;

  var _React$useContext = react.useContext(AdminPanelContext),
      selectedSection = _React$useContext.selectedSection;

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  if (conditional === false) {
    return null;
  }

  if (!children && SECTION_LABELS[section]) {
    children = formatMessage(SECTION_LABELS[section]);
  }

  return /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLinkContainer, {
    isSelected: isSelected || section && selectedSection === section,
    isStrong: isStrong,
    children: onClick ? /*#__PURE__*/(0,jsx_runtime.jsxs)(components_StyledLink/* default */.Z, {
      as: "button",
      onClick: onClick,
      "data-cy": "menu-item-".concat(section),
      children: [children, isBeta ? ' (Beta)' : '']
    }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Link/* default */.Z, {
      href: (0,url_helpers/* getSettingsRoute */.aT)(collective, section),
      "data-cy": "menu-item-".concat(section),
      children: [children, isBeta ? ' (Beta)' : '']
    })
  });
};
var MenuSectionHeader = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "MenuComponents__MenuSectionHeader",
  componentId: "sc-v2ensl-1"
})(["font-weight:700;font-size:12px;line-height:16px;text-transform:uppercase;padding:12px 0;margin-bottom:12px;border-bottom:1px solid ", ";color:", ";"], function (props) {
  return props.theme.colors.black[700];
}, function (props) {
  return props.theme.colors.black[800];
});
var MenuContainer = styled_components_browser_esm/* default.ul.withConfig */.ZP.ul.withConfig({
  displayName: "MenuComponents__MenuContainer",
  componentId: "sc-v2ensl-2"
})(["margin:0;margin-bottom:100px;width:256px;max-width:100%;a{color:", ";&:hover{color:", ";}}&,& ul{list-style-type:none;padding:0;}"], function (props) {
  return props.theme.colors.black[900];
}, function (props) {
  return props.theme.colors.black[700];
});
var MenuGroup = function MenuGroup(_ref2) {
  var conditional = _ref2["if"],
      children = _ref2.children,
      props = objectWithoutProperties_default()(_ref2, MenuComponents_excluded);

  return conditional === false ? null : /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, MenuComponents_objectSpread(MenuComponents_objectSpread({
    as: "ul"
  }, props), {}, {
    children: children
  }));
};
var useSubmenu = function useSubmenu() {
  var _React$useState = react.useState(),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      submenuContent = _React$useState2[0],
      setSubmenu = _React$useState2[1];

  var menuContent = submenuContent && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("ul", {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        onClick: function onClick() {
          return setSubmenu(undefined);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
          children: ["\u2190\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Back",
            defaultMessage: [{
              "type": 0,
              "value": "Back"
            }]
          })]
        })
      })
    }), submenuContent]
  });

  var SubMenu = function SubMenu(_ref3) {
    var label = _ref3.label,
        children = _ref3.children,
        conditional = _ref3["if"];
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuLink, {
      "if": conditional,
      onClick: function onClick() {
        return setSubmenu( /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuSectionHeader, {
            children: label
          }), children]
        }));
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        children: label
      }), "\xA0", /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        children: "\u2192"
      })]
    });
  };

  return {
    menuContent: menuContent,
    SubMenu: SubMenu
  };
};
MenuLink.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuLink",
  "props": {
    "if": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "section": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    },
    "isSelected": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isBeta": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "isStrong": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onClick": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "afterClick": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
MenuGroup.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "MenuGroup",
  "props": {
    "if": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "children": {
      "description": "",
      "type": {
        "name": "node"
      },
      "required": false
    }
  }
};
;// CONCATENATED MODULE: ./components/admin-panel/Menu.js











var Menu_USER = constants_collectives/* CollectiveType.USER */.eV.USER,
    Menu_ORGANIZATION = constants_collectives/* CollectiveType.ORGANIZATION */.eV.ORGANIZATION,
    Menu_COLLECTIVE = constants_collectives/* CollectiveType.COLLECTIVE */.eV.COLLECTIVE,
    Menu_FUND = constants_collectives/* CollectiveType.FUND */.eV.FUND,
    Menu_EVENT = constants_collectives/* CollectiveType.EVENT */.eV.EVENT,
    Menu_PROJECT = constants_collectives/* CollectiveType.PROJECT */.eV.PROJECT;

var OrganizationSettingsMenuLinks = function OrganizationSettingsMenuLinks(_ref) {
  var collective = _ref.collective,
      isAccountantOnly = _ref.isAccountantOnly;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
    children: [!isAccountantOnly && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ABOUT_ORG_SECTIONS.INFO
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ABOUT_ORG_SECTIONS.COLLECTIVE_PAGE
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ABOUT_ORG_SECTIONS.CONNECTED_ACCOUNTS
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ABOUT_ORG_SECTIONS.TEAM
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ORG_BUDGET_SECTIONS.PAYMENT_METHODS
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
      collective: collective,
      section: ORG_BUDGET_SECTIONS.PAYMENT_RECEIPTS
    }), !isAccountantOnly && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ORG_BUDGET_SECTIONS.GIFT_CARDS
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ALL_SECTIONS.WEBHOOKS
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: COLLECTIVE_SECTIONS.FOR_DEVELOPERS
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: COLLECTIVE_SECTIONS.ACTIVITY_LOG
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: FISCAL_HOST_SECTIONS.SECURITY
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ALL_SECTIONS.ADVANCED
      }), !(0,collective_lib/* isHostAccount */.aD)(collective) && /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
        collective: collective,
        section: ALL_SECTIONS.FISCAL_HOSTING
      })]
    })]
  });
};

var Menu = function Menu(_ref2) {
  var collective = _ref2.collective,
      isAccountantOnly = _ref2.isAccountantOnly;

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  var isHost = (0,collective_lib/* isHostAccount */.aD)(collective);
  var isIndividual = (0,collective_lib/* isIndividualAccount */.Sh)(collective);
  var isSimpleOrg = collective.type === 'ORGANIZATION' && !isHost;

  var _useSubmenu = useSubmenu(),
      menuContent = _useSubmenu.menuContent,
      SubMenu = _useSubmenu.SubMenu;

  if (menuContent) {
    return menuContent;
  } else {
    return /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(MenuGroup, {
        "if": isHost,
        mb: 24,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuSectionHeader, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "HostDashboard",
            defaultMessage: [{
              "type": 0,
              "value": "Host Dashboard"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.EXPENSES,
          "if": !isAccountantOnly
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.FINANCIAL_CONTRIBUTIONS,
          "if": !isAccountantOnly
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_DASHBOARD_SECTIONS.PENDING_CONTRIBUTIONS,
          "if": !isAccountantOnly
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.PENDING_APPLICATIONS,
          "if": !isAccountantOnly
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.HOSTED_COLLECTIVES,
          "if": !isAccountantOnly
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_DASHBOARD_SECTIONS.HOST_VIRTUAL_CARDS,
          "if": !isAccountantOnly && (0,allowed_features/* default */.ZP)(collective, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: HOST_SECTIONS.REPORTS,
          isBeta: true
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuGroup, {
        "if": isHost || (0,collective_sections/* isType */.P9)(collective, Menu_ORGANIZATION),
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuSectionHeader, {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "Settings",
            defaultMessage: [{
              "type": 0,
              "value": "Settings"
            }]
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(SubMenu, {
          label: formatMessage(PAGE_TITLES[(0,collective_sections/* getCollectiveTypeKey */.hg)(collective.type)]),
          "if": (0,collective_sections/* isType */.P9)(collective, Menu_ORGANIZATION) && isHost,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OrganizationSettingsMenuLinks, {
            collective: collective,
            isAccountantOnly: isAccountantOnly
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
            collective: collective,
            section: ORG_BUDGET_SECTIONS.TIERS
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(SubMenu, {
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
            id: "AdminPanel.FiscalHostSettings",
            defaultMessage: [{
              "type": 0,
              "value": "Fiscal Host Settings"
            }]
          }),
          "if": isHost && !isAccountantOnly,
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
            collective: collective,
            section: FISCAL_HOST_SECTIONS.FISCAL_HOSTING
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuGroup, {
            "if": isHost,
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
              collective: collective,
              section: FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
              collective: collective,
              section: FISCAL_HOST_SECTIONS.RECEIVING_MONEY
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
              collective: collective,
              section: FISCAL_HOST_SECTIONS.SENDING_MONEY
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
              collective: collective,
              section: FISCAL_HOST_SECTIONS.HOST_VIRTUAL_CARDS_SETTINGS,
              "if": (0,allowed_features/* default */.ZP)(collective, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS)
            }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
              collective: collective,
              section: FISCAL_HOST_SECTIONS.POLICIES,
              "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_USER, Menu_ORGANIZATION])
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuGroup, {
        "if": isSimpleOrg,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(OrganizationSettingsMenuLinks, {
          collective: collective,
          isAccountantOnly: isAccountantOnly
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuGroup, {
        "if": !(0,collective_sections/* isType */.P9)(collective, Menu_ORGANIZATION) && !isAccountantOnly,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.INFO
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.COLLECTIVE_PAGE
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.COLLECTIVE_GOALS,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_PROJECT])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.CONNECTED_ACCOUNTS,
          "if": (0,collective_sections/* isType */.P9)(collective, Menu_COLLECTIVE)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.POLICIES,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.CUSTOM_EMAIL,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_EVENT, Menu_PROJECT])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.EXPORT,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_EVENT, Menu_PROJECT])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.HOST,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.TEAM,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND, Menu_ORGANIZATION, Menu_EVENT, Menu_PROJECT])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.PAYMENT_METHODS,
          "if": ['ACTIVE', 'AVAILABLE'].includes(collective.features.USE_PAYMENT_METHODS)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.PAYMENT_RECEIPTS,
          "if": isIndividual
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.NOTIFICATIONS,
          "if": isIndividual
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: ORG_BUDGET_SECTIONS.GIFT_CARDS,
          "if": ['ACTIVE', 'AVAILABLE'].includes(collective.features.EMIT_GIFT_CARDS)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.VIRTUAL_CARDS,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND, Menu_EVENT, Menu_PROJECT]) && (0,allowed_features/* default */.ZP)(collective.host, allowed_features/* FEATURES.VIRTUAL_CARDS */.h6.VIRTUAL_CARDS) && collective.isApproved
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.TICKETS,
          "if": (0,collective_sections/* isType */.P9)(collective, Menu_EVENT)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.TIERS,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND, Menu_EVENT, Menu_PROJECT])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.WEBHOOKS
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.AUTHORIZED_APPS,
          "if": (0,collective_sections/* isType */.P9)(collective, Menu_USER)
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.USER_SECURITY,
          "if": isIndividual
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.FOR_DEVELOPERS,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_USER])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.ACTIVITY_LOG
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: FISCAL_HOST_SECTIONS.SECURITY,
          "if": (0,collective_sections/* isOneOfTypes */.B_)(collective, [Menu_COLLECTIVE, Menu_FUND, Menu_ORGANIZATION])
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: COLLECTIVE_SECTIONS.ADVANCED
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuGroup, {
        "if": (0,collective_lib/* isSelfHostedAccount */.Eq)(collective) && !isAccountantOnly,
        mt: 24,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: FISCAL_HOST_SECTIONS.INVOICES_RECEIPTS
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: FISCAL_HOST_SECTIONS.RECEIVING_MONEY
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: FISCAL_HOST_SECTIONS.SENDING_MONEY
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuLink, {
          collective: collective,
          section: ORG_BUDGET_SECTIONS.FINANCIAL_CONTRIBUTIONS,
          "if": (0,collective_sections/* isType */.P9)(collective, Menu_COLLECTIVE)
        })]
      })]
    });
  }
};

Menu.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "Menu",
  "props": {
    "isAccountantOnly": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          },
          "host": {
            "name": "object",
            "required": false
          },
          "settings": {
            "name": "object",
            "required": false
          },
          "features": {
            "name": "shape",
            "value": {
              "USE_PAYMENT_METHODS": {
                "name": "string",
                "required": false
              },
              "EMIT_GIFT_CARDS": {
                "name": "string",
                "required": false
              }
            },
            "required": false
          },
          "isApproved": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var admin_panel_Menu = (Menu);
;// CONCATENATED MODULE: ./components/admin-panel/SideBar.js



var SideBar_excluded = ["collective", "isAccountantOnly", "isLoading", "selectedSection", "onRoute"];

function SideBar_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function SideBar_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? SideBar_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : SideBar_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }













var AdminPanelSideBar = function AdminPanelSideBar(_ref) {
  var collective = _ref.collective,
      isAccountantOnly = _ref.isAccountantOnly,
      isLoading = _ref.isLoading,
      selectedSection = _ref.selectedSection,
      onRoute = _ref.onRoute,
      props = objectWithoutProperties_default()(_ref, SideBar_excluded);

  var pageUrl = (0,url_helpers/* getCollectivePageRoute */.x0)(collective);
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, SideBar_objectSpread(SideBar_objectSpread({}, props), {}, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuContainer, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Box */.xu, {
        mb: 32,
        children: [isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 56,
          width: 56,
          borderRadius: "50%"
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
          href: pageUrl,
          "data-cy": "menu-account-avatar-link",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
            collective: collective,
            radius: 56
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Text.H1, {
          fontSize: "16px",
          lineHeight: "24px",
          fontWeight: "700",
          letterSpacing: "0.04px",
          mb: 16,
          mt: 12,
          children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: 24,
            maxWidth: "75%"
          }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: pageUrl,
            children: collective.name
          })
        })]
      }), isLoading ? toConsumableArray_default()(Array(5).keys()).map(function (i) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)("li", {
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
            height: 24,
            mb: 2,
            borderRadius: 8,
            maxWidth: "80%"
          })
        }, i);
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(admin_panel_Menu, {
        collective: collective,
        selectedSection: selectedSection,
        onRoute: onRoute,
        isAccountantOnly: isAccountantOnly
      })]
    })
  }));
};

AdminPanelSideBar.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelSideBar",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    },
    "isAccountantOnly": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "onRoute": {
      "description": "",
      "type": {
        "name": "func"
      },
      "required": false
    }
  }
};
/* harmony default export */ var SideBar = (AdminPanelSideBar);
// EXTERNAL MODULE: ./node_modules/@styled-icons/remix-line/Menu2/Menu2.esm.js
var Menu2_esm = __webpack_require__(29281);
// EXTERNAL MODULE: ./node_modules/focus-trap-react/dist/focus-trap-react.js
var focus_trap_react = __webpack_require__(54483);
var focus_trap_react_default = /*#__PURE__*/__webpack_require__.n(focus_trap_react);
// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(73935);
// EXTERNAL MODULE: ./components/StyledKeyframes.js
var StyledKeyframes = __webpack_require__(29925);
;// CONCATENATED MODULE: ./components/admin-panel/TopBar.js



var TopBar_excluded = ["collective", "selectedSection", "isLoading"];

function TopBar_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function TopBar_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? TopBar_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : TopBar_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

/* eslint-disable styled-components-a11y/click-events-have-key-events */


















var MenuWrapper = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__MenuWrapper",
  componentId: "sc-d50c2h-0"
})(["position:fixed;top:0px;left:0;width:100vw;height:100vh;z-index:", ";"], function (props) {
  return props.zindex || 3000;
});
var MenuBackdrop = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "TopBar__MenuBackdrop",
  componentId: "sc-d50c2h-1"
})(["position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:2500;display:block;animation:", " 0.25s;will-change:opacity;"], StyledKeyframes/* fadeIn */.Ji);
var SideBarWrapper = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__SideBarWrapper",
  componentId: "sc-d50c2h-2"
})(["z-index:2600;background:#fff;"]);
var GlobalModalStyle = (0,styled_components_browser_esm/* createGlobalStyle */.vJ)(["body{overflow:hidden;}"]);
var TopBar_Container = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Flex */.kC).withConfig({
  displayName: "TopBar__Container",
  componentId: "sc-d50c2h-3"
})(["height:64px;padding:12px 16px;position:sticky;top:0;z-index:999;background-color:#fff;color:", ";box-shadow:0px 1px 4px 1px rgba(49,50,51,0.1);"], function (props) {
  return props.theme.colors.black[600];
});
var TopBar_Title = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "TopBar__Title",
  componentId: "sc-d50c2h-4"
})(["font-weight:500;font-size:14px;line-height:16px;letter-spacing:0.06em;text-transform:uppercase;color:", ";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"], function (props) {
  return props.theme.colors.black[700];
});
var TopBar_Separator = (0,styled_components_browser_esm/* default */.ZP)(Grid/* Box */.xu).withConfig({
  displayName: "TopBar__Separator",
  componentId: "sc-d50c2h-5"
})(["font-size:14px;font-weight:700;line-height:20px;color:", ";"], function (props) {
  return props.theme.colors.black[800];
});
var Section = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "TopBar__Section",
  componentId: "sc-d50c2h-6"
})(["font-weight:700;font-size:18px;line-height:26px;color:", ";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"], function (props) {
  return props.theme.colors.black[900];
});
var TopBar_MenuLink = styled_components_browser_esm/* default.div.withConfig */.ZP.div.withConfig({
  displayName: "TopBar__MenuLink",
  componentId: "sc-d50c2h-7"
})(["cursor:pointer;color:", ";&:hover{color:", ";}"], function (props) {
  return props.theme.colors.black[700];
}, function (props) {
  return props.theme.colors.primary[700];
});

var AdminPanelTopBar = function AdminPanelTopBar(_ref) {
  var collective = _ref.collective,
      selectedSection = _ref.selectedSection,
      isLoading = _ref.isLoading,
      props = objectWithoutProperties_default()(_ref, TopBar_excluded);

  var _useIntl = (0,useIntl/* default */.Z)(),
      formatMessage = _useIntl.formatMessage;

  var router = (0,next_router.useRouter)();

  var _React$useState = react.useState(false),
      _React$useState2 = slicedToArray_default()(_React$useState, 2),
      isMenuOpen = _React$useState2[0],
      setMenuOpen = _React$useState2[1];

  react.useEffect(function () {
    var handleRouteChange = function handleRouteChange() {
      setMenuOpen(false);
    };

    router.events.on('routeChangeStart', handleRouteChange);
    return function () {
      router.events.off('routeChangeStart', handleRouteChange);
    };
  }, []);
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(TopBar_Container, TopBar_objectSpread(TopBar_objectSpread({
    alignItems: "center"
  }, props), {}, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mr: "14px",
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(TopBar_MenuLink, {
        tabIndex: "0",
        role: "button",
        onClick: function onClick() {
          return setMenuOpen(true);
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Menu2_esm/* Menu2 */.V, {
          size: "24px"
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Grid/* Box */.xu, {
      mr: "20px",
      children: isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 40,
        width: 40
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.Z, {
        href: (0,url_helpers/* getCollectivePageRoute */.x0)(collective),
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Avatar/* default */.ZP, {
          collective: collective,
          radius: 40
        })
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
      alignItems: "center",
      overflow: "hidden",
      children: [isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
        height: 16,
        width: 120
      }) : /*#__PURE__*/(0,jsx_runtime.jsx)(TopBar_Title, {
        children: formatMessage(PAGE_TITLES[(0,collective_sections/* getCollectiveTypeKey */.hg)(collective.type)])
      }), SECTION_LABELS[selectedSection] && /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(TopBar_Separator, {
          mx: "8px",
          children: "/"
        }), isLoading ? /*#__PURE__*/(0,jsx_runtime.jsx)(LoadingPlaceholder/* default */.Z, {
          height: 16,
          width: 80
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(Section, {
          children: formatMessage(SECTION_LABELS[selectedSection])
        })]
      })]
    }), isMenuOpen && document && /*#__PURE__*/(0,react_dom.createPortal)( /*#__PURE__*/(0,jsx_runtime.jsxs)(react.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(GlobalModalStyle, {}), /*#__PURE__*/(0,jsx_runtime.jsxs)(MenuWrapper, {
        zindex: 1000,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(SideBarWrapper, {
          p: "16px 24px",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)((focus_trap_react_default()), {
            focusTrapOptions: {
              clickOutsideDeactivates: true
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(SideBar, {
              collective: collective,
              selectedSection: selectedSection
            })
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(MenuBackdrop, {
          role: "button",
          tabIndex: 0,
          onClick: function onClick() {
            return setMenuOpen(false);
          },
          onKeyDown: function onKeyDown(event) {
            if (event.key === 'Escape') {
              event.preventDefault();
              setMenuOpen(false);
            }
          }
        })]
      })]
    }), document.body)]
  }));
};

AdminPanelTopBar.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "AdminPanelTopBar",
  "props": {
    "isLoading": {
      "description": "",
      "type": {
        "name": "bool"
      },
      "required": false
    },
    "selectedSection": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "collective": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "slug": {
            "name": "string",
            "required": false
          },
          "name": {
            "name": "string",
            "required": false
          },
          "type": {
            "name": "string",
            "required": false
          },
          "isHost": {
            "name": "bool",
            "required": false
          }
        }
      },
      "required": false
    }
  }
};
/* harmony default export */ var TopBar = (AdminPanelTopBar);
// EXTERNAL MODULE: ./components/NotificationBar.js
var NotificationBar = __webpack_require__(25087);
// EXTERNAL MODULE: ./components/Page.js
var Page = __webpack_require__(84842);
// EXTERNAL MODULE: ./components/SignInOrJoinFree.js + 2 modules
var SignInOrJoinFree = __webpack_require__(41448);
// EXTERNAL MODULE: ./components/TwoFactorAuthRequiredMessage.tsx
var TwoFactorAuthRequiredMessage = __webpack_require__(37066);
;// CONCATENATED MODULE: ./pages/admin-panel.js


function admin_panel_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function admin_panel_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? admin_panel_ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : admin_panel_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
























var admin_panel_messages = (0,lib.defineMessages)({
  collectiveIsArchived: {
    id: "collective.isArchived",
    defaultMessage: [{
      "type": 1,
      "value": "name"
    }, {
      "type": 0,
      "value": " has been archived."
    }]
  },
  collectiveIsArchivedDescription: {
    id: "collective.isArchived.edit.description",
    defaultMessage: [{
      "type": 0,
      "value": "This "
    }, {
      "type": 1,
      "value": "type"
    }, {
      "type": 0,
      "value": " has been archived and is no longer active."
    }]
  },
  userIsArchived: {
    id: "user.isArchived",
    defaultMessage: [{
      "type": 0,
      "value": "Account has been archived."
    }]
  },
  userIsArchivedDescription: {
    id: "user.isArchived.edit.description",
    defaultMessage: [{
      "type": 0,
      "value": "This account has been archived and is no longer active."
    }]
  }
});

var getDefaultSectionForAccount = function getDefaultSectionForAccount(account, loggedInUser) {
  if (!account) {
    return ALL_SECTIONS.INFO;
  }

  var isAdmin = loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.isAdminOfCollective(account);
  var isAccountant = loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.hasRole(roles/* default.ACCOUNTANT */.Z.ACCOUNTANT, account);
  var isAccountantOnly = !isAdmin && isAccountant;

  if ((0,collective_lib/* isHostAccount */.aD)(account)) {
    return isAccountantOnly ? ALL_SECTIONS.REPORTS : ALL_SECTIONS.EXPENSES;
  } else {
    return isAccountantOnly ? ALL_SECTIONS.PAYMENT_RECEIPTS : ALL_SECTIONS.INFO;
  }
};

var getNotification = function getNotification(intl, account) {
  if (account !== null && account !== void 0 && account.isArchived) {
    if (account.type === 'USER') {
      return {
        type: 'warning',
        title: intl.formatMessage(admin_panel_messages.userIsArchived),
        description: intl.formatMessage(admin_panel_messages.userIsArchivedDescription)
      };
    } else {
      return {
        type: 'warning',
        title: intl.formatMessage(admin_panel_messages.collectiveIsArchived, {
          name: account.name
        }),
        description: intl.formatMessage(admin_panel_messages.collectiveIsArchivedDescription, {
          type: account.type.toLowerCase()
        })
      };
    }
  }
};

function getBlocker(LoggedInUser, account, section) {
  if (!LoggedInUser) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "mustBeLoggedIn",
      defaultMessage: [{
        "type": 0,
        "value": "You must be logged in to see this page"
      }]
    });
  } else if (!account) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "3ABdi3",
      defaultMessage: [{
        "type": 0,
        "value": "This account doesn't exist"
      }]
    });
  } else if (account.isIncognito) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "ZonfjV",
      defaultMessage: [{
        "type": 0,
        "value": "You cannot edit this collective"
      }]
    });
  } // Check permissions


  var isAdmin = LoggedInUser.isAdminOfCollective(account);

  if (SECTIONS_ACCESSIBLE_TO_ACCOUNTANTS.includes(section)) {
    if (!isAdmin && !LoggedInUser.hasRole(roles/* default.ACCOUNTANT */.Z.ACCOUNTANT, account)) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
        id: "9FWGOh",
        defaultMessage: [{
          "type": 0,
          "value": "You need to be logged in as an admin or accountant to view this page"
        }]
      });
    }
  } else if (!isAdmin) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(components_message/* default */.Z, {
      id: "AQNF/n",
      defaultMessage: [{
        "type": 0,
        "value": "You need to be logged in as an admin"
      }]
    });
  }
}

var getIsAccountantOnly = function getIsAccountantOnly(LoggedInUser, account) {
  return LoggedInUser && !LoggedInUser.isAdminOfCollective(account) && LoggedInUser.hasRole(roles/* default.ACCOUNTANT */.Z.ACCOUNTANT, account);
};

var AdminPanelPage = function AdminPanelPage() {
  var router = (0,next_router.useRouter)();
  var _router$query = router.query,
      slug = _router$query.slug,
      section = _router$query.section,
      subpath = _router$query.subpath;
  var intl = (0,useIntl/* default */.Z)();

  var _useLoggedInUser = (0,useLoggedInUser/* default */.Z)(),
      LoggedInUser = _useLoggedInUser.LoggedInUser,
      loadingLoggedInUser = _useLoggedInUser.loadingLoggedInUser;

  var _useQuery = (0,client.useQuery)(adminPanelQuery, {
    context: helpers/* API_V2_CONTEXT */.T,
    variables: {
      slug: slug
    }
  }),
      data = _useQuery.data,
      loading = _useQuery.loading;

  var account = data === null || data === void 0 ? void 0 : data.account;
  var notification = getNotification(intl, account);
  var selectedSection = section || getDefaultSectionForAccount(account, LoggedInUser);
  var isLoading = loading || loadingLoggedInUser;
  var blocker = !isLoading && getBlocker(LoggedInUser, account, selectedSection);
  var titleBase = account !== null && account !== void 0 && account.isHost ? intl.formatMessage({
    id: "AdminPanel.button",
    defaultMessage: [{
      "type": 0,
      "value": "Admin"
    }]
  }) : intl.formatMessage({
    id: "Settings",
    defaultMessage: [{
      "type": 0,
      "value": "Settings"
    }]
  });
  return /*#__PURE__*/(0,jsx_runtime.jsx)(AdminPanelContext.Provider, {
    value: {
      selectedSection: selectedSection
    },
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(Page/* default */.Z, {
      noRobots: true,
      collective: account,
      title: account ? "".concat(account.name, " - ").concat(titleBase) : titleBase,
      children: [!blocker && /*#__PURE__*/(0,jsx_runtime.jsx)(TopBar, {
        isLoading: isLoading,
        collective: data === null || data === void 0 ? void 0 : data.account,
        collectiveSlug: slug,
        selectedSection: selectedSection,
        display: ['flex', null, 'none']
      }), Boolean(notification) && /*#__PURE__*/(0,jsx_runtime.jsx)(NotificationBar/* default */.ZP, admin_panel_objectSpread({}, notification)), blocker ? /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Flex */.kC, {
        flexDirection: "column",
        alignItems: "center",
        my: 6,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(MessageBox/* default */.Z, {
          type: "warning",
          mb: 4,
          maxWidth: 400,
          withIcon: true,
          children: blocker
        }), !LoggedInUser && /*#__PURE__*/(0,jsx_runtime.jsx)(SignInOrJoinFree/* default */.ZP, {
          form: "signin",
          disableSignup: true
        })]
      }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(Grid/* Grid */.rj, {
        gridTemplateColumns: ['1fr', null, '208px 1fr'],
        maxWidth: 1280,
        minHeight: 600,
        gridGap: 56,
        m: "0 auto",
        px: 3,
        py: 4,
        "data-cy": "admin-panel-container",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(SideBar, {
          isLoading: isLoading,
          collective: account,
          selectedSection: selectedSection,
          display: ['none', null, 'block'],
          isAccountantOnly: getIsAccountantOnly(LoggedInUser, account)
        }), (0,policies/* require2FAForAdmins */.u)(account) && LoggedInUser && !LoggedInUser.hasTwoFactorAuth ? /*#__PURE__*/(0,jsx_runtime.jsx)(TwoFactorAuthRequiredMessage/* TwoFactorAuthRequiredMessage */.l, {
          mt: [null, null, '64px']
        }) : /*#__PURE__*/(0,jsx_runtime.jsx)(admin_panel_AdminPanelSection, {
          section: selectedSection,
          isLoading: isLoading,
          collective: account,
          subpath: subpath
        })]
      })]
    })
  });
};

AdminPanelPage.getInitialProps = function () {
  return {
    scripts: {
      googleMaps: true
    } // TODO: This should be enabled only for events

  };
};

AdminPanelPage.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getInitialProps",
    "docblock": null,
    "modifiers": ["static"],
    "params": [],
    "returns": null
  }],
  "displayName": "AdminPanelPage"
};
/* harmony default export */ var admin_panel = (AdminPanelPage);

/***/ }),

/***/ 46224:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "confirmOrderMutation": function() { return /* binding */ confirmOrderMutation; }
/* harmony export */ });
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(49376);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92191);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87794);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(67294);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(15020);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(16608);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(11163);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(44012);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(32651);
/* harmony import */ var _lib_stripe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(79936);
/* harmony import */ var _components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(54812);
/* harmony import */ var _components_Container__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(69078);
/* harmony import */ var _components_MessageBox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(86702);
/* harmony import */ var _components_UserProvider__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(51927);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(85893);











var _templateObject;



function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }















var ConfirmOrderPage = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_5___default()(ConfirmOrderPage, _React$Component);

  var _super = _createSuper(ConfirmOrderPage);

  function ConfirmOrderPage() {
    var _this;

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2___default()(this, ConfirmOrderPage);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4___default()(_this), "state", {
      status: ConfirmOrderPage.SUBMITTING,
      isRequestSent: false,
      error: null
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4___default()(_this), "handleStripeError", /*#__PURE__*/function () {
      var _ref2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10___default().mark(function _callee(_ref) {
        var id, _ref$stripeError, message, account, response, stripe, result;

        return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10___default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                id = _ref.id, _ref$stripeError = _ref.stripeError, message = _ref$stripeError.message, account = _ref$stripeError.account, response = _ref$stripeError.response;

                if (response) {
                  _context.next = 4;
                  break;
                }

                _this.setState({
                  status: ConfirmOrderPage.ERROR,
                  error: message
                });

                return _context.abrupt("return");

              case 4:
                if (!response.paymentIntent) {
                  _context.next = 13;
                  break;
                }

                _context.next = 7;
                return (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_14__/* .getStripe */ .d2)(null, account);

              case 7:
                stripe = _context.sent;
                _context.next = 10;
                return stripe.handleCardAction(response.paymentIntent.client_secret);

              case 10:
                result = _context.sent;

                if (result.error) {
                  _this.setState({
                    status: ConfirmOrderPage.ERROR,
                    error: result.error.message
                  });
                }

                if (result.paymentIntent && result.paymentIntent.status === 'requires_confirmation') {
                  _this.triggerRequest({
                    id: id
                  });
                }

              case 13:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      return function (_x) {
        return _ref2.apply(this, arguments);
      };
    }());

    return _this;
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_3___default()(ConfirmOrderPage, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (!this.props.loadingLoggedInUser && this.props.LoggedInUser) {
        return this.triggerRequest();
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      if (!this.state.isRequestSent && !this.props.loadingLoggedInUser && this.props.LoggedInUser) {
        return this.triggerRequest();
      }
    }
  }, {
    key: "triggerRequest",
    value: function () {
      var _triggerRequest = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10___default().mark(function _callee2() {
        var res, orderConfirmed, error;
        return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_10___default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                this.setState({
                  isRequestSent: true
                });
                _context2.next = 4;
                return this.props.confirmOrder({
                  variables: {
                    order: {
                      legacyId: this.props.id
                    }
                  }
                });

              case 4:
                res = _context2.sent;
                orderConfirmed = res.data.confirmOrder;

                if (orderConfirmed.stripeError) {
                  this.handleStripeError(orderConfirmed);
                } else {
                  this.props.router.replace("/".concat(orderConfirmed.order.fromAccount.slug, "/admin/payment-methods?successType=payment"));
                }

                _context2.next = 13;
                break;

              case 9:
                _context2.prev = 9;
                _context2.t0 = _context2["catch"](0);
                error = lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(_context2.t0, 'graphQLErrors.0') || _context2.t0;
                this.setState({
                  status: ConfirmOrderPage.ERROR,
                  error: error.message
                });

              case 13:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[0, 9]]);
      }));

      function triggerRequest() {
        return _triggerRequest.apply(this, arguments);
      }

      return triggerRequest;
    }()
  }, {
    key: "render",
    value: function render() {
      var _this$state = this.state,
          status = _this$state.status,
          error = _this$state.error;
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_components_AuthenticatedPage__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z, {
        title: "Order confirmation",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(_components_Container__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
          display: "flex",
          py: [5, 6],
          px: 2,
          flexDirection: "column",
          alignItems: "center",
          background: "linear-gradient(180deg, #EBF4FF, #FFFFFF)",
          children: [status === ConfirmOrderPage.SUBMITTING && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_components_MessageBox__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            type: "info",
            isLoading: true,
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z, {
              id: "Order.Confirm.Processing",
              defaultMessage: [{
                "type": 0,
                "value": "Confirming your payment method…"
              }]
            })
          }), status === ConfirmOrderPage.ERROR && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_components_MessageBox__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z, {
            type: "error",
            withIcon: true,
            children: error
          })]
        })
      });
    }
  }], [{
    key: "getInitialProps",
    value: function getInitialProps(_ref3) {
      var query = _ref3.query;
      return {
        id: parseInt(query.id)
      };
    }
  }]);

  return ConfirmOrderPage;
}(react__WEBPACK_IMPORTED_MODULE_11__.Component);

_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8___default()(ConfirmOrderPage, "SUBMITTING", 1);

_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_8___default()(ConfirmOrderPage, "ERROR", 3);

var confirmOrderMutation = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .ZP)(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0___default()(["\n  mutation ConfirmOrder($order: OrderReferenceInput!) {\n    confirmOrder(order: $order) {\n      order {\n        id\n        status\n        transactions {\n          id\n        }\n        fromAccount {\n          id\n          slug\n        }\n      }\n      stripeError {\n        message\n        account\n        response\n      }\n    }\n  }\n"])));
var addConfirmOrderMutation = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_22__/* .graphql */ .B)(confirmOrderMutation, {
  name: 'confirmOrder',
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_13__/* .API_V2_CONTEXT */ .T
  }
});
ConfirmOrderPage.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getInitialProps",
    "docblock": null,
    "modifiers": ["static"],
    "params": [{
      "name": "{ query }",
      "type": null
    }],
    "returns": null
  }, {
    "name": "triggerRequest",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }, {
    "name": "handleStripeError",
    "docblock": null,
    "modifiers": ["async"],
    "params": [{
      "name": "{ id, stripeError: { message, account, response } }",
      "type": null
    }],
    "returns": null
  }],
  "displayName": "ConfirmOrderPage",
  "props": {
    "id": {
      "description": "OrderId",
      "type": {
        "name": "number"
      },
      "required": true
    },
    "confirmOrder": {
      "description": "@ignore from graphql",
      "type": {
        "name": "func"
      },
      "required": true
    },
    "loadingLoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "bool"
      },
      "required": true
    },
    "LoggedInUser": {
      "description": "@ignore from withUser",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "@ignore from withRouter",
      "type": {
        "name": "object"
      },
      "required": false
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((0,_components_UserProvider__WEBPACK_IMPORTED_MODULE_18__/* .withUser */ .ns)(addConfirmOrderMutation((0,next_router__WEBPACK_IMPORTED_MODULE_12__.withRouter)(ConfirmOrderPage))));

/***/ }),

/***/ 22260:
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {


    (window.__NEXT_P = window.__NEXT_P || []).push([
      "/admin-panel",
      function () {
        return __webpack_require__(5879);
      }
    ]);
    if(false) {}
  

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, [3662,5328,6567,1512,8966,8027,5126,5490,2092,9158,295,3135,6277,182,6315,3262,3771,146,5813,4842,4154,1012,1861,7965,6467,1448,4944,6008,7038,3737,2350,20,9558,2150,9774,2888,179], function() { return __webpack_exec__(22260); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);
//# sourceMappingURL=admin-panel-af951eb5bd6018e8.js.map