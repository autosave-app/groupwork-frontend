{"version":3,"file":"static/chunks/pages/embed/contribution-flow-7f31c87abc3d6429.js","mappings":"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","sources":["webpack://_N_E/./node_modules/lodash/_baseClamp.js","webpack://_N_E/./node_modules/lodash/clamp.js","webpack://_N_E/./node_modules/lodash/throttle.js","webpack://_N_E/./components/CollectiveThemeProvider.js","webpack://_N_E/./components/EmbeddedPage.js","webpack://_N_E/./pages/embed/contribution-flow.js","webpack://_N_E/?d5a1"],"sourcesContent":["/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var baseClamp = require('./_baseClamp'),\n    toNumber = require('./toNumber');\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { clamp, get, throttle } from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport { darken, getContrast, getLuminance, setLightness } from 'polished';\nimport { ThemeProvider } from 'styled-components';\nimport { isHexColor } from 'validator';\n\nimport defaultTheme, { generateTheme } from '../lib/theme';\n\n/**\n * A special `ThemeProvider` that plugs the custom collective theme, defined by the color\n * from `collective.settings.collectivePage.primaryColor`.\n */\nexport default class CollectiveThemeProvider extends React.PureComponent {\n  static propTypes = {\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    collective: PropTypes.shape({\n      settings: PropTypes.shape({\n        collectivePage: PropTypes.shape({\n          primaryColor: PropTypes.string,\n        }),\n      }),\n    }),\n  };\n\n  state = { newPrimaryColor: null };\n\n  /**\n   * Ensures that the contrast is at least 7/1, as recommended by the [W3c](https://webaim.org/articles/contrast)\n   */\n  adjustColorContrast = color => {\n    const contrast = getContrast(color, '#fff');\n    if (contrast >= 7) {\n      return color;\n    } else {\n      const contrastDiff = (7 - contrast) / 21;\n      return darken(contrastDiff, color);\n    }\n  };\n\n  getTheme = memoizeOne(primaryColor => {\n    if (!primaryColor) {\n      return defaultTheme;\n    } else if (!isHexColor(primaryColor)) {\n      // eslint-disable-next-line no-console\n      console.warn(`Invalid custom color: ${primaryColor}`);\n      return defaultTheme;\n    } else {\n      const adjustedPrimary = this.adjustColorContrast(primaryColor);\n      const luminance = getLuminance(adjustedPrimary);\n      // Allow a deviation to up to 20% of the default luminance. Don't apply this to really\n      // dark colors (luminance < 0.05)\n      const luminanceAdjustment = luminance < 0.05 ? -0.1 : luminance / 5;\n      const adjustLuminance = value => setLightness(clamp(value + luminanceAdjustment, 0, 0.97), adjustedPrimary);\n      return generateTheme({\n        colors: {\n          ...defaultTheme.colors,\n          primary: {\n            900: adjustLuminance(0.1),\n            800: adjustLuminance(0.2),\n            700: adjustLuminance(0.3),\n            600: adjustLuminance(0.42),\n            500: adjustLuminance(0.5),\n            400: adjustLuminance(0.6),\n            300: adjustLuminance(0.65),\n            200: adjustLuminance(0.72),\n            100: adjustLuminance(0.92),\n            50: adjustLuminance(0.97),\n            base: primaryColor,\n          },\n        },\n      });\n    }\n  });\n\n  onPrimaryColorChange = throttle(newPrimaryColor => {\n    this.setState({ newPrimaryColor });\n  }, 2000);\n\n  render() {\n    const { collective, children } = this.props;\n    const primaryColor = this.state.newPrimaryColor || get(collective, 'settings.collectivePage.primaryColor');\n    return (\n      <ThemeProvider theme={this.getTheme(primaryColor)}>\n        {typeof children === 'function' ? (\n          children({ onPrimaryColorChange: this.onPrimaryColorChange })\n        ) : (\n          <React.Fragment>{children}</React.Fragment>\n        )}\n      </ThemeProvider>\n    );\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { color } from 'styled-system';\n\nimport Header from '../components/Header';\n\nimport { withUser } from './UserProvider';\n\nconst GlobalStyles = createGlobalStyle`\n  body > div:first-child {\n    height: 100%;\n  }\n`;\n\nconst Main = styled.main`\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  ${color}\n`;\n\n/**\n * A special component to render embedded pages, that makes sure we add the \"no-robot\" meta\n * and that the footer/topbar will not be displayed, while preserving the normal DOM structure\n * and meta.\n */\nconst EmbeddedPage = ({ children, description, title, canonicalURL, collective, backgroundColor }) => {\n  return (\n    <Fragment>\n      <GlobalStyles />\n      <Header\n        title={title}\n        description={description}\n        canonicalURL={canonicalURL}\n        collective={collective}\n        withTopBar={false}\n        noRobots\n      />\n      <Main backgroundColor={backgroundColor}>{children}</Main>\n    </Fragment>\n  );\n};\n\nEmbeddedPage.propTypes = {\n  children: PropTypes.node,\n  description: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  canonicalURL: PropTypes.string,\n  loadingLoggedInUser: PropTypes.bool,\n  title: PropTypes.string,\n  collective: PropTypes.object,\n};\n\nEmbeddedPage.defaultProps = {\n  background: 'white',\n};\n\nexport default withUser(EmbeddedPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql } from '@apollo/client/react/hoc';\nimport { get } from 'lodash';\nimport { withRouter } from 'next/router';\nimport { injectIntl } from 'react-intl';\n\nimport { GQLV2_SUPPORTED_PAYMENT_METHOD_TYPES } from '../../lib/constants/payment-methods';\nimport { generateNotFoundError, getErrorFromGraphqlException } from '../../lib/errors';\nimport { API_V2_CONTEXT } from '../../lib/graphql/helpers';\nimport { addParentToURLIfMissing } from '../../lib/url-helpers';\nimport { compose } from '../../lib/utils';\n\nimport CollectiveThemeProvider from '../../components/CollectiveThemeProvider';\nimport Container from '../../components/Container';\nimport { PAYMENT_FLOW } from '../../components/contribution-flow/constants';\nimport ContributionBlocker, { getContributionBlocker } from '../../components/contribution-flow/ContributionBlocker';\nimport {\n  contributionFlowAccountQuery,\n  contributionFlowAccountWithTierQuery,\n} from '../../components/contribution-flow/graphql/queries';\nimport ContributionFlowContainer from '../../components/contribution-flow/index';\nimport { EmbedContributionFlowUrlQueryHelper } from '../../components/contribution-flow/query-parameters';\nimport { getContributionFlowMetadata } from '../../components/contribution-flow/utils';\nimport EmbeddedPage from '../../components/EmbeddedPage';\nimport ErrorPage from '../../components/ErrorPage';\nimport { Box } from '../../components/Grid';\nimport Loading from '../../components/Loading';\nimport { withStripeLoader } from '../../components/StripeProvider';\nimport { withUser } from '../../components/UserProvider';\n\nclass EmbedContributionFlowPage extends React.Component {\n  static getInitialProps({ query, res }) {\n    if (res) {\n      res.removeHeader('X-Frame-Options');\n    }\n\n    return {\n      // Route parameters\n      collectiveSlug: query.eventSlug || query.collectiveSlug,\n      tierId: parseInt(query.tierId) || null,\n      // Query parameters\n      error: query.error,\n      queryParams: EmbedContributionFlowUrlQueryHelper.decode(query),\n    };\n  }\n\n  static propTypes = {\n    collectiveSlug: PropTypes.string.isRequired,\n    paymentFlow: PropTypes.string,\n    tierId: PropTypes.number,\n    error: PropTypes.string,\n    data: PropTypes.shape({\n      loading: PropTypes.bool,\n      error: PropTypes.any,\n      account: PropTypes.object,\n      tier: PropTypes.object,\n    }), // from withData\n    intl: PropTypes.object,\n    loadStripe: PropTypes.func,\n    LoggedInUser: PropTypes.object,\n    loadingLoggedInUser: PropTypes.bool,\n    router: PropTypes.object,\n    queryParams: PropTypes.shape({\n      useTheme: PropTypes.bool,\n      backgroundColor: PropTypes.string,\n    }),\n  };\n\n  componentDidMount() {\n    this.loadExternalScripts();\n    const { router, data } = this.props;\n    const account = data?.account;\n    const path = router.asPath;\n    const rawPath = path.replace(new RegExp(`^/embed/${account?.slug}/`), '/');\n    addParentToURLIfMissing(router, account, rawPath, null, { prefix: '/embed' });\n  }\n\n  componentDidUpdate(prevProps) {\n    const hostPath = 'data.account.host';\n    if (get(this.props, hostPath) !== get(prevProps, hostPath)) {\n      this.loadExternalScripts();\n    }\n  }\n\n  loadExternalScripts() {\n    const supportedPaymentMethods = get(this.props.data, 'account.host.supportedPaymentMethods', []);\n    if (supportedPaymentMethods.includes(GQLV2_SUPPORTED_PAYMENT_METHOD_TYPES.CREDIT_CARD)) {\n      this.props.loadStripe();\n    }\n  }\n\n  getPageMetadata() {\n    const { intl, data } = this.props;\n    return {\n      ...getContributionFlowMetadata(intl, data?.account, data?.tier),\n      canonicalURL: null,\n    };\n  }\n\n  renderPageContent() {\n    const { data = {}, paymentFlow, LoggedInUser } = this.props;\n    const { account, tier } = data;\n    const isCrypto = paymentFlow === PAYMENT_FLOW.CRYPTO;\n\n    if (data.loading) {\n      return (\n        <Container py={[5, 6]}>\n          <Loading />\n        </Container>\n      );\n    }\n\n    const contributionBlocker = getContributionBlocker(\n      LoggedInUser,\n      account,\n      tier,\n      Boolean(this.props.tierId),\n      isCrypto,\n    );\n    if (contributionBlocker) {\n      return <ContributionBlocker blocker={contributionBlocker} account={account} />;\n    } else {\n      return (\n        <Box height=\"100%\" pt={3}>\n          <ContributionFlowContainer\n            isEmbed\n            collective={account}\n            host={account.host}\n            tier={tier}\n            error={this.props.error}\n          />\n        </Box>\n      );\n    }\n  }\n\n  render() {\n    const { data, queryParams } = this.props;\n    if (!data.loading && !data.account) {\n      const error = data.error\n        ? getErrorFromGraphqlException(data.error)\n        : generateNotFoundError(this.props.collectiveSlug);\n\n      return <ErrorPage error={error} />;\n    } else {\n      return (\n        <CollectiveThemeProvider collective={queryParams.useTheme ? data.account : null}>\n          <EmbeddedPage backgroundColor={queryParams.backgroundColor}>{this.renderPageContent()}</EmbeddedPage>\n        </CollectiveThemeProvider>\n      );\n    }\n  }\n}\n\nconst addAccountData = graphql(contributionFlowAccountQuery, {\n  skip: props => Boolean(props.tierId),\n  options: props => ({\n    variables: { collectiveSlug: props.collectiveSlug },\n    context: API_V2_CONTEXT,\n  }),\n});\n\nconst addAccountWithTierData = graphql(contributionFlowAccountWithTierQuery, {\n  skip: props => !props.tierId,\n  options: props => ({\n    variables: { collectiveSlug: props.collectiveSlug, tier: { legacyId: props.tierId } },\n    context: API_V2_CONTEXT,\n  }),\n});\n\nconst addGraphql = compose(addAccountData, addAccountWithTierData);\n\nexport default addGraphql(withUser(injectIntl(withStripeLoader(withRouter(EmbedContributionFlowPage)))));\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/embed/contribution-flow\",\n      function () {\n        return require(\"private-next-pages/embed/contribution-flow.js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/embed/contribution-flow\"])\n      });\n    }\n  "],"names":["React","memoizeOne","darken","getContrast","getLuminance","setLightness","ThemeProvider","isHexColor","defaultTheme","generateTheme","CollectiveThemeProvider","newPrimaryColor","color","contrast","contrastDiff","primaryColor","console","warn","adjustedPrimary","adjustColorContrast","luminance","luminanceAdjustment","adjustLuminance","value","colors","primary","base","setState","props","collective","children","state","getTheme","onPrimaryColorChange","PureComponent","Fragment","styled","createGlobalStyle","Header","withUser","GlobalStyles","Main","main","EmbeddedPage","description","title","canonicalURL","backgroundColor","defaultProps","background","graphql","withRouter","injectIntl","GQLV2_SUPPORTED_PAYMENT_METHOD_TYPES","generateNotFoundError","getErrorFromGraphqlException","API_V2_CONTEXT","addParentToURLIfMissing","compose","Container","PAYMENT_FLOW","ContributionBlocker","getContributionBlocker","contributionFlowAccountQuery","contributionFlowAccountWithTierQuery","ContributionFlowContainer","EmbedContributionFlowUrlQueryHelper","getContributionFlowMetadata","ErrorPage","Box","Loading","withStripeLoader","EmbedContributionFlowPage","loadExternalScripts","router","data","account","path","asPath","rawPath","replace","RegExp","slug","prefix","prevProps","hostPath","supportedPaymentMethods","includes","CREDIT_CARD","loadStripe","intl","tier","paymentFlow","LoggedInUser","isCrypto","CRYPTO","loading","contributionBlocker","Boolean","tierId","host","error","queryParams","collectiveSlug","useTheme","renderPageContent","query","res","removeHeader","eventSlug","parseInt","decode","Component","addAccountData","skip","options","variables","context","addAccountWithTierData","legacyId","addGraphql"],"sourceRoot":""}