{"version":3,"file":"static/chunks/pages/unsubscribeEmail-c4417731c60d30e3.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@styled-icons/boxicons-regular/Support/Support.esm.js","webpack://_N_E/./node_modules/@styled-icons/fa-solid/Redo/Redo.esm.js","webpack://_N_E/./node_modules/@styled-icons/material/Email/Email.esm.js","webpack://_N_E/./pages/unsubscribeEmail.js","webpack://_N_E/?2f04"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Support = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12v4.143C2 17.167 2.897 18 4 18h1a1 1 0 0 0 1-1v-5.143a1 1 0 0 0-1-1h-.908C4.648 6.987 7.978 4 12 4s7.352 2.987 7.908 6.857H19a1 1 0 0 0-1 1V18c0 1.103-.897 2-2 2h-2v-1h-4v3h6c2.206 0 4-1.794 4-4 1.103 0 2-.833 2-1.857V12c0-5.514-4.486-10-10-10z\"\n  }));\n});\nSupport.displayName = 'Support';\nexport var SupportDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Redo = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 512 512\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32h128c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2l-17.6-17.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8 229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3 163.8-62.5 226.3 0l17.2 17.2z\"\n  }));\n});\nRedo.displayName = 'Redo';\nexport var RedoDimensions = {\n  height: 512,\n  width: 512\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Email = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z\"\n  }));\n});\nEmail.displayName = 'Email';\nexport var EmailDimensions = {\n  height: 24,\n  width: 24\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Email } from '@styled-icons/material/Email';\nimport { FormattedMessage } from 'react-intl';\n\nimport Container from '../components/Container';\nimport { Box } from '../components/Grid';\nimport MessageBox from '../components/MessageBox';\nimport Page from '../components/Page';\nimport { withUser } from '../components/UserProvider';\n\n/**\n * Email Unsubscription page.\n */\nclass UnsubscribeEmail extends React.Component {\n  static getInitialProps({ query }) {\n    return { email: query.email, slug: query.slug, type: query.type, token: query.token };\n  }\n\n  static propTypes = {\n    /** Unsubscription email, given in URL */\n    email: PropTypes.string.isRequired,\n    /** Collective slug, given in URL */\n    slug: PropTypes.string.isRequired,\n    /** Emails type to unsubscribe ex:collective.monthlyReport, given in URL */\n    type: PropTypes.string.isRequired,\n    /** Unsubscription token, given in URL */\n    token: PropTypes.string.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      state: 'unsubscribing',\n    };\n  }\n\n  async componentDidMount() {\n    let state, errorMessage, response;\n    await fetch(\n      `/api/services/email/unsubscribe/${this.props.email}/${this.props.slug}/${this.props.type}/${this.props.token}`,\n    ).then(res => {\n      response = res.json();\n    });\n    response.then(res => {\n      if (res.error) {\n        state = 'error';\n        errorMessage = res.error.message;\n      } else {\n        state = 'success';\n      }\n      this.setState({ state: state, errorMessage: errorMessage });\n    });\n  }\n\n  getIconColor(state) {\n    if (state === 'success') {\n      return '#00A34C';\n    } else if (state === 'error') {\n      return '#CC1836';\n    }\n  }\n\n  render() {\n    return (\n      <Page title=\"Unsubscribe Email\">\n        <Container\n          display=\"flex\"\n          py={[5, 6]}\n          px={2}\n          flexDirection=\"column\"\n          alignItems=\"center\"\n          background=\"linear-gradient(180deg, #EBF4FF, #FFFFFF)\"\n        >\n          <Box my={3}>\n            <Email size={42} color={this.getIconColor(this.state.state)} />\n          </Box>\n          {this.state.state === 'success' && (\n            <MessageBox mb={3} type=\"success\" withIcon>\n              <FormattedMessage id=\"unsubscribe.success\" defaultMessage=\"You've unsubscribed successfully!\" />\n            </MessageBox>\n          )}\n          {this.state.state === 'unsubscribing' && (\n            <MessageBox mb={3} type=\"white\" withIcon>\n              <FormattedMessage id=\"unsubscribe.unsubscribing\" defaultMessage=\"Unsubscribing your email...\" />\n            </MessageBox>\n          )}\n          {this.state.state === 'error' && (\n            <MessageBox mb={3} type=\"error\" withIcon>\n              <span>{this.state.errorMessage}</span>\n            </MessageBox>\n          )}\n        </Container>\n      </Page>\n    );\n  }\n}\n\nexport default withUser(UnsubscribeEmail);\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/unsubscribeEmail\",\n      function () {\n        return require(\"private-next-pages/unsubscribeEmail.js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/unsubscribeEmail\"])\n      });\n    }\n  "],"names":["React","Email","FormattedMessage","Container","Box","MessageBox","Page","withUser","UnsubscribeEmail","props","state","fetch","email","slug","type","token","then","res","response","json","error","errorMessage","message","setState","getIconColor","query","Component"],"sourceRoot":""}