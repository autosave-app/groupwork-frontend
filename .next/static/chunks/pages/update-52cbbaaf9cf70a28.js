(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([[8060],{

/***/ 50729:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92358);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(49376);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7980);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85696);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33227);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(88361);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92191);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(85971);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(52715);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(91193);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(930);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var lodash_update__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(93425);
/* harmony import */ var lodash_update__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash_update__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(45578);
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(27361);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(50361);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87794);
/* harmony import */ var _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(67294);
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(15020);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(16608);
/* harmony import */ var _apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(14573);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(11163);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(12136);
/* harmony import */ var _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(32651);
/* harmony import */ var _lib_url_helpers__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(25896);
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(97079);
/* harmony import */ var _components_collective_navbar__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(99656);
/* harmony import */ var _components_collective_navbar_constants__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(97585);
/* harmony import */ var _components_collective_page_graphql_fragments__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(5824);
/* harmony import */ var _components_Container__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(69078);
/* harmony import */ var _components_conversations_CommentForm__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(14193);
/* harmony import */ var _components_conversations_graphql__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(37436);
/* harmony import */ var _components_conversations_Thread__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(71133);
/* harmony import */ var _components_ErrorPage__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(73908);
/* harmony import */ var _components_Grid__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(16159);
/* harmony import */ var _components_icons_CommentIcon__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(6845);
/* harmony import */ var _components_Page__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(84842);
/* harmony import */ var _components_StyledUpdate__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(37169);
/* harmony import */ var _components_UserProvider__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(51927);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(85893);
















var _templateObject;



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_8___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

























var UpdatePage = /*#__PURE__*/function (_React$Component) {
  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_inherits_js__WEBPACK_IMPORTED_MODULE_7___default()(UpdatePage, _React$Component);

  var _super = _createSuper(UpdatePage);

  function UpdatePage() {
    var _this;

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_classCallCheck_js__WEBPACK_IMPORTED_MODULE_4___default()(this, UpdatePage);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6___default()(_this), "state", {
      isReloadingData: false
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6___default()(_this), "onCommentAdded", function (comment) {
      // Add comment to cache if not already fetched
      var _this$clonePageQueryC = _this.clonePageQueryCacheData(),
          _this$clonePageQueryC2 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default()(_this$clonePageQueryC, 3),
          data = _this$clonePageQueryC2[0],
          query = _this$clonePageQueryC2[1],
          variables = _this$clonePageQueryC2[2];

      lodash_update__WEBPACK_IMPORTED_MODULE_11___default()(data, 'update.comments.nodes', function (comments) {
        return lodash_uniqBy__WEBPACK_IMPORTED_MODULE_12___default()([].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2___default()(comments), [comment]), 'id');
      });

      lodash_update__WEBPACK_IMPORTED_MODULE_11___default()(data, 'update.comments.totalCount', function (totalCount) {
        return totalCount + 1;
      });

      _this.props.client.writeQuery({
        query: query,
        variables: variables,
        data: data
      });
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6___default()(_this), "onCommentDeleted", function (comment) {
      var _this$clonePageQueryC3 = _this.clonePageQueryCacheData(),
          _this$clonePageQueryC4 = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_slicedToArray_js__WEBPACK_IMPORTED_MODULE_3___default()(_this$clonePageQueryC3, 3),
          data = _this$clonePageQueryC4[0],
          query = _this$clonePageQueryC4[1],
          variables = _this$clonePageQueryC4[2];

      lodash_update__WEBPACK_IMPORTED_MODULE_11___default()(data, 'update.comments.nodes', function (comments) {
        return comments.filter(function (c) {
          return c.id !== comment.id;
        });
      });

      lodash_update__WEBPACK_IMPORTED_MODULE_11___default()(data, 'update.comments.totalCount', function (totalCount) {
        return totalCount - 1;
      });

      _this.props.client.writeQuery({
        query: query,
        variables: variables,
        data: data
      });
    });

    _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_defineProperty_js__WEBPACK_IMPORTED_MODULE_10___default()(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_6___default()(_this), "fetchMore", /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15___default().mark(function _callee() {
      var _this$props, collectiveSlug, updateSlug, data;

      return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _this$props = _this.props, collectiveSlug = _this$props.collectiveSlug, updateSlug = _this$props.updateSlug, data = _this$props.data; // refetch before fetching more as comments added to the cache can change the offset

              _context.next = 3;
              return data.refetch();

            case 3:
              _context.next = 5;
              return data.fetchMore({
                variables: {
                  collectiveSlug: collectiveSlug,
                  updateSlug: updateSlug,
                  offset: lodash_get__WEBPACK_IMPORTED_MODULE_13___default()(data, 'update.comments.nodes', []).length
                },
                updateQuery: function updateQuery(prev, _ref2) {
                  var fetchMoreResult = _ref2.fetchMoreResult;

                  if (!fetchMoreResult) {
                    return prev;
                  }

                  var newValues = {};
                  newValues.update = _objectSpread(_objectSpread({}, prev.update), {}, {
                    comments: _objectSpread(_objectSpread({}, fetchMoreResult.update.comments), {}, {
                      nodes: [].concat(_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2___default()(prev.update.comments.nodes), _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_2___default()(fetchMoreResult.update.comments.nodes))
                    })
                  });
                  return Object.assign({}, prev, newValues);
                }
              });

            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    return _this;
  }

  _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_createClass_js__WEBPACK_IMPORTED_MODULE_5___default()(UpdatePage, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props2 = this.props,
          router = _this$props2.router,
          data = _this$props2.data,
          updateSlug = _this$props2.updateSlug;
      var account = data === null || data === void 0 ? void 0 : data.account;
      (0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_20__/* .addParentToURLIfMissing */ .Bc)(router, account, "/updates/".concat(updateSlug));
    }
  }, {
    key: "componentDidUpdate",
    value: function () {
      var _componentDidUpdate = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15___default().mark(function _callee2(oldProps) {
        return _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_15___default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                if (!(oldProps.LoggedInUser !== this.props.LoggedInUser && !this.state.isReloadingData)) {
                  _context2.next = 8;
                  break;
                }

                this.setState({
                  isReloadingData: true
                });
                _context2.prev = 2;
                _context2.next = 5;
                return this.props.data.refetch();

              case 5:
                _context2.prev = 5;
                this.setState({
                  isReloadingData: false
                });
                return _context2.finish(5);

              case 8:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[2,, 5, 8]]);
      }));

      function componentDidUpdate(_x) {
        return _componentDidUpdate.apply(this, arguments);
      }

      return componentDidUpdate;
    }()
  }, {
    key: "clonePageQueryCacheData",
    value: function clonePageQueryCacheData() {
      var _this$props3 = this.props,
          client = _this$props3.client,
          updateSlug = _this$props3.updateSlug,
          collectiveSlug = _this$props3.collectiveSlug;
      var variables = {
        collectiveSlug: collectiveSlug,
        updateSlug: updateSlug
      };

      var data = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_14___default()(client.readQuery({
        query: updateQuery,
        variables: variables
      }));

      return [data, updateQuery, variables];
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props4 = this.props,
          data = _this$props4.data,
          LoggedInUser = _this$props4.LoggedInUser;

      if (!(data !== null && data !== void 0 && data.account)) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_ErrorPage__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
          data: data
        });
      } else if (!data.update) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_ErrorPage__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z, {
          error: {
            type: _lib_errors__WEBPACK_IMPORTED_MODULE_18__/* .ERROR.NOT_FOUND */ .pn.NOT_FOUND
          }
        });
      }

      var account = data.account,
          update = data.update;

      var comments = lodash_get__WEBPACK_IMPORTED_MODULE_13___default()(update, 'comments.nodes', []);

      var totalCommentsCount = lodash_get__WEBPACK_IMPORTED_MODULE_13___default()(update, 'comments.totalCount', 0);

      var updateSlug = (update === null || update === void 0 ? void 0 : update.slug) || this.props.updateSlug;
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_components_Page__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z, {
        collective: account,
        title: update.title,
        description: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_21__/* .stripHTML */ .Cb)(update.summary),
        canonicalURL: "".concat((0,_lib_url_helpers__WEBPACK_IMPORTED_MODULE_20__/* .getCollectivePageCanonicalURL */ .Bu)(account), "/updates/").concat(updateSlug),
        metaTitle: "".concat(update.title, " - ").concat(account.name),
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_collective_navbar__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z, {
          collective: account,
          isAdmin: LoggedInUser && LoggedInUser.isAdminOfCollective(account),
          selectedCategory: _components_collective_navbar_constants__WEBPACK_IMPORTED_MODULE_23__/* .NAVBAR_CATEGORIES.CONNECT */ .t.CONNECT
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_components_Container__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
          py: 4,
          maxWidth: 1260,
          m: "0 auto",
          px: [0, null, null, 4],
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_StyledUpdate__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */ .Z, {
            collective: account,
            update: update,
            editable: Boolean(LoggedInUser === null || LoggedInUser === void 0 ? void 0 : LoggedInUser.isAdminOfCollective(account)),
            LoggedInUser: LoggedInUser,
            compact: false,
            reactions: update.reactions,
            isReloadingData: this.state.isReloadingData
          }, update.id), update.userCanSeeUpdate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_components_Grid__WEBPACK_IMPORTED_MODULE_30__/* .Box */ .xu, {
            pl: [0, 5],
            children: [comments.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_Container__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z, {
              mb: 3,
              pt: 3,
              maxWidth: 700,
              borderTop: "1px solid #eee",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_conversations_Thread__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z, {
                collective: account,
                hasMore: comments.length < totalCommentsCount,
                fetchMore: this.fetchMore,
                items: comments,
                onCommentDeleted: this.onCommentDeleted
              })
            }), update.publishedAt && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsxs)(_components_Grid__WEBPACK_IMPORTED_MODULE_30__/* .Flex */ .kC, {
              mt: "40px",
              maxWidth: 700,
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_Grid__WEBPACK_IMPORTED_MODULE_30__/* .Box */ .xu, {
                display: ['none', null, 'block'],
                flex: "0 0",
                p: 3,
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_icons_CommentIcon__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z, {
                  size: 24,
                  color: "lightgrey"
                })
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_Grid__WEBPACK_IMPORTED_MODULE_30__/* .Box */ .xu, {
                flex: "1 1",
                maxWidth: [null, null, 'calc(100% - 56px)'],
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_35__.jsx)(_components_conversations_CommentForm__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z, {
                  id: "new-update",
                  UpdateId: update.id,
                  onSuccess: this.onCommentAdded
                })
              })]
            })]
          })]
        })]
      });
    }
  }], [{
    key: "getInitialProps",
    value: function getInitialProps(_ref3) {
      var _ref3$query = _ref3.query,
          collectiveSlug = _ref3$query.collectiveSlug,
          updateSlug = _ref3$query.updateSlug;
      return {
        collectiveSlug: collectiveSlug,
        updateSlug: updateSlug
      };
    }
  }]);

  return UpdatePage;
}(react__WEBPACK_IMPORTED_MODULE_16__.Component);

var updateQuery = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .ZP)(_templateObject || (_templateObject = _home_runner_work_groupwork_frontend_groupwork_frontend_node_modules_next_dist_compiled_babel_runtime_helpers_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0___default()(["\n  query Update($collectiveSlug: String, $updateSlug: String!, $offset: Int) {\n    account(slug: $collectiveSlug, throwIfMissing: false) {\n      id\n      legacyId\n      slug\n      name\n      type\n      description\n      settings\n      imageUrl\n      isFrozen\n      twitterHandle\n      ... on AccountWithHost {\n        host {\n          id\n          slug\n          name\n          features {\n            id\n            CONTACT_FORM\n          }\n        }\n      }\n      features {\n        id\n        ...NavbarFields\n      }\n      conversationsTags {\n        id\n        tag\n      }\n      ... on Collective {\n        isApproved\n      }\n      type\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n        }\n      }\n    }\n    update(slug: $updateSlug, account: { slug: $collectiveSlug }) {\n      id\n      slug\n      title\n      createdAt\n      publishedAt\n      html\n      summary\n      isPrivate\n      isChangelog\n      makePublicOn\n      userCanSeeUpdate\n      userCanPublishUpdate\n      reactions\n      userReactions\n      account {\n        id\n        slug\n        type\n        name\n        isHost\n      }\n      fromAccount {\n        id\n        slug\n        type\n        name\n      }\n      comments(limit: 100, offset: $offset) {\n        totalCount\n        nodes {\n          id\n          ...CommentFields\n        }\n      }\n    }\n  }\n  ", "\n  ", "\n"])), _components_conversations_graphql__WEBPACK_IMPORTED_MODULE_27__/* .commentFieldsFragment */ .Y6, _components_collective_page_graphql_fragments__WEBPACK_IMPORTED_MODULE_24__/* .collectiveNavbarFieldsFragment */ .AS);
var getUpdate = (0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_37__/* .graphql */ .B)(updateQuery, {
  options: {
    context: _lib_graphql_helpers__WEBPACK_IMPORTED_MODULE_19__/* .API_V2_CONTEXT */ .T
  }
});
UpdatePage.__docgenInfo = {
  "description": "",
  "methods": [{
    "name": "getInitialProps",
    "docblock": null,
    "modifiers": ["static"],
    "params": [{
      "name": "{ query: { collectiveSlug, updateSlug } }",
      "type": null
    }],
    "returns": null
  }, {
    "name": "clonePageQueryCacheData",
    "docblock": null,
    "modifiers": [],
    "params": [],
    "returns": null
  }, {
    "name": "onCommentAdded",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "comment",
      "type": null
    }],
    "returns": null
  }, {
    "name": "onCommentDeleted",
    "docblock": null,
    "modifiers": [],
    "params": [{
      "name": "comment",
      "type": null
    }],
    "returns": null
  }, {
    "name": "fetchMore",
    "docblock": null,
    "modifiers": ["async"],
    "params": [],
    "returns": null
  }],
  "displayName": "UpdatePage",
  "props": {
    "collectiveSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "updateSlug": {
      "description": "",
      "type": {
        "name": "string"
      },
      "required": false
    },
    "LoggedInUser": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "client": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "router": {
      "description": "",
      "type": {
        "name": "object"
      },
      "required": false
    },
    "data": {
      "description": "",
      "type": {
        "name": "shape",
        "value": {
          "account": {
            "name": "object",
            "required": false
          },
          "update": {
            "name": "object",
            "required": false
          },
          "refetch": {
            "name": "func",
            "required": false
          },
          "fetchMore": {
            "name": "func",
            "required": false
          }
        }
      },
      "required": true
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((0,next_router__WEBPACK_IMPORTED_MODULE_17__.withRouter)((0,_components_UserProvider__WEBPACK_IMPORTED_MODULE_34__/* .withUser */ .ns)(getUpdate((0,_apollo_client_react_hoc__WEBPACK_IMPORTED_MODULE_38__/* .withApollo */ .C)(UpdatePage)))));

/***/ }),

/***/ 31430:
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {


    (window.__NEXT_P = window.__NEXT_P || []).push([
      "/update",
      function () {
        return __webpack_require__(50729);
      }
    ]);
    if(false) {}
  

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, [3662,5328,6567,1512,8966,8027,5126,5490,2092,9158,8881,146,5813,4842,4154,1012,1861,7965,4691,7653,6467,1448,4944,9656,984,827,9774,2888,179], function() { return __webpack_exec__(31430); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);
//# sourceMappingURL=update-52cbbaaf9cf70a28.js.map