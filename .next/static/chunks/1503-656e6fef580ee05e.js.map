{"version":3,"file":"static/chunks/1503-656e6fef580ee05e.js","mappings":"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","sources":["webpack://_N_E/./components/collective-page/SectionTitle.js","webpack://_N_E/./components/recurring-contributions/UpdateOrderPopUp.js","webpack://_N_E/./components/recurring-contributions/RecurringContributionsPopUp.js","webpack://_N_E/./components/recurring-contributions/RecurringContributionsCard.js","webpack://_N_E/./components/collective-page/images/EmptyCollectivesSectionImage.svg","webpack://_N_E/./components/recurring-contributions/RecurringContributionsContainer.js","webpack://_N_E/./components/recurring-contributions/graphql/queries.js"],"sourcesContent":["import styled from 'styled-components';\nimport { color, display, space, typography } from 'styled-system';\n\nconst SectionTitle = styled.h2`\n  word-break: break-word;\n\n  ${color}\n  ${display}\n  ${space}\n  ${typography}\n`;\n\nSectionTitle.defaultProps = {\n  fontSize: '32px',\n  lineHeight: '36px',\n  fontWeight: 'normal',\n  color: 'black.900',\n  mb: 3,\n};\n\nexport default SectionTitle;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { gql, useMutation, useQuery } from '@apollo/client';\nimport { themeGet } from '@styled-system/theme-get';\nimport { first, get, last, startCase } from 'lodash';\nimport { defineMessages, FormattedMessage, useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport INTERVALS from '../../lib/constants/intervals';\nimport { PAYMENT_METHOD_SERVICE } from '../../lib/constants/payment-methods';\nimport { AmountTypes } from '../../lib/constants/tiers-types';\nimport { formatCurrency } from '../../lib/currency-utils';\nimport { getIntervalFromContributionFrequency } from '../../lib/date-utils';\nimport { getErrorFromGraphqlException } from '../../lib/errors';\nimport { API_V2_CONTEXT } from '../../lib/graphql/helpers';\nimport { DEFAULT_MINIMUM_AMOUNT, DEFAULT_PRESETS } from '../../lib/tier-utils';\n\nimport FormattedMoneyAmount from '../FormattedMoneyAmount';\nimport { Box, Flex } from '../Grid';\nimport I18nFormatters from '../I18nFormatters';\nimport LoadingPlaceholder from '../LoadingPlaceholder';\nimport PayWithPaypalButton from '../PayWithPaypalButton';\nimport StyledButton from '../StyledButton';\nimport StyledHr from '../StyledHr';\nimport StyledInputAmount from '../StyledInputAmount';\nimport StyledRadioList from '../StyledRadioList';\nimport StyledSelect from '../StyledSelect';\nimport { P } from '../Text';\nimport { TOAST_TYPE, useToasts } from '../ToastProvider';\n\nimport { getSubscriptionStartDate } from './AddPaymentMethod';\n\nconst TierBox = styled(Flex)`\n  border-top: 1px solid ${themeGet('colors.black.300')};\n`;\n\nconst messages = defineMessages({\n  customTier: {\n    id: 'ContributionType.Custom',\n    defaultMessage: 'Custom contribution',\n  },\n});\n\nconst updateOrderMutation = gql`\n  mutation UpdateOrder(\n    $order: OrderReferenceInput!\n    $amount: AmountInput\n    $tier: TierReferenceInput\n    $paypalSubscriptionId: String\n  ) {\n    updateOrder(order: $order, amount: $amount, tier: $tier, paypalSubscriptionId: $paypalSubscriptionId) {\n      id\n      status\n      frequency\n      amount {\n        value\n        currency\n      }\n      tier {\n        id\n        name\n      }\n    }\n  }\n`;\n\nconst tiersQuery = gql`\n  query UpdateOrderPopUpTiers($slug: String!) {\n    account(slug: $slug) {\n      id\n      slug\n      name\n      type\n      currency\n      settings\n      ... on AccountWithContributions {\n        tiers {\n          nodes {\n            id\n            name\n            interval\n            amount {\n              value\n              valueInCents\n              currency\n            }\n            minimumAmount {\n              value\n              valueInCents\n              currency\n            }\n            amountType\n            presets\n          }\n        }\n      }\n    }\n  }\n`;\n\n// TODO: internationalize me\nconst OTHER_LABEL = 'Other';\n\nconst useUpdateOrder = ({ contribution, onSuccess }) => {\n  const { addToast } = useToasts();\n  const [submitUpdateOrder, { loading }] = useMutation(updateOrderMutation, { context: API_V2_CONTEXT });\n  return {\n    isSubmittingOrder: loading,\n    updateOrder: async (selectedTier, selectedAmountOption, inputAmountValue, paypalSubscriptionId = null) => {\n      try {\n        await submitUpdateOrder({\n          variables: {\n            order: { id: contribution.id },\n            paypalSubscriptionId,\n            amount: {\n              valueInCents: selectedAmountOption.label === OTHER_LABEL ? inputAmountValue : selectedAmountOption.value,\n            },\n            tier: {\n              id: selectedTier?.id || null,\n            },\n          },\n        });\n        addToast({\n          type: TOAST_TYPE.SUCCESS,\n          message: (\n            <FormattedMessage\n              id=\"subscription.createSuccessUpdated\"\n              defaultMessage=\"Your recurring contribution has been <strong>updated</strong>.\"\n              values={I18nFormatters}\n            />\n          ),\n        });\n        onSuccess();\n      } catch (error) {\n        const errorMsg = getErrorFromGraphqlException(error).message;\n        addToast({ type: TOAST_TYPE.ERROR, message: errorMsg });\n        return false;\n      }\n    },\n  };\n};\n\nconst getTierAmountOptions = (selectedTier, contribution, locale) => {\n  const currency = contribution.amount.currency;\n  const buildOptionFromAmount = amount => ({ label: formatCurrency(amount, currency, { locale }), value: amount });\n  if (selectedTier && !selectedTier?.flexible) {\n    return [buildOptionFromAmount(selectedTier.amount)];\n  } else {\n    // TODO: use getTierPresets from tier-utils\n    const presets = selectedTier?.presets || DEFAULT_PRESETS;\n    const otherValue = null; // The way it's currently implemented, it doesn't need a value\n    return [...presets.map(buildOptionFromAmount), { label: OTHER_LABEL, value: otherValue }];\n  }\n};\n\nconst getContributeOptions = (intl, contribution, tiers, disableCustomContributions) => {\n  const tierOptions = (tiers || [])\n    .filter(tier => tier.interval !== null)\n    .map(tier => ({\n      key: `${contribution.id}-tier-${tier.id}`,\n      title: tier.name,\n      flexible: tier.amountType === AmountTypes.FLEXIBLE,\n      amount: tier.amountType === AmountTypes.FLEXIBLE ? tier.minimumAmount.valueInCents : tier.amount.valueInCents,\n      id: tier.id,\n      currency: tier.amount.currency,\n      interval: tier.interval,\n      presets: tier.presets,\n      minimumAmount:\n        tier.amountType === AmountTypes.FLEXIBLE ? tier.minimumAmount.valueInCents : DEFAULT_MINIMUM_AMOUNT,\n    }));\n  if (!disableCustomContributions) {\n    tierOptions.unshift({\n      key: `${contribution.id}-custom-tier`,\n      title: intl.formatMessage(messages.customTier),\n      flexible: true,\n      amount: DEFAULT_MINIMUM_AMOUNT,\n      id: null,\n      currency: contribution.amount.currency,\n      interval: contribution.frequency.toLowerCase().slice(0, -2),\n      presets: DEFAULT_PRESETS,\n      minimumAmount: DEFAULT_MINIMUM_AMOUNT,\n      isCustom: true,\n    });\n  }\n  return tierOptions;\n};\n\nconst geSelectedContributeOption = (contribution, tiersOptions) => {\n  const defaultContribution =\n    tiersOptions.find(option => option.isCustom) || tiersOptions.find(option => option.interval);\n  if (!contribution.tier) {\n    return defaultContribution;\n  } else {\n    // for some collectives if a tier has been deleted it won't have moved the contribution\n    // to the custom 'null' tier so we have to check for that\n    const matchedTierOption = tiersOptions.find(option => option.id === contribution.tier.id);\n    return !matchedTierOption ? defaultContribution : matchedTierOption;\n  }\n};\n\nconst useContributeOptions = (order, tiers, tiersLoading, disableCustomContributions) => {\n  const intl = useIntl();\n  const [loading, setLoading] = useState(true);\n  const [selectedContributeOption, setSelectedContributeOption] = useState(null);\n  const [amountOptions, setAmountOptions] = useState(null);\n  const [selectedAmountOption, setSelectedAmountOption] = useState(null);\n  const [inputAmountValue, setInputAmountValue] = useState(null);\n\n  const contributeOptions = React.useMemo(() => {\n    return getContributeOptions(intl, order, tiers, disableCustomContributions);\n  }, [intl, order, tiers, disableCustomContributions]);\n\n  if (!contributeOptions.length === 0) {\n    throw new Error('Could not compute at least one contribution option.');\n  }\n\n  if (contributeOptions && !selectedContributeOption && !tiersLoading) {\n    const selectedContribution = geSelectedContributeOption(order, contributeOptions);\n    if (!selectedContribution) {\n      throw new Error('Could not compute a selected contribution option.');\n    }\n    setSelectedContributeOption(selectedContribution);\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    if (selectedContributeOption !== null) {\n      const options = getTierAmountOptions(selectedContributeOption, order, intl.locale);\n      setAmountOptions(options);\n\n      let option;\n      if ((selectedContributeOption.id || null) !== (order.tier?.id || null)) {\n        // Just pick first if tier is different than current one\n        option = first(options);\n      } else {\n        // Find one of the presets, or default to the last one which is supposed to be \"Other\" by convention\n        option = options.find(option => option.value === order.amount.valueInCents) || last(options);\n      }\n      setSelectedAmountOption(option);\n      setInputAmountValue(option.value || order.amount.valueInCents);\n    }\n  }, [selectedContributeOption]);\n\n  return {\n    loading,\n    contributeOptions,\n    amountOptions,\n    selectedContributeOption,\n    selectedAmountOption,\n    inputAmountValue,\n    setSelectedContributeOption,\n    setSelectedAmountOption,\n    setInputAmountValue,\n  };\n};\n\nconst ContributionInterval = ({ tier, contribution }) => {\n  const isActiveTier = contribution.tier?.id && contribution.tier.id === tier.id;\n  let interval = null;\n\n  if (isActiveTier) {\n    interval = getIntervalFromContributionFrequency(contribution.frequency);\n  } else if (tier?.interval === INTERVALS.flexible) {\n    // TODO: We should ideally have a select for that\n    interval = getIntervalFromContributionFrequency(contribution.frequency) || INTERVALS.month;\n  } else if (tier?.interval && tier.interval !== INTERVALS.flexible) {\n    interval = tier.interval;\n  }\n\n  // Show message only if there's an active interval\n  if (interval) {\n    return (\n      <P fontSize=\"12px\" fontWeight=\"500\">\n        <FormattedMessage\n          id=\"tier.interval\"\n          defaultMessage=\"per {interval, select, month {month} year {year} other {}}\"\n          values={{ interval }}\n        />\n      </P>\n    );\n  } else {\n    return null;\n  }\n};\n\nContributionInterval.propTypes = {\n  tier: PropTypes.shape({\n    id: PropTypes.string,\n    interval: PropTypes.string,\n  }),\n  contribution: PropTypes.shape({\n    tier: PropTypes.shape({\n      id: PropTypes.string,\n      interval: PropTypes.string,\n    }),\n    frequency: PropTypes.string,\n  }),\n  onCloseEdit: PropTypes.func,\n};\n\nconst UpdateOrderPopUp = ({ contribution, onCloseEdit }) => {\n  // GraphQL mutations and queries\n  const queryVariables = { slug: contribution.toAccount.slug };\n  const { data, loading: tiersLoading } = useQuery(tiersQuery, { variables: queryVariables, context: API_V2_CONTEXT });\n\n  // state management\n  const { locale } = useIntl();\n  const { addToast } = useToasts();\n  const { isSubmittingOrder, updateOrder } = useUpdateOrder({ contribution, onSuccess: onCloseEdit });\n  const tiers = get(data, 'account.tiers.nodes', null);\n  const disableCustomContributions = get(data, 'account.settings.disableCustomContributions', false);\n  const contributeOptionsState = useContributeOptions(contribution, tiers, tiersLoading, disableCustomContributions);\n  const {\n    amountOptions,\n    inputAmountValue,\n    contributeOptions,\n    selectedContributeOption,\n    selectedAmountOption,\n    setInputAmountValue,\n    setSelectedContributeOption,\n  } = contributeOptionsState;\n  const selectedTier = selectedContributeOption?.isCustom ? null : selectedContributeOption;\n  const isPaypal = contribution.paymentMethod.service === PAYMENT_METHOD_SERVICE.PAYPAL;\n  const tipAmount = contribution.platformTipAmount?.valueInCents || 0;\n  const newAmount = selectedAmountOption?.label === OTHER_LABEL ? inputAmountValue : selectedAmountOption?.value;\n  const newTotalAmount = newAmount + tipAmount; // For now tip can't be updated, we're just carrying it over\n\n  // When we change the amount option (One of the presets or Other)\n  const setSelectedAmountOption = ({ label, value }) => {\n    // Always set \"Other\" input value to the last one selected\n    // \"Other\" itself doesn't have a pre-defined value\n    if (label !== OTHER_LABEL) {\n      setInputAmountValue(value);\n    }\n    contributeOptionsState.setSelectedAmountOption({ label, value });\n  };\n\n  return (\n    <Fragment>\n      <Flex width={1} alignItems=\"center\" justifyContent=\"center\" minHeight={50} px={3}>\n        <P my={2} fontSize=\"12px\" textTransform=\"uppercase\" color=\"black.700\">\n          <FormattedMessage id=\"subscription.menu.updateTier\" defaultMessage=\"Update tier\" />\n        </P>\n        <Flex flexGrow={1} alignItems=\"center\">\n          <StyledHr width=\"100%\" mx={2} />\n        </Flex>\n      </Flex>\n      {tiersLoading || contributeOptionsState.loading ? (\n        <LoadingPlaceholder height={100} />\n      ) : (\n        <StyledRadioList\n          id=\"ContributionTier\"\n          name={`${contribution.id}-ContributionTier`}\n          keyGetter=\"key\"\n          options={contributeOptions}\n          onChange={({ value }) => setSelectedContributeOption(value)}\n          value={selectedContributeOption?.key}\n        >\n          {({\n            radio,\n            checked,\n            value: { id, title, subtitle, amount, flexible, currency, interval, minimumAmount },\n          }) => (\n            <TierBox minHeight={50} py={2} px={3} bg=\"white.full\" data-cy=\"recurring-contribution-tier-box\">\n              <Flex alignItems=\"center\">\n                <Box as=\"span\" mr={3} flexWrap=\"wrap\">\n                  {radio}\n                </Box>\n                <Flex flexDirection=\"column\">\n                  <P fontWeight={subtitle ? 600 : 400} color=\"black.900\">\n                    {startCase(title)}\n                  </P>\n                  {checked && flexible ? (\n                    <Fragment>\n                      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */}\n                      <div onClick={e => e.preventDefault()}>\n                        <StyledSelect\n                          inputId={`tier-amount-select-${contribution.id}`}\n                          data-cy=\"tier-amount-select\"\n                          onChange={setSelectedAmountOption}\n                          value={selectedAmountOption}\n                          options={amountOptions}\n                          my={2}\n                          minWidth={150}\n                          isSearchable={false}\n                        />\n                      </div>\n                      <ContributionInterval contribution={contribution} tier={{ id, interval }} />\n                      {selectedAmountOption?.label === OTHER_LABEL && (\n                        <Flex flexDirection=\"column\">\n                          <P fontSize=\"12px\" fontWeight=\"600\" my={2}>\n                            <FormattedMessage id=\"RecurringContributions.customAmount\" defaultMessage=\"Custom amount\" />\n                          </P>\n                          <Box>\n                            <StyledInputAmount\n                              type=\"number\"\n                              data-cy=\"recurring-contribution-custom-amount-input\"\n                              currency={currency}\n                              value={inputAmountValue}\n                              onChange={setInputAmountValue}\n                              min={DEFAULT_MINIMUM_AMOUNT}\n                              precision={2}\n                              px=\"2px\"\n                            />\n                          </Box>\n                          <P fontSize=\"12px\" fontWeight=\"600\" my={2}>\n                            <FormattedMessage\n                              defaultMessage=\"Min. amount: {minAmount}\"\n                              id=\"RecurringContributions.minAmount\"\n                              values={{\n                                minAmount: formatCurrency(minimumAmount, currency, { locale }),\n                              }}\n                            />\n                          </P>\n                        </Flex>\n                      )}\n                    </Fragment>\n                  ) : (\n                    <Fragment>\n                      {flexible && (\n                        <P fontSize=\"12px\" fontWeight={400} lineHeight=\"18px\" color=\"black.500\">\n                          <FormattedMessage id=\"ContributeTier.StartsAt\" defaultMessage=\"Starts at\" />\n                        </P>\n                      )}\n                      <P fontWeight={400} color=\"black.900\">\n                        <FormattedMoneyAmount amount={amount} interval={interval.toLowerCase()} currency={currency} />\n                      </P>\n                    </Fragment>\n                  )}\n                </Flex>\n              </Flex>\n            </TierBox>\n          )}\n        </StyledRadioList>\n      )}\n      <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\">\n        <Flex flexGrow={1} alignItems=\"center\">\n          <StyledHr width=\"100%\" />\n        </Flex>\n      </Flex>\n      <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\" minHeight={50}>\n        <StyledButton buttonSize=\"tiny\" minWidth={75} onClick={onCloseEdit} height={25} mr={2}>\n          <FormattedMessage id=\"actions.cancel\" defaultMessage=\"Cancel\" />\n        </StyledButton>\n        {isPaypal && selectedAmountOption ? (\n          <PayWithPaypalButton\n            isLoading={!selectedAmountOption}\n            isSubmitting={isSubmittingOrder}\n            totalAmount={newTotalAmount}\n            currency={contribution.amount.currency}\n            interval={\n              selectedContributeOption?.interval || getIntervalFromContributionFrequency(contribution.frequency)\n            }\n            host={contribution.toAccount.host}\n            collective={contribution.toAccount}\n            tier={selectedTier}\n            style={{ height: 25, size: 'small' }}\n            subscriptionStartDate={getSubscriptionStartDate(contribution)}\n            onError={e => addToast({ type: TOAST_TYPE.ERROR, title: e.message })}\n            onSuccess={({ subscriptionId }) =>\n              updateOrder(selectedTier, selectedAmountOption, inputAmountValue, subscriptionId)\n            }\n          />\n        ) : (\n          <StyledButton\n            height={25}\n            minWidth={75}\n            buttonSize=\"tiny\"\n            buttonStyle=\"secondary\"\n            loading={isSubmittingOrder}\n            data-cy=\"recurring-contribution-update-order-button\"\n            onClick={() => updateOrder(selectedTier, selectedAmountOption, inputAmountValue)}\n          >\n            <FormattedMessage id=\"actions.update\" defaultMessage=\"Update\" />\n          </StyledButton>\n        )}\n      </Flex>\n    </Fragment>\n  );\n};\n\nUpdateOrderPopUp.propTypes = {\n  contribution: PropTypes.object.isRequired,\n  onCloseEdit: PropTypes.func,\n};\n\nexport default UpdateOrderPopUp;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { gql, useMutation } from '@apollo/client';\nimport { CreditCard } from '@styled-icons/boxicons-regular/CreditCard';\nimport { Dollar } from '@styled-icons/boxicons-regular/Dollar';\nimport { XCircle } from '@styled-icons/boxicons-regular/XCircle';\nimport { themeGet } from '@styled-system/theme-get';\nimport { defineMessages, FormattedMessage, useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { getErrorFromGraphqlException } from '../../lib/errors';\nimport { API_V2_CONTEXT } from '../../lib/graphql/helpers';\n\nimport Container from '../Container';\nimport { Flex } from '../Grid';\nimport I18nFormatters from '../I18nFormatters';\nimport StyledButton from '../StyledButton';\nimport StyledHr from '../StyledHr';\nimport { slideInUp } from '../StyledKeyframes';\nimport StyledRadioList from '../StyledRadioList';\nimport StyledTextarea from '../StyledTextarea';\nimport { P, Span } from '../Text';\nimport { TOAST_TYPE, useToasts } from '../ToastProvider';\nimport { withUser } from '../UserProvider';\n\nimport UpdateOrderPopUp from './UpdateOrderPopUp';\nimport UpdatePaymentMethodPopUp from './UpdatePaymentMethodPopUp';\n\n//  Styled components\nconst RedXCircle = styled(XCircle)`\n  color: ${themeGet('colors.red.500')};\n`;\n\nconst GrayXCircle = styled(XCircle)`\n  color: ${themeGet('colors.black.500')};\n  cursor: pointer;\n`;\n\nconst MenuItem = styled(Flex).attrs({\n  px: 3,\n})`\n  cursor: pointer;\n`;\n\nconst PopUpMenu = styled(Flex)`\n  position: absolute;\n  bottom: 0;\n  z-index: 998;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0px 2px 7px rgba(0, 0, 0, 0.5);\n  min-height: 180px;\n  max-height: 360px;\n  width: 100%;\n  overflow-y: auto;\n  padding: 4px 0;\n  animation: ${slideInUp} 0.2s;\n`;\n\nconst MenuSection = styled(Flex).attrs({\n  flexDirection: 'column',\n  width: 1,\n})``;\n\nconst i18nReasons = defineMessages({\n  NO_LONGER_WANT_TO_SUPPORT: {\n    id: 'subscription.cancel.reason1',\n    defaultMessage: 'No longer want to back the collective',\n  },\n  UPDATING_ORDER: { id: 'subscription.cancel.reason2', defaultMessage: 'Changing payment method or amount' },\n  OTHER: { id: 'subscription.cancel.other', defaultMessage: 'Other' },\n});\n\n// GraphQL\nconst cancelRecurringContributionMutation = gql`\n  mutation CancelRecurringContribution($order: OrderReferenceInput!, $reason: String!, $reasonCode: String!) {\n    cancelOrder(order: $order, reason: $reason, reasonCode: $reasonCode) {\n      id\n      status\n    }\n  }\n`;\n\nconst RecurringContributionsPopUp = ({ contribution, status, onCloseEdit, account }) => {\n  const { addToast } = useToasts();\n  const [menuState, setMenuState] = useState('mainMenu');\n  const intl = useIntl();\n  const [cancelReason, setCancelReason] = useState('NO_LONGER_WANT_TO_SUPPORT');\n  const [cancelReasonMessage, setCancelReasonMessage] = useState('');\n  const [submitCancellation, { loading: loadingCancellation }] = useMutation(cancelRecurringContributionMutation, {\n    context: API_V2_CONTEXT,\n  });\n\n  const mainMenu = menuState === 'mainMenu' && (status === 'ACTIVE' || status === 'ERROR');\n  const cancelMenu = menuState === 'cancelMenu';\n  const updateOrderMenu = menuState === 'updateOrderMenu';\n  const paymentMethodMenu = menuState === 'paymentMethodMenu';\n\n  return (\n    <PopUpMenu data-cy=\"recurring-contribution-menu\">\n      {mainMenu && (\n        <MenuSection>\n          <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\" px={3}>\n            <P my={2} fontSize=\"12px\" textTransform=\"uppercase\" color=\"black.700\">\n              <FormattedMessage id=\"header.options\" defaultMessage=\"Options\" />\n            </P>\n            <Flex flexGrow={1} alignItems=\"center\">\n              <StyledHr width=\"100%\" mx={2} />\n            </Flex>\n            <GrayXCircle size={26} onClick={onCloseEdit} />\n          </Flex>\n          {account.type !== 'COLLECTIVE' && (\n            <MenuItem\n              flexGrow={1 / 4}\n              width={1}\n              alignItems=\"center\"\n              justifyContent=\"space-around\"\n              onClick={() => {\n                setMenuState('paymentMethodMenu');\n              }}\n              data-cy=\"recurring-contribution-menu-payment-option\"\n            >\n              <Flex width={1 / 6}>\n                <CreditCard size={20} />\n              </Flex>\n              <Flex flexGrow={1}>\n                <P fontSize=\"14px\" fontWeight=\"400\">\n                  <FormattedMessage id=\"subscription.menu.editPaymentMethod\" defaultMessage=\"Update payment method\" />\n                </P>\n              </Flex>\n            </MenuItem>\n          )}\n          <MenuItem\n            flexGrow={1 / 4}\n            width={1}\n            alignItems=\"center\"\n            justifyContent=\"space-between\"\n            onClick={() => {\n              setMenuState('updateOrderMenu');\n            }}\n            data-cy=\"recurring-contribution-menu-tier-option\"\n          >\n            <Flex width={1 / 6}>\n              <Dollar size={20} />\n            </Flex>\n            <Flex flexGrow={1}>\n              <P fontSize=\"14px\" fontWeight=\"400\">\n                <FormattedMessage id=\"subscription.menu.updateAmount\" defaultMessage=\"Update amount\" />\n              </P>\n            </Flex>\n          </MenuItem>\n          <MenuItem\n            flexGrow={1 / 4}\n            width={1}\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            onClick={() => {\n              setMenuState('cancelMenu');\n            }}\n            data-cy=\"recurring-contribution-menu-cancel-option\"\n          >\n            <Flex width={1 / 6}>\n              <RedXCircle size={20} />\n            </Flex>\n            <Flex flexGrow={1}>\n              <P fontSize=\"14px\" fontWeight=\"400\" color=\"red.500\">\n                <FormattedMessage id=\"subscription.menu.cancelContribution\" defaultMessage=\"Cancel contribution\" />\n              </P>\n            </Flex>\n          </MenuItem>\n        </MenuSection>\n      )}\n\n      {cancelMenu && (\n        <MenuSection data-cy=\"recurring-contribution-cancel-menu\">\n          <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\" px={3}>\n            <P my={2} fontSize=\"12px\" textTransform=\"uppercase\" color=\"black.700\">\n              <FormattedMessage id=\"subscription.menu.cancelContribution\" defaultMessage=\"Cancel contribution\" />\n            </P>\n            <Flex flexGrow={1} alignItems=\"center\">\n              <StyledHr width=\"100%\" mx={2} />\n            </Flex>\n            <GrayXCircle size={26} onClick={onCloseEdit} />\n          </Flex>\n          <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\">\n            <Container p={3}>\n              <P fontSize=\"15px\" fontWeight=\"bold\" mb=\"10\" lineHeight=\"20px\">\n                <FormattedMessage\n                  id=\"subscription.cancel.question\"\n                  defaultMessage=\"Why are you cancelling your subscription today? \"\n                />\n              </P>\n              <StyledHr my={2} borderColor=\"black.200\" />\n              <StyledRadioList\n                id=\"cancel-reason-radio-list\"\n                defaultValue=\"NO_LONGER_WANT_TO_SUPPORT\"\n                onChange={e => setCancelReason(e.key)}\n                name=\"cancellation-reason\"\n                options={['NO_LONGER_WANT_TO_SUPPORT', 'UPDATING_ORDER', 'OTHER']}\n              >\n                {({ value, radio }) => (\n                  <Container\n                    display=\"flex\"\n                    alignItems=\"center\"\n                    my={2}\n                    data-cy={value}\n                    fontWeight=\"normal\"\n                    fontSize=\"12px\"\n                  >\n                    <Span mx={2}>{radio}</Span>\n                    <span>{intl.formatMessage(i18nReasons[value])}</span>\n                  </Container>\n                )}\n              </StyledRadioList>\n              {cancelReason === 'OTHER' && (\n                <StyledTextarea\n                  data-cy=\"cancellation-text-area\"\n                  onChange={e => setCancelReasonMessage(e.target.value)}\n                  value={cancelReasonMessage}\n                  fontSize=\"12px\"\n                  placeholder={intl.formatMessage({ defaultMessage: 'Provide more details (optional)' })}\n                  height={70}\n                  width=\"100%\"\n                  resize=\"none\"\n                />\n              )}\n            </Container>\n          </Flex>\n          <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\" my={1}>\n            <Flex flexGrow={1} alignItems=\"center\">\n              <StyledHr width=\"100%\" />\n            </Flex>\n          </Flex>\n          <Flex flexGrow={1 / 4} width={1} alignItems=\"center\" justifyContent=\"center\">\n            <StyledButton\n              buttonSize=\"tiny\"\n              buttonStyle=\"secondary\"\n              minWidth={75}\n              loading={loadingCancellation}\n              data-cy=\"recurring-contribution-cancel-yes\"\n              onClick={async () => {\n                try {\n                  await submitCancellation({\n                    variables: {\n                      order: { id: contribution.id },\n                      reason: cancelReason === 'OTHER' ? cancelReasonMessage : '',\n                      reasonCode: cancelReason,\n                    },\n                  });\n                  onCloseEdit();\n                  addToast({\n                    type: TOAST_TYPE.INFO,\n                    message: (\n                      <FormattedMessage\n                        id=\"subscription.createSuccessCancel\"\n                        defaultMessage=\"Your recurring contribution has been <strong>cancelled</strong>.\"\n                        values={I18nFormatters}\n                      />\n                    ),\n                  });\n                } catch (error) {\n                  const errorMsg = getErrorFromGraphqlException(error).message;\n                  addToast({ type: TOAST_TYPE.ERROR, message: errorMsg });\n                }\n              }}\n            >\n              <FormattedMessage id=\"submit\" defaultMessage=\"Submit\" />\n            </StyledButton>\n          </Flex>\n        </MenuSection>\n      )}\n\n      {paymentMethodMenu && (\n        <MenuSection data-cy=\"recurring-contribution-payment-menu\">\n          <UpdatePaymentMethodPopUp\n            setMenuState={setMenuState}\n            contribution={contribution}\n            onCloseEdit={onCloseEdit}\n            account={contribution.fromAccount || account}\n          />\n        </MenuSection>\n      )}\n\n      {updateOrderMenu && (\n        <MenuSection data-cy=\"recurring-contribution-order-menu\">\n          <UpdateOrderPopUp setMenuState={setMenuState} contribution={contribution} onCloseEdit={onCloseEdit} />\n        </MenuSection>\n      )}\n    </PopUpMenu>\n  );\n};\n\nRecurringContributionsPopUp.propTypes = {\n  contribution: PropTypes.object.isRequired,\n  LoggedInUser: PropTypes.object.isRequired,\n  status: PropTypes.string.isRequired,\n  onCloseEdit: PropTypes.func,\n  account: PropTypes.object.isRequired,\n};\n\nexport default withUser(RecurringContributionsPopUp);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isNil } from 'lodash';\nimport { defineMessages, FormattedMessage, useIntl } from 'react-intl';\n\nimport { ORDER_STATUS } from '../../lib/constants/order-status';\nimport { getPaymentMethodName } from '../../lib/payment_method_label';\nimport { getPaymentMethodIcon, getPaymentMethodMetadata } from '../../lib/payment-method-utils';\n\nimport Avatar from '../Avatar';\nimport Container from '../Container';\nimport FormattedMoneyAmount from '../FormattedMoneyAmount';\nimport { Box, Flex } from '../Grid';\nimport StyledButton from '../StyledButton';\nimport StyledCollectiveCard from '../StyledCollectiveCard';\nimport StyledTag from '../StyledTag';\nimport StyledTooltip from '../StyledTooltip';\nimport { P } from '../Text';\n\nimport RecurringContributionsPopUp from './RecurringContributionsPopUp';\n\nconst messages = defineMessages({\n  manage: {\n    id: 'Edit',\n    defaultMessage: 'Edit',\n  },\n  tag: {\n    id: 'Subscriptions.Status',\n    defaultMessage:\n      '{status, select, ACTIVE {Active contribution} CANCELLED {Cancelled contribution} ERROR {Error} REJECTED {Rejected contribution} other {}}',\n  },\n});\n\nconst RecurringContributionsCard = ({\n  collective,\n  status,\n  contribution,\n  account,\n  isEditing,\n  canEdit,\n  isAdmin,\n  onCloseEdit,\n  onEdit,\n  showPaymentMethod,\n  ...props\n}) => {\n  const { formatMessage } = useIntl();\n  const isError = status === ORDER_STATUS.ERROR;\n  const isRejected = status === ORDER_STATUS.REJECTED;\n  const isActive = status === ORDER_STATUS.ACTIVE || isError;\n\n  return (\n    <StyledCollectiveCard\n      {...props}\n      collective={collective}\n      bodyHeight=\"350px\"\n      tag={\n        <StyledTag\n          display=\"inline-block\"\n          textTransform=\"uppercase\"\n          my={2}\n          type={isError || isRejected ? 'error' : undefined}\n        >\n          {formatMessage(messages.tag, { status })}\n        </StyledTag>\n      }\n    >\n      {Boolean(contribution.fromAccount?.isIncognito) && (\n        <Container position=\"absolute\" right=\"12px\" top=\"12px\">\n          <StyledTooltip\n            content={() => (\n              <FormattedMessage\n                id=\"RecurringContribution.Incognito\"\n                defaultMessage=\"This is an incognito recurring contribution, only you can see it.\"\n              />\n            )}\n          >\n            <Container borderRadius=\"100%\" css={{ filter: 'drop-shadow(-1px 1px 2px #dcdcdc)' }}>\n              <Avatar collective={contribution.fromAccount} radius={36} />\n            </Container>\n          </StyledTooltip>\n        </Container>\n      )}\n      <Container p={3} pt={0}>\n        <Box mb={3}>\n          {showPaymentMethod && contribution.paymentMethod && (\n            <Box mb={3}>\n              <P mb={2} fontSize=\"14px\" lineHeight=\"20px\" fontWeight=\"400\">\n                Payment method\n              </P>\n              <Flex alignItems=\"center\" height=\"28px\">\n                <Box mr={2}>{getPaymentMethodIcon(contribution.paymentMethod, account)}</Box>\n                <Flex flexDirection=\"column\" css={{ position: 'relative', minWidth: 0 }}>\n                  <P\n                    fontSize=\"11px\"\n                    lineHeight=\"14px\"\n                    fontWeight=\"bold\"\n                    truncateOverflow\n                    title={getPaymentMethodName(contribution.paymentMethod)}\n                  >\n                    {getPaymentMethodName(contribution.paymentMethod)}\n                  </P>\n                  <P fontSize=\"11px\" color=\"black.700\" truncateOverflow>\n                    {getPaymentMethodMetadata(contribution.paymentMethod)}\n                  </P>\n                </Flex>\n              </Flex>\n            </Box>\n          )}\n          <div>\n            <P fontSize=\"14px\" lineHeight=\"20px\" fontWeight=\"400\">\n              <FormattedMessage id=\"membership.totalDonations.title\" defaultMessage=\"Amount contributed\" />\n            </P>\n            <P fontSize=\"14px\" lineHeight=\"20px\" fontWeight=\"bold\" data-cy=\"recurring-contribution-amount-contributed\">\n              <FormattedMoneyAmount\n                amount={contribution.totalAmount.valueInCents}\n                interval={contribution.frequency.toLowerCase().slice(0, -2)}\n                currency={contribution.totalAmount.currency}\n              />\n            </P>\n            {!isNil(contribution.platformTipAmount?.valueInCents) && (\n              <StyledTooltip\n                content={() => (\n                  <FormattedMessage\n                    id=\"Subscriptions.FeesOnTopTooltip\"\n                    defaultMessage=\"Contribution plus Platform Tip\"\n                  />\n                )}\n              >\n                <P fontSize=\"12px\" lineHeight=\"20px\" color=\"black.700\">\n                  (\n                  <FormattedMoneyAmount\n                    amount={contribution.amount.valueInCents}\n                    currency={contribution.amount.currency}\n                    showCurrencyCode={false}\n                    precision=\"auto\"\n                    amountStyles={{ fontWeight: 'normal', color: 'black.700' }}\n                  />\n                  {' + '}\n                  <FormattedMoneyAmount\n                    amount={contribution.platformTipAmount.valueInCents}\n                    currency={contribution.amount.currency}\n                    showCurrencyCode={false}\n                    precision=\"auto\"\n                    amountStyles={{ fontWeight: 'normal', color: 'black.700' }}\n                  />\n                  )\n                </P>\n              </StyledTooltip>\n            )}\n          </div>\n        </Box>\n        <Box mb={3}>\n          <P fontSize=\"14px\" lineHeight=\"20px\" fontWeight=\"400\">\n            <FormattedMessage id=\"Subscriptions.ContributedToDate\" defaultMessage=\"Contributed to date\" />\n          </P>\n          <P fontSize=\"14px\" lineHeight=\"20px\">\n            <FormattedMoneyAmount\n              amount={contribution.totalDonations.valueInCents}\n              currency={contribution.totalDonations.currency}\n            />\n          </P>\n        </Box>\n        {isAdmin && isActive && (\n          <StyledButton\n            buttonSize=\"tiny\"\n            onClick={onEdit}\n            disabled={!canEdit}\n            data-cy=\"recurring-contribution-edit-activate-button\"\n            width=\"100%\"\n          >\n            {formatMessage(messages.manage)}\n          </StyledButton>\n        )}\n      </Container>\n      {isEditing && (\n        <RecurringContributionsPopUp\n          contribution={contribution}\n          status={status}\n          onCloseEdit={onCloseEdit}\n          account={account}\n        />\n      )}\n    </StyledCollectiveCard>\n  );\n};\n\nRecurringContributionsCard.propTypes = {\n  collective: PropTypes.object.isRequired,\n  isEditing: PropTypes.bool,\n  isAdmin: PropTypes.bool,\n  canEdit: PropTypes.bool,\n  onCloseEdit: PropTypes.func,\n  onEdit: PropTypes.func,\n  contribution: PropTypes.shape({\n    amount: PropTypes.object.isRequired,\n    totalAmount: PropTypes.object.isRequired,\n    platformTipAmount: PropTypes.object,\n    frequency: PropTypes.string.isRequired,\n    totalDonations: PropTypes.object.isRequired,\n    paymentMethod: PropTypes.object,\n    fromAccount: PropTypes.object,\n  }),\n  status: PropTypes.string.isRequired,\n  LoggedInUser: PropTypes.object,\n  account: PropTypes.object.isRequired,\n  showPaymentMethod: PropTypes.bool,\n};\n\nRecurringContributionsCard.defaultProps = {\n  showPaymentMethod: true,\n};\n\nexport default RecurringContributionsCard;\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzA5IiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwOSAyMDAiIGZpbGw9Im5vbmUiIAogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgb3BhY2l0eT0iMC42NCI+CiAgICA8cGF0aCBvcGFjaXR5PSIwLjY0IiBkPSJNMjMyLjg5MiAxOTkuNTI3QzI1OC41MzQgMTk5LjUyNyAyNzkuMzIgMTc4Ljc4MyAyNzkuMzIgMTUzLjE5NUMyNzkuMzIgMTI3LjYwNiAyNTguNTM0IDEwNi44NjMgMjMyLjg5MiAxMDYuODYzQzIwNy4yNSAxMDYuODYzIDE4Ni40NjMgMTI3LjYwNiAxODYuNDYzIDE1My4xOTVDMTg2LjQ2MyAxNzguNzgzIDIwNy4yNSAxOTkuNTI3IDIzMi44OTIgMTk5LjUyN1oiIGZpbGw9IiNFN0VFRkEiLz4KICAgIDxwYXRoIG9wYWNpdHk9IjAuNjQiIGQ9Ik0yOS4yMDUxIDE3NC4xMTlDNDUuMzM0NiAxNzQuMTE5IDU4LjQxMDEgMTYxLjA3MSA1OC40MTAxIDE0NC45NzVDNTguNDEwMSAxMjguODc5IDQ1LjMzNDYgMTE1LjgzIDI5LjIwNTEgMTE1LjgzQzEzLjA3NTYgMTE1LjgzIDAgMTI4Ljg3OSAwIDE0NC45NzVDMCAxNjEuMDcxIDEzLjA3NTYgMTc0LjExOSAyOS4yMDUxIDE3NC4xMTlaIiBmaWxsPSIjRTdFRUZBIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIwLjY0IiBkPSJNMjM3LjAxIDUwLjgxNTlDMjQ2LjMxNiA1MC44MTU5IDI1My44NiA0My4yODggMjUzLjg2IDM0LjAwMThDMjUzLjg2IDI0LjcxNTcgMjQ2LjMxNiAxNy4xODc3IDIzNy4wMSAxNy4xODc3QzIyNy43MDUgMTcuMTg3NyAyMjAuMTYxIDI0LjcxNTcgMjIwLjE2MSAzNC4wMDE4QzIyMC4xNjEgNDMuMjg4IDIyNy43MDUgNTAuODE1OSAyMzcuMDEgNTAuODE1OVoiIGZpbGw9IiNFN0VFRkEiLz4KICAgIDxwYXRoIG9wYWNpdHk9IjAuNjQiIGQ9Ik0xOTUuMDc1IDE3LjE4NzdDMTk5LjgzMSAxNy4xODc3IDIwMy42ODcgMTMuMzQwMSAyMDMuNjg3IDguNTkzODZDMjAzLjY4NyAzLjg0NzYgMTk5LjgzMSAwIDE5NS4wNzUgMEMxOTAuMzE5IDAgMTg2LjQ2MyAzLjg0NzYgMTg2LjQ2MyA4LjU5Mzg2QzE4Ni40NjMgMTMuMzQwMSAxOTAuMzE5IDE3LjE4NzcgMTk1LjA3NSAxNy4xODc3WiIgZmlsbD0iI0U3RUVGQSIvPgogICAgPHBhdGggb3BhY2l0eT0iMC42NCIgZD0iTTMwMy43NTggMTk5QzMwNi42NTMgMTk5IDMwOSAxOTYuNjU4IDMwOSAxOTMuNzY5QzMwOSAxOTAuODggMzA2LjY1MyAxODguNTM4IDMwMy43NTggMTg4LjUzOEMzMDAuODYzIDE4OC41MzggMjk4LjUxNiAxOTAuODggMjk4LjUxNiAxOTMuNzY5QzI5OC41MTYgMTk2LjY1OCAzMDAuODYzIDE5OSAzMDMuNzU4IDE5OVoiIGZpbGw9IiNFN0VERjYiLz4KICAgIDxwYXRoIG9wYWNpdHk9IjAuNjQiIGQ9Ik0xNC4yMjgxIDU5Ljc4MzRDMTcuMTIzMiA1OS43ODM0IDE5LjQ3MDEgNTcuNDQxNCAxOS40NzAxIDU0LjU1MjNDMTkuNDcwMSA1MS42NjMzIDE3LjEyMzIgNDkuMzIxMyAxNC4yMjgxIDQ5LjMyMTNDMTEuMzMzMSA0OS4zMjEzIDguOTg2MjEgNTEuNjYzMyA4Ljk4NjIxIDU0LjU1MjNDOC45ODYyMSA1Ny40NDE0IDExLjMzMzEgNTkuNzgzNCAxNC4yMjgxIDU5Ljc4MzRaIiBmaWxsPSIjRTdFRUZBIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIwLjY0IiBkPSJNNTUgMTk2Ljk2N0M1OS40MTgzIDE5Ni45NjcgNjMgMTkzLjM5MiA2MyAxODguOTgzQzYzIDE4NC41NzQgNTkuNDE4MyAxODEgNTUgMTgxQzUwLjU4MTcgMTgxIDQ3IDE4NC41NzQgNDcgMTg4Ljk4M0M0NyAxOTMuMzkyIDUwLjU4MTcgMTk2Ljk2NyA1NSAxOTYuOTY3WiIgZmlsbD0iI0RFRTZGNCIvPgogICAgPHBhdGggb3BhY2l0eT0iMC42NCIgZD0iTTg2LjkzMDkgMTIxLjY3NUMxMTEuNzQ2IDEyMS42NzUgMTMxLjg2MiAxMDEuNjAxIDEzMS44NjIgNzYuODM3NUMxMzEuODYyIDUyLjA3NDUgMTExLjc0NiAzMiA4Ni45MzA5IDMyQzYyLjExNjIgMzIgNDIgNTIuMDc0NSA0MiA3Ni44Mzc1QzQyIDEwMS42MDEgNjIuMTE2MiAxMjEuNjc1IDg2LjkzMDkgMTIxLjY3NVoiIGZpbGw9IiNFN0VFRkEiLz4KICAgIDxwYXRoIG9wYWNpdHk9IjAuNjQiIGQ9Ik0xNDEuNTMyIDE5Ni41MzhDMTg0Ljk1OCAxOTYuNTM4IDIyMC4xNjEgMTYxLjQwOCAyMjAuMTYxIDExOC4wNzJDMjIwLjE2MSA3NC43MzY3IDE4NC45NTggMzkuNjA2NCAxNDEuNTMyIDM5LjYwNjRDOTguMTA2NyAzOS42MDY0IDYyLjkwMzMgNzQuNzM2NyA2Mi45MDMzIDExOC4wNzJDNjIuOTAzMyAxNjEuNDA4IDk4LjEwNjcgMTk2LjUzOCAxNDEuNTMyIDE5Ni41MzhaIiBmaWxsPSIjREJFN0Y5Ii8+CiAgPC9nPgogIDxwYXRoIGQ9Ik0yNjcuMjggODQuNzAyMUwyMDQuNjc5IDcxLjM5NTdDMjAwLjM1NyA3MC40NzcxIDE5Ni4xMDkgNzMuMjM1OSAxOTUuMTkgNzcuNTU3NkwxNzguNTU4IDE1NS44MDlDMTc3LjYzOSAxNjAuMTMxIDE4MC4zOTggMTY0LjM3OSAxODQuNzE5IDE2NS4yOThMMjQ3LjMyMSAxNzguNjA0QzI1MS42NDMgMTc5LjUyMyAyNTUuODkxIDE3Ni43NjQgMjU2LjgwOSAxNzIuNDQyTDI3My40NDIgOTQuMTkwNUMyNzQuMzYxIDg5Ljg2ODggMjcxLjYwMiA4NS42MjA3IDI2Ny4yOCA4NC43MDIxWiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q1REFFMCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtZGFzaGFycmF5PSIyIDIiLz4KICA8cGF0aCBkPSJNMTIxLjMyMSA3MS4zOTU4TDU4LjcxOTUgODQuNzAyMkM1NC4zOTc3IDg1LjYyMDggNTEuNjM5IDg5Ljg2ODkgNTIuNTU3NiA5NC4xOTA3TDY5LjE5MDUgMTcyLjQ0MkM3MC4xMDkxIDE3Ni43NjQgNzQuMzU3MyAxNzkuNTIzIDc4LjY3OSAxNzguNjA0TDE0MS4yOCAxNjUuMjk4QzE0NS42MDIgMTY0LjM3OSAxNDguMzYxIDE2MC4xMzEgMTQ3LjQ0MiAxNTUuODFMMTMwLjgwOSA3Ny41NTc3QzEyOS44OTEgNzMuMjM2IDEyNS42NDMgNzAuNDc3MiAxMjEuMzIxIDcxLjM5NThaIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSIjRDVEQUUwIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1kYXNoYXJyYXk9IjIgMiIvPgogIDxwYXRoIGQ9Ik0xOTUgNTZIMTMxQzEyNi41ODIgNTYgMTIzIDU5LjU4MTcgMTIzIDY0VjE0NEMxMjMgMTQ4LjQxOCAxMjYuNTgyIDE1MiAxMzEgMTUySDE5NUMxOTkuNDE4IDE1MiAyMDMgMTQ4LjQxOCAyMDMgMTQ0VjY0QzIwMyA1OS41ODE3IDE5OS40MTggNTYgMTk1IDU2WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q1REFFMCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtZGFzaGFycmF5PSIyIDIiLz4KICA8cGF0aCBvcGFjaXR5PSIwLjQ1NTMzMyIgZD0iTTE2MyAxMjlDMTc2LjI1NSAxMjkgMTg3IDExOC4yNTUgMTg3IDEwNUMxODcgOTEuNzQ1MiAxNzYuMjU1IDgxIDE2MyA4MUMxNDkuNzQ1IDgxIDEzOSA5MS43NDUyIDEzOSAxMDVDMTM5IDExOC4yNTUgMTQ5Ljc0NSAxMjkgMTYzIDEyOVoiIGZpbGw9IiNENURBRTAiLz4KICA8cGF0aCBkPSJNMTYzIDEyMC42QzE2NC4zMjYgMTIwLjYgMTY1LjQgMTE5LjUyNiAxNjUuNCAxMTguMkMxNjUuNCAxMTYuODc1IDE2NC4zMjYgMTE1LjggMTYzIDExNS44QzE2MS42NzUgMTE1LjggMTYwLjYgMTE2Ljg3NSAxNjAuNiAxMTguMkMxNjAuNiAxMTkuNTI2IDE2MS42NzUgMTIwLjYgMTYzIDEyMC42WiIgZmlsbD0iI0MyQzZDQyIvPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUwLjM2MiAxMTFDMTUyLjY2MSAxMTEgMTU0LjYgMTA5LjU2MSAxNTQuNiAxMDcuMzA2QzE1NC42IDEwNS44ODEgMTUyLjIxNSAxMDYuMDU2IDE1Mi4yMTUgMTA3LjA5QzE1Mi4yMTUgMTA5LjEwNyAxNDguNjM1IDEwOS4xMjggMTQ4LjYzNSAxMDcuMDlDMTQ4LjY1MiAxMDUuOTQyIDE0Ni4yIDEwNS43OTMgMTQ2LjIgMTA3LjMwNkMxNDYuMiAxMDkuNTYxIDE0OC4wNjMgMTExIDE1MC4zNjIgMTExWiIgZmlsbD0iI0MyQzZDQyIvPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTc1LjU2MiAxMTFDMTc3Ljg2MSAxMTEgMTc5LjggMTA5LjU2MSAxNzkuOCAxMDcuMzA2QzE3OS44IDEwNS44ODEgMTc3LjQxNSAxMDYuMDU2IDE3Ny40MTUgMTA3LjA5QzE3Ny40MTUgMTA5LjEwNyAxNzMuODM0IDEwOS4xMjggMTczLjgzNCAxMDcuMDlDMTczLjg1MiAxMDUuOTQyIDE3MS40IDEwNS43OTMgMTcxLjQgMTA3LjMwNkMxNzEuNCAxMDkuNTYxIDE3My4yNjMgMTExIDE3NS41NjIgMTExWiIgZmlsbD0iI0MyQzZDQyIvPgo8L3N2Zz4K\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, FormattedMessage, useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { ORDER_STATUS } from '../../lib/constants/order-status';\n\nimport Container from '../Container';\nimport { Box, Flex, Grid } from '../Grid';\nimport Image from '../Image';\nimport LoadingPlaceholder from '../LoadingPlaceholder';\nimport { fadeIn } from '../StyledKeyframes';\nimport { StyledSelectFilter } from '../StyledSelectFilter';\nimport { P } from '../Text';\nimport { withUser } from '../UserProvider';\n\nimport RecurringContributionsCard from './RecurringContributionsCard';\n\nimport EmptyCollectivesSectionImageSVG from '../collective-page/images/EmptyCollectivesSectionImage.svg';\n\nexport const FILTERS = {\n  ACTIVE: 'ACTIVE',\n  MONTHLY: 'MONTHLY',\n  YEARLY: 'YEARLY',\n  CANCELLED: 'CANCELLED',\n};\n\nexport const I18nFilters = defineMessages({\n  [FILTERS.ACTIVE]: {\n    id: 'Subscriptions.Active',\n    defaultMessage: 'Active',\n  },\n  [FILTERS.MONTHLY]: {\n    id: 'Frequency.Monthly',\n    defaultMessage: 'Monthly',\n  },\n  [FILTERS.YEARLY]: {\n    id: 'Frequency.Yearly',\n    defaultMessage: 'Yearly',\n  },\n  [FILTERS.CANCELLED]: {\n    id: 'Subscriptions.Cancelled',\n    defaultMessage: 'Cancelled',\n  },\n});\n\nconst CollectiveCardContainer = styled.div`\n  animation: ${fadeIn} 0.2s;\n`;\n\nconst filterContributions = (contributions, filterName) => {\n  const isActive = ({ status }) => status === ORDER_STATUS.ACTIVE || status === ORDER_STATUS.ERROR;\n  const isInactive = ({ status }) => status === ORDER_STATUS.CANCELLED || status === ORDER_STATUS.REJECTED;\n  switch (filterName) {\n    case FILTERS.ACTIVE:\n      return contributions.filter(isActive);\n    case FILTERS.MONTHLY:\n      return contributions.filter(contrib => isActive(contrib) && contrib.frequency === 'MONTHLY');\n    case FILTERS.YEARLY:\n      return contributions.filter(contrib => isActive(contrib) && contrib.frequency === 'YEARLY');\n    case FILTERS.CANCELLED:\n      return contributions.filter(isInactive);\n    default:\n      return [];\n  }\n};\n\nconst RecurringContributionsContainer = ({\n  recurringContributions,\n  account,\n  LoggedInUser,\n  isLoading,\n  displayFilters,\n  ...props\n}) => {\n  const isAdmin = Boolean(LoggedInUser?.isAdminOfCollective(account));\n  const intl = useIntl();\n  const [editingContributionId, setEditingContributionId] = React.useState();\n  const [filter, setFilter] = React.useState(FILTERS.ACTIVE);\n  const displayedRecurringContributions = React.useMemo(() => {\n    const filteredContributions = filterContributions(recurringContributions?.nodes || [], filter);\n    return isAdmin\n      ? filteredContributions\n      : filteredContributions.filter(contrib => contrib.status !== ORDER_STATUS.ERROR);\n  }, [recurringContributions, filter, isAdmin]);\n\n  // Reset edit when changing filters and contribution is not in the list anymore\n  React.useEffect(() => {\n    if (!displayedRecurringContributions.some(c => c.id === editingContributionId)) {\n      setEditingContributionId(null);\n    }\n  }, [displayedRecurringContributions]);\n\n  const filterOptions = React.useMemo(() => [\n    { value: FILTERS.ACTIVE, label: intl.formatMessage(I18nFilters[FILTERS.ACTIVE]) },\n    { value: FILTERS.MONTHLY, label: intl.formatMessage(I18nFilters[FILTERS.MONTHLY]) },\n    { value: FILTERS.YEARLY, label: intl.formatMessage(I18nFilters[FILTERS.YEARLY]) },\n    { value: FILTERS.CANCELLED, label: intl.formatMessage(I18nFilters[FILTERS.CANCELLED]) },\n  ]);\n\n  if (isLoading) {\n    return <LoadingPlaceholder maxHeight=\"400px\" mt={3} />;\n  }\n\n  return (\n    <Container {...props}>\n      {displayFilters && (\n        <Box mb={3}>\n          <StyledSelectFilter\n            inputId=\"recurring-contribution-interval\"\n            onChange={({ value }) => setFilter(value)}\n            value={{ value: filter, label: intl.formatMessage(I18nFilters[filter]) }}\n            options={filterOptions}\n            maxWidth=\"180px\"\n            disabled={isLoading}\n            data-cy=\"recurring-contributions-interval\"\n          />\n        </Box>\n      )}\n      {displayedRecurringContributions.length ? (\n        <Grid gridGap={24} gridTemplateColumns=\"repeat(auto-fill, minmax(275px, 1fr))\" my={2}>\n          {displayedRecurringContributions.map(contribution => (\n            <CollectiveCardContainer key={contribution.id}>\n              <RecurringContributionsCard\n                collective={contribution.toAccount}\n                status={contribution.status}\n                contribution={contribution}\n                position=\"relative\"\n                account={account}\n                isAdmin={isAdmin}\n                isEditing={contribution.id === editingContributionId}\n                canEdit={isAdmin && !editingContributionId}\n                onEdit={() => setEditingContributionId(contribution.id)}\n                onCloseEdit={() => setEditingContributionId(null)}\n                showPaymentMethod={isAdmin}\n                data-cy=\"recurring-contribution-card\"\n              />\n            </CollectiveCardContainer>\n          ))}\n        </Grid>\n      ) : (\n        <Flex flexDirection=\"column\" alignItems=\"center\" py={4}>\n          <Image src={EmptyCollectivesSectionImageSVG} alt=\"\" width={309} height={200} />\n          <P color=\"black.600\" fontSize=\"16px\" mt={5}>\n            <FormattedMessage\n              id=\"RecurringContributions.none\"\n              defaultMessage=\"No recurring contributions to see here! \"\n            />\n          </P>\n        </Flex>\n      )}\n    </Container>\n  );\n};\n\nRecurringContributionsContainer.propTypes = {\n  recurringContributions: PropTypes.object.isRequired,\n  account: PropTypes.object.isRequired,\n  LoggedInUser: PropTypes.object,\n  displayFilters: PropTypes.bool,\n  isLoading: PropTypes.bool,\n};\n\nexport default withUser(RecurringContributionsContainer);\n","import { gql } from '@apollo/client';\n\nimport { collectiveNavbarFieldsFragment } from '../../collective-page/graphql/fragments';\n\nexport const managedOrderFragment = gql`\n  fragment ManagedOrderFields on Order {\n    id\n    legacyId\n    nextChargeDate\n    paymentMethod {\n      id\n      service\n      name\n      type\n      expiryDate\n      data\n      balance {\n        value\n        valueInCents\n        currency\n      }\n    }\n    amount {\n      value\n      valueInCents\n      currency\n    }\n    totalAmount {\n      value\n      valueInCents\n      currency\n    }\n    status\n    description\n    createdAt\n    frequency\n    tier {\n      id\n      name\n    }\n    totalDonations {\n      value\n      valueInCents\n      currency\n    }\n    fromAccount {\n      id\n      name\n      slug\n      isIncognito\n      type\n    }\n    toAccount {\n      id\n      slug\n      name\n      type\n      description\n      tags\n      imageUrl\n      settings\n      ... on AccountWithHost {\n        host {\n          id\n          slug\n          paypalClientId\n          supportedPaymentMethods\n        }\n      }\n      ... on Organization {\n        host {\n          id\n          slug\n          paypalClientId\n          supportedPaymentMethods\n        }\n      }\n    }\n    platformTipAmount {\n      value\n      valueInCents\n    }\n  }\n`;\n\nexport const manageContributionsQuery = gql`\n  query RecurringContributions($slug: String!) {\n    account(slug: $slug) {\n      id\n      legacyId\n      slug\n      name\n      type\n      settings\n      imageUrl\n      features {\n        id\n        ...NavbarFields\n      }\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n        }\n      }\n      orders(filter: OUTGOING, onlySubscriptions: true, includeIncognito: true) {\n        totalCount\n        nodes {\n          id\n          ...ManagedOrderFields\n        }\n      }\n    }\n  }\n  ${collectiveNavbarFieldsFragment}\n  ${managedOrderFragment}\n`;\n"],"names":["styled","color","display","space","typography","SectionTitle","h2","defaultProps","fontSize","lineHeight","fontWeight","mb","React","Fragment","useEffect","useState","gql","useMutation","useQuery","themeGet","defineMessages","FormattedMessage","useIntl","INTERVALS","PAYMENT_METHOD_SERVICE","AmountTypes","formatCurrency","getIntervalFromContributionFrequency","getErrorFromGraphqlException","API_V2_CONTEXT","DEFAULT_MINIMUM_AMOUNT","DEFAULT_PRESETS","FormattedMoneyAmount","Box","Flex","I18nFormatters","LoadingPlaceholder","PayWithPaypalButton","StyledButton","StyledHr","StyledInputAmount","StyledRadioList","StyledSelect","P","TOAST_TYPE","useToasts","getSubscriptionStartDate","TierBox","messages","customTier","id","defaultMessage","updateOrderMutation","tiersQuery","OTHER_LABEL","useUpdateOrder","contribution","onSuccess","addToast","context","submitUpdateOrder","loading","isSubmittingOrder","updateOrder","selectedTier","selectedAmountOption","inputAmountValue","paypalSubscriptionId","variables","order","amount","valueInCents","label","value","tier","type","SUCCESS","message","errorMsg","ERROR","getTierAmountOptions","locale","currency","buildOptionFromAmount","flexible","presets","otherValue","map","getContributeOptions","intl","tiers","disableCustomContributions","tierOptions","filter","interval","key","title","name","amountType","FLEXIBLE","minimumAmount","unshift","formatMessage","frequency","toLowerCase","slice","isCustom","geSelectedContributeOption","tiersOptions","defaultContribution","find","option","matchedTierOption","useContributeOptions","tiersLoading","setLoading","selectedContributeOption","setSelectedContributeOption","amountOptions","setAmountOptions","setSelectedAmountOption","setInputAmountValue","contributeOptions","useMemo","length","Error","selectedContribution","options","ContributionInterval","isActiveTier","month","UpdateOrderPopUp","onCloseEdit","queryVariables","slug","toAccount","data","contributeOptionsState","isPaypal","paymentMethod","service","PAYPAL","tipAmount","platformTipAmount","newAmount","newTotalAmount","radio","checked","subtitle","e","preventDefault","minAmount","host","height","size","subscriptionId","CreditCard","Dollar","XCircle","Container","slideInUp","StyledTextarea","Span","withUser","UpdatePaymentMethodPopUp","RedXCircle","GrayXCircle","MenuItem","attrs","px","PopUpMenu","MenuSection","flexDirection","width","i18nReasons","NO_LONGER_WANT_TO_SUPPORT","UPDATING_ORDER","OTHER","cancelRecurringContributionMutation","RecurringContributionsPopUp","status","account","menuState","setMenuState","cancelReason","setCancelReason","cancelReasonMessage","setCancelReasonMessage","submitCancellation","loadingCancellation","mainMenu","cancelMenu","updateOrderMenu","paymentMethodMenu","target","reason","reasonCode","INFO","fromAccount","ORDER_STATUS","getPaymentMethodName","getPaymentMethodIcon","getPaymentMethodMetadata","Avatar","StyledCollectiveCard","StyledTag","StyledTooltip","manage","tag","RecurringContributionsCard","collective","isEditing","canEdit","isAdmin","onEdit","showPaymentMethod","props","isError","isRejected","REJECTED","isActive","ACTIVE","undefined","Boolean","isIncognito","totalAmount","totalDonations","position","minWidth","Grid","Image","fadeIn","StyledSelectFilter","EmptyCollectivesSectionImageSVG","FILTERS","MONTHLY","YEARLY","CANCELLED","I18nFilters","CollectiveCardContainer","div","filterContributions","contributions","filterName","isInactive","contrib","RecurringContributionsContainer","recurringContributions","LoggedInUser","isLoading","displayFilters","isAdminOfCollective","editingContributionId","setEditingContributionId","setFilter","displayedRecurringContributions","filteredContributions","nodes","some","c","filterOptions","collectiveNavbarFieldsFragment","managedOrderFragment","manageContributionsQuery"],"sourceRoot":""}